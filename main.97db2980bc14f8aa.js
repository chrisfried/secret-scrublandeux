(self.webpackChunkscrublandeux=self.webpackChunkscrublandeux||[]).push([[179],{3504:(Ea,Ma,ut)=>{"use strict";function Wr(n){return"function"==typeof n}let le=!1;const pt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else le&&console.log("RxJS: Back to a better error behavior. Thank you. <3");le=n},get useDeprecatedSynchronousErrorHandling(){return le}};function ls(n){setTimeout(()=>{throw n},0)}const Ca={closed:!0,next(n){},error(n){if(pt.useDeprecatedSynchronousErrorHandling)throw n;ls(n)},complete(){}},fi=Array.isArray||(n=>n&&"number"==typeof n.length);function ro(n){return null!==n&&"object"==typeof n}const $r=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class Tn{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_unsubscribe:i,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof Tn)t.remove(this);else if(null!==t)for(let s=0;s<t.length;++s)t[s].remove(this);if(Wr(i))try{i.call(this)}catch(s){e=s instanceof $r?bl(s.errors):[s]}if(fi(r)){let s=-1,o=r.length;for(;++s<o;){const a=r[s];if(ro(a))try{a.unsubscribe()}catch(c){e=e||[],c instanceof $r?e=e.concat(bl(c.errors)):e.push(c)}}}if(e)throw new $r(e)}add(e){let t=e;if(!e)return Tn.EMPTY;switch(typeof e){case"function":t=new Tn(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof Tn)){const s=t;t=new Tn,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof Tn){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function bl(n){return n.reduce((e,t)=>e.concat(t instanceof $r?t.errors:t),[])}Tn.EMPTY=((n=new Tn).closed=!0,n);const ve="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class oi extends Tn{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Ca;break;case 1:if(!e){this.destination=Ca;break}if("object"==typeof e){e instanceof oi?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Cs(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Cs(this,e,t,i)}}[ve](){return this}static create(e,t,i){const r=new oi(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Cs extends oi{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;Wr(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==Ca&&(o=Object.create(t),Wr(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;pt.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=pt;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):ls(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;ls(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);pt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),pt.useDeprecatedSynchronousErrorHandling)throw i;ls(i)}}__tryOrSetError(e,t,i){if(!pt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return pt.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(ls(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const us="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ds(n){return n}function xr(n){return 0===n.length?Ds:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let an=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function xl(n,e,t){if(n){if(n instanceof oi)return n;if(n[ve])return n[ve]()}return n||e||t?new oi(n,e,t):new oi(Ca)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||pt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),pt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){pt.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function Da(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof oi?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=Ta(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[us](){return this}pipe(...t){return 0===t.length?this:xr(t)(this)}toPromise(t){return new(t=Ta(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Ta(n){if(n||(n=pt.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const Aa=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class zs extends Tn{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class rd extends oi{constructor(e){super(e),this.destination=e}}let ln=(()=>{class n extends an{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ve](){return new rd(this)}lift(t){const i=new nu(this,this);return i.operator=t,i}next(t){if(this.closed)throw new Aa;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new Aa;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new Aa;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new Aa;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new Aa;return this.hasError?(t.error(this.thrownError),Tn.EMPTY):this.isStopped?(t.complete(),Tn.EMPTY):(this.observers.push(t),new zs(this,t))}asObservable(){const t=new an;return t.source=this,t}}return n.create=(e,t)=>new nu(e,t),n})();class nu extends ln{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):Tn.EMPTY}}function oc(n){return n&&"function"==typeof n.schedule}class Pt extends oi{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const $t=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},un=function An(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),ac=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function so(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const cc=n=>{if(n&&"function"==typeof n[us])return(n=>e=>{const t=n[us]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(ac(n))return $t(n);if(so(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ls),e))(n);if(n&&"function"==typeof n[un])return(n=>e=>{const t=n[un]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${ro(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Go(n,e,t,i,r=new Pt(n,t,i)){if(!r.closed)return e instanceof an?e.subscribe(r):cc(e)(r)}class Ts extends oi{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function gt(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new sd(n,e))}}class sd{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Uc(e,this.project,this.thisArg))}}class Uc extends oi{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function oo(n,e){return new an(t=>{const i=new Tn;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function cr(n,e){return e?function wp(n,e){if(null!=n){if(function zc(n){return n&&"function"==typeof n[us]}(n))return function od(n,e){return new an(t=>{const i=new Tn;return i.add(e.schedule(()=>{const r=n[us]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(so(n))return function xp(n,e){return new an(t=>{const i=new Tn;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(ac(n))return oo(n,e);if(function Ia(n){return n&&"function"==typeof n[un]}(n)||"string"==typeof n)return function iu(n,e){if(!n)throw new Error("Iterable cannot be null");return new an(t=>{const i=new Tn;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[un](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof an?n:new an(cc(n))}function lr(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(lr((r,s)=>cr(n(r,s)).pipe(gt((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new jo(n,t)))}class jo{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new ru(e,this.project,this.concurrent))}}class ru extends Ts{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,i)}_innerSub(e,t,i){const r=new Pt(this,t,i),s=this.destination;s.add(r);const o=Go(this,e,void 0,void 0,r);o!==r&&s.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,i,r,s){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function wl(n=Number.POSITIVE_INFINITY){return lr(Ds,n)}function lc(n,e){return e?oo(n,e):new an($t(n))}function uc(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return oc(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof an?n[0]:wl(e)(lc(n,t))}function dc(){return function(e){return e.lift(new Sl(e))}}class Sl{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new Mh(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class Mh extends oi{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class su extends an{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new Tn,e.add(this.source.subscribe(new Dh(this.getSubject(),this))),e.closed&&(this._connection=null,e=Tn.EMPTY)),e}refCount(){return dc()(this)}}const Ch=(()=>{const n=su.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Dh extends rd{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class Ih{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function Fh(){return new ln}function Ep(){return n=>dc()(function Ah(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new Ih(r,e));const s=Object.create(i,Ch);return s.source=i,s.subjectFactory=r,s}}(Fh)(n))}function Pi(n){for(let e in n)if(n[e]===Pi)return e;throw Error("Could not find renamed property on target object.")}function Rh(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Si(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Si).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ad(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Mp=Pi({__forward_ref__:Pi});function Ei(n){return n.__forward_ref__=Ei,n.toString=function(){return Si(this())},n}function Zt(n){return Ph(n)?n():n}function Ph(n){return"function"==typeof n&&n.hasOwnProperty(Mp)&&n.__forward_ref__===Ei}function cd(n){return n&&!!n.\u0275providers}const ld="https://g.co/ng/security#xss";class He extends Error{constructor(e,t){super(El(e,t)),this.code=e}}function El(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function bn(n){return"string"==typeof n?n:null==n?"":String(n)}function ud(n,e){throw new He(-201,!1)}function As(n,e){null==n&&function bi(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function dd(n){return Dp(n,Ml)||Dp(n,Oh)}function Dp(n,e){return n.hasOwnProperty(e)?n[e]:null}function kh(n){return n&&(n.hasOwnProperty(Kr)||n.hasOwnProperty(hd))?n[Kr]:null}const Ml=Pi({\u0275prov:Pi}),Kr=Pi({\u0275inj:Pi}),Oh=Pi({ngInjectableDef:Pi}),hd=Pi({ngInjectorDef:Pi});var Jt=(()=>((Jt=Jt||{})[Jt.Default=0]="Default",Jt[Jt.Host=1]="Host",Jt[Jt.Self=2]="Self",Jt[Jt.SkipSelf=4]="SkipSelf",Jt[Jt.Optional=8]="Optional",Jt))();let ou;function co(n){const e=ou;return ou=n,e}function fd(n,e,t){const i=dd(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Jt.Optional?null:void 0!==e?e:void ud(Si(n))}const Mi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fc={},js="__NG_DI_FLAG__",cu="ngTempTokenPath",Lh="ngTokenPath",Nh=/\n/gm,Rp="\u0275",Bh="__source";let Co;function ur(n){const e=Co;return Co=n,e}function db(n,e=Jt.Default){if(void 0===Co)throw new He(-203,!1);return null===Co?fd(n,void 0,e):Co.get(n,e&Jt.Optional?null:void 0,e)}function Me(n,e=Jt.Default){return(function Ip(){return ou}()||db)(Zt(n),e)}function dn(n,e=Jt.Default){return Me(n,pd(e))}function pd(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ut(n){const e=[];for(let t=0;t<n.length;t++){const i=Zt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new He(900,!1);let r,s=Jt.Default;for(let o=0;o<i.length;o++){const a=i[o],c=R0(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(Me(r,s))}else e.push(Me(i))}return e}function Gc(n,e){return n[js]=e,n.prototype[js]=e,n}function R0(n){return n[js]}function pc(n){return{toString:n}.toString()}var Do=(()=>((Do=Do||{})[Do.OnPush=0]="OnPush",Do[Do.Default=1]="Default",Do))(),Wo=(()=>(function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Wo||(Wo={})),Wo))();const Ra={},_i=[],md=Pi({\u0275cmp:Pi}),Vh=Pi({\u0275dir:Pi}),dr=Pi({\u0275pipe:Pi}),Hh=Pi({\u0275mod:Pi}),Pa=Pi({\u0275fac:Pi}),hr=Pi({__NG_ELEMENT_ID__:Pi});let kp=0;function ai(n){return pc(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Do.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||_i,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Wo.Emulated,id:"c"+kp++,styles:n.styles||_i,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,o=n.features;return r.inputs=Uh(n.inputs,i),r.outputs=Uh(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(gd).filter(lo):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Is).filter(lo):null,r})}function gd(n){return yi(n)||Ii(n)}function lo(n){return null!==n}function Mt(n){return pc(()=>({type:n.type,bootstrap:n.bootstrap||_i,declarations:n.declarations||_i,imports:n.imports||_i,exports:n.exports||_i,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Uh(n,e){if(null==n)return Ra;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ht=ai;function Gi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function yi(n){return n[md]||null}function Ii(n){return n[Vh]||null}function Is(n){return n[dr]||null}function uo(n,e){const t=n[Hh]||null;if(!t&&!0===e)throw new Error(`Type ${Si(n)} does not have '\u0275mod' property.`);return t}const Or=0,bt=1,xn=2,Ki=3,ei=4,Ws=5,Lr=6,Cl=7,Yi=8,rt=9,w=10,On=11,lu=12,ka=13,aa=14,Tr=15,Xr=16,Dl=17,mc=18,Zr=19,ca=20,wr=21,Qt=22,ho=1,$s=2,Al=7,To=8,Yn=9,ds=10;function fo(n){return Array.isArray(n)&&"object"==typeof n[ho]}function $o(n){return Array.isArray(n)&&!0===n[ho]}function Nr(n){return 0!=(4&n.flags)}function hs(n){return n.componentOffset>-1}function la(n){return 1==(1&n.flags)}function Ao(n){return null!==n.template}function Np(n){return 0!=(256&n[xn])}function Un(n,e){return n.hasOwnProperty(Pa)?n[Pa]:null}class fr{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Dn(){return vd}function vd(n){return n.type.prototype.ngOnChanges&&(n.setInput=mo),N0}function N0(){const n=hu(this),e=n?.current;if(e){const t=n.previous;if(t===Ra)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function mo(n,e,t,i){const r=this.declaredInputs[t],s=hu(n)||function jc(n,e){return n[vc]=e}(n,{previous:Ra,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new fr(c&&c.currentValue,e,a===Ra),n[i]=e}Dn.ngInherit=!0;const vc="__ngSimpleChanges__";function hu(n){return n[vc]||null}const Rn=function(n,e,t){},pu="svg";function Yt(n){for(;Array.isArray(n);)n=n[Or];return n}function Wh(n,e){return Yt(e[n])}function qs(n,e){return Yt(e[n.index])}function Oa(n,e){return n.data[e]}function _c(n,e){return n[e]}function Fs(n,e){const t=e[n];return fo(t)?t:t[Or]}function gu(n){return 64==(64&n[xn])}function h(n,e){return null==e?null:n[e]}function f(n){n[mc]=0}function v(n,e){n[Ws]+=e;let t=n,i=n[Ki];for(;null!==i&&(1===e&&1===t[Ws]||-1===e&&0===t[Ws]);)i[Ws]+=e,t=i,i=i[Ki]}const b={lFrame:Jr(null),bindingsEnabled:!0};function U(){return b.bindingsEnabled}function C(){return b.lFrame.lView}function B(){return b.lFrame.tView}function P(n){return b.lFrame.contextLView=n,n[Yi]}function V(n){return b.lFrame.contextLView=null,n}function L(){let n=$();for(;null!==n&&64===n.type;)n=n.parent;return n}function $(){return b.lFrame.currentTNode}function Q(n,e){const t=b.lFrame;t.currentTNode=n,t.isParent=e}function te(){return b.lFrame.isParent}function we(){b.lFrame.isParent=!1}function ee(){const n=b.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function be(){return b.lFrame.bindingIndex++}function ce(n){const e=b.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ie(n,e){const t=b.lFrame;t.bindingIndex=t.bindingRootIndex=n,Nt(e)}function Nt(n){b.lFrame.currentDirectiveIndex=n}function Fn(){return b.lFrame.currentQueryIndex}function Y(n){b.lFrame.currentQueryIndex=n}function ci(n){const e=n[bt];return 2===e.type?e.declTNode:1===e.type?n[Lr]:null}function ti(n,e,t){if(t&Jt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Jt.Host||(r=ci(s),null===r||(s=s[Tr],10&r.type))););if(null===r)return!1;e=r,n=s}const i=b.lFrame=sn();return i.currentTNode=e,i.lView=n,!0}function Ci(n){const e=sn(),t=n[bt];b.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sn(){const n=b.lFrame,e=null===n?null:n.child;return null===e?Jr(n):e}function Jr(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function fs(){const n=b.lFrame;return b.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Rs=fs;function zn(){const n=fs();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Jn(){return b.lFrame.selectedIndex}function pr(n){b.lFrame.selectedIndex=n}function rn(){const n=b.lFrame;return Oa(n.tView,n.selectedIndex)}function ji(){b.lFrame.currentNamespace=pu}function ua(){!function B0(){b.lFrame.currentNamespace=null}()}function Io(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),d&&((n.viewHooks||(n.viewHooks=[])).push(t,d),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,d)),null!=p&&(n.destroyHooks||(n.destroyHooks=[])).push(t,p)}}function _u(n,e,t){pi(n,e,3,t)}function Fi(n,e,t,i){(3&n[xn])===t&&pi(n,e,t,i)}function Fo(n,e){let t=n[xn];(3&t)===e&&(t&=2047,t+=1,n[xn]=t)}function pi(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[mc]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[mc]+=65536),(a<s||-1==s)&&(yc(n,t,e,c),n[mc]=(4294901760&n[mc])+c+2),c++}function yc(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[xn]>>11<n[mc]>>16&&(3&n[xn])===e){n[xn]+=2048,Rn(4,a,s);try{s.call(a)}finally{Rn(5,a,s)}}}else{Rn(4,a,s);try{s.call(a)}finally{Rn(5,a,s)}}}const ha=-1;class $h{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Up(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];mb(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function pb(n){return 3===n||4===n||6===n}function mb(n){return 64===n.charCodeAt(0)}function yu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||_d(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function _d(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function qh(n){return n!==ha}function zp(n){return 32767&n}function Gp(n,e){let t=function gb(n){return n>>16}(n),i=e;for(;t>0;)i=i[Tr],t--;return i}let La=!0;function yd(n){const e=La;return La=n,e}const qo=255,vb=5;let _b=0;const Na={};function Ba(n,e){const t=yb(n,e);if(-1!==t)return t;const i=e[bt];i.firstCreatePass&&(n.injectorIndex=e.length,jp(i.data,n),jp(e,null),jp(i.blueprint,null));const r=xd(n,e),s=n.injectorIndex;if(qh(r)){const o=zp(r),a=Gp(r,e),c=a[bt].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=r,s}function jp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function xd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Sd(r),null===i)return ha;if(t++,r=r[Tr],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ha}function H0(n,e,t){!function Kh(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(hr)&&(i=t[hr]),null==i&&(i=t[hr]=_b++);const r=i&qo;e.data[n+(r>>vb)]|=1<<r}(n,e,t)}function ps(n,e,t){if(t&Jt.Optional||void 0!==n)return n;ud()}function Wp(n,e,t,i){if(t&Jt.Optional&&void 0===i&&(i=null),!(t&(Jt.Self|Jt.Host))){const r=n[rt],s=co(void 0);try{return r?r.get(e,i,t&Jt.Optional):fd(e,i,t&Jt.Optional)}finally{co(s)}}return ps(i,0,t)}function U0(n,e,t,i=Jt.Default,r){if(null!==n){if(1024&e[xn]){const o=function uM(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[xn]&&!(256&o[xn]);){const a=Va(s,o,t,i|Jt.Self,Na);if(a!==Na)return a;let c=s.parent;if(!c){const d=o[wr];if(d){const p=d.get(t,Na,i);if(p!==Na)return p}c=Sd(o),o=o[Tr]}s=c}return r}(n,e,t,i,Na);if(o!==Na)return o}const s=Va(n,e,t,i,Na);if(s!==Na)return s}return Wp(e,t,i,r)}function Va(n,e,t,i,r){const s=function xb(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(hr)?n[hr]:void 0;return"number"==typeof e?e>=0?e&qo:lM:e}(t);if("function"==typeof s){if(!ti(e,n,i))return i&Jt.Host?ps(r,0,i):Wp(e,t,i,r);try{const o=s(i);if(null!=o||i&Jt.Optional)return o;ud()}finally{Rs()}}else if("number"==typeof s){let o=null,a=yb(n,e),c=ha,d=i&Jt.Host?e[Xr][Lr]:null;for((-1===a||i&Jt.SkipSelf)&&(c=-1===a?xd(n,e):e[a+8],c!==ha&&$p(i,!1)?(o=e[bt],a=zp(c),e=Gp(c,e)):a=-1);-1!==a;){const p=e[bt];if(Ks(s,a,p.data)){const g=z0(a,e,t,o,i,d);if(g!==Na)return g}c=e[a+8],c!==ha&&$p(i,e[bt].data[a+8]===d)&&Ks(s,a,e)?(o=p,a=zp(c),e=Gp(c,e)):a=-1}}return r}function z0(n,e,t,i,r,s){const o=e[bt],a=o.data[n+8],p=bu(a,o,t,null==i?hs(a)&&La:i!=o&&0!=(3&a.type),r&Jt.Host&&s===a);return null!==p?Ko(e,o,p,a):Na}function bu(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,p=s>>20,_=r?a+p:n.directiveEnd;for(let y=i?a:a+p;y<_;y++){const x=o[y];if(y<c&&t===x||y>=c&&x.type===t)return y}if(r){const y=o[c];if(y&&Ao(y)&&y.type===t)return c}return null}function Ko(n,e,t,i){let r=n[t];const s=e.data;if(function sM(n){return n instanceof $h}(r)){const o=r;o.resolving&&function Cp(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new He(-200,`Circular dependency in DI detected for ${n}${t}`)}(function vi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():bn(n)}(s[t]));const a=yd(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?co(o.injectImpl):null;ti(n,i,Jt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function $c(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=vd(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&co(c),yd(a),o.resolving=!1,Rs()}}return r}function Ks(n,e,t){return!!(t[e+(n>>vb)]&1<<n)}function $p(n,e){return!(n&Jt.Self||n&Jt.Host&&e)}class wd{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return U0(this._tNode,this._lView,e,pd(i),t)}}function lM(){return new wd(L(),C())}function Ir(n){return pc(()=>{const e=n.prototype.constructor,t=e[Pa]||Yh(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Pa]||Yh(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Yh(n){return Ph(n)?()=>{const e=Yh(Zt(n));return e&&e()}:Un(n)}function Sd(n){const e=n[bt],t=e.type;return 2===t?e.declTNode:1===t?n[Lr]:null}function qc(n){return function bb(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(pb(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(L(),n)}const Md="__parameters__";function Il(n,e,t){return pc(()=>{const i=function G0(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,d,p){const g=c.hasOwnProperty(Md)?c[Md]:Object.defineProperty(c,Md,{value:[]})[Md];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class it{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Kc(n,e){n.forEach(t=>Array.isArray(t)?Kc(t,e):e(t))}function W0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Dd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Zh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Ps(n,e,t){let i=Td(n,e);return i>=0?n[1|i]=t:(i=~i,function gM(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Kp(n,e){const t=Td(n,e);if(t>=0)return n[1|t]}function Td(n,e){return function Yo(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Jh=Gc(Il("Inject",n=>({token:n})),-1),pa=Gc(Il("Optional"),8),Fl=Gc(Il("SkipSelf"),4);var Ys=(()=>((Ys=Ys||{})[Ys.Important=1]="Important",Ys[Ys.DashCase=2]="DashCase",Ys))();const Qp=new Map;let TM=0;const Pl="__ngContext__";function kt(n,e){fo(e)?(n[Pl]=e[ca],function AM(n){Qp.set(n[ca],n)}(e)):n[Pl]=e}let nm;function sv(n,e){return nm(n,e)}function sf(n){const e=n[Ki];return $o(e)?e[Ki]:e}function af(n){return im(n[ka])}function ov(n){return im(n[ei])}function im(n){for(;null!==n&&!$o(n);)n=n[ei];return n}function Id(n,e,t,i,r){if(null!=i){let s,o=!1;$o(i)?s=i:fo(i)&&(o=!0,i=i[Or]);const a=Yt(i);0===n&&null!==t?null==r?za(e,t,a):Ll(e,t,a,r||null,!0):1===n&&null!==t?Ll(e,t,a,r||null,!0):2===n?function cm(n,e,t){const i=sm(n,e);i&&function BM(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function zM(n,e,t,i,r){const s=t[Al];s!==Yt(t)&&Id(e,n,i,s,r);for(let a=ds;a<t.length;a++){const c=t[a];Rd(c[bt],c,n,e,i,s)}}(e,n,s,t,r)}}function rm(n,e,t){return n.createElement(e,t)}function $b(n,e){const t=n[Yn],i=t.indexOf(e),r=e[Ki];512&e[xn]&&(e[xn]&=-513,v(r,-1)),t.splice(i,1)}function cf(n,e){if(n.length<=ds)return;const t=ds+e,i=n[t];if(i){const r=i[Dl];null!==r&&r!==n&&$b(r,i),e>0&&(n[t-1][ei]=i[ei]);const s=Dd(n,ds+e);!function kM(n,e){Rd(n,e,e[On],2,null,null),e[Or]=null,e[Lr]=null}(i[bt],i);const o=s[Zr];null!==o&&o.detachView(s[bt]),i[Ki]=null,i[ei]=null,i[xn]&=-65}return i}function cv(n,e){if(!(128&e[xn])){const t=e[On];t.destroyNode&&Rd(n,e,t,3,null,null),function NM(n){let e=n[ka];if(!e)return Mu(n[bt],n);for(;e;){let t=null;if(fo(e))t=e[ka];else{const i=e[ds];i&&(t=i)}if(!t){for(;e&&!e[ei]&&e!==n;)fo(e)&&Mu(e[bt],e),e=e[Ki];null===e&&(e=n),fo(e)&&Mu(e[bt],e),t=e&&e[ei]}e=t}}(e)}}function Mu(n,e){if(!(128&e[xn])){e[xn]&=-65,e[xn]|=128,function qb(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof $h)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];Rn(4,a,c);try{c.call(a)}finally{Rn(5,a,c)}}else{Rn(4,r,s);try{s.call(r)}finally{Rn(5,r,s)}}}}}(n,e),function lv(n,e){const t=n.cleanup,i=e[Cl];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[Cl]=null}}(n,e),1===e[bt].type&&e[On].destroy();const t=e[Dl];if(null!==t&&$o(e[Ki])){t!==e[Ki]&&$b(t,e);const i=e[Zr];null!==i&&i.detachView(n)}!function Xc(n){Qp.delete(n[ca])}(e)}}function uv(n,e,t){return function lf(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Or];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Wo.None||s===Wo.Emulated)return null}return qs(i,t)}}(n,e.parent,t)}function Ll(n,e,t,i,r){n.insertBefore(e,t,i,r)}function za(n,e,t){n.appendChild(e,t)}function Nl(n,e,t,i,r){null!==i?Ll(n,e,t,i,r):za(n,e,t)}function sm(n,e){return n.parentNode(e)}function Kb(n,e,t){return Xb(n,e,t)}let dv,um,dm,Xb=function Yb(n,e,t){return 40&n.type?qs(n,t):null};function om(n,e,t,i){const r=uv(n,i,e),s=e[On],a=Kb(i.parent||e[Lr],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)Nl(s,r,t[c],a,!1);else Nl(s,r,t,a,!1);void 0!==dv&&dv(s,i,e,t,r)}function am(n,e){if(null!==e){const t=e.type;if(3&t)return qs(e,n);if(4&t)return hv(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return am(n,i);{const r=n[e.index];return $o(r)?hv(-1,r):Yt(r)}}if(32&t)return sv(e,n)()||Yt(n[e.index]);{const i=Jb(n,e);return null!==i?Array.isArray(i)?i[0]:am(sf(n[Xr]),i):am(n,e.next)}}return null}function Jb(n,e){return null!==e?n[Xr][Lr].projection[e.projection]:null}function hv(n,e){const t=ds+n+1;if(t<e.length){const i=e[t],r=i[bt].firstChild;if(null!==r)return am(i,r)}return e[Al]}function lm(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&kt(Yt(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)lm(n,e,t.child,i,r,s,!1),Id(e,n,r,a,s);else if(32&c){const d=sv(t,i);let p;for(;p=d();)Id(e,n,r,p,s);Id(e,n,r,a,s)}else 16&c?Qb(n,e,i,t,r,s):Id(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Rd(n,e,t,i,r,s){lm(t,i,n.firstChild,e,r,s,!1)}function Qb(n,e,t,i,r,s){const o=t[Xr],c=o[Lr].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)Id(e,n,r,c[d],s);else lm(n,e,c,o[Ki],r,s,!0)}function tx(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function nx(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Up(n,e,i),null!==r&&tx(n,e,r),null!==s&&function GM(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Pd(n){return function fv(){if(void 0===um&&(um=null,Mi.trustedTypes))try{um=Mi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return um}()?.createHTML(n)||n}class Cu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ld})`}}class qM extends Cu{getTypeName(){return"HTML"}}class KM extends Cu{getTypeName(){return"Style"}}class YM extends Cu{getTypeName(){return"Script"}}class XM extends Cu{getTypeName(){return"URL"}}class ZM extends Cu{getTypeName(){return"ResourceURL"}}function Zo(n){return n instanceof Cu?n.changingThisBreaksApplicationSecurity:n}function Sc(n,e){const t=function JM(n){return n instanceof Cu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ld})`)}return t===e}class rC{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Pd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class sC{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Pd(e),t}}const mv=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function uf(n){return(n=String(n)).match(mv)?n:"unsafe:"+n}function Jc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function df(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const ax=Jc("area,br,col,hr,img,wbr"),cx=Jc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lx=Jc("rp,rt"),pm=df(ax,df(cx,Jc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),df(lx,Jc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),df(lx,cx)),gv=Jc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ux=df(gv,Jc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Jc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),aC=Jc("script,style,template");class cC{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!pm.hasOwnProperty(t))return this.sanitizedSomething=!0,!aC.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!ux.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;gv[a]&&(c=uf(c)),this.buf.push(" ",o,'="',dx(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();pm.hasOwnProperty(t)&&!ax.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(dx(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const lC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uC=/([^\#-~ |!])/g;function dx(n){return n.replace(/&/g,"&amp;").replace(lC,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(uC,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mm;function hx(n,e){let t=null;try{mm=mm||function ox(n){const e=new sC(n);return function oC(){try{return!!(new window.DOMParser).parseFromString(Pd(""),"text/html")}catch{return!1}}()?new rC(e):e}(n);let i=e?String(e):"";t=mm.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=mm.getInertBodyElement(i)}while(i!==s);return Pd((new cC).sanitizeChildren(_v(t)||t))}finally{if(t){const i=_v(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function _v(n){return"content"in n&&function dC(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Di=(()=>((Di=Di||{})[Di.NONE=0]="NONE",Di[Di.HTML=1]="HTML",Di[Di.STYLE=2]="STYLE",Di[Di.SCRIPT=3]="SCRIPT",Di[Di.URL=4]="URL",Di[Di.RESOURCE_URL=5]="RESOURCE_URL",Di))();function hf(n){const e=function ff(){const n=C();return n&&n[lu]}();return e?e.sanitize(Di.URL,n)||"":Sc(n,"URL")?Zo(n):uf(bn(n))}const gm=new it("ENVIRONMENT_INITIALIZER"),vx=new it("INJECTOR",-1),_x=new it("INJECTOR_DEF_TYPES");class yx{get(e,t=fc){if(t===fc){const i=new Error(`NullInjectorError: No provider for ${Si(e)}!`);throw i.name="NullInjectorError",i}return t}}function bx(n){return{\u0275providers:n}}function gC(...n){return{\u0275providers:xx(0,n),\u0275fromNgModule:!0}}function xx(n,...e){const t=[],i=new Set;let r;return Kc(e,s=>{const o=s;bv(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&wx(r,t),t}function wx(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];kd(r,s=>{e.push(s)})}}function bv(n,e,t,i){if(!(n=Zt(n)))return!1;let r=null,s=kh(n);const o=!s&&yi(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=kh(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of c)bv(d,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;i.add(r);try{Kc(s.imports,p=>{bv(p,e,t,i)&&(d||(d=[]),d.push(p))})}finally{}void 0!==d&&wx(d,e)}if(!a){const d=Un(r)||(()=>new r);e.push({provide:r,useFactory:d,deps:_i},{provide:_x,useValue:r,multi:!0},{provide:gm,useValue:()=>Me(r),multi:!0})}const c=s.providers;null==c||a||kd(c,p=>{e.push(p)})}}return r!==n&&void 0!==n.providers}function kd(n,e){for(let t of n)cd(t)&&(t=t.\u0275providers),Array.isArray(t)?kd(t,e):e(t)}const vC=Pi({provide:String,useValue:Pi});function vm(n){return null!==n&&"object"==typeof n&&vC in n}function Bl(n){return"function"==typeof n}const ym=new it("Set Injector scope."),pf={},_C={};let wv;function bm(){return void 0===wv&&(wv=new yx),wv}class Jo{}class mf extends Jo{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Cv(e,o=>this.processProvider(o)),this.records.set(vx,Od(void 0,this)),r.has("environment")&&this.records.set(Jo,Od(void 0,this));const s=this.records.get(ym);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_x.multi,_i,Jt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=ur(this),i=co(void 0);try{return e()}finally{ur(t),co(i)}}get(e,t=fc,i=Jt.Default){this.assertNotDestroyed(),i=pd(i);const r=ur(this),s=co(void 0);try{if(!(i&Jt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function wC(n){return"function"==typeof n||"object"==typeof n&&n instanceof it}(e)&&dd(e);a=c&&this.injectableDefInScope(c)?Od(Sv(e),pf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Jt.Self?bm():this.parent).get(e,t=i&Jt.Optional&&t===fc?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[cu]=o[cu]||[]).unshift(Si(e)),r)throw o;return function P0(n,e,t,i){const r=n[cu];throw e[Bh]&&r.unshift(e[Bh]),n.message=function k0(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Rp?n.slice(2):n;let r=Si(e);if(Array.isArray(e))r=e.map(Si).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Si(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Nh,"\n  ")}`}("\n"+n.message,r,t,i),n[Lh]=r,n[cu]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{co(s),ur(r)}}resolveInjectorInitializers(){const e=ur(this),t=co(void 0);try{const i=this.get(gm.multi,_i,Jt.Self);for(const r of i)r()}finally{ur(e),co(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Si(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processProvider(e){let t=Bl(e=Zt(e))?e:Zt(e&&e.provide);const i=function Ev(n){return vm(n)?Od(void 0,n.useValue):Od(Mv(n),pf)}(e);if(Bl(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Od(void 0,pf,!0),r.factory=()=>Ut(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===pf&&(t.value=_C,t.value=t.factory()),"object"==typeof t.value&&t.value&&function xC(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Zt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Sv(n){const e=dd(n),t=null!==e?e.factory:Un(n);if(null!==t)return t;if(n instanceof it)throw new He(204,!1);if(n instanceof Function)return function yC(n){const e=n.length;if(e>0)throw Zh(e,"?"),new He(204,!1);const t=function Tp(n){const e=n&&(n[Ml]||n[Oh]);return e?(function Ap(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),e):null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new He(204,!1)}function Mv(n,e,t){let i;if(Bl(n)){const r=Zt(n);return Un(r)||Sv(r)}if(vm(n))i=()=>Zt(n.useValue);else if(function _m(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Ut(n.deps||[]));else if(function xv(n){return!(!n||!n.useExisting)}(n))i=()=>Me(Zt(n.useExisting));else{const r=Zt(n&&(n.useClass||n.provide));if(!function bC(n){return!!n.deps}(n))return Un(r)||Sv(r);i=()=>new r(...Ut(n.deps))}return i}function Od(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Cv(n,e){for(const t of n)Array.isArray(t)?Cv(t,e):t&&cd(t)?Cv(t.\u0275providers,e):e(t)}class SC{}class Ex{}class MC{resolveComponentFactory(e){throw function EC(n){const e=Error(`No component factory found for ${Si(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Du=(()=>{class n{}return n.NULL=new MC,n})();function Ga(){return Ld(L(),C())}function Ld(n,e){return new Gn(qs(n,e))}let Gn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Ga,n})();function Tu(n){return n instanceof Gn?n.nativeElement:n}class gn{}let Qc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ro(){const n=C(),t=Fs(L().index,n);return(fo(t)?t:n)[On]}(),n})(),Fr=(()=>{class n{}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>null}),n})();class Au{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Vl=new Au("15.2.1"),Dv={},Tv="ngOriginalError";function Av(n){return n[Tv]}class el{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Av(e);for(;t&&Av(t);)t=Av(t);return t||null}}function nl(n){return n instanceof Function?n():n}function Nd(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const wm="ng-template";function FC(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==Nd(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Fv(n){return 4===n.type&&n.value!==wm}function Sm(n,e,t){return e===(4!==n.type||t?n.value:wm)}function Qo(n,e,t){let i=4;const r=n.attrs||[],s=function kC(n){for(let e=0;e<n.length;e++)if(pb(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!Sm(n,c,t)||""===c&&1===e.length){if(Zs(i))return!1;o=!0}}else{const d=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!FC(n.attrs,d,t)){if(Zs(i))return!1;o=!0}continue}const g=RC(8&i?"class":c,r,Fv(n),t);if(-1===g){if(Zs(i))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":r[g+1].toLowerCase();const y=8&i?_:null;if(y&&-1!==Nd(y,d,0)||2&i&&d!==_){if(Zs(i))return!1;o=!0}}}}else{if(!o&&!Zs(i)&&!Zs(c))return!1;if(o&&Zs(c))continue;o=!1,i=c|1&i}}return Zs(i)||o}function Zs(n){return 0==(1&n)}function RC(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function OC(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Tx(n,e,t=!1){for(let i=0;i<e.length;i++)if(Qo(n,e[i],t))return!0;return!1}function Ax(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Ec(n,e){return n?":not("+e.trim()+")":e}function Ln(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Zs(o)&&(e+=Ec(s,r),r=""),i=o,s=s||!Zs(i);t++}return""!==r&&(e+=Ec(s,r)),e}const Sn={};function Ge(n){Ti(B(),C(),Jn()+n,!1)}function Ti(n,e,t,i){if(!i)if(3==(3&e[xn])){const s=n.preOrderCheckHooks;null!==s&&_u(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Fi(e,s,0,t)}pr(t)}function Ox(n,e=null,t=null,i){const r=Lx(n,e,t,i);return r.resolveInjectorInitializers(),r}function Lx(n,e=null,t=null,i,r=new Set){const s=[t||_i,gC(n)];return i=i||("object"==typeof n?void 0:Si(n)),new mf(s,e||bm(),i||null,r)}let ms=(()=>{class n{static create(t,i){if(Array.isArray(t))return Ox({name:""},i,t,"");{const r=t.name??"";return Ox({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=fc,n.NULL=new yx,n.\u0275prov=Xe({token:n,providedIn:"any",factory:()=>Me(vx)}),n.__NG_ELEMENT_ID__=-1,n})();function ae(n,e=Jt.Default){const t=C();return null===t?Me(n,e):U0(L(),t,Zt(n),e)}function Hl(){throw new Error("invalid")}function qx(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];Y(t[i]),o.contentQueries(2,e[s],s)}}}function Cm(n,e,t,i,r,s,o,a,c,d,p){const g=e.blueprint.slice();return g[Or]=r,g[xn]=76|i,(null!==p||n&&1024&n[xn])&&(g[xn]|=1024),f(g),g[Ki]=g[Tr]=n,g[Yi]=t,g[w]=o||n&&n[w],g[On]=a||n&&n[On],g[lu]=c||n&&n[lu]||null,g[rt]=d||n&&n[rt]||null,g[Lr]=s,g[ca]=function Bb(){return TM++}(),g[wr]=p,g[Xr]=2==e.type?n[Xr]:g,g}function Vd(n,e,t,i,r){let s=n.data[e];if(null===s)s=function Nv(n,e,t,i,r){const s=$(),o=te(),c=n.data[e]=function XC(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function pe(){return b.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function J(){const n=b.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Q(s,!0),s}function gf(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Bv(n,e,t){Ci(e);try{const i=n.viewQuery;null!==i&&vf(1,i,t);const r=n.template;null!==r&&Xx(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qx(n,e),n.staticViewQueries&&vf(2,n.viewQuery,t);const s=n.components;null!==s&&function Yx(n,e){for(let t=0;t<e.length;t++)l2(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[xn]&=-5,zn()}}function Dm(n,e,t,i){const r=e[xn];if(128!=(128&r)){Ci(e);try{f(e),function de(n){return b.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Xx(n,e,t,2,i);const o=3==(3&r);if(o){const d=n.preOrderCheckHooks;null!==d&&_u(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Fi(e,d,0,null),Fo(e,0)}if(function a2(n){for(let e=af(n);null!==e;e=ov(e)){if(!e[$s])continue;const t=e[Yn];for(let i=0;i<t.length;i++){const r=t[i];512&r[xn]||v(r[Ki],1),r[xn]|=512}}}(e),function Yv(n){for(let e=af(n);null!==e;e=ov(e))for(let t=ds;t<e.length;t++){const i=e[t],r=i[bt];gu(i)&&Dm(r,i,r.template,i[Yi])}}(e),null!==n.contentQueries&&qx(n,e),o){const d=n.contentCheckHooks;null!==d&&_u(e,d)}else{const d=n.contentHooks;null!==d&&Fi(e,d,1),Fo(e,1)}!function qC(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)pr(~r);else{const s=r,o=t[++i],a=t[++i];Ie(o,s),a(2,e[s])}}}finally{pr(-1)}}(n,e);const a=n.components;null!==a&&function Kx(n,e){for(let t=0;t<e.length;t++)c2(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&vf(2,c,i),o){const d=n.viewCheckHooks;null!==d&&_u(e,d)}else{const d=n.viewHooks;null!==d&&Fi(e,d,2),Fo(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[xn]&=-41,512&e[xn]&&(e[xn]&=-513,v(e[Ki],-1))}finally{zn()}}}function Xx(n,e,t,i,r){const s=Jn(),o=2&i;try{pr(-1),o&&e.length>Qt&&Ti(n,e,Qt,!1),Rn(o?2:0,r),t(i,r)}finally{pr(s),Rn(o?3:1,r)}}function Vv(n,e,t){if(Nr(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Hv(n,e,t){U()&&(function e2(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;hs(t)&&function s2(n,e,t){const i=qs(e,n),r=Zx(t),s=n[w],o=Am(n,Cm(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ba(t,e),kt(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],d=Ko(e,n,a,t);kt(d,e),null!==o&&o2(0,a-r,d,c,0,o),Ao(c)&&(Fs(t.index,e)[Yi]=Ko(e,n,a,t))}}(n,e,t,qs(t,e)),64==(64&t.flags)&&s1(n,e,t))}function Uv(n,e,t=qs){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function Zx(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=zv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function zv(n,e,t,i,r,s,o,a,c,d){const p=Qt+i,g=p+r,_=function KC(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Sn);return t}(p,g),y="function"==typeof d?d():d;return _[bt]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1}}function Jx(n,e,t,i){const r=l1(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&u1(n).push(i,r.length-1))}function Qx(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?e1(t,e,r,s):i.hasOwnProperty(r)&&e1(t,e,i[r],s)}return t}function e1(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function ea(n,e,t,i,r,s,o,a){const c=qs(e,t);let p,d=e.inputs;!a&&null!=d&&(p=d[i])?(Jv(n,t,p,i,r),hs(e)&&t1(t,e.index)):3&e.type&&(i=function JC(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function t1(n,e){const t=Fs(e,n);16&t[xn]||(t[xn]|=32)}function Gv(n,e,t,i){if(U()){const r=null===i?null:{"":-1},s=function jv(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Tx(e,o.selectors,!1))if(i||(i=[]),Ao(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Wv(n,e,a.length)}else i.unshift(o),Wv(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Tm(n,e,t,o,r,a),r&&function n2(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new He(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=yu(t.mergedAttrs,t.attrs)}function Tm(n,e,t,i,r,s){for(let d=0;d<i.length;d++)H0(Ba(t,e),n,i[d].type);!function Po(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let d=0;d<i.length;d++){const p=i[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,c=gf(n,e,i.length,null);for(let d=0;d<i.length;d++){const p=i[d];t.mergedAttrs=yu(t.mergedAttrs,p.hostAttrs),$v(n,t,e,c,p),r2(c,p,r),null!==p.contentQueries&&(t.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=64);const g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),c++}!function ZC(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,d=null;for(let p=e.directiveStart;p<r;p++){const g=s[p],_=t?t.get(g):null,x=_?_.outputs:null;c=Qx(g.inputs,p,c,_?_.inputs:null),d=Qx(g.outputs,p,d,x);const T=null===c||null===o||Fv(e)?null:Kv(c,p,o);a.push(T)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=d}(n,t,s)}function s1(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function Bt(){return b.lFrame.currentDirectiveIndex}();try{pr(s);for(let a=i;a<r;a++){const c=n.data[a],d=e[a];Nt(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&t2(c,d)}}finally{pr(-1),Nt(o)}}function t2(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Wv(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function r2(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ao(e)&&(t[""]=n)}}function $v(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Un(r.type)),o=new $h(s,Ao(r),ae);n.blueprint[i]=o,t[i]=o,function n1(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function r1(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,gf(n,t,r.hostVars,Sn),r)}function Mc(n,e,t,i,r,s){const o=qs(n,e);!function qv(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?bn(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[On],o,s,n.value,t,i,r)}function o2(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const d=o[c++],p=o[c++],g=o[c++];null!==a?i.setInput(t,g,d,p):t[p]=g}}}function Kv(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function o1(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function c2(n,e){const t=Fs(e,n);if(gu(t)){const i=t[bt];48&t[xn]?Dm(i,t,i.template,t[Yi]):t[Ws]>0&&Xv(t)}}function Xv(n){for(let i=af(n);null!==i;i=ov(i))for(let r=ds;r<i.length;r++){const s=i[r];if(gu(s))if(512&s[xn]){const o=s[bt];Dm(o,s,o.template,s[Yi])}else s[Ws]>0&&Xv(s)}const t=n[bt].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Fs(t[i],n);gu(r)&&r[Ws]>0&&Xv(r)}}function l2(n,e){const t=Fs(e,n),i=t[bt];(function a1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Bv(i,t,t[Yi])}function Am(n,e){return n[ka]?n[aa][ei]=e:n[ka]=e,n[aa]=e,e}function Zv(n){for(;n;){n[xn]|=32;const e=sf(n);if(Np(n)&&!e)return n;n=e}return null}function Im(n,e,t,i=!0){const r=e[w];r.begin&&r.begin();try{Dm(n,e,n.template,t)}catch(o){throw i&&h1(e,o),o}finally{r.end&&r.end()}}function vf(n,e,t){Y(0),e(n,t)}function l1(n){return n[Cl]||(n[Cl]=[])}function u1(n){return n.cleanup||(n.cleanup=[])}function h1(n,e){const t=n[rt],i=t?t.get(el,null):null;i&&i.handleError(e)}function Jv(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],d=n.data[o];null!==d.setInput?d.setInput(c,r,i,a):c[a]=r}}function Fm(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=ad(r,a):2==s&&(i=ad(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Rm(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(Yt(s)),$o(s))for(let a=ds;a<s.length;a++){const c=s[a],d=c[bt].firstChild;null!==d&&Rm(c[bt],c,d,i)}const o=t.type;if(8&o)Rm(n,e,t.child,i);else if(32&o){const a=sv(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=Jb(e,t);if(Array.isArray(a))i.push(...a);else{const c=sf(e[Xr]);Rm(c[bt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class _f{get rootNodes(){const e=this._lView,t=e[bt];return Rm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yi]}set context(e){this._lView[Yi]=e}get destroyed(){return 128==(128&this._lView[xn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ki];if($o(e)){const t=e[To],i=t?t.indexOf(this):-1;i>-1&&(cf(e,i),Dd(t,i))}this._attachedToViewContainer=!1}cv(this._lView[bt],this._lView)}onDestroy(e){Jx(this._lView[bt],this._lView,null,e)}markForCheck(){Zv(this._cdRefInjectingView||this._lView)}detach(){this._lView[xn]&=-65}reattach(){this._lView[xn]|=64}detectChanges(){Im(this._lView[bt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new He(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function LM(n,e){Rd(n,e,e[On],2,null,null)}(this._lView[bt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new He(902,!1);this._appRef=e}}class u2 extends _f{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Im(e[bt],e,e[Yi],!1)}checkNoChanges(){}get context(){return null}}class f1 extends Du{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yi(e);return new yf(t,this.ngModule)}}function p1(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class h2{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=pd(i);const r=this.injector.get(e,Dv,i);return r!==Dv||t===Dv?r:this.parentInjector.get(e,t,i)}}class yf extends Ex{get inputs(){return p1(this.componentDef.inputs)}get outputs(){return p1(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Ix(n){return n.map(Ln).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Jo?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new h2(e,s):e,a=o.get(gn,null);if(null===a)throw new He(407,!1);const c=o.get(Fr,null),d=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=i?function YC(n,e,t){return n.selectRootElement(e,t===Wo.ShadowDom)}(d,i,this.componentDef.encapsulation):rm(d,p,function d2(n){const e=n.toLowerCase();return"svg"===e?pu:"math"===e?"math":null}(p)),_=this.componentDef.onPush?288:272,y=zv(0,null,null,1,0,null,null,null,null,null),x=Cm(null,y,null,_,null,null,a,d,c,o,null);let T,N;Ci(x);try{const I=this.componentDef;let A,H=null;I.findHostDirectiveDefs?(A=[],H=new Map,I.findHostDirectiveDefs(I,A,H),A.push(I)):A=[I];const G=function p2(n,e){const t=n[bt],i=Qt;return n[i]=e,Vd(t,i,2,"#host",null)}(x,g),X=function m2(n,e,t,i,r,s,o,a){const c=r[bt];!function g2(n,e,t,i){for(const r of n)e.mergedAttrs=yu(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Fm(e,e.mergedAttrs,!0),null!==t&&nx(i,t,e))}(i,n,e,o);const d=s.createRenderer(e,t),p=Cm(r,Zx(t),null,t.onPush?32:16,r[n.index],n,s,d,a||null,null,null);return c.firstCreatePass&&Wv(c,n,i.length-1),Am(r,p),r[n.index]=p}(G,g,I,A,x,a,d);N=Oa(y,Qt),g&&function m(n,e,t,i){if(i)Up(n,t,["ng-version",Vl.full]);else{const{attrs:r,classes:s}=function ga(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Zs(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Up(n,t,r),s&&s.length>0&&tx(n,t,s.join(" "))}}(d,I,g,i),void 0!==t&&function S(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(N,this.ngContentSelectors,t),T=function u(n,e,t,i,r,s){const o=L(),a=r[bt],c=qs(o,r);Tm(a,r,o,t,null,i);for(let p=0;p<t.length;p++)kt(Ko(r,a,o.directiveStart+p,o),r);s1(a,r,o),c&&kt(c,r);const d=Ko(r,a,o.directiveStart+o.componentOffset,o);if(n[Yi]=r[Yi]=d,null!==s)for(const p of s)p(d,e);return Vv(a,o,n),d}(X,I,A,H,x,[O]),Bv(y,x,null)}finally{zn()}return new f2(this.componentType,T,Ld(N,x),x,N)}}class f2 extends SC{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new u2(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;Jv(s[bt],s,r,e,t),t1(s,this._tNode.index)}}get injector(){return new wd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function O(){const n=L();Io(C()[bt],n)}function Z(n){let e=function W(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Ao(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new He(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=me(n.inputs),o.declaredInputs=me(n.declaredInputs),o.outputs=me(n.outputs);const a=r.hostBindings;a&&Ke(n,a);const c=r.viewQuery,d=r.contentQueries;if(c&&Se(n,c),d&&$e(n,d),Rh(n.inputs,r.inputs),Rh(n.declaredInputs,r.declaredInputs),Rh(n.outputs,r.outputs),Ao(r)&&r.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Z&&(t=!1)}}e=Object.getPrototypeOf(e)}!function ue(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=yu(r.hostAttrs,t=yu(t,r.hostAttrs))}}(i)}function me(n){return n===Ra?{}:n===_i?[]:n}function Se(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function $e(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function Ke(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Js(n){return!!Wa(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Wa(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ul(n,e,t){return n[e]=t}function Lo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function bf(n,e,t,i){const r=Lo(n,e,t);return Lo(n,e+1,i)||r}function tr(n,e,t,i){const r=C();return Lo(r,be(),e)&&(B(),Mc(rn(),r,n,e,t,i)),tr}function km(n,e,t,i){return Lo(n,be(),t)?e+bn(t)+i:Sn}function Ot(n,e,t,i,r,s,o,a){const c=C(),d=B(),p=n+Qt,g=d.firstCreatePass?function CV(n,e,t,i,r,s,o,a,c){const d=e.consts,p=Vd(e,n,4,o||null,h(d,a));Gv(e,t,p,h(d,c)),Io(e,p);const g=p.tViews=zv(2,p,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d);return null!==e.queries&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}(p,d,c,e,t,i,r,s,o):d.data[p];Q(g,!1);const _=c[On].createComment("");om(d,c,_,g),kt(_,c),Am(c,c[p]=o1(_,c,_,g)),la(g)&&Hv(d,c,g),null!=o&&Uv(c,g,a)}function zm(n){return _c(function Ae(){return b.lFrame.contextLView}(),Qt+n)}function Qe(n,e,t){const i=C();return Lo(i,be(),e)&&ea(B(),rn(),i,n,e,i[On],t,!1),Qe}function v2(n,e,t,i,r){const o=r?"class":"style";Jv(n,t,e.inputs[o],o,i)}function Oe(n,e,t,i){const r=C(),s=B(),o=Qt+n,a=r[On],c=s.firstCreatePass?function TV(n,e,t,i,r,s){const o=e.consts,c=Vd(e,n,2,i,h(o,r));return Gv(e,t,c,h(o,s)),null!==c.attrs&&Fm(c,c.attrs,!1),null!==c.mergedAttrs&&Fm(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,t,i):s.data[o],d=r[o]=rm(a,e,function da(){return b.lFrame.currentNamespace}()),p=la(c);return Q(c,!0),nx(a,d,c),32!=(32&c.flags)&&om(s,r,d,c),0===function D(){return b.lFrame.elementDepthCount}()&&kt(d,r),function R(){b.lFrame.elementDepthCount++}(),p&&(Hv(s,r,c),Vv(s,c,r)),null!==i&&Uv(r,c),Oe}function Ne(){let n=L();te()?we():(n=n.parent,Q(n,!1));const e=n;!function k(){b.lFrame.elementDepthCount--}();const t=B();return t.firstCreatePass&&(Io(t,n),Nr(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function oM(n){return 0!=(8&n.flags)}(e)&&v2(t,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function aM(n){return 0!=(16&n.flags)}(e)&&v2(t,e,C(),e.stylesWithoutHost,!1),Ne}function vn(n,e,t,i){return Oe(n,e,t,i),Ne(),vn}function e_(n,e,t){const i=C(),r=B(),s=n+Qt,o=r.firstCreatePass?function AV(n,e,t,i,r){const s=e.consts,o=h(s,i),a=Vd(e,n,8,"ng-container",o);return null!==o&&Fm(a,o,!0),Gv(e,t,a,h(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Q(o,!0);const a=i[s]=i[On].createComment("");return om(r,i,a,o),kt(a,i),la(o)&&(Hv(r,i,o),Vv(r,o,i)),null!=t&&Uv(i,o),e_}function t_(){let n=L();const e=B();return te()?we():(n=n.parent,Q(n,!1)),e.firstCreatePass&&(Io(e,n),Nr(n)&&e.queries.elementEnd(n)),t_}function xf(){return C()}function n_(n){return!!n&&"function"==typeof n.then}function cR(n){return!!n&&"function"==typeof n.subscribe}const _2=cR;function ni(n,e,t,i){const r=C(),s=B(),o=L();return function uR(n,e,t,i,r,s,o){const a=la(i),d=n.firstCreatePass&&u1(n),p=e[Yi],g=l1(e);let _=!0;if(3&i.type||o){const T=qs(i,e),N=o?o(T):T,I=g.length,A=o?G=>o(Yt(G[i.index])):i.index;let H=null;if(!o&&a&&(H=function IV(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[Cl],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==H)(H.__ngLastListenerFn__||H).__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,_=!1;else{s=hR(i,e,p,s,!1);const G=t.listen(N,r,s);g.push(s,G),d&&d.push(r,A,I,I+1)}}else s=hR(i,e,p,s,!1);const y=i.outputs;let x;if(_&&null!==y&&(x=y[r])){const T=x.length;if(T)for(let N=0;N<T;N+=2){const X=e[x[N]][x[N+1]].subscribe(s),re=g.length;g.push(s,X),d&&d.push(r,i.index,re,-(re+1))}}}(s,r,r[On],o,n,e,i),ni}function dR(n,e,t,i){try{return Rn(6,e,t),!1!==t(i)}catch(r){return h1(n,r),!1}finally{Rn(7,e,t)}}function hR(n,e,t,i,r){return function s(o){if(o===Function)return i;Zv(n.componentOffset>-1?Fs(n.index,e):e);let c=dR(e,t,i,o),d=s.__ngNextListenerFn__;for(;d;)c=dR(e,t,d,o)&&c,d=d.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function wn(n=1){return function Sr(n){return(b.lFrame.contextLView=function Xi(n,e){for(;n>0;)e=e[Tr],n--;return e}(n,b.lFrame.contextLView))[Yi]}(n)}function FV(n,e){let t=null;const i=function PC(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Tx(n,s,!0):Ax(i,s))return r}else t=r}return t}function va(n){const e=C()[Xr][Lr];if(!e.projection){const i=e.projection=Zh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?FV(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ri(n,e=0,t){const i=C(),r=B(),s=Vd(r,Qt+n,16,null,t||null);null===s.projection&&(s.projection=e),we(),32!=(32&s.flags)&&function UM(n,e,t){Qb(e[On],0,e,t,uv(n,t,e),Kb(t.parent||e[Lr],t,e))}(r,i,s)}function v1(n,e){return n<<17|e<<2}function Hd(n){return n>>17&32767}function b2(n){return 2|n}function wf(n){return(131068&n)>>2}function x2(n,e){return-131069&n|e<<2}function w2(n){return 1|n}function wR(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Hd(s):wf(s),c=!1;for(;0!==a&&(!1===c||o);){const p=n[a+1];NV(n[a],e)&&(c=!0,n[a+1]=i?w2(p):b2(p)),a=i?Hd(p):wf(p)}c&&(n[t+1]=i?b2(s):w2(s))}function NV(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Td(n,e)>=0}const Ls={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SR(n){return n.substring(Ls.key,Ls.keyEnd)}function ER(n,e){const t=Ls.textEnd;return t===e?-1:(e=Ls.keyEnd=function UV(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ls.key=e,t),Gm(n,e,t))}function Gm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function i_(n,e,t){return rl(n,e,t,!1),i_}function Wi(n,e){return rl(n,e,null,!0),Wi}function Gl(n,e){for(let t=function VV(n){return function CR(n){Ls.key=0,Ls.keyEnd=0,Ls.value=0,Ls.valueEnd=0,Ls.textEnd=n.length}(n),ER(n,Gm(n,0,Ls.textEnd))}(e);t>=0;t=ER(e,t))Ps(n,SR(e),!0)}function rl(n,e,t,i){const r=C(),s=B(),o=ce(2);s.firstUpdatePass&&IR(s,n,o,i),e!==Sn&&Lo(r,o,e)&&RR(s,s.data[Jn()],r,r[On],n,r[o+1]=function JV(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Si(Zo(n)))),n}(e,t),i,o)}function AR(n,e){return e>=n.expandoStartIndex}function IR(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Jn()],o=AR(n,t);kR(s,i)&&null===e&&!o&&(e=!1),e=function $V(n,e,t,i){const r=function Lt(n){const e=b.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=r_(t=S2(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=S2(r,n,e,t,i),null===s){let c=function qV(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==wf(i))return n[Hd(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=S2(null,n,e,c[1],i),c=r_(c,e.attrs,i),function KV(n,e,t,i){n[Hd(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function YV(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=r_(i,n[s].hostAttrs,t);return r_(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function OV(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Hd(o),c=wf(o);n[i]=t;let p,d=!1;if(Array.isArray(t)?(p=t[1],(null===p||Td(t,p)>0)&&(d=!0)):p=t,r)if(0!==c){const _=Hd(n[a+1]);n[i+1]=v1(_,a),0!==_&&(n[_+1]=x2(n[_+1],i)),n[a+1]=function PV(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=v1(a,0),0!==a&&(n[a+1]=x2(n[a+1],i)),a=i;else n[i+1]=v1(c,0),0===a?a=i:n[c+1]=x2(n[c+1],i),c=i;d&&(n[i+1]=b2(n[i+1])),wR(n,p,i,!0),wR(n,p,i,!1),function LV(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Td(s,e)>=0&&(t[i+1]=w2(t[i+1]))}(e,p,n,i,s),o=v1(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function S2(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=r_(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function r_(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ps(n,o,!!t||e[++s]))}return void 0===n?null:n}function RR(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,d=c[a+1],p=function kV(n){return 1==(1&n)}(d)?PR(c,e,t,r,wf(d),o):void 0;_1(p)||(_1(s)||function RV(n){return 2==(2&n)}(d)&&(s=PR(c,null,t,r,a,o)),function ex(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Ys.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ys.Important),n.setStyle(t,i,r,s))}}(i,o,Wh(Jn(),t),r,s))}function PR(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],d=Array.isArray(c),p=d?c[1]:c,g=null===p;let _=t[r+1];_===Sn&&(_=g?_i:void 0);let y=g?Kp(_,i):p===i?_:void 0;if(d&&!_1(y)&&(y=Kp(c,i)),_1(y)&&(a=y,o))return a;const x=n[r+1];r=o?Hd(x):wf(x)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Kp(c,i))}return a}function _1(n){return void 0!==n}function kR(n,e){return 0!=(n.flags&(e?8:16))}function et(n,e=""){const t=C(),i=B(),r=n+Qt,s=i.firstCreatePass?Vd(i,r,1,e,null):i.data[r],o=t[r]=function av(n,e){return n.createText(e)}(t[On],e);om(i,t,o,s),Q(s,!1)}function $i(n){return vs("",n,""),$i}function vs(n,e,t){const i=C(),r=km(i,n,e,t);return r!==Sn&&function il(n,e,t){const i=Wh(e,n);!function Fd(n,e,t){n.setValue(e,t)}(n[On],i,t)}(i,Jn(),r),vs}function GR(n,e,t){!function sl(n,e,t,i){const r=B(),s=ce(2);r.firstUpdatePass&&IR(r,null,s,i);const o=C();if(t!==Sn&&Lo(o,s,t)){const a=r.data[Jn()];if(kR(a,i)&&!AR(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=ad(c,t||"")),v2(r,a,o,t,i)}else!function ZV(n,e,t,i,r,s,o,a){r===Sn&&(r=_i);let c=0,d=0,p=0<r.length?r[0]:null,g=0<s.length?s[0]:null;for(;null!==p||null!==g;){const _=c<r.length?r[c+1]:void 0,y=d<s.length?s[d+1]:void 0;let T,x=null;p===g?(c+=2,d+=2,_!==y&&(x=g,T=y)):null===g||null!==p&&p<g?(c+=2,x=p):(d+=2,x=g,T=y),null!==x&&RR(n,e,t,i,x,T,o,a),p=c<r.length?r[c]:null,g=d<s.length?s[d]:null}}(r,a,o,o[On],o[s+1],o[s+1]=function XV(n,e,t){if(null==t||""===t)return _i;const i=[],r=Zo(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(Ps,Gl,km(C(),n,e,t),!0)}function Sf(n,e,t){const i=C();return Lo(i,be(),e)&&ea(B(),rn(),i,n,e,i[On],t,!0),Sf}const Ef=void 0;var vH=["en",[["a","p"],["AM","PM"],Ef],[["AM","PM"],Ef,Ef],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ef,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ef,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ef,"{1} 'at' {0}",Ef],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gH(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let jm={};function ta(n){const e=function yH(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=tP(e);if(t)return t;const i=e.split("-")[0];if(t=tP(i),t)return t;if("en"===i)return vH;throw new He(701,!1)}function tP(n){return n in jm||(jm[n]=Mi.ng&&Mi.ng.common&&Mi.ng.common.locales&&Mi.ng.common.locales[n]),jm[n]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const Wm="en-US";let nP=Wm;function C2(n,e,t,i,r){if(n=Zt(n),Array.isArray(n))for(let s=0;s<n.length;s++)C2(n[s],e,t,i,r);else{const s=B(),o=C();let a=Bl(n)?n:Zt(n.provide),c=Mv(n);const d=L(),p=1048575&d.providerIndexes,g=d.directiveStart,_=d.providerIndexes>>20;if(Bl(n)||!n.multi){const y=new $h(c,r,ae),x=T2(a,e,r?p:p+_,g);-1===x?(H0(Ba(d,o),s,a),D2(s,n,e.length),e.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(y),o.push(y)):(t[x]=y,o[x]=y)}else{const y=T2(a,e,p+_,g),x=T2(a,e,p,p+_),N=x>=0&&t[x];if(r&&!N||!r&&!(y>=0&&t[y])){H0(Ba(d,o),s,a);const I=function gU(n,e,t,i,r){const s=new $h(n,t,ae);return s.multi=[],s.index=e,s.componentProviders=0,DP(s,r,i&&!t),s}(r?mU:pU,t.length,r,i,c);!r&&N&&(t[x].providerFactory=I),D2(s,n,e.length,0),e.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(I),o.push(I)}else D2(s,n,y>-1?y:x,DP(t[r?x:y],c,!r&&i));!r&&i&&N&&t[x].componentProviders++}}}function D2(n,e,t,i){const r=Bl(e),s=function Sx(n){return!!n.useClass}(e);if(r||s){const c=(s?Zt(e.useClass):e).prototype.ngOnDestroy;if(c){const d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const p=d.indexOf(t);-1===p?d.push(t,[i,c]):d[p+1].push(i,c)}else d.push(t,c)}}}function DP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function T2(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function pU(n,e,t,i){return A2(this.multi,[])}function mU(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ko(t,t[bt],this.providerFactory.index,i);s=a.slice(0,o),A2(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],A2(r,s);return s}function A2(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Hi(n,e=[]){return t=>{t.providersResolver=(i,r)=>function fU(n,e,t){const i=B();if(i.firstCreatePass){const r=Ao(n);C2(t,i.data,i.blueprint,r,!0),C2(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class $m{}class TP{}class AP extends $m{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new f1(this);const i=uo(e);this._bootstrapComponents=nl(i.bootstrap),this._r3Injector=Lx(e,t,[{provide:$m,useValue:this},{provide:Du,useValue:this.componentFactoryResolver}],Si(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class I2 extends TP{constructor(e){super(),this.moduleType=e}create(e){return new AP(this.moduleType,e)}}class _U extends $m{constructor(e,t,i){super(),this.componentFactoryResolver=new f1(this),this.instance=null;const r=new mf([...e,{provide:$m,useValue:this},{provide:Du,useValue:this.componentFactoryResolver}],t||bm(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function S1(n,e,t=null){return new _U(n,e,t).injector}let yU=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=xx(0,t.type),r=i.length>0?S1([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Xe({token:n,providedIn:"environment",factory:()=>new n(Me(Jo))}),n})();function F2(n){n.getStandaloneInjector=e=>e.get(yU).getOrCreateStandaloneInjector(n)}function Ud(n,e,t,i){return NP(C(),ee(),n,e,t,i)}function P2(n,e,t,i,r,s){return VP(C(),ee(),n,e,t,i,r,s)}function u_(n,e){const t=n[e];return t===Sn?void 0:t}function NP(n,e,t,i,r,s){const o=e+t;return Lo(n,o,r)?Ul(n,o+1,s?i.call(s,r):i(r)):u_(n,o+1)}function BP(n,e,t,i,r,s,o){const a=e+t;return bf(n,a,r,s)?Ul(n,a+2,o?i.call(o,r,s):i(r,s)):u_(n,a+2)}function VP(n,e,t,i,r,s,o,a){const c=e+t;return function g1(n,e,t,i,r){const s=bf(n,e,t,i);return Lo(n,e+2,r)||s}(n,c,r,s,o)?Ul(n,c+3,a?i.call(a,r,s,o):i(r,s,o)):u_(n,c+3)}function ft(n,e){const t=B();let i;const r=n+Qt;t.firstCreatePass?(i=function OU(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Un(i.type)),o=co(ae);try{const a=yd(!1),c=s();return yd(a),function DV(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,C(),r,c),c}finally{co(o)}}function mn(n,e,t){const i=n+Qt,r=C(),s=_c(r,i);return h_(r,i)?NP(r,ee(),e,s.transform,t,s):s.transform(t)}function xi(n,e,t,i){const r=n+Qt,s=C(),o=_c(s,r);return h_(s,r)?BP(s,ee(),e,o.transform,t,i,o):o.transform(t,i)}function d_(n,e,t,i,r){const s=n+Qt,o=C(),a=_c(o,s);return h_(o,s)?VP(o,ee(),e,a.transform,t,i,r,a):a.transform(t,i,r)}function h_(n,e){return n[bt].data[e].pure}function k2(n){return e=>{setTimeout(n,void 0,e)}}const jn=class BU extends ln{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=k2(s),r&&(r=k2(r)),o&&(o=k2(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Tn&&e.add(a),a}};function VU(){return this._results[Symbol.iterator]()}class f_{get changes(){return this._changes||(this._changes=new jn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=f_.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=VU)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function fa(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Mb(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ol=(()=>{class n{}return n.__NG_ELEMENT_ID__=zU,n})();const HU=ol,UU=class extends HU{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=Cm(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[Dl]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[Zr];return null!==o&&(r[Zr]=o.createEmbeddedView(i)),Bv(i,r,e),new _f(r)}};function zU(){return E1(L(),C())}function E1(n,e){return 4&n.type?new UU(e,n,Ld(n,e)):null}let _a=(()=>{class n{}return n.__NG_ELEMENT_ID__=GU,n})();function GU(){return jP(L(),C())}const jU=_a,zP=class extends jU{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ld(this._hostTNode,this._hostLView)}get injector(){return new wd(this._hostTNode,this._hostLView)}get parentInjector(){const e=xd(this._hostTNode,this._hostLView);if(qh(e)){const t=Gp(e,this._hostLView),i=zp(e);return new wd(t[bt].data[i+8],t)}return new wd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=GP(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ds}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function Xh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const g=t||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const c=o?e:new yf(yi(e)),d=i||this.parentInjector;if(!s&&null==c.ngModule){const _=(o?d:this.parentInjector).get(Jo,null);_&&(s=_)}const p=c.create(d,r,void 0,s);return this.insert(p.hostView,a),p}insert(e,t){const i=e._lView,r=i[bt];if(function l(n){return $o(n[Ki])}(i)){const p=this.indexOf(e);if(-1!==p)this.detach(p);else{const g=i[Ki],_=new zP(g,g[Lr],g[Ki]);_.detach(_.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function jb(n,e,t,i){const r=ds+i,s=t.length;i>0&&(t[r-1][ei]=e),i<s-ds?(e[ei]=t[r],W0(t,ds+i,e)):(t.push(e),e[ei]=null),e[Ki]=t;const o=e[Dl];null!==o&&t!==o&&function Wb(n,e){const t=n[Yn];e[Xr]!==e[Ki][Ki][Xr]&&(n[$s]=!0),null===t?n[Yn]=[e]:t.push(e)}(o,e);const a=e[Zr];null!==a&&a.insertView(n),e[xn]|=64}(r,i,o,s);const a=hv(s,o),c=i[On],d=sm(c,o[Al]);return null!==d&&function OM(n,e,t,i,r,s){i[Or]=r,i[Lr]=e,Rd(n,i,t,1,r,s)}(r,o[Lr],c,i,d,a),e.attachToViewContainerRef(),W0(O2(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=GP(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=cf(this._lContainer,t);i&&(Dd(O2(this._lContainer),t),cv(i[bt],i))}detach(e){const t=this._adjustIndex(e,-1),i=cf(this._lContainer,t);return i&&null!=Dd(O2(this._lContainer),t)?new _f(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function GP(n){return n[To]}function O2(n){return n[To]||(n[To]=[])}function jP(n,e){let t;const i=e[n.index];if($o(i))t=i;else{let r;if(8&n.type)r=Yt(i);else{const s=e[On];r=s.createComment("");const o=qs(n,e);Ll(s,sm(s,o),r,function HM(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=o1(i,e,r,n),Am(e,t)}return new zP(t,n,e)}class L2{constructor(e){this.queryList=e,this.matches=null}clone(){return new L2(this.queryList)}setDirty(){this.queryList.setDirty()}}class N2{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new N2(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==YP(e,t).matches&&this.queries[t].setDirty()}}class WP{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class B2{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new B2(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class V2{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new V2(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,WU(t,s)),this.matchTNodeWithReadOption(e,t,bu(t,e,s,!1,!1))}else i===ol?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,bu(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Gn||r===_a||r===ol&&4&t.type)this.addMatch(t.index,-2);else{const s=bu(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function WU(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function qU(n,e,t,i){return-1===t?function $U(n,e){return 11&n.type?Ld(n,e):4&n.type?E1(n,e):null}(e,n):-2===t?function KU(n,e,t){return t===Gn?Ld(e,n):t===ol?E1(e,n):t===_a?jP(e,n):void 0}(n,e,i):Ko(n,n[bt],t,e)}function $P(n,e,t,i){const r=e[Zr].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const d=o[c];a.push(d<0?null:qU(e,s[d],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function H2(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=$P(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const d=s[a+1],p=e[-c];for(let g=ds;g<p.length;g++){const _=p[g];_[Dl]===_[Ki]&&H2(_[bt],_,d,i)}if(null!==p[Yn]){const g=p[Yn];for(let _=0;_<g.length;_++){const y=g[_];H2(y[bt],y,d,i)}}}}}return i}function ki(n){const e=C(),t=B(),i=Fn();Y(i+1);const r=YP(t,i);if(n.dirty&&function en(n){return 4==(4&n[xn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?H2(t,e,i,[]):$P(t,e,r,i);n.reset(s,Tu),n.notifyOnChanges()}return!0}return!1}function Ns(n,e,t){const i=B();i.firstCreatePass&&(KP(i,new WP(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),qP(i,C(),e)}function $a(n,e,t,i){const r=B();if(r.firstCreatePass){const s=L();KP(r,new WP(e,t,i),s.index),function XU(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}qP(r,C(),t)}function Oi(){return function YU(n,e){return n[Zr].queries[e].queryList}(C(),Fn())}function qP(n,e,t){const i=new f_(4==(4&t));Jx(n,e,i,i.destroy),null===e[Zr]&&(e[Zr]=new N2),e[Zr].queries.push(new L2(i))}function KP(n,e,t){null===n.queries&&(n.queries=new B2),n.queries.track(new V2(e,t))}function YP(n,e){return n.queries.getByIndex(e)}function XP(n,e){return E1(n,e)}function C1(...n){}const D1=new it("Application Initializer");let T1=(()=>{class n{constructor(t){this.appInits=t,this.resolve=C1,this.reject=C1,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(n_(s))t.push(s);else if(_2(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Me(D1,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ym=new it("AppId",{providedIn:"root",factory:function pk(){return`${$2()}${$2()}${$2()}`}});function $2(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const mk=new it("Platform Initializer"),A1=new it("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gk=new it("appBootstrapListener"),qa=new it("AnimationModuleType");let g9=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Dc=new it("LocaleId",{providedIn:"root",factory:()=>dn(Dc,Jt.Optional|Jt.SkipSelf)||function v9(){return typeof $localize<"u"&&$localize.locale||Wm}()});class y9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let vk=(()=>{class n{compileModuleSync(t){return new I2(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=nl(uo(t).declarations).reduce((o,a)=>{const c=yi(a);return c&&o.push(new yf(c)),o},[]);return new y9(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w9=(()=>Promise.resolve(0))();function q2(n){typeof Zone>"u"?w9.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class cn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jn(!1),this.onMicrotaskEmpty=new jn(!1),this.onStable=new jn(!1),this.onError=new jn(!1),typeof Zone>"u")throw new He(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function S9(){let n=Mi.requestAnimationFrame,e=Mi.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function C9(n){const e=()=>{!function M9(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Y2(n),n.isCheckStableRunning=!0,K2(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Y2(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return bk(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),xk(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return bk(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),xk(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Y2(n),K2(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cn.isInAngularZone())throw new He(909,!1)}static assertNotInAngularZone(){if(cn.isInAngularZone())throw new He(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,E9,C1,C1);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const E9={};function K2(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y2(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xk(n){n._nesting--,K2(n)}class D9{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jn,this.onMicrotaskEmpty=new jn,this.onStable=new jn,this.onError=new jn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const wk=new it(""),I1=new it("");let J2,X2=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,J2||(function T9(n){J2=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cn.assertNotInAngularZone(),q2(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())q2(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Me(cn),Me(Z2),Me(I1))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),Z2=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return J2?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),zd=null;const Sk=new it("AllowMultipleToken"),Q2=new it("PlatformDestroyListeners"),Fu=!1;class Ek{constructor(e,t){this.name=e,this.token=t}}function Ck(n,e,t=[]){const i=`Platform: ${e}`,r=new it(i);return(s=[])=>{let o=eD();if(!o||o.injector.get(Sk,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function F9(n){if(zd&&!zd.get(Sk,!1))throw new He(400,!1);zd=n;const e=n.get(Tk);(function Mk(n){const e=n.get(mk,null);e&&e.forEach(t=>t())})(n)}(function Dk(n=[],e){return ms.create({name:e,providers:[{provide:ym,useValue:"platform"},{provide:Q2,useValue:new Set([()=>zd=null])},...n]})}(a,i))}return function P9(n){const e=eD();if(!e)throw new He(401,!1);return e}()}}function eD(){return zd?.get(Tk)??null}let Tk=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Ik(n,e){let t;return t="noop"===n?new D9:("zone.js"===n?void 0:n)||new cn(e),t}(i?.ngZone,function Ak(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:cn,useValue:r}];return r.run(()=>{const o=ms.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(el,null);if(!c)throw new He(402,!1);return r.runOutsideAngular(()=>{const d=r.onError.subscribe({next:p=>{c.handleError(p)}});a.onDestroy(()=>{F1(this._modules,a),d.unsubscribe()})}),function Fk(n,e,t){try{const i=t();return n_(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const d=a.injector.get(T1);return d.runInitializers(),d.donePromise.then(()=>(function iP(n){As(n,"Expected localeId to be defined"),"string"==typeof n&&(nP=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Dc,Wm)||Wm),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=Rk({},i);return function A9(n,e,t){const i=new I2(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Xm);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new He(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Q2,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Me(ms))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Rk(n,e){return Array.isArray(e)?e.reduce(Rk,n):{...n,...e}}let Xm=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new an(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new an(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{cn.assertNotInAngularZone(),q2(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{cn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),d.unsubscribe()}});this.isStable=uc(s,o.pipe(Ep()))}bootstrap(t,i){const r=t instanceof Ex;if(!this._injector.get(T1).done){!r&&function Yr(n){const e=yi(n)||Ii(n)||Is(n);return null!==e&&e.standalone}(t);throw new He(405,Fu)}let o;o=r?t:this._injector.get(Du).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function I9(n){return n.isBoundToModule}(o)?void 0:this._injector.get($m),d=o.create(ms.NULL,[],i||o.selector,a),p=d.location.nativeElement,g=d.injector.get(wk,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),F1(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new He(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;F1(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(gk,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>F1(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new He(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Me(cn),Me(Jo),Me(el))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function F1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Ka=(()=>{class n{}return n.__NG_ELEMENT_ID__=O9,n})();function O9(n){return function L9(n,e,t){if(hs(n)&&!t){const i=Fs(n.index,e);return new _f(i,i)}return 47&n.type?new _f(e[Xr],e):null}(L(),C(),16==(16&n))}class Nk{constructor(){}supports(e){return Js(e)}create(e){return new z9(e)}}const U9=(n,e)=>e;class z9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||U9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<Vk(i,r,s)?t:i,a=Vk(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const d=a-r,p=c-r;if(d!=p){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,x=y+_;p<=x&&x<d&&(s[_]=y+1)}s[o.previousIndex]=p-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Js(e))throw new He(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function ja(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new G9(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Bk),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bk),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class G9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class j9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Bk{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new j9,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vk(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class Hk{constructor(){}supports(e){return e instanceof Map||Wa(e)}create(){return new W9}}class W9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Wa(e)))throw new He(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new $9(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class $9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uk(){return new k1([new Nk])}let k1=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Uk()),deps:[[n,new Fl,new pa]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new He(901,!1)}}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:Uk}),n})();function zk(){return new m_([new Hk])}let m_=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||zk()),deps:[[n,new Fl,new pa]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new He(901,!1)}}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:zk}),n})();const Y9=Ck(null,"core",[]);let X9=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Me(Xm))},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({}),n})();let sD=null;function Ru(){return sD}class Q9{}const En=new it("DocumentToken");let oD=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(){return function e7(){return Me(Gk)}()},providedIn:"platform"}),n})();const t7=new it("Location Initialized");let Gk=(()=>{class n extends oD{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ru().getBaseHref(this._doc)}onPopState(t){const i=Ru().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ru().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){jk()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){jk()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Me(En))},n.\u0275prov=Xe({token:n,factory:function(){return function n7(){return new Gk(Me(En))}()},providedIn:"platform"}),n})();function jk(){return!!window.history.pushState}function aD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Wk(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pu(n){return n&&"?"!==n[0]?"?"+n:n}let Cf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(){return dn(qk)},providedIn:"root"}),n})();const $k=new it("appBaseHref");let qk=(()=>{class n extends Cf{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??dn(En).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return aD(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Pu(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Pu(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Pu(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(oD),Me($k,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),i7=(()=>{class n extends Cf{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=aD(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Pu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Pu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(oD),Me($k,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),g_=(()=>{class n{constructor(t){this._subject=new jn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function o7(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Wk(Kk(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Pu(i))}normalize(t){return n.stripTrailingSlash(function s7(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Kk(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pu(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Pu,n.joinWithSlash=aD,n.stripTrailingSlash=Wk,n.\u0275fac=function(t){return new(t||n)(Me(Cf))},n.\u0275prov=Xe({token:n,factory:function(){return function r7(){return new g_(Me(Cf))}()},providedIn:"root"}),n})();function Kk(n){return n.replace(/\/index.html$/,"")}var es=(()=>((es=es||{})[es.Format=0]="Format",es[es.Standalone=1]="Standalone",es))(),li=(()=>((li=li||{})[li.Narrow=0]="Narrow",li[li.Abbreviated=1]="Abbreviated",li[li.Wide=2]="Wide",li[li.Short=3]="Short",li))(),Pr=(()=>((Pr=Pr||{})[Pr.Short=0]="Short",Pr[Pr.Medium=1]="Medium",Pr[Pr.Long=2]="Long",Pr[Pr.Full=3]="Full",Pr))(),fn=(()=>((fn=fn||{})[fn.Decimal=0]="Decimal",fn[fn.Group=1]="Group",fn[fn.List=2]="List",fn[fn.PercentSign=3]="PercentSign",fn[fn.PlusSign=4]="PlusSign",fn[fn.MinusSign=5]="MinusSign",fn[fn.Exponential=6]="Exponential",fn[fn.SuperscriptingExponent=7]="SuperscriptingExponent",fn[fn.PerMille=8]="PerMille",fn[fn.Infinity=9]="Infinity",fn[fn.NaN=10]="NaN",fn[fn.TimeSeparator=11]="TimeSeparator",fn[fn.CurrencyDecimal=12]="CurrencyDecimal",fn[fn.CurrencyGroup=13]="CurrencyGroup",fn))();function O1(n,e){return Ac(ta(n)[Ct.DateFormat],e)}function L1(n,e){return Ac(ta(n)[Ct.TimeFormat],e)}function N1(n,e){return Ac(ta(n)[Ct.DateTimeFormat],e)}function Tc(n,e){const t=ta(n),i=t[Ct.NumberSymbols][e];if(typeof i>"u"){if(e===fn.CurrencyDecimal)return t[Ct.NumberSymbols][fn.Decimal];if(e===fn.CurrencyGroup)return t[Ct.NumberSymbols][fn.Group]}return i}function Xk(n){if(!n[Ct.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ct.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ac(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function lD(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const y7=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,v_={},b7=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Bs=(()=>((Bs=Bs||{})[Bs.Short=0]="Short",Bs[Bs.ShortGMT=1]="ShortGMT",Bs[Bs.Long=2]="Long",Bs[Bs.Extended=3]="Extended",Bs))(),_n=(()=>((_n=_n||{})[_n.FullYear=0]="FullYear",_n[_n.Month=1]="Month",_n[_n.Date=2]="Date",_n[_n.Hours=3]="Hours",_n[_n.Minutes=4]="Minutes",_n[_n.Seconds=5]="Seconds",_n[_n.FractionalSeconds=6]="FractionalSeconds",_n[_n.Day=7]="Day",_n))(),$n=(()=>(($n=$n||{})[$n.DayPeriods=0]="DayPeriods",$n[$n.Days=1]="Days",$n[$n.Months=2]="Months",$n[$n.Eras=3]="Eras",$n))();function uD(n,e,t,i){let r=function A7(n){if(Qk(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return B1(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(y7))return function I7(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),d=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,d),e}(i)}const e=new Date(n);if(!Qk(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=ku(t,e)||e;let a,o=[];for(;e;){if(a=b7.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const p=o.pop();if(!p)break;e=p}}let c=r.getTimezoneOffset();i&&(c=Jk(i,c),r=function T7(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function D7(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(Jk(e,r)-r))}(r,i,!0));let d="";return o.forEach(p=>{const g=function C7(n){if(hD[n])return hD[n];let e;switch(n){case"G":case"GG":case"GGG":e=sr($n.Eras,li.Abbreviated);break;case"GGGG":e=sr($n.Eras,li.Wide);break;case"GGGGG":e=sr($n.Eras,li.Narrow);break;case"y":e=ys(_n.FullYear,1,0,!1,!0);break;case"yy":e=ys(_n.FullYear,2,0,!0,!0);break;case"yyy":e=ys(_n.FullYear,3,0,!1,!0);break;case"yyyy":e=ys(_n.FullYear,4,0,!1,!0);break;case"Y":e=z1(1);break;case"YY":e=z1(2,!0);break;case"YYY":e=z1(3);break;case"YYYY":e=z1(4);break;case"M":case"L":e=ys(_n.Month,1,1);break;case"MM":case"LL":e=ys(_n.Month,2,1);break;case"MMM":e=sr($n.Months,li.Abbreviated);break;case"MMMM":e=sr($n.Months,li.Wide);break;case"MMMMM":e=sr($n.Months,li.Narrow);break;case"LLL":e=sr($n.Months,li.Abbreviated,es.Standalone);break;case"LLLL":e=sr($n.Months,li.Wide,es.Standalone);break;case"LLLLL":e=sr($n.Months,li.Narrow,es.Standalone);break;case"w":e=dD(1);break;case"ww":e=dD(2);break;case"W":e=dD(1,!0);break;case"d":e=ys(_n.Date,1);break;case"dd":e=ys(_n.Date,2);break;case"c":case"cc":e=ys(_n.Day,1);break;case"ccc":e=sr($n.Days,li.Abbreviated,es.Standalone);break;case"cccc":e=sr($n.Days,li.Wide,es.Standalone);break;case"ccccc":e=sr($n.Days,li.Narrow,es.Standalone);break;case"cccccc":e=sr($n.Days,li.Short,es.Standalone);break;case"E":case"EE":case"EEE":e=sr($n.Days,li.Abbreviated);break;case"EEEE":e=sr($n.Days,li.Wide);break;case"EEEEE":e=sr($n.Days,li.Narrow);break;case"EEEEEE":e=sr($n.Days,li.Short);break;case"a":case"aa":case"aaa":e=sr($n.DayPeriods,li.Abbreviated);break;case"aaaa":e=sr($n.DayPeriods,li.Wide);break;case"aaaaa":e=sr($n.DayPeriods,li.Narrow);break;case"b":case"bb":case"bbb":e=sr($n.DayPeriods,li.Abbreviated,es.Standalone,!0);break;case"bbbb":e=sr($n.DayPeriods,li.Wide,es.Standalone,!0);break;case"bbbbb":e=sr($n.DayPeriods,li.Narrow,es.Standalone,!0);break;case"B":case"BB":case"BBB":e=sr($n.DayPeriods,li.Abbreviated,es.Format,!0);break;case"BBBB":e=sr($n.DayPeriods,li.Wide,es.Format,!0);break;case"BBBBB":e=sr($n.DayPeriods,li.Narrow,es.Format,!0);break;case"h":e=ys(_n.Hours,1,-12);break;case"hh":e=ys(_n.Hours,2,-12);break;case"H":e=ys(_n.Hours,1);break;case"HH":e=ys(_n.Hours,2);break;case"m":e=ys(_n.Minutes,1);break;case"mm":e=ys(_n.Minutes,2);break;case"s":e=ys(_n.Seconds,1);break;case"ss":e=ys(_n.Seconds,2);break;case"S":e=ys(_n.FractionalSeconds,1);break;case"SS":e=ys(_n.FractionalSeconds,2);break;case"SSS":e=ys(_n.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=H1(Bs.Short);break;case"ZZZZZ":e=H1(Bs.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=H1(Bs.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=H1(Bs.Long);break;default:return null}return hD[n]=e,e}(p);d+=g?g(r,t,c):"''"===p?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function B1(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function ku(n,e){const t=function a7(n){return ta(n)[Ct.LocaleId]}(n);if(v_[t]=v_[t]||{},v_[t][e])return v_[t][e];let i="";switch(e){case"shortDate":i=O1(n,Pr.Short);break;case"mediumDate":i=O1(n,Pr.Medium);break;case"longDate":i=O1(n,Pr.Long);break;case"fullDate":i=O1(n,Pr.Full);break;case"shortTime":i=L1(n,Pr.Short);break;case"mediumTime":i=L1(n,Pr.Medium);break;case"longTime":i=L1(n,Pr.Long);break;case"fullTime":i=L1(n,Pr.Full);break;case"short":const r=ku(n,"shortTime"),s=ku(n,"shortDate");i=V1(N1(n,Pr.Short),[r,s]);break;case"medium":const o=ku(n,"mediumTime"),a=ku(n,"mediumDate");i=V1(N1(n,Pr.Medium),[o,a]);break;case"long":const c=ku(n,"longTime"),d=ku(n,"longDate");i=V1(N1(n,Pr.Long),[c,d]);break;case"full":const p=ku(n,"fullTime"),g=ku(n,"fullDate");i=V1(N1(n,Pr.Full),[p,g])}return i&&(v_[t][e]=i),i}function V1(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function cl(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function ys(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function w7(n,e){switch(n){case _n.FullYear:return e.getFullYear();case _n.Month:return e.getMonth();case _n.Date:return e.getDate();case _n.Hours:return e.getHours();case _n.Minutes:return e.getMinutes();case _n.Seconds:return e.getSeconds();case _n.FractionalSeconds:return e.getMilliseconds();case _n.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===_n.Hours)0===a&&-12===t&&(a=12);else if(n===_n.FractionalSeconds)return function x7(n,e){return cl(n,3).substring(0,e)}(a,e);const c=Tc(o,fn.MinusSign);return cl(a,e,c,i,r)}}function sr(n,e,t=es.Format,i=!1){return function(r,s){return function S7(n,e,t,i,r,s){switch(t){case $n.Months:return function u7(n,e,t){const i=ta(n),s=Ac([i[Ct.MonthsFormat],i[Ct.MonthsStandalone]],e);return Ac(s,t)}(e,r,i)[n.getMonth()];case $n.Days:return function l7(n,e,t){const i=ta(n),s=Ac([i[Ct.DaysFormat],i[Ct.DaysStandalone]],e);return Ac(s,t)}(e,r,i)[n.getDay()];case $n.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const d=function p7(n){const e=ta(n);return Xk(e),(e[Ct.ExtraData][2]||[]).map(i=>"string"==typeof i?lD(i):[lD(i[0]),lD(i[1])])}(e),p=function m7(n,e,t){const i=ta(n);Xk(i);const s=Ac([i[Ct.ExtraData][0],i[Ct.ExtraData][1]],e)||[];return Ac(s,t)||[]}(e,r,i),g=d.findIndex(_=>{if(Array.isArray(_)){const[y,x]=_,T=o>=y.hours&&a>=y.minutes,N=o<x.hours||o===x.hours&&a<x.minutes;if(y.hours<x.hours){if(T&&N)return!0}else if(T||N)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==g)return p[g]}return function c7(n,e,t){const i=ta(n),s=Ac([i[Ct.DayPeriodsFormat],i[Ct.DayPeriodsStandalone]],e);return Ac(s,t)}(e,r,i)[o<12?0:1];case $n.Eras:return function d7(n,e){return Ac(ta(n)[Ct.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function H1(n){return function(e,t,i){const r=-1*i,s=Tc(t,fn.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Bs.Short:return(r>=0?"+":"")+cl(o,2,s)+cl(Math.abs(r%60),2,s);case Bs.ShortGMT:return"GMT"+(r>=0?"+":"")+cl(o,1,s);case Bs.Long:return"GMT"+(r>=0?"+":"")+cl(o,2,s)+":"+cl(Math.abs(r%60),2,s);case Bs.Extended:return 0===i?"Z":(r>=0?"+":"")+cl(o,2,s)+":"+cl(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const E7=0,U1=4;function Zk(n){return B1(n.getFullYear(),n.getMonth(),n.getDate()+(U1-n.getDay()))}function dD(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=Zk(t),o=function M7(n){const e=B1(n,E7,1).getDay();return B1(n,0,1+(e<=U1?U1:U1+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return cl(r,n,Tc(i,fn.MinusSign))}}function z1(n,e=!1){return function(t,i){return cl(Zk(t).getFullYear(),n,Tc(i,fn.MinusSign),e)}}const hD={};function Jk(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Qk(n){return n instanceof Date&&!isNaN(n.valueOf())}function bs(n,e,t){return function _H(n,e,t){"string"!=typeof e&&(t=e,e=n[Ct.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),jm[e]=n,t&&(jm[e][Ct.ExtraData]=t)}(n,e,t)}function i3(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const _D=/\s+/,r3=[];let Jm=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=r3,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(_D):r3}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(_D):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,Boolean(t[i]));this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(_D).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(ae(k1),ae(m_),ae(Gn),ae(Qc))},n.\u0275dir=ht({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class G7{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let y_=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new G7(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),a3(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{a3(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(ae(_a),ae(ol),ae(k1))},n.\u0275dir=ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function a3(n,e){n.context.$implicit=e.item}let Df=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new W7,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){c3("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){c3("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(ae(_a),ae(ol))},n.\u0275dir=ht({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class W7{constructor(){this.$implicit=null,this.ngIf=null}}function c3(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Si(e)}'.`)}class yD{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let b_=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),bD=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new yD(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(ae(_a),ae(ol),ae(b_,9))},n.\u0275dir=ht({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),l3=(()=>{class n{constructor(t,i,r){r._addDefault(new yD(t,i))}}return n.\u0275fac=function(t){return new(t||n)(ae(_a),ae(ol),ae(b_,9))},n.\u0275dir=ht({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),j1=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Ys.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(m_),ae(Qc))},n.\u0275dir=ht({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),d3=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(ae(_a))},n.\u0275dir=ht({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Dn]}),n})();function ll(n,e){return new He(2100,!1)}class q7{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class K7{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Y7=new K7,X7=new q7;let Tf=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(n_(t))return Y7;if(cR(t))return X7;throw ll()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(ae(Ka,16))},n.\u0275pipe=Gi({name:"async",type:n,pure:!1,standalone:!0}),n})();const nz=new it("DATE_PIPE_DEFAULT_TIMEZONE"),iz=new it("DATE_PIPE_DEFAULT_OPTIONS");let h3=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(null==t||""===t||t!=t)return null;try{return uD(t,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw ll()}}}return n.\u0275fac=function(t){return new(t||n)(ae(Dc,16),ae(nz,24),ae(iz,24))},n.\u0275pipe=Gi({name:"date",type:n,pure:!0,standalone:!0}),n})(),Gd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({}),n})();const p3="browser";let vz=(()=>{class n{}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new _z(Me(En),window)}),n})();class _z{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function yz(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=m3(this.window.history)||m3(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function m3(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class g3{}class $z extends Q9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class MD extends $z{static makeCurrent(){!function J9(n){sD||(sD=n)}(new MD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qz(){return w_=w_||document.querySelector("base"),w_?w_.getAttribute("href"):null}();return null==t?null:function Kz(n){q1=q1||document.createElement("a"),q1.setAttribute("href",n);const e=q1.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){w_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return i3(document.cookie,e)}}let q1,w_=null;const x3=new it("TRANSITION_ID"),Xz=[{provide:D1,useFactory:function Yz(n,e,t){return()=>{t.get(T1).donePromise.then(()=>{const i=Ru(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[x3,En,ms],multi:!0}];let Jz=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const K1=new it("EventManagerPlugins");let Y1=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Me(K1),Me(cn))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class w3{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Ru().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let S3=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let s=r.get(t)??0;return s+=i,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),S_=(()=>{class n extends S3{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(s=>s.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const CD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},DD=/%COMP%/g,C3=new it("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function D3(n,e){return e.flat(100).map(t=>t.replace(DD,n))}function T3(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let X1=(()=>{class n{constructor(t,i,r,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new TD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof F3?r.applyToHost(t):r instanceof AD&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,c=this.removeStylesOnCompDestory;switch(i.encapsulation){case Wo.Emulated:s=new F3(o,a,i,this.appId,c);break;case Wo.ShadowDom:return new sG(o,a,t,i);default:s=new AD(o,a,i,c)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Me(Y1),Me(S_),Me(Ym),Me(C3))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class TD{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(CD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(I3(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(I3(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=CD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=CD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ys.DashCase|Ys.Important)?e.style.setProperty(t,i,r&Ys.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ys.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,T3(i)):this.eventManager.addEventListener(e,t,T3(i))}}function I3(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sG extends TD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=D3(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class AD extends TD{constructor(e,t,i,r,s=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=D3(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class F3 extends AD{constructor(e,t,i,r,s){const o=r+"-"+i.id;super(e,t,i,s,o),this.contentAttr=function nG(n){return"_ngcontent-%COMP%".replace(DD,n)}(o),this.hostAttr=function iG(n){return"_nghost-%COMP%".replace(DD,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let oG=(()=>{class n extends w3{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const R3=["alt","control","meta","shift"],aG={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let lG=(()=>{class n extends w3{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ru().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),R3.forEach(d=>{const p=i.indexOf(d);p>-1&&(i.splice(p,1),o+=d+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=aG[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),R3.forEach(o=>{o!==r&&(0,cG[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const k3=[{provide:A1,useValue:p3},{provide:mk,useValue:function uG(){MD.makeCurrent()},multi:!0},{provide:En,useFactory:function hG(){return function $M(n){dm=n}(document),document},deps:[]}],fG=Ck(Y9,"browser",k3),O3=new it(""),L3=[{provide:I1,useClass:class Zz{addToWindow(e){Mi.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Mi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mi.getAllAngularRootElements=()=>e.getAllRootElements(),Mi.frameworkStabilizers||(Mi.frameworkStabilizers=[]),Mi.frameworkStabilizers.push(i=>{const r=Mi.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Ru().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:wk,useClass:X2,deps:[cn,Z2,I1]},{provide:X2,useClass:X2,deps:[cn,Z2,I1]}],N3=[{provide:ym,useValue:"root"},{provide:el,useFactory:function dG(){return new el},deps:[]},{provide:K1,useClass:oG,multi:!0,deps:[En,cn,A1]},{provide:K1,useClass:lG,multi:!0,deps:[En]},{provide:X1,useClass:X1,deps:[Y1,S_,Ym,C3]},{provide:gn,useExisting:X1},{provide:S3,useExisting:S_},{provide:S_,useClass:S_,deps:[En]},{provide:Y1,useClass:Y1,deps:[K1,cn]},{provide:g3,useClass:Jz,deps:[]},[]];let B3=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ym,useValue:t.appId},{provide:x3,useExisting:Ym},Xz]}}}return n.\u0275fac=function(t){return new(t||n)(Me(O3,12))},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[...N3,...L3],imports:[Gd,X9]}),n})(),V3=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Me(En))},n.\u0275prov=Xe({token:n,factory:function(t){let i=null;return i=t?new t:function mG(){return new V3(Me(En))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let RD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(t){let i=null;return i=t?new(t||n):Me(z3),i},providedIn:"root"}),n})(),z3=(()=>{class n extends RD{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Di.NONE:return i;case Di.HTML:return Sc(i,"HTML")?Zo(i):hx(this._doc,String(i)).toString();case Di.STYLE:return Sc(i,"Style")?Zo(i):i;case Di.SCRIPT:if(Sc(i,"Script"))return Zo(i);throw new Error("unsafe value used in a script context");case Di.URL:return Sc(i,"URL")?Zo(i):uf(String(i));case Di.RESOURCE_URL:if(Sc(i,"ResourceURL"))return Zo(i);throw new Error(`unsafe value used in a resource URL context (see ${ld})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${ld})`)}}bypassSecurityTrustHtml(t){return function QM(n){return new qM(n)}(t)}bypassSecurityTrustStyle(t){return function eC(n){return new KM(n)}(t)}bypassSecurityTrustScript(t){return function tC(n){return new YM(n)}(t)}bypassSecurityTrustUrl(t){return function nC(n){return new XM(n)}(t)}bypassSecurityTrustResourceUrl(t){return function iC(n){return new ZM(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(En))},n.\u0275prov=Xe({token:n,factory:function(t){let i=null;return i=t?new t:function wG(n){return new z3(n.get(En))}(Me(ms)),i},providedIn:"root"}),n})();function Dt(...n){let e=n[n.length-1];return oc(e)?(n.pop(),oo(n,e)):lc(n)}function Wd(n,e){return lr(n,e,1)}function nr(n,e){return function(i){return i.lift(new SG(n,e))}}class SG{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new EG(e,this.predicate,this.thisArg))}}class EG extends oi{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}class Z1{}class PD{}class No{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof No?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new No;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof No?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class MG{encodeKey(e){return G3(e)}encodeValue(e){return G3(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const DG=/%(\d[a-f0-9])/gi,TG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function G3(n){return encodeURIComponent(n).replace(DG,(e,t)=>TG[t]??e)}function J1(n){return`${n}`}class Ya{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new MG,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function CG(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(J1):[J1(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ya({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(J1(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(J1(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class AG{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function j3(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function W3(n){return typeof Blob<"u"&&n instanceof Blob}function $3(n){return typeof FormData<"u"&&n instanceof FormData}class E_{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function IG(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new No),this.context||(this.context=new AG),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ya,this.urlWithParams=t}serializeBody(){return null===this.body?null:j3(this.body)||W3(this.body)||$3(this.body)||function FG(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ya?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$3(this.body)?null:W3(this.body)?this.body.type||null:j3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ya?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,d=e.params||this.params;const p=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((g,_)=>g.set(_,e.setHeaders[_]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,_)=>g.set(_,e.setParams[_]),d)),new E_(t,i,s,{params:d,headers:c,context:p,reportProgress:a,responseType:r,withCredentials:o})}}var xs=(()=>((xs=xs||{})[xs.Sent=0]="Sent",xs[xs.UploadProgress=1]="UploadProgress",xs[xs.ResponseHeader=2]="ResponseHeader",xs[xs.DownloadProgress=3]="DownloadProgress",xs[xs.Response=4]="Response",xs[xs.User=5]="User",xs))();class kD{constructor(e,t=200,i="OK"){this.headers=e.headers||new No,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class OD extends kD{constructor(e={}){super(e),this.type=xs.ResponseHeader}clone(e={}){return new OD({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Q1 extends kD{constructor(e={}){super(e),this.type=xs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Q1({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class q3 extends kD{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function LD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let $d=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof E_)s=t;else{let c,d;c=r.headers instanceof No?r.headers:new No(r.headers),r.params&&(d=r.params instanceof Ya?r.params:new Ya({fromObject:r.params})),s=new E_(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Dt(s).pipe(Wd(c=>this.handler.handle(c)));if(t instanceof E_||"events"===r.observe)return o;const a=o.pipe(nr(c=>c instanceof Q1));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(gt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(gt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(gt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(gt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ya).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,LD(r,i))}post(t,i,r={}){return this.request("POST",t,LD(r,i))}put(t,i,r={}){return this.request("PUT",t,LD(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Me(Z1))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();function K3(n,e){return e(n)}function RG(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const ND=new it("HTTP_INTERCEPTORS"),M_=new it("HTTP_INTERCEPTOR_FNS");function kG(){let n=null;return(e,t)=>(null===n&&(n=(dn(ND,{optional:!0})??[]).reduceRight(RG,K3)),n(e,t))}let Y3=(()=>{class n extends Z1{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=Array.from(new Set(this.injector.get(M_)));this.chain=i.reduceRight((r,s)=>function PG(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}(r,s,this.injector),K3)}return this.chain(t,i=>this.backend.handle(i))}}return n.\u0275fac=function(t){return new(t||n)(Me(PD),Me(Jo))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const BG=/^\)\]\}',?\n/;let Z3=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new an(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((y,x)=>r.setRequestHeader(y,x.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const y=t.detectContentTypeHeader();null!==y&&r.setRequestHeader("Content-Type",y)}if(t.responseType){const y=t.responseType.toLowerCase();r.responseType="json"!==y?y:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const y=r.statusText||"OK",x=new No(r.getAllResponseHeaders()),T=function VG(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new OD({headers:x,status:r.status,statusText:y,url:T}),o},c=()=>{let{headers:y,status:x,statusText:T,url:N}=a(),I=null;204!==x&&(I=typeof r.response>"u"?r.responseText:r.response),0===x&&(x=I?200:0);let A=x>=200&&x<300;if("json"===t.responseType&&"string"==typeof I){const H=I;I=I.replace(BG,"");try{I=""!==I?JSON.parse(I):null}catch(G){I=H,A&&(A=!1,I={error:G,text:I})}}A?(i.next(new Q1({body:I,headers:y,status:x,statusText:T,url:N||void 0})),i.complete()):i.error(new q3({error:I,headers:y,status:x,statusText:T,url:N||void 0}))},d=y=>{const{url:x}=a(),T=new q3({error:y,status:r.status||0,statusText:r.statusText||"Unknown Error",url:x||void 0});i.error(T)};let p=!1;const g=y=>{p||(i.next(a()),p=!0);let x={type:xs.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(x.total=y.total),"text"===t.responseType&&r.responseText&&(x.partialText=r.responseText),i.next(x)},_=y=>{let x={type:xs.UploadProgress,loaded:y.loaded};y.lengthComputable&&(x.total=y.total),i.next(x)};return r.addEventListener("load",c),r.addEventListener("error",d),r.addEventListener("timeout",d),r.addEventListener("abort",d),t.reportProgress&&(r.addEventListener("progress",g),null!==s&&r.upload&&r.upload.addEventListener("progress",_)),r.send(s),i.next({type:xs.Sent}),()=>{r.removeEventListener("error",d),r.removeEventListener("abort",d),r.removeEventListener("load",c),r.removeEventListener("timeout",d),t.reportProgress&&(r.removeEventListener("progress",g),null!==s&&r.upload&&r.upload.removeEventListener("progress",_)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Me(g3))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const BD=new it("XSRF_ENABLED"),J3=new it("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Q3=new it("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class eO{}let zG=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=i3(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Me(En),Me(A1),Me(J3))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();function GG(n,e){const t=n.url.toLowerCase();if(!dn(BD)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=dn(eO).getToken(),r=dn(Q3);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var ns=(()=>((ns=ns||{})[ns.Interceptors=0]="Interceptors",ns[ns.LegacyInterceptors=1]="LegacyInterceptors",ns[ns.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ns[ns.NoXsrfProtection=3]="NoXsrfProtection",ns[ns.JsonpSupport=4]="JsonpSupport",ns[ns.RequestsMadeViaParent=5]="RequestsMadeViaParent",ns))();function Qm(n,e){return{\u0275kind:n,\u0275providers:e}}function jG(...n){const e=[$d,Z3,Y3,{provide:Z1,useExisting:Y3},{provide:PD,useExisting:Z3},{provide:M_,useValue:GG,multi:!0},{provide:BD,useValue:!0},{provide:eO,useClass:zG}];for(const t of n)e.push(...t.\u0275providers);return bx(e)}const tO=new it("LEGACY_INTERCEPTOR_FN");let $G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[jG(Qm(ns.LegacyInterceptors,[{provide:tO,useFactory:kG},{provide:M_,useExisting:tO,multi:!0}]))]}),n})();function eg(...n){if(1===n.length){const e=n[0];if(fi(e))return ew(e,null);if(ro(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ew(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return ew(n=1===n.length&&fi(n[0])?n[0]:n,null).pipe(gt(t=>e(...t)))}return ew(n,null)}function ew(n,e){return new an(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const c=cr(n[a]);let d=!1;t.add(c.subscribe({next:p=>{d||(d=!0,o++),r[a]=p},error:p=>t.error(p),complete:()=>{s++,(s===i||!d)&&(o===i&&t.next(e?e.reduce((p,g,_)=>(p[g]=r[_],p),{}):r),t.complete())}}))}})}let nO=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Qc),ae(Gn))},n.\u0275dir=ht({type:n}),n})(),Af=(()=>{class n extends nO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ir(n)))(i||n)}}(),n.\u0275dir=ht({type:n,features:[Z]}),n})();const Ic=new it("NgValueAccessor"),KG={provide:Ic,useExisting:Ei(()=>VD),multi:!0},XG=new it("CompositionEventMode");let VD=(()=>{class n extends nO{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function YG(){const n=Ru()?Ru().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Qc),ae(Gn),ae(XG,8))},n.\u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&ni("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Hi([KG]),Z]}),n})();const ZG=!1;function qd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function rO(n){return null!=n&&"number"==typeof n.length}const vo=new it("NgValidators"),Kd=new it("NgAsyncValidators"),JG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class QG{static min(e){return function sO(n){return e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function oO(n){return e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function aO(n){return qd(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function cO(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function lO(n){return qd(n.value)||JG.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function uO(n){return e=>qd(e.value)||!rO(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function dO(n){return e=>rO(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function hO(n){if(!n)return tw;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(qd(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return _O(e)}static composeAsync(e){return yO(e)}}function tw(n){return null}function fO(n){return null!=n}function pO(n){const e=n_(n)?cr(n):n;if(ZG&&!_2(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new He(-1101,t)}return e}function mO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function gO(n,e){return e.map(t=>t(n))}function vO(n){return n.map(e=>function ej(n){return!n.validate}(e)?e:t=>e.validate(t))}function _O(n){if(!n)return null;const e=n.filter(fO);return 0==e.length?null:function(t){return mO(gO(t,e))}}function HD(n){return null!=n?_O(vO(n)):null}function yO(n){if(!n)return null;const e=n.filter(fO);return 0==e.length?null:function(t){return eg(gO(t,e).map(pO)).pipe(gt(mO))}}function UD(n){return null!=n?yO(vO(n)):null}function bO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xO(n){return n._rawValidators}function wO(n){return n._rawAsyncValidators}function zD(n){return n?Array.isArray(n)?n:[n]:[]}function nw(n,e){return Array.isArray(n)?n.includes(e):n===e}function SO(n,e){const t=zD(e);return zD(n).forEach(r=>{nw(t,r)||t.push(r)}),t}function EO(n,e){return zD(e).filter(t=>!nw(n,t))}class MO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=UD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ia extends MO{get formDirective(){return null}get path(){return null}}class Ou extends MO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class CO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let GD=(()=>{class n extends CO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Ou,2))},n.\u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Wi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Z]}),n})();function DO(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const $D=!1,C_="VALID",rw="INVALID",tg="PENDING",D_="DISABLED";function qD(n){return(sw(n)?n.validators:n)||null}function KD(n,e){return(sw(e)?e.asyncValidators:n)||null}function sw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class IO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===C_}get invalid(){return this.status===rw}get pending(){return this.status==tg}get disabled(){return this.status===D_}get enabled(){return this.status!==D_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(EO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(EO(e,this._rawAsyncValidators))}hasValidator(e){return nw(this._rawValidators,e)}hasAsyncValidator(e){return nw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=tg,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=C_,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===C_||this.status===tg)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?D_:C_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=tg,this._hasOwnPendingAsyncValidator=!0;const t=pO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new jn,this.statusChanges=new jn}_calculateStatus(){return this._allControlsDisabled()?D_:this.errors?rw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tg)?tg:this._anyControlsHaveStatus(rw)?rw:C_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cj(n){return Array.isArray(n)?HD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function lj(n){return Array.isArray(n)?UD(n):n||null}(this._rawAsyncValidators)}}class YD extends IO{constructor(e,t,i){super(qD(t),KD(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function AO(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new He(1002,$D?function aj(n,e){return`Must supply a value for form control ${DO(n,e)}`}(e,r):"")})})(this,!0,e),Object.keys(e).forEach(i=>{(function TO(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new He(1e3,$D?function sj(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!i[t])throw new He(1001,$D?function oj(n,e){return`Cannot find form control ${DO(n,e)}`}(e,t):"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ng=new it("CallSetDisabledState",{providedIn:"root",factory:()=>ow}),ow="always";function T_(n,e,t=ow){XD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FO(n,e)})}(n,e),function pj(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dj(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cw(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),uw(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function lw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function XD(n,e){const t=xO(n);null!==e.validator?n.setValidators(bO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=wO(n);null!==e.asyncValidator?n.setAsyncValidators(bO(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();lw(e._rawValidators,r),lw(e._rawAsyncValidators,r)}function uw(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=xO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=wO(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return lw(e._rawValidators,i),lw(e._rawAsyncValidators,i),t}function FO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function RO(n,e){XD(n,e)}function PO(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const yj={provide:ia,useExisting:Ei(()=>dw)},A_=(()=>Promise.resolve())();let dw=(()=>{class n extends ia{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new jn,this.form=new YD({},HD(t),UD(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){A_.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),T_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){A_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){A_.then(()=>{const i=this._findContainer(t.path),r=new YD({});RO(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){A_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){A_.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,PO(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(ae(vo,10),ae(Kd,10),ae(ng,8))},n.\u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&ni("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hi([yj]),Z]}),n})();function kO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function OO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const LO=class extends IO{constructor(e=null,t,i){super(qD(t),KD(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=OO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){OO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wj={provide:Ou,useExisting:Ei(()=>hw)},VO=(()=>Promise.resolve())();let hw=(()=>{class n extends Ou{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new LO,this._registered=!1,this.update=new jn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function QD(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===VD?t=s:function vj(n){return Object.getPrototypeOf(n.constructor)===Af}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function JD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){T_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){VO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function Zm(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);VO.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function aw(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(ae(ia,9),ae(vo,10),ae(Kd,10),ae(Ic,10),ae(Ka,8),ae(ng,8))},n.\u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Hi([wj]),Z,Dn]}),n})(),UO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({}),n})();const Aj={provide:ia,useExisting:Ei(()=>fw)};let oT,fw=(()=>{class n extends ia{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new jn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return T_(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){cw(t.control||null,t,!1),function _j(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,PO(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(cw(i||null,t),(n=>n instanceof LO)(r)&&(T_(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);RO(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function mj(n,e){return uw(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XD(this.form,this),this._oldForm&&uw(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(ae(vo,10),ae(Kd,10),ae(ng,8))},n.\u0275dir=ht({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&ni("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hi([Aj]),Z,Dn]}),n})(),qj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[UO]}),n})(),Yj=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ng,useValue:t.callSetDisabledState??ow}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[qj]}),n})();try{oT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{oT=!1}let I_,pw,Ff,aT,_o=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function gz(n){return n===p3}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!oT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Me(A1))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function F_(n){return function Xj(){if(null==I_&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>I_=!0}))}finally{I_=I_||!1}return I_}()?n:!!n.capture}function sL(){if(null==Ff){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ff=!1,Ff;if("scrollBehavior"in document.documentElement.style)Ff=!0;else{const n=Element.prototype.scrollTo;Ff=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ff}function R_(){if("object"!=typeof document||!document)return 0;if(null==pw){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),pw=0,0===n.scrollLeft&&(n.scrollLeft=1,pw=0===n.scrollLeft?1:2),n.remove()}return pw}function cT(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Yd(n){return n.composedPath?n.composedPath()[0]:n.target}function lT(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class Zi extends ln{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Aa;return this._value}next(e){super.next(this._value=e)}}function Xd(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Zd(){}function Mr(n,e,t){return function(r){return r.lift(new hW(n,e,t))}}class hW{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new fW(e,this.nextOrObserver,this.error,this.complete))}}class fW extends oi{constructor(e,t,i,r){super(e),this._tapNext=Zd,this._tapError=Zd,this._tapComplete=Zd,this._tapError=i||Zd,this._tapComplete=r||Zd,Wr(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Zd,this._tapError=t.error||Zd,this._tapComplete=t.complete||Zd)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class pW extends Tn{constructor(e,t){super()}schedule(e,t=0){return this}}class pT extends pW{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let lL=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class jl extends lL{constructor(e,t=lL.now){super(e,()=>jl.delegate&&jl.delegate!==this?jl.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return jl.delegate&&jl.delegate!==this?jl.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const rg=new jl(pT);function P_(n,e=rg){return t=>t.lift(new mW(n,e))}class mW{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new gW(e,this.dueTime,this.scheduler))}}class gW extends oi{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(vW,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function vW(n){n.debouncedNext()}const uL=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})(),Fc=new an(n=>n.complete());function gw(n){return n?function _W(n){return new an(e=>n.schedule(()=>e.complete()))}(n):Fc}function Vs(n){return e=>0===n?gw():e.lift(new yW(n))}class yW{constructor(e){if(this.total=e,this.total<0)throw new uL}call(e,t){return t.subscribe(new bW(e,this.total))}}class bW extends oi{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function dL(n){return e=>e.lift(new xW(n))}class xW{constructor(e){this.total=e}call(e,t){return t.subscribe(new wW(e,this.total))}}class wW extends oi{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function Rc(n,e){return t=>t.lift(new SW(n,e))}class SW{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new EW(e,this.compare,this.keySelector))}}class EW extends oi{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function Hr(n){return e=>e.lift(new MW(n))}class MW{constructor(e){this.notifier=e}call(e,t){const i=new CW(e),r=Go(i,this.notifier);return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class CW extends Ts{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,i,r,s){this.seenValue=!0,this.complete()}notifyComplete(){}}function ir(n){return null!=n&&"false"!=`${n}`}function Rf(n,e=0){return function DW(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function vw(n){return Array.isArray(n)?n:[n]}function ws(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Pf(n){return n instanceof Gn?n.nativeElement:n}let hL=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TW=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Pf(t);return new an(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new ln,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Me(hL))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AW=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=ir(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Rf(t),this._subscribe()}constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new jn,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(P_(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(ae(TW),ae(Gn),ae(cn))},n.\u0275dir=ht({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),fL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[hL]}),n})();const pL={};function _w(...n){let e=null,t=null;return oc(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&fi(n[0])&&(n=n[0]),lc(n,t).lift(new IW(e))}class IW{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new FW(e,this.resultSelector))}}class FW extends Ts{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(pL),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++){const r=e[i];this.add(Go(this,r,r,i))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i,r,s){const o=this.values,c=this.toRespond?o[i]===pL?--this.toRespond:this.toRespond:0;o[i]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function yw(...n){return function RW(){return wl(1)}()(Dt(...n))}function kf(...n){const e=n[n.length-1];return oc(e)?(n.pop(),t=>yw(n,t,e)):t=>yw(n,t)}const mL=new Set;let sg,PW=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):OW}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function kW(n){if(!mL.has(n))try{sg||(sg=document.createElement("style"),sg.setAttribute("type","text/css"),document.head.appendChild(sg)),sg.sheet&&(sg.sheet.insertRule(`@media ${n} {body{ }}`,0),mL.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(_o))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OW(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let LW=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new ln}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return gL(vw(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=_w(gL(vw(t)).map(o=>this._registerQuery(o).observable));return s=yw(s.pipe(Vs(1)),s.pipe(dL(1),P_(0))),s.pipe(gt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:d})=>{a.matches=a.matches||c,a.breakpoints[d]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new an(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(kf(i),gt(({matches:o})=>({query:t,matches:o})),Hr(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(Me(PW),Me(cn))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gL(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function bw(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const _L="cdk-describedby-message",xw="cdk-describedby-host";let mT=0,VW=(()=>{class n{constructor(t,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+mT++,this._document=t,this._id=dn(Ym)+"-"+mT++}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const s=gT(i,r);"string"!=typeof i?(yL(i,this._id),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,i,r){if(!i||!this._isElementNode(t))return;const s=gT(i,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof i){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${xw}="${this._id}"]`);for(let i=0;i<t.length;i++)this._removeCdkDescribedByReferenceIds(t[i]),t[i].removeAttribute(xw);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");yL(r,this._id),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(gT(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const i=bw(t,"aria-describedby").filter(r=>0!=r.indexOf(_L));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=this._messageRegistry.get(i);(function NW(n,e,t){const i=bw(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(xw,this._id),r.referenceCount++}_removeMessageReference(t,i){const r=this._messageRegistry.get(i);r.referenceCount--,function BW(n,e,t){const r=bw(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(xw)}_isElementDescribedByMessage(t,i){const r=bw(t,"aria-describedby"),s=this._messageRegistry.get(i),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(Me(En),Me(_o))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gT(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function yL(n,e){n.id||(n.id=`${_L}-${e}-${mT++}`)}class HW{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ln,this._typeaheadSubscription=Tn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ln,this.change=new ln,e instanceof f_&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Mr(t=>this._pressedLetters.push(t)),P_(e),nr(()=>this._pressedLetters.length>0),gt(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||Xd(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof f_?this._items.toArray():this._items}}class UW extends HW{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let ww=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function GW(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function zW(n){try{return n.frameElement}catch{return null}}(function ZW(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===xL(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=xL(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function YW(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function XW(n){return!function WW(n){return function qW(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function jW(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function $W(n){return function KW(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||bL(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Me(_o))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bL(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function xL(n){if(!bL(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class JW{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Vs(1)).subscribe(e)}}let vT=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new JW(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(Me(ww),Me(cn),Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wL(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function SL(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const QW=new it("cdk-input-modality-detector-options"),e$={ignoreKeys:[18,17,224,91,16]},og=F_({passive:!0,capture:!0});let t$=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Zi(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Yd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(wL(o)?"keyboard":"mouse"),this._mostRecentTarget=Yd(o))},this._onTouchstart=o=>{SL(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Yd(o))},this._options={...e$,...s},this.modalityDetected=this._modality.pipe(dL(1)),this.modalityChanged=this.modalityDetected.pipe(Rc()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,og),r.addEventListener("mousedown",this._onMousedown,og),r.addEventListener("touchstart",this._onTouchstart,og)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,og),document.removeEventListener("mousedown",this._onMousedown,og),document.removeEventListener("touchstart",this._onTouchstart,og))}}return n.\u0275fac=function(t){return new(t||n)(Me(_o),Me(cn),Me(En),Me(QW,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const n$=new it("liveAnnouncerElement",{providedIn:"root",factory:function i$(){return null}}),r$=new it("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let s$=0,o$=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+s$++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],o=s.getAttribute("aria-owns");o?-1===o.indexOf(t)&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}}return n.\u0275fac=function(t){return new(t||n)(Me(n$,8),Me(cn),Me(En),Me(r$,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a$=new it("cdk-focus-monitor-default-options"),Sw=F_({passive:!0,capture:!0});let ag=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ln,this._rootNodeFocusAndBlurListener=a=>{for(let d=Yd(a);d;d=d.parentElement)"focus"===a.type?this._onFocus(a,d):this._onBlur(a,d)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=Pf(t);if(!this._platform.isBrowser||1!==r.nodeType)return Dt(null);const s=function Jj(n){if(function Zj(){if(null==aT){const n=typeof document<"u"?document.head:null;aT=!(!n||!n.createShadowRoot&&!n.attachShadow)}return aT}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ln,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Pf(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Pf(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Yd(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Sw),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Sw)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Hr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Sw),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Sw),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Me(cn),Me(_o),Me(t$),Me(En,8),Me(a$,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ML="cdk-high-contrast-black-on-white",CL="cdk-high-contrast-white-on-black",_T="cdk-high-contrast-active";let DL=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=dn(LW).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(_T,ML,CL),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(_T,ML):2===i&&t.add(_T,CL)}}}return n.\u0275fac=function(t){return new(t||n)(Me(_o),Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TL=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Me(DL))},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[fL]}),n})();const c$=new it("cdk-dir-doc",{providedIn:"root",factory:function l$(){return dn(En)}}),u$=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Wl=(()=>{class n{constructor(t){this.value="ltr",this.change=new jn,t&&(this.value=function d$(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?u$.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Me(c$,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({}),n})();const h$=["text"];function f$(n,e){if(1&n&&vn(0,"mat-pseudo-checkbox",6),2&n){const t=wn();Qe("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function p$(n,e){1&n&&vn(0,"mat-pseudo-checkbox",7),2&n&&Qe("disabled",wn().disabled)}function m$(n,e){if(1&n&&(Oe(0,"span",8),et(1),Ne()),2&n){const t=wn();Ge(1),vs("(",t.group.label,")")}}const g$=[[["mat-icon"]],"*"],v$=["mat-icon","*"],y$=new it("mat-sanity-checks",{providedIn:"root",factory:function _$(){return!0}});let Ur=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!lT()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Me(DL),Me(y$,8),Me(En))},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[k_,k_]}),n})();function yT(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=ir(e)}constructor(...e){super(...e),this._disabled=!1}}}function bT(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function Ew(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ir(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function FL(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Rf(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}function b$(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let w$=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class S${constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const RL=F_({passive:!0,capture:!0});class E${constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Yd(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,RL)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,RL)))}}const PL={enterDuration:225,exitDuration:150},kL=F_({passive:!0,capture:!0}),OL=["mousedown","touchstart"],LL=["mouseup","mouseleave","touchend","touchcancel"];class L_{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Pf(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...PL,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function C$(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,d=s.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=a-o+"px",p.style.top=c-o+"px",p.style.height=2*o+"px",p.style.width=2*o+"px",null!=i.color&&(p.style.backgroundColor=i.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);const g=window.getComputedStyle(p),y=g.transitionDuration,x="none"===g.transitionProperty||"0s"===y||"0s, 0s"===y||0===r.width&&0===r.height,T=new S$(this,p,i,x);p.style.transform="scale3d(1, 1, 1)",T.state=0,i.persistent||(this._mostRecentTransientRipple=T);let N=null;return!x&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const I=()=>this._finishRippleTransition(T),A=()=>this._destroyRipple(T);p.addEventListener("transitionend",I),p.addEventListener("transitioncancel",A),N={onTransitionEnd:I,onTransitionCancel:A}}),this._activeRipples.set(T,N),(x||!d)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...PL,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Pf(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,OL.forEach(i=>{L_._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{LL.forEach(t=>{this._triggerElement.addEventListener(t,this,kL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=wL(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!SL(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(OL.forEach(t=>L_._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&LL.forEach(t=>e.removeEventListener(t,this,kL)))}}L_._eventManager=new E$;const D$=new it("mat-ripple-global-options");let Of=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new L_(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(cn),ae(_o),ae(D$,8),ae(qa,8))},n.\u0275dir=ht({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Wi("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Mw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur,Ur]}),n})(),T$=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return n.\u0275fac=function(t){return new(t||n)(ae(qa,8))},n.\u0275cmp=ai({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(t,i){2&t&&Wi("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),n})(),A$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur]}),n})();const NL=new it("MAT_OPTION_PARENT_COMPONENT"),BL=new it("MatOptgroup");let I$=0;class F${constructor(e,t=!1){this.source=e,this.isUserInput=t}}let R$=(()=>{class n{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=ir(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+I$++,this.onSelectionChange=new jn,this._stateChanges=new ln}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Xd(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new F$(this,t))}}return n.\u0275fac=function(t){Hl()},n.\u0275dir=ht({type:n,viewQuery:function(t,i){if(1&t&&Ns(h$,7),2&t){let r;ki(r=Oi())&&(i._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),xT=(()=>{class n extends R${constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(Ka),ae(NL,8),ae(BL,8))},n.\u0275cmp=ai({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mat-mdc-focus-indicator","mdc-list-item"],hostVars:12,hostBindings:function(t,i){1&t&&ni("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&t&&(Sf("id",i.id),tr("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),Wi("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},exportAs:["matOption"],features:[Z],ngContentSelectors:v$,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(va(g$),Ot(0,f$,1,2,"mat-pseudo-checkbox",0),Ri(1),Oe(2,"span",1,2),Ri(4,1),Ne(),Ot(5,p$,1,1,"mat-pseudo-checkbox",3),Ot(6,m$,2,1,"span",4),vn(7,"div",5)),2&t&&(Qe("ngIf",i.multiple),Ge(5),Qe("ngIf",!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator),Ge(1),Qe("ngIf",i.group&&i.group._inert),Ge(1),Qe("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[Of,Df,T$],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Mw,Gd,Ur,A$]}),n})();const HL=["mat-button",""],UL=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],zL=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],N$=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],B$=bT(yT(Ew(class{constructor(n){this._elementRef=n}})));let GL=(()=>{class n extends B${constructor(t,i,r,s){super(t),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=dn(ag),this._isFab=!1;const o=t.nativeElement.classList;for(const a of N$)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(c=>{o.add(c)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){Hl()},n.\u0275dir=ht({type:n,viewQuery:function(t,i){if(1&t&&Ns(Of,5),2&t){let r;ki(r=Oi())&&(i.ripple=r.first)}},features:[Z]}),n})(),H$=(()=>{class n extends GL{constructor(t,i,r,s){super(t,i,r,s),this._haltDisabledEvents=o=>{this.disabled&&(o.preventDefault(),o.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return n.\u0275fac=function(t){Hl()},n.\u0275dir=ht({type:n,features:[Z]}),n})(),jL=(()=>{class n extends GL{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(_o),ae(cn),ae(qa,8))},n.\u0275cmp=ai({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,i){2&t&&(tr("disabled",i.disabled||null),Wi("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Z],attrs:HL,ngContentSelectors:zL,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(va(UL),vn(0,"span",0),Ri(1),Oe(2,"span",1),Ri(3,1),Ne(),Ri(4,2),vn(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(Wi("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),Ge(6),Qe("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[Of],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),U$=(()=>{class n extends H${constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(_o),ae(cn),ae(qa,8))},n.\u0275cmp=ai({type:n,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:9,hostBindings:function(t,i){2&t&&(tr("disabled",i.disabled||null)("tabindex",i.disabled?-1:i.tabIndex)("aria-disabled",i.disabled.toString()),Wi("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[Z],attrs:HL,ngContentSelectors:zL,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(va(UL),vn(0,"span",0),Ri(1),Oe(2,"span",1),Ri(3,1),Ne(),Ri(4,2),vn(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(Wi("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),Ge(6),Qe("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[Of],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),G$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur,Mw,Ur]}),n})();class WL{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ln,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(e){if(this.compareWith){for(let t of this._selection)if(this.compareWith(e,t))return t;return e}return e}}const j$=["button"],W$=["*"],$L=new it("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),qL=new it("MatButtonToggleGroup"),$$={provide:Ic,useExisting:Ei(()=>XL),multi:!0};let KL=0;class YL{constructor(e,t){this.source=e,this.value=t}}let XL=(()=>{class n{get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=ir(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=ir(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=ir(t),this._markButtonsForCheck()}constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+KL++,this.valueChange=new jn,this.change=new jn,this.appearance=i&&i.appearance?i.appearance:"standard"}ngOnInit(){this._selectionModel=new WL(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new YL(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(ae(Ka),ae($L,8))},n.\u0275dir=ht({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&$a(r,ZL,5),2&t){let s;ki(s=Oi())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(tr("aria-disabled",i.disabled),Wi("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Hi([$$,{provide:qL,useExisting:n}])]}),n})();const q$=Ew(class{});let ZL=(()=>{class n extends q${get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=ir(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=ir(t)}constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new jn;const c=Number(o);this.tabIndex=c||0===c?c:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+KL++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new YL(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(ae(qL,8),ae(Ka),ae(Gn),ae(ag),qc("tabindex"),ae($L,8))},n.\u0275cmp=ai({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&Ns(j$,5),2&t){let r;ki(r=Oi())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&ni("focus",function(){return i.focus()}),2&t&&(tr("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),Wi("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Z],ngContentSelectors:W$,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(va(),Oe(0,"button",0,1),ni("click",function(){return i._onButtonClick()}),Oe(2,"span",2),Ri(3),Ne()(),vn(4,"span",3)(5,"span",4)),2&t){const r=zm(1);Qe("id",i.buttonId)("disabled",i.disabled||null),tr("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),Ge(5),Qe("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[Of],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),K$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur,Mw,Ur]}),n})();const Y$=["input"],X$=["label"],Z$=["*"],J$=new it("mat-checkbox-default-options",{providedIn:"root",factory:JL});function JL(){return{color:"accent",clickAction:"check-indeterminate"}}const Q$={provide:Ic,useExisting:Ei(()=>eN),multi:!0};class eq{}let tq=0;const QL=JL(),nq=FL(bT(Ew(yT(class{constructor(n){this._elementRef=n}}))));let iq=(()=>{class n extends nq{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=ir(t)}constructor(t,i,r,s,o,a,c){super(i),this._changeDetectorRef=r,this._ngZone=s,this._animationMode=a,this._options=c,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new jn,this.indeterminateChange=new jn,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||QL,this.color=this.defaultColor=this._options.color||QL.color,this.tabIndex=parseInt(o)||0,this.id=this._uniqueId=`${t}${++tq}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const i=ir(t);i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const i=ir(t);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const i=t!=this._indeterminate;this._indeterminate=ir(t),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let i=this._currentCheckState,r=this._getAnimationTargetElement();if(i!==t&&r&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,i){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===i)return this._animationClasses.uncheckedToChecked;if(3==i)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===i?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===i?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===i?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const i=this._inputElement;i&&(i.nativeElement.indeterminate=t)}}return n.\u0275fac=function(t){Hl()},n.\u0275dir=ht({type:n,viewQuery:function(t,i){if(1&t&&(Ns(Y$,5),Ns(X$,5),Ns(Of,5)),2&t){let r;ki(r=Oi())&&(i._inputElement=r.first),ki(r=Oi())&&(i._labelElement=r.first),ki(r=Oi())&&(i.ripple=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[Z]}),n})(),eN=(()=>{class n extends iq{constructor(t,i,r,s,o,a){super("mat-mdc-checkbox-",t,i,r,s,o,a),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(t){const i=new eq;return i.source=this,i.checked=t,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(t){t.target&&this._labelElement.nativeElement.contains(t.target)&&t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(Ka),ae(cn),qc("tabindex"),ae(qa,8),ae(J$,8))},n.\u0275cmp=ai({type:n,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(t,i){2&t&&(Sf("id",i.id),tr("tabindex",null)("aria-label",null)("aria-labelledby",null),Wi("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[Hi([Q$]),Z],ngContentSelectors:Z$,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[3,"for"],["label",""]],template:function(t,i){if(1&t&&(va(),Oe(0,"div",0),ni("click",function(s){return i._preventBubblingFromLabel(s)}),Oe(1,"div",1,2)(3,"div",3),ni("click",function(){return i._onTouchTargetClick()}),Ne(),Oe(4,"input",4,5),ni("blur",function(){return i._onBlur()})("click",function(){return i._onInputClick()})("change",function(s){return i._onInteractionEvent(s)}),Ne(),vn(6,"div",6),Oe(7,"div",7),ji(),Oe(8,"svg",8),vn(9,"path",9),Ne(),ua(),vn(10,"div",10),Ne(),vn(11,"div",11),Ne(),Oe(12,"label",12,13),Ri(14),Ne()()),2&t){const r=zm(2);Wi("mdc-form-field--align-end","before"==i.labelPosition),Ge(4),Wi("mdc-checkbox--selected",i.checked),Qe("checked",i.checked)("disabled",i.disabled)("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex),tr("aria-checked",i._getAriaChecked())("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("name",i.name)("value",i.value),Ge(7),Qe("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),Ge(1),Qe("for",i.inputId)}},dependencies:[Of],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:not([disabled])~.mdc-checkbox__ripple{opacity:.04;transform:scale(1);transition:opacity 80ms 0 cubic-bezier(0, 0, 0.2, 1),transform 80ms 0 cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:not([disabled]):focus~.mdc-checkbox__ripple{opacity:.16}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__native-control:focus:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, black)}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({}),n})(),oq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur,Mw,tN,Ur,tN]}),n})();const aq=["*"],hq=new it("MAT_CARD_CONFIG");let Cw=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}}return n.\u0275fac=function(t){return new(t||n)(ae(hq,8))},n.\u0275cmp=ai({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,i){2&t&&Wi("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:aq,decls:1,vars:0,template:function(t,i){1&t&&(va(),Ri(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),n})(),wT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]}),n})(),ST=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]}),n})(),Eq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur,Gd,Ur]}),n})();function ET(n,e,t,i){return Wr(t)&&(i=t,t=void 0),i?ET(n,e,t).pipe(gt(r=>fi(r)?i(...r):i(r))):new an(r=>{nN(n,e,function s(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function nN(n,e,t,i,r){let s;if(function Dq(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function Cq(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function Mq(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)nN(n[o],e,t,i,r)}i.add(s)}const Iq=new class Aq extends jl{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class Tq extends pT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let Fq=1;const Rq=Promise.resolve(),Dw={};function iN(n){return n in Dw&&(delete Dw[n],!0)}const rN={setImmediate(n){const e=Fq++;return Dw[e]=!0,Rq.then(()=>iN(e)&&n()),e},clearImmediate(n){iN(n)}},Oq=new class kq extends jl{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class Pq extends pT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=rN.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(rN.clearImmediate(t),e.scheduled=void 0)}});class Nq{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new Bq(e,this.durationSelector))}}class Bq extends Ts{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=Go(this,t);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,i,r){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function sN(n){return!fi(n)&&n-parseFloat(n)+1>=0}function Hq(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}function MT(n,e=rg){return function Lq(n){return function(t){return t.lift(new Nq(n))}}(()=>function Vq(n=0,e,t){let i=-1;return sN(e)?i=Number(e)<1?1:Number(e):oc(e)&&(t=e),oc(t)||(t=rg),new an(r=>{const s=sN(n)?n:+n-t.now();return t.schedule(Hq,s,{index:0,period:i,subscriber:r})})}(n,e))}const Uq=["contentWrapper"],zq=["*"],Gq=new it("VIRTUAL_SCROLL_STRATEGY");let N_=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new ln,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new an(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(MT(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Dt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(nr(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Pf(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ET(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Me(cn),Me(_o),Me(En,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oN=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new ln,this._elementScrolled=new an(o=>this.ngZone.runOutsideAngular(()=>ET(this.elementRef.nativeElement,"scroll").pipe(Hr(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=R_()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==R_()?t.left=t.right:1==R_()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;sL()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==R_()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==R_()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(N_),ae(cn),ae(Wl,8))},n.\u0275dir=ht({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),Tw=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new ln,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(MT(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Me(_o),Me(cn),Me(En,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aN=new it("VIRTUAL_SCROLLABLE");let $q=(()=>{class n extends oN{constructor(t,i,r,s){super(t,i,r,s)}measureViewportSize(t){const i=this.elementRef.nativeElement;return"horizontal"===t?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(N_),ae(cn),ae(Wl,8))},n.\u0275dir=ht({type:n,features:[Z]}),n})();const Kq=typeof requestAnimationFrame<"u"?Iq:Oq;let Yq=(()=>{class n extends $q{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=ir(t)}constructor(t,i,r,s,o,a,c,d){super(t,a,r,o),this.elementRef=t,this._changeDetectorRef=i,this._scrollStrategy=s,this.scrollable=d,this._platform=dn(_o),this._detachedSubject=new ln,this._renderedRangeSubject=new ln,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new an(p=>this._scrollStrategy.scrolledIndexChange.subscribe(g=>Promise.resolve().then(()=>this.ngZone.run(()=>p.next(g))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Tn.EMPTY,this._viewportChanges=c.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(kf(null),MT(0,Kq)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(Hr(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function qq(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){t=this.appendOnly&&"to-start"===i?0:t;const s="horizontal"==this.orientation,o=s?"X":"Y";let c=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===i&&(c+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=c&&(this._renderedContentTransform=c,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let i;const r="left",s="right",o="rtl"==this.dir?.value;i="start"==t?o?s:r:"end"==t?o?r:s:t||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of t)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(Ka),ae(cn),ae(Gq,8),ae(Wl,8),ae(N_),ae(Tw),ae(aN,8))},n.\u0275cmp=ai({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(1&t&&Ns(Uq,7),2&t){let r;ki(r=Oi())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){2&t&&Wi("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Hi([{provide:oN,useFactory:(e,t)=>e||t,deps:[[new pa,new Jh(aN)],n]}]),Z,F2],ngContentSelectors:zq,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){1&t&&(va(),Oe(0,"div",0,1),Ri(2),Ne(),vn(3,"div",2)),2&t&&(Ge(3),i_("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),Aw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({}),n})(),cN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[k_,Aw,Yq,k_,Aw]}),n})();class CT{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Iw extends CT{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class DT extends CT{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Xq extends CT{constructor(e){super(),this.element=e instanceof Gn?e.nativeElement:e}}class TT{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Iw?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof DT?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Xq?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Zq extends TT{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ms.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let AT=(()=>{class n extends TT{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new jn,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(ae(Du),ae(_a),ae(En))},n.\u0275dir=ht({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Z]}),n})(),Fw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({}),n})();function lN(n,e=!1){return t=>t.lift(new Jq(n,e))}class Jq{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new Qq(e,this.predicate,this.inclusive))}}class Qq extends oi{constructor(e,t,i){super(e),this.predicate=t,this.inclusive=i,this.index=0}_next(e){const t=this.destination;let i;try{i=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,i)}nextOrComplete(e,t){const i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())}}const uN=sL();class eK{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ws(-this._previousScrollPosition.left),e.style.top=ws(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),uN&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),uN&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class tK{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class dN{enable(){}disable(){}attach(){}}function IT(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function hN(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class nK{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();IT(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let iK=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new dN,this.close=o=>new tK(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new eK(this._viewportRuler,this._document),this.reposition=o=>new nK(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(Me(N_),Me(Tw),Me(cn),Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FT{constructor(e){if(this.scrollStrategy=new dN,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class rK{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let fN=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sK=(()=>{class n extends fN{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Me(En),Me(cn,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oK=(()=>{class n extends fN{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Yd(s)},this._clickListener=s=>{const o=Yd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){const p=c[d];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(p.overlayElement.contains(o)||p.overlayElement.contains(a))break;const g=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>g.next(s)):g.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Me(En),Me(_o),Me(cn,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rw=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||lT()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),lT()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Me(En),Me(_o))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class B_{constructor(e,t,i,r,s,o,a,c,d,p=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=p,this._backdropElement=null,this._backdropClick=new ln,this._attachments=new ln,this._detachments=new ln,this._locationChanges=Tn.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new ln,this._outsidePointerEvents=new ln,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Vs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ws(this._config.width),e.height=ws(this._config.height),e.minWidth=ws(this._config.minWidth),e.minHeight=ws(this._config.minHeight),e.maxWidth=ws(this._config.maxWidth),e.maxHeight=ws(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=vw(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Hr(uc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const pN="cdk-overlay-connected-position-bounding-box",aK=/([A-Za-z%]+)$/;class cK{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ln,this._resizeSubscription=Tn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(pN),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),d=this._getOverlayPoint(c,t,a),p=this._getOverlayFit(d,t,i,a);if(p.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(p,d,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<p.visibleArea)&&(o={overlayFit:p,overlayPoint:d,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const d of s){const p=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);p>c&&(c=p,a=d)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Lf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pN),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=gN(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(o+=c),d&&(a+=d);let _=0-a,y=a+s.height-i.height,x=this._subtractOverflows(s.width,0-o,o+s.width-i.width),T=this._subtractOverflows(s.height,_,y),N=x*T;return{visibleArea:N,isCompletelyWithinViewport:s.width*s.height===N,fitsInViewportVertically:T===s.height,fitsInViewportHorizontally:x==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=mN(this._overlayRef.getConfig().minHeight),a=mN(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=gN(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),d=Math.max(s.left-i.left-e.x,0);let p=0,g=0;return p=r.width<=s.width?d||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,g=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:p,y:g},{x:e.x+p,y:e.y+g}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new rK(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,p,g,_;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const y=Math.min(i.bottom-e.y+i.top,e.y),x=this._lastBoundingBoxSize.height;s=2*y,o=e.y-y,s>x&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-x/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)_=i.width-e.x+this._viewportMargin,p=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)g=e.x,p=i.right-e.x;else{const y=Math.min(i.right-e.x+i.left,e.x),x=this._lastBoundingBoxSize.width;p=2*y,g=e.x-y,p>x&&!this._isInitialRender&&!this._growAfterOpen&&(g=e.x-x/2)}return{top:o,left:g,bottom:a,right:_,width:p,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ws(i.height),r.top=ws(i.top),r.bottom=ws(i.bottom),r.width=ws(i.width),r.left=ws(i.left),r.right=ws(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ws(s)),o&&(r.maxWidth=ws(o))}this._lastBoundingBoxSize=i,Lf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Lf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Lf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const p=this._viewportRuler.getViewportScrollPosition();Lf(i,this._getExactOverlayY(t,e,p)),Lf(i,this._getExactOverlayX(t,e,p))}else i.position="static";let a="",c=this._getOffset(t,"x"),d=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ws(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ws(o.maxWidth):s&&(i.maxWidth="")),Lf(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ws(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ws(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:hN(e,i),isOriginOutsideView:IT(e,i),isOverlayClipped:hN(t,i),isOverlayOutsideView:IT(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&vw(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Gn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Lf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function mN(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(aK);return t&&"px"!==t?null:parseFloat(e)}return n||null}function gN(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const vN="cdk-global-overlay-wrapper";class lK{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(vN),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),d=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),p=this._xPosition,g=this._xOffset,_="rtl"===this._overlayRef.getConfig().direction;let y="",x="",T="";c?T="flex-start":"center"===p?(T="center",_?x=g:y=g):_?"left"===p||"end"===p?(T="flex-end",y=g):("right"===p||"start"===p)&&(T="flex-start",x=g):"left"===p||"start"===p?(T="flex-start",y=g):("right"===p||"end"===p)&&(T="flex-end",x=g),e.position=this._cssPosition,e.marginLeft=c?"0":y,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":x,t.justifyContent=T,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(vN),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let uK=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new lK}flexibleConnectedTo(t){return new cK(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Me(Tw),Me(En),Me(_o),Me(Rw))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dK=0,$l=(()=>{class n{constructor(t,i,r,s,o,a,c,d,p,g,_,y){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=d,this._directionality=p,this._location=g,this._outsideClickDispatcher=_,this._animationsModuleType=y}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new FT(t);return o.direction=o.direction||this._directionality.value,new B_(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+dK++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Xm)),new Zq(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Me(iK),Me(Rw),Me(Du),Me(uK),Me(sK),Me(ms),Me(cn),Me(En),Me(Wl),Me(g_),Me(oK),Me(qa,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hK=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],_N=new it("cdk-connected-overlay-scroll-strategy");let RT=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn))},n.\u0275dir=ht({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),n})(),yN=(()=>{class n{get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=ir(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=ir(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=ir(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=ir(t)}get push(){return this._push}set push(t){this._push=ir(t)}constructor(t,i,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Tn.EMPTY,this._attachSubscription=Tn.EMPTY,this._detachSubscription=Tn.EMPTY,this._positionSubscription=Tn.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new jn,this.positionChange=new jn,this.attach=new jn,this.detach=new jn,this.overlayKeydown=new jn,this.overlayOutsideClick=new jn,this._templatePortal=new DT(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=hK);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Xd(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new FT({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof RT?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(lN(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(ae($l),ae(ol),ae(_a),ae(_N),ae(Wl,8))},n.\u0275dir=ht({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Dn]}),n})();const pK={provide:_N,deps:[$l],useFactory:function fK(n){return()=>n.scrollStrategies.reposition()}};let Pw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[$l,pK],imports:[k_,Fw,cN,cN]}),n})();function V_(n){return new an(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?cr(t):gw()).subscribe(e)})}function mK(n,e){}class kw{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let bN=(()=>{class n extends TT{constructor(t,i,r,s,o,a,c,d){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=p=>{this._portalOutlet.hasAttached();const g=this._portalOutlet.attachDomPortal(p);return this._contentAttached(),g},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=cT(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=cT();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=cT())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(vT),ae(En,8),ae(kw),ae(ww),ae(cn),ae(B_),ae(ag))},n.\u0275cmp=ai({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&Ns(AT,7),2&t){let r;ki(r=Oi())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&tr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Z],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Ot(0,mK,0,0,"ng-template",0)},dependencies:[AT],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class PT{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new ln,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Xd(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const xN=new it("DialogScrollStrategy"),gK=new it("DialogData"),vK=new it("DefaultDialogConfig"),yK={provide:xN,deps:[$l],useFactory:function _K(n){return()=>n.scrollStrategies.block()}};let bK=0,wN=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ln,this._afterOpenedAtThisLevel=new ln,this._ariaHiddenElements=new Map,this.afterAllClosed=V_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(kf(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new kw,...i}).id=i.id||"cdk-dialog-"+bK++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new PT(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){kT(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){kT(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),kT(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new FT({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:kw,useValue:r},{provide:PT,useValue:i},{provide:B_,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=bN;const c=new Iw(a,r.viewContainerRef,ms.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof ol){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new DT(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new Iw(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:gK,useValue:t.data},{provide:PT,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(Wl,null,{optional:!0}))&&a.push({provide:Wl,useValue:{value:t.direction,change:Dt()}}),ms.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(Me($l),Me(ms),Me(vK,8),Me(n,12),Me(Rw),Me(xN))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();function kT(n,e){let t=n.length;for(;t--;)e(n[t])}let xK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[wN,yK],imports:[Pw,Fw,TL,Fw]}),n})();class SN{}class wK{}const Lu="*";function H_(n,e){return{type:7,name:n,definitions:e,options:{}}}function Nf(n,e=null){return{type:4,styles:e,timings:n}}function MN(n,e=null){return{type:2,steps:n,options:e}}function Xa(n){return{type:6,styles:n,offset:null}}function cg(n,e,t){return{type:0,name:n,styles:e,options:t}}function Jd(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function OT(n=null){return{type:9,options:n}}function LT(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function CN(n){Promise.resolve().then(n)}class U_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){CN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class DN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?CN(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const NT="!";function SK(n,e){}class Ow{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const BT="mdc-dialog--open",TN="mdc-dialog--opening",AN="mdc-dialog--closing";let CK=(()=>{class n extends bN{constructor(t,i,r,s,o,a,c,d){super(t,i,r,s,o,a,c,d),this._animationStateChanged=new jn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(vT),ae(En,8),ae(Ow),ae(ww),ae(cn),ae(B_),ae(ag))},n.\u0275cmp=ai({type:n,selectors:[["ng-component"]],features:[Z],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const IN="--mat-dialog-transition-duration";function FN(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?Rf(n.substring(0,n.length-2)):n.endsWith("s")?1e3*Rf(n.substring(0,n.length-1)):"0"===n?0:null}let DK=(()=>{class n extends CK{constructor(t,i,r,s,o,a,c,d,p){super(t,i,r,s,o,a,c,p),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?FN(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?FN(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(IN,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(TN),this._hostElement.classList.add(BT),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(BT),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(BT),this._animationsEnabled?(this._hostElement.style.setProperty(IN,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(AN),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(TN),this._hostElement.classList.remove(AN)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(vT),ae(En,8),ae(Ow),ae(ww),ae(cn),ae(B_),ae(qa,8),ae(ag))},n.\u0275cmp=ai({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(t,i){2&t&&(Sf("id",i._config.id),tr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Wi("_mat-animation-noopable",!i._animationsEnabled))},features:[Z],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(Oe(0,"div",0)(1,"div",1),Ot(2,SK,0,0,"ng-template",2),Ne()())},dependencies:[AT],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),n})();class RN{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new ln,this._beforeClosed=new ln,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(nr(r=>"opened"===r.state),Vs(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(nr(r=>"closed"===r.state),Vs(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),uc(this.backdropClick(),this.keydownEvents().pipe(nr(r=>27===r.keyCode&&!this.disableClose&&!Xd(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function TK(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(nr(t=>"closing"===t.state),Vs(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const PN=new it("MatMdcDialogData"),AK=new it("mat-mdc-dialog-default-options"),kN=new it("mat-mdc-dialog-scroll-strategy"),FK={provide:kN,deps:[$l],useFactory:function IK(n){return()=>n.scrollStrategies.block()}};let RK=0,PK=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,a,c,d,p,g){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=c,this._dialogContainerType=d,this._dialogDataToken=p,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ln,this._afterOpenedAtThisLevel=new ln,this._idPrefix="mat-dialog-",this.dialogConfigClass=Ow,this.afterAllClosed=V_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(kf(void 0))),this._scrollStrategy=a,this._dialog=i.get(wN)}open(t,i){let r;(i={...this._defaultOptions||new Ow,...i}).id=i.id||`${this._idPrefix}${RK++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:kw,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){Hl()},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),Lw=(()=>{class n extends PK{constructor(t,i,r,s,o,a,c,d){super(t,i,s,a,c,o,RN,DK,PN,d),this._idPrefix="mat-mdc-dialog-"}}return n.\u0275fac=function(t){return new(t||n)(Me($l),Me(ms),Me(g_,8),Me(AK,8),Me(kN),Me(n,12),Me(Rw),Me(qa,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),kK=0,OK=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+kK++}ngOnInit(){this._dialogRef||(this._dialogRef=function NK(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(ae(RN,8),ae(Gn),ae(Lw))},n.\u0275dir=ht({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,i){2&t&&Sf("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),LK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),n})(),BK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[Lw,FK],imports:[xK,Pw,Fw,Ur,Ur]}),n})();function Pc(n,e){return new an(e?t=>e.schedule(VK,0,{error:n,subscriber:t}):t=>t.error(n))}function VK({error:n,subscriber:e}){e.error(n)}function ra(n){return function(t){const i=new HK(n),r=t.lift(i);return i.caught=r}}class HK{constructor(e){this.selector=e}call(e,t){return t.subscribe(new UK(e,this.selector,this.caught))}}class UK extends Ts{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new Pt(this,void 0,void 0);this.add(i);const r=Go(this,t,void 0,void 0,i);r!==i&&this.add(r)}}}function Nw(n){return e=>e.lift(new zK(n))}class zK{constructor(e){this.callback=e}call(e,t){return t.subscribe(new GK(e,this.callback))}}class GK extends oi{constructor(e,t){super(e),this.add(new Tn(t))}}const jK=["*"];let Bw;function z_(n){return function WK(){if(void 0===Bw&&(Bw=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Bw=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Bw}()?.createHTML(n)||n}function LN(n){return Error(`Unable to find icon with the name "${n}"`)}function NN(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function BN(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Bf{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Vw=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Bf(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Di.HTML,r);if(!o)throw BN(r);const a=z_(o);return this._addSvgIconConfig(t,i,new Bf("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Bf(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Di.HTML,i);if(!s)throw BN(i);const o=z_(s);return this._addSvgIconSetConfig(t,new Bf("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Di.RESOURCE_URL,t);if(!i)throw NN(t);const r=this._cachedIconsByUrl.get(i);return r?Dt(Hw(r)):this._loadSvgIconFromConfig(new Bf(t,null)).pipe(Mr(s=>this._cachedIconsByUrl.set(i,s)),gt(s=>Hw(s)))}getNamedSvgIcon(t,i=""){const r=VN(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Pc(LN(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Dt(Hw(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(gt(i=>Hw(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Dt(r):eg(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(ra(a=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(Di.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),Dt(null)})))).pipe(gt(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw LN(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Mr(i=>t.svgText=i),gt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Dt(null):this._fetchIcon(t).pipe(Mr(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(z_("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(z_("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function $K(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Di.RESOURCE_URL,i);if(!o)throw NN(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(gt(d=>z_(d)),Nw(()=>this._inProgressUrlFetches.delete(o)),Ep());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(VN(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return KK(s)?new Bf(s.url,null,s.options):new Bf(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(Me($d,8),Me(RD),Me(En,8),Me(el))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hw(n){return n.cloneNode(!0)}function VN(n,e){return n+":"+e}function KK(n){return!(!n.url||!n.options)}const YK=bT(class{constructor(n){this._elementRef=n}}),XK=new it("MAT_ICON_DEFAULT_OPTIONS"),ZK=new it("mat-icon-location",{providedIn:"root",factory:function JK(){const n=dn(En),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),HN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],QK=HN.map(n=>`[${n}]`).join(", "),eY=/^url\(['"]?#(.*?)['"]?\)$/;let VT=(()=>{class n extends YK{get inline(){return this._inline}set inline(t){this._inline=ir(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Tn.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(QK),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)HN.forEach(o=>{const a=i[s],c=a.getAttribute(o),d=c?c.match(eY):null;if(d){let p=r.get(a);p||(p=[],r.set(a,p)),p.push({name:o,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Vs(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(Vw),qc("aria-hidden"),ae(ZK),ae(el),ae(XK,8))},n.\u0275cmp=ai({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,i){2&t&&(tr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Wi("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Z],ngContentSelectors:jK,decls:1,vars:0,template:function(t,i){1&t&&(va(),Ri(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),tY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur,Ur]}),n})();const nY=["matFormFieldNotchedOutline",""],iY=["*"],rY=["textField"],sY=["iconPrefixContainer"],oY=["textPrefixContainer"];function aY(n,e){1&n&&vn(0,"span",19)}function cY(n,e){if(1&n){const t=xf();Oe(0,"label",17),ni("cdkObserveContent",function(){return P(t),V(wn(2)._refreshOutlineNotchWidth())}),Ri(1,1),Ot(2,aY,1,0,"span",18),Ne()}if(2&n){const t=wn(2);Qe("floating",t._shouldLabelFloat())("cdkObserveContentDisabled",!t._hasOutline())("id",t._labelId),tr("for",t._control.id)("aria-owns",t._control.id),Ge(2),Qe("ngIf",!t.hideRequiredMarker&&t._control.required)}}function lY(n,e){1&n&&Ot(0,cY,3,6,"label",16),2&n&&Qe("ngIf",wn()._hasFloatingLabel())}function uY(n,e){1&n&&vn(0,"div",20)}function dY(n,e){}function hY(n,e){1&n&&Ot(0,dY,0,0,"ng-template",22),2&n&&(wn(2),Qe("ngTemplateOutlet",zm(1)))}function fY(n,e){if(1&n&&(Oe(0,"div",21),Ot(1,hY,1,1,"ng-template",9),Ne()),2&n){const t=wn();Qe("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",t._labelWidth),Ge(1),Qe("ngIf",!t._forceDisplayInfixLabel())}}function pY(n,e){1&n&&(Oe(0,"div",23,24),Ri(2,2),Ne())}function mY(n,e){1&n&&(Oe(0,"div",25,26),Ri(2,3),Ne())}function gY(n,e){}function vY(n,e){1&n&&Ot(0,gY,0,0,"ng-template",22),2&n&&(wn(),Qe("ngTemplateOutlet",zm(1)))}function _Y(n,e){1&n&&(Oe(0,"div",27),Ri(1,4),Ne())}function yY(n,e){1&n&&(Oe(0,"div",28),Ri(1,5),Ne())}function bY(n,e){1&n&&vn(0,"div",29)}function xY(n,e){1&n&&(Oe(0,"div",30),Ri(1,6),Ne()),2&n&&Qe("@transitionMessages",wn()._subscriptAnimationState)}function wY(n,e){if(1&n&&(Oe(0,"mat-hint",34),et(1),Ne()),2&n){const t=wn(2);Qe("id",t._hintLabelId),Ge(1),$i(t.hintLabel)}}function SY(n,e){if(1&n&&(Oe(0,"div",31),Ot(1,wY,2,2,"mat-hint",32),Ri(2,7),vn(3,"div",33),Ri(4,8),Ne()),2&n){const t=wn();Qe("@transitionMessages",t._subscriptAnimationState),Ge(1),Qe("ngIf",t.hintLabel)}}const EY=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],MY=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let UN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-label"]]}),n})();const CY=new it("MatError");let DY=0,zN=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+DY++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){2&t&&(Sf("id",i.id),tr("align",null),Wi("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),n})();const TY=new it("MatPrefix"),AY=new it("MatSuffix");let GN=(()=>{class n{constructor(t){this._elementRef=t,this.floating=!1}getWidth(){return function IY(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn))},n.\u0275dir=ht({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){2&t&&Wi("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),n})();const jN="mdc-line-ripple--active",Uw="mdc-line-ripple--deactivating";let WN=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(Uw);"opacity"===r.propertyName&&o&&s.remove(jN,Uw)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(Uw),t.add(jN)}deactivate(){this._elementRef.nativeElement.classList.add(Uw)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(cn))},n.\u0275dir=ht({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),$N=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(cn))},n.\u0275cmp=ai({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){2&t&&Wi("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:nY,ngContentSelectors:iY,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(t,i){1&t&&(va(),vn(0,"div",0),Oe(1,"div",1),Ri(2),Ne(),vn(3,"div",2)),2&t&&(Ge(1),i_("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const FY={transitionMessages:H_("transitionMessages",[cg("enter",Xa({opacity:1,transform:"translateY(0%)"})),Jd("void => enter",[Xa({opacity:0,transform:"translateY(-5px)"}),Nf("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let qN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n}),n})();const KN=new it("MatFormField"),RY=new it("MAT_FORM_FIELD_DEFAULT_OPTIONS");let YN=0,JN=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=ir(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,o,a,c,d){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=c,this._document=d,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+YN++,this._hintLabelId="mat-mdc-hint-"+YN++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new ln,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Hr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),uc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Hr(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Hr(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Gn),ae(Ka),ae(cn),ae(Wl),ae(_o),ae(RY,8),ae(qa,8),ae(En))},n.\u0275cmp=ai({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&($a(r,UN,5),$a(r,UN,7),$a(r,qN,5),$a(r,TY,5),$a(r,AY,5),$a(r,CY,5),$a(r,zN,5)),2&t){let s;ki(s=Oi())&&(i._labelChildNonStatic=s.first),ki(s=Oi())&&(i._labelChildStatic=s.first),ki(s=Oi())&&(i._formFieldControl=s.first),ki(s=Oi())&&(i._prefixChildren=s),ki(s=Oi())&&(i._suffixChildren=s),ki(s=Oi())&&(i._errorChildren=s),ki(s=Oi())&&(i._hintChildren=s)}},viewQuery:function(t,i){if(1&t&&(Ns(rY,5),Ns(sY,5),Ns(oY,5),Ns(GN,5),Ns($N,5),Ns(WN,5)),2&t){let r;ki(r=Oi())&&(i._textField=r.first),ki(r=Oi())&&(i._iconPrefixContainer=r.first),ki(r=Oi())&&(i._textPrefixContainer=r.first),ki(r=Oi())&&(i._floatingLabel=r.first),ki(r=Oi())&&(i._notchedOutline=r.first),ki(r=Oi())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){2&t&&Wi("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Hi([{provide:KN,useExisting:n}])],ngContentSelectors:MY,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,i){1&t&&(va(EY),Ot(0,lY,1,1,"ng-template",null,0,XP),Oe(2,"div",1,2),ni("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),Ot(4,uY,1,0,"div",3),Oe(5,"div",4),Ot(6,fY,2,3,"div",5),Ot(7,pY,3,0,"div",6),Ot(8,mY,3,0,"div",7),Oe(9,"div",8),Ot(10,vY,1,1,"ng-template",9),Ri(11),Ne(),Ot(12,_Y,2,0,"div",10),Ot(13,yY,2,0,"div",11),Ne(),Ot(14,bY,1,0,"div",12),Ne(),Oe(15,"div",13),Ot(16,xY,2,1,"div",14),Ot(17,SY,5,2,"div",15),Ne()),2&t&&(Ge(2),Wi("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),Ge(2),Qe("ngIf",!i._hasOutline()&&!i._control.disabled),Ge(2),Qe("ngIf",i._hasOutline()),Ge(1),Qe("ngIf",i._hasIconPrefix),Ge(1),Qe("ngIf",i._hasTextPrefix),Ge(2),Qe("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),Ge(2),Qe("ngIf",i._hasTextSuffix),Ge(1),Qe("ngIf",i._hasIconSuffix),Ge(1),Qe("ngIf",!i._hasOutline()),Ge(1),Wi("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),Qe("ngSwitch",i._getDisplayedMessages()),Ge(1),Qe("ngSwitchCase","error"),Ge(1),Qe("ngSwitchCase","hint"))},dependencies:[Df,d3,b_,bD,AW,zN,GN,$N,WN],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[FY.transitionMessages]},changeDetection:0}),n})(),OY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Ur,Gd,fL,Ur]}),n})();function yo(n,e){return"function"==typeof e?t=>t.pipe(yo((i,r)=>cr(n(i,r)).pipe(gt((s,o)=>e(i,s,r,o))))):t=>t.lift(new LY(n))}class LY{constructor(e){this.project=e}call(e,t){return t.subscribe(new NY(e,this.project))}}class NY extends Ts{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,i)}_innerSub(e,t,i){const r=this.innerSubscription;r&&r.unsubscribe();const s=new Pt(this,t,i),o=this.destination;o.add(s),this.innerSubscription=Go(this,e,void 0,void 0,s),this.innerSubscription!==s&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,i,r,s){this.destination.next(t)}}const BY=["trigger"],VY=["panel"];function HY(n,e){if(1&n&&(Oe(0,"span",10),et(1),Ne()),2&n){const t=wn();Ge(1),$i(t.placeholder)}}function UY(n,e){if(1&n&&(Oe(0,"span",14),et(1),Ne()),2&n){const t=wn(2);Ge(1),$i(t.triggerValue)}}function zY(n,e){1&n&&Ri(0,0,["*ngSwitchCase","true"])}function GY(n,e){1&n&&(Oe(0,"span",11),Ot(1,UY,2,1,"span",12),Ot(2,zY,1,0,"ng-content",13),Ne()),2&n&&(Qe("ngSwitch",!!wn().customTrigger),Ge(2),Qe("ngSwitchCase",!0))}function jY(n,e){if(1&n){const t=xf();ji(),ua(),Oe(0,"div",15,16),ni("@transformPanel.done",function(r){return P(t),V(wn()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return P(t),V(wn()._handleKeydown(r))}),Ri(2,1),Ne()}if(2&n){const t=wn();GR("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",t._getPanelTheme(),""),Qe("ngClass",t.panelClass)("@transformPanel","showing"),tr("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const WY=[[["mat-select-trigger"]],"*"],$Y=["mat-select-trigger","*"],qY={transformPanelWrap:H_("transformPanelWrap",[Jd("* => void",LT("@transformPanel",[OT()],{optional:!0}))]),transformPanel:H_("transformPanel",[cg("void",Xa({opacity:0,transform:"scale(1, 0.8)"})),Jd("void => showing",Nf("120ms cubic-bezier(0, 0, 0.2, 1)",Xa({opacity:1,transform:"scale(1, 1)"}))),Jd("* => void",Nf("100ms linear",Xa({opacity:0})))])};let QN=0;const e4=new it("mat-select-scroll-strategy"),YY=new it("MAT_SELECT_CONFIG"),XY={provide:e4,deps:[$l],useFactory:function KY(n){return()=>n.scrollStrategies.reposition()}},ZY=new it("MatSelectTrigger");class JY{constructor(e,t){this.source=e,this.value=t}}const QY=Ew(FL(yT(b$(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new ln}}))));let eX=(()=>{class n extends QY{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(QG.required)??!1}set required(t){this._required=ir(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=ir(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=ir(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Rf(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}constructor(t,i,r,s,o,a,c,d,p,g,_,y,x,T){super(o,s,c,d,g),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=a,this._parentFormField=p,this._liveAnnouncer=x,this._defaultOptions=T,this._panelOpen=!1,this._compareWith=(N,I)=>N===I,this._uid="mat-select-"+QN++,this._triggerAriaLabelledBy=null,this._destroy=new ln,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+QN++,this._panelDoneAnimatingStream=new ln,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=V_(()=>{const N=this.options;return N?N.changes.pipe(kf(N),yo(()=>uc(...N.map(I=>I.onSelectionChange)))):this._ngZone.onStable.pipe(Vs(1),yo(()=>this.optionSelectionChanges))}),this.openedChange=new jn,this._openedStream=this.openedChange.pipe(nr(N=>N),gt(()=>{})),this._closedStream=this.openedChange.pipe(nr(N=>!N),gt(()=>{})),this.selectionChange=new jn,this.valueChange=new jn,this.ngControl&&(this.ngControl.valueAccessor=this),null!=T?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=T.typeaheadDebounceInterval),this._scrollStrategyFactory=y,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(_)||0,this.id=this.id}ngOnInit(){this._selectionModel=new WL(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Rc(),Hr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Hr(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(kf(null),Hr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&s&&!Xd(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const c=this.selected;c&&a!==c&&this._liveAnnouncer.announce(c.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,s=40===r||38===r,o=i.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!i.activeItem||Xd(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(c=>!c.disabled&&!c.selected);this.options.forEach(c=>{c.disabled||(a?c.select():c.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(t),this._multiple&&s&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Vs(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new UW(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=uc(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Hr(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),uc(...this.options.map(i=>i._stateChanges)).pipe(Hr(t)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let i=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(ae(Tw),ae(Ka),ae(cn),ae(w$),ae(Gn),ae(Wl,8),ae(dw,8),ae(fw,8),ae(KN,8),ae(Ou,10),qc("tabindex"),ae(e4),ae(o$),ae(YY,8))},n.\u0275dir=ht({type:n,viewQuery:function(t,i){if(1&t&&(Ns(BY,5),Ns(VY,5),Ns(yN,5)),2&t){let r;ki(r=Oi())&&(i.trigger=r.first),ki(r=Oi())&&(i.panel=r.first),ki(r=Oi())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Z,Dn]}),n})(),t4=(()=>{class n extends eX{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Hr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(t){const i=this.options.toArray()[t];if(i){const r=this.panel.nativeElement,s=function P$(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(t,this.options,this.optionGroups),o=i._getHostElement();r.scrollTop=0===t&&1===s?0:function k$(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(t){return new JY(this,t)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof RT?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=ir(t),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ir(n)))(i||n)}}(),n.\u0275cmp=ai({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,r){if(1&t&&($a(r,ZY,5),$a(r,xT,5),$a(r,BL,5)),2&t){let s;ki(s=Oi())&&(i.customTrigger=s.first),ki(s=Oi())&&(i.options=s),ki(s=Oi())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(t,i){1&t&&ni("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(tr("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),Wi("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[Hi([{provide:qN,useExisting:n},{provide:NL,useExisting:n}]),Z],ngContentSelectors:$Y,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(va(WY),Oe(0,"div",0,1),ni("click",function(){return i.toggle()}),Oe(3,"div",2),Ot(4,HY,2,1,"span",3),Ot(5,GY,3,2,"span",4),Ne(),Oe(6,"div",5)(7,"div",6),ji(),Oe(8,"svg",7),vn(9,"path",8),Ne()()()(),Ot(10,jY,3,9,"ng-template",9),ni("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const r=zm(1);tr("aria-owns",i.panelOpen?i.id+"-panel":null),Ge(3),Qe("ngSwitch",i.empty),tr("id",i._valueId),Ge(1),Qe("ngSwitchCase",!0),Ge(1),Qe("ngSwitchCase",!1),Ge(5),Qe("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[Jm,b_,bD,l3,yN,RT],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[qY.transformPanel]},changeDetection:0}),n})(),tX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[XY],imports:[Gd,Pw,VL,Ur,Aw,OY,VL,Ur]}),n})();const nX=["tooltip"],n4=new it("mat-tooltip-scroll-strategy"),sX={provide:n4,deps:[$l],useFactory:function rX(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},aX=new it("mat-tooltip-default-options",{providedIn:"root",factory:function oX(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),i4="tooltip-panel",r4=F_({passive:!0});let fX=(()=>{class n{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=ir(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){this._disabled=ir(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Rf(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Rf(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,i,r,s,o,a,c,d,p,g,_,y){this._overlay=t,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=c,this._focusMonitor=d,this._dir=g,this._defaultOptions=_,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new ln,this._scrollStrategy=p,this._document=y,_&&(_.position&&(this.position=_.position),_.positionAtOrigin&&(this.positionAtOrigin=_.positionAtOrigin),_.touchGestures&&(this.touchGestures=_.touchGestures)),g.change.pipe(Hr(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Hr(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{t.removeEventListener(i,r,r4)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(i);this._detach(),this._portal=this._portal||new Iw(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Hr(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(t):(i._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof Gn)return this._overlayRef;this._detach()}const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&t||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(Hr(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${i4}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Hr(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Hr(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Hr(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!Xd(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const i=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Vs(1),Hr(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){const{overlayY:i,originX:r,originY:s}=t;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const c=`${this._cssClassPrefix}-${i4}-`;a.removePanelClass(c+this._currentPosition),a.addPanelClass(c+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{let i;this._setupPointerExitEventsIfNeeded(),void 0!==t.x&&void 0!==t.y&&(i=t),this.show(void 0,i)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{const i=t.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",i=>{const r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,r4)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const i=this._elementRef.nativeElement,r=i.style;("on"===t||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){Hl()},n.\u0275dir=ht({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),HT=(()=>{class n extends fX{constructor(t,i,r,s,o,a,c,d,p,g,_,y){super(t,i,r,s,o,a,c,d,p,g,_,y),this._tooltipComponent=mX,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(t){const r=!this._dir||"ltr"==this._dir.value;return"top"===t.originY?t.offsetY=-8:"bottom"===t.originY?t.offsetY=8:"start"===t.originX?t.offsetX=r?-8:8:"end"===t.originX&&(t.offsetX=r?8:-8),t}}return n.\u0275fac=function(t){return new(t||n)(ae($l),ae(Gn),ae(N_),ae(_a),ae(cn),ae(_o),ae(VW),ae(ag),ae(n4),ae(Wl,8),ae(aX,8),ae(En))},n.\u0275dir=ht({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[Z]}),n})(),pX=(()=>{class n{constructor(t,i){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new ln,this._animationsDisabled="NoopAnimations"===i}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const i=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(i.classList.remove(t?s:r),i.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(i);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(ae(Ka),ae(qa,8))},n.\u0275dir=ht({type:n}),n})(),mX=(()=>{class n extends pX{constructor(t,i,r){super(t,r),this._elementRef=i,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>24&&t.width>=200}}return n.\u0275fac=function(t){return new(t||n)(ae(Ka),ae(Gn),ae(qa,8))},n.\u0275cmp=ai({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,i){if(1&t&&Ns(nX,7),2&t){let r;ki(r=Oi())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,i){1&t&&ni("mouseleave",function(s){return i._handleMouseLeave(s)}),2&t&&i_("zoom",i.isVisible()?1:null)},features:[Z],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(t,i){1&t&&(Oe(0,"div",0,1),ni("animationend",function(s){return i._handleAnimationEnd(s)}),Oe(2,"div",2),et(3),Ne()()),2&t&&(Wi("mdc-tooltip--multiline",i._isMultiline),Qe("ngClass",i.tooltipClass),Ge(3),$i(i.message))},dependencies:[Jm],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:-8px;right:-8px;bottom:-8px;left:-8px;z-index:-1;position:absolute}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),n})(),gX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:[sX],imports:[TL,Gd,Pw,Ur,Ur,Aw]}),n})();function s4(n){return new He(3e3,!1)}function ZX(){return typeof window<"u"&&typeof window.document<"u"}function UT(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Qd(n){switch(n.length){case 0:return new U_;case 1:return n[0];default:return new DN(n)}}function o4(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let c=-1,d=null;if(i.forEach(p=>{const g=p.get("offset"),_=g==c,y=_&&d||new Map;p.forEach((x,T)=>{let N=T,I=x;if("offset"!==T)switch(N=e.normalizePropertyName(N,o),I){case NT:I=r.get(T);break;case Lu:I=s.get(T);break;default:I=e.normalizeStyleValue(T,N,I,o)}y.set(N,I)}),_||a.push(y),d=y,c=g}),o.length)throw function VX(n){return new He(3502,!1)}();return a}function zT(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&GT(t,"start",n)));break;case"done":n.onDone(()=>i(t&&GT(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&GT(t,"destroy",n)))}}function GT(n,e,t){const s=jT(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function jT(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Za(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function a4(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let WT=(n,e)=>!1,c4=(n,e,t)=>[],l4=null;function $T(n){const e=n.parentNode||n.host;return e===l4?null:e}(UT()||typeof Element<"u")&&(ZX()?(l4=(()=>document.documentElement)(),WT=(n,e)=>{for(;e;){if(e===n)return!0;e=$T(e)}return!1}):WT=(n,e)=>n.contains(e),c4=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Vf=null,u4=!1;const d4=WT,h4=c4;let f4=(()=>{class n{validateStyleProperty(t){return function QX(n){Vf||(Vf=function eZ(){return typeof document<"u"?document.body:null}()||{},u4=!!Vf.style&&"WebkitAppearance"in Vf.style);let e=!0;return Vf.style&&!function JX(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Vf.style,!e&&u4&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Vf.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return d4(t,i)}getParentElement(t){return $T(t)}query(t,i,r){return h4(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new U_(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),qT=(()=>{class n{}return n.NOOP=new f4,n})();const tZ=1e3,KT="ng-enter",zw="ng-leave",Gw="ng-trigger",jw=".ng-trigger",m4="ng-animating",YT=".ng-animating";function Nu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:XT(parseFloat(e[1]),e[2])}function XT(n,e){return"s"===e?n*tZ:n}function Ww(n,e,t){return n.hasOwnProperty("duration")?n:function iZ(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(s4()),{duration:0,delay:0,easing:""};r=XT(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=XT(parseFloat(c),a[4]));const d=a[5];d&&(o=d)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function vX(){return new He(3100,!1)}()),a=!0),s<0&&(e.push(function _X(){return new He(3101,!1)}()),a=!0),a&&e.splice(c,0,s4())}return{duration:r,delay:s,easing:o}}(n,e,t)}function G_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function g4(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function eh(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function _4(n,e,t){return t?e+":"+t+";":""}function y4(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=_4(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=_4(0,aZ(t),n.style[t]));n.setAttribute("style",e)}function ql(n,e,t){n.style&&(e.forEach((i,r)=>{const s=JT(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),UT()&&y4(n))}function Hf(n,e){n.style&&(e.forEach((t,i)=>{const r=JT(i);n.style[r]=""}),UT()&&y4(n))}function j_(n){return Array.isArray(n)?1==n.length?n[0]:MN(n):n}const ZT=new RegExp("{{\\s*(.+?)\\s*}}","g");function b4(n){let e=[];if("string"==typeof n){let t;for(;t=ZT.exec(n);)e.push(t[1]);ZT.lastIndex=0}return e}function W_(n,e,t){const i=n.toString(),r=i.replace(ZT,(s,o)=>{let a=e[o];return null==a&&(t.push(function bX(n){return new He(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function $w(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const oZ=/-+([a-z0-9])/g;function JT(n){return n.replace(oZ,(...e)=>e[1].toUpperCase())}function aZ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ja(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function xX(n){return new He(3004,!1)}()}}function x4(n,e){return window.getComputedStyle(n)[e]}const Yw="*";function fZ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function pZ(n,e,t){if(":"==n[0]){const c=function mZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function OX(n){return new He(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function kX(n){return new He(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(w4(r,o));"<"==s[0]&&!(r==Yw&&o==Yw)&&e.push(w4(o,r))}(i,t,e)):t.push(n),t}const Xw=new Set(["true","1"]),Zw=new Set(["false","0"]);function w4(n,e){const t=Xw.has(n)||Zw.has(n),i=Xw.has(e)||Zw.has(e);return(r,s)=>{let o=n==Yw||n==r,a=e==Yw||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Xw.has(n):Zw.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?Xw.has(e):Zw.has(e)),o&&a}}const gZ=new RegExp("s*:selfs*,?","g");function QT(n,e,t,i){return new vZ(n).build(e,t,i)}class vZ{constructor(e){this._driver=e}build(e,t,i){const r=new bZ(t);return this._resetContextStyleTimingState(r),Ja(this,j_(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function SX(){return new He(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(p=>{c.name=p,s.push(this.visitState(c,t))}),c.name=d}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(function EX(){return new He(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{b4(c).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}),s.size&&($w(s.values()),t.errors.push(function MX(n,e){return new He(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ja(this,j_(e.animation),t);return{type:1,matchers:fZ(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Uf(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ja(this,i,t)),options:Uf(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Ja(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Uf(e.options)}}visitAnimate(e,t){const i=function wZ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return eA(Ww(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=eA(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=Ww(t,e);return eA(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Xa({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const d={};i.easing&&(d.easing=i.easing),o=Xa(d)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Lu?i.push(a):t.errors.push(new He(3002,!1)):i.push(g4(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const d=t.collectedStyles.get(t.currentQuerySelector),p=d.get(c);let g=!0;p&&(s!=r&&s>=p.startTime&&r<=p.endTime&&(t.errors.push(function DX(n,e,t,i,r){return new He(3010,!1)}()),g=!1),s=p.startTime),g&&d.set(c,{startTime:s,endTime:r}),t.options&&function sZ(n,e,t){const i=e.params||{},r=b4(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function yX(n){return new He(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function TX(){return new He(3011,!1)}()),i;let s=0;const o=[];let a=!1,c=!1,d=0;const p=e.steps.map(I=>{const A=this._makeStyleAst(I,t);let H=null!=A.offset?A.offset:function xZ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(A.styles),G=0;return null!=H&&(s++,G=A.offset=H),c=c||G<0||G>1,a=a||G<d,d=G,o.push(G),A});c&&t.errors.push(function AX(){return new He(3012,!1)}()),a&&t.errors.push(function IX(){return new He(3200,!1)}());const g=e.steps.length;let _=0;s>0&&s<g?t.errors.push(function FX(){return new He(3202,!1)}()):0==s&&(_=1/(g-1));const y=g-1,x=t.currentTime,T=t.currentAnimateTimings,N=T.duration;return p.forEach((I,A)=>{const H=_>0?A==y?1:_*A:o[A],G=H*N;t.currentTime=x+T.delay+G,T.duration=G,this._validateStyleAst(I,t),I.offset=H,i.styles.push(I)}),i}visitReference(e,t){return{type:8,animation:Ja(this,j_(e.animation),t),options:Uf(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Uf(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Uf(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function _Z(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(gZ,"")),n=n.replace(/@\*/g,jw).replace(/@\w+/g,t=>jw+"-"+t.slice(1)).replace(/:animating/g,YT),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Za(t.collectedStyles,t.currentQuerySelector,new Map);const a=Ja(this,j_(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Uf(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function RX(){return new He(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ww(e.timings,t.errors,!0);return{type:12,animation:Ja(this,j_(e.animation),t),timings:i,options:null}}}class bZ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Uf(n){return n?(n=G_(n)).params&&(n.params=function yZ(n){return n?G_(n):null}(n.params)):n={},n}function eA(n,e,t){return{duration:n,delay:e,easing:t}}function tA(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Jw{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const MZ=new RegExp(":enter","g"),DZ=new RegExp(":leave","g");function nA(n,e,t,i,r,s=new Map,o=new Map,a,c,d=[]){return(new TZ).buildKeyframes(n,e,t,i,r,s,o,a,c,d)}class TZ{buildKeyframes(e,t,i,r,s,o,a,c,d,p=[]){d=d||new Jw;const g=new iA(e,t,d,r,s,p,[]);g.options=c;const _=c.delay?Nu(c.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([o],null,g.errors,c),Ja(this,i,g);const y=g.timelines.filter(x=>x.containsAnimation());if(y.length&&a.size){let x;for(let T=y.length-1;T>=0;T--){const N=y[T];if(N.element===t){x=N;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([a],null,g.errors,c)}return y.length?y.map(x=>x.buildKeyframes()):[tA(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Nu(W_(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Nu(i.duration):null,a=null!=i.delay?Nu(i.delay):null;return 0!==o&&e.forEach(c=>{const d=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ja(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Qw);const o=Nu(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ja(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Nu(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ja(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Ww(t.params?W_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Nu(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Qw);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,p)=>{t.currentQueryIndex=p;const g=t.createSubContext(e.options,d);s&&g.delayNextStep(s),d===t.element&&(c=g.currentTimeline),Ja(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,g.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const p=t.currentTimeline;c&&p.delayNextStep(c);const g=p.currentTime;Ja(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-g+(r.startTime-i.currentTimeline.startTime)}}const Qw={};class iA{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new eS(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Nu(i.duration)),null!=i.delay&&(r.delay=Nu(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=W_(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new iA(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Qw,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new AZ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(MZ,"."+this._enterClassName)).replace(DZ,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=i);0!==i&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),a.push(...d)}return!s&&0==a.length&&o.push(function PX(n){return new He(3014,!1)}()),a}}class eS{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new eS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Lu),this._currentKeyframe.set(t,Lu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function IZ(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Lu)}else eh(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const d=W_(c,s,i);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Lu),this._updateStyle(a,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const d=eh(a,new Map,this._backFill);d.forEach((p,g)=>{p===NT?e.add(g):p===Lu&&t.add(g)}),i||d.set("offset",c/this.duration),r.push(d)});const s=e.size?$w(e.values()):[],o=t.size?$w(t.values()):[];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return tA(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class AZ extends eS{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=eh(e[0]);c.set("offset",0),s.push(c);const d=eh(e[0]);d.set("offset",M4(a)),s.push(d);const p=e.length-1;for(let g=1;g<=p;g++){let _=eh(e[g]);const y=_.get("offset");_.set("offset",M4((t+y*i)/o)),s.push(_)}i=o,t=0,r="",e=s}return tA(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function M4(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class rA{}const FZ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class RZ extends rA{normalizePropertyName(e,t){return JT(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(FZ.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function wX(n,e){return new He(3005,!1)}())}return o+s}}function C4(n,e,t,i,r,s,o,a,c,d,p,g,_){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:p,totalTime:g,errors:_}}const sA={};class D4{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function PZ(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,d,p){const g=[],_=this.ast.options&&this.ast.options.params||sA,x=this.buildStyles(i,a&&a.params||sA,g),T=c&&c.params||sA,N=this.buildStyles(r,T,g),I=new Set,A=new Map,H=new Map,G="void"===r,X={params:kZ(T,_),delay:this.ast.options?.delay},re=p?[]:nA(e,t,this.ast.animation,s,o,x,N,X,d,g);let K=0;if(re.forEach(De=>{K=Math.max(De.duration+De.delay,K)}),g.length)return C4(t,this._triggerName,i,r,G,x,N,[],[],A,H,K,g);re.forEach(De=>{const Te=De.element,ge=Za(A,Te,new Set);De.preStyleProps.forEach(Pe=>ge.add(Pe));const Ze=Za(H,Te,new Set);De.postStyleProps.forEach(Pe=>Ze.add(Pe)),Te!==t&&I.add(Te)});const he=$w(I.values());return C4(t,this._triggerName,i,r,G,x,N,re,he,A,H,K)}}function kZ(n,e){const t=G_(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class OZ{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=G_(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=W_(o,r,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(a,o)})}),i}}class NZ{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new OZ(r.style,r.options&&r.options.params||{},i))}),T4(this.states,"true","1"),T4(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new D4(e,r,this.states))}),this.fallbackTransition=function BZ(n,e,t){return new D4(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function T4(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const VZ=new Jw;class HZ{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],s=QT(this._driver,t,i,r);if(i.length)throw function HX(n){return new He(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=o4(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=nA(this._driver,t,s,KT,zw,new Map,new Map,i,VZ,r),o.forEach(p=>{const g=Za(a,p.element,new Map);p.postStyleProps.forEach(_=>g.set(_,null))})):(r.push(function UX(){return new He(3300,!1)}()),o=[]),r.length)throw function zX(n){return new He(3504,!1)}();a.forEach((p,g)=>{p.forEach((_,y)=>{p.set(y,this._driver.computeStyle(g,y,Lu))})});const d=Qd(o.map(p=>{const g=a.get(p.element);return this._buildPlayer(p,new Map,g)}));return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function GX(n){return new He(3301,!1)}();return t}listen(e,t,i,r){const s=jT(t,"","","");return zT(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const A4="ng-animate-queued",oA="ng-animate-disabled",WZ=[],I4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},$Z={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},kc="__ng_removed";class aA{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function XZ(n){return n??null}(i?e.value:e),i){const s=G_(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const $_="void",cA=new aA($_);class qZ{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Oc(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function jX(n,e){return new He(3302,!1)}();if(null==i||0==i.length)throw function WX(n){return new He(3303,!1)}();if(!function ZZ(n){return"start"==n||"done"==n}(i))throw function $X(n,e){return new He(3400,!1)}();const s=Za(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Za(this._engine.statesByElement,e,new Map);return a.has(t)||(Oc(e,Gw),Oc(e,Gw+"-"+t),a.set(t,cA)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function qX(n){return new He(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new lA(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Oc(e,Gw),Oc(e,Gw+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const d=new aA(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(t,d),c||(c=cA),d.value!==$_&&c.value===d.value){if(!function eJ(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,d.params)){const T=[],N=s.matchStyles(c.value,c.params,T),I=s.matchStyles(d.value,d.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{Hf(e,N),ql(e,I)})}return}const _=Za(this._engine.playersByElement,e,[]);_.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=s.matchTransition(c.value,d.value,e,d.params),x=!1;if(!y){if(!r)return;y=s.fallbackTransition,x=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:d,player:o,isFallbackTransition:x}),x||(Oc(e,A4),o.onStart(()=>{lg(e,A4)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const N=this._engine.playersByElement.get(e);if(N){let I=N.indexOf(o);I>=0&&N.splice(I,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,jw,!0);i.forEach(r=>{if(r[kc])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,d)=>{if(o.set(d,c.value),this._triggers.has(d)){const p=this.trigger(e,d,$_,r);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Qd(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers.get(o).fallbackTransition,d=i.get(o)||cA,p=new aA($_),g=new lA(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:d,toState:p,player:g,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[kc];(!s||s===I4)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Oc(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=jT(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,zT(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class KZ{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new qZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const d=i.indexOf(c);i.splice(d+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(tS(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!tS(t))return;const s=t[kc];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Oc(e,oA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),lg(e,oA))}removeNode(e,t,i,r){if(tS(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[kc]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return tS(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,jw,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,YT,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Qd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[kc];if(t&&t.setForRemoval){if(e[kc]=I4,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(oA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Oc(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Qd(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function KX(n){return new He(3402,!1)}()}_flushAnimations(e,t){const i=new Jw,r=[],s=new Map,o=[],a=new Map,c=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(ye=>{p.add(ye);const Ee=this.driver.query(ye,".ng-animate-queued",!0);for(let je=0;je<Ee.length;je++)p.add(Ee[je])});const g=this.bodyNode,_=Array.from(this.statesByElement.keys()),y=P4(_,this.collectedEnterElements),x=new Map;let T=0;y.forEach((ye,Ee)=>{const je=KT+T++;x.set(Ee,je),ye.forEach(lt=>Oc(lt,je))});const N=[],I=new Set,A=new Set;for(let ye=0;ye<this.collectedLeaveElements.length;ye++){const Ee=this.collectedLeaveElements[ye],je=Ee[kc];je&&je.setForRemoval&&(N.push(Ee),I.add(Ee),je.hasAnimation?this.driver.query(Ee,".ng-star-inserted",!0).forEach(lt=>I.add(lt)):A.add(Ee))}const H=new Map,G=P4(_,Array.from(I));G.forEach((ye,Ee)=>{const je=zw+T++;H.set(Ee,je),ye.forEach(lt=>Oc(lt,je))}),e.push(()=>{y.forEach((ye,Ee)=>{const je=x.get(Ee);ye.forEach(lt=>lg(lt,je))}),G.forEach((ye,Ee)=>{const je=H.get(Ee);ye.forEach(lt=>lg(lt,je))}),N.forEach(ye=>{this.processLeaveNode(ye)})});const X=[],re=[];for(let ye=this._namespaceList.length-1;ye>=0;ye--)this._namespaceList[ye].drainQueuedTransitions(t).forEach(je=>{const lt=je.player,Ue=je.element;if(X.push(lt),this.collectedEnterElements.length){const Xt=Ue[kc];if(Xt&&Xt.setForMove){if(Xt.previousTriggersValues&&Xt.previousTriggersValues.has(je.triggerName)){const tn=Xt.previousTriggersValues.get(je.triggerName),It=this.statesByElement.get(je.element);if(It&&It.has(je.triggerName)){const nn=It.get(je.triggerName);nn.value=tn,It.set(je.triggerName,nn)}}return void lt.destroy()}}const qe=!g||!this.driver.containsElement(g,Ue),vt=H.get(Ue),_t=x.get(Ue),mt=this._buildInstruction(je,i,_t,vt,qe);if(mt.errors&&mt.errors.length)return void re.push(mt);if(qe)return lt.onStart(()=>Hf(Ue,mt.fromStyles)),lt.onDestroy(()=>ql(Ue,mt.toStyles)),void r.push(lt);if(je.isFallbackTransition)return lt.onStart(()=>Hf(Ue,mt.fromStyles)),lt.onDestroy(()=>ql(Ue,mt.toStyles)),void r.push(lt);const di=[];mt.timelines.forEach(Xt=>{Xt.stretchStartingKeyframe=!0,this.disabledNodes.has(Xt.element)||di.push(Xt)}),mt.timelines=di,i.append(Ue,mt.timelines),o.push({instruction:mt,player:lt,element:Ue}),mt.queriedElements.forEach(Xt=>Za(a,Xt,[]).push(lt)),mt.preStyleProps.forEach((Xt,tn)=>{if(Xt.size){let It=c.get(tn);It||c.set(tn,It=new Set),Xt.forEach((nn,hi)=>It.add(hi))}}),mt.postStyleProps.forEach((Xt,tn)=>{let It=d.get(tn);It||d.set(tn,It=new Set),Xt.forEach((nn,hi)=>It.add(hi))})});if(re.length){const ye=[];re.forEach(Ee=>{ye.push(function YX(n,e){return new He(3505,!1)}())}),X.forEach(Ee=>Ee.destroy()),this.reportError(ye)}const K=new Map,he=new Map;o.forEach(ye=>{const Ee=ye.element;i.has(Ee)&&(he.set(Ee,Ee),this._beforeAnimationBuild(ye.player.namespaceId,ye.instruction,K))}),r.forEach(ye=>{const Ee=ye.element;this._getPreviousPlayers(Ee,!1,ye.namespaceId,ye.triggerName,null).forEach(lt=>{Za(K,Ee,[]).push(lt),lt.destroy()})});const De=N.filter(ye=>O4(ye,c,d)),Te=new Map;R4(Te,this.driver,A,d,Lu).forEach(ye=>{O4(ye,c,d)&&De.push(ye)});const Ze=new Map;y.forEach((ye,Ee)=>{R4(Ze,this.driver,new Set(ye),c,NT)}),De.forEach(ye=>{const Ee=Te.get(ye),je=Ze.get(ye);Te.set(ye,new Map([...Array.from(Ee?.entries()??[]),...Array.from(je?.entries()??[])]))});const Pe=[],ke=[],Be={};o.forEach(ye=>{const{element:Ee,player:je,instruction:lt}=ye;if(i.has(Ee)){if(p.has(Ee))return je.onDestroy(()=>ql(Ee,lt.toStyles)),je.disabled=!0,je.overrideTotalTime(lt.totalTime),void r.push(je);let Ue=Be;if(he.size>1){let vt=Ee;const _t=[];for(;vt=vt.parentNode;){const mt=he.get(vt);if(mt){Ue=mt;break}_t.push(vt)}_t.forEach(mt=>he.set(mt,Ue))}const qe=this._buildAnimation(je.namespaceId,lt,K,s,Ze,Te);if(je.setRealPlayer(qe),Ue===Be)Pe.push(je);else{const vt=this.playersByElement.get(Ue);vt&&vt.length&&(je.parentPlayer=Qd(vt)),r.push(je)}}else Hf(Ee,lt.fromStyles),je.onDestroy(()=>ql(Ee,lt.toStyles)),ke.push(je),p.has(Ee)&&r.push(je)}),ke.forEach(ye=>{const Ee=s.get(ye.element);if(Ee&&Ee.length){const je=Qd(Ee);ye.setRealPlayer(je)}}),r.forEach(ye=>{ye.parentPlayer?ye.syncPlayerEvents(ye.parentPlayer):ye.destroy()});for(let ye=0;ye<N.length;ye++){const Ee=N[ye],je=Ee[kc];if(lg(Ee,zw),je&&je.hasAnimation)continue;let lt=[];if(a.size){let qe=a.get(Ee);qe&&qe.length&&lt.push(...qe);let vt=this.driver.query(Ee,YT,!0);for(let _t=0;_t<vt.length;_t++){let mt=a.get(vt[_t]);mt&&mt.length&&lt.push(...mt)}}const Ue=lt.filter(qe=>!qe.destroyed);Ue.length?JZ(this,Ee,Ue):this.processLeaveNode(Ee)}return N.length=0,Pe.forEach(ye=>{this.players.push(ye),ye.onDone(()=>{ye.destroy();const Ee=this.players.indexOf(ye);this.players.splice(Ee,1)}),ye.play()}),Pe}elementContainsData(e,t){let i=!1;const r=t[kc];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==$_;a.forEach(d=>{d.queued||!c&&d.triggerName!=r||o.push(d)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const d=c.element,p=d!==s,g=Za(i,d,[]);this._getPreviousPlayers(d,p,o,a,t.toState).forEach(y=>{const x=y.getRealPlayer();x.beforeDestroy&&x.beforeDestroy(),y.destroy(),g.push(y)})}Hf(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,d=[],p=new Set,g=new Set,_=t.timelines.map(x=>{const T=x.element;p.add(T);const N=T[kc];if(N&&N.removedBeforeQueried)return new U_(x.duration,x.delay);const I=T!==c,A=function QZ(n){const e=[];return k4(n,e),e}((i.get(T)||WZ).map(K=>K.getRealPlayer())).filter(K=>!!K.element&&K.element===T),H=s.get(T),G=o.get(T),X=o4(0,this._normalizer,0,x.keyframes,H,G),re=this._buildPlayer(x,X,A);if(x.subTimeline&&r&&g.add(T),I){const K=new lA(e,a,T);K.setRealPlayer(re),d.push(K)}return re});d.forEach(x=>{Za(this.playersByQueriedElement,x.element,[]).push(x),x.onDone(()=>function YZ(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,x.element,x))}),p.forEach(x=>Oc(x,m4));const y=Qd(_);return y.onDestroy(()=>{p.forEach(x=>lg(x,m4)),ql(c,t.toStyles)}),g.forEach(x=>{Za(r,x,[]).push(y)}),y}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new U_(e.duration,e.delay)}}class lA{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new U_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>zT(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Za(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function tS(n){return n&&1===n.nodeType}function F4(n,e){const t=n.style.display;return n.style.display=e??"none",t}function R4(n,e,t,i,r){const s=[];t.forEach(c=>s.push(F4(c)));const o=[];i.forEach((c,d)=>{const p=new Map;c.forEach(g=>{const _=e.computeStyle(d,g,r);p.set(g,_),(!_||0==_.length)&&(d[kc]=$Z,o.push(d))}),n.set(d,p)});let a=0;return t.forEach(c=>F4(c,s[a++])),o}function P4(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let c=s.get(a);if(c)return c;const d=a.parentNode;return c=t.has(d)?d:r.has(d)?i:o(d),s.set(a,c),c}return e.forEach(a=>{const c=o(a);c!==i&&t.get(c).push(a)}),t}function Oc(n,e){n.classList?.add(e)}function lg(n,e){n.classList?.remove(e)}function JZ(n,e,t){Qd(t).onDone(()=>n.processLeaveNode(e))}function k4(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof DN?k4(i.players,e):e.push(i)}}function O4(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class nS{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new KZ(e,t,i),this._timelineEngine=new HZ(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],d=[],p=QT(this._driver,s,c,d);if(c.length)throw function BX(n,e){return new He(3404,!1)}();a=function LZ(n,e,t){return new NZ(n,e,t)}(r,p,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=a4(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=a4(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let nJ=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ql(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ql(this._element,this._initialStyles),this._endStyles&&(ql(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hf(this._element,this._endStyles),this._endStyles=null),ql(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function uA(n){let e=null;return n.forEach((t,i)=>{(function iJ(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class L4{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:x4(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class rJ{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return d4(e,t)}getParentElement(e){return $T(e)}query(e,t,i){return h4(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(c.easing=s);const d=new Map,p=o.filter(y=>y instanceof L4);(function cZ(n,e){return 0===n||0===e})(i,r)&&p.forEach(y=>{y.currentSnapshot.forEach((x,T)=>d.set(T,x))});let g=function rZ(n){return n.length?n[0]instanceof Map?n:n.map(e=>g4(e)):[]}(t).map(y=>eh(y));g=function lZ(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,x4(n,a)))}}return e}(e,g,d);const _=function tJ(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=uA(e[0]),e.length>1&&(i=uA(e[e.length-1]))):e instanceof Map&&(t=uA(e)),t||i?new nJ(n,t,i):null}(e,g);return new L4(e,g,c,_)}}let sJ=(()=>{class n extends SN{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Wo.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?MN(t):t;return N4(this._renderer,null,i,"register",[r]),new oJ(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Me(gn),Me(En))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class oJ extends wK{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new aJ(this._id,e,t||{},this._renderer)}}class aJ{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return N4(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function N4(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const B4="@.disabled";let cJ=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let p=this._rendererCache.get(s);return p||(p=new V4("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,p)),p}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=p=>{Array.isArray(p)?p.forEach(c):this.engine.registerTrigger(o,a,t,p.name,p)};return i.data.animation.forEach(c),new lJ(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Me(gn),Me(nS),Me(cn))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class V4{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==B4?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class lJ extends V4{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==B4?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function uJ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function dJ(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let hJ=(()=>{class n extends nS{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Me(En),Me(qT),Me(rA),Me(Xm))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const H4=[{provide:SN,useClass:sJ},{provide:rA,useFactory:function fJ(){return new RZ}},{provide:nS,useClass:hJ},{provide:gn,useFactory:function pJ(n,e,t){return new cJ(n,e,t)},deps:[X1,nS,cn]}],dA=[{provide:qT,useFactory:()=>new rJ},{provide:qa,useValue:"BrowserAnimations"},...H4],U4=[{provide:qT,useClass:f4},{provide:qa,useValue:"NoopAnimations"},...H4];let mJ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?U4:dA}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({providers:dA,imports:[B3]}),n})();function z4(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(d){return void t(d)}a.done?e(c):Promise.resolve(c).then(i,r)}function ul(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){z4(s,i,r,o,a,"next",c)}function a(c){z4(s,i,r,o,a,"throw",c)}o(void 0)})}}var hA=ut(2573);class vJ{call(e,t){return t.subscribe(new _J(e))}}class _J extends Ts{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let i=0;i<t&&!this.hasFirst;i++){let r=e[i],s=Go(this,r,r,i);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}}notifyNext(e,t,i,r,s){if(!this.hasFirst){this.hasFirst=!0;for(let o=0;o<this.subscriptions.length;o++)if(o!==i){let a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)}}function G4(n){return n instanceof Date&&!isNaN(+n)}class dl{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return Dt(this.value);case"E":return Pc(this.error);case"C":return gw()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new dl("N",e):dl.undefinedValueNotification}static createError(e){return new dl("E",void 0,e)}static createComplete(){return dl.completeNotification}}function fA(n,e=rg){const i=G4(n)?+n-e.now():Math.abs(n);return r=>r.lift(new yJ(i,e))}dl.completeNotification=new dl("C"),dl.undefinedValueNotification=new dl("N",void 0);class yJ{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new pA(e,this.delay,this.scheduler))}}class pA extends oi{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,r=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const o=Math.max(0,i[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(pA.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new bJ(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(dl.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(dl.createComplete()),this.unsubscribe()}}class bJ{constructor(e,t){this.time=e,this.notification=t}}const rS=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function sS(n=null){return e=>e.lift(new xJ(n))}class xJ{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new wJ(e,this.defaultValue))}}class wJ extends oi{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function j4(n=MJ){return e=>e.lift(new SJ(n))}class SJ{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new EJ(e,this.errorFactory))}}class EJ extends oi{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function MJ(){return new rS}function hl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?nr((r,s)=>n(r,s,i)):Ds,Vs(1),t?sS(e):j4(()=>new rS))}const CJ=(()=>{function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return n.prototype=Object.create(Error.prototype),n})();class TJ{constructor(e,t,i,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=i,this.scheduler=r}call(e,t){return t.subscribe(new mA(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class mA extends Ts{constructor(e,t,i,r,s){super(e),this.absoluteTimeout=t,this.waitFor=i,this.withObservable=r,this.scheduler=s,this.action=null,this.scheduleTimeout()}static dispatchTimeout(e){const{withObservable:t}=e;e._unsubscribeAndRecycle(),e.add(Go(e,t))}scheduleTimeout(){const{action:e}=this;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(mA.dispatchTimeout,this.waitFor,this))}_next(e){this.absoluteTimeout||this.scheduleTimeout(),super._next(e)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}class W4{validateSignature(e){return Promise.resolve(null)}validateAtHash(e){return Promise.resolve(!0)}}class $4{}class gA{}let IJ=(()=>{class n extends gA{now(){return Date.now()}new(){return new Date}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ir(n)))(i||n)}}(),n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class q4{}class vA{}let FJ=(()=>{class n{constructor(){this.data=new Map}getItem(t){return this.data.get(t)}removeItem(t){this.data.delete(t)}setItem(t,i){this.data.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class _A{constructor(e){this.type=e}}class Qa extends _A{constructor(e,t=null){super(e),this.info=t}}class Bu extends _A{constructor(e,t=null){super(e),this.info=t}}class is extends _A{constructor(e,t,i=null){super(e),this.reason=t,this.params=i}}function K4(n){const e=n.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function yA(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}class oS{constructor(e){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.redirectUriAsPostLogoutRedirectUriFallback=!0,this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.revocationEndpoint=null,this.customTokenParameters=[],this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret="",this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.decreaseExpirationBySec=0,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.preserveRequestedRoute=!1,this.disableIdTokenTimer=!1,this.checkOrigin=!1,this.openUri=t=>{location.href=t},e&&Object.assign(this,e)}}class q_{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}class Y4{}class RJ{validateAtHash(e){var t=this;return ul(function*(){let i=t.inferHashAlgorithm(e.idTokenHeader),r=yield t.calcHash(e.accessToken,i),o=yA(r.substr(0,r.length/2)),a=e.idTokenClaims.at_hash.replace(/=/g,"");return o!==a&&(console.error("exptected at_hash: "+o),console.error("actual at_hash: "+a)),o===a})()}inferHashAlgorithm(e){let t=e.alg;if(!t.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+t);return"sha-"+t.substr(2)}}let X4=(()=>{class n{getHashFragmentParams(t){let i=t||window.location.hash;if(i=decodeURIComponent(i),0!==i.indexOf("#"))return{};const r=i.indexOf("?");return i=i.substr(r>-1?r+1:1),this.parseQueryString(i)}parseQueryString(t){const i={};let r,s,o,a,c,d,p;if(null===t)return i;r=t.split("&");for(let g=0;g<r.length;g++)s=r[g],o=s.indexOf("="),-1===o?(a=s,c=null):(a=s.substr(0,o),c=s.substr(o+1)),d=decodeURIComponent(a),p=decodeURIComponent(c),"/"===d.substr(0,1)&&(d=d.substr(1)),i[d]=p;return i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const kJ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function bA(n,e,t,i,r){let s,o,a,c,d,p,g,_,y,x,T,N,I;for(;r>=64;){for(s=e[0],o=e[1],a=e[2],c=e[3],d=e[4],p=e[5],g=e[6],_=e[7],x=0;x<16;x++)T=i+4*x,n[x]=(255&t[T])<<24|(255&t[T+1])<<16|(255&t[T+2])<<8|255&t[T+3];for(x=16;x<64;x++)y=n[x-2],N=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,y=n[x-15],I=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3,n[x]=(N+n[x-7]|0)+(I+n[x-16]|0);for(x=0;x<64;x++)N=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&p^~d&g)|0)+(_+(kJ[x]+n[x]|0)|0)|0,I=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&a^o&a)|0,_=g,g=p,p=d,d=c+N|0,c=a,a=o,o=s,s=N+I|0;e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=c,e[4]+=d,e[5]+=p,e[6]+=g,e[7]+=_,i+=64,r-=64}return i}class aS{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let i=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[i++],t--;64===this.bufferLength&&(bA(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(i=bA(this.temp,this.state,e,i,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[i++],t--;return this}finish(e){if(!this.finished){const t=this.bytesHashed,i=this.bufferLength,r=t/536870912|0,s=t<<3,o=t%64<56?64:128;this.buffer[i]=128;for(let a=i+1;a<o-8;a++)this.buffer[a]=0;this.buffer[o-8]=r>>>24&255,this.buffer[o-7]=r>>>16&255,this.buffer[o-6]=r>>>8&255,this.buffer[o-5]=r>>>0&255,this.buffer[o-4]=s>>>24&255,this.buffer[o-3]=s>>>16&255,this.buffer[o-2]=s>>>8&255,this.buffer[o-1]=s>>>0&255,bA(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this.state[t]>>>24&255,e[4*t+1]=this.state[t]>>>16&255,e[4*t+2]=this.state[t]>>>8&255,e[4*t+3]=this.state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let t=0;t<this.state.length;t++)e[t]=this.state[t]}_restoreState(e,t){for(let i=0;i<this.state.length;i++)this.state[i]=e[i];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}}new Uint8Array(32);class J4{}let UJ=(()=>{class n{calcHash(t,i){return ul(function*(){return function HJ(n){var e,t=[];for(e=0;e<n.length;e++)t.push(String.fromCharCode(n[e]));return t.join("")}(function OJ(n){const e=(new aS).update(n),t=e.digest();return e.clean(),t}(function VJ(n){if("string"!=typeof n)throw new TypeError("expected string");var e,t=n,i=new Uint8Array(t.length);for(e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t)))})()}toHashString2(t){let i="";for(let r of t)i+=String.fromCharCode(r);return i}toHashString(t){const i=new Uint8Array(t);let r="";for(let s of i)r+=String.fromCharCode(s);return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),wA=(()=>{class n extends oS{constructor(t,i,r,s,o,a,c,d,p,g){super(),this.ngZone=t,this.http=i,this.config=o,this.urlHelper=a,this.logger=c,this.crypto=d,this.dateTimeService=g,this.discoveryDocumentLoaded=!1,this.state="",this.eventsSubject=new ln,this.discoveryDocumentLoadedSubject=new ln,this.grantTypesSupported=[],this.inImplicitFlow=!1,this.saveNoncesInLocalStorage=!1,this.debug("angular-oauth2-oidc v10"),this.document=p,o||(o={}),this.discoveryDocumentLoaded$=this.discoveryDocumentLoadedSubject.asObservable(),this.events=this.eventsSubject.asObservable(),s&&(this.tokenValidationHandler=s),o&&this.configure(o);try{r?this.setStorage(r):typeof sessionStorage<"u"&&this.setStorage(sessionStorage)}catch(_){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",_)}if(this.checkLocalStorageAccessable()){const _=window?.navigator?.userAgent;(_?.includes("MSIE ")||_?.includes("Trident"))&&(this.saveNoncesInLocalStorage=!0)}this.setupRefreshTimer()}checkLocalStorageAccessable(){if(typeof window>"u")return!1;const t="test";try{return!(typeof window.localStorage>"u"||(localStorage.setItem(t,t),localStorage.removeItem(t),0))}catch{return!1}}configure(t){Object.assign(this,new oS,t),this.config=Object.assign({},new oS,t),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}configChanged(){this.setupRefreshTimer()}restartSessionChecksIfStillLoggedIn(){this.hasValidIdToken()&&this.initSessionCheck()}restartRefreshTimerIfStillLoggedIn(){this.setupExpirationTimers()}setupSessionCheck(){this.events.pipe(nr(t=>"token_received"===t.type)).subscribe(t=>{this.initSessionCheck()})}setupAutomaticSilentRefresh(t={},i,r=!0){let s=!0;this.clearAutomaticRefreshTimer(),this.automaticRefreshSubscription=this.events.pipe(Mr(o=>{"token_received"===o.type?s=!0:"logout"===o.type&&(s=!1)}),nr(o=>"token_expires"===o.type&&(null==i||"any"===i||o.info===i)),P_(1e3)).subscribe(o=>{s&&this.refreshInternal(t,r).catch(a=>{this.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()}refreshInternal(t,i){return this.useSilentRefresh||"code"!==this.responseType?this.silentRefresh(t,i):this.refreshToken()}loadDiscoveryDocumentAndTryLogin(t=null){return this.loadDiscoveryDocument().then(i=>this.tryLogin(t))}loadDiscoveryDocumentAndLogin(t=null){return this.loadDiscoveryDocumentAndTryLogin(t=t||{}).then(i=>!(!this.hasValidIdToken()||!this.hasValidAccessToken())||(this.initLoginFlow("string"==typeof t.state?t.state:""),!1))}debug(...t){this.showDebugInformation&&this.logger.debug.apply(this.logger,t)}validateUrlFromDiscoveryDocument(t){const i=[],r=this.validateUrlForHttps(t),s=this.validateUrlAgainstIssuer(t);return r||i.push("https for all urls required. Also for urls received by discovery."),s||i.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),i}validateUrlForHttps(t){if(!t)return!0;const i=t.toLowerCase();return!(!1!==this.requireHttps&&(!i.match(/^http:\/\/localhost($|[:\/])/)&&!i.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps))||i.startsWith("https://")}assertUrlNotNullAndCorrectProtocol(t,i){if(!t)throw new Error(`'${i}' should not be null`);if(!this.validateUrlForHttps(t))throw new Error(`'${i}' must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).`)}validateUrlAgainstIssuer(t){return!this.strictDiscoveryDocumentValidation||!t||t.toLowerCase().startsWith(this.issuer.toLowerCase())}setupRefreshTimer(){typeof window>"u"?this.debug("timer not supported on this plattform"):((this.hasValidIdToken()||this.hasValidAccessToken())&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.tokenReceivedSubscription&&this.tokenReceivedSubscription.unsubscribe(),this.tokenReceivedSubscription=this.events.pipe(nr(t=>"token_received"===t.type)).subscribe(t=>{this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()}))}setupExpirationTimers(){this.hasValidAccessToken()&&this.setupAccessTokenTimer(),!this.disableIdTokenTimer&&this.hasValidIdToken()&&this.setupIdTokenTimer()}setupAccessTokenTimer(){const t=this.getAccessTokenExpiration(),i=this.getAccessTokenStoredAt(),r=this.calcTimeout(i,t);this.ngZone.runOutsideAngular(()=>{this.accessTokenTimeoutSubscription=Dt(new Bu("token_expires","access_token")).pipe(fA(r)).subscribe(s=>{this.ngZone.run(()=>{this.eventsSubject.next(s)})})})}setupIdTokenTimer(){const t=this.getIdTokenExpiration(),i=this.getIdTokenStoredAt(),r=this.calcTimeout(i,t);this.ngZone.runOutsideAngular(()=>{this.idTokenTimeoutSubscription=Dt(new Bu("token_expires","id_token")).pipe(fA(r)).subscribe(s=>{this.ngZone.run(()=>{this.eventsSubject.next(s)})})})}stopAutomaticRefresh(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.clearAutomaticRefreshTimer()}clearAccessTokenTimer(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}clearIdTokenTimer(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}clearAutomaticRefreshTimer(){this.automaticRefreshSubscription&&this.automaticRefreshSubscription.unsubscribe()}calcTimeout(t,i){const r=this.dateTimeService.now(),o=Math.max(0,(i-t)*this.timeoutFactor-(r-t)),a=2147483647;return o>a?a:o}setStorage(t){this._storage=t,this.configChanged()}loadDiscoveryDocument(t=null){return new Promise((i,r)=>{t||((t=this.issuer||"").endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),this.validateUrlForHttps(t)?this.http.get(t).subscribe(s=>{if(!this.validateDiscoveryDocument(s))return this.eventsSubject.next(new is("discovery_document_validation_error",null)),void r("discovery_document_validation_error");this.loginUrl=s.authorization_endpoint,this.logoutUrl=s.end_session_endpoint||this.logoutUrl,this.grantTypesSupported=s.grant_types_supported,this.issuer=s.issuer,this.tokenEndpoint=s.token_endpoint,this.userinfoEndpoint=s.userinfo_endpoint||this.userinfoEndpoint,this.jwksUri=s.jwks_uri,this.sessionCheckIFrameUrl=s.check_session_iframe||this.sessionCheckIFrameUrl,this.discoveryDocumentLoaded=!0,this.discoveryDocumentLoadedSubject.next(s),this.revocationEndpoint=s.revocation_endpoint||this.revocationEndpoint,this.sessionChecksEnabled&&this.restartSessionChecksIfStillLoggedIn(),this.loadJwks().then(o=>{const c=new Qa("discovery_document_loaded",{discoveryDocument:s,jwks:o});this.eventsSubject.next(c),i(c)}).catch(o=>{this.eventsSubject.next(new is("discovery_document_load_error",o)),r(o)})},s=>{this.logger.error("error loading discovery document",s),this.eventsSubject.next(new is("discovery_document_load_error",s)),r(s)}):r("issuer  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).")})}loadJwks(){return new Promise((t,i)=>{this.jwksUri?this.http.get(this.jwksUri).subscribe(r=>{this.jwks=r,t(r)},r=>{this.logger.error("error loading jwks",r),this.eventsSubject.next(new is("jwks_load_error",r)),i(r)}):t(null)})}validateDiscoveryDocument(t){let i;return this.skipIssuerCheck||t.issuer===this.issuer?(i=this.validateUrlFromDiscoveryDocument(t.authorization_endpoint),i.length>0?(this.logger.error("error validating authorization_endpoint in discovery document",i),!1):(i=this.validateUrlFromDiscoveryDocument(t.end_session_endpoint),i.length>0?(this.logger.error("error validating end_session_endpoint in discovery document",i),!1):(i=this.validateUrlFromDiscoveryDocument(t.token_endpoint),i.length>0&&this.logger.error("error validating token_endpoint in discovery document",i),i=this.validateUrlFromDiscoveryDocument(t.revocation_endpoint),i.length>0&&this.logger.error("error validating revocation_endpoint in discovery document",i),i=this.validateUrlFromDiscoveryDocument(t.userinfo_endpoint),i.length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",i),!1):(i=this.validateUrlFromDiscoveryDocument(t.jwks_uri),i.length>0?(this.logger.error("error validating jwks_uri in discovery document",i),!1):(this.sessionChecksEnabled&&!t.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0))))):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+t.issuer),!1)}fetchTokenUsingPasswordFlowAndLoadUserProfile(t,i,r=new No){return this.fetchTokenUsingPasswordFlow(t,i,r).then(()=>this.loadUserProfile())}loadUserProfile(){if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return new Promise((t,i)=>{const r=(new No).set("Authorization","Bearer "+this.getAccessToken());this.http.get(this.userinfoEndpoint,{headers:r,observe:"response",responseType:"text"}).subscribe(s=>{if(this.debug("userinfo received",JSON.stringify(s)),s.headers.get("content-type").startsWith("application/json")){let o=JSON.parse(s.body);const a=this.getIdentityClaims()||{};if(!this.skipSubjectCheck&&this.oidc&&(!a.sub||o.sub!==a.sub))return void i("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false");o=Object.assign({},a,o),this._storage.setItem("id_token_claims_obj",JSON.stringify(o)),this.eventsSubject.next(new Qa("user_profile_loaded")),t({info:o})}else this.debug("userinfo is not JSON, treating it as JWE/JWS"),this.eventsSubject.next(new Qa("user_profile_loaded")),t(JSON.parse(s.body))},s=>{this.logger.error("error loading user info",s),this.eventsSubject.next(new is("user_profile_load_error",s)),i(s)})})}fetchTokenUsingPasswordFlow(t,i,r=new No){return this.fetchTokenUsingGrant("password",{username:t,password:i},r)}fetchTokenUsingGrant(t,i,r=new No){this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let s=new Ya({encoder:new q_}).set("grant_type",t).set("scope",this.scope);if(this.useHttpBasicAuth){const o=btoa(`${this.clientId}:${this.dummyClientSecret}`);r=r.set("Authorization","Basic "+o)}if(this.useHttpBasicAuth||(s=s.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(s=s.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const o of Object.getOwnPropertyNames(this.customQueryParams))s=s.set(o,this.customQueryParams[o]);for(const o of Object.keys(i))s=s.set(o,i[o]);return r=r.set("Content-Type","application/x-www-form-urlencoded"),new Promise((o,a)=>{this.http.post(this.tokenEndpoint,s,{headers:r}).subscribe(c=>{this.debug("tokenResponse",c),this.storeAccessTokenResponse(c.access_token,c.refresh_token,c.expires_in||this.fallbackAccessTokenExpirationTimeInSec,c.scope,this.extractRecognizedCustomParameters(c)),this.oidc&&c.id_token&&this.processIdToken(c.id_token,c.access_token).then(d=>{this.storeIdToken(d),o(c)}),this.eventsSubject.next(new Qa("token_received")),o(c)},c=>{this.logger.error("Error performing ${grantType} flow",c),this.eventsSubject.next(new is("token_error",c)),a(c)})})}refreshToken(){return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((t,i)=>{let r=new Ya({encoder:new q_}).set("grant_type","refresh_token").set("scope",this.scope).set("refresh_token",this._storage.getItem("refresh_token")),s=(new No).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const o=btoa(`${this.clientId}:${this.dummyClientSecret}`);s=s.set("Authorization","Basic "+o)}if(this.useHttpBasicAuth||(r=r.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(r=r.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const o of Object.getOwnPropertyNames(this.customQueryParams))r=r.set(o,this.customQueryParams[o]);this.http.post(this.tokenEndpoint,r,{headers:s}).pipe(yo(o=>this.oidc&&o.id_token?cr(this.processIdToken(o.id_token,o.access_token,!0)).pipe(Mr(a=>this.storeIdToken(a)),gt(a=>o)):Dt(o))).subscribe(o=>{this.debug("refresh tokenResponse",o),this.storeAccessTokenResponse(o.access_token,o.refresh_token,o.expires_in||this.fallbackAccessTokenExpirationTimeInSec,o.scope,this.extractRecognizedCustomParameters(o)),this.eventsSubject.next(new Qa("token_received")),this.eventsSubject.next(new Qa("token_refreshed")),t(o)},o=>{this.logger.error("Error refreshing token",o),this.eventsSubject.next(new is("token_refresh_error",o)),i(o)})})}removeSilentRefreshEventListener(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}setupSilentRefreshEventListener(){this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=t=>{const i=this.processMessageEventMessage(t);this.checkOrigin&&t.origin!==location.origin&&console.error("wrong origin requested silent refresh!"),this.tryLogin({customHashFragment:i,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri||this.redirectUri}).catch(r=>this.debug("tryLogin during silent refresh failed",r))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}silentRefresh(t={},i=!0){const r=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(typeof this.document>"u")throw new Error("silent refresh is not supported on this platform");const s=this.document.getElementById(this.silentRefreshIFrameName);s&&this.document.body.removeChild(s),this.silentRefreshSubject=r.sub;const o=this.document.createElement("iframe");return o.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,i,t).then(g=>{o.setAttribute("src",g),this.silentRefreshShowIFrame||(o.style.display="none"),this.document.body.appendChild(o)}),function gJ(...n){if(1===n.length){if(!fi(n[0]))return n[0];n=n[0]}return lc(n,void 0).lift(new vJ)}([this.events.pipe(nr(g=>g instanceof is),hl()),this.events.pipe(nr(g=>"token_received"===g.type),hl()),Dt(new is("silent_refresh_timeout",null)).pipe(fA(this.silentRefreshTimeout))]).pipe(gt(g=>{if(g instanceof is)throw"silent_refresh_timeout"===g.type||(g=new is("silent_refresh_error",g)),this.eventsSubject.next(g),g;return"token_received"===g.type&&(g=new Qa("silently_refreshed"),this.eventsSubject.next(g)),g})).toPromise()}initImplicitFlowInPopup(t){return this.initLoginFlowInPopup(t)}initLoginFlowInPopup(t){return t=t||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(i=>new Promise((r,s)=>{let c,a=null;t.windowRef?t.windowRef&&!t.windowRef.closed&&(a=t.windowRef,a.location.href=i):a=window.open(i,"ngx-oauth2-oidc-login",this.calculatePopupFeatures(t));const d=x=>{this.tryLogin({customHashFragment:x,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri}).then(()=>{g(),r(!0)},T=>{g(),s(T)})};a?c=window.setInterval(()=>{(!a||a.closed)&&(g(),s(new is("popup_closed",{})))},500):s(new is("popup_blocked",{}));const g=()=>{window.clearInterval(c),window.removeEventListener("storage",y),window.removeEventListener("message",_),null!==a&&a.close(),a=null},_=x=>{const T=this.processMessageEventMessage(x);T&&null!==T?(window.removeEventListener("storage",y),d(T)):console.log("false event firing")},y=x=>{"auth_hash"===x.key&&(window.removeEventListener("message",_),d(x.newValue))};window.addEventListener("message",_),window.addEventListener("storage",y)}))}calculatePopupFeatures(t){const i=t.height||470,r=t.width||500,s=window.screenLeft+(window.outerWidth-r)/2;return`location=no,toolbar=no,width=${r},height=${i},top=${window.screenTop+(window.outerHeight-i)/2},left=${s}`}processMessageEventMessage(t){let i="#";if(this.silentRefreshMessagePrefix&&(i+=this.silentRefreshMessagePrefix),!t||!t.data||"string"!=typeof t.data)return;const r=t.data;return r.startsWith(i)?"#"+r.substr(i.length):void 0}canPerformSessionCheck(){return!(!this.sessionChecksEnabled||(this.sessionCheckIFrameUrl?this.getSessionState()?typeof this.document>"u":(console.warn("sessionChecksEnabled is activated but there is no session_state"),1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),1)))}setupSessionCheckEventListener(){this.removeSessionCheckEventListener(),this.sessionCheckEventListener=t=>{const i=t.origin.toLowerCase(),r=this.issuer.toLowerCase();if(this.debug("sessionCheckEventListener"),r.startsWith(i)){switch(t.data){case"unchanged":this.ngZone.run(()=>{this.handleSessionUnchanged()});break;case"changed":this.ngZone.run(()=>{this.handleSessionChange()});break;case"error":this.ngZone.run(()=>{this.handleSessionError()})}this.debug("got info from session check inframe",t)}else this.debug("sessionCheckEventListener","wrong origin",i,"expected",r,"event",t)},this.ngZone.runOutsideAngular(()=>{window.addEventListener("message",this.sessionCheckEventListener)})}handleSessionUnchanged(){this.debug("session check","session unchanged"),this.eventsSubject.next(new Bu("session_unchanged"))}handleSessionChange(){this.eventsSubject.next(new Bu("session_changed")),this.stopSessionCheckTimer(),this.useSilentRefresh||"code"!==this.responseType?this.silentRefreshRedirectUri?(this.silentRefresh().catch(t=>this.debug("silent refresh failed after session changed")),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new Bu("session_terminated")),this.logOut(!0)):this.refreshToken().then(t=>{this.debug("token refresh after session change worked")}).catch(t=>{this.debug("token refresh did not work after session changed"),this.eventsSubject.next(new Bu("session_terminated")),this.logOut(!0)})}waitForSilentRefreshAfterSessionChange(){this.events.pipe(nr(t=>"silently_refreshed"===t.type||"silent_refresh_timeout"===t.type||"silent_refresh_error"===t.type),hl()).subscribe(t=>{"silently_refreshed"!==t.type&&(this.debug("silent refresh did not work after session changed"),this.eventsSubject.next(new Bu("session_terminated")),this.logOut(!0))})}handleSessionError(){this.stopSessionCheckTimer(),this.eventsSubject.next(new Bu("session_error"))}removeSessionCheckEventListener(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}initSessionCheck(){if(!this.canPerformSessionCheck())return;const t=this.document.getElementById(this.sessionCheckIFrameName);t&&this.document.body.removeChild(t);const i=this.document.createElement("iframe");i.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),i.setAttribute("src",this.sessionCheckIFrameUrl),i.style.display="none",this.document.body.appendChild(i),this.startSessionCheckTimer()}startSessionCheckTimer(){this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(()=>{this.sessionCheckTimer=setInterval(this.checkSession.bind(this),this.sessionCheckIntervall)})}stopSessionCheckTimer(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}checkSession(){const t=this.document.getElementById(this.sessionCheckIFrameName);t||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);const i=this.getSessionState();i||this.stopSessionCheckTimer(),t.contentWindow.postMessage(this.clientId+" "+i,this.issuer)}createLoginUrl(t="",i="",r="",s=!1,o={}){var a=this;return ul(function*(){const c=a;let d;d=r||a.redirectUri;const p=yield a.createAndSaveNonce();if(t=t?p+a.config.nonceStateSeparator+encodeURIComponent(t):p,!a.requestAccessToken&&!a.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");a.responseType=a.config.responseType?a.config.responseType:a.oidc&&a.requestAccessToken?"id_token token":a.oidc&&!a.requestAccessToken?"id_token":"token";const g=c.loginUrl.indexOf("?")>-1?"&":"?";let _=c.scope;a.oidc&&!_.match(/(^|\s)openid($|\s)/)&&(_="openid "+_);let y=c.loginUrl+g+"response_type="+encodeURIComponent(c.responseType)+"&client_id="+encodeURIComponent(c.clientId)+"&state="+encodeURIComponent(t)+"&redirect_uri="+encodeURIComponent(d)+"&scope="+encodeURIComponent(_);if(a.responseType.includes("code")&&!a.disablePKCE){const[x,T]=yield a.createChallangeVerifierPairForPKCE();a.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("PKCE_verifier",T):a._storage.setItem("PKCE_verifier",T),y+="&code_challenge="+x,y+="&code_challenge_method=S256"}i&&(y+="&login_hint="+encodeURIComponent(i)),c.resource&&(y+="&resource="+encodeURIComponent(c.resource)),c.oidc&&(y+="&nonce="+encodeURIComponent(p)),s&&(y+="&prompt=none");for(const x of Object.keys(o))y+="&"+encodeURIComponent(x)+"="+encodeURIComponent(o[x]);if(a.customQueryParams)for(const x of Object.getOwnPropertyNames(a.customQueryParams))y+="&"+x+"="+encodeURIComponent(a.customQueryParams[x]);return y})()}initImplicitFlowInternal(t="",i=""){if(this.inImplicitFlow)return;if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let r={},s=null;"string"==typeof i?s=i:"object"==typeof i&&(r=i),this.createLoginUrl(t,s,null,!1,r).then(this.config.openUri).catch(o=>{console.error("Error in initImplicitFlow",o),this.inImplicitFlow=!1})}initImplicitFlow(t="",i=""){""!==this.loginUrl?this.initImplicitFlowInternal(t,i):this.events.pipe(nr(r=>"discovery_document_loaded"===r.type)).subscribe(r=>this.initImplicitFlowInternal(t,i))}resetImplicitFlow(){this.inImplicitFlow=!1}callOnTokenReceivedIfExists(t){const i=this;if(t.onTokenReceived){const r={idClaims:i.getIdentityClaims(),idToken:i.getIdToken(),accessToken:i.getAccessToken(),state:i.state};t.onTokenReceived(r)}}storeAccessTokenResponse(t,i,r,s,o){if(this._storage.setItem("access_token",t),s&&!Array.isArray(s)?this._storage.setItem("granted_scopes",JSON.stringify(s.split(" "))):s&&Array.isArray(s)&&this._storage.setItem("granted_scopes",JSON.stringify(s)),this._storage.setItem("access_token_stored_at",""+this.dateTimeService.now()),r){const a=1e3*r,d=this.dateTimeService.new().getTime()+a;this._storage.setItem("expires_at",""+d)}i&&this._storage.setItem("refresh_token",i),o&&o.forEach((a,c)=>{this._storage.setItem(c,a)})}tryLogin(t=null){return"code"===this.config.responseType?this.tryLoginCodeFlow(t).then(i=>!0):this.tryLoginImplicitFlow(t)}parseQueryString(t){return t&&0!==t.length?("?"===t.charAt(0)&&(t=t.substr(1)),this.urlHelper.parseQueryString(t)):{}}tryLoginCodeFlow(t=null){var i=this;return ul(function*(){const r=(t=t||{}).customHashFragment?t.customHashFragment.substring(1):window.location.search,s=i.getCodePartsFromUrl(r),o=s.code,a=s.state,c=s.session_state;if(!t.preventClearHashAfterLogin){const g=location.origin+location.pathname+location.search.replace(/code=[^&\$]*/,"").replace(/scope=[^&\$]*/,"").replace(/state=[^&\$]*/,"").replace(/session_state=[^&\$]*/,"").replace(/^\?&/,"?").replace(/&$/,"").replace(/^\?$/,"").replace(/&+/g,"&").replace(/\?&/,"?").replace(/\?$/,"")+location.hash;history.replaceState(null,window.name,g)}let[d,p]=i.parseState(a);if(i.state=p,s.error){i.debug("error trying to login"),i.handleLoginError(t,s);const g=new is("code_error",{},s);return i.eventsSubject.next(g),Promise.reject(g)}if(!t.disableNonceCheck){if(!d)return i.saveRequestedRoute(),Promise.resolve();if(!t.disableOAuth2StateCheck&&!i.validateNonce(d)){const _=new is("invalid_nonce_in_state",null);return i.eventsSubject.next(_),Promise.reject(_)}}return i.storeSessionState(c),o&&(yield i.getTokenFromCode(o,t),i.restoreRequestedRoute()),Promise.resolve()})()}saveRequestedRoute(){this.config.preserveRequestedRoute&&this._storage.setItem("requested_route",window.location.pathname+window.location.search)}restoreRequestedRoute(){const t=this._storage.getItem("requested_route");t&&history.replaceState(null,"",window.location.origin+t)}getCodePartsFromUrl(t){return t&&0!==t.length?("?"===t.charAt(0)&&(t=t.substr(1)),this.urlHelper.parseQueryString(t)):this.urlHelper.getHashFragmentParams()}getTokenFromCode(t,i){let r=new Ya({encoder:new q_}).set("grant_type","authorization_code").set("code",t).set("redirect_uri",i.customRedirectUri||this.redirectUri);if(!this.disablePKCE){let s;s=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("PKCE_verifier"):this._storage.getItem("PKCE_verifier"),s?r=r.set("code_verifier",s):console.warn("No PKCE verifier found in oauth storage!")}return this.fetchAndProcessToken(r,i)}fetchAndProcessToken(t,i){i=i||{},this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let r=(new No).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const s=btoa(`${this.clientId}:${this.dummyClientSecret}`);r=r.set("Authorization","Basic "+s)}return this.useHttpBasicAuth||(t=t.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(t=t.set("client_secret",this.dummyClientSecret)),new Promise((s,o)=>{if(this.customQueryParams)for(let a of Object.getOwnPropertyNames(this.customQueryParams))t=t.set(a,this.customQueryParams[a]);this.http.post(this.tokenEndpoint,t,{headers:r}).subscribe(a=>{this.debug("refresh tokenResponse",a),this.storeAccessTokenResponse(a.access_token,a.refresh_token,a.expires_in||this.fallbackAccessTokenExpirationTimeInSec,a.scope,this.extractRecognizedCustomParameters(a)),this.oidc&&a.id_token?this.processIdToken(a.id_token,a.access_token,i.disableNonceCheck).then(c=>{this.storeIdToken(c),this.eventsSubject.next(new Qa("token_received")),this.eventsSubject.next(new Qa("token_refreshed")),s(a)}).catch(c=>{this.eventsSubject.next(new is("token_validation_error",c)),console.error("Error validating tokens"),console.error(c),o(c)}):(this.eventsSubject.next(new Qa("token_received")),this.eventsSubject.next(new Qa("token_refreshed")),s(a))},a=>{console.error("Error getting token",a),this.eventsSubject.next(new is("token_refresh_error",a)),o(a)})})}tryLoginImplicitFlow(t=null){let i;i=(t=t||{}).customHashFragment?this.urlHelper.getHashFragmentParams(t.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",i);const r=i.state;let[s,o]=this.parseState(r);if(this.state=o,i.error){this.debug("error trying to login"),this.handleLoginError(t,i);const g=new is("token_error",{},i);return this.eventsSubject.next(g),Promise.reject(g)}const a=i.access_token,c=i.id_token,d=i.session_state,p=i.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!a||this.requestAccessToken&&!t.disableOAuth2StateCheck&&!r||this.oidc&&!c)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!d&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!t.disableNonceCheck&&!this.validateNonce(s)){const _=new is("invalid_nonce_in_state",null);return this.eventsSubject.next(_),Promise.reject(_)}return this.requestAccessToken&&this.storeAccessTokenResponse(a,null,i.expires_in||this.fallbackAccessTokenExpirationTimeInSec,p),this.oidc?this.processIdToken(c,a,t.disableNonceCheck).then(g=>t.validationHandler?t.validationHandler({accessToken:a,idClaims:g.idTokenClaims,idToken:g.idToken,state:r}).then(_=>g):g).then(g=>(this.storeIdToken(g),this.storeSessionState(d),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash(),this.eventsSubject.next(new Qa("token_received")),this.callOnTokenReceivedIfExists(t),this.inImplicitFlow=!1,!0)).catch(g=>(this.eventsSubject.next(new is("token_validation_error",g)),this.logger.error("Error validating tokens"),this.logger.error(g),Promise.reject(g))):(this.eventsSubject.next(new Qa("token_received")),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash(),this.callOnTokenReceivedIfExists(t),Promise.resolve(!0))}parseState(t){let i=t,r="";if(t){const s=t.indexOf(this.config.nonceStateSeparator);s>-1&&(i=t.substr(0,s),r=t.substr(s+this.config.nonceStateSeparator.length))}return[i,r]}validateNonce(t){let i;return i=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),i===t||(console.error("Validating access_token failed, wrong state/nonce.",i,t),!1)}storeIdToken(t){this._storage.setItem("id_token",t.idToken),this._storage.setItem("id_token_claims_obj",t.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+t.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+this.dateTimeService.now())}storeSessionState(t){this._storage.setItem("session_state",t)}getSessionState(){return this._storage.getItem("session_state")}handleLoginError(t,i){t.onLoginError&&t.onLoginError(i),this.clearHashAfterLogin&&!t.preventClearHashAfterLogin&&this.clearLocationHash()}getClockSkewInMsec(t=6e5){return this.clockSkewInSec||0===this.clockSkewInSec?1e3*this.clockSkewInSec:t}processIdToken(t,i,r=!1){const s=t.split("."),a=K4(this.padBase64(s[0])),c=JSON.parse(a),p=K4(this.padBase64(s[1])),g=JSON.parse(p);let _;if(_=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),Array.isArray(g.aud)){if(g.aud.every(A=>A!==this.clientId)){const A="Wrong audience: "+g.aud.join(",");return this.logger.warn(A),Promise.reject(A)}}else if(g.aud!==this.clientId){const A="Wrong audience: "+g.aud;return this.logger.warn(A),Promise.reject(A)}if(!g.sub){const A="No sub claim in id_token";return this.logger.warn(A),Promise.reject(A)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==g.sub){const A=`After refreshing, we got an id_token for another user (sub). Expected sub: ${this.silentRefreshSubject}, received sub: ${g.sub}`;return this.logger.warn(A),Promise.reject(A)}if(!g.iat){const A="No iat claim in id_token";return this.logger.warn(A),Promise.reject(A)}if(!this.skipIssuerCheck&&g.iss!==this.issuer){const A="Wrong issuer: "+g.iss;return this.logger.warn(A),Promise.reject(A)}if(!r&&g.nonce!==_){const A="Wrong nonce: "+g.nonce;return this.logger.warn(A),Promise.reject(A)}if(this.hasOwnProperty("responseType")&&("code"===this.responseType||"id_token"===this.responseType)&&(this.disableAtHashCheck=!0),!this.disableAtHashCheck&&this.requestAccessToken&&!g.at_hash){const A="An at_hash is needed!";return this.logger.warn(A),Promise.reject(A)}const y=this.dateTimeService.now(),x=1e3*g.iat,T=1e3*g.exp,N=this.getClockSkewInMsec();if(x-N>=y||T+N-this.decreaseExpirationBySec<=y){const A="Token has expired";return console.error(A),console.error({now:y,issuedAtMSec:x,expiresAtMSec:T}),Promise.reject(A)}const I={accessToken:i,idToken:t,jwks:this.jwks,idTokenClaims:g,idTokenHeader:c,loadKeys:()=>this.loadJwks()};return this.disableAtHashCheck?this.checkSignature(I).then(A=>({idToken:t,idTokenClaims:g,idTokenClaimsJson:p,idTokenHeader:c,idTokenHeaderJson:a,idTokenExpiresAt:T})):this.checkAtHash(I).then(A=>{if(!this.disableAtHashCheck&&this.requestAccessToken&&!A){const H="Wrong at_hash";return this.logger.warn(H),Promise.reject(H)}return this.checkSignature(I).then(H=>{const X={idToken:t,idTokenClaims:g,idTokenClaimsJson:p,idTokenHeader:c,idTokenHeaderJson:a,idTokenExpiresAt:T};return this.disableAtHashCheck?X:this.checkAtHash(I).then(re=>{if(this.requestAccessToken&&!re){const K="Wrong at_hash";return this.logger.warn(K),Promise.reject(K)}return X})})})}getIdentityClaims(){const t=this._storage.getItem("id_token_claims_obj");return t?JSON.parse(t):null}getGrantedScopes(){const t=this._storage.getItem("granted_scopes");return t?JSON.parse(t):null}getIdToken(){return this._storage?this._storage.getItem("id_token"):null}padBase64(t){for(;t.length%4!=0;)t+="=";return t}getAccessToken(){return this._storage?this._storage.getItem("access_token"):null}getRefreshToken(){return this._storage?this._storage.getItem("refresh_token"):null}getAccessTokenExpiration(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}getAccessTokenStoredAt(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}getIdTokenStoredAt(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}getIdTokenExpiration(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}hasValidAccessToken(){if(this.getAccessToken()){const t=this._storage.getItem("expires_at"),i=this.dateTimeService.new();return!(t&&parseInt(t,10)-this.decreaseExpirationBySec<i.getTime()-this.getClockSkewInMsec())}return!1}hasValidIdToken(){if(this.getIdToken()){const t=this._storage.getItem("id_token_expires_at"),i=this.dateTimeService.new();return!(t&&parseInt(t,10)-this.decreaseExpirationBySec<i.getTime()-this.getClockSkewInMsec())}return!1}getCustomTokenResponseProperty(t){return this._storage&&this.config.customTokenParameters&&this.config.customTokenParameters.indexOf(t)>=0&&null!==this._storage.getItem(t)?JSON.parse(this._storage.getItem(t)):null}authorizationHeader(){return"Bearer "+this.getAccessToken()}logOut(t={},i=""){let r=!1;"boolean"==typeof t&&(r=t,t={});const s=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this.saveNoncesInLocalStorage?(localStorage.removeItem("nonce"),localStorage.removeItem("PKCE_verifier")):(this._storage.removeItem("nonce"),this._storage.removeItem("PKCE_verifier")),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.config.customTokenParameters&&this.config.customTokenParameters.forEach(a=>this._storage.removeItem(a)),this.silentRefreshSubject=null,this.eventsSubject.next(new Bu("logout")),!this.logoutUrl||r)return;let o;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(this.logoutUrl.indexOf("{{")>-1)o=this.logoutUrl.replace(/\{\{id_token\}\}/,encodeURIComponent(s)).replace(/\{\{client_id\}\}/,encodeURIComponent(this.clientId));else{let a=new Ya({encoder:new q_});s&&(a=a.set("id_token_hint",s));const c=this.postLogoutRedirectUri||this.redirectUriAsPostLogoutRedirectUriFallback&&this.redirectUri||"";c&&(a=a.set("post_logout_redirect_uri",c),i&&(a=a.set("state",i)));for(let d in t)a=a.set(d,t[d]);o=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+a.toString()}this.config.openUri(o)}createAndSaveNonce(){const t=this;return this.createNonce().then(function(i){return t.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("nonce",i):t._storage.setItem("nonce",i),i})}ngOnDestroy(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.removeSilentRefreshEventListener();const t=this.document.getElementById(this.silentRefreshIFrameName);t&&t.remove(),this.stopSessionCheckTimer(),this.removeSessionCheckEventListener();const i=this.document.getElementById(this.sessionCheckIFrameName);i&&i.remove()}createNonce(){return new Promise(t=>{if(this.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let r=45,s="";const o=typeof self>"u"?null:self.crypto||self.msCrypto;if(o){let a=new Uint8Array(r);o.getRandomValues(a),a.map||(a.map=Array.prototype.map),a=a.map(c=>i.charCodeAt(c%i.length)),s=String.fromCharCode.apply(null,a)}else for(;0<r--;)s+=i[Math.random()*i.length|0];t(yA(s))})}checkAtHash(t){var i=this;return ul(function*(){return i.tokenValidationHandler?i.tokenValidationHandler.validateAtHash(t):(i.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0)})()}checkSignature(t){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(t):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}initLoginFlow(t="",i={}){return"code"===this.responseType?this.initCodeFlow(t,i):this.initImplicitFlow(t,i)}initCodeFlow(t="",i={}){""!==this.loginUrl?this.initCodeFlowInternal(t,i):this.events.pipe(nr(r=>"discovery_document_loaded"===r.type)).subscribe(r=>this.initCodeFlowInternal(t,i))}initCodeFlowInternal(t="",i={}){if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let r={},s=null;"string"==typeof i?s=i:"object"==typeof i&&(r=i),this.createLoginUrl(t,s,null,!1,r).then(this.config.openUri).catch(o=>{console.error("Error in initAuthorizationCodeFlow"),console.error(o)})}createChallangeVerifierPairForPKCE(){var t=this;return ul(function*(){if(!t.crypto)throw new Error("PKCE support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");const i=yield t.createNonce();return[yA(yield t.crypto.calcHash(i,"sha-256")),i]})()}extractRecognizedCustomParameters(t){let i=new Map;return this.config.customTokenParameters&&this.config.customTokenParameters.forEach(r=>{t[r]&&i.set(r,JSON.stringify(t[r]))}),i}revokeTokenAndLogout(t={},i=!1){let r=this.revocationEndpoint,s=this.getAccessToken(),o=this.getRefreshToken();if(!s)return Promise.resolve();let a=new Ya({encoder:new q_}),c=(new No).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const d=btoa(`${this.clientId}:${this.dummyClientSecret}`);c=c.set("Authorization","Basic "+d)}if(this.useHttpBasicAuth||(a=a.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(a=a.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const d of Object.getOwnPropertyNames(this.customQueryParams))a=a.set(d,this.customQueryParams[d]);return new Promise((d,p)=>{let g,_;if(s){let y=a.set("token",s).set("token_type_hint","access_token");g=this.http.post(r,y,{headers:c})}else g=Dt(null);if(o){let y=a.set("token",o).set("token_type_hint","refresh_token");_=this.http.post(r,y,{headers:c})}else _=Dt(null);i&&(g=g.pipe(ra(y=>0===y.status?Dt(null):Pc(y))),_=_.pipe(ra(y=>0===y.status?Dt(null):Pc(y)))),_w([g,_]).subscribe(y=>{this.logOut(t),d(y),this.logger.info("Token successfully revoked")},y=>{this.logger.error("Error revoking token",y),this.eventsSubject.next(new is("token_revoke_error",y)),p(y)})})}clearLocationHash(){""!=location.hash&&(location.hash="")}}return n.\u0275fac=function(t){return new(t||n)(Me(cn),Me($d),Me(vA,8),Me(Y4,8),Me(oS,8),Me(X4),Me(q4),Me(J4,8),Me(En),Me(gA))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class Q4{}class zJ{handleError(e){return Pc(e)}}let GJ=(()=>{class n{constructor(t,i,r){this.oAuthService=t,this.errorHandler=i,this.moduleConfig=r}checkUrl(t){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(t):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find(i=>t.toLowerCase().startsWith(i.toLowerCase()))}intercept(t,i){const r=t.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer&&this.checkUrl(r)?this.moduleConfig.resourceServer.sendAccessToken?uc(Dt(this.oAuthService.getAccessToken()).pipe(nr(o=>!!o)),this.oAuthService.events.pipe(nr(o=>"token_received"===o.type),function AJ(n,e=rg){return function DJ(n,e,t=rg){return i=>{let r=G4(n),s=r?+n-t.now():Math.abs(n);return i.lift(new TJ(s,r,e,t))}}(n,Pc(new CJ),e)}(this.oAuthService.waitForTokenInMsec||0),ra(o=>Dt(null)),gt(o=>this.oAuthService.getAccessToken()))).pipe(Vs(1),lr(o=>{if(o){const c=t.headers.set("Authorization","Bearer "+o);t=t.clone({headers:c})}return i.handle(t).pipe(ra(a=>this.errorHandler.handleError(a)))})):i.handle(t).pipe(ra(o=>this.errorHandler.handleError(o))):i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(wA),Me(Q4),Me($4,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();function jJ(){return console}function WJ(){return typeof sessionStorage<"u"?sessionStorage:new FJ}function $J(n=null,e=W4){return bx([wA,X4,{provide:q4,useFactory:jJ},{provide:vA,useFactory:WJ},{provide:Y4,useClass:e},{provide:J4,useClass:UJ},{provide:Q4,useClass:zJ},{provide:$4,useValue:n},{provide:ND,useClass:GJ,multi:!0},{provide:gA,useClass:IJ}])}let qJ=(()=>{class n{static forRoot(t=null,i=W4){return{ngModule:n,providers:[$J(t,i)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[Gd]}),n})();new it("AUTH_CONFIG");class YJ extends RJ{constructor(){super(...arguments),this.allowedAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],this.gracePeriodInSec=600}validateSignature(e,t=!1){if(!e.idToken)throw new Error("Parameter idToken expected!");if(!e.idTokenHeader)throw new Error("Parameter idTokenHandler expected.");if(!e.jwks)throw new Error("Parameter jwks expected!");if(!e.jwks.keys||!Array.isArray(e.jwks.keys)||0===e.jwks.keys.length)throw new Error("Array keys in jwks missing!");let s,i=e.idTokenHeader.kid,r=e.jwks.keys,o=e.idTokenHeader.alg;if(i)s=r.find(p=>p.kid===i);else{let p=this.alg2kty(o),g=r.filter(_=>_.kty===p&&"sig"===_.use);if(g.length>1){let _="More than one matching key found. Please specify a kid in the id_token header.";return console.error(_),Promise.reject(_)}1===g.length&&(s=g[0])}if(!s&&!t&&e.loadKeys)return e.loadKeys().then(p=>e.jwks=p).then(p=>this.validateSignature(e,!0));if(!s&&t&&!i){let p="No matching key found.";return console.error(p),Promise.reject(p)}if(!s&&t&&i){let p="expected key not found in property jwks. This property is most likely loaded with the discovery document. Expected key id (kid): "+i;return console.error(p),Promise.reject(p)}let a=hA.KZ.getKey(s);return hA.fs.jws.JWS.verifyJWT(e.idToken,a,{alg:this.allowedAlgorithms,gracePeriod:this.gracePeriodInSec})?Promise.resolve():Promise.reject("Signature not valid")}alg2kty(e){switch(e.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+e)}}calcHash(e,t){let r=new hA.fs.crypto.MessageDigest({alg:t}).digestString(e),s=this.toByteArrayAsString(r);return Promise.resolve(s)}toByteArrayAsString(e){let t="";for(let i=0;i<e.length;i+=2){let r=e.charAt(i)+e.charAt(i+1),s=parseInt(r,16);t+=String.fromCharCode(s)}return t}}const K__bungie_apiKey="cd01c0cb258c48228cdbc0f468674257",K__bungie_clientId="36111",K__bungie_redirect="https://chrisfried.github.io/secret-scrublandeux/auth";class Vu extends vA{getItem(e){return localStorage.getItem(`bungie-${e}`)}removeItem(e){return localStorage.removeItem(`bungie-${e}`)}setItem(e,t){return localStorage.setItem(`bungie-${e}`,t)}}Vu.\u0275fac=function(){let n;return function(t){return(n||(n=Ir(Vu)))(t||Vu)}}(),Vu.\u0275prov=Xe({token:Vu,factory:Vu.\u0275fac});class ug{constructor(e){this.authStorage=e}checkUrl(e){return!!["https://www.bungie.net","https://stats.bungie.net"].find(r=>e.startsWith(r))}intercept(e,t){let i=e.url.toLowerCase();if(!this.checkUrl(i))return t.handle(e);let r=e.headers;return i.indexOf("common/destiny2_content")>0||(r=r.set("X-API-Key",K__bungie_apiKey),"https://www.bungie.net/platform/app/oauth/token/"===i||i.indexOf("getmembershipsbyid")>0||this.authStorage.getItem("access_token")&&(r=r.set("Authorization",`Bearer ${this.authStorage.getItem("access_token")}`)),i.indexOf("/Stats/Activities/")>-1&&(i=i.replace("www.bungie","stats.bungie"))),e=e.clone({headers:r}),t.handle(e)}}ug.\u0275fac=function(e){return new(e||ug)(Me(Vu))},ug.\u0275prov=Xe({token:ug,factory:ug.\u0275fac,providedIn:"root"});const e5=new it("bungie service");class dg{}function t5(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new XJ(n,e,t))}}dg.\u0275fac=function(e){return new(e||dg)},dg.\u0275mod=Mt({type:dg}),dg.\u0275inj=Wn({providers:[Vu,{provide:e5,useClass:wA},{provide:ND,useClass:ug,multi:!0}],imports:[Gd,qJ.forRoot()]});class XJ{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new ZJ(e,this.accumulator,this.seed,this.hasSeed))}}class ZJ extends oi{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function SA(n){return function(t){return 0===n?gw():t.lift(new JJ(n))}}class JJ{constructor(e){if(this.total=e,this.total<0)throw new uL}call(e,t){return t.subscribe(new QJ(e,this.total))}}class QJ extends oi{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<i;s++){const o=t++%i;e.next(r[o])}}e.complete()}}function n5(n,e){const t=arguments.length>=2;return i=>i.pipe(n?nr((r,s)=>n(r,s,i)):Ds,SA(1),t?sS(e):j4(()=>new rS))}class tQ{constructor(e){this.value=e}call(e,t){return t.subscribe(new nQ(e,this.value))}}class nQ extends oi{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}const Bn="primary",Y_=Symbol("RouteTitle");class iQ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function hg(n){return new iQ(n)}function rQ(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Kl(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!i5(n[r],e[r]))return!1;return!0}function i5(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function r5(n){return Array.prototype.concat.apply([],n)}function s5(n){return n.length>0?n[n.length-1]:null}function bo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function th(n){return _2(n)?n:n_(n)?cr(Promise.resolve(n)):Dt(n)}const cS=!1,oQ={exact:function c5(n,e,t){if(!zf(n.segments,e.segments)||!lS(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!c5(n.children[i],e.children[i],t))return!1;return!0},subset:l5},o5={exact:function aQ(n,e){return Kl(n,e)},subset:function cQ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>i5(n[t],e[t]))},ignored:()=>!0};function a5(n,e,t){return oQ[t.paths](n.root,e.root,t.matrixParams)&&o5[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function l5(n,e,t){return u5(n,e,e.segments,t)}function u5(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!zf(r,t)||e.hasChildren()||!lS(r,t,i))}if(n.segments.length===t.length){if(!zf(n.segments,t)||!lS(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!l5(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(zf(n.segments,r)&&lS(n.segments,r,i)&&n.children[Bn])&&u5(n.children[Bn],e,s,i)}}function lS(n,e,t){return e.every((i,r)=>o5[t](n[r].parameters,i.parameters))}class nh{constructor(e=new ii([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hg(this.queryParams)),this._queryParamMap}toString(){return dQ.serialize(this)}}class ii{constructor(e,t){this.segments=e,this.children=t,this.parent=null,bo(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uS(this)}}class X_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=hg(this.parameters)),this._parameterMap}toString(){return f5(this)}}function zf(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Z_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(){return new EA},providedIn:"root"}),n})();class EA{parse(e){const t=new bQ(e);return new nh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${J_(e.root,!0)}`,i=function pQ(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${dS(t)}=${dS(r)}`).join("&"):`${dS(t)}=${dS(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function hQ(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const dQ=new EA;function uS(n){return n.segments.map(e=>f5(e)).join("/")}function J_(n,e){if(!n.hasChildren())return uS(n);if(e){const t=n.children[Bn]?J_(n.children[Bn],!1):"",i=[];return bo(n.children,(r,s)=>{s!==Bn&&i.push(`${s}:${J_(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function uQ(n,e){let t=[];return bo(n.children,(i,r)=>{r===Bn&&(t=t.concat(e(i,r)))}),bo(n.children,(i,r)=>{r!==Bn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Bn?[J_(n.children[Bn],!1)]:[`${r}:${J_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Bn]?`${uS(n)}/${t[0]}`:`${uS(n)}/(${t.join("//")})`}}function d5(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dS(n){return d5(n).replace(/%3B/gi,";")}function MA(n){return d5(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hS(n){return decodeURIComponent(n)}function h5(n){return hS(n.replace(/\+/g,"%20"))}function f5(n){return`${MA(n.path)}${function fQ(n){return Object.keys(n).map(e=>`;${MA(e)}=${MA(n[e])}`).join("")}(n.parameters)}`}const mQ=/^[^\/()?;=#]+/;function fS(n){const e=n.match(mQ);return e?e[0]:""}const gQ=/^[^=?&#]+/,_Q=/^[^&#]+/;class bQ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ii([],{}):new ii([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Bn]=new ii(e,t)),i}parseSegment(){const e=fS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new He(4009,cS);return this.capture(e),new X_(hS(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fS(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=fS(this.remaining);r&&(i=r,this.capture(i))}e[hS(t)]=hS(i)}parseQueryParam(e){const t=function vQ(n){const e=n.match(gQ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function yQ(n){const e=n.match(_Q);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=h5(t),s=h5(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=fS(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new He(4010,cS);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Bn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Bn]:new ii([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new He(4011,cS)}}function CA(n){return n.segments.length>0?new ii([],{[Bn]:n}):n}function pS(n){const e={};for(const i of Object.keys(n.children)){const s=pS(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function xQ(n){if(1===n.numberOfChildren&&n.children[Bn]){const e=n.children[Bn];return new ii(n.segments.concat(e.segments),e.children)}return n}(new ii(n.segments,e))}function Gf(n){return n instanceof nh}const DA=!1;function wQ(n,e,t,i,r){if(0===t.length)return fg(e.root,e.root,e.root,i,r);const s=function _5(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new v5(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return bo(s.outlets,(c,d)=>{a[d]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new v5(t,e,i)}(t);return s.toRoot()?fg(e.root,e.root,new ii([],{}),i,r):function o(c){const d=function EQ(n,e,t,i){if(n.isAbsolute)return new pg(e.root,!0,0);if(-1===i)return new pg(t,t===e.root,0);return function y5(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new He(4005,DA&&"Invalid number of '../'");r=i.segments.length}return new pg(i,!1,r-s)}(t,i+(Q_(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),p=d.processChildren?mg(d.segmentGroup,d.index,s.commands):TA(d.segmentGroup,d.index,s.commands);return fg(e.root,d.segmentGroup,p,i,r)}(n.snapshot?._lastPathIndex)}function Q_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ey(n){return"object"==typeof n&&null!=n&&n.outlets}function fg(n,e,t,i,r){let o,s={};i&&bo(i,(c,d)=>{s[d]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),o=n===e?t:g5(n,e,t);const a=CA(pS(o));return new nh(a,s,r)}function g5(n,e,t){const i={};return bo(n.children,(r,s)=>{i[s]=r===e?t:g5(r,e,t)}),new ii(n.segments,i)}class v5{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Q_(i[0]))throw new He(4003,DA&&"Root segment cannot have matrix parameters");const r=i.find(ey);if(r&&r!==s5(i))throw new He(4004,DA&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pg{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function TA(n,e,t){if(n||(n=new ii([],{})),0===n.segments.length&&n.hasChildren())return mg(n,e,t);const i=function CQ(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(ey(a))break;const c=`${a}`,d=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!x5(c,d,o))return s;i+=2}else{if(!x5(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new ii(n.segments.slice(0,i.pathIndex),{});return s.children[Bn]=new ii(n.segments.slice(i.pathIndex),n.children),mg(s,0,r)}return i.match&&0===r.length?new ii(n.segments,{}):i.match&&!n.hasChildren()?AA(n,e,t):i.match?mg(n,0,r):AA(n,e,t)}function mg(n,e,t){if(0===t.length)return new ii(n.segments,{});{const i=function MQ(n){return ey(n[0])?n[0].outlets:{[Bn]:n}}(t),r={};return!i[Bn]&&n.children[Bn]&&1===n.numberOfChildren&&0===n.children[Bn].segments.length?mg(n.children[Bn],e,t):(bo(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=TA(n.children[o],e,s))}),bo(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new ii(n.segments,r))}}function AA(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(ey(s)){const c=DQ(s.outlets);return new ii(i,c)}if(0===r&&Q_(t[0])){i.push(new X_(n.segments[e].path,b5(t[0]))),r++;continue}const o=ey(s)?s.outlets[Bn]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Q_(a)?(i.push(new X_(o,b5(a))),r+=2):(i.push(new X_(o,{})),r++)}return new ii(i,{})}function DQ(n){const e={};return bo(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=AA(new ii([],{}),0,t))}),e}function b5(n){const e={};return bo(n,(t,i)=>e[i]=`${t}`),e}function x5(n,e,t){return n==t.path&&Kl(e,t.parameters)}const ty="imperative";class Yl{constructor(e,t){this.id=e,this.url=t}}class IA extends Yl{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jf extends Yl{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mS extends Yl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gS extends Yl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class FA extends Yl{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TQ extends Yl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AQ extends Yl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IQ extends Yl{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class FQ extends Yl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RQ extends Yl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PQ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w5{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let UQ=(()=>{class n{createUrlTree(t,i,r,s,o,a){return wQ(t||i.root,r,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),GQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(e){return UQ.\u0275fac(e)},providedIn:"root"}),n})();class S5{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=RA(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=RA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=PA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return PA(e,this._root).map(t=>t.value)}}function RA(n,e){if(n===e.value)return e;for(const t of e.children){const i=RA(n,t);if(i)return i}return null}function PA(n,e){if(n===e.value)return[e];for(const t of e.children){const i=PA(n,t);if(i.length)return i.unshift(e),i}return[]}class Hu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class E5 extends S5{constructor(e,t){super(e),this.snapshot=t,kA(this,e)}toString(){return this.snapshot.toString()}}function M5(n,e){const t=function jQ(n,e){const o=new vS([],{},{},"",{},Bn,e,null,n.root,-1,{});return new D5("",new Hu(o,[]))}(n,e),i=new Zi([new X_("",{})]),r=new Zi({}),s=new Zi({}),o=new Zi({}),a=new Zi(""),c=new Wf(i,r,o,a,s,Bn,e,t.root);return c.snapshot=t.root,new E5(new Hu(c,[]),t)}class Wf{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(gt(d=>d[Y_]))??Dt(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(gt(e=>hg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(gt(e=>hg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function C5(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function WQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class vS{get title(){return this.data?.[Y_]}constructor(e,t,i,r,s,o,a,c,d,p,g){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=d,this._lastPathIndex=p,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class D5 extends S5{constructor(e,t){super(t),this.url=e,kA(this,t)}toString(){return T5(this._root)}}function kA(n,e){e.value._routerState=n,e.children.forEach(t=>kA(n,t))}function T5(n){const e=n.children.length>0?` { ${n.children.map(T5).join(", ")} } `:"";return`${n.value}${e}`}function OA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Kl(e.params,t.params)||n.params.next(t.params),function sQ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Kl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function LA(n,e){const t=Kl(n.params,e.params)&&function lQ(n,e){return zf(n,e)&&n.every((t,i)=>Kl(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||LA(n.parent,e.parent))}function ny(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function qQ(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ny(n,i,r);return ny(n,i)})}(n,e,t);return new Hu(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ny(n,a)),o}}const i=function KQ(n){return new Wf(new Zi(n.url),new Zi(n.params),new Zi(n.queryParams),new Zi(n.fragment),new Zi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>ny(n,s));return new Hu(i,r)}}const NA="ngNavigationCancelingError";function A5(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Gf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=I5(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function I5(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[NA]=!0,i.cancellationCode=e,t&&(i.url=t),i}function F5(n){return R5(n)&&Gf(n.url)}function R5(n){return n&&n[NA]}class YQ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new iy,this.attachRef=null}}let iy=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new YQ,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _S=!1;let P5=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Bn,this.activateEvents=new jn,this.deactivateEvents=new jn,this.attachEvents=new jn,this.detachEvents=new jn,this.parentContexts=dn(iy),this.location=dn(_a),this.changeDetector=dn(Ka),this.environmentInjector=dn(Jo)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new He(4012,_S);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new He(4012,_S);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new He(4012,_S);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new He(4013,_S);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new XQ(t,a,r.injector);if(i&&function ZQ(n){return!!n.resolveComponentFactory}(i)){const d=i.resolveComponentFactory(o);this.activated=r.createComponent(d,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ht({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Dn]}),n})();class XQ{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Wf?this.route:e===iy?this.childContexts:this.parent.get(e,t)}}let BA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=ai({type:n,selectors:[["ng-component"]],standalone:!0,features:[F2],decls:1,vars:0,template:function(t,i){1&t&&vn(0,"router-outlet")},dependencies:[P5],encapsulation:2}),n})();function k5(n,e){return n.providers&&!n._injector&&(n._injector=S1(n.providers,e,`Route: ${n.path}`)),n._injector??e}function HA(n){const e=n.children&&n.children.map(HA),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Bn&&(t.component=BA),t}function Lc(n){return n.outlet||Bn}function O5(n,e){const t=n.filter(i=>Lc(i)===e);return t.push(...n.filter(i=>Lc(i)!==e)),t}function ry(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class nee{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),OA(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=gg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),bo(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=gg(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=gg(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=gg(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new BQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new LQ(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(OA(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),OA(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=ry(r.snapshot),c=a?.get(Du)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class L5{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yS{constructor(e,t){this.component=e,this.route=t}}function iee(n,e,t){const i=n._root;return sy(i,e?e._root:null,t,[i.value])}function vg(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function F0(n){return null!==dd(n)}(n)?e.get(n):n:i}function sy(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=gg(e);return n.children.forEach(o=>{(function see(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function oee(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zf(n.url,e.url)||!Kl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LA(n,e)||!Kl(n.queryParams,e.queryParams);default:return!LA(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new L5(i)):(s.data=o.data,s._resolvedData=o._resolvedData),sy(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new yS(a.outlet.component,o))}else o&&oy(e,a,r),r.canActivateChecks.push(new L5(i)),sy(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),bo(s,(o,a)=>oy(o,t.getContext(a),r)),r}function oy(n,e,t){const i=gg(n),r=n.value;bo(i,(s,o)=>{oy(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new yS(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function ay(n){return"function"==typeof n}function UA(n){return n instanceof rS||"EmptyError"===n?.name}const bS=Symbol("INITIAL_VALUE");function _g(){return yo(n=>_w(n.map(e=>e.pipe(Vs(1),kf(bS)))).pipe(gt(e=>{for(const t of e)if(!0!==t){if(t===bS)return bS;if(!1===t||t instanceof nh)return t}return!0}),nr(e=>e!==bS),Vs(1)))}function N5(n){return function qr(...n){return xr(n)}(Mr(e=>{if(Gf(e))throw A5(0,e)}),gt(e=>!0===e))}const zA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B5(n,e,t,i,r){const s=GA(n,e,t);return s.matched?function See(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Dt(r.map(o=>{const a=vg(o,n);return th(function hee(n){return n&&ay(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(_g(),N5()):Dt(!0)}(i=k5(e,i),e,t).pipe(gt(o=>!0===o?s:{...zA})):Dt(s)}function GA(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...zA}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||rQ)(t,n,e);if(!r)return{...zA};const s={};bo(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function xS(n,e,t,i){if(t.length>0&&function Cee(n,e,t){return t.some(i=>wS(n,e,i)&&Lc(i)!==Bn)}(n,t,i)){const s=new ii(e,function Mee(n,e,t,i){const r={};r[Bn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Lc(s)!==Bn){const o=new ii([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Lc(s)]=o}return r}(n,e,i,new ii(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function Dee(n,e,t){return t.some(i=>wS(n,e,i))}(n,t,i)){const s=new ii(n.segments,function Eee(n,e,t,i,r){const s={};for(const o of i)if(wS(n,t,o)&&!r[Lc(o)]){const a=new ii([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[Lc(o)]=a}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new ii(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function wS(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function V5(n,e,t,i){return!!(Lc(n)===i||i!==Bn&&wS(e,t,n))&&("**"===n.path||GA(e,n,t).matched)}function H5(n,e,t){return 0===e.length&&!n.children[t]}const SS=!1;class ES{constructor(e){this.segmentGroup=e||null}}class U5{constructor(e){this.urlTree=e}}function cy(n){return Pc(new ES(n))}function z5(n){return Pc(new U5(n))}function Tee(n){return Pc(new He(4e3,SS&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Fee{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=xS(this.urlTree.root,[],[],this.config).segmentGroup,t=new ii(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Bn).pipe(gt(s=>this.createUrlTree(pS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ra(s=>{if(s instanceof U5)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ES?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Bn).pipe(gt(r=>this.createUrlTree(pS(r),e.queryParams,e.fragment))).pipe(ra(r=>{throw r instanceof ES?this.noMatchError(r):r}))}noMatchError(e){return new He(4002,SS&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=CA(e);return new nh(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(gt(s=>new ii([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return cr(r).pipe(Wd(s=>{const o=i.children[s],a=O5(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(gt(c=>({segment:c,outlet:s})))}),t5((s,o)=>(s[o.outlet]=o.segment,s),{}),n5())}expandSegment(e,t,i,r,s,o){return cr(i).pipe(Wd(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(ra(d=>{if(d instanceof ES)return Dt(null);throw d}))),hl(a=>!!a),ra((a,c)=>{if(UA(a))return H5(t,r,s)?Dt(new ii([],{})):cy(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return V5(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):cy(t):cy(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?z5(s):this.lineralizeSegments(i,s).pipe(lr(o=>{const a=new ii(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:d,positionalParamSegments:p}=GA(t,r,s);if(!a)return cy(t);const g=this.applyRedirectCommands(c,r.redirectTo,p);return r.redirectTo.startsWith("/")?z5(g):this.lineralizeSegments(r,g).pipe(lr(_=>this.expandSegment(e,t,i,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=k5(i,e),i.loadChildren?(i._loadedRoutes?Dt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(gt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new ii(r,{})))):Dt(new ii(r,{}))):B5(t,i,r,e).pipe(yo(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(lr(p=>{const g=p.injector??e,_=p.routes,{segmentGroup:y,slicedSegments:x}=xS(t,a,c,_),T=new ii(y.segments,y.children);if(0===x.length&&T.hasChildren())return this.expandChildren(g,_,T).pipe(gt(H=>new ii(a,H)));if(0===_.length&&0===x.length)return Dt(new ii(a,{}));const N=Lc(i)===s;return this.expandSegment(g,T,_,x,N?Bn:s,!0).pipe(gt(A=>new ii(a.concat(A.segments),A.children)))})):cy(t)))}getChildConfig(e,t,i){return t.children?Dt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Dt({routes:t._loadedRoutes,injector:t._loadedInjector}):function wee(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Dt(!0):Dt(r.map(o=>{const a=vg(o,n);return th(function cee(n){return n&&ay(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(_g(),N5())}(e,t,i).pipe(lr(r=>r?this.configLoader.loadChildren(e,t).pipe(Mr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Aee(n){return Pc(I5(SS&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):Dt({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Dt(i);if(r.numberOfChildren>1||!r.children[Bn])return Tee(e.redirectTo);r=r.children[Bn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new nh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return bo(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return bo(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new ii(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new He(4001,SS&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class Pee{}class Lee{constructor(e,t,i,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=xS(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Bn).pipe(gt(t=>{if(null===t)return null;const i=new vS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Bn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Hu(i,t),s=new D5(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=C5(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return cr(Object.keys(i.children)).pipe(Wd(r=>{const s=i.children[r],o=O5(t,r);return this.processSegmentGroup(e,o,s,r)}),t5((r,s)=>r&&s?(r.push(...s),r):null),lN(r=>null!==r),sS(null),n5(),gt(r=>{if(null===r)return null;const s=j5(r);return function Nee(n){n.sort((e,t)=>e.value.outlet===Bn?-1:t.value.outlet===Bn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return cr(t).pipe(Wd(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),hl(o=>!!o),ra(o=>{if(UA(o))return H5(i,r,s)?Dt([]):Dt(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!V5(t,i,r,s))return Dt(null);let o;if("**"===t.path){const a=r.length>0?s5(r).parameters:{},c=$5(i)+r.length;o=Dt({snapshot:new vS(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,q5(t),Lc(t),t.component??t._loadedComponent??null,t,W5(i),c,K5(t)),consumedSegments:[],remainingSegments:[]})}else o=B5(i,t,r,e).pipe(gt(({matched:a,consumedSegments:c,remainingSegments:d,parameters:p})=>{if(!a)return null;const g=$5(i)+c.length;return{snapshot:new vS(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,q5(t),Lc(t),t.component??t._loadedComponent??null,t,W5(i),g,K5(t)),consumedSegments:c,remainingSegments:d}}));return o.pipe(yo(a=>{if(null===a)return Dt(null);const{snapshot:c,consumedSegments:d,remainingSegments:p}=a;e=t._injector??e;const g=t._loadedInjector??e,_=function Bee(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:y,slicedSegments:x}=xS(i,d,p,_.filter(N=>void 0===N.redirectTo));if(0===x.length&&y.hasChildren())return this.processChildren(g,_,y).pipe(gt(N=>null===N?null:[new Hu(c,N)]));if(0===_.length&&0===x.length)return Dt([new Hu(c,[])]);const T=Lc(t)===s;return this.processSegment(g,_,y,x,T?Bn:s).pipe(gt(N=>null===N?null:[new Hu(c,N)]))}))}}function Vee(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function j5(n){const e=[],t=new Set;for(const i of n){if(!Vee(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=j5(i.children);e.push(new Hu(i.value,r))}return e.filter(i=>!t.has(i))}function W5(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $5(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function q5(n){return n.data||{}}function K5(n){return n.resolve||{}}function Y5(n){return"string"==typeof n.title||null===n.title}function jA(n){return yo(e=>{const t=n(e);return t?cr(t).pipe(gt(()=>e)):Dt(e)})}const yg=new it("ROUTES");let WA=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=th(t.loadComponent()).pipe(gt(Z5),Mr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Nw(()=>{this.componentLoaders.delete(t)})),r=new su(i,()=>new ln).pipe(dc());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Dt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(gt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,d,p=!1;Array.isArray(a)?d=a:(c=a.create(t).injector,d=r5(c.get(yg,[],Jt.Self|Jt.Optional)));return{routes:d.map(HA),injector:c}}),Nw(()=>{this.childrenLoaders.delete(i)})),o=new su(s,()=>new ln).pipe(dc());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return th(t()).pipe(gt(Z5),lr(r=>r instanceof TP||Array.isArray(r)?Dt(r):cr(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(Me(ms),Me(vk))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z5(n){return function Kee(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let CS=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ln,this.configLoader=dn(WA),this.environmentInjector=dn(Jo),this.urlSerializer=dn(Z_),this.rootContexts=dn(iy),this.navigationId=0,this.afterPreactivation=()=>Dt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new kQ(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new PQ(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Zi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ty,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(nr(i=>0!==i.id),gt(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),yo(i=>{let r=!1,s=!1;return Dt(i).pipe(Mr(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),yo(o=>{const a=t.browserUrlTree.toString(),c=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!c&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const p="";return this.events.next(new gS(o.id,t.serializeUrl(i.rawUrl),p,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),Fc}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return J5(o.source)&&(t.browserUrlTree=o.extractedUrl),Dt(o).pipe(yo(p=>{const g=this.transitions?.getValue();return this.events.next(new IA(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?Fc:Promise.resolve(p)}),function Ree(n,e,t,i){return yo(r=>function Iee(n,e,t,i,r){return new Fee(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(gt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Mr(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},i.urlAfterRedirects=p.urlAfterRedirects}),function Uee(n,e,t,i,r){return lr(s=>function Oee(n,e,t,i,r,s,o="emptyOnly"){return new Lee(n,e,t,i,r,o,s).recognize().pipe(yo(a=>null===a?function kee(n){return new an(e=>e.error(n))}(new Pee):Dt(a)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(gt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Mr(p=>{if(i.targetSnapshot=p.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!p.extras.skipLocationChange){const _=t.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);t.setBrowserUrl(_,p)}t.browserUrlTree=p.urlAfterRedirects}const g=new TQ(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(c&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:p,extractedUrl:g,source:_,restoredState:y,extras:x}=o,T=new IA(p,this.urlSerializer.serialize(g),_,y);this.events.next(T);const N=M5(g,this.rootComponentType).snapshot;return Dt(i={...o,targetSnapshot:N,urlAfterRedirects:g,extras:{...x,skipLocationChange:!1,replaceUrl:!1}})}{const p="";return this.events.next(new gS(o.id,t.serializeUrl(i.extractedUrl),p,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),Fc}}),Mr(o=>{const a=new AQ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),gt(o=>i={...o,guards:iee(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function pee(n,e){return lr(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Dt({...t,guardsResult:!0}):function mee(n,e,t,i){return cr(n).pipe(lr(r=>function xee(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Dt(s.map(a=>{const c=ry(e)??r,d=vg(a,c);return th(function dee(n){return n&&ay(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,i):c.runInContext(()=>d(n,e,t,i))).pipe(hl())})).pipe(_g()):Dt(!0)}(r.component,r.route,t,e,i)),hl(r=>!0!==r,!0))}(o,i,r,n).pipe(lr(a=>a&&function aee(n){return"boolean"==typeof n}(a)?function gee(n,e,t,i){return cr(e).pipe(Wd(r=>yw(function _ee(n,e){return null!==n&&e&&e(new OQ(n)),Dt(!0)}(r.route.parent,i),function vee(n,e){return null!==n&&e&&e(new NQ(n)),Dt(!0)}(r.route,i),function bee(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function ree(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>V_(()=>Dt(o.guards.map(c=>{const d=ry(o.node)??t,p=vg(c,d);return th(function uee(n){return n&&ay(n.canActivateChild)}(p)?p.canActivateChild(i,n):d.runInContext(()=>p(i,n))).pipe(hl())})).pipe(_g())));return Dt(s).pipe(_g())}(n,r.path,t),function yee(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Dt(!0);const r=i.map(s=>V_(()=>{const o=ry(e)??t,a=vg(s,o);return th(function lee(n){return n&&ay(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(hl())}));return Dt(r).pipe(_g())}(n,r.route,t))),hl(r=>!0!==r,!0))}(i,s,n,e):Dt(a)),gt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Mr(o=>{if(i.guardsResult=o.guardsResult,Gf(o.guardsResult))throw A5(0,o.guardsResult);const a=new IQ(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),nr(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),jA(o=>{if(o.guards.canActivateChecks.length)return Dt(o).pipe(Mr(a=>{const c=new FQ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),yo(a=>{let c=!1;return Dt(a).pipe(function zee(n,e){return lr(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Dt(t);let s=0;return cr(r).pipe(Wd(o=>function Gee(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Y5(r)&&(s[Y_]=r.title),function jee(n,e,t,i){const r=function Wee(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Dt({});const s={};return cr(r).pipe(lr(o=>function $ee(n,e,t,i){const r=ry(e)??i,s=vg(n,r);return th(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(hl(),Mr(a=>{s[o]=a}))),SA(1),function eQ(n){return e=>e.lift(new tQ(n))}(s),ra(o=>UA(o)?Fc:Pc(o)))}(s,n,e,i).pipe(gt(o=>(n._resolvedData=o,n.data=C5(n,t).resolve,r&&Y5(r)&&(n.data[Y_]=r.title),null)))}(o.route,i,n,e)),Mr(()=>s++),SA(1),lr(o=>s===r.length?Dt(t):Fc))})}(t.paramsInheritanceStrategy,this.environmentInjector),Mr({next:()=>c=!0,complete:()=>{c||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Mr(a=>{const c=new RQ(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),jA(o=>{const a=c=>{const d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Mr(p=>{c.component=p}),gt(()=>{})));for(const p of c.children)d.push(...a(p));return d};return _w(a(o.targetSnapshot.root)).pipe(sS(),Vs(1))}),jA(()=>this.afterPreactivation()),gt(o=>{const a=function $Q(n,e,t){const i=ny(n,e._root,t?t._root:void 0);return new E5(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),Mr(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>gt(i=>(new nee(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Mr({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new jf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Nw(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ra(o=>{if(s=!0,R5(o)){F5(o)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new mS(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),F5(o)){const c=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||J5(i.source)};t.scheduleNavigation(c,ty,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new FA(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(o))}catch(c){i.reject(c)}}return Fc}))}))}cancelNavigationTransition(t,i,r){const s=new mS(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function J5(n){return n!==ty}let Q5=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Bn);return i}getResolvedTitleForRoute(t){return t.data[Y_]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(){return dn(Yee)},providedIn:"root"}),n})(),Yee=(()=>{class n extends Q5{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Me(V3))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(){return dn(Jee)},providedIn:"root"}),n})();class Zee{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Jee=(()=>{class n extends Zee{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Ir(n)))(i||n)}}(),n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DS=new it("",{providedIn:"root",factory:()=>({})});let ete=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:function(){return dn(tte)},providedIn:"root"}),n})(),tte=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nte(n){throw n}function ite(n,e,t){return e.parse("/")}const rte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ste={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ec=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=dn(g9),this.isNgZoneEnabled=!1,this.options=dn(DS,{optional:!0})||{},this.errorHandler=this.options.errorHandler||nte,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ite,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=dn(ete),this.routeReuseStrategy=dn(Xee),this.urlCreationStrategy=dn(GQ),this.titleStrategy=dn(Q5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=r5(dn(yg,{optional:!0})??[]),this.navigationTransitions=dn(CS),this.urlSerializer=dn(Z_),this.location=dn(g_),this.isNgZoneEnabled=dn(cn)instanceof cn&&cn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new nh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=M5(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ty,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const c={...r};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(HA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,p,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Gf(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ty,null,i)}navigate(t,i={skipLocationChange:!1}){return function ote(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new He(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...rte}:!1===i?{...ste}:i,Gf(t))return a5(this.currentUrlTree,t,r);const s=this.parseUrl(t);return a5(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d,p;return o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,c=_}),p="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:p,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class e8{}let lte=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(nr(t=>t instanceof jf),Wd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=S1(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return cr(r).pipe(wl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Dt(null);const s=r.pipe(lr(o=>null===o?Dt(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?cr([s,this.loader.loadComponent(i)]).pipe(wl()):s})}}return n.\u0275fac=function(t){return new(t||n)(Me(ec),Me(vk),Me(Jo),Me(e8),Me(WA))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const KA=new it("");let t8=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof IA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof w5&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new w5(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){Hl()},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();var tc=(()=>((tc=tc||{})[tc.COMPLETE=0]="COMPLETE",tc[tc.FAILED=1]="FAILED",tc[tc.REDIRECTING=2]="REDIRECTING",tc))();const bg=!1;function ih(n,e){return{\u0275kind:n,\u0275providers:e}}const YA=new it("",{providedIn:"root",factory:()=>!1});function i8(){const n=dn(ms);return e=>{const t=n.get(Xm);if(e!==t.components[0])return;const i=n.get(ec),r=n.get(r8);1===n.get(XA)&&i.initialNavigation(),n.get(s8,null,Jt.Optional)?.setUpPreloading(),n.get(KA,null,Jt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const r8=new it(bg?"bootstrap done indicator":"",{factory:()=>new ln}),XA=new it(bg?"initial navigation":"",{providedIn:"root",factory:()=>1});function pte(){let n=[];return n=bg?[{provide:gm,multi:!0,useFactory:()=>{const e=dn(ec);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function VQ(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ih(1,n)}const s8=new it(bg?"router preloader":"");function mte(n){return ih(0,[{provide:s8,useExisting:lte},{provide:e8,useExisting:n}])}const ly=!1,o8=new it(ly?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),gte=[g_,{provide:Z_,useClass:EA},ec,iy,{provide:Wf,useFactory:function n8(n){return n.routerState.root},deps:[ec]},WA,ly?{provide:YA,useValue:!0}:[]];function vte(){return new Ek("Router",ec)}let a8=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[gte,ly&&i?.enableTracing?pte().\u0275providers:[],{provide:yg,multi:!0,useValue:t},{provide:o8,useFactory:xte,deps:[[ec,new pa,new Fl]]},{provide:DS,useValue:i||{}},i?.useHash?{provide:Cf,useClass:i7}:{provide:Cf,useClass:qk},{provide:KA,useFactory:()=>{const n=dn(vz),e=dn(cn),t=dn(DS),i=dn(CS),r=dn(Z_);return t.scrollOffset&&n.setOffset(t.scrollOffset),new t8(r,i,n,e,t)}},i?.preloadingStrategy?mte(i.preloadingStrategy).\u0275providers:[],{provide:Ek,multi:!0,useFactory:vte},i?.initialNavigation?wte(i):[],[{provide:c8,useFactory:i8},{provide:gk,multi:!0,useExisting:c8}]]}}static forChild(t){return{ngModule:n,providers:[{provide:yg,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(Me(o8,8))},n.\u0275mod=Mt({type:n}),n.\u0275inj=Wn({imports:[BA]}),n})();function xte(n){if(ly&&n)throw new He(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function wte(n){return["disabled"===n.initialNavigation?ih(3,[{provide:D1,multi:!0,useFactory:()=>{const e=dn(ec);return()=>{e.setUpLocationChangeListener()}}},{provide:XA,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ih(2,[{provide:XA,useValue:0},{provide:D1,multi:!0,deps:[ms],useFactory:e=>{const t=e.get(t7,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(ec),s=e.get(r8);(function ute(n,e){n.events.pipe(nr(t=>t instanceof jf||t instanceof mS||t instanceof FA||t instanceof gS),gt(t=>t instanceof jf||t instanceof gS?tc.COMPLETE:t instanceof mS&&(0===t.code||1===t.code)?tc.REDIRECTING:tc.FAILED),nr(t=>t!==tc.REDIRECTING),Vs(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(CS).afterPreactivation=()=>(i(!0),s.closed?Dt(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const c8=new it(ly?"Router Initializer":"");class Uu{constructor(e,t,i){this.document=e,this.oAuthService=t,this.route=i,this.hasValidAccessToken$=new Zi(!1),this.oAuthService.setStorage(new Vu),this.oAuthService.configure({issuer:"https://www.bungie.net/en/OAuth/Authorize",loginUrl:"https://www.bungie.net/en/OAuth/Authorize",tokenEndpoint:"https://www.bungie.net/Platform/App/OAuth/token/",redirectUri:K__bungie_redirect,clientId:K__bungie_clientId,responseType:"code",scope:""}),this.oAuthService.tokenValidationHandler=new YJ,this.tryLogin()}tryLogin(){var e=this;return ul(function*(){e.route.queryParams.subscribe(function(){var t=ul(function*(i){i.state&&i.state===localStorage.getItem("bungie-nonce")&&(yield e.oAuthService.tryLoginCodeFlow()),e.oAuthService.hasValidAccessToken()&&(e.oAuthService.setupAutomaticSilentRefresh(),e.hasValidAccessToken$.next(!0))});return function(i){return t.apply(this,arguments)}}())})()}login(){var e=this;return ul(function*(){yield e.oAuthService.createAndSaveNonce(),e.document.location.href=`https://www.bungie.net/en/OAuth/Authorize?response_type=code&client_id=${K__bungie_clientId}&state=${localStorage.getItem("bungie-nonce")}`})()}logout(){this.oAuthService.logOut(),this.hasValidAccessToken$.next(!1)}}function Ete(n,e){if(1&n){const t=xf();Oe(0,"button",9),ni("click",function(){return P(t),V(wn().login())}),et(1," Login with Bungie "),Oe(2,"mat-icon",10),et(3,"login"),Ne()()}}function Mte(n,e){if(1&n){const t=xf();Oe(0,"button",11),ni("click",function(){return P(t),V(wn().logout())}),et(1," Logout "),Oe(2,"mat-icon",12),et(3,"logout"),Ne()()}}Uu.\u0275fac=function(e){return new(e||Uu)(Me(En),Me(e5),Me(Wf))},Uu.\u0275prov=Xe({token:Uu,factory:Uu.\u0275fac,providedIn:"root"});class uy{constructor(e){this.bungieAuth=e,this.calendarChange=new jn}ngOnInit(){this.searchString=""}login(){this.bungieAuth.login()}logout(){this.bungieAuth.logout()}}function dy(n,e,t){return n(t?{method:"GET",url:e,params:t}:{method:"GET",url:e})}uy.\u0275fac=function(e){return new(e||uy)(ae(Uu))},uy.\u0275cmp=ai({type:uy,selectors:[["app-nav"]],inputs:{calendar:"calendar"},outputs:{calendarChange:"calendarChange"},decls:18,vars:6,consts:[[1,"mat-headline-5","headline"],["mat-raised-button","","href","https://chrisfried.github.io/secret-scrubland/",1,"switch-game"],[2,"margin-bottom","1em"],["mat-raised-button","","color","primary","class","button",3,"click",4,"ngIf"],["mat-raised-button","","class","button",3,"click",4,"ngIf"],[1,"mat-body-2"],["name","calendar","aria-label","Calendar"],["value","gregorian",3,"click"],["value","bungie",3,"click"],["mat-raised-button","","color","primary",1,"button",3,"click"],["aria-label","Login with Bungie"],["mat-raised-button","",1,"button",3,"click"],["aria-label","Logout"]],template:function(e,t){1&e&&(Oe(0,"span",0),et(1,"Destiny 2 Historical Heatmap"),Ne(),Oe(2,"a",1),et(3,"Switch to Destiny 1"),Ne(),Oe(4,"div",2),Ot(5,Ete,4,0,"button",3),ft(6,"async"),Ot(7,Mte,4,0,"button",4),ft(8,"async"),Ne(),Oe(9,"div",5),et(10," Calendar Type:"),vn(11,"br"),Oe(12,"mat-button-toggle-group",6)(13,"mat-button-toggle",7),ni("click",function(){return t.calendarChange.emit("gregorian")}),et(14,"Gregorian"),Ne(),Oe(15,"mat-button-toggle",8),ni("click",function(){return t.calendarChange.emit("bungie")}),et(16,"Bungie"),Ne()()(),vn(17,"br")),2&e&&(Ge(5),Qe("ngIf",!1===mn(6,2,t.bungieAuth.hasValidAccessToken$)),Ge(2),Qe("ngIf",mn(8,4,t.bungieAuth.hasValidAccessToken$)))},dependencies:[Df,U$,jL,XL,ZL,VT,Tf],styles:[".switch-game[_ngcontent-%COMP%]{margin-bottom:1em}.headline[_ngcontent-%COMP%]{margin-right:1em}"]});const qn="https://www.bungie.net/Platform/Destiny2/";function l8(n,e){return dy(n,`${qn}${e.membershipType}/Profile/${e.destinyMembershipId}/Character/${e.characterId}/`,{components:e.components?e.components.join(","):void 0})}function u8(n,e){return dy(n,`${qn}${e.membershipType}/Account/${e.destinyMembershipId}/Stats/`,{groups:e.groups?e.groups.join(","):void 0})}function d8(n,e){return dy(n,`${qn}${e.membershipType}/Account/${e.destinyMembershipId}/Character/${e.characterId}/Stats/Activities/`,{count:e.count,mode:e.mode,page:e.page})}const zu="https://www.bungie.net/Platform/User/";function h8(n){return dy(n,`${zu}GetMembershipsForCurrentUser/`)}class $f{transform(e,t){let i=0;return e.forEach(r=>{(!t||0===t||"0"===t||t===r.activityDetails.mode||r.activityDetails.modes.indexOf(+t)>-1)&&(i+=r.values.timePlayedSeconds.basic.value)}),i}}$f.\u0275fac=function(e){return new(e||$f)},$f.\u0275pipe=Gi({name:"addTime",type:$f,pure:!1});var Dte=ut(8410);class Tte{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise((i,r)=>{const s=indexedDB.open(e,1);s.onerror=()=>r(s.error),s.onsuccess=()=>i(s.result),s.onupgradeneeded=()=>{s.result.createObjectStore(t)}})}_withIDBStore(e,t){return this._dbp.then(i=>new Promise((r,s)=>{const o=i.transaction(this.storeName,e);o.oncomplete=()=>r(),o.onabort=o.onerror=()=>s(o.error),t(o.objectStore(this.storeName))}))}}let ZA;function hy(){return ZA||(ZA=new Tte),ZA}var Rte=ut(7489),Pte=ut.n(Rte);class rh{constructor(e){this.http=e,this.alwaysLoadRemote=!1,this.version=null,this.state={loaded:!1},this.state$=new Zi(this.state),this.newManifest$=new ln,this.localStorageKey="d2-manifest-version",this.idbKey="d2-manifest";const t=["Activity","ActivityMode"];cr(function Cte(n){return dy(n,`${qn}Manifest/`)}(i=>this.http.request(i.method,i.url,{params:i.params,body:i.body}).toPromise())).pipe(yo(i=>{const r=i.Response,o=r.jsonWorldContentPaths.en||r.jsonWorldContentPaths.en,a=o;this.version=a;try{if(this.alwaysLoadRemote)throw new Error("Testing - always load remote");const c=localStorage.getItem(this.localStorageKey),d=JSON.parse(localStorage.getItem(this.localStorageKey+"-whitelist")||"[]");if(c===a&&(0,Dte.deepEqual)(d,t)){const p=function Ate(n,e=hy()){let t;return e._withIDBStore("readonly",i=>{t=i.get(n)}).then(()=>t.result)}(this.idbKey);if(!p)throw new Error("Empty cached manifest file");return p}throw new Error(`version mismatch: ${a} ${c}`)}catch{return this.http.get(`https://www.bungie.net${o}`,{withCredentials:!1}).pipe(gt(d=>{const p=Pte().pick(d,...t.map(g=>`Destiny${g}Definition`));return this.saveManifestToIndexedDB(p,a,t),this.newManifest$.next(),p}))}}),gt(i=>{if(!i.DestinyActivityDefinition)throw new Error("Manifest corrupted, please reload");this.defs={},t.forEach(r=>{const s=`Destiny${r}Definition`;this.defs[r]="ActivityMode"===r?{get(o){const a=i[s];if(!a)throw new Error(`Table ${s} does not exist in the manifest`);for(const c in a)if(a[c].modeType===o)return a[c];throw new Error(`ModeType ${o} does not exist in the manifest`)},dbTable:i[s]}:{get(o){const a=i[s];if(!a)throw new Error(`Table ${s} does not exist in the manifest`);return a[o]},dbTable:i[s]}}),this.loaded=!0}),ra((i,r)=>(console.error(i.message||i),i instanceof TypeError||-1===i.status||503===i.status||522===i.status||i.status<200||i.status>=400||this.deleteManifestFile(),Fc))).subscribe()}set loaded(e){this.setState({loaded:e,error:void 0})}set statusText(e){this.setState({statusText:e})}saveManifestToIndexedDB(e,t,i){var r=this;return ul(function*(){try{yield function Ite(n,e,t=hy()){return t._withIDBStore("readwrite",i=>{i.put(e,n)})}(r.idbKey,e),localStorage.setItem(r.localStorageKey,t),localStorage.setItem(r.localStorageKey+"-whitelist",JSON.stringify(i))}catch(s){console.error("Error saving manifest file",s)}})()}deleteManifestFile(){localStorage.removeItem(this.localStorageKey),function Fte(n,e=hy()){e._withIDBStore("readwrite",t=>{t.delete(n)})}(this.idbKey)}setState(e){this.state={...this.state,...e},this.state$.next(this.state)}}rh.\u0275fac=function(e){return new(e||rh)(Me($d))},rh.\u0275prov=Xe({token:rh,factory:rh.\u0275fac,providedIn:"root"});class qf{constructor(e){this.manifestService=e}transform(e,t){return this.manifestService.state$.pipe(gt(i=>{if(i.loaded)switch(t){case"activityName":return this.manifestService.defs.Activity.get(e)?.displayProperties.name;case"activityMode":return this.manifestService.defs.ActivityMode.get(e)?.displayProperties.name;case"activityIcon":return this.manifestService.defs.Activity.get(e)?.displayProperties.hasIcon?`https://bungie.net${this.manifestService.defs.Activity.get(e).displayProperties.icon}`:"";case"activityModeIcon":return this.manifestService.defs.ActivityMode.get(e)?.displayProperties.hasIcon?`https://bungie.net${this.manifestService.defs.ActivityMode.get(e).displayProperties.icon}`:"";default:return""}}))}}qf.\u0275fac=function(e){return new(e||qf)(ae(rh,16))},qf.\u0275pipe=Gi({name:"manifest",type:qf,pure:!0});class Kf{transform(e,t){switch(t){case"class":switch(e){case"2017-9-6":case"2017-09-06":case"2017-10-24":case"2017-12-5":case"2017-12-05":case"2018-5-8":case"2018-05-08":case"2018-9-4":case"2018-09-04":case"2018-12-4":case"2018-12-04":case"2019-3-5":case"2019-03-05":case"2019-6-4":case"2019-06-04":case"2019-10-1":case"2019-10-01":case"2019-12-10":case"2020-3-10":case"2020-03-10":case"2020-6-9":case"2020-06-09":case"2020-11-10":case"2021-2-9":case"2021-02-09":case"2021-5-11":case"2021-05-11":case"2021-8-24":case"2021-08-24":case"2021-12-7":case"2021-12-07":case"2022-2-22":case"2022-02-22":case"2022-5-24":case"2022-05-24":case"2022-8-23":case"2022-08-23":case"2022-12-6":case"2022-12-06":case"2023-2-28":case"2023-02-28":return"release";case"2017-9-13":case"2017-09-13":case"2017-12-6":case"2017-12-06":case"2018-5-11":case"2018-05-11":case"2018-9-14":case"2018-09-14":case"2018-12-7":case"2018-12-07":case"2019-6-4":case"2019-06-04":case"2019-10-5":case"2019-10-05":case"2020-11-21":case"2021-5-22":case"2021-05-22":case"2022-3-5":case"2022-03-05":case"2022-8-26":case"2022-08-26":case"2023-3-10":case"2023-03-10":return"raid";case"2017-12-19":case"2018-2-13":case"2018-02-13":case"2018-7-8":case"2018-07-08":case"2018-7-20":case"2018-07-20":case"2018-7-31":case"2018-07-31":case"2018-9-25":case"2018-09-25":case"2018-10-16":case"2018-12-4":case"2018-12-04":case"2018-12-7":case"2018-12-07":case"2018-12-11":case"2018-12-18":case"2019-1-8":case"2019-01-08":case"2019-1-29":case"2019-01-29":case"2019-2-5":case"2019-02-05":case"2019-3-5":case"2019-03-05":case"2019-3-8":case"2019-03-08":case"2019-3-12":case"2019-03-12":case"2019-3-15":case"2019-03-15":case"2019-3-19":case"2019-03-19":case"2019-3-26":case"2019-03-26":case"2019-4-2":case"2019-04-02":case"2019-4-9":case"2019-04-09":case"2019-4-16":case"2019-04-16":case"2019-6-4":case"2019-06-04":case"2019-6-11":case"2019-06-11":case"2019-6-18":case"2019-06-18":case"2019-6-25":case"2019-06-25":case"2019-7-2":case"2019-07-02":case"2019-7-9":case"2019-07-09":case"2019-7-30":case"2019-07-30":case"2019-10-5":case"2019-10-05":case"2019-10-22":case"2019-10-29":case"2019-11-19":case"2019-12-17":case"2020-1-7":case"2020-01-07":case"2020-1-28":case"2020-01-28":case"2020-2-4":case"2020-02-04":case"2020-2-11":case"2020-02-11":case"2020-3-13":case"2020-03-13":case"2020-3-17":case"2020-03-17":case"2020-3-24":case"2020-03-24":case"2020-4-7":case"2020-04-07":case"2020-4-21":case"2020-04-21":case"2020-6-6":case"2020-06-06":case"2020-7-7":case"2020-07-07":case"2020-8-11":case"2020-08-11":case"2020-9-8":case"2020-09-08":case"2020-10-6":case"2020-10-06":case"2020-11-9":case"2020-11-09":case"2020-11-17":case"2020-12-15":case"2021-2-16":case"2021-02-16":case"2021-2-23":case"2021-02-23":case"2021-3-23":case"2021-03-23":case"2021-4-20":case"2021-04-20":case"2021-5-7":case"2021-05-07":case"2021-5-18":case"2021-05-18":case"2021-5-25":case"2021-05-25":case"2021-6-1":case"2021-06-01":case"2021-6-8":case"2021-06-08":case"2021-6-29":case"2021-06-29":case"2021-7-6":case"2021-07-06":case"2021-8-10":case"2021-08-10":case"2021-8-31":case"2021-08-31":case"2021-9-7":case"2021-09-07":case"2021-10-12":case"2021-12-14":case"2022-2-15":case"2022-02-15":case"2022-3-1":case"2022-03-01":case"2022-3-22":case"2022-03-22":case"2022-5-3":case"2022-05-03":case"2022-5-27":case"2022-05-27":case"2022-5-31":case"2022-05-31":case"2022-7-12":case"2022-07-12":case"2022-7-19":case"2022-07-19":case"2022-9-6":case"2022-09-06":case"2022-11-15":case"2022-10-18":case"2022-12-9":case"2022-12-09":case"2022-12-13":case"2023-1-3":case"2023-01-03":case"2023-1-31":case"2023-01-31":case"2023-3-14":case"2023-03-14":case"2023-4-4":case"2023-04-04":case"2023-4-25":case"2023-04-25":case"2023-5-2":case"2023-05-02":return"event";default:return""}case"text":switch(e){case"2017-9-6":case"2017-09-06":return" | Destiny 2 Console";case"2017-9-13":case"2017-09-13":return" | Leviathan Raid";case"2017-10-24":return" | Destiny 2 PC";case"2017-12-5":case"2017-12-05":return" | Launch: Curse of Osiris";case"2017-12-6":case"2017-12-06":return" | Eater of Worlds Raid Lair";case"2017-12-19":case"2018-12-11":case"2019-12-17":case"2020-12-15":case"2021-12-14":case"2022-12-13":return" | The Dawning";case"2018-2-13":case"2018-02-13":case"2019-2-5":case"2019-02-05":case"2020-2-11":case"2020-02-11":return" | Crimson Days";case"2018-5-8":case"2018-05-08":return" | Launch: Warmind";case"2018-5-11":case"2018-05-11":return" | Spire of Stars Raid Lair";case"2018-7-8":case"2018-07-08":return" | Moments of Triumph";case"2018-7-20":case"2018-07-20":return" | The Whisper";case"2018-7-31":case"2018-07-31":case"2019-7-30":case"2019-07-30":case"2020-8-11":case"2020-08-11":case"2021-7-6":case"2021-07-06":return" | Solstice of Heroes";case"2018-9-4":case"2018-09-04":return" | Launch: Forsaken | Season of the Outlaw";case"2018-9-14":case"2018-09-14":return" | Last Wish Raid";case"2018-9-25":case"2018-09-25":return" | Shattered Throne Dungeon";case"2018-10-16":case"2020-10-6":case"2020-10-06":case"2021-10-12":case"2022-10-18":return" | Festival of the Lost";case"2018-12-4":case"2018-12-04":return" | Season of the Forge | Volundr Forge";case"2018-12-7":case"2018-12-07":return" | Scourge of the Past Raid | Gofannon Forge";case"2018-12-18":return" | Izanami Forge";case"2019-1-8":case"2019-01-08":return" | Niobe Labs";case"2019-1-29":case"2019-01-29":return" | Exotic Quest: The Last Word";case"2019-3-5":case"2019-03-05":return" | Season of the Drifter | Gambit Prime: New Arcadia & Reckoning Tier 1";case"2019-3-8":case"2019-03-08":return" | Reckoning Tier 2";case"2019-3-12":case"2019-03-12":return" | Gambit Prime: Deep Six | Exotic Quest: Thorn";case"2019-3-15":case"2019-03-15":return" | Invitations of the Nine | Reckoning Tier 3";case"2019-3-19":case"2019-03-19":return" | Gambit Prime: Legion's Folly";case"2019-3-26":case"2019-03-26":return" | Gambit Prime: Emerald Coast";case"2019-4-2":case"2019-04-02":return" | Gambit Prime: All Maps";case"2019-4-9":case"2019-04-09":return" | Arc Week";case"2019-4-16":case"2019-04-16":return" | The Revelry";case"2019-6-4":case"2019-06-04":return" | Season of Opulence | Menagerie & Crown of Sorrow Raid";case"2019-6-11":case"2019-06-11":return" | New Menagerie Boss | Exotic Quest: Truth";case"2019-6-18":case"2019-06-18":return" | New Menagerie Boss | Iron Banner Quest";case"2019-6-25":case"2019-06-25":return" | Menagerie Heroic Mode";case"2019-7-2":case"2019-07-02":return" | Exotic Quest: Lumina";case"2019-7-9":case"2019-07-09":return" | Tribute Hall | Moments of Triumph";case"2019-10-1":case"2019-10-01":return" | Launch: Shadowkeep | Season of Undying";case"2019-10-5":case"2019-10-05":return" | Garden of Salvation Raid | Vex Offensive";case"2019-10-22":return" | Exotic Quest: Leviathan's Breath | Master Nightmare Hunts";case"2019-10-29":return" | Festival of the Lost | Pit of Heresy Dungeon | Exotic Quest: Xenophage";case"2019-11-19":return" | Vex Offensive: Final Assault";case"2019-12-10":return" | Season of Dawn";case"2020-1-7":case"2020-01-07":return" | Exotic Quest: Devil's Ruin";case"2020-1-28":case"2020-01-28":return" | Exotic Quest: Bastion";case"2020-2-4":case"2020-02-04":return" | Empyrean Foundation";case"2020-3-10":case"2020-03-10":return" | Season of the Worthy | Seraph Bunker: EDZ";case"2020-3-13":case"2020-03-13":return" | Trials of Osiris Returns";case"2020-3-17":case"2020-03-17":return" | Exotic Quest: The Fourth Horseman";case"2020-3-24":case"2020-03-24":return" | Seraph Bunker: Moon";case"2020-4-7":case"2020-04-07":return" | Seraph Bunker: Io";case"2020-4-21":case"2020-04-21":return" | Guardian Games | Grandmaster Nightfalls";case"2020-6-6":case"2020-06-06":return" | Live Event: Almighty's Destruction";case"2020-6-9":case"2020-06-09":return" | Season of Arrivals | Contact Event: Io | Prophecy Dungeon";case"2020-7-7":case"2020-07-07":return" | Moments of Triumph | Exotic Quest: Ruinous Effigy | Contact Event: Titan";case"2020-9-8":case"2020-09-08":return" | Exotic Quest: Traveler's Chosen";case"2020-11-9":case"2020-11-09":return" | Live Event: Traveler Reforged";case"2020-11-10":return" | Launch: Beyond Light | Season of the Hunt";case"2020-11-17":return" | Wrathborn Hunts";case"2020-11-21":return" | Deep Stone Crypt Raid";case"2021-2-9":case"2021-02-09":return" | Season of the Chosen | H.E.L.M. Opens | Behemoth & Hailstone Battlegrounds";case"2021-2-16":case"2021-02-16":return" | Foothold Battleground | Exotic Quest: Presage";case"2021-2-23":case"2021-02-23":return" | Oracle Battleground";case"2021-3-23":case"2021-03-23":return" | Proving Grounds Strike";case"2021-4-20":case"2021-04-20":case"2022-5-3":case"2022-05-03":case"2023-5-2":case"2023-05-02":return" | Guardian Games";case"2021-5-7":case"2021-05-07":return" | Guardian Games Closing Ceremony";case"2021-5-11":case"2021-05-11":return" | Season of the Splicer | Override: Europa";case"2021-5-18":case"2021-05-18":return" | Override: Moon";case"2021-5-22":case"2021-05-22":return" | Vault of Glass Raid";case"2021-5-25":case"2021-05-25":return" | Override: Tangled Shore | Expunge: Labyrinth";case"2021-6-1":case"2021-06-01":return" | Expunge: Styx";case"2021-6-8":case"2021-06-08":return" | Expunge: Tartarus";case"2021-6-29":case"2021-06-29":return" | Expunge: Delphi";case"2021-8-10":case"2021-08-10":return" | Season of the Splicer Epilogue";case"2021-8-24":case"2021-08-24":return" | Season of the Lost | Exotic Quest: Ager's Scepter | Shattered Realm: Forest of Echoes";case"2021-8-31":case"2021-08-31":return" | Shattered Realm: Debris of Dreams";case"2021-9-7":case"2021-09-07":return" | Shattered Realm: Ruins of Wrath";case"2021-12-7":case"2021-12-07":return" | Bungie 30th Anniversary | Grasp of Avarice Dungeon | Moments of Triumph | Exotic Quest: Gjallarhorn";case"2022-2-15":case"2022-02-15":return" | The Exorcism";case"2022-2-22":case"2022-02-22":return" | Launch: The Witch Queen | Season of the Risen | Exotic Quest: Dead Messenger | PsiOps Battleground: EDZ";case"2022-3-1":case"2022-03-01":return" | PsiOps Battleground: Cosmodrome";case"2022-3-5":case"2022-03-05":return" | Vow of the Disciple Raid";case"2022-3-22":case"2022-03-22":return" | PsiOps Battleground: Moon";case"2022-5-24":case"2022-05-24":return" | Season of the Haunted";case"2022-5-27":case"2022-05-27":return" | Duality Dungeon";case"2022-5-31":case"2022-05-31":case"2022-7-12":case"2022-07-12":case"2022-9-6":case"2022-09-06":case"2022-11-15":case"2023-1-3":case"2023-01-03":case"2023-1-31":case"2023-01-31":case"2023-3-14":case"2023-03-14":case"2023-4-4":case"2023-04-04":case"2023-4-25":case"2023-04-25":return" | Iron Banner";case"2022-7-19":case"2022-07-19":return" | Solstice";case"2022-8-23":case"2022-08-23":return" | Season of Plunder";case"2022-8-26":case"2022-08-26":return" | King's Fall Raid";case"2022-11-27":return" | Eliksni Quarter Community Event";case"2022-12-6":case"2022-12-06":return" | Season of the Seraph | Moments of Triumph";case"2022-12-9":case"2022-12-09":return" | Spire of the Watcher Dungeon";case"2022-12-20":return" | Exotic Quest: Revision Zero";case"2023-2-28":case"2023-02-28":return" | Launch: Lightfall | Season of Defiance";case"2023-03-10":case"2023-3-10":return" | Root of Nightmares Raid";default:return""}case"icon":let i="icon ";switch(e){case"2017-9-6":case"2017-09-06":case"2017-10-24":return i+="red-war";case"2017-12-5":case"2017-12-05":return i+="curse-of-osiris";case"2017-12-19":case"2018-12-11":case"2019-12-17":case"2020-12-15":case"2021-12-14":case"2022-12-13":return i+="dawning";case"2018-2-13":case"2018-02-13":case"2019-2-5":case"2019-02-05":case"2020-2-11":case"2020-02-11":return i+="crimson-days";case"2018-5-8":case"2018-05-08":return i+="warmind";case"2018-7-8":case"2018-07-08":case"2019-7-9":case"2019-07-09":case"2020-7-7":case"2020-07-07":return i+="moments-of-triumph";case"2018-7-31":case"2018-07-31":case"2019-7-30":case"2019-07-30":case"2020-8-11":case"2020-08-11":case"2021-7-6":case"2021-07-06":return i+="solstice";case"2018-9-4":case"2018-09-04":return i+="forsaken";case"2018-10-16":case"2019-10-29":case"2020-10-6":case"2020-10-06":case"2021-10-12":case"2022-10-18":return i+="festival-of-the-lost";case"2018-12-4":case"2018-12-04":return i+="season-of-the-forge";case"2019-3-5":case"2019-03-05":return i+="season-of-the-drifter";case"2019-4-16":case"2019-04-16":return i+="revelry";case"2019-6-4":case"2019-06-04":return i+="season-of-opulence";case"2019-10-1":case"2019-10-01":return i+="shadowkeep";case"2019-10-5":case"2019-10-05":return i+="season-of-the-undying";case"2019-12-10":return i+="season-of-dawn";case"2020-3-10":case"2020-03-10":return i+="season-of-the-worthy";case"2020-4-21":case"2020-04-21":case"2021-4-20":case"2021-04-20":case"2022-5-3":case"2022-05-03":case"2023-5-2":case"2023-05-02":return i+="guardian-games";case"2020-6-9":case"2020-06-09":return i+="season-of-arrivals";case"2020-11-10":return i+="beyond-light";case"2020-11-17":return i+="season-of-the-hunt";case"2021-2-9":case"2021-02-09":return i+="season-of-the-chosen";case"2021-5-11":case"2021-05-11":return i+="season-of-the-splicer";case"2021-8-24":case"2021-08-24":return i+="season-of-the-lost";case"2021-12-7":case"2021-12-07":return i+="thirtieth-anniversary";case"2022-2-22":case"2022-02-22":return i+="witch-queen";case"2022-5-24":case"2022-05-24":return i+="season-of-the-haunted";case"2022-5-31":case"2022-05-31":case"2022-7-12":case"2022-07-12":case"2022-9-6":case"2022-09-06":case"2022-11-15":case"2023-1-3":case"2023-01-03":case"2023-1-31":case"2023-01-31":case"2023-3-14":case"2023-03-14":case"2023-4-4":case"2023-04-04":case"2023-4-25":case"2023-04-25":return i+="iron-banner";case"2022-7-19":case"2022-07-19":return i+="solstice2022";case"2017-9-13":case"2017-09-13":case"2017-12-6":case"2017-12-06":case"2018-5-11":case"2018-05-11":case"2018-9-14":case"2018-09-14":case"2018-12-7":case"2018-12-07":case"2020-11-21":case"2021-5-22":case"2021-05-22":case"2022-3-5":case"2022-03-05":case"2022-8-26":case"2022-08-26":case"2023-3-10":case"2023-03-10":return i+="raid";case"2022-8-23":case"2022-08-23":return i+="season-of-plunder";case"2018-9-25":case"2018-09-25":case"2022-5-27":case"2022-05-27":case"2022-12-9":case"2022-12-09":return i+="dungeon";case"2022-12-6":case"2022-12-06":return i+="season-of-the-seraph";case"2023-2-28":case"2023-02-28":return i+="lightfall";default:return""}default:return""}}}Kf.\u0275fac=function(e){return new(e||Kf)},Kf.\u0275pipe=Gi({name:"milestone",type:Kf,pure:!0});const kte=function(n){return{top:n}};function Ote(n,e){if(1&n&&(Oe(0,"div",4)(1,"span",5),et(2),Ne()()),2&n){const t=e.$implicit,i=wn();Qe("ngStyle",Ud(2,kte,i.gameHours[t].offset+"px")),Ge(2),$i(i.gameHours[t].display)}}const Lte=function(n,e){return{height:n,top:e}};function Nte(n,e){if(1&n&&(vn(0,"a",6),ft(1,"async"),ft(2,"manifest"),ft(3,"async"),ft(4,"manifest")),2&n){const t=e.$implicit,i=wn();Qe("ngClass","mode-"+t.activityDetails.mode)("ngStyle",function LP(n,e,t,i,r){return BP(C(),ee(),n,e,t,i,r)}(14,Lte,(i.Math.floor(t.values.timePlayedSeconds.basic.value/60)||1)+"px",t.offset+"px"))("matTooltip",mn(1,4,xi(2,6,t.activityDetails.mode,"activityMode"))+" | "+mn(3,9,xi(4,11,t.activityDetails.referenceId,"activityName")))("href","https://www.bungie.net/en/PGCR/"+t.activityDetails.instanceId+"?character="+t.characterId,hf)}}const Bte=function(n){return{height:n}};class fy{constructor(e){this.data=e,this.allHours=[],this.gameHours={},this.gameHourKeys=[],this.Math=Math}ngOnInit(){this.dayStart=new Date(this.data.date+"T00:00:00");const e=new Date(this.dayStart.getTime());for(let r=0;r<24;r++){const s=e.getTime(),o=e.toLocaleTimeString(void 0,{hour:"numeric"});e.setHours(r+1);const a=e.getTime();this.allHours.push({id:r,display:o,start:s,stop:a})}for(const r of this.data.activities)for(const s of this.allHours)r.startDate.getTime()<s.stop&&r.endDate.getTime()>=s.start&&(this.gameHours[s.id]=s);let i,t=0;for(const r of Object.keys(this.gameHours))i&&this.gameHours[r].id-i>1&&(t+=10),this.gameHours[r].offset=t,t+=60,i=this.gameHours[r].id,this.modalHeight=t;this.gameHourKeys=Object.keys(this.gameHours);for(const r of this.data.activities)r.offset=this.gameHours[r.startDate.getHours()].offset+r.startDate.getMinutes()}}fy.\u0275fac=function(e){return new(e||fy)(ae(PN))},fy.\u0275cmp=ai({type:fy,selectors:[["app-day-modal"]],decls:9,vars:15,consts:[["mat-dialog-title",""],[1,"timelineBase",3,"ngStyle"],["class","timelineLabels",3,"ngStyle",4,"ngFor","ngForOf"],["class","timelineActivity","matTooltipPosition","after","target","_blank",3,"ngClass","ngStyle","matTooltip","href",4,"ngFor","ngForOf"],[1,"timelineLabels",3,"ngStyle"],[1,"time","mat-caption"],["matTooltipPosition","after","target","_blank",1,"timelineActivity",3,"ngClass","ngStyle","matTooltip","href"]],template:function(e,t){1&e&&(Oe(0,"h2",0),et(1),ft(2,"milestone"),ft(3,"addTime"),ft(4,"addTime"),Ne(),Oe(5,"mat-dialog-content")(6,"div",1),Ot(7,Ote,3,4,"div",2),Ot(8,Nte,5,17,"a",3),Ne()()),2&e&&(Ge(1),vs(" ",t.data.date+xi(2,4,t.data.date,"text")+": "+t.Math.floor(xi(3,7,t.data.activities,"0")/86400*24)+"h "+t.Math.floor(xi(4,10,t.data.activities,"0")%3600/60)+"m","\n"),Ge(5),Qe("ngStyle",Ud(13,Bte,t.modalHeight+"px")),Ge(1),Qe("ngForOf",t.gameHourKeys),Ge(1),Qe("ngForOf",t.data.activities))},dependencies:[Jm,y_,j1,HT,OK,LK,Tf,$f,qf,Kf],styles:[".timelineBase[_ngcontent-%COMP%]{width:59px;display:block;position:relative;margin-left:3em}.timelineLabels[_ngcontent-%COMP%]{display:block;position:absolute;height:59px;width:60px;background-color:#e6e6e6}.timelineLabels[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-left:-3.5em;width:3em;display:block;text-align:right}.timelineActivity[_ngcontent-%COMP%]{display:block;width:60px;position:absolute;left:.5em;background-color:#323296}.mode-42[_ngcontent-%COMP%], .mode-39[_ngcontent-%COMP%], .mode-41[_ngcontent-%COMP%]{background-color:#00ded1}.mode-31[_ngcontent-%COMP%], .mode-5[_ngcontent-%COMP%], .mode-38[_ngcontent-%COMP%], .mode-12[_ngcontent-%COMP%], .mode-37[_ngcontent-%COMP%], .mode-10[_ngcontent-%COMP%]{background-color:#ca1c1b}.mode-45[_ngcontent-%COMP%], .mode-44[_ngcontent-%COMP%], .mode-43[_ngcontent-%COMP%], .mode-19[_ngcontent-%COMP%]{background-color:#485537}.mode-3[_ngcontent-%COMP%], .mode-18[_ngcontent-%COMP%]{background-color:#3d526f}.mode-17[_ngcontent-%COMP%], .mode-16[_ngcontent-%COMP%]{background-color:#1f3043}.mode-2[_ngcontent-%COMP%]{background-color:#ed8129}.mode-40[_ngcontent-%COMP%]{background-color:#fff}.mode-6[_ngcontent-%COMP%]{background-color:#cacaca}.mode-4[_ngcontent-%COMP%]{background-color:#461044}.mode-63[_ngcontent-%COMP%]{background-color:#2b8e69}@media (prefers-color-scheme: dark){.mode-40[_ngcontent-%COMP%]{background-color:#000}.mode-6[_ngcontent-%COMP%]{background-color:#888}}"]});class Yf{constructor(e){this.http=e,this.queue$=new Zi({getGlobalAlerts:[],getDestinyManifest:[],getMembershipDataForCurrentUser:[],getMembershipDataById:[],getProfile:[],getActivityHistory:[],getPostGameCarnageReport:[]}),this.actionPriority=["getGlobalAlerts","getDestinyManifest","getMembershipDataForCurrentUser","getMembershipDataById","getProfile","getActivityHistory","getPostGameCarnageReport"],this.queueCount={getGlobalAlerts:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getDestinyManifest:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getMembershipDataForCurrentUser:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getMembershipDataById:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getProfile:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getActivityHistory:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getPostGameCarnageReport:{queued:0,completed:0,errors:0,percentage:0,color:"primary"}},this.queue$.pipe(P_(40)).subscribe(t=>{for(const i of this.actionPriority){const r=t[i];if("getPostGameCarnageReport"===i&&r.sort((s,o)=>parseInt(o.params.activityId,10)-parseInt(s.params.activityId,10)),r.length){const s=r.shift();this.queue$.next(t),s&&s.actionFunction(o=>this.http.request(o.method,o.url,{params:o.params,body:o.body}).toPromise(),s.params).then(o=>{s.callback(o),this.queueCount[i].completed++,this.updateQueue(this.queueCount[i])}).catch(o=>{s.callback(o),this.queueCount[i].errors++,this.updateQueue(this.queueCount[i])});break}}})}addToQueue(e,t,i,r){this.queue$.pipe(Vs(1)).subscribe(s=>{s[e]=[...s[e],{actionFunction:t,callback:i,params:r}],this.queue$.next(s),this.queueCount[e].queued++,this.updateQueue(this.queueCount[e])})}updateQueue(e){e.percentage=e.queued?(e.completed+e.errors)/e.queued*100:100;let t=!1;for(const i of this.actionPriority)this.queueCount[i].color=t||0===this.queueCount[i].queued||100===this.queueCount[i].percentage?"primary":"accent",this.queueCount[i].percentage>0&&this.queueCount[i].percentage<100&&(t=!0)}}Yf.\u0275fac=function(e){return new(e||Yf)(Me($d))},Yf.\u0275prov=Xe({token:Yf,factory:Yf.\u0275fac,providedIn:"root"});class xg{transform(e,t){const i=e.reduce(function(a,c){return a+ +c.values.timePlayedSeconds.basic.value},0);return Math.floor(i/86400)+"d "+Math.floor(i%86400/3600)+"h "+Math.floor(i%86400%3600/60)+"m"}}xg.\u0275fac=function(e){return new(e||xg)},xg.\u0275pipe=Gi({name:"activitiesTotalTime",type:xg,pure:!1});class wg{transform(e,t){return Math.floor(e/1440)+"d "+Math.floor(e%1440/60)+"h "+Math.floor(e%1440%60)+"m"}}wg.\u0275fac=function(e){return new(e||wg)},wg.\u0275pipe=Gi({name:"parseMinutesPlayed",type:wg,pure:!0});class Sg{transform(e,t){const i=e.reduce(function(s,o){return s+ +o.values.timePlayedSeconds.basic.value},0);return Math.floor(i/3600)+"h"}}Sg.\u0275fac=function(e){return new(e||Sg)},Sg.\u0275pipe=Gi({name:"activitiesTotalHours",type:Sg,pure:!1});class Eg{transform(e,t){return Math.floor(e/60)+"h"}}Eg.\u0275fac=function(e){return new(e||Eg)},Eg.\u0275pipe=Gi({name:"hoursPlayed",type:Eg,pure:!0});class Mg{transform(e,t){return e.some(function(i,r,s){return i.loading})}}Mg.\u0275fac=function(e){return new(e||Mg)},Mg.\u0275pipe=Gi({name:"loadingReduce",type:Mg,pure:!1});class Cg{transform(e,t){let i="inactive",r=1;e[e.length-1].length>0&&(i="active");for(let s=e.length-2;s>-1&&("active"===i&&e[s].length>0||"inactive"===i&&e[s].length<1);s--)r++;return r+" days "+i}}Cg.\u0275fac=function(e){return new(e||Cg)},Cg.\u0275pipe=Gi({name:"currentStreak",type:Cg,pure:!1});class Dg{transform(e,t){let i=0,r=0,s=0,o=0;for(let a=0;a<e.length;a++)e[a].length>0?(r=0,i++,i>s&&(s=i)):s>0&&(i=0,r++,r>o&&(o=r));return s+" days active | "+o+" days inactive"}}function Vte(n,e){if(1&n&&(Oe(0,"mat-card",10)(1,"mat-card-title"),et(2),Ne(),Oe(3,"mat-card-subtitle"),et(4),Ne()()),2&n){const t=wn();Ge(2),$i(t.errorStatus),Ge(2),$i(t.errorMessage)}}function Hte(n,e){1&n&&(Oe(0,"mat-icon",11),et(1,"refresh"),Ne())}function Ute(n,e){if(1&n&&(Oe(0,"mat-option",12),et(1),ft(2,"async"),ft(3,"manifest"),Ne()),2&n){const t=e.$implicit;Qe("value",t),Ge(1),vs("",mn(2,2,xi(3,4,t,"activityMode"))," ")}}Dg.\u0275fac=function(e){return new(e||Dg)},Dg.\u0275pipe=Gi({name:"longestStreaks",type:Dg,pure:!1});const zte=function(n,e,t){return[n,e,t]},Gte=function(n){return{"background-color":n}};function jte(n,e){if(1&n){const t=xf();Oe(0,"div",21),ni("click",function(){const s=P(t).$implicit,o=wn().$implicit,a=wn().$implicit,c=wn();return V(c.openDay(a+"-"+(o<10?"0":"")+o+"-"+(s<10?"0":"")+s,c.days[a][o][s]))}),ft(1,"milestone"),ft(2,"addTime"),ft(3,"milestone"),ft(4,"addTime"),ft(5,"addTime"),ft(6,"addTime"),ft(7,"addTime"),ft(8,"addTime"),ft(9,"milestone"),ft(10,"addTime"),ft(11,"addTime"),Ne()}if(2&n){const t=e.$implicit,i=wn().$implicit,r=wn().$implicit,s=wn();Qe("ngClass",P2(35,zte,xi(1,3,r+"-"+i+"-"+t,"class"),xi(2,6,s.days[r][i][t],s.calendarFilter)>0?"active":"inactive",xi(3,9,r+"-"+i+"-"+t,"icon")))("ngStyle",Ud(39,Gte,"hsl("+(120*(100-xi(4,12,s.days[r][i][t],s.calendarFilter)/864)/50-120)+", "+(xi(5,15,s.days[r][i][t],s.calendarFilter)>0?"100%":"0%")+", "+(xi(6,18,s.days[r][i][t],s.calendarFilter)>0?xi(7,21,s.days[r][i][t],s.calendarFilter)/864>50?100-mn(8,24,s.days[r][i][t])/864+"%":"50%":"90%")+")"))("matTooltip",r+"-"+i+"-"+t+xi(9,26,r+"-"+i+"-"+t,"text")+": "+s.Math.floor(xi(10,29,s.days[r][i][t],s.calendarFilter)/86400*24)+"h "+s.Math.floor(xi(11,32,s.days[r][i][t],s.calendarFilter)%3600/60)+"m")}}const Wte=function(n){return{width:n}},$te=function(n){return{height:n}};function qte(n,e){if(1&n&&(Oe(0,"div",16)(1,"div",17),et(2),Ne(),Oe(3,"div",18),ft(4,"loadingReduce"),vn(5,"div",19),Ot(6,jte,12,41,"div",20),Ne()()),2&n){const t=e.$implicit,i=wn().$implicit,r=wn();Qe("ngStyle",Ud(7,Wte,r.Math.ceil((r.dayKeys[i][t].length+r.monthOffsets[i][t])/7)+"em")),Ge(2),$i(t),Ge(1),Qe("ngClass",mn(4,5,r.loadingArray)?"loading":""),Ge(2),Qe("ngStyle",Ud(9,$te,r.monthOffsets[i][t]+"em")),Ge(1),Qe("ngForOf",r.dayKeys[i][t])}}function Kte(n,e){if(1&n&&(Oe(0,"div",13)(1,"div",14)(2,"span"),et(3),Ne()(),Ot(4,qte,7,11,"div",15),Ne()),2&n){const t=e.$implicit,i=wn();Ge(3),$i(t),Ge(1),Qe("ngForOf",i.monthKeys[t])}}function Yte(n,e){1&n&&(Oe(0,"mat-icon",22),et(1,"refresh"),Ne())}function Xte(n,e){1&n&&(Oe(0,"mat-icon",37),et(1," trending_up "),Ne())}function Zte(n,e){1&n&&(Oe(0,"mat-icon",38),et(1," trending_flat "),Ne())}function Jte(n,e){1&n&&(Oe(0,"mat-icon",39),et(1," trending_down "),Ne())}function Qte(n,e){1&n&&(Oe(0,"mat-icon",37),et(1," trending_up "),Ne())}function ene(n,e){1&n&&(Oe(0,"mat-icon",38),et(1," trending_flat "),Ne())}function tne(n,e){1&n&&(Oe(0,"mat-icon",39),et(1," trending_down "),Ne())}function nne(n,e){if(1&n&&(Oe(0,"div",24),Ot(1,Qte,2,0,"mat-icon",25),Ot(2,ene,2,0,"mat-icon",26),Ot(3,tne,2,0,"mat-icon",27),Oe(4,"div",28)(5,"div",29)(6,"div",30),et(7),ft(8,"async"),ft(9,"manifest"),Ne(),vn(10,"img",41),ft(11,"async"),ft(12,"manifest"),ft(13,"async"),ft(14,"manifest"),Ne(),Oe(15,"div",31)(16,"div",32)(17,"div",33),et(18),Ne(),Oe(19,"div",34),et(20,"13 week avg"),Ne()(),Oe(21,"div",35)(22,"div",33),et(23),Ne(),Oe(24,"div",34),et(25,"52 week avg"),Ne()()()()()),2&n){const t=wn().$implicit,i=wn(2);Ge(1),Qe("ngIf",t.quarter>t.year),Ge(1),Qe("ngIf",t.quarter===t.year),Ge(1),Qe("ngIf",t.quarter<t.year),Ge(4),$i(mn(8,8,xi(9,10,t.mode,"activityMode"))),Ge(3),Qe("src",mn(11,13,xi(12,15,t.mode,"activityModeIcon")),hf)("alt",mn(13,18,xi(14,20,t.mode,"activityMode"))),Ge(8),vs("",t.quarter>60?i.Math.floor(t.quarter/60)+"h"+t.quarter%60:t.quarter,"m/week"),Ge(5),vs("",t.year>60?i.Math.floor(t.year/60)+"h"+t.year%60:t.year,"m/week")}}function ine(n,e){if(1&n&&(e_(0),Ot(1,nne,26,23,"div",40),t_()),2&n){const t=e.$implicit;Ge(1),Qe("ngIf",t.quarter>0||t.year>0)}}function rne(n,e){if(1&n&&(Oe(0,"div",23)(1,"div",24),Ot(2,Xte,2,0,"mat-icon",25),ft(3,"loadingReduce"),Ot(4,Zte,2,0,"mat-icon",26),ft(5,"loadingReduce"),Ot(6,Jte,2,0,"mat-icon",27),ft(7,"loadingReduce"),Oe(8,"div",28)(9,"div",29)(10,"div",30),et(11,"All Activities"),Ne()(),Oe(12,"div",31)(13,"div",32)(14,"div",33),et(15),Ne(),Oe(16,"div",34),et(17,"13 week avg"),Ne()(),Oe(18,"div",35)(19,"div",33),et(20),Ne(),Oe(21,"div",34),et(22,"52 week avg"),Ne()()()()(),Ot(23,ine,2,1,"ng-container",36),Ne()),2&n){const t=wn();Ge(2),Qe("ngIf",!mn(3,6,t.loadingArray)&&t.getOverallTrend().quarter>t.getOverallTrend().year),Ge(2),Qe("ngIf",!mn(5,8,t.loadingArray)&&t.getOverallTrend().quarter===t.getOverallTrend().year),Ge(2),Qe("ngIf",!mn(7,10,t.loadingArray)&&t.getOverallTrend().quarter<t.getOverallTrend().year),Ge(9),vs("",t.getOverallTrend().quarter>60?t.Math.floor(t.getOverallTrend().quarter/60)+"h"+t.getOverallTrend().quarter%60:t.getOverallTrend().quarter,"m/week"),Ge(5),vs("",t.getOverallTrend().year>60?t.Math.floor(t.getOverallTrend().year/60)+"h"+t.getOverallTrend().year%60:t.getOverallTrend().year,"m/week"),Ge(3),Qe("ngForOf",t.getModeTrends())}}class py{constructor(e,t,i,r,s){this.http=e,this.dialog=t,this.manifestService=i,this.bungieQueue=r,this.bungieAuth=s,this.membershipDataForCurrentUser$=new Zi(void 0),this.accountResponse$=new Zi([]),this.displayName="",this.Math=Math}addDay(e){this.days[e.getFullYear()]||(this.days[e.getFullYear()]={}),this.days[e.getFullYear()][e.getMonth()+1]||(this.days[e.getFullYear()][e.getMonth()+1]={}),this.days[e.getFullYear()][e.getMonth()+1][e.getDate()]||(this.days[e.getFullYear()][e.getMonth()+1][e.getDate()]=[]),this.flatDays.push(this.days[e.getFullYear()][e.getMonth()+1][e.getDate()])}ngOnInit(){this.loadingArray=[],this.calendarFilter="0",this.subs=[],this.activities=[],this.days={},this.flatDays=[],this.oneQuarterAgo=new Date((new Date).setDate((new Date).getDate()-91)),this.oneYearAgo=new Date((new Date).setDate((new Date).getDate()-364)),this.modeTrends={},this.overallTrend={quarter:[],year:[]},this.flatDaysBS=new Zi([]),this.manifestService.state$.subscribe(s=>{s.loaded&&(this.modeOptions=Object.keys(this.manifestService.defs.ActivityMode.dbTable).map(o=>this.manifestService.defs.ActivityMode.dbTable[o].modeType).sort())}),this.errorStatus="",this.errorMessage="";const e=new Date("Sept 1, 2017"),t=new Date;for(;e<=t;)this.addDay(e),e.setDate(e.getDate()+1);this.flatDaysBS.next(this.flatDays),this.yearKeys=Object.keys(this.days),this.monthKeys={},this.monthOffsets={2017:{9:5}};let i=5,r=30;this.dayKeys={},this.yearKeys.forEach(s=>{this.monthKeys[s]=Object.keys(this.days[s]),this.monthOffsets[s]||(this.monthOffsets[s]={}),this.dayKeys[s]={},this.monthKeys[s].forEach(o=>{this.monthOffsets[s][o]||(this.monthOffsets[s][o]=(r+i)%7,r=Object.keys(this.days[s][o]).length,i=this.monthOffsets[s][o]),this.dayKeys[s][o]=Object.keys(this.days[s][o])})}),this.subs.push(this.bungieAuth.hasValidAccessToken$.pipe(Rc(),Mr(s=>{s&&this.bungieQueue.addToQueue("getProfile",h8,c=>{this.membershipDataForCurrentUser$.next(c)})})).subscribe()),this.subs.push(this.membershipDataForCurrentUser$.pipe(Rc(),yo(s=>eg(s?.Response?.destinyMemberships.map(o=>{const a={loading:!0};this.loadingArray.push(a);const c=new Zi(void 0),{membershipId:d,membershipType:p}=o;return this.bungieQueue.addToQueue("getProfile",u8,x=>{x&&1===x.ErrorCode&&x?.Response?.characters?.length>0?eg(x?.Response?.characters.map(T=>{const N={loading:!0};this.loadingArray.push(N);const I=new Zi(void 0),{characterId:A}=T,H=T.merged?.allTime?.secondsPlayed?.basic?.value;return this.bungieQueue.addToQueue("getProfile",l8,K=>{if(1===K.ErrorCode){const he=K;he.Response.character=K.Response.character??{data:{characterId:A,membershipId:d,membershipType:p,minutesPlayedTotal:H?this.Math.floor(H/60):0}},I.next(he)}N.loading=!1,I.complete()},{characterId:A,destinyMembershipId:d,membershipType:p,components:[200]}),I})??Fc).pipe(Vs(1)).subscribe(T=>{c.next(T),a.loading=!1,c.complete()}):(a.loading=!1,c.complete())},{destinyMembershipId:d,membershipType:p,groups:[1]}),c})??Fc)),gt(s=>this.accountResponse$.next(s))).subscribe()),this.membershipDataForCurrentUser$.pipe(Rc(),gt(s=>{this.displayName=s?.Response?.bungieNetUser?.displayName})).subscribe(),this.characters$=this.accountResponse$.pipe(Rc(),gt(s=>{const o=[];for(const a of s)if(a)for(const c of a)try{o.push(c.Response.character.data)}catch{}return o})),this.minutesPlayedTotal=this.characters$.pipe(gt(s=>{let o=0;return s.forEach(a=>{o+=+a.minutesPlayedTotal}),o})),this.subs.push(this.characters$.pipe(Rc()).subscribe(s=>{this.activities=[],s.forEach(o=>{const a={destinyMembershipId:o.membershipId,membershipType:o.membershipType,characterId:o.characterId,mode:0,count:250};this.addHistorySub({...a,page:0}),this.addHistorySub({...a,page:1}),this.addHistorySub({...a,page:2})})}))}addHistorySub(e){const t={loading:!0};this.loadingArray.push(t);const{page:i}=e,r=new Zi(void 0);this.bungieQueue.addToQueue("getActivityHistory",d8,a=>{r.next(a)},e),this.subs.push(r.subscribe(a=>{1!==a?.ErrorCode&&a?.ErrorStatus&&(this.errorStatus=a.ErrorStatus,this.errorMessage=a.Message),a?.Response.activities&&a?.Response.activities.length&&(this.addHistorySub({...e,page:i+3}),a.Response.activities.forEach(c=>{c.characterId=e.characterId;const p=new Date(c.period).getTime()/1e3+c.values.startSeconds.basic.value,g=p+c.values.timePlayedSeconds.basic.value;c.startDate=new Date(1e3*p),c.endDate=new Date(1e3*g),this.activities.push(c);try{this.days[c.startDate.getFullYear()][c.startDate.getMonth()+1][c.startDate.getDate()].push(c),c.endDate>this.oneYearAgo&&(c.activityDetails.modes.forEach(_=>{this.modeTrends[_]||(this.modeTrends[_]={quarter:[],year:[]}),this.modeTrends[_].year.push(c),c.endDate>this.oneQuarterAgo&&this.modeTrends[_].quarter.push(c)}),this.overallTrend.year.push(c),c.endDate>this.oneQuarterAgo&&this.overallTrend.quarter.push(c))}catch{}this.flatDaysBS.next(this.flatDays)})),a&&(t.loading=!1)}))}openDay(e,t){this.loadingArray.length&&!this.loadingArray.some(i=>i.loading)&&this.dialog.open(fy,{data:{date:e,activities:t},width:"300px"})}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}getModeTrends(){return Object.keys(this.modeTrends).map(e=>({mode:Number(e),quarter:Math.round(this.modeTrends[Number(e)].quarter.reduce((t,i)=>t+(i.endDate-i.startDate),0)/13),year:Math.round(this.modeTrends[Number(e)].year.reduce((t,i)=>t+(i.endDate-i.startDate),0)/52)})).sort((e,t)=>t.year-e.year).sort((e,t)=>t.quarter-e.quarter).map(e=>({...e,quarter:Math.round(e.quarter/6e4),year:Math.round(e.year/6e4)}))}getOverallTrend(){return{quarter:Math.round(this.overallTrend.quarter.reduce((e,t)=>e+(t.endDate-t.startDate),0)/13/6e4),year:Math.round(this.overallTrend.year.reduce((e,t)=>e+(t.endDate-t.startDate),0)/52/6e4)}}}py.\u0275fac=function(e){return new(e||py)(ae($d),ae(Lw),ae(rh),ae(Yf),ae(Uu))},py.\u0275cmp=ai({type:py,selectors:[["app-guardian"]],decls:49,vars:37,consts:[["appearance","outlined","class","errorStatus",4,"ngIf"],[1,"mat-body-2"],[1,"mat-subtitle-2"],["aria-label","Search for Guardian","class","spinner",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","calYear",4,"ngFor","ngForOf"],[1,"trends-header"],["class","trending_loading",4,"ngIf"],["class","trends",4,"ngIf"],["appearance","outlined",1,"errorStatus"],["aria-label","Search for Guardian",1,"spinner"],[3,"value"],[1,"calYear"],[1,"yearLabel","mat-caption"],["class","calMonth",3,"ngStyle",4,"ngFor","ngForOf"],[1,"calMonth",3,"ngStyle"],[1,"monthLabel","mat-caption"],[1,"dayWrapper",3,"ngClass"],[1,"monthSpacer",3,"ngStyle"],["class","calDay","matTooltipPosition","after",3,"ngClass","ngStyle","matTooltip","click",4,"ngFor","ngForOf"],["matTooltipPosition","after",1,"calDay",3,"ngClass","ngStyle","matTooltip","click"],[1,"trending_loading"],[1,"trends"],[1,"trend"],["class","trend-up",4,"ngIf"],["class","trend-flat",4,"ngIf"],["class","trend-down",4,"ngIf"],[1,"trend-main"],[1,"trend-header"],[1,"trend-name"],[1,"trend-values"],[1,"trend-quarter"],[1,"trend-value"],[1,"trend-time"],[1,"trend-year"],[4,"ngFor","ngForOf"],[1,"trend-up"],[1,"trend-flat"],[1,"trend-down"],["class","trend",4,"ngIf"],[1,"trend-icon",3,"src","alt"]],template:function(e,t){1&e&&(Ot(0,Vte,5,2,"mat-card",0),Oe(1,"div",1),et(2," Name: "),Oe(3,"span",2),et(4),Ne(),vn(5,"br"),et(6," Total Time in Destiny 2: "),Oe(7,"span",2),et(8),ft(9,"hoursPlayed"),ft(10,"async"),Ne(),et(11," = "),Oe(12,"span",2),et(13),ft(14,"parseMinutesPlayed"),ft(15,"async"),Ne(),vn(16,"br"),et(17," Total Time in Activities: "),Oe(18,"span",2),et(19),ft(20,"activitiesTotalHours"),Ne(),et(21," = "),Oe(22,"span",2),et(23),ft(24,"activitiesTotalTime"),Ne(),vn(25,"br"),et(26," Destiny 2 Activity Count: "),Oe(27,"span",2),et(28),Ne(),Ot(29,Hte,2,0,"mat-icon",3),ft(30,"loadingReduce"),vn(31,"br"),et(32),ft(33,"currentStreak"),vn(34,"br"),et(35),ft(36,"longestStreaks"),vn(37,"br"),et(38," Filter Heatmap: "),Oe(39,"mat-form-field")(40,"mat-select",4),ni("ngModelChange",function(r){return t.calendarFilter=r}),Ot(41,Ute,4,7,"mat-option",5),Ne()()(),Ot(42,Kte,5,2,"div",6),Oe(43,"h3",7),et(44,"Trends"),Ne(),Ot(45,Yte,2,0,"mat-icon",8),ft(46,"loadingReduce"),Ot(47,rne,24,12,"div",9),ft(48,"loadingReduce")),2&e&&(Qe("ngIf",t.errorStatus),Ge(4),$i(t.displayName),Ge(4),$i(mn(9,15,mn(10,17,t.minutesPlayedTotal))),Ge(5),$i(mn(14,19,mn(15,21,t.minutesPlayedTotal))),Ge(6),$i(mn(20,23,t.activities)),Ge(4),$i(mn(24,25,t.activities)),Ge(5),$i(t.activities.length),Ge(1),Qe("ngIf",mn(30,27,t.loadingArray)),Ge(3),vs(" Current Streak: ",mn(33,29,t.flatDays),""),Ge(3),vs(" Longest Streaks: ",mn(36,31,t.flatDays),""),Ge(5),Qe("ngModel",t.calendarFilter),Ge(1),Qe("ngForOf",t.modeOptions),Ge(1),Qe("ngForOf",t.yearKeys),Ge(3),Qe("ngIf",mn(46,33,t.loadingArray)),Ge(2),Qe("ngIf",!mn(48,35,t.loadingArray)))},dependencies:[Jm,y_,Df,j1,VT,HT,JN,t4,xT,Cw,ST,wT,GD,hw,Tf,$f,qf,xg,wg,Sg,Eg,Kf,Mg,Cg,Dg],styles:['.calYear[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:1em}.calMonth[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:.5em;margin-bottom:.5em}.dayWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:7em;flex-wrap:wrap}.calDay[_ngcontent-%COMP%]{display:block;width:1em;height:1em;box-sizing:border-box;cursor:pointer;transition:transform .2s;background-position:center;background-size:16px}.calDay[_ngcontent-%COMP%]:hover.icon{transform:scale(1.5);z-index:999;box-shadow:0 0 8px 3px #696969;opacity:1}.calDay[_ngcontent-%COMP%]:before{content:" ";top:0;left:0;width:100%;height:100%;filter:invert(1);display:block;-webkit-mask-size:contain;mask-size:contain}.calDay.red-war[_ngcontent-%COMP%]:before{-webkit-mask-image:url(red-war.3eff2acca21c93ca.png);mask-image:url(red-war.3eff2acca21c93ca.png);background-color:inherit}.calDay.curse-of-osiris[_ngcontent-%COMP%]:before{-webkit-mask-image:url(curse-of-osiris.6c410487c8c1193b.png);mask-image:url(curse-of-osiris.6c410487c8c1193b.png);background-color:inherit}.calDay.dawning[_ngcontent-%COMP%]:before{-webkit-mask-image:url(dawning.645be67ef31d090a.png);mask-image:url(dawning.645be67ef31d090a.png);background-color:inherit}.calDay.crimson-days[_ngcontent-%COMP%]:before{-webkit-mask-image:url(crimson-days.aa88f4d939be6b4f.png);mask-image:url(crimson-days.aa88f4d939be6b4f.png);background-color:inherit}.calDay.warmind[_ngcontent-%COMP%]:before{-webkit-mask-image:url(warmind.af5f3877c551d0a9.png);mask-image:url(warmind.af5f3877c551d0a9.png);background-color:inherit}.calDay.moments-of-triumph[_ngcontent-%COMP%]:before{-webkit-mask-image:url(moments-of-triumph.3dd2b9684009007a.png);mask-image:url(moments-of-triumph.3dd2b9684009007a.png);background-color:inherit}.calDay.solstice[_ngcontent-%COMP%]:before{-webkit-mask-image:url(solstice.cb7917ad27da3310.png);mask-image:url(solstice.cb7917ad27da3310.png);background-color:inherit}.calDay.forsaken[_ngcontent-%COMP%]:before{-webkit-mask-image:url(forsaken.f61a352f91528263.png);mask-image:url(forsaken.f61a352f91528263.png);background-color:inherit}.calDay.festival-of-the-lost[_ngcontent-%COMP%]:before{-webkit-mask-image:url(festival-of-the-lost.656fb66ff23db261.png);mask-image:url(festival-of-the-lost.656fb66ff23db261.png);background-color:inherit}.calDay.season-of-the-forge[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-forge.a88ddb98b2a97a0e.png);mask-image:url(season-of-the-forge.a88ddb98b2a97a0e.png);background-color:inherit}.calDay.season-of-the-drifter[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-drifter.1867ff7e8c88eda5.png);mask-image:url(season-of-the-drifter.1867ff7e8c88eda5.png);background-color:inherit}.calDay.revelry[_ngcontent-%COMP%]:before{-webkit-mask-image:url(revelry.4a84f0f680e2599d.png);mask-image:url(revelry.4a84f0f680e2599d.png);background-color:inherit}.calDay.season-of-opulence[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-opulence.3b878d66365d9cc6.png);mask-image:url(season-of-opulence.3b878d66365d9cc6.png);background-color:inherit}.calDay.shadowkeep[_ngcontent-%COMP%]:before{-webkit-mask-image:url(shadowkeep.2412f7e9615345e8.png);mask-image:url(shadowkeep.2412f7e9615345e8.png);background-color:inherit}.calDay.season-of-the-undying[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-undying.a0948d4e1e5532ab.png);mask-image:url(season-of-the-undying.a0948d4e1e5532ab.png);background-color:inherit}.calDay.season-of-dawn[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-dawn.152fa5fa97203b11.png);mask-image:url(season-of-dawn.152fa5fa97203b11.png);background-color:inherit}.calDay.season-of-the-worthy[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-worthy.97fe2af14ad98313.png);mask-image:url(season-of-the-worthy.97fe2af14ad98313.png);background-color:inherit}.calDay.guardian-games[_ngcontent-%COMP%]:before{-webkit-mask-image:url(guardian-games.1458a297ee32ae52.png);mask-image:url(guardian-games.1458a297ee32ae52.png);background-color:inherit}.calDay.season-of-arrivals[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-arrivals.649a4db068c154bf.png);mask-image:url(season-of-arrivals.649a4db068c154bf.png);background-color:inherit}.calDay.beyond-light[_ngcontent-%COMP%]:before{-webkit-mask-image:url(beyond-light.8fb053c5e78ee3c1.png);mask-image:url(beyond-light.8fb053c5e78ee3c1.png);background-color:inherit}.calDay.season-of-the-hunt[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-hunt.23c0a09811c2dd46.png);mask-image:url(season-of-the-hunt.23c0a09811c2dd46.png);background-color:inherit}.calDay.season-of-the-chosen[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-chosen.9d73f0c6a48c8b28.png);mask-image:url(season-of-the-chosen.9d73f0c6a48c8b28.png);background-color:inherit}.calDay.season-of-the-splicer[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-splicer.5cff32b822f61b20.png);mask-image:url(season-of-the-splicer.5cff32b822f61b20.png);background-color:inherit}.calDay.season-of-the-lost[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-lost.10a416eb34d1915e.png);mask-image:url(season-of-the-lost.10a416eb34d1915e.png);background-color:inherit}.calDay.thirtieth-anniversary[_ngcontent-%COMP%]:before{-webkit-mask-image:url(thirtieth-anniversary.3aa725ceedf9157d.png);mask-image:url(thirtieth-anniversary.3aa725ceedf9157d.png);background-color:inherit}.calDay.witch-queen[_ngcontent-%COMP%]:before{-webkit-mask-image:url(witch-queen.4fdd67baed2eb636.png);mask-image:url(witch-queen.4fdd67baed2eb636.png);background-color:inherit}.calDay.season-of-the-haunted[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-haunted.d4556f3df7022cf7.png);mask-image:url(season-of-the-haunted.d4556f3df7022cf7.png);background-color:inherit}.calDay.iron-banner[_ngcontent-%COMP%]:before{-webkit-mask-image:url(iron-banner.0cccf5ef6d1f8153.png);mask-image:url(iron-banner.0cccf5ef6d1f8153.png);background-color:inherit}.calDay.solstice2022[_ngcontent-%COMP%]:before{-webkit-mask-image:url(solstice2022.4129b7a862b1dd62.png);mask-image:url(solstice2022.4129b7a862b1dd62.png);background-color:inherit}.calDay.raid[_ngcontent-%COMP%]:before{-webkit-mask-image:url(raid.c24a762febb5d48f.png);mask-image:url(raid.c24a762febb5d48f.png);background-color:inherit}.calDay.season-of-plunder[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-plunder.a82a4f350d3ff629.png);mask-image:url(season-of-plunder.a82a4f350d3ff629.png);background-color:inherit}.calDay.dungeon[_ngcontent-%COMP%]:before{-webkit-mask-image:url(dungeon.1e3bb371bcf5c37b.png);mask-image:url(dungeon.1e3bb371bcf5c37b.png);background-color:inherit}.calDay.season-of-the-seraph[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-seraph.30ab5d205a09f6c4.png);mask-image:url(season-of-the-seraph.30ab5d205a09f6c4.png);background-color:inherit}.calDay.lightfall[_ngcontent-%COMP%]:before{-webkit-mask-image:url(lightfall.cbc105e4dbc42ae7.png);mask-image:url(lightfall.cbc105e4dbc42ae7.png);background-color:inherit}@media (prefers-reduced-motion){.calDay[_ngcontent-%COMP%]{transition:none}.calDay[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none;background-image:none}}.loading[_ngcontent-%COMP%] > .calDay[_ngcontent-%COMP%]{cursor:progress}.yearLabel[_ngcontent-%COMP%]{display:flex;align-items:center}.yearLabel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75em;display:block;transform:rotate(-90deg)}.monthSpacer[_ngcontent-%COMP%]{width:1em}.monthLabel[_ngcontent-%COMP%]{font-size:.75em;text-align:center}.release[_ngcontent-%COMP%]:before{width:100%;height:100%}.raid[_ngcontent-%COMP%]:before, .event[_ngcontent-%COMP%]:before{width:100%;height:100%}@media (prefers-color-scheme: dark){.release[_ngcontent-%COMP%], .raid[_ngcontent-%COMP%], .event[_ngcontent-%COMP%]{border-color:#333}.inactive[_ngcontent-%COMP%]{opacity:.15}}.spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 3s infinite linear;height:1em;width:1em;display:inline-block;line-height:1em;font-size:.75em}@keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_spinX{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.errorStatus[_ngcontent-%COMP%]{margin-bottom:.5em}.trends-header[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.trending_loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 3s infinite linear}.trends[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;display:flex;flex-wrap:wrap;gap:1em}.trends[_ngcontent-%COMP%]   .trend-up[_ngcontent-%COMP%]{color:green}.trends[_ngcontent-%COMP%]   .trend-down[_ngcontent-%COMP%]{color:red}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75em;min-width:17em}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25em}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:1em}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-time[_ngcontent-%COMP%]{font-size:.75em;opacity:.6}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-values[_ngcontent-%COMP%]{display:flex;gap:.75em}']});const JA="135",sne=0,f8=1,one=2,p8=1,ane=2,my=3,Tg=0,Ss=1,Ag=2,sh=0,gy=1,g8=2,v8=3,_8=4,cne=5,Ig=100,lne=101,une=102,y8=103,b8=104,dne=200,hne=201,fne=202,pne=203,x8=204,w8=205,mne=206,gne=207,vne=208,_ne=209,yne=210,bne=0,xne=1,wne=2,QA=3,Sne=4,Ene=5,Mne=6,Cne=7,TS=0,Dne=1,Tne=2,Xf=0,Ane=1,Ine=2,Fne=3,Rne=4,Pne=5,Fg=301,Rg=302,AS=303,IS=304,vy=306,FS=307,RS=1e3,Bo=1001,PS=1002,Hs=1003,tI=1004,nI=1005,Qs=1006,S8=1007,Pg=1008,oh=1009,kne=1010,One=1011,_y=1012,Lne=1013,kS=1014,Gu=1015,kg=1016,Nne=1017,Bne=1018,Vne=1019,Og=1020,Hne=1021,Zf=1022,Vo=1023,Une=1024,zne=1025,Gne=Vo,Jf=1026,Lg=1027,jne=1028,Wne=1029,$ne=1030,qne=1031,Kne=1032,Yne=1033,E8=33776,M8=33777,C8=33778,D8=33779,T8=35840,A8=35841,I8=35842,F8=35843,Xne=36196,R8=37492,P8=37496,Zne=37808,Jne=37809,Qne=37810,eie=37811,tie=37812,nie=37813,iie=37814,rie=37815,sie=37816,oie=37817,aie=37818,cie=37819,lie=37820,uie=37821,die=36492,hie=37840,fie=37841,pie=37842,mie=37843,gie=37844,vie=37845,_ie=37846,yie=37847,bie=37848,xie=37849,wie=37850,Sie=37851,Eie=37852,Mie=37853,Ng=2400,Bg=2401,ba=3e3,BS=3001,sI=3007,oI=3002,O8=3004,L8=3005,N8=3006,Fie=3201,Vg=0,Rie=1,yy=35044,by=35048,B8="300 es";class Qf{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const xo=[];for(let n=0;n<256;n++)xo[n]=(n<16?"0":"")+n.toString(16);const ep=Math.PI/180,xy=180/Math.PI;function nc(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(xo[255&n]+xo[n>>8&255]+xo[n>>16&255]+xo[n>>24&255]+"-"+xo[255&e]+xo[e>>8&255]+"-"+xo[e>>16&15|64]+xo[e>>24&255]+"-"+xo[63&t|128]+xo[t>>8&255]+"-"+xo[t>>16&255]+xo[t>>24&255]+xo[255&i]+xo[i>>8&255]+xo[i>>16&255]+xo[i>>24&255]).toUpperCase()}function wo(n,e,t){return Math.max(e,Math.min(t,n))}function wy(n,e,t){return(1-t)*n+t*e}function lI(n){return 0==(n&n-1)&&0!==n}function H8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class tt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}tt.prototype.isVector2=!0;class Us{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,c,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=a,p[3]=t,p[4]=s,p[5]=c,p[6]=i,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],d=i[1],p=i[4],g=i[7],_=i[2],y=i[5],x=i[8],T=r[0],N=r[3],I=r[6],A=r[1],H=r[4],G=r[7],X=r[2],re=r[5],K=r[8];return s[0]=o*T+a*A+c*X,s[3]=o*N+a*H+c*re,s[6]=o*I+a*G+c*K,s[1]=d*T+p*A+g*X,s[4]=d*N+p*H+g*re,s[7]=d*I+p*G+g*K,s[2]=_*T+y*A+x*X,s[5]=_*N+y*H+x*re,s[8]=_*I+y*G+x*K,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],p=e[8];return t*o*p-t*a*d-i*s*p+i*a*c+r*s*d-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],p=e[8],g=p*o-a*d,_=a*c-p*s,y=d*s-o*c,x=t*g+i*_+r*y;if(0===x)return this.set(0,0,0,0,0,0,0,0,0);const T=1/x;return e[0]=g*T,e[1]=(r*d-p*i)*T,e[2]=(a*i-r*o)*T,e[3]=_*T,e[4]=(p*t-r*c)*T,e[5]=(r*s-a*t)*T,e[6]=y*T,e[7]=(i*c-d*t)*T,e[8]=(o*t-i*s)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),d=Math.sin(s);return this.set(i*c,i*d,-i*(c*o+d*a)+o+e,-r*d,r*c,-r*(-d*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],d=r[4],p=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*d,r[6]=t*a+i*p,r[1]=-i*s+t*c,r[4]=-i*o+t*d,r[7]=-i*a+t*p,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function U8(n){if(0===n.length)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}function HS(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function z8(n,e=0){let t=3735928559^e,i=1103547991^e;for(let s,r=0;r<n.length;r++)s=n.charCodeAt(r),t=Math.imul(t^s,2654435761),i=Math.imul(i^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&i)+(t>>>0)}let Ug;Us.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;class zg{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ug&&(Ug=HS("canvas")),Ug.width=e.width,Ug.height=e.height;const i=Ug.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ug}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let Kie=0;class eo extends Qf{constructor(e=eo.DEFAULT_IMAGE,t=eo.DEFAULT_MAPPING,i=Bo,r=Bo,s=Qs,o=Pg,a=Vo,c=oh,d=1,p=ba){super(),Object.defineProperty(this,"id",{value:Kie++}),this.uuid=nc(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=a,this.internalFormat=null,this.type=c,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Us,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=nc()),!t&&void 0===e.images[r.uuid]){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(uI(r[o].isDataTexture?r[o].image:r[o]))}else s=uI(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RS:e.x=e.x-Math.floor(e.x);break;case Bo:e.x=e.x<0?0:1;break;case PS:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case RS:e.y=e.y-Math.floor(e.y);break;case Bo:e.y=e.y<0?0:1;break;case PS:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function uI(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?zg.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}eo.DEFAULT_IMAGE=void 0,eo.DEFAULT_MAPPING=300,eo.prototype.isTexture=!0;class Ji{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,d=c[0],p=c[4],g=c[8],_=c[1],y=c[5],x=c[9],T=c[2],N=c[6],I=c[10];if(Math.abs(p-_)<.01&&Math.abs(g-T)<.01&&Math.abs(x-N)<.01){if(Math.abs(p+_)<.1&&Math.abs(g+T)<.1&&Math.abs(x+N)<.1&&Math.abs(d+y+I-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const H=(d+1)/2,G=(y+1)/2,X=(I+1)/2,re=(p+_)/4,K=(g+T)/4,he=(x+N)/4;return H>G&&H>X?H<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(H),r=re/i,s=K/i):G>X?G<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(G),i=re/r,s=he/r):X<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(X),i=K/s,r=he/s),this.set(i,r,s,t),this}let A=Math.sqrt((N-x)*(N-x)+(g-T)*(g-T)+(_-p)*(_-p));return Math.abs(A)<.001&&(A=1),this.x=(N-x)/A,this.y=(g-T)/A,this.z=(_-p)/A,this.w=Math.acos((d+y+I-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ji.prototype.isVector4=!0;class Nc extends Qf{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Ji(0,0,e,t),this.scissorTest=!1,this.viewport=new Ji(0,0,e,t),this.texture=new eo(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Qs,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Nc.prototype.isWebGLRenderTarget=!0,class Yie extends Nc{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class dI extends Nc{constructor(e,t,i={}){super(e,t,i),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===i.ignoreDepth||i.ignoreDepth,this.useRenderToTexture=void 0!==i.useRenderToTexture&&i.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}dI.prototype.isWebGLMultisampleRenderTarget=!0;class Ho{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],d=i[r+1],p=i[r+2],g=i[r+3];const _=s[o+0],y=s[o+1],x=s[o+2],T=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=d,e[t+2]=p,void(e[t+3]=g);if(1===a)return e[t+0]=_,e[t+1]=y,e[t+2]=x,void(e[t+3]=T);if(g!==T||c!==_||d!==y||p!==x){let N=1-a;const I=c*_+d*y+p*x+g*T,A=I>=0?1:-1,H=1-I*I;if(H>Number.EPSILON){const X=Math.sqrt(H),re=Math.atan2(X,I*A);N=Math.sin(N*re)/X,a=Math.sin(a*re)/X}const G=a*A;if(c=c*N+_*G,d=d*N+y*G,p=p*N+x*G,g=g*N+T*G,N===1-a){const X=1/Math.sqrt(c*c+d*d+p*p+g*g);c*=X,d*=X,p*=X,g*=X}}e[t]=c,e[t+1]=d,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],d=i[r+2],p=i[r+3],g=s[o],_=s[o+1],y=s[o+2],x=s[o+3];return e[t]=a*x+p*g+c*y-d*_,e[t+1]=c*x+p*_+d*g-a*y,e[t+2]=d*x+p*y+a*_-c*g,e[t+3]=p*x-a*g-c*_-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,d=a(i/2),p=a(r/2),g=a(s/2),_=c(i/2),y=c(r/2),x=c(s/2);switch(o){case"XYZ":this._x=_*p*g+d*y*x,this._y=d*y*g-_*p*x,this._z=d*p*x+_*y*g,this._w=d*p*g-_*y*x;break;case"YXZ":this._x=_*p*g+d*y*x,this._y=d*y*g-_*p*x,this._z=d*p*x-_*y*g,this._w=d*p*g+_*y*x;break;case"ZXY":this._x=_*p*g-d*y*x,this._y=d*y*g+_*p*x,this._z=d*p*x+_*y*g,this._w=d*p*g-_*y*x;break;case"ZYX":this._x=_*p*g-d*y*x,this._y=d*y*g+_*p*x,this._z=d*p*x-_*y*g,this._w=d*p*g+_*y*x;break;case"YZX":this._x=_*p*g+d*y*x,this._y=d*y*g+_*p*x,this._z=d*p*x-_*y*g,this._w=d*p*g-_*y*x;break;case"XZY":this._x=_*p*g-d*y*x,this._y=d*y*g-_*p*x,this._z=d*p*x+_*y*g,this._w=d*p*g+_*y*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],d=t[2],p=t[6],g=t[10],_=i+a+g;if(_>0){const y=.5/Math.sqrt(_+1);this._w=.25/y,this._x=(p-c)*y,this._y=(s-d)*y,this._z=(o-r)*y}else if(i>a&&i>g){const y=2*Math.sqrt(1+i-a-g);this._w=(p-c)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+d)/y}else if(a>g){const y=2*Math.sqrt(1+a-i-g);this._w=(s-d)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(c+p)/y}else{const y=2*Math.sqrt(1+g-i-a);this._w=(o-r)/y,this._x=(s+d)/y,this._y=(c+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wo(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,d=t._z,p=t._w;return this._x=i*p+o*a+r*d-s*c,this._y=r*p+o*c+s*a-i*d,this._z=s*p+o*d+i*c-r*a,this._w=o*p-i*a-r*c-s*d,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(c),p=Math.atan2(d,a),g=Math.sin((1-t)*p)/d,_=Math.sin(t*p)/d;return this._w=o*g+this._w*_,this._x=i*g+this._x*_,this._y=r*g+this._y*_,this._z=s*g+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ho.prototype.isQuaternion=!0;class ne{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(G8.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(G8.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,d=c*t+o*r-a*i,p=c*i+a*t-s*r,g=c*r+s*i-o*t,_=-s*t-o*i-a*r;return this.x=d*c+_*-s+p*-a-g*-o,this.y=p*c+_*-o+g*-s-d*-a,this.z=g*c+_*-a+d*-o-p*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return hI.copy(this).projectOnVector(e),this.sub(hI)}reflect(e){return this.sub(hI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(wo(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}ne.prototype.isVector3=!0;const hI=new ne,G8=new Ho;class Bc{constructor(e=new ne(1/0,1/0,1/0),t=new ne(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,d=e.length;c<d;c+=3){const p=e[c],g=e[c+1],_=e[c+2];p<t&&(t=p),g<i&&(i=g),_<r&&(r=_),p>s&&(s=p),g>o&&(o=g),_>a&&(a=_)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,d=e.count;c<d;c++){const p=e.getX(c),g=e.getY(c),_=e.getZ(c);p<t&&(t=p),g<i&&(i=g),_<r&&(r=_),p>s&&(s=p),g>o&&(o=g),_>a&&(a=_)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Sy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),fI.copy(t.boundingBox),fI.applyMatrix4(e.matrixWorld),this.union(fI));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Sy),Sy.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ey),US.subVectors(this.max,Ey),Gg.subVectors(e.a,Ey),jg.subVectors(e.b,Ey),Wg.subVectors(e.c,Ey),ah.subVectors(jg,Gg),ch.subVectors(Wg,jg),tp.subVectors(Gg,Wg);let t=[0,-ah.z,ah.y,0,-ch.z,ch.y,0,-tp.z,tp.y,ah.z,0,-ah.x,ch.z,0,-ch.x,tp.z,0,-tp.x,-ah.y,ah.x,0,-ch.y,ch.x,0,-tp.y,tp.x,0];return!(!pI(t,Gg,jg,Wg,US)||(t=[1,0,0,0,1,0,0,0,1],!pI(t,Gg,jg,Wg,US)))&&(zS.crossVectors(ah,ch),t=[zS.x,zS.y,zS.z],pI(t,Gg,jg,Wg,US))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Sy.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Sy).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ju[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ju[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ju[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ju[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ju[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ju[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ju[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ju[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ju)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Bc.prototype.isBox3=!0;const ju=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],Sy=new ne,fI=new Bc,Gg=new ne,jg=new ne,Wg=new ne,ah=new ne,ch=new ne,tp=new ne,Ey=new ne,US=new ne,zS=new ne,np=new ne;function pI(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){np.fromArray(n,s);const a=r.x*Math.abs(np.x)+r.y*Math.abs(np.y)+r.z*Math.abs(np.z),c=e.dot(np),d=t.dot(np),p=i.dot(np);if(Math.max(-Math.max(c,d,p),Math.min(c,d,p))>a)return!1}return!0}const Xie=new Bc,j8=new ne,mI=new ne,gI=new ne;class ip{constructor(e=new ne,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Xie.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){gI.subVectors(e,this.center);const t=gI.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(gI.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return mI.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(j8.copy(e.center).add(mI)),this.expandByPoint(j8.copy(e.center).sub(mI)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Wu=new ne,vI=new ne,GS=new ne,lh=new ne,_I=new ne,jS=new ne,yI=new ne;class rp{constructor(e=new ne,t=new ne(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wu.copy(this.direction).multiplyScalar(t).add(this.origin),Wu.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){vI.copy(e).add(t).multiplyScalar(.5),GS.copy(t).sub(e).normalize(),lh.copy(this.origin).sub(vI);const s=.5*e.distanceTo(t),o=-this.direction.dot(GS),a=lh.dot(this.direction),c=-lh.dot(GS),d=lh.lengthSq(),p=Math.abs(1-o*o);let g,_,y,x;if(p>0)if(g=o*c-a,_=o*a-c,x=s*p,g>=0)if(_>=-x)if(_<=x){const T=1/p;g*=T,_*=T,y=g*(g+o*_+2*a)+_*(o*g+_+2*c)+d}else _=s,g=Math.max(0,-(o*_+a)),y=-g*g+_*(_+2*c)+d;else _=-s,g=Math.max(0,-(o*_+a)),y=-g*g+_*(_+2*c)+d;else _<=-x?(g=Math.max(0,-(-o*s+a)),_=g>0?-s:Math.min(Math.max(-s,-c),s),y=-g*g+_*(_+2*c)+d):_<=x?(g=0,_=Math.min(Math.max(-s,-c),s),y=_*(_+2*c)+d):(g=Math.max(0,-(o*s+a)),_=g>0?s:Math.min(Math.max(-s,-c),s),y=-g*g+_*(_+2*c)+d);else _=o>0?-s:s,g=Math.max(0,-(o*_+a)),y=-g*g+_*(_+2*c)+d;return i&&i.copy(this.direction).multiplyScalar(g).add(this.origin),r&&r.copy(GS).multiplyScalar(_).add(vI),y}intersectSphere(e,t){Wu.subVectors(e.center,this.origin);const i=Wu.dot(this.direction),r=Wu.dot(Wu)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const d=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,_=this.origin;return d>=0?(i=(e.min.x-_.x)*d,r=(e.max.x-_.x)*d):(i=(e.max.x-_.x)*d,r=(e.min.x-_.x)*d),p>=0?(s=(e.min.y-_.y)*p,o=(e.max.y-_.y)*p):(s=(e.max.y-_.y)*p,o=(e.min.y-_.y)*p),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),g>=0?(a=(e.min.z-_.z)*g,c=(e.max.z-_.z)*g):(a=(e.max.z-_.z)*g,c=(e.min.z-_.z)*g),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Wu)}intersectTriangle(e,t,i,r,s){_I.subVectors(t,e),jS.subVectors(i,e),yI.crossVectors(_I,jS);let a,o=this.direction.dot(yI);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}lh.subVectors(this.origin,e);const c=a*this.direction.dot(jS.crossVectors(lh,jS));if(c<0)return null;const d=a*this.direction.dot(_I.cross(lh));if(d<0||c+d>o)return null;const p=-a*lh.dot(yI);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Gt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,c,d,p,g,_,y,x,T,N){const I=this.elements;return I[0]=e,I[4]=t,I[8]=i,I[12]=r,I[1]=s,I[5]=o,I[9]=a,I[13]=c,I[2]=d,I[6]=p,I[10]=g,I[14]=_,I[3]=y,I[7]=x,I[11]=T,I[15]=N,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Gt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/$g.setFromMatrixColumn(e,0).length(),s=1/$g.setFromMatrixColumn(e,1).length(),o=1/$g.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),d=Math.sin(r),p=Math.cos(s),g=Math.sin(s);if("XYZ"===e.order){const _=o*p,y=o*g,x=a*p,T=a*g;t[0]=c*p,t[4]=-c*g,t[8]=d,t[1]=y+x*d,t[5]=_-T*d,t[9]=-a*c,t[2]=T-_*d,t[6]=x+y*d,t[10]=o*c}else if("YXZ"===e.order){const _=c*p,y=c*g,x=d*p,T=d*g;t[0]=_+T*a,t[4]=x*a-y,t[8]=o*d,t[1]=o*g,t[5]=o*p,t[9]=-a,t[2]=y*a-x,t[6]=T+_*a,t[10]=o*c}else if("ZXY"===e.order){const _=c*p,y=c*g,x=d*p,T=d*g;t[0]=_-T*a,t[4]=-o*g,t[8]=x+y*a,t[1]=y+x*a,t[5]=o*p,t[9]=T-_*a,t[2]=-o*d,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const _=o*p,y=o*g,x=a*p,T=a*g;t[0]=c*p,t[4]=x*d-y,t[8]=_*d+T,t[1]=c*g,t[5]=T*d+_,t[9]=y*d-x,t[2]=-d,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const _=o*c,y=o*d,x=a*c,T=a*d;t[0]=c*p,t[4]=T-_*g,t[8]=x*g+y,t[1]=g,t[5]=o*p,t[9]=-a*p,t[2]=-d*p,t[6]=y*g+x,t[10]=_-T*g}else if("XZY"===e.order){const _=o*c,y=o*d,x=a*c,T=a*d;t[0]=c*p,t[4]=-g,t[8]=d*p,t[1]=_*g+T,t[5]=o*p,t[9]=y*g-x,t[2]=x*g-y,t[6]=a*p,t[10]=T*g+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Zie,e,Jie)}lookAt(e,t,i){const r=this.elements;return ic.subVectors(e,t),0===ic.lengthSq()&&(ic.z=1),ic.normalize(),uh.crossVectors(i,ic),0===uh.lengthSq()&&(1===Math.abs(i.z)?ic.x+=1e-4:ic.z+=1e-4,ic.normalize(),uh.crossVectors(i,ic)),uh.normalize(),WS.crossVectors(ic,uh),r[0]=uh.x,r[4]=WS.x,r[8]=ic.x,r[1]=uh.y,r[5]=WS.y,r[9]=ic.y,r[2]=uh.z,r[6]=WS.z,r[10]=ic.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],d=i[12],p=i[1],g=i[5],_=i[9],y=i[13],x=i[2],T=i[6],N=i[10],I=i[14],A=i[3],H=i[7],G=i[11],X=i[15],re=r[0],K=r[4],he=r[8],De=r[12],Te=r[1],ge=r[5],Ze=r[9],Pe=r[13],ke=r[2],Be=r[6],ye=r[10],Ee=r[14],je=r[3],lt=r[7],Ue=r[11],qe=r[15];return s[0]=o*re+a*Te+c*ke+d*je,s[4]=o*K+a*ge+c*Be+d*lt,s[8]=o*he+a*Ze+c*ye+d*Ue,s[12]=o*De+a*Pe+c*Ee+d*qe,s[1]=p*re+g*Te+_*ke+y*je,s[5]=p*K+g*ge+_*Be+y*lt,s[9]=p*he+g*Ze+_*ye+y*Ue,s[13]=p*De+g*Pe+_*Ee+y*qe,s[2]=x*re+T*Te+N*ke+I*je,s[6]=x*K+T*ge+N*Be+I*lt,s[10]=x*he+T*Ze+N*ye+I*Ue,s[14]=x*De+T*Pe+N*Ee+I*qe,s[3]=A*re+H*Te+G*ke+X*je,s[7]=A*K+H*ge+G*Be+X*lt,s[11]=A*he+H*Ze+G*ye+X*Ue,s[15]=A*De+H*Pe+G*Ee+X*qe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],d=e[13],p=e[2],g=e[6],_=e[10],y=e[14];return e[3]*(+s*c*g-r*d*g-s*a*_+i*d*_+r*a*y-i*c*y)+e[7]*(+t*c*y-t*d*_+s*o*_-r*o*y+r*d*p-s*c*p)+e[11]*(+t*d*g-t*a*y-s*o*g+i*o*y+s*a*p-i*d*p)+e[15]*(-r*a*p-t*c*g+t*a*_+r*o*g-i*o*_+i*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],d=e[7],p=e[8],g=e[9],_=e[10],y=e[11],x=e[12],T=e[13],N=e[14],I=e[15],A=g*N*d-T*_*d+T*c*y-a*N*y-g*c*I+a*_*I,H=x*_*d-p*N*d-x*c*y+o*N*y+p*c*I-o*_*I,G=p*T*d-x*g*d+x*a*y-o*T*y-p*a*I+o*g*I,X=x*g*c-p*T*c-x*a*_+o*T*_+p*a*N-o*g*N,re=t*A+i*H+r*G+s*X;if(0===re)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const K=1/re;return e[0]=A*K,e[1]=(T*_*s-g*N*s-T*r*y+i*N*y+g*r*I-i*_*I)*K,e[2]=(a*N*s-T*c*s+T*r*d-i*N*d-a*r*I+i*c*I)*K,e[3]=(g*c*s-a*_*s-g*r*d+i*_*d+a*r*y-i*c*y)*K,e[4]=H*K,e[5]=(p*N*s-x*_*s+x*r*y-t*N*y-p*r*I+t*_*I)*K,e[6]=(x*c*s-o*N*s-x*r*d+t*N*d+o*r*I-t*c*I)*K,e[7]=(o*_*s-p*c*s+p*r*d-t*_*d-o*r*y+t*c*y)*K,e[8]=G*K,e[9]=(x*g*s-p*T*s-x*i*y+t*T*y+p*i*I-t*g*I)*K,e[10]=(o*T*s-x*a*s+x*i*d-t*T*d-o*i*I+t*a*I)*K,e[11]=(p*a*s-o*g*s-p*i*d+t*g*d+o*i*y-t*a*y)*K,e[12]=X*K,e[13]=(p*T*r-x*g*r+x*i*_-t*T*_-p*i*N+t*g*N)*K,e[14]=(x*a*r-o*T*r-x*i*c+t*T*c+o*i*N-t*a*N)*K,e[15]=(o*g*r-p*a*r+p*i*c-t*g*c-o*i*_+t*a*_)*K,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,d=s*o,p=s*a;return this.set(d*o+i,d*a-r*c,d*c+r*a,0,d*a+r*c,p*a+i,p*c-r*o,0,d*c-r*a,p*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,d=s+s,p=o+o,g=a+a,_=s*d,y=s*p,x=s*g,T=o*p,N=o*g,I=a*g,A=c*d,H=c*p,G=c*g,X=i.x,re=i.y,K=i.z;return r[0]=(1-(T+I))*X,r[1]=(y+G)*X,r[2]=(x-H)*X,r[3]=0,r[4]=(y-G)*re,r[5]=(1-(_+I))*re,r[6]=(N+A)*re,r[7]=0,r[8]=(x+H)*K,r[9]=(N-A)*K,r[10]=(1-(_+T))*K,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=$g.set(r[0],r[1],r[2]).length();const o=$g.set(r[4],r[5],r[6]).length(),a=$g.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],fl.copy(this);const d=1/s,p=1/o,g=1/a;return fl.elements[0]*=d,fl.elements[1]*=d,fl.elements[2]*=d,fl.elements[4]*=p,fl.elements[5]*=p,fl.elements[6]*=p,fl.elements[8]*=g,fl.elements[9]*=g,fl.elements[10]*=g,t.setFromRotationMatrix(fl),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,d=2*s/(i-r),p=(t+e)/(t-e),g=(i+r)/(i-r),_=-(o+s)/(o-s),y=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=p,a[12]=0,a[1]=0,a[5]=d,a[9]=g,a[13]=0,a[2]=0,a[6]=0,a[10]=_,a[14]=y,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),d=1/(i-r),p=1/(o-s),g=(t+e)*c,_=(i+r)*d,y=(o+s)*p;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-g,a[1]=0,a[5]=2*d,a[9]=0,a[13]=-_,a[2]=0,a[6]=0,a[10]=-2*p,a[14]=-y,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Gt.prototype.isMatrix4=!0;const $g=new ne,fl=new Gt,Zie=new ne(0,0,0),Jie=new ne(1,1,1),uh=new ne,WS=new ne,ic=new ne,W8=new Gt,$8=new Ho;class qg{constructor(e=0,t=0,i=0,r=qg.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],c=r[1],d=r[5],p=r[9],g=r[2],_=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(wo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(_,d),this._z=0);break;case"YXZ":this._x=Math.asin(-wo(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(wo(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-wo(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(_,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(wo(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-wo(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(_,d),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return W8.makeRotationFromQuaternion(e),this.setFromRotationMatrix(W8,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return $8.setFromEuler(this),this.setFromQuaternion($8,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ne(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}qg.prototype.isEuler=!0,qg.DefaultOrder="XYZ",qg.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class q8{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Qie=0;const K8=new ne,Kg=new Ho,$u=new Gt,$S=new ne,My=new ne,ere=new ne,tre=new Ho,Y8=new ne(1,0,0),X8=new ne(0,1,0),Z8=new ne(0,0,1),nre={type:"added"},J8={type:"removed"};class Ui extends Qf{constructor(){super(),Object.defineProperty(this,"id",{value:Qie++}),this.uuid=nc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ui.DefaultUp.clone();const e=new ne,t=new qg,i=new Ho,r=new ne(1,1,1);t._onChange(function s(){i.setFromEuler(t,!1)}),i._onChange(function o(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Gt},normalMatrix:{value:new Us}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=Ui.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new q8,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Kg.setFromAxisAngle(e,t),this.quaternion.multiply(Kg),this}rotateOnWorldAxis(e,t){return Kg.setFromAxisAngle(e,t),this.quaternion.premultiply(Kg),this}rotateX(e){return this.rotateOnAxis(Y8,e)}rotateY(e){return this.rotateOnAxis(X8,e)}rotateZ(e){return this.rotateOnAxis(Z8,e)}translateOnAxis(e,t){return K8.copy(e).applyQuaternion(this.quaternion),this.position.add(K8.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Y8,e)}translateY(e){return this.translateOnAxis(X8,e)}translateZ(e){return this.translateOnAxis(Z8,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4($u.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?$S.copy(e):$S.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),My.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$u.lookAt(My,$S,this.up):$u.lookAt($S,My,this.up),this.quaternion.setFromRotationMatrix($u),r&&($u.extractRotation(r.matrixWorld),Kg.setFromRotationMatrix($u),this.quaternion.premultiply(Kg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(nre)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(J8)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(J8)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),$u.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),$u.multiply(e.parent.matrixWorld)),e.applyMatrix4($u),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(My,e,ere),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(My,tre,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(a,c){return void 0===a[c.uuid]&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const c=a.shapes;if(Array.isArray(c))for(let d=0,p=c.length;d<p;d++)s(e.shapes,c[d]);else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let c=0,d=this.material.length;c<d;c++)a.push(s(e.materials,this.material[c]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),c=o(e.materials),d=o(e.textures),p=o(e.images),g=o(e.shapes),_=o(e.skeletons),y=o(e.animations);a.length>0&&(i.geometries=a),c.length>0&&(i.materials=c),d.length>0&&(i.textures=d),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),_.length>0&&(i.skeletons=_),y.length>0&&(i.animations=y)}return i.object=r,i;function o(a){const c=[];for(const d in a){const p=a[d];delete p.metadata,c.push(p)}return c}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++)this.add(e.children[i].clone());return this}}Ui.DefaultUp=new ne(0,1,0),Ui.DefaultMatrixAutoUpdate=!0,Ui.prototype.isObject3D=!0;const pl=new ne,qu=new ne,bI=new ne,Ku=new ne,Yg=new ne,Xg=new ne,Q8=new ne,xI=new ne,wI=new ne,SI=new ne;class Es{constructor(e=new ne,t=new ne,i=new ne){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),pl.subVectors(e,t),r.cross(pl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){pl.subVectors(r,t),qu.subVectors(i,t),bI.subVectors(e,t);const o=pl.dot(pl),a=pl.dot(qu),c=pl.dot(bI),d=qu.dot(qu),p=qu.dot(bI),g=o*d-a*a;if(0===g)return s.set(-2,-1,-1);const _=1/g,y=(d*c-a*p)*_,x=(o*p-a*c)*_;return s.set(1-y-x,x,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ku),Ku.x>=0&&Ku.y>=0&&Ku.x+Ku.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,Ku),c.set(0,0),c.addScaledVector(s,Ku.x),c.addScaledVector(o,Ku.y),c.addScaledVector(a,Ku.z),c}static isFrontFacing(e,t,i,r){return pl.subVectors(i,t),qu.subVectors(e,t),pl.cross(qu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pl.subVectors(this.c,this.b),qu.subVectors(this.a,this.b),.5*pl.cross(qu).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Es.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Es.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Es.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Es.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Es.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Yg.subVectors(r,i),Xg.subVectors(s,i),xI.subVectors(e,i);const c=Yg.dot(xI),d=Xg.dot(xI);if(c<=0&&d<=0)return t.copy(i);wI.subVectors(e,r);const p=Yg.dot(wI),g=Xg.dot(wI);if(p>=0&&g<=p)return t.copy(r);const _=c*g-p*d;if(_<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(i).addScaledVector(Yg,o);SI.subVectors(e,s);const y=Yg.dot(SI),x=Xg.dot(SI);if(x>=0&&y<=x)return t.copy(s);const T=y*d-c*x;if(T<=0&&d>=0&&x<=0)return a=d/(d-x),t.copy(i).addScaledVector(Xg,a);const N=p*x-y*g;if(N<=0&&g-p>=0&&y-x>=0)return Q8.subVectors(s,r),a=(g-p)/(g-p+(y-x)),t.copy(r).addScaledVector(Q8,a);const I=1/(N+T+_);return o=T*I,a=_*I,t.copy(i).addScaledVector(Yg,o).addScaledVector(Xg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ire=0;class So extends Qf{constructor(){super(),Object.defineProperty(this,"id",{value:ire++}),this.uuid=nc(),this.name="",this.type="Material",this.fog=!0,this.blending=gy,this.side=Tg,this.vertexColors=!1,this.opacity=1,this.format=Vo,this.transparent=!1,this.blendSrc=x8,this.blendDst=w8,this.blendEquation=Ig,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=QA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==gy&&(i.blending=this.blending),this.side!==Tg&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==Vo&&(i.format=this.format),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}So.prototype.isMaterial=!0;const eB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ml={h:0,s:0,l:0},qS={h:0,s:0,l:0};function EI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function MI(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function CI(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Rt=(()=>{class n{constructor(t,i,r){return void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,i,r){return this.r=t,this.g=i,this.b=r,this}setHSL(t,i,r){if(t=function cI(n,e){return(n%e+e)%e}(t,1),i=wo(i,0,1),r=wo(r,0,1),0===i)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+i):r+i-r*i,o=2*r-s;this.r=EI(o,s,t+1/3),this.g=EI(o,s,t),this.b=EI(o,s,t-1/3)}return this}setStyle(t){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const c=parseFloat(s[1])/360,d=parseInt(s[2],10)/100,p=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(c,d,p)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===o)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const i=eB[t.toLowerCase()];return void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,i=2){return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}copyLinearToGamma(t,i=2){const r=i>0?1/i:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=MI(t.r),this.g=MI(t.g),this.b=MI(t.b),this}copyLinearToSRGB(t){return this.r=CI(t.r),this.g=CI(t.g),this.b=CI(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const i=this.r,r=this.g,s=this.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let c,d;const p=(a+o)/2;if(a===o)c=0,d=0;else{const g=o-a;switch(d=p<=.5?g/(o+a):g/(2-o-a),o){case i:c=(r-s)/g+(r<s?6:0);break;case r:c=(s-i)/g+2;break;case s:c=(i-r)/g+4}c/=6}return t.h=c,t.s=d,t.l=p,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,i,r){return this.getHSL(ml),ml.h+=t,ml.s+=i,ml.l+=r,this.setHSL(ml.h,ml.s,ml.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(ml),t.getHSL(qS);const r=wy(ml.h,qS.h,i),s=wy(ml.s,qS.s,i),o=wy(ml.l,qS.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=eB,n})();Rt.prototype.isColor=!0,Rt.prototype.r=1,Rt.prototype.g=1,Rt.prototype.b=1;class dh extends So{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=TS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}dh.prototype.isMeshBasicMaterial=!0;const or=new ne,KS=new tt;class Li{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=yy,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Rt),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new tt),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new ne),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Ji),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)KS.fromBufferAttribute(this,t),KS.applyMatrix3(e),this.setXY(t,KS.x,KS.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.applyMatrix3(e),this.setXYZ(t,or.x,or.y,or.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)or.x=this.getX(t),or.y=this.getY(t),or.z=this.getZ(t),or.applyMatrix4(e),this.setXYZ(t,or.x,or.y,or.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)or.x=this.getX(t),or.y=this.getY(t),or.z=this.getZ(t),or.applyNormalMatrix(e),this.setXYZ(t,or.x,or.y,or.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)or.x=this.getX(t),or.y=this.getY(t),or.z=this.getZ(t),or.transformDirection(e),this.setXYZ(t,or.x,or.y,or.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==yy&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Li.prototype.isBufferAttribute=!0;class DI extends Li{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class TI extends Li{constructor(e,t,i){super(new Uint32Array(e),t,i)}}(class lre extends Li{constructor(e,t,i){super(new Uint16Array(e),t,i)}}).prototype.isFloat16BufferAttribute=!0;class jt extends Li{constructor(e,t,i){super(new Float32Array(e),t,i)}}let dre=0;const Vc=new Gt,AI=new Ui,Zg=new ne,rc=new Bc,Cy=new Bc,to=new ne;class pn extends Qf{constructor(){super(),Object.defineProperty(this,"id",{value:dre++}),this.uuid=nc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(U8(e)>65535?TI:DI)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Us).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Vc.makeRotationFromQuaternion(e),this.applyMatrix4(Vc),this}rotateX(e){return Vc.makeRotationX(e),this.applyMatrix4(Vc),this}rotateY(e){return Vc.makeRotationY(e),this.applyMatrix4(Vc),this}rotateZ(e){return Vc.makeRotationZ(e),this.applyMatrix4(Vc),this}translate(e,t,i){return Vc.makeTranslation(e,t,i),this.applyMatrix4(Vc),this}scale(e,t,i){return Vc.makeScale(e,t,i),this.applyMatrix4(Vc),this}lookAt(e){return AI.lookAt(e),AI.updateMatrix(),this.applyMatrix4(AI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zg).negate(),this.translate(Zg.x,Zg.y,Zg.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new jt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Bc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)rc.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(to.addVectors(this.boundingBox.min,rc.min),this.boundingBox.expandByPoint(to),to.addVectors(this.boundingBox.max,rc.max),this.boundingBox.expandByPoint(to)):(this.boundingBox.expandByPoint(rc.min),this.boundingBox.expandByPoint(rc.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ip);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ne,1/0);if(e){const i=this.boundingSphere.center;if(rc.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Cy.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(to.addVectors(rc.min,Cy.min),rc.expandByPoint(to),to.addVectors(rc.max,Cy.max),rc.expandByPoint(to)):(rc.expandByPoint(Cy.min),rc.expandByPoint(Cy.max));rc.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)to.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(to));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let d=0,p=a.count;d<p;d++)to.fromBufferAttribute(a,d),c&&(Zg.fromBufferAttribute(e,d),to.add(Zg)),r=Math.max(r,i.distanceToSquared(to))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Li(new Float32Array(4*a),4));const c=t.tangent.array,d=[],p=[];for(let Te=0;Te<a;Te++)d[Te]=new ne,p[Te]=new ne;const g=new ne,_=new ne,y=new ne,x=new tt,T=new tt,N=new tt,I=new ne,A=new ne;function H(Te,ge,Ze){g.fromArray(r,3*Te),_.fromArray(r,3*ge),y.fromArray(r,3*Ze),x.fromArray(o,2*Te),T.fromArray(o,2*ge),N.fromArray(o,2*Ze),_.sub(g),y.sub(g),T.sub(x),N.sub(x);const Pe=1/(T.x*N.y-N.x*T.y);isFinite(Pe)&&(I.copy(_).multiplyScalar(N.y).addScaledVector(y,-T.y).multiplyScalar(Pe),A.copy(y).multiplyScalar(T.x).addScaledVector(_,-N.x).multiplyScalar(Pe),d[Te].add(I),d[ge].add(I),d[Ze].add(I),p[Te].add(A),p[ge].add(A),p[Ze].add(A))}let G=this.groups;0===G.length&&(G=[{start:0,count:i.length}]);for(let Te=0,ge=G.length;Te<ge;++Te){const Ze=G[Te],Pe=Ze.start;for(let Be=Pe,ye=Pe+Ze.count;Be<ye;Be+=3)H(i[Be+0],i[Be+1],i[Be+2])}const X=new ne,re=new ne,K=new ne,he=new ne;function De(Te){K.fromArray(s,3*Te),he.copy(K);const ge=d[Te];X.copy(ge),X.sub(K.multiplyScalar(K.dot(ge))).normalize(),re.crossVectors(he,ge);const Pe=re.dot(p[Te])<0?-1:1;c[4*Te]=X.x,c[4*Te+1]=X.y,c[4*Te+2]=X.z,c[4*Te+3]=Pe}for(let Te=0,ge=G.length;Te<ge;++Te){const Ze=G[Te],Pe=Ze.start;for(let Be=Pe,ye=Pe+Ze.count;Be<ye;Be+=3)De(i[Be+0]),De(i[Be+1]),De(i[Be+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Li(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let _=0,y=i.count;_<y;_++)i.setXYZ(_,0,0,0);const r=new ne,s=new ne,o=new ne,a=new ne,c=new ne,d=new ne,p=new ne,g=new ne;if(e)for(let _=0,y=e.count;_<y;_+=3){const x=e.getX(_+0),T=e.getX(_+1),N=e.getX(_+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,T),o.fromBufferAttribute(t,N),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),a.fromBufferAttribute(i,x),c.fromBufferAttribute(i,T),d.fromBufferAttribute(i,N),a.add(p),c.add(p),d.add(p),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(T,c.x,c.y,c.z),i.setXYZ(N,d.x,d.y,d.z)}else for(let _=0,y=t.count;_<y;_+=3)r.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),o.fromBufferAttribute(t,_+2),p.subVectors(o,s),g.subVectors(r,s),p.cross(g),i.setXYZ(_+0,p.x,p.y,p.z),i.setXYZ(_+1,p.x,p.y,p.z),i.setXYZ(_+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===e.attributes[r])continue;const o=i[r].array,a=e.attributes[r],c=a.array,d=a.itemSize*t,p=Math.min(c.length,o.length-d);for(let g=0,_=d;g<p;g++,_++)o[_]=c[g]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)to.fromBufferAttribute(e,t),to.normalize(),e.setXYZ(t,to.x,to.y,to.z)}toNonIndexed(){function e(a,c){const d=a.array,p=a.itemSize,g=a.normalized,_=new d.constructor(c.length*p);let y=0,x=0;for(let T=0,N=c.length;T<N;T++){y=a.isInterleavedBufferAttribute?c[T]*a.data.stride+a.offset:c[T]*p;for(let I=0;I<p;I++)_[x++]=d[y++]}return new Li(_,p,g)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new pn,i=this.index.array,r=this.attributes;for(const a in r){const d=e(r[a],i);t.setAttribute(a,d)}const s=this.morphAttributes;for(const a in s){const c=[],d=s[a];for(let p=0,g=d.length;p<g;p++){const y=e(d[p],i);c.push(y)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const d=o[a];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const d in c)void 0!==c[d]&&(e[d]=c[d]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],p=[];for(let g=0,_=d.length;g<_;g++)p.push(d[g].toJSON(e.data));p.length>0&&(r[c]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const d in r)this.setAttribute(d,r[d].clone(t));const s=e.morphAttributes;for(const d in s){const p=[],g=s[d];for(let _=0,y=g.length;_<y;_++)p.push(g[_].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const g=o[d];this.addGroup(g.start,g.count,g.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}pn.prototype.isBufferGeometry=!0;const tB=new Gt,Jg=new rp,II=new ip,hh=new ne,fh=new ne,ph=new ne,FI=new ne,RI=new ne,PI=new ne,YS=new ne,XS=new ne,ZS=new ne,JS=new tt,QS=new tt,eE=new tt,kI=new ne,tE=new ne;class gr extends Ui{constructor(e=new pn,t=new dh){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),II.copy(i.boundingSphere),II.applyMatrix4(s),!1===e.ray.intersectsSphere(II))||(tB.copy(s).invert(),Jg.copy(e.ray).applyMatrix4(tB),null!==i.boundingBox&&!1===Jg.intersectsBox(i.boundingBox)))return;let o;if(i.isBufferGeometry){const a=i.index,c=i.attributes.position,d=i.morphAttributes.position,p=i.morphTargetsRelative,g=i.attributes.uv,_=i.attributes.uv2,y=i.groups,x=i.drawRange;if(null!==a)if(Array.isArray(r))for(let T=0,N=y.length;T<N;T++){const I=y[T],A=r[I.materialIndex];for(let X=Math.max(I.start,x.start),re=Math.min(a.count,Math.min(I.start+I.count,x.start+x.count));X<re;X+=3){const K=a.getX(X),he=a.getX(X+1),De=a.getX(X+2);o=nE(this,A,e,Jg,c,d,p,g,_,K,he,De),o&&(o.faceIndex=Math.floor(X/3),o.face.materialIndex=I.materialIndex,t.push(o))}}else for(let I=Math.max(0,x.start),A=Math.min(a.count,x.start+x.count);I<A;I+=3){const H=a.getX(I),G=a.getX(I+1),X=a.getX(I+2);o=nE(this,r,e,Jg,c,d,p,g,_,H,G,X),o&&(o.faceIndex=Math.floor(I/3),t.push(o))}else if(void 0!==c)if(Array.isArray(r))for(let T=0,N=y.length;T<N;T++){const I=y[T],A=r[I.materialIndex];for(let X=Math.max(I.start,x.start),re=Math.min(c.count,Math.min(I.start+I.count,x.start+x.count));X<re;X+=3)o=nE(this,A,e,Jg,c,d,p,g,_,X,X+1,X+2),o&&(o.faceIndex=Math.floor(X/3),o.face.materialIndex=I.materialIndex,t.push(o))}else for(let I=Math.max(0,x.start),A=Math.min(c.count,x.start+x.count);I<A;I+=3)o=nE(this,r,e,Jg,c,d,p,g,_,I,I+1,I+2),o&&(o.faceIndex=Math.floor(I/3),t.push(o))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function nE(n,e,t,i,r,s,o,a,c,d,p,g){hh.fromBufferAttribute(r,d),fh.fromBufferAttribute(r,p),ph.fromBufferAttribute(r,g);const _=n.morphTargetInfluences;if(s&&_){YS.set(0,0,0),XS.set(0,0,0),ZS.set(0,0,0);for(let x=0,T=s.length;x<T;x++){const N=_[x],I=s[x];0!==N&&(FI.fromBufferAttribute(I,d),RI.fromBufferAttribute(I,p),PI.fromBufferAttribute(I,g),o?(YS.addScaledVector(FI,N),XS.addScaledVector(RI,N),ZS.addScaledVector(PI,N)):(YS.addScaledVector(FI.sub(hh),N),XS.addScaledVector(RI.sub(fh),N),ZS.addScaledVector(PI.sub(ph),N)))}hh.add(YS),fh.add(XS),ph.add(ZS)}n.isSkinnedMesh&&(n.boneTransform(d,hh),n.boneTransform(p,fh),n.boneTransform(g,ph));const y=function hre(n,e,t,i,r,s,o,a){let c;if(c=e.side===Ss?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side!==Ag,a),null===c)return null;tE.copy(a),tE.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(tE);return d<t.near||d>t.far?null:{distance:d,point:tE.clone(),object:n}}(n,e,t,i,hh,fh,ph,kI);if(y){a&&(JS.fromBufferAttribute(a,d),QS.fromBufferAttribute(a,p),eE.fromBufferAttribute(a,g),y.uv=Es.getUV(kI,hh,fh,ph,JS,QS,eE,new tt)),c&&(JS.fromBufferAttribute(c,d),QS.fromBufferAttribute(c,p),eE.fromBufferAttribute(c,g),y.uv2=Es.getUV(kI,hh,fh,ph,JS,QS,eE,new tt));const x={a:d,b:p,c:g,normal:new ne,materialIndex:0};Es.getNormal(hh,fh,ph,x.normal),y.face=x}return y}gr.prototype.isMesh=!0;class Yu extends pn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],d=[],p=[],g=[];let _=0,y=0;function x(T,N,I,A,H,G,X,re,K,he,De){const Te=G/K,ge=X/he,Ze=G/2,Pe=X/2,ke=re/2,Be=K+1,ye=he+1;let Ee=0,je=0;const lt=new ne;for(let Ue=0;Ue<ye;Ue++){const qe=Ue*ge-Pe;for(let vt=0;vt<Be;vt++)lt[T]=(vt*Te-Ze)*A,lt[N]=qe*H,lt[I]=ke,d.push(lt.x,lt.y,lt.z),lt[T]=0,lt[N]=0,lt[I]=re>0?1:-1,p.push(lt.x,lt.y,lt.z),g.push(vt/K),g.push(1-Ue/he),Ee+=1}for(let Ue=0;Ue<he;Ue++)for(let qe=0;qe<K;qe++){const _t=_+qe+Be*(Ue+1),mt=_+(qe+1)+Be*(Ue+1),di=_+(qe+1)+Be*Ue;c.push(_+qe+Be*Ue,_t,di),c.push(_t,mt,di),je+=6}a.addGroup(y,je,De),y+=je,_+=Ee}x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new jt(d,3)),this.setAttribute("normal",new jt(p,3)),this.setAttribute("uv",new jt(g,2))}static fromJSON(e){return new Yu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qg(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Uo(n){const e={};for(let t=0;t<n.length;t++){const i=Qg(n[t]);for(const r in i)e[r]=i[r]}return e}const fre={clone:Qg,merge:Uo};class mh extends So{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qg(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}mh.prototype.isShaderMaterial=!0;class iE extends Ui{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}iE.prototype.isCamera=!0;class Eo extends iE{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*xy*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ep*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*xy*Math.atan(Math.tan(.5*ep*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ep*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/d,r*=o.width/c,i*=o.height/d}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Eo.prototype.isPerspectiveCamera=!0;class OI extends Ui{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new Eo(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ne(1,0,0)),this.add(r);const s=new Eo(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ne(-1,0,0)),this.add(s);const o=new Eo(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ne(0,1,0)),this.add(o);const a=new Eo(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ne(0,-1,0)),this.add(a);const c=new Eo(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ne(0,0,1)),this.add(c);const d=new Eo(90,1,e,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new ne(0,0,-1)),this.add(d)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,d]=this.children,p=e.xr.enabled,g=e.getRenderTarget();e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5),e.render(t,d),e.setRenderTarget(g),e.xr.enabled=p}}class Dy extends eo{constructor(e,t,i,r,s,o,a,c,d,p){super(e=void 0!==e?e:[],t=void 0!==t?t:Fg,i,r,s,o,a,c,d,p),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Dy.prototype.isCubeTexture=!0;class LI extends Nc{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),this.texture=new Dy(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Qs,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Vo,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Yu(5,5,5),s=new mh({name:"CubemapFromEquirect",uniforms:Qg(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:Ss,blending:sh});s.uniforms.tEquirect.value=t;const o=new gr(r,s),a=t.minFilter;return t.minFilter===Pg&&(t.minFilter=Qs),new OI(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}LI.prototype.isWebGLCubeRenderTarget=!0;const NI=new ne,gre=new ne,vre=new Us;class Xu{constructor(e=new ne(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=NI.subVectors(i,t).cross(gre.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(NI),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||vre.getNormalMatrix(e),r=this.coplanarPoint(NI).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Xu.prototype.isPlane=!0;const n0=new ip,rE=new ne;class sE{constructor(e=new Xu,t=new Xu,i=new Xu,r=new Xu,s=new Xu,o=new Xu){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],d=i[5],p=i[6],g=i[7],_=i[8],y=i[9],x=i[10],T=i[11],N=i[12],I=i[13],A=i[14],H=i[15];return t[0].setComponents(a-r,g-c,T-_,H-N).normalize(),t[1].setComponents(a+r,g+c,T+_,H+N).normalize(),t[2].setComponents(a+s,g+d,T+y,H+I).normalize(),t[3].setComponents(a-s,g-d,T-y,H-I).normalize(),t[4].setComponents(a-o,g-p,T-x,H-A).normalize(),t[5].setComponents(a+o,g+p,T+x,H+A).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),n0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(n0)}intersectsSprite(e){return n0.center.set(0,0,0),n0.radius=.7071067811865476,n0.applyMatrix4(e.matrixWorld),this.intersectsSphere(n0)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(rE.x=r.normal.x>0?e.max.x:e.min.x,rE.y=r.normal.y>0?e.max.y:e.min.y,rE.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(rE)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function nB(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function _re(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(d){return d.isInterleavedBufferAttribute&&(d=d.data),i.get(d)},remove:function a(d){d.isInterleavedBufferAttribute&&(d=d.data);const p=i.get(d);p&&(n.deleteBuffer(p.buffer),i.delete(d))},update:function c(d,p){if(d.isGLBufferAttribute){const _=i.get(d);return void((!_||_.version<d.version)&&i.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version}))}d.isInterleavedBufferAttribute&&(d=d.data);const g=i.get(d);void 0===g?i.set(d,function r(d,p){const g=d.array,_=d.usage,y=n.createBuffer();n.bindBuffer(p,y),n.bufferData(p,g,_),d.onUploadCallback();let x=5126;return g instanceof Float32Array?x=5126:g instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):g instanceof Uint16Array?d.isFloat16BufferAttribute?t?x=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):x=5123:g instanceof Int16Array?x=5122:g instanceof Uint32Array?x=5125:g instanceof Int32Array?x=5124:g instanceof Int8Array?x=5120:(g instanceof Uint8Array||g instanceof Uint8ClampedArray)&&(x=5121),{buffer:y,type:x,bytesPerElement:g.BYTES_PER_ELEMENT,version:d.version}}(d,p)):g.version<d.version&&(function s(d,p,g){const _=p.array,y=p.updateRange;n.bindBuffer(g,d),-1===y.count?n.bufferSubData(g,0,_):(t?n.bufferSubData(g,y.offset*_.BYTES_PER_ELEMENT,_,y.offset,y.count):n.bufferSubData(g,y.offset*_.BYTES_PER_ELEMENT,_.subarray(y.offset,y.offset+y.count)),y.count=-1)}(g.buffer,d,p),g.version=d.version)}}}class Ty extends pn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),d=a+1,p=c+1,g=e/a,_=t/c,y=[],x=[],T=[],N=[];for(let I=0;I<p;I++){const A=I*_-o;for(let H=0;H<d;H++)x.push(H*g-s,-A,0),T.push(0,0,1),N.push(H/a),N.push(1-I/c)}for(let I=0;I<c;I++)for(let A=0;A<a;A++){const G=A+d*(I+1),X=A+1+d*(I+1),re=A+1+d*I;y.push(A+d*I,G,re),y.push(G,X,re)}this.setIndex(y),this.setAttribute("position",new jt(x,3)),this.setAttribute("normal",new jt(T,3)),this.setAttribute("uv",new jt(N,2))}static fromJSON(e){return new Ty(e.width,e.height,e.widthSegments,e.heightSegments)}}const ui={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Et={common:{diffuse:{value:new Rt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Us},uv2Transform:{value:new Us},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Us}},sprite:{diffuse:{value:new Rt(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Us}}},Xl={basic:{uniforms:Uo([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.fog]),vertexShader:ui.meshbasic_vert,fragmentShader:ui.meshbasic_frag},lambert:{uniforms:Uo([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.fog,Et.lights,{emissive:{value:new Rt(0)}}]),vertexShader:ui.meshlambert_vert,fragmentShader:ui.meshlambert_frag},phong:{uniforms:Uo([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new Rt(0)},specular:{value:new Rt(1118481)},shininess:{value:30}}]),vertexShader:ui.meshphong_vert,fragmentShader:ui.meshphong_frag},standard:{uniforms:Uo([Et.common,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.roughnessmap,Et.metalnessmap,Et.fog,Et.lights,{emissive:{value:new Rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag},toon:{uniforms:Uo([Et.common,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.gradientmap,Et.fog,Et.lights,{emissive:{value:new Rt(0)}}]),vertexShader:ui.meshtoon_vert,fragmentShader:ui.meshtoon_frag},matcap:{uniforms:Uo([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,{matcap:{value:null}}]),vertexShader:ui.meshmatcap_vert,fragmentShader:ui.meshmatcap_frag},points:{uniforms:Uo([Et.points,Et.fog]),vertexShader:ui.points_vert,fragmentShader:ui.points_frag},dashed:{uniforms:Uo([Et.common,Et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ui.linedashed_vert,fragmentShader:ui.linedashed_frag},depth:{uniforms:Uo([Et.common,Et.displacementmap]),vertexShader:ui.depth_vert,fragmentShader:ui.depth_frag},normal:{uniforms:Uo([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,{opacity:{value:1}}]),vertexShader:ui.meshnormal_vert,fragmentShader:ui.meshnormal_frag},sprite:{uniforms:Uo([Et.sprite,Et.fog]),vertexShader:ui.sprite_vert,fragmentShader:ui.sprite_frag},background:{uniforms:{uvTransform:{value:new Us},t2D:{value:null}},vertexShader:ui.background_vert,fragmentShader:ui.background_frag},cube:{uniforms:Uo([Et.envmap,{opacity:{value:1}}]),vertexShader:ui.cube_vert,fragmentShader:ui.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ui.equirect_vert,fragmentShader:ui.equirect_frag},distanceRGBA:{uniforms:Uo([Et.common,Et.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ui.distanceRGBA_vert,fragmentShader:ui.distanceRGBA_frag},shadow:{uniforms:Uo([Et.lights,Et.fog,{color:{value:new Rt(0)},opacity:{value:1}}]),vertexShader:ui.shadow_vert,fragmentShader:ui.shadow_frag}};function foe(n,e,t,i,r){const s=new Rt(0);let a,c,o=0,d=null,p=0,g=null;function y(x,T){t.buffers.color.setClear(x.r,x.g,x.b,T,r)}return{getClearColor:function(){return s},setClearColor:function(x,T=1){s.set(x),o=T,y(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(x){o=x,y(s,o)},render:function _(x,T){let N=!1,I=!0===T.isScene?T.background:null;I&&I.isTexture&&(I=e.get(I));const A=n.xr,H=A.getSession&&A.getSession();H&&"additive"===H.environmentBlendMode&&(I=null),null===I?y(s,o):I&&I.isColor&&(y(I,1),N=!0),(n.autoClear||N)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),I&&(I.isCubeTexture||I.mapping===vy)?(void 0===c&&(c=new gr(new Yu(1,1,1),new mh({name:"BackgroundCubeMaterial",uniforms:Qg(Xl.cube.uniforms),vertexShader:Xl.cube.vertexShader,fragmentShader:Xl.cube.fragmentShader,side:Ss,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(G,X,re){this.matrixWorld.copyPosition(re.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=I,c.material.uniforms.flipEnvMap.value=I.isCubeTexture&&!1===I.isRenderTargetTexture?-1:1,(d!==I||p!==I.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,d=I,p=I.version,g=n.toneMapping),x.unshift(c,c.geometry,c.material,0,0,null)):I&&I.isTexture&&(void 0===a&&(a=new gr(new Ty(2,2),new mh({name:"BackgroundMaterial",uniforms:Qg(Xl.background.uniforms),vertexShader:Xl.background.vertexShader,fragmentShader:Xl.background.fragmentShader,side:Tg,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=I,!0===I.matrixAutoUpdate&&I.updateMatrix(),a.material.uniforms.uvTransform.value.copy(I.matrix),(d!==I||p!==I.version||g!==n.toneMapping)&&(a.material.needsUpdate=!0,d=I,p=I.version,g=n.toneMapping),x.unshift(a,a.geometry,a.material,0,0,null))}}}function poe(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=T(null);let d=c;function _(Pe){return i.isWebGL2?n.bindVertexArray(Pe):s.bindVertexArrayOES(Pe)}function y(Pe){return i.isWebGL2?n.deleteVertexArray(Pe):s.deleteVertexArrayOES(Pe)}function T(Pe){const ke=[],Be=[],ye=[];for(let Ee=0;Ee<r;Ee++)ke[Ee]=0,Be[Ee]=0,ye[Ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ke,enabledAttributes:Be,attributeDivisors:ye,object:Pe,attributes:{},index:null}}function A(){const Pe=d.newAttributes;for(let ke=0,Be=Pe.length;ke<Be;ke++)Pe[ke]=0}function H(Pe){G(Pe,0)}function G(Pe,ke){const ye=d.enabledAttributes,Ee=d.attributeDivisors;d.newAttributes[Pe]=1,0===ye[Pe]&&(n.enableVertexAttribArray(Pe),ye[Pe]=1),Ee[Pe]!==ke&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Pe,ke),Ee[Pe]=ke)}function X(){const Pe=d.newAttributes,ke=d.enabledAttributes;for(let Be=0,ye=ke.length;Be<ye;Be++)ke[Be]!==Pe[Be]&&(n.disableVertexAttribArray(Be),ke[Be]=0)}function re(Pe,ke,Be,ye,Ee,je){!0!==i.isWebGL2||5124!==Be&&5125!==Be?n.vertexAttribPointer(Pe,ke,Be,ye,Ee,je):n.vertexAttribIPointer(Pe,ke,Be,Ee,je)}function ge(){Ze(),d!==c&&(d=c,_(d.object))}function Ze(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function p(Pe,ke,Be,ye,Ee){let je=!1;if(o){const lt=function x(Pe,ke,Be){const ye=!0===Be.wireframe;let Ee=a[Pe.id];void 0===Ee&&(Ee={},a[Pe.id]=Ee);let je=Ee[ke.id];void 0===je&&(je={},Ee[ke.id]=je);let lt=je[ye];return void 0===lt&&(lt=T(function g(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),je[ye]=lt),lt}(ye,Be,ke);d!==lt&&(d=lt,_(d.object)),je=function N(Pe,ke){const Be=d.attributes,ye=Pe.attributes;let Ee=0;for(const je in ye){const lt=Be[je],Ue=ye[je];if(void 0===lt||lt.attribute!==Ue||lt.data!==Ue.data)return!0;Ee++}return d.attributesNum!==Ee||d.index!==ke}(ye,Ee),je&&function I(Pe,ke){const Be={},ye=Pe.attributes;let Ee=0;for(const je in ye){const lt=ye[je],Ue={};Ue.attribute=lt,lt.data&&(Ue.data=lt.data),Be[je]=Ue,Ee++}d.attributes=Be,d.attributesNum=Ee,d.index=ke}(ye,Ee)}else{const lt=!0===ke.wireframe;(d.geometry!==ye.id||d.program!==Be.id||d.wireframe!==lt)&&(d.geometry=ye.id,d.program=Be.id,d.wireframe=lt,je=!0)}!0===Pe.isInstancedMesh&&(je=!0),null!==Ee&&t.update(Ee,34963),je&&(function K(Pe,ke,Be,ye){if(!1===i.isWebGL2&&(Pe.isInstancedMesh||ye.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;A();const Ee=ye.attributes,je=Be.getAttributes(),lt=ke.defaultAttributeValues;for(const Ue in je){const qe=je[Ue];if(qe.location>=0){let vt=Ee[Ue];if(void 0===vt&&("instanceMatrix"===Ue&&Pe.instanceMatrix&&(vt=Pe.instanceMatrix),"instanceColor"===Ue&&Pe.instanceColor&&(vt=Pe.instanceColor)),void 0!==vt){const _t=vt.normalized,mt=vt.itemSize,di=t.get(vt);if(void 0===di)continue;const ct=di.buffer,Xt=di.type,tn=di.bytesPerElement;if(vt.isInterleavedBufferAttribute){const It=vt.data,nn=It.stride,hi=vt.offset;if(It&&It.isInstancedInterleavedBuffer){for(let Ye=0;Ye<qe.locationSize;Ye++)G(qe.location+Ye,It.meshPerAttribute);!0!==Pe.isInstancedMesh&&void 0===ye._maxInstanceCount&&(ye._maxInstanceCount=It.meshPerAttribute*It.count)}else for(let Ye=0;Ye<qe.locationSize;Ye++)H(qe.location+Ye);n.bindBuffer(34962,ct);for(let Ye=0;Ye<qe.locationSize;Ye++)re(qe.location+Ye,mt/qe.locationSize,Xt,_t,nn*tn,(hi+mt/qe.locationSize*Ye)*tn)}else{if(vt.isInstancedBufferAttribute){for(let It=0;It<qe.locationSize;It++)G(qe.location+It,vt.meshPerAttribute);!0!==Pe.isInstancedMesh&&void 0===ye._maxInstanceCount&&(ye._maxInstanceCount=vt.meshPerAttribute*vt.count)}else for(let It=0;It<qe.locationSize;It++)H(qe.location+It);n.bindBuffer(34962,ct);for(let It=0;It<qe.locationSize;It++)re(qe.location+It,mt/qe.locationSize,Xt,_t,mt*tn,mt/qe.locationSize*It*tn)}}else if(void 0!==lt){const _t=lt[Ue];if(void 0!==_t)switch(_t.length){case 2:n.vertexAttrib2fv(qe.location,_t);break;case 3:n.vertexAttrib3fv(qe.location,_t);break;case 4:n.vertexAttrib4fv(qe.location,_t);break;default:n.vertexAttrib1fv(qe.location,_t)}}}}X()}(Pe,ke,Be,ye),null!==Ee&&n.bindBuffer(34963,t.get(Ee).buffer))},reset:ge,resetDefaultState:Ze,dispose:function he(){ge();for(const Pe in a){const ke=a[Pe];for(const Be in ke){const ye=ke[Be];for(const Ee in ye)y(ye[Ee].object),delete ye[Ee];delete ke[Be]}delete a[Pe]}},releaseStatesOfGeometry:function De(Pe){if(void 0===a[Pe.id])return;const ke=a[Pe.id];for(const Be in ke){const ye=ke[Be];for(const Ee in ye)y(ye[Ee].object),delete ye[Ee];delete ke[Be]}delete a[Pe.id]},releaseStatesOfProgram:function Te(Pe){for(const ke in a){const Be=a[ke];if(void 0===Be[Pe.id])continue;const ye=Be[Pe.id];for(const Ee in ye)y(ye[Ee].object),delete ye[Ee];delete Be[Pe.id]}},initAttributes:A,enableAttribute:H,disableUnusedAttributes:X}}function moe(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(d){s=d},this.render=function a(d,p){n.drawArrays(s,d,p),t.update(p,s,1)},this.renderInstances=function c(d,p,g){if(0===g)return;let _,y;if(r)_=n,y="drawArraysInstanced";else if(_=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",null===_)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[y](s,d,p,g),t.update(p,s,g)}}function goe(n,e,t){let i;function s(K){if("highp"===K){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";K="mediump"}return"mediump"===K&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const d=o||e.has("WEBGL_draw_buffers"),p=!0===t.logarithmicDepthBuffer,g=n.getParameter(34930),_=n.getParameter(35660),y=n.getParameter(3379),x=n.getParameter(34076),T=n.getParameter(34921),N=n.getParameter(36347),I=n.getParameter(36348),A=n.getParameter(36349),H=_>0,G=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:d,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const K=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(K.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:p,maxTextures:g,maxVertexTextures:_,maxTextureSize:y,maxCubemapSize:x,maxAttributes:T,maxVertexUniforms:N,maxVaryings:I,maxFragmentUniforms:A,vertexTextures:H,floatFragmentTextures:G,floatVertexTextures:H&&G,maxSamples:o?n.getParameter(36183):0}}function voe(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Xu,a=new Us,c={value:null,needsUpdate:!1};function d(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,_,y,x){const T=null!==g?g.length:0;let N=null;if(0!==T){if(N=c.value,!0!==x||null===N){const I=y+4*T,A=_.matrixWorldInverse;a.getNormalMatrix(A),(null===N||N.length<I)&&(N=new Float32Array(I));for(let H=0,G=y;H!==T;++H,G+=4)o.copy(g[H]).applyMatrix4(A,a),o.normal.toArray(N,G),N[G+3]=o.constant}c.value=N,c.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,N}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,_,y){const x=0!==g.length||_||0!==i||r;return r=_,t=p(g,y,0),i=g.length,x},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1,d()},this.setState=function(g,_,y){const x=g.clippingPlanes,T=g.clipIntersection,N=g.clipShadows,I=n.get(g);if(!r||null===x||0===x.length||s&&!N)s?p(null):d();else{const A=s?0:i,H=4*A;let G=I.clippingState||null;c.value=G,G=p(x,_,H,y);for(let X=0;X!==H;++X)G[X]=t[X];I.clippingState=G,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=A}}}function _oe(n){let e=new WeakMap;function t(o,a){return a===AS?o.mapping=Fg:a===IS&&(o.mapping=Rg),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(a===AS||a===IS){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const d=n.getRenderTarget(),p=new LI(c.height/2);return p.fromEquirectangularTexture(n,o),e.set(o,p),n.setRenderTarget(d),o.addEventListener("dispose",r),t(p.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}Xl.physical={uniforms:Uo([Xl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new tt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Rt(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Rt(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Rt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag};class oE extends iE{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,a-=p*this.view.offsetY,c=a-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}oE.prototype.isOrthographicCamera=!0;class Ay extends mh{constructor(e){super(e),this.type="RawShaderMaterial"}}Ay.prototype.isRawShaderMaterial=!0;const r0=4,gh=8,Zl=Math.pow(2,gh),iB=[.125,.215,.35,.446,.526,.582],rB=gh-r0+1+iB.length,sp={[ba]:0,[BS]:1,[oI]:2,[O8]:3,[L8]:4,[N8]:5,[sI]:6},BI=new oE,{_lodPlanes:Iy,_sizeLods:sB,_sigmas:aE}=xoe(),oB=new Rt;let VI=null;const op=(1+Math.sqrt(5))/2,o0=1/op,aB=[new ne(1,1,1),new ne(-1,1,1),new ne(1,1,-1),new ne(-1,1,-1),new ne(0,op,o0),new ne(0,op,-o0),new ne(o0,0,op),new ne(-o0,0,op),new ne(op,o0,0),new ne(-op,o0,0)];class yoe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function woe(n){const e=new Float32Array(n),t=new ne(0,1,0);return new Ay({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:sp[ba]},outputEncoding:{value:sp[ba]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:sh,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){VI=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=uB(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=lB(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Iy.length;e++)Iy[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(VI),e.scissorTest=!1,cE(e,0,0,e.width,e.height)}_fromTexture(e){VI=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Hs,minFilter:Hs,generateMipmaps:!1,type:oh,format:Gne,encoding:boe(e)?e.encoding:oI,depthBuffer:!1},i=cB(t);return i.depthBuffer=!e,this._pingPongRenderTarget=cB(t),i}_compileMaterial(e){const t=new gr(Iy[0],e);this._renderer.compile(t,BI)}_sceneToCubeUV(e,t,i,r){const a=new Eo(90,1,t,i),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,_=p.outputEncoding,y=p.toneMapping;p.getClearColor(oB),p.toneMapping=Xf,p.outputEncoding=ba,p.autoClear=!1;const x=new dh({name:"PMREM.Background",side:Ss,depthWrite:!1,depthTest:!1}),T=new gr(new Yu,x);let N=!1;const I=e.background;I?I.isColor&&(x.color.copy(I),e.background=null,N=!0):(x.color.copy(oB),N=!0);for(let A=0;A<6;A++){const H=A%3;0==H?(a.up.set(0,c[A],0),a.lookAt(d[A],0,0)):1==H?(a.up.set(0,0,c[A]),a.lookAt(0,d[A],0)):(a.up.set(0,c[A],0),a.lookAt(0,0,d[A])),cE(r,H*Zl,A>2?Zl:0,Zl,Zl),p.setRenderTarget(r),N&&p.render(T,a),p.render(e,a)}T.geometry.dispose(),T.material.dispose(),p.toneMapping=y,p.outputEncoding=_,p.autoClear=g,e.background=I}_setEncoding(e,t){e.value=sp[t.encoding]}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Fg||e.mapping===Rg;r?null==this._cubemapShader&&(this._cubemapShader=uB()):null==this._equirectShader&&(this._equirectShader=lB());const s=r?this._cubemapShader:this._equirectShader,o=new gr(Iy[0],s),a=s.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),cE(t,0,0,3*Zl,2*Zl),i.setRenderTarget(t),i.render(o,BI)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<rB;r++){const s=Math.sqrt(aE[r]*aE[r]-aE[r-1]*aE[r-1]);this._blur(e,r-1,r,s,aB[(r-1)%aB.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,d=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const g=new gr(Iy[r],d),_=d.uniforms,y=sB[i]-1,x=isFinite(s)?Math.PI/(2*y):2*Math.PI/39,T=s/x,N=isFinite(s)?1+Math.floor(3*T):20;N>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${N} samples when the maximum is set to 20`);const I=[];let A=0;for(let re=0;re<20;++re){const K=re/T,he=Math.exp(-K*K/2);I.push(he),0==re?A+=he:re<N&&(A+=2*he)}for(let re=0;re<I.length;re++)I[re]=I[re]/A;_.envMap.value=e.texture,_.samples.value=N,_.weights.value=I,_.latitudinal.value="latitudinal"===o,a&&(_.poleAxis.value=a),_.dTheta.value=x,_.mipInt.value=gh-i,this._setEncoding(_.inputEncoding,e.texture),this._setEncoding(_.outputEncoding,e.texture);const H=sB[r];cE(t,3*Math.max(0,Zl-2*H),(0===r?0:2*Zl)+2*H*(r>gh-r0?r-gh+r0:0),3*H,2*H),c.setRenderTarget(t),c.render(g,BI)}}function boe(n){return void 0!==n&&n.type===oh&&(n.encoding===ba||n.encoding===BS||n.encoding===sI)}function xoe(){const n=[],e=[],t=[];let i=gh;for(let r=0;r<rB;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>gh-r0?o=iB[r-gh+r0-1]:0==r&&(o=0),t.push(o);const a=1/(s-1),c=-a/2,d=1+a/2,p=[c,c,d,c,d,d,c,c,d,d,c,d],g=6,_=6,y=3,x=2,T=1,N=new Float32Array(y*_*g),I=new Float32Array(x*_*g),A=new Float32Array(T*_*g);for(let G=0;G<g;G++){const X=G%3*2/3-1,re=G>2?0:-1;N.set([X,re,0,X+2/3,re,0,X+2/3,re+1,0,X,re,0,X+2/3,re+1,0,X,re+1,0],y*_*G),I.set(p,x*_*G),A.set([G,G,G,G,G,G],T*_*G)}const H=new pn;H.setAttribute("position",new Li(N,y)),H.setAttribute("uv",new Li(I,x)),H.setAttribute("faceIndex",new Li(A,T)),n.push(H),i>r0&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function cB(n){const e=new Nc(3*Zl,3*Zl,n);return e.texture.mapping=vy,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function cE(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function lB(){const n=new tt(1,1);return new Ay({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:sp[ba]},outputEncoding:{value:sp[ba]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:sh,depthTest:!1,depthWrite:!1})}function uB(){return new Ay({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:sp[ba]},outputEncoding:{value:sp[ba]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:sh,depthTest:!1,depthWrite:!1})}function Soe(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const d=e.get(c);void 0!==d&&(e.delete(c),d.dispose())}return{get:function i(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const c=a.mapping,d=c===AS||c===IS,p=c===Fg||c===Rg;if(d||p){if(e.has(a))return e.get(a).texture;{const g=a.image;if(d&&g&&g.height>0||p&&g&&function r(a){let c=0;for(let p=0;p<6;p++)void 0!==a[p]&&c++;return 6===c}(g)){const _=n.getRenderTarget();null===t&&(t=new yoe(n));const y=d?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,y),n.setRenderTarget(_),a.addEventListener("dispose",s),y.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Eoe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Moe(n,e,t,i){const r={},s=new WeakMap;function o(g){const _=g.target;null!==_.index&&e.remove(_.index);for(const x in _.attributes)e.remove(_.attributes[x]);_.removeEventListener("dispose",o),delete r[_.id];const y=s.get(_);y&&(e.remove(y),s.delete(_)),i.releaseStatesOfGeometry(_),!0===_.isInstancedBufferGeometry&&delete _._maxInstanceCount,t.memory.geometries--}function d(g){const _=[],y=g.index,x=g.attributes.position;let T=0;if(null!==y){const A=y.array;T=y.version;for(let H=0,G=A.length;H<G;H+=3){const X=A[H+0],re=A[H+1],K=A[H+2];_.push(X,re,re,K,K,X)}}else{T=x.version;for(let H=0,G=x.array.length/3-1;H<G;H+=3){const X=H+0,re=H+1,K=H+2;_.push(X,re,re,K,K,X)}}const N=new(U8(_)>65535?TI:DI)(_,1);N.version=T;const I=s.get(g);I&&e.remove(I),s.set(g,N)}return{get:function a(g,_){return!0===r[_.id]||(_.addEventListener("dispose",o),r[_.id]=!0,t.memory.geometries++),_},update:function c(g){const _=g.attributes;for(const x in _)e.update(_[x],34962);const y=g.morphAttributes;for(const x in y){const T=y[x];for(let N=0,I=T.length;N<I;N++)e.update(T[N],34962)}},getWireframeAttribute:function p(g){const _=s.get(g);if(_){const y=g.index;null!==y&&_.version<y.version&&d(g)}else d(g);return s.get(g)}}}function Coe(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(_){s=_},this.setIndex=function d(_){a=_.type,c=_.bytesPerElement},this.render=function p(_,y){n.drawElements(s,y,a,_*c),t.update(y,s,1)},this.renderInstances=function g(_,y,x){if(0===x)return;let T,N;if(r)T=n,N="drawElementsInstanced";else if(T=e.get("ANGLE_instanced_arrays"),N="drawElementsInstancedANGLE",null===T)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");T[N](s,y,a,_*c,x),t.update(y,s,x)}}function Doe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}class zI extends eo{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hs,this.minFilter=Hs,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function Toe(n,e){return n[0]-e[0]}function Aoe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function dB(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function Ioe(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new ne,a=[];for(let d=0;d<8;d++)a[d]=[d,0];return{update:function c(d,p,g,_){const y=d.morphTargetInfluences;if(!0===e.isWebGL2){const x=p.morphAttributes.position.length;let T=s.get(p);if(void 0===T||T.count!==x){void 0!==T&&T.texture.dispose();const A=void 0!==p.morphAttributes.normal,H=p.morphAttributes.position,G=p.morphAttributes.normal||[],re=!0===A?2:1;let K=p.attributes.position.count*re,he=1;K>e.maxTextureSize&&(he=Math.ceil(K/e.maxTextureSize),K=e.maxTextureSize);const De=new Float32Array(K*he*4*x),Te=new zI(De,K,he,x);Te.format=Vo,Te.type=Gu;const ge=4*re;for(let Ze=0;Ze<x;Ze++){const Pe=H[Ze],ke=G[Ze],Be=K*he*4*Ze;for(let ye=0;ye<Pe.count;ye++){o.fromBufferAttribute(Pe,ye),!0===Pe.normalized&&dB(o,Pe);const Ee=ye*ge;De[Be+Ee+0]=o.x,De[Be+Ee+1]=o.y,De[Be+Ee+2]=o.z,De[Be+Ee+3]=0,!0===A&&(o.fromBufferAttribute(ke,ye),!0===ke.normalized&&dB(o,ke),De[Be+Ee+4]=o.x,De[Be+Ee+5]=o.y,De[Be+Ee+6]=o.z,De[Be+Ee+7]=0)}}T={count:x,texture:Te,size:new tt(K,he)},s.set(p,T)}let N=0;for(let A=0;A<y.length;A++)N+=y[A];const I=p.morphTargetsRelative?1:1-N;_.getUniforms().setValue(n,"morphTargetBaseInfluence",I),_.getUniforms().setValue(n,"morphTargetInfluences",y),_.getUniforms().setValue(n,"morphTargetsTexture",T.texture,t),_.getUniforms().setValue(n,"morphTargetsTextureSize",T.size)}else{const x=void 0===y?0:y.length;let T=i[p.id];if(void 0===T||T.length!==x){T=[];for(let G=0;G<x;G++)T[G]=[G,0];i[p.id]=T}for(let G=0;G<x;G++){const X=T[G];X[0]=G,X[1]=y[G]}T.sort(Aoe);for(let G=0;G<8;G++)G<x&&T[G][1]?(a[G][0]=T[G][0],a[G][1]=T[G][1]):(a[G][0]=Number.MAX_SAFE_INTEGER,a[G][1]=0);a.sort(Toe);const N=p.morphAttributes.position,I=p.morphAttributes.normal;let A=0;for(let G=0;G<8;G++){const X=a[G],re=X[0],K=X[1];re!==Number.MAX_SAFE_INTEGER&&K?(N&&p.getAttribute("morphTarget"+G)!==N[re]&&p.setAttribute("morphTarget"+G,N[re]),I&&p.getAttribute("morphNormal"+G)!==I[re]&&p.setAttribute("morphNormal"+G,I[re]),r[G]=K,A+=K):(N&&!0===p.hasAttribute("morphTarget"+G)&&p.deleteAttribute("morphTarget"+G),I&&!0===p.hasAttribute("morphNormal"+G)&&p.deleteAttribute("morphNormal"+G),r[G]=0)}const H=p.morphTargetsRelative?1:1-A;_.getUniforms().setValue(n,"morphTargetBaseInfluence",H),_.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function Foe(n,e,t,i){let r=new WeakMap;function a(c){const d=c.target;d.removeEventListener("dispose",a),t.remove(d.instanceMatrix),null!==d.instanceColor&&t.remove(d.instanceColor)}return{update:function s(c){const d=i.render.frame,g=e.get(c,c.geometry);return r.get(g)!==d&&(e.update(g),r.set(g,d)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),g},dispose:function o(){r=new WeakMap}}}zI.prototype.isDataTexture2DArray=!0;class hB extends eo{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Hs,this.minFilter=Hs,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}hB.prototype.isDataTexture3D=!0;const fB=new eo,pB=new zI,mB=new hB,gB=new Dy,vB=[],_B=[],yB=new Float32Array(16),bB=new Float32Array(9),xB=new Float32Array(4);function a0(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=vB[r];if(void 0===s&&(s=new Float32Array(r),vB[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function sa(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function zo(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function lE(n,e){let t=_B[e];void 0===t&&(t=new Int32Array(e),_B[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Roe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Poe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sa(t,e))return;n.uniform2fv(this.addr,e),zo(t,e)}}function koe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(sa(t,e))return;n.uniform3fv(this.addr,e),zo(t,e)}}function Ooe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sa(t,e))return;n.uniform4fv(this.addr,e),zo(t,e)}}function Loe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(sa(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),zo(t,e)}else{if(sa(t,i))return;xB.set(i),n.uniformMatrix2fv(this.addr,!1,xB),zo(t,i)}}function Noe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(sa(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),zo(t,e)}else{if(sa(t,i))return;bB.set(i),n.uniformMatrix3fv(this.addr,!1,bB),zo(t,i)}}function Boe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(sa(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),zo(t,e)}else{if(sa(t,i))return;yB.set(i),n.uniformMatrix4fv(this.addr,!1,yB),zo(t,i)}}function Voe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Hoe(n,e){const t=this.cache;sa(t,e)||(n.uniform2iv(this.addr,e),zo(t,e))}function Uoe(n,e){const t=this.cache;sa(t,e)||(n.uniform3iv(this.addr,e),zo(t,e))}function zoe(n,e){const t=this.cache;sa(t,e)||(n.uniform4iv(this.addr,e),zo(t,e))}function Goe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function joe(n,e){const t=this.cache;sa(t,e)||(n.uniform2uiv(this.addr,e),zo(t,e))}function Woe(n,e){const t=this.cache;sa(t,e)||(n.uniform3uiv(this.addr,e),zo(t,e))}function $oe(n,e){const t=this.cache;sa(t,e)||(n.uniform4uiv(this.addr,e),zo(t,e))}function qoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||fB,r)}function Koe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||mB,r)}function Yoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||gB,r)}function Xoe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||pB,r)}function Joe(n,e){n.uniform1fv(this.addr,e)}function Qoe(n,e){const t=a0(e,this.size,2);n.uniform2fv(this.addr,t)}function eae(n,e){const t=a0(e,this.size,3);n.uniform3fv(this.addr,t)}function tae(n,e){const t=a0(e,this.size,4);n.uniform4fv(this.addr,t)}function nae(n,e){const t=a0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function iae(n,e){const t=a0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function rae(n,e){const t=a0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function sae(n,e){n.uniform1iv(this.addr,e)}function oae(n,e){n.uniform2iv(this.addr,e)}function aae(n,e){n.uniform3iv(this.addr,e)}function cae(n,e){n.uniform4iv(this.addr,e)}function lae(n,e){n.uniform1uiv(this.addr,e)}function uae(n,e){n.uniform2uiv(this.addr,e)}function dae(n,e){n.uniform3uiv(this.addr,e)}function hae(n,e){n.uniform4uiv(this.addr,e)}function fae(n,e,t){const i=e.length,r=lE(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||fB,r[s])}function pae(n,e,t){const i=e.length,r=lE(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||mB,r[s])}function mae(n,e,t){const i=e.length,r=lE(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||gB,r[s])}function gae(n,e,t){const i=e.length,r=lE(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||pB,r[s])}function _ae(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function Zoe(n){switch(n){case 5126:return Roe;case 35664:return Poe;case 35665:return koe;case 35666:return Ooe;case 35674:return Loe;case 35675:return Noe;case 35676:return Boe;case 5124:case 35670:return Voe;case 35667:case 35671:return Hoe;case 35668:case 35672:return Uoe;case 35669:case 35673:return zoe;case 5125:return Goe;case 36294:return joe;case 36295:return Woe;case 36296:return $oe;case 35678:case 36198:case 36298:case 36306:case 35682:return qoe;case 35679:case 36299:case 36307:return Koe;case 35680:case 36300:case 36308:case 36293:return Yoe;case 36289:case 36303:case 36311:case 36292:return Xoe}}(e.type)}function wB(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function vae(n){switch(n){case 5126:return Joe;case 35664:return Qoe;case 35665:return eae;case 35666:return tae;case 35674:return nae;case 35675:return iae;case 35676:return rae;case 5124:case 35670:return sae;case 35667:case 35671:return oae;case 35668:case 35672:return aae;case 35669:case 35673:return cae;case 5125:return lae;case 36294:return uae;case 36295:return dae;case 36296:return hae;case 35678:case 36198:case 36298:case 36306:case 35682:return fae;case 35679:case 36299:case 36307:return pae;case 35680:case 36300:case 36308:case 36293:return mae;case 36289:case 36303:case 36311:case 36292:return gae}}(e.type)}function SB(n){this.id=n,this.seq=[],this.map={}}wB.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),zo(e,n)},SB.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const GI=/(\w+)(\])?(\[|\.)?/g;function EB(n,e){n.seq.push(e),n.map[e.id]=e}function yae(n,e,t){const i=n.name,r=i.length;for(GI.lastIndex=0;;){const s=GI.exec(i);let a=s[1];const d=s[3];if("]"===s[2]&&(a|=0),void 0===d||"["===d&&GI.lastIndex+2===r){EB(t,void 0===d?new _ae(a,n,e):new wB(a,n,e));break}{let g=t.map[a];void 0===g&&(g=new SB(a),EB(t,g)),t=g}}}function vh(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i);yae(r,n.getUniformLocation(e,r.name),this)}}function MB(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}vh.prototype.setValue=function(n,e,t,i){const r=this.map[e];void 0!==r&&r.setValue(n,t,i)},vh.prototype.setOptional=function(n,e,t){const i=e[t];void 0!==i&&this.setValue(n,t,i)},vh.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,i)}},vh.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};let bae=0;function CB(n){switch(n){case ba:return["Linear","( value )"];case BS:return["sRGB","( value )"];case oI:return["RGBE","( value )"];case O8:return["RGBM","( value, 7.0 )"];case L8:return["RGBM","( value, 16.0 )"];case N8:return["RGBD","( value, 256.0 )"];case sI:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function DB(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&""===r?"":t.toUpperCase()+"\n\n"+r+"\n\n"+function xae(n){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(n.getShaderSource(e))}function ap(n,e){const t=CB(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function wae(n,e){const t=CB(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Sae(n,e){let t;switch(e){case Ane:t="Linear";break;case Ine:t="Reinhard";break;case Fne:t="OptimizedCineon";break;case Rne:t="ACESFilmic";break;case Pne:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Fy(n){return""!==n}function TB(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function AB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Dae=/^[ \t]*#include +<([\w\d./]+)>/gm;function jI(n){return n.replace(Dae,Tae)}function Tae(n,e){const t=ui[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return jI(t)}const Aae=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Iae=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IB(n){return n.replace(Iae,FB).replace(Aae,Fae)}function Fae(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),FB(0,e,t,i)}function FB(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function RB(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Lae(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function Rae(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===p8?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ane?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===my&&(e="SHADOWMAP_TYPE_VSM"),e}(t),d=function Pae(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Fg:case Rg:e="ENVMAP_TYPE_CUBE";break;case vy:case FS:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),p=function kae(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Rg:case FS:e="ENVMAP_MODE_REFRACTION"}return e}(t),g=function Oae(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case TS:e="ENVMAP_BLENDING_MULTIPLY";break;case Dne:e="ENVMAP_BLENDING_MIX";break;case Tne:e="ENVMAP_BLENDING_ADD"}return e}(t),_=n.gammaFactor>0?n.gammaFactor:1,y=t.isWebGL2?"":function Eae(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fy).join("\n")}(t),x=function Mae(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),T=r.createProgram();let N,I,A=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(N=[x].filter(Fy).join("\n"),N.length>0&&(N+="\n"),I=[y,x].filter(Fy).join("\n"),I.length>0&&(I+="\n")):(N=[RB(t),"#define SHADER_NAME "+t.shaderName,x,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Fy).join("\n"),I=[y,RB(t),"#define SHADER_NAME "+t.shaderName,x,"#define GAMMA_FACTOR "+_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Xf?"#define TONE_MAPPING":"",t.toneMapping!==Xf?ui.tonemapping_pars_fragment:"",t.toneMapping!==Xf?Sae("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===Zf?"#define OPAQUE":"",ui.encodings_pars_fragment,t.map?ap("mapTexelToLinear",t.mapEncoding):"",t.matcap?ap("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?ap("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?ap("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?ap("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?ap("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?ap("lightMapTexelToLinear",t.lightMapEncoding):"",wae("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Fy).join("\n")),o=jI(o),o=TB(o,t),o=AB(o,t),a=jI(a),a=TB(a,t),a=AB(a,t),o=IB(o),a=IB(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(A="#version 300 es\n",N=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+N,I=["#define varying in",t.glslVersion===B8?"":"out highp vec4 pc_fragColor;",t.glslVersion===B8?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+I);const G=A+I+a,X=MB(r,35633,A+N+o),re=MB(r,35632,G);if(r.attachShader(T,X),r.attachShader(T,re),void 0!==t.index0AttributeName?r.bindAttribLocation(T,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(T,0,"position"),r.linkProgram(T),n.debug.checkShaderErrors){const De=r.getProgramInfoLog(T).trim(),Te=r.getShaderInfoLog(X).trim(),ge=r.getShaderInfoLog(re).trim();let Ze=!0,Pe=!0;if(!1===r.getProgramParameter(T,35714)){Ze=!1;const ke=DB(r,X,"vertex"),Be=DB(r,re,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(T,35715)+"\n\nProgram Info Log: "+De+"\n"+ke+"\n"+Be)}else""!==De?console.warn("THREE.WebGLProgram: Program Info Log:",De):(""===Te||""===ge)&&(Pe=!1);Pe&&(this.diagnostics={runnable:Ze,programLog:De,vertexShader:{log:Te,prefix:N},fragmentShader:{log:ge,prefix:I}})}let K,he;return r.deleteShader(X),r.deleteShader(re),this.getUniforms=function(){return void 0===K&&(K=new vh(r,T)),K},this.getAttributes=function(){return void 0===he&&(he=function Cae(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,T)),he},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(T),this.program=void 0},this.name=t.shaderName,this.id=bae++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=X,this.fragmentShader=re,this}function Nae(n,e,t,i,r,s,o){const a=[],c=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.floatVertexTextures,g=r.maxVertexUniforms,_=r.vertexTextures;let y=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},T=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function I(K){let he;return K&&K.isTexture?he=K.encoding:K&&K.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),he=K.texture.encoding):he=ba,he}return{getParameters:function A(K,he,De,Te,ge){const Ze=Te.fog,ke=(K.isMeshStandardMaterial?t:e).get(K.envMap||(K.isMeshStandardMaterial?Te.environment:null)),Be=x[K.type],ye=ge.isSkinnedMesh?function N(K){const De=K.skeleton.bones;if(p)return 1024;{const ge=Math.floor((g-20)/4),Ze=Math.min(ge,De.length);return Ze<De.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+De.length+" bones. This GPU supports "+Ze+"."),0):Ze}}(ge):0;let Ee,je;if(null!==K.precision&&(y=r.getMaxPrecision(K.precision),y!==K.precision&&console.warn("THREE.WebGLProgram.getParameters:",K.precision,"not supported, using",y,"instead.")),Be){const _t=Xl[Be];Ee=_t.vertexShader,je=_t.fragmentShader}else Ee=K.vertexShader,je=K.fragmentShader;const lt=n.getRenderTarget(),Ue=K.alphaTest>0,qe=K.clearcoat>0;return{isWebGL2:c,shaderID:Be,shaderName:K.type,vertexShader:Ee,fragmentShader:je,defines:K.defines,isRawShaderMaterial:!0===K.isRawShaderMaterial,glslVersion:K.glslVersion,precision:y,instancing:!0===ge.isInstancedMesh,instancingColor:!0===ge.isInstancedMesh&&null!==ge.instanceColor,supportsVertexTextures:_,outputEncoding:null!==lt?I(lt.texture):n.outputEncoding,map:!!K.map,mapEncoding:I(K.map),matcap:!!K.matcap,matcapEncoding:I(K.matcap),envMap:!!ke,envMapMode:ke&&ke.mapping,envMapEncoding:I(ke),envMapCubeUV:!!ke&&(ke.mapping===vy||ke.mapping===FS),lightMap:!!K.lightMap,lightMapEncoding:I(K.lightMap),aoMap:!!K.aoMap,emissiveMap:!!K.emissiveMap,emissiveMapEncoding:I(K.emissiveMap),bumpMap:!!K.bumpMap,normalMap:!!K.normalMap,objectSpaceNormalMap:K.normalMapType===Rie,tangentSpaceNormalMap:K.normalMapType===Vg,clearcoat:qe,clearcoatMap:qe&&!!K.clearcoatMap,clearcoatRoughnessMap:qe&&!!K.clearcoatRoughnessMap,clearcoatNormalMap:qe&&!!K.clearcoatNormalMap,displacementMap:!!K.displacementMap,roughnessMap:!!K.roughnessMap,metalnessMap:!!K.metalnessMap,specularMap:!!K.specularMap,specularIntensityMap:!!K.specularIntensityMap,specularColorMap:!!K.specularColorMap,specularColorMapEncoding:I(K.specularColorMap),alphaMap:!!K.alphaMap,alphaTest:Ue,gradientMap:!!K.gradientMap,sheen:K.sheen>0,sheenColorMap:!!K.sheenColorMap,sheenColorMapEncoding:I(K.sheenColorMap),sheenRoughnessMap:!!K.sheenRoughnessMap,transmission:K.transmission>0,transmissionMap:!!K.transmissionMap,thicknessMap:!!K.thicknessMap,combine:K.combine,vertexTangents:!!K.normalMap&&!!ge.geometry&&!!ge.geometry.attributes.tangent,vertexColors:K.vertexColors,vertexAlphas:!0===K.vertexColors&&!!ge.geometry&&!!ge.geometry.attributes.color&&4===ge.geometry.attributes.color.itemSize,vertexUvs:!!K.map||!!K.bumpMap||!!K.normalMap||!!K.specularMap||!!K.alphaMap||!!K.emissiveMap||!!K.roughnessMap||!!K.metalnessMap||!!K.clearcoatMap||!!K.clearcoatRoughnessMap||!!K.clearcoatNormalMap||!!K.displacementMap||!!K.transmissionMap||!!K.thicknessMap||!!K.specularIntensityMap||!!K.specularColorMap||!!K.sheenColorMap||K.sheenRoughnessMap,uvsVertexOnly:!(K.map||K.bumpMap||K.normalMap||K.specularMap||K.alphaMap||K.emissiveMap||K.roughnessMap||K.metalnessMap||K.clearcoatNormalMap||K.transmission>0||K.transmissionMap||K.thicknessMap||K.specularIntensityMap||K.specularColorMap||K.sheen>0||K.sheenColorMap||K.sheenRoughnessMap||!K.displacementMap),fog:!!Ze,useFog:K.fog,fogExp2:Ze&&Ze.isFogExp2,flatShading:!!K.flatShading,sizeAttenuation:K.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===ge.isSkinnedMesh&&ye>0,maxBones:ye,useVertexTexture:p,morphTargets:!!ge.geometry&&!!ge.geometry.morphAttributes.position,morphNormals:!!ge.geometry&&!!ge.geometry.morphAttributes.normal,morphTargetsCount:ge.geometry&&ge.geometry.morphAttributes.position?ge.geometry.morphAttributes.position.length:0,numDirLights:he.directional.length,numPointLights:he.point.length,numSpotLights:he.spot.length,numRectAreaLights:he.rectArea.length,numHemiLights:he.hemi.length,numDirLightShadows:he.directionalShadowMap.length,numPointLightShadows:he.pointShadowMap.length,numSpotLightShadows:he.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:K.format,dithering:K.dithering,shadowMapEnabled:n.shadowMap.enabled&&De.length>0,shadowMapType:n.shadowMap.type,toneMapping:K.toneMapped?n.toneMapping:Xf,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:K.premultipliedAlpha,doubleSided:K.side===Ag,flipSided:K.side===Ss,depthPacking:void 0!==K.depthPacking&&K.depthPacking,index0AttributeName:K.index0AttributeName,extensionDerivatives:K.extensions&&K.extensions.derivatives,extensionFragDepth:K.extensions&&K.extensions.fragDepth,extensionDrawBuffers:K.extensions&&K.extensions.drawBuffers,extensionShaderTextureLOD:K.extensions&&K.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:K.customProgramCacheKey()}},getProgramCacheKey:function H(K){const he=[];if(K.shaderID?he.push(K.shaderID):(he.push(z8(K.fragmentShader)),he.push(z8(K.vertexShader))),void 0!==K.defines)for(const De in K.defines)he.push(De),he.push(K.defines[De]);if(!1===K.isRawShaderMaterial){for(let De=0;De<T.length;De++)he.push(K[T[De]]);he.push(n.outputEncoding),he.push(n.gammaFactor)}return he.push(K.customProgramCacheKey),he.join()},getUniforms:function G(K){const he=x[K.type];let De;return De=he?fre.clone(Xl[he].uniforms):K.uniforms,De},acquireProgram:function X(K,he){let De;for(let Te=0,ge=a.length;Te<ge;Te++){const Ze=a[Te];if(Ze.cacheKey===he){De=Ze,++De.usedTimes;break}}return void 0===De&&(De=new Lae(n,he,K,s),a.push(De)),De},releaseProgram:function re(K){if(0==--K.usedTimes){const he=a.indexOf(K);a[he]=a[a.length-1],a.pop(),K.destroy()}},programs:a}}function Bae(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function Vae(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function PB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function kB(n){const e=[];let t=0;const i=[],r=[],s=[],o={id:-1};function c(y,x,T,N,I,A){let H=e[t];const G=n.get(T);return void 0===H?(H={id:y.id,object:y,geometry:x,material:T,program:G.program||o,groupOrder:N,renderOrder:y.renderOrder,z:I,group:A},e[t]=H):(H.id=y.id,H.object=y,H.geometry=x,H.material=T,H.program=G.program||o,H.groupOrder=N,H.renderOrder=y.renderOrder,H.z=I,H.group=A),t++,H}return{opaque:i,transmissive:r,transparent:s,init:function a(){t=0,i.length=0,r.length=0,s.length=0},push:function d(y,x,T,N,I,A){const H=c(y,x,T,N,I,A);T.transmission>0?r.push(H):!0===T.transparent?s.push(H):i.push(H)},unshift:function p(y,x,T,N,I,A){const H=c(y,x,T,N,I,A);T.transmission>0?r.unshift(H):!0===T.transparent?s.unshift(H):i.unshift(H)},finish:function _(){for(let y=t,x=e.length;y<x;y++){const T=e[y];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.program=null,T.group=null}},sort:function g(y,x){i.length>1&&i.sort(y||Vae),r.length>1&&r.sort(x||PB),s.length>1&&s.sort(x||PB)}}}function Hae(n){let e=new WeakMap;return{get:function t(r,s){let o;return!1===e.has(r)?(o=new kB(n),e.set(r,[o])):s>=e.get(r).length?(o=new kB(n),e.get(r).push(o)):o=e.get(r)[s],o},dispose:function i(){e=new WeakMap}}}function Uae(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ne,color:new Rt};break;case"SpotLight":t={position:new ne,direction:new ne,color:new Rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ne,color:new Rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ne,skyColor:new Rt,groundColor:new Rt};break;case"RectAreaLight":t={color:new Rt,position:new ne,halfWidth:new ne,halfHeight:new ne}}return n[e.id]=t,t}}}let Gae=0;function jae(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function Wae(n,e){const t=new Uae,i=function zae(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let p=0;p<9;p++)r.probe.push(new ne);const s=new ne,o=new Gt,a=new Gt;return{setup:function c(p,g){let _=0,y=0,x=0;for(let De=0;De<9;De++)r.probe[De].set(0,0,0);let T=0,N=0,I=0,A=0,H=0,G=0,X=0,re=0;p.sort(jae);const K=!0!==g?Math.PI:1;for(let De=0,Te=p.length;De<Te;De++){const ge=p[De],Ze=ge.color,Pe=ge.intensity,ke=ge.distance,Be=ge.shadow&&ge.shadow.map?ge.shadow.map.texture:null;if(ge.isAmbientLight)_+=Ze.r*Pe*K,y+=Ze.g*Pe*K,x+=Ze.b*Pe*K;else if(ge.isLightProbe)for(let ye=0;ye<9;ye++)r.probe[ye].addScaledVector(ge.sh.coefficients[ye],Pe);else if(ge.isDirectionalLight){const ye=t.get(ge);if(ye.color.copy(ge.color).multiplyScalar(ge.intensity*K),ge.castShadow){const Ee=ge.shadow,je=i.get(ge);je.shadowBias=Ee.bias,je.shadowNormalBias=Ee.normalBias,je.shadowRadius=Ee.radius,je.shadowMapSize=Ee.mapSize,r.directionalShadow[T]=je,r.directionalShadowMap[T]=Be,r.directionalShadowMatrix[T]=ge.shadow.matrix,G++}r.directional[T]=ye,T++}else if(ge.isSpotLight){const ye=t.get(ge);if(ye.position.setFromMatrixPosition(ge.matrixWorld),ye.color.copy(Ze).multiplyScalar(Pe*K),ye.distance=ke,ye.coneCos=Math.cos(ge.angle),ye.penumbraCos=Math.cos(ge.angle*(1-ge.penumbra)),ye.decay=ge.decay,ge.castShadow){const Ee=ge.shadow,je=i.get(ge);je.shadowBias=Ee.bias,je.shadowNormalBias=Ee.normalBias,je.shadowRadius=Ee.radius,je.shadowMapSize=Ee.mapSize,r.spotShadow[I]=je,r.spotShadowMap[I]=Be,r.spotShadowMatrix[I]=ge.shadow.matrix,re++}r.spot[I]=ye,I++}else if(ge.isRectAreaLight){const ye=t.get(ge);ye.color.copy(Ze).multiplyScalar(Pe),ye.halfWidth.set(.5*ge.width,0,0),ye.halfHeight.set(0,.5*ge.height,0),r.rectArea[A]=ye,A++}else if(ge.isPointLight){const ye=t.get(ge);if(ye.color.copy(ge.color).multiplyScalar(ge.intensity*K),ye.distance=ge.distance,ye.decay=ge.decay,ge.castShadow){const Ee=ge.shadow,je=i.get(ge);je.shadowBias=Ee.bias,je.shadowNormalBias=Ee.normalBias,je.shadowRadius=Ee.radius,je.shadowMapSize=Ee.mapSize,je.shadowCameraNear=Ee.camera.near,je.shadowCameraFar=Ee.camera.far,r.pointShadow[N]=je,r.pointShadowMap[N]=Be,r.pointShadowMatrix[N]=ge.shadow.matrix,X++}r.point[N]=ye,N++}else if(ge.isHemisphereLight){const ye=t.get(ge);ye.skyColor.copy(ge.color).multiplyScalar(Pe*K),ye.groundColor.copy(ge.groundColor).multiplyScalar(Pe*K),r.hemi[H]=ye,H++}}A>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Et.LTC_FLOAT_1,r.rectAreaLTC2=Et.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Et.LTC_HALF_1,r.rectAreaLTC2=Et.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=_,r.ambient[1]=y,r.ambient[2]=x;const he=r.hash;(he.directionalLength!==T||he.pointLength!==N||he.spotLength!==I||he.rectAreaLength!==A||he.hemiLength!==H||he.numDirectionalShadows!==G||he.numPointShadows!==X||he.numSpotShadows!==re)&&(r.directional.length=T,r.spot.length=I,r.rectArea.length=A,r.point.length=N,r.hemi.length=H,r.directionalShadow.length=G,r.directionalShadowMap.length=G,r.pointShadow.length=X,r.pointShadowMap.length=X,r.spotShadow.length=re,r.spotShadowMap.length=re,r.directionalShadowMatrix.length=G,r.pointShadowMatrix.length=X,r.spotShadowMatrix.length=re,he.directionalLength=T,he.pointLength=N,he.spotLength=I,he.rectAreaLength=A,he.hemiLength=H,he.numDirectionalShadows=G,he.numPointShadows=X,he.numSpotShadows=re,r.version=Gae++)},setupView:function d(p,g){let _=0,y=0,x=0,T=0,N=0;const I=g.matrixWorldInverse;for(let A=0,H=p.length;A<H;A++){const G=p[A];if(G.isDirectionalLight){const X=r.directional[_];X.direction.setFromMatrixPosition(G.matrixWorld),s.setFromMatrixPosition(G.target.matrixWorld),X.direction.sub(s),X.direction.transformDirection(I),_++}else if(G.isSpotLight){const X=r.spot[x];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(I),X.direction.setFromMatrixPosition(G.matrixWorld),s.setFromMatrixPosition(G.target.matrixWorld),X.direction.sub(s),X.direction.transformDirection(I),x++}else if(G.isRectAreaLight){const X=r.rectArea[T];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(I),a.identity(),o.copy(G.matrixWorld),o.premultiply(I),a.extractRotation(o),X.halfWidth.set(.5*G.width,0,0),X.halfHeight.set(0,.5*G.height,0),X.halfWidth.applyMatrix4(a),X.halfHeight.applyMatrix4(a),T++}else if(G.isPointLight){const X=r.point[y];X.position.setFromMatrixPosition(G.matrixWorld),X.position.applyMatrix4(I),y++}else if(G.isHemisphereLight){const X=r.hemi[N];X.direction.setFromMatrixPosition(G.matrixWorld),X.direction.transformDirection(I),X.direction.normalize(),N++}}},state:r}}function OB(n,e){const t=new Wae(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(g){t.setup(i,g)},setupLightsView:function d(g){t.setupView(i,g)},pushLight:function o(g){i.push(g)},pushShadow:function a(g){r.push(g)}}}function $ae(n,e){let t=new WeakMap;return{get:function i(s,o=0){let a;return!1===t.has(s)?(a=new OB(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new OB(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function r(){t=new WeakMap}}}class WI extends So{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}WI.prototype.isMeshDepthMaterial=!0;class $I extends So{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ne,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}$I.prototype.isMeshDistanceMaterial=!0;const qae="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Kae="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function LB(n,e,t){let i=new sE;const r=new tt,s=new tt,o=new Ji,a=new WI({depthPacking:Fie}),c=new $I,d={},p=t.maxTextureSize,g={0:Ss,1:Tg,2:Ag},_=new mh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:qae,fragmentShader:Kae}),y=_.clone();y.defines.HORIZONTAL_PASS=1;const x=new pn;x.setAttribute("position",new Li(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new gr(x,_),N=this;function I(G,X){const re=e.update(T);_.defines.VSM_SAMPLES!==G.blurSamples&&(_.defines.VSM_SAMPLES=G.blurSamples,y.defines.VSM_SAMPLES=G.blurSamples,_.needsUpdate=!0,y.needsUpdate=!0),_.uniforms.shadow_pass.value=G.map.texture,_.uniforms.resolution.value=G.mapSize,_.uniforms.radius.value=G.radius,n.setRenderTarget(G.mapPass),n.clear(),n.renderBufferDirect(X,null,re,_,T,null),y.uniforms.shadow_pass.value=G.mapPass.texture,y.uniforms.resolution.value=G.mapSize,y.uniforms.radius.value=G.radius,n.setRenderTarget(G.map),n.clear(),n.renderBufferDirect(X,null,re,y,T,null)}function A(G,X,re,K,he,De,Te){let ge=null;const Ze=!0===K.isPointLight?G.customDistanceMaterial:G.customDepthMaterial;if(ge=void 0!==Ze?Ze:!0===K.isPointLight?c:a,n.localClippingEnabled&&!0===re.clipShadows&&0!==re.clippingPlanes.length||re.displacementMap&&0!==re.displacementScale||re.alphaMap&&re.alphaTest>0){const Pe=ge.uuid,ke=re.uuid;let Be=d[Pe];void 0===Be&&(Be={},d[Pe]=Be);let ye=Be[ke];void 0===ye&&(ye=ge.clone(),Be[ke]=ye),ge=ye}return ge.visible=re.visible,ge.wireframe=re.wireframe,ge.side=Te===my?null!==re.shadowSide?re.shadowSide:re.side:null!==re.shadowSide?re.shadowSide:g[re.side],ge.alphaMap=re.alphaMap,ge.alphaTest=re.alphaTest,ge.clipShadows=re.clipShadows,ge.clippingPlanes=re.clippingPlanes,ge.clipIntersection=re.clipIntersection,ge.displacementMap=re.displacementMap,ge.displacementScale=re.displacementScale,ge.displacementBias=re.displacementBias,ge.wireframeLinewidth=re.wireframeLinewidth,ge.linewidth=re.linewidth,!0===K.isPointLight&&!0===ge.isMeshDistanceMaterial&&(ge.referencePosition.setFromMatrixPosition(K.matrixWorld),ge.nearDistance=he,ge.farDistance=De),ge}function H(G,X,re,K,he){if(!1===G.visible)return;if(G.layers.test(X.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&he===my)&&(!G.frustumCulled||i.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,G.matrixWorld);const ge=e.update(G),Ze=G.material;if(Array.isArray(Ze)){const Pe=ge.groups;for(let ke=0,Be=Pe.length;ke<Be;ke++){const ye=Pe[ke],Ee=Ze[ye.materialIndex];if(Ee&&Ee.visible){const je=A(G,0,Ee,K,re.near,re.far,he);n.renderBufferDirect(re,null,ge,je,G,ye)}}}else if(Ze.visible){const Pe=A(G,0,Ze,K,re.near,re.far,he);n.renderBufferDirect(re,null,ge,Pe,G,null)}}const Te=G.children;for(let ge=0,Ze=Te.length;ge<Ze;ge++)H(Te[ge],X,re,K,he)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p8,this.render=function(G,X,re){if(!1===N.enabled||!1===N.autoUpdate&&!1===N.needsUpdate||0===G.length)return;const K=n.getRenderTarget(),he=n.getActiveCubeFace(),De=n.getActiveMipmapLevel(),Te=n.state;Te.setBlending(sh),Te.buffers.color.setClear(1,1,1,1),Te.buffers.depth.setTest(!0),Te.setScissorTest(!1);for(let ge=0,Ze=G.length;ge<Ze;ge++){const Pe=G[ge],ke=Pe.shadow;if(void 0===ke){console.warn("THREE.WebGLShadowMap:",Pe,"has no shadow.");continue}if(!1===ke.autoUpdate&&!1===ke.needsUpdate)continue;r.copy(ke.mapSize);const Be=ke.getFrameExtents();if(r.multiply(Be),s.copy(ke.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/Be.x),r.x=s.x*Be.x,ke.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/Be.y),r.y=s.y*Be.y,ke.mapSize.y=s.y)),null===ke.map&&!ke.isPointLightShadow&&this.type===my){const Ee={minFilter:Qs,magFilter:Qs,format:Vo};ke.map=new Nc(r.x,r.y,Ee),ke.map.texture.name=Pe.name+".shadowMap",ke.mapPass=new Nc(r.x,r.y,Ee),ke.camera.updateProjectionMatrix()}null===ke.map&&(ke.map=new Nc(r.x,r.y,{minFilter:Hs,magFilter:Hs,format:Vo}),ke.map.texture.name=Pe.name+".shadowMap",ke.camera.updateProjectionMatrix()),n.setRenderTarget(ke.map),n.clear();const ye=ke.getViewportCount();for(let Ee=0;Ee<ye;Ee++){const je=ke.getViewport(Ee);o.set(s.x*je.x,s.y*je.y,s.x*je.z,s.y*je.w),Te.viewport(o),ke.updateMatrices(Pe,Ee),i=ke.getFrustum(),H(X,re,ke.camera,Pe,this.type)}!ke.isPointLightShadow&&this.type===my&&I(ke,re),ke.needsUpdate=!1}N.needsUpdate=!1,n.setRenderTarget(K,he,De)}}function Yae(n,e,t){const i=t.isWebGL2,a=new function r(){let Ce=!1;const wt=new Ji;let at=null;const At=new Ji(0,0,0,0);return{setMask:function(St){at!==St&&!Ce&&(n.colorMask(St,St,St,St),at=St)},setLocked:function(St){Ce=St},setClear:function(St,zt,Kt,Zn,cs){!0===cs&&(St*=Zn,zt*=Zn,Kt*=Zn),wt.set(St,zt,Kt,Zn),!1===At.equals(wt)&&(n.clearColor(St,zt,Kt,Zn),At.copy(wt))},reset:function(){Ce=!1,at=null,At.set(-1,0,0,0)}}},c=new function s(){let Ce=!1,wt=null,at=null,At=null;return{setTest:function(St){St?_t(2929):mt(2929)},setMask:function(St){wt!==St&&!Ce&&(n.depthMask(St),wt=St)},setFunc:function(St){if(at!==St){if(St)switch(St){case bne:n.depthFunc(512);break;case xne:n.depthFunc(519);break;case wne:n.depthFunc(513);break;case QA:n.depthFunc(515);break;case Sne:n.depthFunc(514);break;case Ene:n.depthFunc(518);break;case Mne:n.depthFunc(516);break;case Cne:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);at=St}},setLocked:function(St){Ce=St},setClear:function(St){At!==St&&(n.clearDepth(St),At=St)},reset:function(){Ce=!1,wt=null,at=null,At=null}}},d=new function o(){let Ce=!1,wt=null,at=null,At=null,St=null,zt=null,Kt=null,Zn=null,cs=null;return{setTest:function(Ni){Ce||(Ni?_t(2960):mt(2960))},setMask:function(Ni){wt!==Ni&&!Ce&&(n.stencilMask(Ni),wt=Ni)},setFunc:function(Ni,vl,_l){(at!==Ni||At!==vl||St!==_l)&&(n.stencilFunc(Ni,vl,_l),at=Ni,At=vl,St=_l)},setOp:function(Ni,vl,_l){(zt!==Ni||Kt!==vl||Zn!==_l)&&(n.stencilOp(Ni,vl,_l),zt=Ni,Kt=vl,Zn=_l)},setLocked:function(Ni){Ce=Ni},setClear:function(Ni){cs!==Ni&&(n.clearStencil(Ni),cs=Ni)},reset:function(){Ce=!1,wt=null,at=null,At=null,St=null,zt=null,Kt=null,Zn=null,cs=null}}};let p={},g={},_=null,y=!1,x=null,T=null,N=null,I=null,A=null,H=null,G=null,X=!1,re=null,K=null,he=null,De=null,Te=null;const ge=n.getParameter(35661);let Ze=!1,Pe=0;const ke=n.getParameter(7938);-1!==ke.indexOf("WebGL")?(Pe=parseFloat(/^WebGL (\d)/.exec(ke)[1]),Ze=Pe>=1):-1!==ke.indexOf("OpenGL ES")&&(Pe=parseFloat(/^OpenGL ES (\d)/.exec(ke)[1]),Ze=Pe>=2);let Be=null,ye={};const Ee=n.getParameter(3088),je=n.getParameter(2978),lt=(new Ji).fromArray(Ee),Ue=(new Ji).fromArray(je);function qe(Ce,wt,at){const At=new Uint8Array(4),St=n.createTexture();n.bindTexture(Ce,St),n.texParameteri(Ce,10241,9728),n.texParameteri(Ce,10240,9728);for(let zt=0;zt<at;zt++)n.texImage2D(wt+zt,0,6408,1,1,0,6408,5121,At);return St}const vt={};function _t(Ce){!0!==p[Ce]&&(n.enable(Ce),p[Ce]=!0)}function mt(Ce){!1!==p[Ce]&&(n.disable(Ce),p[Ce]=!1)}vt[3553]=qe(3553,3553,1),vt[34067]=qe(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),d.setClear(0),_t(2929),c.setFunc(QA),hi(!1),Ye(f8),_t(2884),It(sh);const Xt={[Ig]:32774,[lne]:32778,[une]:32779};if(i)Xt[y8]=32775,Xt[b8]=32776;else{const Ce=e.get("EXT_blend_minmax");null!==Ce&&(Xt[y8]=Ce.MIN_EXT,Xt[b8]=Ce.MAX_EXT)}const tn={[dne]:0,[hne]:1,[fne]:768,[x8]:770,[yne]:776,[vne]:774,[mne]:772,[pne]:769,[w8]:771,[_ne]:775,[gne]:773};function It(Ce,wt,at,At,St,zt,Kt,Zn){if(Ce!==sh){if(!1===y&&(_t(3042),y=!0),Ce===cne)St=St||wt,zt=zt||at,Kt=Kt||At,(wt!==T||St!==A)&&(n.blendEquationSeparate(Xt[wt],Xt[St]),T=wt,A=St),(at!==N||At!==I||zt!==H||Kt!==G)&&(n.blendFuncSeparate(tn[at],tn[At],tn[zt],tn[Kt]),N=at,I=At,H=zt,G=Kt),x=Ce,X=null;else if(Ce!==x||Zn!==X){if((T!==Ig||A!==Ig)&&(n.blendEquation(32774),T=Ig,A=Ig),Zn)switch(Ce){case gy:n.blendFuncSeparate(1,771,1,771);break;case g8:n.blendFunc(1,1);break;case v8:n.blendFuncSeparate(0,0,769,771);break;case _8:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}else switch(Ce){case gy:n.blendFuncSeparate(770,771,1,771);break;case g8:n.blendFunc(770,1);break;case v8:n.blendFunc(0,769);break;case _8:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce)}N=null,I=null,H=null,G=null,x=Ce,X=Zn}}else!0===y&&(mt(3042),y=!1)}function hi(Ce){re!==Ce&&(n.frontFace(Ce?2304:2305),re=Ce)}function Ye(Ce){Ce!==sne?(_t(2884),Ce!==K&&n.cullFace(Ce===f8?1029:Ce===one?1028:1032)):mt(2884),K=Ce}function yt(Ce,wt,at){Ce?(_t(32823),(De!==wt||Te!==at)&&(n.polygonOffset(wt,at),De=wt,Te=at)):mt(32823)}function Tt(Ce){void 0===Ce&&(Ce=33984+ge-1),Be!==Ce&&(n.activeTexture(Ce),Be=Ce)}return{buffers:{color:a,depth:c,stencil:d},enable:_t,disable:mt,bindFramebuffer:function di(Ce,wt){return g[Ce]!==wt&&(n.bindFramebuffer(Ce,wt),g[Ce]=wt,i&&(36009===Ce&&(g[36160]=wt),36160===Ce&&(g[36009]=wt)),!0)},useProgram:function ct(Ce){return _!==Ce&&(n.useProgram(Ce),_=Ce,!0)},setBlending:It,setMaterial:function nn(Ce,wt){Ce.side===Ag?mt(2884):_t(2884);let at=Ce.side===Ss;wt&&(at=!at),hi(at),Ce.blending===gy&&!1===Ce.transparent?It(sh):It(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.premultipliedAlpha),c.setFunc(Ce.depthFunc),c.setTest(Ce.depthTest),c.setMask(Ce.depthWrite),a.setMask(Ce.colorWrite);const At=Ce.stencilWrite;d.setTest(At),At&&(d.setMask(Ce.stencilWriteMask),d.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),d.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),yt(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),!0===Ce.alphaToCoverage?_t(32926):mt(32926)},setFlipSided:hi,setCullFace:Ye,setLineWidth:function dt(Ce){Ce!==he&&(Ze&&n.lineWidth(Ce),he=Ce)},setPolygonOffset:yt,setScissorTest:function Vt(Ce){Ce?_t(3089):mt(3089)},activeTexture:Tt,bindTexture:function Vn(Ce,wt){null===Be&&Tt();let at=ye[Be];void 0===at&&(at={type:void 0,texture:void 0},ye[Be]=at),(at.type!==Ce||at.texture!==wt)&&(n.bindTexture(Ce,wt||vt[Ce]),at.type=Ce,at.texture=wt)},unbindTexture:function Hn(){const Ce=ye[Be];void 0!==Ce&&void 0!==Ce.type&&(n.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)},compressedTexImage2D:function gi(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage2D:function oe(){try{n.texImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texImage3D:function ot(){try{n.texImage3D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texStorage2D:function fe(){try{n.texStorage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},texSubImage2D:function yr(){try{n.texSubImage2D.apply(n,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}},scissor:function st(Ce){!1===lt.equals(Ce)&&(n.scissor(Ce.x,Ce.y,Ce.z,Ce.w),lt.copy(Ce))},viewport:function qt(Ce){!1===Ue.equals(Ce)&&(n.viewport(Ce.x,Ce.y,Ce.z,Ce.w),Ue.copy(Ce))},reset:function Wt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Be=null,ye={},g={},_=null,y=!1,x=null,T=null,N=null,I=null,A=null,H=null,G=null,X=!1,re=null,K=null,he=null,De=null,Te=null,lt.set(0,0,n.canvas.width,n.canvas.height),Ue.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),d.reset()}}}function Xae(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,d=r.maxCubemapSize,p=r.maxTextureSize,g=r.maxSamples,y=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,x=new WeakMap;let T,N=!1;try{N=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function I(fe,oe){return N?new OffscreenCanvas(fe,oe):HS("canvas")}function A(fe,oe,ot,st){let qt=1;if((fe.width>st||fe.height>st)&&(qt=st/Math.max(fe.width,fe.height)),qt<1||!0===oe){if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap){const Wt=oe?H8:Math.floor,Ce=Wt(qt*fe.width),wt=Wt(qt*fe.height);void 0===T&&(T=I(Ce,wt));const at=ot?I(Ce,wt):T;return at.width=Ce,at.height=wt,at.getContext("2d").drawImage(fe,0,0,Ce,wt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+fe.width+"x"+fe.height+") to ("+Ce+"x"+wt+")."),at}return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+fe.width+"x"+fe.height+")."),fe}return fe}function H(fe){return lI(fe.width)&&lI(fe.height)}function X(fe,oe){return fe.generateMipmaps&&oe&&fe.minFilter!==Hs&&fe.minFilter!==Qs}function re(fe){n.generateMipmap(fe)}function K(fe,oe,ot){if(!1===a)return oe;if(null!==fe){if(void 0!==n[fe])return n[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let st=oe;return 6403===oe&&(5126===ot&&(st=33326),5131===ot&&(st=33325),5121===ot&&(st=33321)),6407===oe&&(5126===ot&&(st=34837),5131===ot&&(st=34843),5121===ot&&(st=32849)),6408===oe&&(5126===ot&&(st=34836),5131===ot&&(st=34842),5121===ot&&(st=32856)),(33325===st||33326===st||34842===st||34836===st)&&e.get("EXT_color_buffer_float"),st}function De(fe){return fe===Hs||fe===tI||fe===nI?9728:9729}function Te(fe){const oe=fe.target;oe.removeEventListener("dispose",Te),function Ze(fe){const oe=i.get(fe);void 0!==oe.__webglInit&&(n.deleteTexture(oe.__webglTexture),i.remove(fe))}(oe),oe.isVideoTexture&&x.delete(oe),o.memory.textures--}function ge(fe){const oe=fe.target;oe.removeEventListener("dispose",ge),function Pe(fe){const oe=fe.texture,ot=i.get(fe),st=i.get(oe);if(fe){if(void 0!==st.__webglTexture&&(n.deleteTexture(st.__webglTexture),o.memory.textures--),fe.depthTexture&&fe.depthTexture.dispose(),fe.isWebGLCubeRenderTarget)for(let qt=0;qt<6;qt++)n.deleteFramebuffer(ot.__webglFramebuffer[qt]),ot.__webglDepthbuffer&&n.deleteRenderbuffer(ot.__webglDepthbuffer[qt]);else n.deleteFramebuffer(ot.__webglFramebuffer),ot.__webglDepthbuffer&&n.deleteRenderbuffer(ot.__webglDepthbuffer),ot.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ot.__webglMultisampledFramebuffer),ot.__webglColorRenderbuffer&&n.deleteRenderbuffer(ot.__webglColorRenderbuffer),ot.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ot.__webglDepthRenderbuffer);if(fe.isWebGLMultipleRenderTargets)for(let qt=0,Wt=oe.length;qt<Wt;qt++){const Ce=i.get(oe[qt]);Ce.__webglTexture&&(n.deleteTexture(Ce.__webglTexture),o.memory.textures--),i.remove(oe[qt])}i.remove(oe),i.remove(fe)}}(oe)}let ke=0;function Ee(fe,oe){const ot=i.get(fe);if(fe.isVideoTexture&&function Tt(fe){const oe=o.render.frame;x.get(fe)!==oe&&(x.set(fe,oe),fe.update())}(fe),fe.version>0&&ot.__version!==fe.version){const st=fe.image;if(void 0===st)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==st.complete)return void di(ot,fe,oe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+oe),t.bindTexture(3553,ot.__webglTexture)}function Ue(fe,oe){const ot=i.get(fe);fe.version>0&&ot.__version!==fe.version?function ct(fe,oe,ot){if(6!==oe.image.length)return;mt(fe,oe),t.activeTexture(33984+ot),t.bindTexture(34067,fe.__webglTexture),n.pixelStorei(37440,oe.flipY),n.pixelStorei(37441,oe.premultiplyAlpha),n.pixelStorei(3317,oe.unpackAlignment),n.pixelStorei(37443,0);const st=oe&&(oe.isCompressedTexture||oe.image[0].isCompressedTexture),qt=oe.image[0]&&oe.image[0].isDataTexture,Wt=[];for(let Kt=0;Kt<6;Kt++)Wt[Kt]=st||qt?qt?oe.image[Kt].image:oe.image[Kt]:A(oe.image[Kt],!1,!0,d);const wt=H(Wt[0])||a,at=s.convert(oe.format),At=s.convert(oe.type),St=K(oe.internalFormat,at,At);let zt;if(_t(34067,oe,wt),st)for(let Kt=0;Kt<6;Kt++){zt=Wt[Kt].mipmaps;for(let Zn=0;Zn<zt.length;Zn++){const cs=zt[Zn];oe.format!==Vo&&oe.format!==Zf?null!==at?t.compressedTexImage2D(34069+Kt,Zn,St,cs.width,cs.height,0,cs.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+Kt,Zn,St,cs.width,cs.height,0,at,At,cs.data)}}else{zt=oe.mipmaps;for(let Kt=0;Kt<6;Kt++)if(qt){t.texImage2D(34069+Kt,0,St,Wt[Kt].width,Wt[Kt].height,0,at,At,Wt[Kt].data);for(let Zn=0;Zn<zt.length;Zn++){const Ni=zt[Zn].image[Kt].image;t.texImage2D(34069+Kt,Zn+1,St,Ni.width,Ni.height,0,at,At,Ni.data)}}else{t.texImage2D(34069+Kt,0,St,at,At,Wt[Kt]);for(let Zn=0;Zn<zt.length;Zn++)t.texImage2D(34069+Kt,Zn+1,St,at,At,zt[Zn].image[Kt])}}X(oe,wt)&&re(34067),fe.__version=oe.version,oe.onUpdate&&oe.onUpdate(oe)}(ot,fe,oe):(t.activeTexture(33984+oe),t.bindTexture(34067,ot.__webglTexture))}const qe={[RS]:10497,[Bo]:33071,[PS]:33648},vt={[Hs]:9728,[tI]:9984,[nI]:9986,[Qs]:9729,[S8]:9985,[Pg]:9987};function _t(fe,oe,ot){if(ot?(n.texParameteri(fe,10242,qe[oe.wrapS]),n.texParameteri(fe,10243,qe[oe.wrapT]),(32879===fe||35866===fe)&&n.texParameteri(fe,32882,qe[oe.wrapR]),n.texParameteri(fe,10240,vt[oe.magFilter]),n.texParameteri(fe,10241,vt[oe.minFilter])):(n.texParameteri(fe,10242,33071),n.texParameteri(fe,10243,33071),(32879===fe||35866===fe)&&n.texParameteri(fe,32882,33071),(oe.wrapS!==Bo||oe.wrapT!==Bo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(fe,10240,De(oe.magFilter)),n.texParameteri(fe,10241,De(oe.minFilter)),oe.minFilter!==Hs&&oe.minFilter!==Qs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const st=e.get("EXT_texture_filter_anisotropic");if(oe.type===Gu&&!1===e.has("OES_texture_float_linear")||!1===a&&oe.type===kg&&!1===e.has("OES_texture_half_float_linear"))return;(oe.anisotropy>1||i.get(oe).__currentAnisotropy)&&(n.texParameterf(fe,st.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,r.getMaxAnisotropy())),i.get(oe).__currentAnisotropy=oe.anisotropy)}}function mt(fe,oe){void 0===fe.__webglInit&&(fe.__webglInit=!0,oe.addEventListener("dispose",Te),fe.__webglTexture=n.createTexture(),o.memory.textures++)}function di(fe,oe,ot){let st=3553;oe.isDataTexture2DArray&&(st=35866),oe.isDataTexture3D&&(st=32879),mt(fe,oe),t.activeTexture(33984+ot),t.bindTexture(st,fe.__webglTexture),n.pixelStorei(37440,oe.flipY),n.pixelStorei(37441,oe.premultiplyAlpha),n.pixelStorei(3317,oe.unpackAlignment),n.pixelStorei(37443,0);const qt=function G(fe){return!a&&(fe.wrapS!==Bo||fe.wrapT!==Bo||fe.minFilter!==Hs&&fe.minFilter!==Qs)}(oe)&&!1===H(oe.image),Wt=A(oe.image,qt,!1,p),Ce=H(Wt)||a,wt=s.convert(oe.format);let St,at=s.convert(oe.type),At=K(oe.internalFormat,wt,at);_t(st,oe,Ce);const zt=oe.mipmaps;if(oe.isDepthTexture)At=6402,a?At=oe.type===Gu?36012:oe.type===kS?33190:oe.type===Og?35056:33189:oe.type===Gu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),oe.format===Jf&&6402===At&&oe.type!==_y&&oe.type!==kS&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),oe.type=_y,at=s.convert(oe.type)),oe.format===Lg&&6402===At&&(At=34041,oe.type!==Og&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),oe.type=Og,at=s.convert(oe.type))),t.texImage2D(3553,0,At,Wt.width,Wt.height,0,wt,at,null);else if(oe.isDataTexture)if(zt.length>0&&Ce){for(let Kt=0,Zn=zt.length;Kt<Zn;Kt++)St=zt[Kt],t.texImage2D(3553,Kt,At,St.width,St.height,0,wt,at,St.data);oe.generateMipmaps=!1}else t.texImage2D(3553,0,At,Wt.width,Wt.height,0,wt,at,Wt.data);else if(oe.isCompressedTexture)for(let Kt=0,Zn=zt.length;Kt<Zn;Kt++)St=zt[Kt],oe.format!==Vo&&oe.format!==Zf?null!==wt?t.compressedTexImage2D(3553,Kt,At,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Kt,At,St.width,St.height,0,wt,at,St.data);else if(oe.isDataTexture2DArray)t.texImage3D(35866,0,At,Wt.width,Wt.height,Wt.depth,0,wt,at,Wt.data);else if(oe.isDataTexture3D)t.texImage3D(32879,0,At,Wt.width,Wt.height,Wt.depth,0,wt,at,Wt.data);else{const Kt=function he(fe,oe,ot){return!0===X(fe,ot)?Math.log2(Math.max(oe.width,oe.height))+1:fe.mipmaps.length>0?fe.mipmaps.length:1}(oe,Wt,Ce),Zn=a&&!0!==oe.isVideoTexture,cs=void 0===fe.__version;if(zt.length>0&&Ce){Zn&&cs&&t.texStorage2D(3553,Kt,At,zt[0].width,zt[0].height);for(let Ni=0,vl=zt.length;Ni<vl;Ni++)St=zt[Ni],Zn?t.texSubImage2D(3553,Ni,0,0,wt,at,St):t.texImage2D(3553,Ni,At,wt,at,St);oe.generateMipmaps=!1}else Zn?(cs&&t.texStorage2D(3553,Kt,At,Wt.width,Wt.height),t.texSubImage2D(3553,0,0,0,wt,at,Wt)):t.texImage2D(3553,0,At,wt,at,Wt)}X(oe,Ce)&&re(st),fe.__version=oe.version,oe.onUpdate&&oe.onUpdate(oe)}function Xt(fe,oe,ot,st,qt){const Wt=s.convert(ot.format),Ce=s.convert(ot.type),wt=K(ot.internalFormat,Wt,Ce);i.get(oe).__hasExternalTextures||(32879===qt||35866===qt?t.texImage3D(qt,0,wt,oe.width,oe.height,oe.depth,0,Wt,Ce,null):t.texImage2D(qt,0,wt,oe.width,oe.height,0,Wt,Ce,null)),t.bindFramebuffer(36160,fe),oe.useRenderToTexture?y.framebufferTexture2DMultisampleEXT(36160,st,qt,i.get(ot).__webglTexture,0,Vt(oe)):n.framebufferTexture2D(36160,st,qt,i.get(ot).__webglTexture,0),t.bindFramebuffer(36160,null)}function tn(fe,oe,ot){if(n.bindRenderbuffer(36161,fe),oe.depthBuffer&&!oe.stencilBuffer){let st=33189;if(ot||oe.useRenderToTexture){const qt=oe.depthTexture;qt&&qt.isDepthTexture&&(qt.type===Gu?st=36012:qt.type===kS&&(st=33190));const Wt=Vt(oe);oe.useRenderToTexture?y.renderbufferStorageMultisampleEXT(36161,Wt,st,oe.width,oe.height):n.renderbufferStorageMultisample(36161,Wt,st,oe.width,oe.height)}else n.renderbufferStorage(36161,st,oe.width,oe.height);n.framebufferRenderbuffer(36160,36096,36161,fe)}else if(oe.depthBuffer&&oe.stencilBuffer){const st=Vt(oe);ot&&oe.useRenderbuffer?n.renderbufferStorageMultisample(36161,st,35056,oe.width,oe.height):oe.useRenderToTexture?y.renderbufferStorageMultisampleEXT(36161,st,35056,oe.width,oe.height):n.renderbufferStorage(36161,34041,oe.width,oe.height),n.framebufferRenderbuffer(36160,33306,36161,fe)}else{const st=!0===oe.isWebGLMultipleRenderTargets?oe.texture[0]:oe.texture,qt=s.convert(st.format),Wt=s.convert(st.type),Ce=K(st.internalFormat,qt,Wt),wt=Vt(oe);ot&&oe.useRenderbuffer?n.renderbufferStorageMultisample(36161,wt,Ce,oe.width,oe.height):oe.useRenderToTexture?y.renderbufferStorageMultisampleEXT(36161,wt,Ce,oe.width,oe.height):n.renderbufferStorage(36161,Ce,oe.width,oe.height)}n.bindRenderbuffer(36161,null)}function nn(fe){const oe=i.get(fe),ot=!0===fe.isWebGLCubeRenderTarget;if(fe.depthTexture&&!oe.__autoAllocateDepthBuffer){if(ot)throw new Error("target.depthTexture not supported in Cube render targets");!function It(fe,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,fe),!oe.depthTexture||!oe.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),Ee(oe.depthTexture,0);const st=i.get(oe.depthTexture).__webglTexture,qt=Vt(oe);if(oe.depthTexture.format===Jf)oe.useRenderToTexture?y.framebufferTexture2DMultisampleEXT(36160,36096,3553,st,0,qt):n.framebufferTexture2D(36160,36096,3553,st,0);else{if(oe.depthTexture.format!==Lg)throw new Error("Unknown depthTexture format");oe.useRenderToTexture?y.framebufferTexture2DMultisampleEXT(36160,33306,3553,st,0,qt):n.framebufferTexture2D(36160,33306,3553,st,0)}}(oe.__webglFramebuffer,fe)}else if(ot){oe.__webglDepthbuffer=[];for(let st=0;st<6;st++)t.bindFramebuffer(36160,oe.__webglFramebuffer[st]),oe.__webglDepthbuffer[st]=n.createRenderbuffer(),tn(oe.__webglDepthbuffer[st],fe,!1)}else t.bindFramebuffer(36160,oe.__webglFramebuffer),oe.__webglDepthbuffer=n.createRenderbuffer(),tn(oe.__webglDepthbuffer,fe,!1);t.bindFramebuffer(36160,null)}function Vt(fe){return a&&(fe.useRenderbuffer||fe.useRenderToTexture)?Math.min(g,fe.samples):0}let Vn=!1,Hn=!1;this.allocateTextureUnit=function ye(){const fe=ke;return fe>=c&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+c),ke+=1,fe},this.resetTextureUnits=function Be(){ke=0},this.setTexture2D=Ee,this.setTexture2DArray=function je(fe,oe){const ot=i.get(fe);fe.version>0&&ot.__version!==fe.version?di(ot,fe,oe):(t.activeTexture(33984+oe),t.bindTexture(35866,ot.__webglTexture))},this.setTexture3D=function lt(fe,oe){const ot=i.get(fe);fe.version>0&&ot.__version!==fe.version?di(ot,fe,oe):(t.activeTexture(33984+oe),t.bindTexture(32879,ot.__webglTexture))},this.setTextureCube=Ue,this.rebindTextures=function hi(fe,oe,ot){const st=i.get(fe);void 0!==oe&&Xt(st.__webglFramebuffer,fe,fe.texture,36064,3553),void 0!==ot&&nn(fe)},this.setupRenderTarget=function Ye(fe){const oe=fe.texture,ot=i.get(fe),st=i.get(oe);fe.addEventListener("dispose",ge),!0!==fe.isWebGLMultipleRenderTargets&&(void 0===st.__webglTexture&&(st.__webglTexture=n.createTexture()),st.__version=oe.version,o.memory.textures++);const qt=!0===fe.isWebGLCubeRenderTarget,Wt=!0===fe.isWebGLMultipleRenderTargets,Ce=oe.isDataTexture3D||oe.isDataTexture2DArray,wt=H(fe)||a;if(a&&oe.format===Zf&&(oe.type===Gu||oe.type===kg)&&(oe.format=Vo,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),qt){ot.__webglFramebuffer=[];for(let at=0;at<6;at++)ot.__webglFramebuffer[at]=n.createFramebuffer()}else if(ot.__webglFramebuffer=n.createFramebuffer(),Wt)if(r.drawBuffers){const at=fe.texture;for(let At=0,St=at.length;At<St;At++){const zt=i.get(at[At]);void 0===zt.__webglTexture&&(zt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(fe.useRenderbuffer)if(a){ot.__webglMultisampledFramebuffer=n.createFramebuffer(),ot.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,ot.__webglColorRenderbuffer);const at=s.convert(oe.format),At=s.convert(oe.type),St=K(oe.internalFormat,at,At),zt=Vt(fe);n.renderbufferStorageMultisample(36161,zt,St,fe.width,fe.height),t.bindFramebuffer(36160,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,ot.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),fe.depthBuffer&&(ot.__webglDepthRenderbuffer=n.createRenderbuffer(),tn(ot.__webglDepthRenderbuffer,fe,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(qt){t.bindTexture(34067,st.__webglTexture),_t(34067,oe,wt);for(let at=0;at<6;at++)Xt(ot.__webglFramebuffer[at],fe,oe,36064,34069+at);X(oe,wt)&&re(34067),t.unbindTexture()}else if(Wt){const at=fe.texture;for(let At=0,St=at.length;At<St;At++){const zt=at[At],Kt=i.get(zt);t.bindTexture(3553,Kt.__webglTexture),_t(3553,zt,wt),Xt(ot.__webglFramebuffer,fe,zt,36064+At,3553),X(zt,wt)&&re(3553)}t.unbindTexture()}else{let at=3553;Ce&&(a?at=oe.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(at,st.__webglTexture),_t(at,oe,wt),Xt(ot.__webglFramebuffer,fe,oe,36064,at),X(oe,wt)&&re(at),t.unbindTexture()}fe.depthBuffer&&nn(fe)},this.updateRenderTargetMipmap=function dt(fe){const oe=H(fe)||a,ot=!0===fe.isWebGLMultipleRenderTargets?fe.texture:[fe.texture];for(let st=0,qt=ot.length;st<qt;st++){const Wt=ot[st];if(X(Wt,oe)){const Ce=fe.isWebGLCubeRenderTarget?34067:3553,wt=i.get(Wt).__webglTexture;t.bindTexture(Ce,wt),re(Ce),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function yt(fe){if(fe.useRenderbuffer)if(a){const oe=fe.width,ot=fe.height;let st=16384;const qt=[36064],Wt=fe.stencilBuffer?33306:36096;fe.depthBuffer&&qt.push(Wt),fe.ignoreDepthForMultisampleCopy||(fe.depthBuffer&&(st|=256),fe.stencilBuffer&&(st|=1024));const Ce=i.get(fe);t.bindFramebuffer(36008,Ce.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ce.__webglFramebuffer),fe.ignoreDepthForMultisampleCopy&&(n.invalidateFramebuffer(36008,[Wt]),n.invalidateFramebuffer(36009,[Wt])),n.blitFramebuffer(0,0,oe,ot,0,0,oe,ot,st,9728),n.invalidateFramebuffer(36008,qt),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Ce.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=nn,this.setupFrameBufferTexture=Xt,this.safeSetTexture2D=function gi(fe,oe){fe&&fe.isWebGLRenderTarget&&(!1===Vn&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Vn=!0),fe=fe.texture),Ee(fe,oe)},this.safeSetTextureCube=function yr(fe,oe){fe&&fe.isWebGLCubeRenderTarget&&(!1===Hn&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Hn=!0),fe=fe.texture),Ue(fe,oe)}}function Zae(n,e,t){const i=t.isWebGL2;return{convert:function r(s){let o;if(s===oh)return 5121;if(s===Nne)return 32819;if(s===Bne)return 32820;if(s===Vne)return 33635;if(s===kne)return 5120;if(s===One)return 5122;if(s===_y)return 5123;if(s===Lne)return 5124;if(s===kS)return 5125;if(s===Gu)return 5126;if(s===kg)return i?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(s===Hne)return 6406;if(s===Zf)return 6407;if(s===Vo)return 6408;if(s===Une)return 6409;if(s===zne)return 6410;if(s===Jf)return 6402;if(s===Lg)return 34041;if(s===jne)return 6403;if(s===Wne)return 36244;if(s===$ne)return 33319;if(s===qne)return 33320;if(s===Kne)return 36248;if(s===Yne)return 36249;if(s===E8||s===M8||s===C8||s===D8){if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(s===E8)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===M8)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===C8)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===D8)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===T8||s===A8||s===I8||s===F8){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(s===T8)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===A8)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===I8)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===F8)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===Xne)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===R8||s===P8)&&(o=e.get("WEBGL_compressed_texture_etc"),null!==o)){if(s===R8)return o.COMPRESSED_RGB8_ETC2;if(s===P8)return o.COMPRESSED_RGBA8_ETC2_EAC}return s===Zne||s===Jne||s===Qne||s===eie||s===tie||s===nie||s===iie||s===rie||s===sie||s===oie||s===aie||s===cie||s===lie||s===uie||s===hie||s===fie||s===pie||s===mie||s===gie||s===vie||s===_ie||s===yie||s===bie||s===xie||s===wie||s===Sie||s===Eie||s===Mie?(o=e.get("WEBGL_compressed_texture_astc"),null!==o?s:null):s===die?(o=e.get("EXT_texture_compression_bptc"),null!==o?s:null):s===Og?i?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class NB extends Eo{constructor(e=[]){super(),this.cameras=e}}NB.prototype.isArrayCamera=!0;class c0 extends Ui{constructor(){super(),this.type="Group"}}c0.prototype.isGroup=!0;const Jae={type:"move"};class qI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new c0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new c0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new c0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,d=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Jae))),d&&e.hand){o=!0;for(const T of e.hand.values()){const N=t.getJointPose(T,i);if(void 0===d.joints[T.jointName]){const A=new c0;A.matrixAutoUpdate=!1,A.visible=!1,d.joints[T.jointName]=A,d.add(A)}const I=d.joints[T.jointName];null!==N&&(I.matrix.fromArray(N.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.jointRadius=N.radius),I.visible=null!==N}const _=d.joints["index-finger-tip"].position.distanceTo(d.joints["thumb-tip"].position),y=.02,x=.005;d.inputState.pinching&&_>y+x?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&_<=y-x&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==d&&(d.visible=null!==o),this}}class KI extends eo{constructor(e,t,i,r,s,o,a,c,d,p){if((p=void 0!==p?p:Jf)!==Jf&&p!==Lg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&p===Jf&&(i=_y),void 0===i&&p===Lg&&(i=Og),super(null,r,s,o,a,c,p,i,d),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Hs,this.minFilter=void 0!==c?c:Hs,this.flipY=!1,this.generateMipmaps=!1}}KI.prototype.isDepthTexture=!0;class Qae extends Qf{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor";const c=e.extensions.has("WEBGL_multisampled_render_to_texture");let d=null,p=null,g=null,_=null,y=!1,x=null;const T=t.getContextAttributes();let N=null,I=null;const A=[],H=new Map,G=new Eo;G.layers.enable(1),G.viewport=new Ji;const X=new Eo;X.layers.enable(2),X.viewport=new Ji;const re=[G,X],K=new NB;K.layers.enable(1),K.layers.enable(2);let he=null,De=null;function Te(Ue){const qe=H.get(Ue.inputSource);qe&&qe.dispatchEvent({type:Ue.type,data:Ue.inputSource})}function ge(){H.forEach(function(Ue,qe){Ue.disconnect(qe)}),H.clear(),he=null,De=null,e.setRenderTarget(N),_=null,g=null,p=null,r=null,I=null,lt.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function Ze(Ue){const qe=r.inputSources;for(let vt=0;vt<A.length;vt++)H.set(qe[vt],A[vt]);for(let vt=0;vt<Ue.removed.length;vt++){const _t=Ue.removed[vt],mt=H.get(_t);mt&&(mt.dispatchEvent({type:"disconnected",data:_t}),H.delete(_t))}for(let vt=0;vt<Ue.added.length;vt++){const _t=Ue.added[vt],mt=H.get(_t);mt&&mt.dispatchEvent({type:"connected",data:_t})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ue){let qe=A[Ue];return void 0===qe&&(qe=new qI,A[Ue]=qe),qe.getTargetRaySpace()},this.getControllerGrip=function(Ue){let qe=A[Ue];return void 0===qe&&(qe=new qI,A[Ue]=qe),qe.getGripSpace()},this.getHand=function(Ue){let qe=A[Ue];return void 0===qe&&(qe=new qI,A[Ue]=qe),qe.getHandSpace()},this.setFramebufferScaleFactor=function(Ue){s=Ue,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ue){a=Ue,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==g?g:_},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=function(){var Ue=ul(function*(qe){if(r=qe,null!==r){if(N=e.getRenderTarget(),r.addEventListener("select",Te),r.addEventListener("selectstart",Te),r.addEventListener("selectend",Te),r.addEventListener("squeeze",Te),r.addEventListener("squeezestart",Te),r.addEventListener("squeezeend",Te),r.addEventListener("end",ge),r.addEventListener("inputsourceschange",Ze),!0!==T.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)_=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||T.antialias,alpha:T.alpha,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:_}),I=new Nc(_.framebufferWidth,_.framebufferHeight);else{y=T.antialias;let vt=null,_t=null,mt=null;T.depth&&(mt=T.stencil?35056:33189,vt=T.stencil?Lg:Jf,_t=T.stencil?Og:_y);const di={colorFormat:T.alpha||y?32856:32849,depthFormat:mt,scaleFactor:s};p=new XRWebGLBinding(r,t),g=p.createProjectionLayer(di),r.updateRenderState({layers:[g]}),I=y?new dI(g.textureWidth,g.textureHeight,{format:Vo,type:oh,depthTexture:new KI(g.textureWidth,g.textureHeight,_t,void 0,void 0,void 0,void 0,void 0,void 0,vt),stencilBuffer:T.stencil,ignoreDepth:g.ignoreDepthValues,useRenderToTexture:c}):new Nc(g.textureWidth,g.textureHeight,{format:T.alpha?Vo:Zf,type:oh,depthTexture:new KI(g.textureWidth,g.textureHeight,_t,void 0,void 0,void 0,void 0,void 0,void 0,vt),stencilBuffer:T.stencil,ignoreDepth:g.ignoreDepthValues})}this.setFoveation(0),o=yield r.requestReferenceSpace(a),lt.setContext(r),lt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(qe){return Ue.apply(this,arguments)}}();const Pe=new ne,ke=new ne;function ye(Ue,qe){null===qe?Ue.matrixWorld.copy(Ue.matrix):Ue.matrixWorld.multiplyMatrices(qe.matrixWorld,Ue.matrix),Ue.matrixWorldInverse.copy(Ue.matrixWorld).invert()}this.updateCamera=function(Ue){if(null===r)return;K.near=X.near=G.near=Ue.near,K.far=X.far=G.far=Ue.far,(he!==K.near||De!==K.far)&&(r.updateRenderState({depthNear:K.near,depthFar:K.far}),he=K.near,De=K.far);const qe=Ue.parent,vt=K.cameras;ye(K,qe);for(let mt=0;mt<vt.length;mt++)ye(vt[mt],qe);K.matrixWorld.decompose(K.position,K.quaternion,K.scale),Ue.position.copy(K.position),Ue.quaternion.copy(K.quaternion),Ue.scale.copy(K.scale),Ue.matrix.copy(K.matrix),Ue.matrixWorld.copy(K.matrixWorld);const _t=Ue.children;for(let mt=0,di=_t.length;mt<di;mt++)_t[mt].updateMatrixWorld(!0);2===vt.length?function Be(Ue,qe,vt){Pe.setFromMatrixPosition(qe.matrixWorld),ke.setFromMatrixPosition(vt.matrixWorld);const _t=Pe.distanceTo(ke),mt=qe.projectionMatrix.elements,di=vt.projectionMatrix.elements,ct=mt[14]/(mt[10]-1),Xt=mt[14]/(mt[10]+1),tn=(mt[9]+1)/mt[5],It=(mt[9]-1)/mt[5],nn=(mt[8]-1)/mt[0],hi=(di[8]+1)/di[0],Ye=ct*nn,dt=ct*hi,yt=_t/(-nn+hi),Vt=yt*-nn;qe.matrixWorld.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.translateX(Vt),Ue.translateZ(yt),Ue.matrixWorld.compose(Ue.position,Ue.quaternion,Ue.scale),Ue.matrixWorldInverse.copy(Ue.matrixWorld).invert();const Tt=ct+yt,Vn=Xt+yt;Ue.projectionMatrix.makePerspective(Ye-Vt,dt+(_t-Vt),tn*Xt/Vn*Tt,It*Xt/Vn*Tt,Tt,Vn)}(K,G,X):K.projectionMatrix.copy(G.projectionMatrix)},this.getCamera=function(){return K},this.getFoveation=function(){return null!==g?g.fixedFoveation:null!==_?_.fixedFoveation:void 0},this.setFoveation=function(Ue){null!==g&&(g.fixedFoveation=Ue),null!==_&&void 0!==_.fixedFoveation&&(_.fixedFoveation=Ue)};let Ee=null;const lt=new nB;lt.setAnimationLoop(function je(Ue,qe){if(d=qe.getViewerPose(o),x=qe,null!==d){const _t=d.views;null!==_&&(e.setRenderTargetFramebuffer(I,_.framebuffer),e.setRenderTarget(I));let mt=!1;_t.length!==K.cameras.length&&(K.cameras.length=0,mt=!0);for(let di=0;di<_t.length;di++){const ct=_t[di];let Xt=null;if(null!==_)Xt=_.getViewport(ct);else{const It=p.getViewSubImage(g,ct);Xt=It.viewport,0===di&&(e.setRenderTargetTextures(I,It.colorTexture,g.ignoreDepthValues?void 0:It.depthStencilTexture),e.setRenderTarget(I))}const tn=re[di];tn.matrix.fromArray(ct.transform.matrix),tn.projectionMatrix.fromArray(ct.projectionMatrix),tn.viewport.set(Xt.x,Xt.y,Xt.width,Xt.height),0===di&&K.matrix.copy(tn.matrix),!0===mt&&K.cameras.push(tn)}}const vt=r.inputSources;for(let _t=0;_t<A.length;_t++)A[_t].update(vt[_t],qe,o);Ee&&Ee(Ue,qe),x=null}),this.setAnimationLoop=function(Ue){Ee=Ue},this.dispose=function(){}}}function ece(n){function i(I,A){I.opacity.value=A.opacity,A.color&&I.diffuse.value.copy(A.color),A.emissive&&I.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(I.map.value=A.map),A.alphaMap&&(I.alphaMap.value=A.alphaMap),A.specularMap&&(I.specularMap.value=A.specularMap),A.alphaTest>0&&(I.alphaTest.value=A.alphaTest);const H=n.get(A).envMap;let G,X;H&&(I.envMap.value=H,I.flipEnvMap.value=H.isCubeTexture&&!1===H.isRenderTargetTexture?-1:1,I.reflectivity.value=A.reflectivity,I.ior.value=A.ior,I.refractionRatio.value=A.refractionRatio),A.lightMap&&(I.lightMap.value=A.lightMap,I.lightMapIntensity.value=A.lightMapIntensity),A.aoMap&&(I.aoMap.value=A.aoMap,I.aoMapIntensity.value=A.aoMapIntensity),A.map?G=A.map:A.specularMap?G=A.specularMap:A.displacementMap?G=A.displacementMap:A.normalMap?G=A.normalMap:A.bumpMap?G=A.bumpMap:A.roughnessMap?G=A.roughnessMap:A.metalnessMap?G=A.metalnessMap:A.alphaMap?G=A.alphaMap:A.emissiveMap?G=A.emissiveMap:A.clearcoatMap?G=A.clearcoatMap:A.clearcoatNormalMap?G=A.clearcoatNormalMap:A.clearcoatRoughnessMap?G=A.clearcoatRoughnessMap:A.specularIntensityMap?G=A.specularIntensityMap:A.specularColorMap?G=A.specularColorMap:A.transmissionMap?G=A.transmissionMap:A.thicknessMap?G=A.thicknessMap:A.sheenColorMap?G=A.sheenColorMap:A.sheenRoughnessMap&&(G=A.sheenRoughnessMap),void 0!==G&&(G.isWebGLRenderTarget&&(G=G.texture),!0===G.matrixAutoUpdate&&G.updateMatrix(),I.uvTransform.value.copy(G.matrix)),A.aoMap?X=A.aoMap:A.lightMap&&(X=A.lightMap),void 0!==X&&(X.isWebGLRenderTarget&&(X=X.texture),!0===X.matrixAutoUpdate&&X.updateMatrix(),I.uv2Transform.value.copy(X.matrix))}function g(I,A){I.roughness.value=A.roughness,I.metalness.value=A.metalness,A.roughnessMap&&(I.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(I.metalnessMap.value=A.metalnessMap),A.emissiveMap&&(I.emissiveMap.value=A.emissiveMap),A.bumpMap&&(I.bumpMap.value=A.bumpMap,I.bumpScale.value=A.bumpScale,A.side===Ss&&(I.bumpScale.value*=-1)),A.normalMap&&(I.normalMap.value=A.normalMap,I.normalScale.value.copy(A.normalScale),A.side===Ss&&I.normalScale.value.negate()),A.displacementMap&&(I.displacementMap.value=A.displacementMap,I.displacementScale.value=A.displacementScale,I.displacementBias.value=A.displacementBias),n.get(A).envMap&&(I.envMapIntensity.value=A.envMapIntensity)}return{refreshFogUniforms:function e(I,A){I.fogColor.value.copy(A.color),A.isFog?(I.fogNear.value=A.near,I.fogFar.value=A.far):A.isFogExp2&&(I.fogDensity.value=A.density)},refreshMaterialUniforms:function t(I,A,H,G,X){A.isMeshBasicMaterial?i(I,A):A.isMeshLambertMaterial?(i(I,A),function c(I,A){A.emissiveMap&&(I.emissiveMap.value=A.emissiveMap)}(I,A)):A.isMeshToonMaterial?(i(I,A),function p(I,A){A.gradientMap&&(I.gradientMap.value=A.gradientMap),A.emissiveMap&&(I.emissiveMap.value=A.emissiveMap),A.bumpMap&&(I.bumpMap.value=A.bumpMap,I.bumpScale.value=A.bumpScale,A.side===Ss&&(I.bumpScale.value*=-1)),A.normalMap&&(I.normalMap.value=A.normalMap,I.normalScale.value.copy(A.normalScale),A.side===Ss&&I.normalScale.value.negate()),A.displacementMap&&(I.displacementMap.value=A.displacementMap,I.displacementScale.value=A.displacementScale,I.displacementBias.value=A.displacementBias)}(I,A)):A.isMeshPhongMaterial?(i(I,A),function d(I,A){I.specular.value.copy(A.specular),I.shininess.value=Math.max(A.shininess,1e-4),A.emissiveMap&&(I.emissiveMap.value=A.emissiveMap),A.bumpMap&&(I.bumpMap.value=A.bumpMap,I.bumpScale.value=A.bumpScale,A.side===Ss&&(I.bumpScale.value*=-1)),A.normalMap&&(I.normalMap.value=A.normalMap,I.normalScale.value.copy(A.normalScale),A.side===Ss&&I.normalScale.value.negate()),A.displacementMap&&(I.displacementMap.value=A.displacementMap,I.displacementScale.value=A.displacementScale,I.displacementBias.value=A.displacementBias)}(I,A)):A.isMeshStandardMaterial?(i(I,A),A.isMeshPhysicalMaterial?function _(I,A,H){g(I,A),I.ior.value=A.ior,A.sheen>0&&(I.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),I.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(I.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(I.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(I.clearcoat.value=A.clearcoat,I.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(I.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(I.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(I.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),I.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===Ss&&I.clearcoatNormalScale.value.negate())),A.transmission>0&&(I.transmission.value=A.transmission,I.transmissionSamplerMap.value=H.texture,I.transmissionSamplerSize.value.set(H.width,H.height),A.transmissionMap&&(I.transmissionMap.value=A.transmissionMap),I.thickness.value=A.thickness,A.thicknessMap&&(I.thicknessMap.value=A.thicknessMap),I.attenuationDistance.value=A.attenuationDistance,I.attenuationColor.value.copy(A.attenuationColor)),I.specularIntensity.value=A.specularIntensity,I.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(I.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(I.specularColorMap.value=A.specularColorMap)}(I,A,X):g(I,A)):A.isMeshMatcapMaterial?(i(I,A),function y(I,A){A.matcap&&(I.matcap.value=A.matcap),A.bumpMap&&(I.bumpMap.value=A.bumpMap,I.bumpScale.value=A.bumpScale,A.side===Ss&&(I.bumpScale.value*=-1)),A.normalMap&&(I.normalMap.value=A.normalMap,I.normalScale.value.copy(A.normalScale),A.side===Ss&&I.normalScale.value.negate()),A.displacementMap&&(I.displacementMap.value=A.displacementMap,I.displacementScale.value=A.displacementScale,I.displacementBias.value=A.displacementBias)}(I,A)):A.isMeshDepthMaterial?(i(I,A),function x(I,A){A.displacementMap&&(I.displacementMap.value=A.displacementMap,I.displacementScale.value=A.displacementScale,I.displacementBias.value=A.displacementBias)}(I,A)):A.isMeshDistanceMaterial?(i(I,A),function T(I,A){A.displacementMap&&(I.displacementMap.value=A.displacementMap,I.displacementScale.value=A.displacementScale,I.displacementBias.value=A.displacementBias),I.referencePosition.value.copy(A.referencePosition),I.nearDistance.value=A.nearDistance,I.farDistance.value=A.farDistance}(I,A)):A.isMeshNormalMaterial?(i(I,A),function N(I,A){A.bumpMap&&(I.bumpMap.value=A.bumpMap,I.bumpScale.value=A.bumpScale,A.side===Ss&&(I.bumpScale.value*=-1)),A.normalMap&&(I.normalMap.value=A.normalMap,I.normalScale.value.copy(A.normalScale),A.side===Ss&&I.normalScale.value.negate()),A.displacementMap&&(I.displacementMap.value=A.displacementMap,I.displacementScale.value=A.displacementScale,I.displacementBias.value=A.displacementBias)}(I,A)):A.isLineBasicMaterial?(function r(I,A){I.diffuse.value.copy(A.color),I.opacity.value=A.opacity}(I,A),A.isLineDashedMaterial&&function s(I,A){I.dashSize.value=A.dashSize,I.totalSize.value=A.dashSize+A.gapSize,I.scale.value=A.scale}(I,A)):A.isPointsMaterial?function o(I,A,H,G){let X;I.diffuse.value.copy(A.color),I.opacity.value=A.opacity,I.size.value=A.size*H,I.scale.value=.5*G,A.map&&(I.map.value=A.map),A.alphaMap&&(I.alphaMap.value=A.alphaMap),A.alphaTest>0&&(I.alphaTest.value=A.alphaTest),A.map?X=A.map:A.alphaMap&&(X=A.alphaMap),void 0!==X&&(!0===X.matrixAutoUpdate&&X.updateMatrix(),I.uvTransform.value.copy(X.matrix))}(I,A,H,G):A.isSpriteMaterial?function a(I,A){let H;I.diffuse.value.copy(A.color),I.opacity.value=A.opacity,I.rotation.value=A.rotation,A.map&&(I.map.value=A.map),A.alphaMap&&(I.alphaMap.value=A.alphaMap),A.alphaTest>0&&(I.alphaTest.value=A.alphaTest),A.map?H=A.map:A.alphaMap&&(H=A.alphaMap),void 0!==H&&(!0===H.matrixAutoUpdate&&H.updateMatrix(),I.uvTransform.value.copy(H.matrix))}(I,A):A.isShadowMaterial?(I.color.value.copy(A.color),I.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}}}function Qi(n={}){const e=void 0!==n.canvas?n.canvas:function tce(){const n=HS("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0!==n.alpha&&n.alpha,r=void 0===n.depth||n.depth,s=void 0===n.stencil||n.stencil,o=void 0!==n.antialias&&n.antialias,a=void 0===n.premultipliedAlpha||n.premultipliedAlpha,c=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,d=void 0!==n.powerPreference?n.powerPreference:"default",p=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let g=null,_=null;const y=[],x=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=ba,this.physicallyCorrectLights=!1,this.toneMapping=Xf,this.toneMappingExposure=1;const T=this;let N=!1,I=0,A=0,H=null,G=-1,X=null;const re=new Ji,K=new Ji;let he=null,De=e.width,Te=e.height,ge=1,Ze=null,Pe=null;const ke=new Ji(0,0,De,Te),Be=new Ji(0,0,De,Te);let ye=!1;const Ee=[],je=new sE;let lt=!1,Ue=!1,qe=null;const vt=new Gt,_t=new ne,mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function di(){return null===H?ge:1}let tn,It,nn,hi,Ye,dt,yt,Vt,Tt,Vn,Hn,gi,yr,fe,oe,ot,st,qt,Wt,Ce,wt,at,At,ct=t;function Xt(se,Re){for(let We=0;We<se.length;We++){const Je=e.getContext(se[We],Re);if(null!==Je)return Je}return null}try{const se={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${JA}`),e.addEventListener("webglcontextlost",Kt,!1),e.addEventListener("webglcontextrestored",Zn,!1),null===ct){const Re=["webgl2","webgl","experimental-webgl"];if(!0===T.isWebGL1Renderer&&Re.shift(),ct=Xt(Re,se),null===ct)throw Xt(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}function St(){tn=new Eoe(ct),It=new goe(ct,tn,n),tn.init(It),at=new Zae(ct,tn,It),nn=new Yae(ct,tn,It),Ee[0]=1029,hi=new Doe(ct),Ye=new Bae,dt=new Xae(ct,tn,nn,Ye,It,at,hi),yt=new _oe(T),Vt=new Soe(T),Tt=new _re(ct,It),At=new poe(ct,tn,Tt,It),Vn=new Moe(ct,Tt,hi,At),Hn=new Foe(ct,Vn,Tt,hi),Wt=new Ioe(ct,It,dt),ot=new voe(Ye),gi=new Nae(T,yt,Vt,tn,It,At,ot),yr=new ece(Ye),fe=new Hae(Ye),oe=new $ae(tn,It),qt=new foe(T,yt,nn,Hn,a),st=new LB(T,Hn,It),Ce=new moe(ct,tn,hi,It),wt=new Coe(ct,tn,hi,It),hi.programs=gi.programs,T.capabilities=It,T.extensions=tn,T.properties=Ye,T.renderLists=fe,T.shadowMap=st,T.state=nn,T.info=hi}St();const zt=new Qae(T,ct);function Kt(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function Zn(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const se=hi.autoReset,Re=st.enabled,We=st.autoUpdate,Le=st.needsUpdate,Je=st.type;St(),hi.autoReset=se,st.enabled=Re,st.autoUpdate=We,st.needsUpdate=Le,st.type=Je}function cs(se){const Re=se.target;Re.removeEventListener("dispose",cs),function Ni(se){(function vl(se){const Re=Ye.get(se).programs;void 0!==Re&&Re.forEach(function(We){gi.releaseProgram(We)})})(se),Ye.remove(se)}(Re)}this.xr=zt,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const se=tn.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=tn.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return ge},this.setPixelRatio=function(se){void 0!==se&&(ge=se,this.setSize(De,Te,!1))},this.getSize=function(se){return se.set(De,Te)},this.setSize=function(se,Re,We){zt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(De=se,Te=Re,e.width=Math.floor(se*ge),e.height=Math.floor(Re*ge),!1!==We&&(e.style.width=se+"px",e.style.height=Re+"px"),this.setViewport(0,0,se,Re))},this.getDrawingBufferSize=function(se){return se.set(De*ge,Te*ge).floor()},this.setDrawingBufferSize=function(se,Re,We){De=se,Te=Re,ge=We,e.width=Math.floor(se*We),e.height=Math.floor(Re*We),this.setViewport(0,0,se,Re)},this.getCurrentViewport=function(se){return se.copy(re)},this.getViewport=function(se){return se.copy(ke)},this.setViewport=function(se,Re,We,Le){se.isVector4?ke.set(se.x,se.y,se.z,se.w):ke.set(se,Re,We,Le),nn.viewport(re.copy(ke).multiplyScalar(ge).floor())},this.getScissor=function(se){return se.copy(Be)},this.setScissor=function(se,Re,We,Le){se.isVector4?Be.set(se.x,se.y,se.z,se.w):Be.set(se,Re,We,Le),nn.scissor(K.copy(Be).multiplyScalar(ge).floor())},this.getScissorTest=function(){return ye},this.setScissorTest=function(se){nn.setScissorTest(ye=se)},this.setOpaqueSort=function(se){Ze=se},this.setTransparentSort=function(se){Pe=se},this.getClearColor=function(se){return se.copy(qt.getClearColor())},this.setClearColor=function(){qt.setClearColor.apply(qt,arguments)},this.getClearAlpha=function(){return qt.getClearAlpha()},this.setClearAlpha=function(){qt.setClearAlpha.apply(qt,arguments)},this.clear=function(se,Re,We){let Le=0;(void 0===se||se)&&(Le|=16384),(void 0===Re||Re)&&(Le|=256),(void 0===We||We)&&(Le|=1024),ct.clear(Le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Kt,!1),e.removeEventListener("webglcontextrestored",Zn,!1),fe.dispose(),oe.dispose(),Ye.dispose(),yt.dispose(),Vt.dispose(),Hn.dispose(),At.dispose(),zt.dispose(),zt.removeEventListener("sessionstart",bV),zt.removeEventListener("sessionend",xV),qe&&(qe.dispose(),qe=null),gp.stop()},this.renderBufferDirect=function(se,Re,We,Le,Je,Pn){null===Re&&(Re=mt);const yn=Je.isMesh&&Je.matrixWorld.determinant()<0,ri=function bue(se,Re,We,Le,Je){!0!==Re.isScene&&(Re=mt),dt.resetTextureUnits();const Pn=Re.fog,ri=null===H?T.outputEncoding:H.texture.encoding,kn=(Le.isMeshStandardMaterial?Vt:yt).get(Le.envMap||(Le.isMeshStandardMaterial?Re.environment:null)),Ai=!0===Le.vertexColors&&!!We.attributes.color&&4===We.attributes.color.itemSize,si=!!Le.normalMap&&!!We.attributes.tangent,wi=!!We.morphAttributes.position,Gr=!!We.morphAttributes.normal,vp=We.morphAttributes.position?We.morphAttributes.position.length:0,Bi=Ye.get(Le),Jy=_.state.lights;!0!==lt||!0!==Ue&&se===X||ot.setState(Le,se,se===X&&Le.id===G);let br=!1;Le.version===Bi.__version?(Bi.needsLights&&Bi.lightsStateVersion!==Jy.state.version||Bi.outputEncoding!==ri||Je.isInstancedMesh&&!1===Bi.instancing||!Je.isInstancedMesh&&!0===Bi.instancing||Je.isSkinnedMesh&&!1===Bi.skinning||!Je.isSkinnedMesh&&!0===Bi.skinning||Bi.envMap!==kn||Le.fog&&Bi.fog!==Pn||void 0!==Bi.numClippingPlanes&&(Bi.numClippingPlanes!==ot.numPlanes||Bi.numIntersection!==ot.numIntersection)||Bi.vertexAlphas!==Ai||Bi.vertexTangents!==si||Bi.morphTargets!==wi||Bi.morphNormals!==Gr||!0===It.isWebGL2&&Bi.morphTargetsCount!==vp)&&(br=!0):(br=!0,Bi.__version=Le.version);let _p=Bi.currentProgram;!0===br&&(_p=MF(Le,Re,Je));let yp=!1,bp=!1,Sh=!1;const jr=_p.getUniforms(),Qy=Bi.uniforms;if(nn.useProgram(_p.program)&&(yp=!0,bp=!0,Sh=!0),Le.id!==G&&(G=Le.id,bp=!0),yp||X!==se){if(jr.setValue(ct,"projectionMatrix",se.projectionMatrix),It.logarithmicDepthBuffer&&jr.setValue(ct,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),X!==se&&(X=se,bp=!0,Sh=!0),Le.isShaderMaterial||Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshStandardMaterial||Le.envMap){const yl=jr.map.cameraPosition;void 0!==yl&&yl.setValue(ct,_t.setFromMatrixPosition(se.matrixWorld))}(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial)&&jr.setValue(ct,"isOrthographic",!0===se.isOrthographicCamera),(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial||Le.isShadowMaterial||Je.isSkinnedMesh)&&jr.setValue(ct,"viewMatrix",se.matrixWorldInverse)}if(Je.isSkinnedMesh){jr.setOptional(ct,Je,"bindMatrix"),jr.setOptional(ct,Je,"bindMatrixInverse");const yl=Je.skeleton;yl&&(It.floatVertexTextures?(null===yl.boneTexture&&yl.computeBoneTexture(),jr.setValue(ct,"boneTexture",yl.boneTexture,dt),jr.setValue(ct,"boneTextureSize",yl.boneTextureSize)):jr.setOptional(ct,yl,"boneMatrices"))}return We&&(void 0!==We.morphAttributes.position||void 0!==We.morphAttributes.normal)&&Wt.update(Je,We,Le,_p),(bp||Bi.receiveShadow!==Je.receiveShadow)&&(Bi.receiveShadow=Je.receiveShadow,jr.setValue(ct,"receiveShadow",Je.receiveShadow)),bp&&(jr.setValue(ct,"toneMappingExposure",T.toneMappingExposure),Bi.needsLights&&function xue(se,Re){se.ambientLightColor.needsUpdate=Re,se.lightProbe.needsUpdate=Re,se.directionalLights.needsUpdate=Re,se.directionalLightShadows.needsUpdate=Re,se.pointLights.needsUpdate=Re,se.pointLightShadows.needsUpdate=Re,se.spotLights.needsUpdate=Re,se.spotLightShadows.needsUpdate=Re,se.rectAreaLights.needsUpdate=Re,se.hemisphereLights.needsUpdate=Re}(Qy,Sh),Pn&&Le.fog&&yr.refreshFogUniforms(Qy,Pn),yr.refreshMaterialUniforms(Qy,Le,ge,Te,qe),vh.upload(ct,Bi.uniformsList,Qy,dt)),Le.isShaderMaterial&&!0===Le.uniformsNeedUpdate&&(vh.upload(ct,Bi.uniformsList,Qy,dt),Le.uniformsNeedUpdate=!1),Le.isSpriteMaterial&&jr.setValue(ct,"center",Je.center),jr.setValue(ct,"modelViewMatrix",Je.modelViewMatrix),jr.setValue(ct,"normalMatrix",Je.normalMatrix),jr.setValue(ct,"modelMatrix",Je.matrixWorld),_p}(se,Re,We,Le,Je);nn.setMaterial(Le,yn);let kn=We.index;const Ai=We.attributes.position;if(null===kn){if(void 0===Ai||0===Ai.count)return}else if(0===kn.count)return;let si=1;!0===Le.wireframe&&(kn=Vn.getWireframeAttribute(We),si=2),At.setup(Je,Le,ri,We,kn);let wi,Gr=Ce;null!==kn&&(wi=Tt.get(kn),Gr=wt,Gr.setIndex(wi));const vp=null!==kn?kn.count:Ai.count,Bi=We.drawRange.start*si,Jy=We.drawRange.count*si,br=null!==Pn?Pn.start*si:0,_p=null!==Pn?Pn.count*si:1/0,yp=Math.max(Bi,br),bp=Math.min(vp,Bi+Jy,br+_p)-1,Sh=Math.max(0,bp-yp+1);if(0!==Sh){if(Je.isMesh)!0===Le.wireframe?(nn.setLineWidth(Le.wireframeLinewidth*di()),Gr.setMode(1)):Gr.setMode(4);else if(Je.isLine){let jr=Le.linewidth;void 0===jr&&(jr=1),nn.setLineWidth(jr*di()),Gr.setMode(Je.isLineSegments?1:Je.isLineLoop?2:3)}else Je.isPoints?Gr.setMode(0):Je.isSprite&&Gr.setMode(4);if(Je.isInstancedMesh)Gr.renderInstances(yp,Sh,Je.count);else if(We.isInstancedBufferGeometry){const jr=Math.min(We.instanceCount,We._maxInstanceCount);Gr.renderInstances(yp,Sh,jr)}else Gr.render(yp,Sh)}},this.compile=function(se,Re){_=oe.get(se),_.init(),x.push(_),se.traverseVisible(function(We){We.isLight&&We.layers.test(Re.layers)&&(_.pushLight(We),We.castShadow&&_.pushShadow(We))}),_.setupLights(T.physicallyCorrectLights),se.traverse(function(We){const Le=We.material;if(Le)if(Array.isArray(Le))for(let Je=0;Je<Le.length;Je++)MF(Le[Je],se,We);else MF(Le,se,We)}),x.pop(),_=null};let _l=null;function bV(){gp.stop()}function xV(){gp.start()}const gp=new nB;function wV(se,Re,We,Le){if(!1===se.visible)return;if(se.layers.test(Re.layers))if(se.isGroup)We=se.renderOrder;else if(se.isLOD)!0===se.autoUpdate&&se.update(Re);else if(se.isLight)_.pushLight(se),se.castShadow&&_.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||je.intersectsSprite(se)){Le&&_t.setFromMatrixPosition(se.matrixWorld).applyMatrix4(vt);const yn=Hn.update(se),ri=se.material;ri.visible&&g.push(se,yn,ri,We,_t.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(se.isSkinnedMesh&&se.skeleton.frame!==hi.render.frame&&(se.skeleton.update(),se.skeleton.frame=hi.render.frame),!se.frustumCulled||je.intersectsObject(se))){Le&&_t.setFromMatrixPosition(se.matrixWorld).applyMatrix4(vt);const yn=Hn.update(se),ri=se.material;if(Array.isArray(ri)){const kn=yn.groups;for(let Ai=0,si=kn.length;Ai<si;Ai++){const wi=kn[Ai],Gr=ri[wi.materialIndex];Gr&&Gr.visible&&g.push(se,yn,Gr,We,_t.z,wi)}}else ri.visible&&g.push(se,yn,ri,We,_t.z,null)}const Pn=se.children;for(let yn=0,ri=Pn.length;yn<ri;yn++)wV(Pn[yn],Re,We,Le)}function SV(se,Re,We,Le){const Je=se.opaque,Pn=se.transmissive,yn=se.transparent;_.setupLightsView(We),Pn.length>0&&function _ue(se,Re,We){null===qe&&(qe=new(!0===o&&!0===It.isWebGL2?dI:Nc)(1024,1024,{generateMipmaps:!0,type:null!==at.convert(kg)?kg:oh,minFilter:Pg,magFilter:Hs,wrapS:Bo,wrapT:Bo,useRenderToTexture:tn.has("WEBGL_multisampled_render_to_texture")}));const Le=T.getRenderTarget();T.setRenderTarget(qe),T.clear();const Je=T.toneMapping;T.toneMapping=Xf,iM(se,Re,We),T.toneMapping=Je,dt.updateMultisampleRenderTarget(qe),dt.updateRenderTargetMipmap(qe),T.setRenderTarget(Le)}(Je,Re,We),Le&&nn.viewport(re.copy(Le)),Je.length>0&&iM(Je,Re,We),Pn.length>0&&iM(Pn,Re,We),yn.length>0&&iM(yn,Re,We)}function iM(se,Re,We){const Le=!0===Re.isScene?Re.overrideMaterial:null;for(let Je=0,Pn=se.length;Je<Pn;Je++){const yn=se[Je],ri=yn.object,kn=yn.geometry,Ai=null===Le?yn.material:Le,si=yn.group;ri.layers.test(We.layers)&&yue(ri,Re,We,kn,Ai,si)}}function yue(se,Re,We,Le,Je,Pn){se.onBeforeRender(T,Re,We,Le,Je,Pn),se.modelViewMatrix.multiplyMatrices(We.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),Je.onBeforeRender(T,Re,We,Le,se,Pn),!0===Je.transparent&&Je.side===Ag?(Je.side=Ss,Je.needsUpdate=!0,T.renderBufferDirect(We,Re,Le,Je,se,Pn),Je.side=Tg,Je.needsUpdate=!0,T.renderBufferDirect(We,Re,Le,Je,se,Pn),Je.side=Ag):T.renderBufferDirect(We,Re,Le,Je,se,Pn),se.onAfterRender(T,Re,We,Le,Je,Pn)}function MF(se,Re,We){!0!==Re.isScene&&(Re=mt);const Le=Ye.get(se),Je=_.state.lights,yn=Je.state.version,ri=gi.getParameters(se,Je.state,_.state.shadowsArray,Re,We),kn=gi.getProgramCacheKey(ri);let Ai=Le.programs;Le.environment=se.isMeshStandardMaterial?Re.environment:null,Le.fog=Re.fog,Le.envMap=(se.isMeshStandardMaterial?Vt:yt).get(se.envMap||Le.environment),void 0===Ai&&(se.addEventListener("dispose",cs),Ai=new Map,Le.programs=Ai);let si=Ai.get(kn);if(void 0!==si){if(Le.currentProgram===si&&Le.lightsStateVersion===yn)return EV(se,ri),si}else ri.uniforms=gi.getUniforms(se),se.onBuild(We,ri,T),se.onBeforeCompile(ri,T),si=gi.acquireProgram(ri,kn),Ai.set(kn,si),Le.uniforms=ri.uniforms;const wi=Le.uniforms;(!se.isShaderMaterial&&!se.isRawShaderMaterial||!0===se.clipping)&&(wi.clippingPlanes=ot.uniform),EV(se,ri),Le.needsLights=function wue(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&!0===se.lights}(se),Le.lightsStateVersion=yn,Le.needsLights&&(wi.ambientLightColor.value=Je.state.ambient,wi.lightProbe.value=Je.state.probe,wi.directionalLights.value=Je.state.directional,wi.directionalLightShadows.value=Je.state.directionalShadow,wi.spotLights.value=Je.state.spot,wi.spotLightShadows.value=Je.state.spotShadow,wi.rectAreaLights.value=Je.state.rectArea,wi.ltc_1.value=Je.state.rectAreaLTC1,wi.ltc_2.value=Je.state.rectAreaLTC2,wi.pointLights.value=Je.state.point,wi.pointLightShadows.value=Je.state.pointShadow,wi.hemisphereLights.value=Je.state.hemi,wi.directionalShadowMap.value=Je.state.directionalShadowMap,wi.directionalShadowMatrix.value=Je.state.directionalShadowMatrix,wi.spotShadowMap.value=Je.state.spotShadowMap,wi.spotShadowMatrix.value=Je.state.spotShadowMatrix,wi.pointShadowMap.value=Je.state.pointShadowMap,wi.pointShadowMatrix.value=Je.state.pointShadowMatrix);const Gr=si.getUniforms(),vp=vh.seqWithValue(Gr.seq,wi);return Le.currentProgram=si,Le.uniformsList=vp,si}function EV(se,Re){const We=Ye.get(se);We.outputEncoding=Re.outputEncoding,We.instancing=Re.instancing,We.skinning=Re.skinning,We.morphTargets=Re.morphTargets,We.morphNormals=Re.morphNormals,We.morphTargetsCount=Re.morphTargetsCount,We.numClippingPlanes=Re.numClippingPlanes,We.numIntersection=Re.numClipIntersection,We.vertexAlphas=Re.vertexAlphas,We.vertexTangents=Re.vertexTangents}gp.setAnimationLoop(function vue(se){_l&&_l(se)}),typeof window<"u"&&gp.setContext(window),this.setAnimationLoop=function(se){_l=se,zt.setAnimationLoop(se),null===se?gp.stop():gp.start()},zt.addEventListener("sessionstart",bV),zt.addEventListener("sessionend",xV),this.render=function(se,Re){if(void 0===Re||!0===Re.isCamera){if(!0!==N){if(!0===se.autoUpdate&&se.updateMatrixWorld(),null===Re.parent&&Re.updateMatrixWorld(),!0===zt.enabled&&!0===zt.isPresenting&&(!0===zt.cameraAutoUpdate&&zt.updateCamera(Re),Re=zt.getCamera()),!0===se.isScene&&se.onBeforeRender(T,se,Re,H),_=oe.get(se,x.length),_.init(),x.push(_),vt.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),je.setFromProjectionMatrix(vt),Ue=this.localClippingEnabled,lt=ot.init(this.clippingPlanes,Ue,Re),g=fe.get(se,y.length),g.init(),y.push(g),wV(se,Re,0,T.sortObjects),g.finish(),!0===T.sortObjects&&g.sort(Ze,Pe),!0===lt&&ot.beginShadows(),st.render(_.state.shadowsArray,se,Re),!0===lt&&ot.endShadows(),!0===this.info.autoReset&&this.info.reset(),qt.render(g,se),_.setupLights(T.physicallyCorrectLights),Re.isArrayCamera){const Le=Re.cameras;for(let Je=0,Pn=Le.length;Je<Pn;Je++){const yn=Le[Je];SV(g,se,yn,yn.viewport)}}else SV(g,se,Re);null!==H&&(dt.updateMultisampleRenderTarget(H),dt.updateRenderTargetMipmap(H)),!0===se.isScene&&se.onAfterRender(T,se,Re),nn.buffers.depth.setTest(!0),nn.buffers.depth.setMask(!0),nn.buffers.color.setMask(!0),nn.setPolygonOffset(!1),At.resetDefaultState(),G=-1,X=null,x.pop(),_=x.length>0?x[x.length-1]:null,y.pop(),g=y.length>0?y[y.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(se,Re,We){Ye.get(se.texture).__webglTexture=Re,Ye.get(se.depthTexture).__webglTexture=We;const Le=Ye.get(se);Le.__hasExternalTextures=!0,Le.__hasExternalTextures&&(Le.__autoAllocateDepthBuffer=void 0===We,Le.__autoAllocateDepthBuffer||se.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),se.useRenderToTexture=!1,se.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(se,Re){const We=Ye.get(se);We.__webglFramebuffer=Re,We.__useDefaultFramebuffer=void 0===Re},this.setRenderTarget=function(se,Re=0,We=0){H=se,I=Re,A=We;let Le=!0;if(se){const kn=Ye.get(se);void 0!==kn.__useDefaultFramebuffer?(nn.bindFramebuffer(36160,null),Le=!1):void 0===kn.__webglFramebuffer?dt.setupRenderTarget(se):kn.__hasExternalTextures&&dt.rebindTextures(se,Ye.get(se.texture).__webglTexture,Ye.get(se.depthTexture).__webglTexture)}let Je=null,Pn=!1,yn=!1;if(se){const kn=se.texture;(kn.isDataTexture3D||kn.isDataTexture2DArray)&&(yn=!0);const Ai=Ye.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(Je=Ai[Re],Pn=!0):Je=se.useRenderbuffer?Ye.get(se).__webglMultisampledFramebuffer:Ai,re.copy(se.viewport),K.copy(se.scissor),he=se.scissorTest}else re.copy(ke).multiplyScalar(ge).floor(),K.copy(Be).multiplyScalar(ge).floor(),he=ye;if(nn.bindFramebuffer(36160,Je)&&It.drawBuffers&&Le){let kn=!1;if(se)if(se.isWebGLMultipleRenderTargets){const Ai=se.texture;if(Ee.length!==Ai.length||36064!==Ee[0]){for(let si=0,wi=Ai.length;si<wi;si++)Ee[si]=36064+si;Ee.length=Ai.length,kn=!0}}else(1!==Ee.length||36064!==Ee[0])&&(Ee[0]=36064,Ee.length=1,kn=!0);else(1!==Ee.length||1029!==Ee[0])&&(Ee[0]=1029,Ee.length=1,kn=!0);kn&&(It.isWebGL2?ct.drawBuffers(Ee):tn.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ee))}if(nn.viewport(re),nn.scissor(K),nn.setScissorTest(he),Pn){const kn=Ye.get(se.texture);ct.framebufferTexture2D(36160,36064,34069+Re,kn.__webglTexture,We)}else if(yn){const kn=Ye.get(se.texture);ct.framebufferTextureLayer(36160,36064,kn.__webglTexture,We||0,Re||0)}G=-1},this.readRenderTargetPixels=function(se,Re,We,Le,Je,Pn,yn){if(!se||!se.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ri=Ye.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&void 0!==yn&&(ri=ri[yn]),ri){nn.bindFramebuffer(36160,ri);try{const kn=se.texture,Ai=kn.format,si=kn.type;if(Ai!==Vo&&at.convert(Ai)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const wi=si===kg&&(tn.has("EXT_color_buffer_half_float")||It.isWebGL2&&tn.has("EXT_color_buffer_float"));if(!(si===oh||at.convert(si)===ct.getParameter(35738)||si===Gu&&(It.isWebGL2||tn.has("OES_texture_float")||tn.has("WEBGL_color_buffer_float"))||wi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?Re>=0&&Re<=se.width-Le&&We>=0&&We<=se.height-Je&&ct.readPixels(Re,We,Le,Je,at.convert(Ai),at.convert(si),Pn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const kn=null!==H?Ye.get(H).__webglFramebuffer:null;nn.bindFramebuffer(36160,kn)}}},this.copyFramebufferToTexture=function(se,Re,We=0){const Le=Math.pow(2,-We),Je=Math.floor(Re.image.width*Le),Pn=Math.floor(Re.image.height*Le);let yn=at.convert(Re.format);It.isWebGL2&&(6407===yn&&(yn=32849),6408===yn&&(yn=32856)),dt.setTexture2D(Re,0),ct.copyTexImage2D(3553,We,yn,se.x,se.y,Je,Pn,0),nn.unbindTexture()},this.copyTextureToTexture=function(se,Re,We,Le=0){const Je=Re.image.width,Pn=Re.image.height,yn=at.convert(We.format),ri=at.convert(We.type);dt.setTexture2D(We,0),ct.pixelStorei(37440,We.flipY),ct.pixelStorei(37441,We.premultiplyAlpha),ct.pixelStorei(3317,We.unpackAlignment),Re.isDataTexture?ct.texSubImage2D(3553,Le,se.x,se.y,Je,Pn,yn,ri,Re.image.data):Re.isCompressedTexture?ct.compressedTexSubImage2D(3553,Le,se.x,se.y,Re.mipmaps[0].width,Re.mipmaps[0].height,yn,Re.mipmaps[0].data):ct.texSubImage2D(3553,Le,se.x,se.y,yn,ri,Re.image),0===Le&&We.generateMipmaps&&ct.generateMipmap(3553),nn.unbindTexture()},this.copyTextureToTexture3D=function(se,Re,We,Le,Je=0){if(T.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Pn=se.max.x-se.min.x+1,yn=se.max.y-se.min.y+1,ri=se.max.z-se.min.z+1,kn=at.convert(Le.format),Ai=at.convert(Le.type);let si;if(Le.isDataTexture3D)dt.setTexture3D(Le,0),si=32879;else{if(!Le.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");dt.setTexture2DArray(Le,0),si=35866}ct.pixelStorei(37440,Le.flipY),ct.pixelStorei(37441,Le.premultiplyAlpha),ct.pixelStorei(3317,Le.unpackAlignment);const wi=ct.getParameter(3314),Gr=ct.getParameter(32878),vp=ct.getParameter(3316),Bi=ct.getParameter(3315),Jy=ct.getParameter(32877),br=We.isCompressedTexture?We.mipmaps[0]:We.image;ct.pixelStorei(3314,br.width),ct.pixelStorei(32878,br.height),ct.pixelStorei(3316,se.min.x),ct.pixelStorei(3315,se.min.y),ct.pixelStorei(32877,se.min.z),We.isDataTexture||We.isDataTexture3D?ct.texSubImage3D(si,Je,Re.x,Re.y,Re.z,Pn,yn,ri,kn,Ai,br.data):We.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ct.compressedTexSubImage3D(si,Je,Re.x,Re.y,Re.z,Pn,yn,ri,kn,br.data)):ct.texSubImage3D(si,Je,Re.x,Re.y,Re.z,Pn,yn,ri,kn,Ai,br),ct.pixelStorei(3314,wi),ct.pixelStorei(32878,Gr),ct.pixelStorei(3316,vp),ct.pixelStorei(3315,Bi),ct.pixelStorei(32877,Jy),0===Je&&Le.generateMipmaps&&ct.generateMipmap(si),nn.unbindTexture()},this.initTexture=function(se){dt.setTexture2D(se,0),nn.unbindTexture()},this.resetState=function(){I=0,A=0,H=null,nn.reset(),At.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Qi.prototype.isWebGLRenderer=!0,class nce extends Qi{}.prototype.isWebGL1Renderer=!0;class uE{constructor(e,t=25e-5){this.name="",this.color=new Rt(e),this.density=t}clone(){return new uE(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}uE.prototype.isFogExp2=!0;class dE{constructor(e,t=1,i=1e3){this.name="",this.color=new Rt(e),this.near=t,this.far=i}clone(){return new dE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}dE.prototype.isFog=!0;class hE extends Ui{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}hE.prototype.isScene=!0;class l0{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=yy,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=nc()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nc()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}l0.prototype.isInterleavedBuffer=!0;const rs=new ne;class cp{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.applyMatrix4(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.applyNormalMatrix(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.transformDirection(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Li(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}cp.prototype.isInterleavedBufferAttribute=!0;class YI extends So{constructor(e){super(),this.type="SpriteMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let u0;YI.prototype.isSpriteMaterial=!0;const Ry=new ne,d0=new ne,h0=new ne,f0=new tt,Py=new tt,BB=new Gt,fE=new ne,ky=new ne,pE=new ne,VB=new tt,XI=new tt,HB=new tt;function mE(n,e,t,i,r,s){f0.subVectors(n,t).addScalar(.5).multiply(i),void 0!==r?(Py.x=s*f0.x-r*f0.y,Py.y=r*f0.x+s*f0.y):Py.copy(f0),n.copy(e),n.x+=Py.x,n.y+=Py.y,n.applyMatrix4(BB)}(class ZI extends Ui{constructor(e){if(super(),this.type="Sprite",void 0===u0){u0=new pn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new l0(t,5);u0.setIndex([0,1,2,0,2,3]),u0.setAttribute("position",new cp(i,3,0,!1)),u0.setAttribute("uv",new cp(i,2,3,!1))}this.geometry=u0,this.material=void 0!==e?e:new YI,this.center=new tt(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),d0.setFromMatrixScale(this.matrixWorld),BB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),h0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&d0.multiplyScalar(-h0.z);const i=this.material.rotation;let r,s;0!==i&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;mE(fE.set(-.5,-.5,0),h0,o,d0,r,s),mE(ky.set(.5,-.5,0),h0,o,d0,r,s),mE(pE.set(.5,.5,0),h0,o,d0,r,s),VB.set(0,0),XI.set(1,0),HB.set(1,1);let a=e.ray.intersectTriangle(fE,ky,pE,!1,Ry);if(null===a&&(mE(ky.set(-.5,.5,0),h0,o,d0,r,s),XI.set(0,1),a=e.ray.intersectTriangle(fE,pE,ky,!1,Ry),null===a))return;const c=e.ray.origin.distanceTo(Ry);c<e.near||c>e.far||t.push({distance:c,point:Ry.clone(),uv:Es.getUV(Ry,fE,ky,pE,VB,XI,HB,new tt),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const zB=new ne,GB=new Ji,jB=new Ji,rce=new ne,WB=new Gt;class JI extends gr{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Gt,this.bindMatrixInverse=new Gt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ji,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;GB.fromBufferAttribute(r.attributes.skinIndex,e),jB.fromBufferAttribute(r.attributes.skinWeight,e),zB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=jB.getComponent(s);if(0!==o){const a=GB.getComponent(s);WB.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(rce.copy(zB).applyMatrix4(WB),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}JI.prototype.isSkinnedMesh=!0;(class QI extends Ui{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class p0 extends eo{constructor(e=null,t=1,i=1,r,s,o,a,c,d=Hs,p=Hs,g,_){super(null,o,a,c,d,p,r,s,g,_),this.image={data:e,width:t,height:i},this.magFilter=d,this.minFilter=p,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;class m0 extends Li{constructor(e,t,i,r=1){"number"==typeof i&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}m0.prototype.isInstancedBufferAttribute=!0;const qB=new Gt,KB=new Gt,vE=[],Oy=new gr;(class YB extends gr{constructor(e,t,i){super(e,t),this.instanceMatrix=new m0(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Oy.geometry=this.geometry,Oy.material=this.material,void 0!==Oy.material)for(let s=0;s<r;s++){this.getMatrixAt(s,qB),KB.multiplyMatrices(i,qB),Oy.matrixWorld=KB,Oy.raycast(e,vE);for(let o=0,a=vE.length;o<a;o++){const c=vE[o];c.instanceId=s,c.object=this,t.push(c)}vE.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new m0(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Mo extends So{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Rt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Mo.prototype.isLineBasicMaterial=!0;const XB=new ne,ZB=new ne,JB=new Gt,tF=new rp,_E=new ip;class lp extends Ui{constructor(e=new pn,t=new Mo){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)XB.fromBufferAttribute(t,r-1),ZB.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=XB.distanceTo(ZB);e.setAttribute("lineDistance",new jt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),_E.copy(i.boundingSphere),_E.applyMatrix4(r),_E.radius+=s,!1===e.ray.intersectsSphere(_E))return;JB.copy(r).invert(),tF.copy(e.ray).applyMatrix4(JB);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,d=new ne,p=new ne,g=new ne,_=new ne,y=this.isLineSegments?2:1;if(i.isBufferGeometry){const x=i.index,N=i.attributes.position;if(null!==x)for(let H=Math.max(0,o.start),G=Math.min(x.count,o.start+o.count)-1;H<G;H+=y){const X=x.getX(H),re=x.getX(H+1);if(d.fromBufferAttribute(N,X),p.fromBufferAttribute(N,re),tF.distanceSqToSegment(d,p,_,g)>c)continue;_.applyMatrix4(this.matrixWorld);const he=e.ray.origin.distanceTo(_);he<e.near||he>e.far||t.push({distance:he,point:g.clone().applyMatrix4(this.matrixWorld),index:H,face:null,faceIndex:null,object:this})}else for(let H=Math.max(0,o.start),G=Math.min(N.count,o.start+o.count)-1;H<G;H+=y){if(d.fromBufferAttribute(N,H),p.fromBufferAttribute(N,H+1),tF.distanceSqToSegment(d,p,_,g)>c)continue;_.applyMatrix4(this.matrixWorld);const re=e.ray.origin.distanceTo(_);re<e.near||re>e.far||t.push({distance:re,point:g.clone().applyMatrix4(this.matrixWorld),index:H,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}lp.prototype.isLine=!0;const QB=new ne,e6=new ne;class _h extends lp{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)QB.fromBufferAttribute(t,r),e6.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+QB.distanceTo(e6);e.setAttribute("lineDistance",new jt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}_h.prototype.isLineSegments=!0;(class t6 extends lp{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class g0 extends So{constructor(e){super(),this.type="PointsMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}g0.prototype.isPointsMaterial=!0;const n6=new Gt,nF=new rp,yE=new ip,bE=new ne;function i6(n,e,t,i,r,s,o){const a=nF.distanceSqToPoint(n);if(a<t){const c=new ne;nF.closestPointToPoint(n,c),c.applyMatrix4(i);const d=r.ray.origin.distanceTo(c);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}(class xE extends Ui{constructor(e=new pn,t=new g0){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),yE.copy(i.boundingSphere),yE.applyMatrix4(r),yE.radius+=s,!1===e.ray.intersectsSphere(yE))return;n6.copy(r).invert(),nF.copy(e.ray).applyMatrix4(n6);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a;if(i.isBufferGeometry){const d=i.index,g=i.attributes.position;if(null!==d)for(let x=Math.max(0,o.start),T=Math.min(d.count,o.start+o.count);x<T;x++){const N=d.getX(x);bE.fromBufferAttribute(g,N),i6(bE,N,c,r,e,t,this)}else for(let x=Math.max(0,o.start),T=Math.min(g.count,o.start+o.count);x<T;x++)bE.fromBufferAttribute(g,x),i6(bE,x,c,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class oce extends eo{constructor(e,t,i,r,s,o,a,c,d){super(e,t,i,r,s,o,a,c,d),this.format=void 0!==a?a:Zf,this.minFilter=void 0!==o?o:Qs,this.magFilter=void 0!==s?s:Qs,this.generateMipmaps=!1;const p=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function g(){p.needsUpdate=!0,e.requestVideoFrameCallback(g)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class r6 extends eo{constructor(e,t,i,r,s,o,a,c,d,p,g,_){super(null,o,a,c,d,p,r,s,g,_),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class ace extends eo{constructor(e,t,i,r,s,o,a,c,d){super(e,t,i,r,s,o,a,c,d),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new ne,new ne,new ne,new Es;class Hc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let d,a=0,c=s-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),d=i[r]-o,d<0)a=r+1;else{if(!(d>0)){c=r;break}c=r-1}if(r=c,i[r]===o)return r/(s-1);const p=i[r];return(r+(o-p)/(i[r+1]-p))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new tt:new ne);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ne,r=[],s=[],o=[],a=new ne,c=new Gt;for(let y=0;y<=e;y++)r[y]=this.getTangentAt(y/e,new ne);s[0]=new ne,o[0]=new ne;let d=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),_=Math.abs(r[0].z);p<=d&&(d=p,i.set(1,0,0)),g<=d&&(d=g,i.set(0,1,0)),_<=d&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),a.crossVectors(r[y-1],r[y]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(wo(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(a,x))}o[y].crossVectors(r[y],s[y])}if(!0===t){let y=Math.acos(wo(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(y=-y);for(let x=1;x<=e;x++)s[x].applyMatrix4(c.makeRotationAxis(r[x],y*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class TE extends Hc{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,c=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new tt,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),d=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),_=c-this.aX,y=d-this.aY;c=_*p-y*g+this.aX,d=_*g+y*p+this.aY}return i.set(c,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}TE.prototype.isEllipseCurve=!0;class o6 extends TE{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}function rF(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,d){r(o,a,d*(a-s),d*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,d,p,g){let _=(o-s)/d-(a-s)/(d+p)+(a-o)/p,y=(a-o)/p-(c-o)/(p+g)+(c-a)/g;_*=p,y*=p,r(o,a,_,y)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}o6.prototype.isArcCurve=!0;const AE=new ne,sF=new rF,oF=new rF,aF=new rF;class a6 extends Hc{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ne){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let d,p,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===c&&a===s-1&&(a=s-2,c=1),this.closed||a>0?d=r[(a-1)%s]:(AE.subVectors(r[0],r[1]).add(r[0]),d=AE);const g=r[a%s],_=r[(a+1)%s];if(this.closed||a+2<s?p=r[(a+2)%s]:(AE.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=AE),"centripetal"===this.curveType||"chordal"===this.curveType){const y="chordal"===this.curveType?.5:.25;let x=Math.pow(d.distanceToSquared(g),y),T=Math.pow(g.distanceToSquared(_),y),N=Math.pow(_.distanceToSquared(p),y);T<1e-4&&(T=1),x<1e-4&&(x=T),N<1e-4&&(N=T),sF.initNonuniformCatmullRom(d.x,g.x,_.x,p.x,x,T,N),oF.initNonuniformCatmullRom(d.y,g.y,_.y,p.y,x,T,N),aF.initNonuniformCatmullRom(d.z,g.z,_.z,p.z,x,T,N)}else"catmullrom"===this.curveType&&(sF.initCatmullRom(d.x,g.x,_.x,p.x,this.tension),oF.initCatmullRom(d.y,g.y,_.y,p.y,this.tension),aF.initCatmullRom(d.z,g.z,_.z,p.z,this.tension));return i.set(sF.calc(c),oF.calc(c),aF.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new ne).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function c6(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function Ly(n,e,t,i){return function cce(n,e){const t=1-n;return t*t*e}(n,e)+function lce(n,e){return 2*(1-n)*n*e}(n,t)+function uce(n,e){return n*n*e}(n,i)}function Ny(n,e,t,i,r){return function dce(n,e){const t=1-n;return t*t*t*e}(n,e)+function hce(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function fce(n,e){return 3*(1-n)*n*n*e}(n,i)+function pce(n,e){return n*n*n*e}(n,r)}a6.prototype.isCatmullRomCurve3=!0;class cF extends Hc{constructor(e=new tt,t=new tt,i=new tt,r=new tt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new tt){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ny(e,r.x,s.x,o.x,a.x),Ny(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}cF.prototype.isCubicBezierCurve=!0;class l6 extends Hc{constructor(e=new ne,t=new ne,i=new ne,r=new ne){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ne){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ny(e,r.x,s.x,o.x,a.x),Ny(e,r.y,s.y,o.y,a.y),Ny(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}l6.prototype.isCubicBezierCurve3=!0;class IE extends Hc{constructor(e=new tt,t=new tt){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new tt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}IE.prototype.isLineCurve=!0;class lF extends Hc{constructor(e=new tt,t=new tt,i=new tt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new tt){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ly(e,r.x,s.x,o.x),Ly(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}lF.prototype.isQuadraticBezierCurve=!0;class uF extends Hc{constructor(e=new ne,t=new ne,i=new ne){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ne){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ly(e,r.x,s.x,o.x),Ly(e,r.y,s.y,o.y),Ly(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uF.prototype.isQuadraticBezierCurve3=!0;class dF extends Hc{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[0===o?o:o-1],d=r[o],p=r[o>r.length-2?r.length-1:o+1],g=r[o>r.length-3?r.length-1:o+2];return i.set(c6(a,c.x,d.x,p.x,g.x),c6(a,c.y,d.y,p.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new tt).fromArray(r))}return this}}dF.prototype.isSplineCurve=!0;var hF=Object.freeze({__proto__:null,ArcCurve:o6,CatmullRomCurve3:a6,CubicBezierCurve:cF,CubicBezierCurve3:l6,EllipseCurve:TE,LineCurve:IE,LineCurve3:class mce extends Hc{constructor(e=new ne,t=new ne){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ne){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:lF,QuadraticBezierCurve3:uF,SplineCurve:dF});class gce extends Hc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new IE(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],c=a.getLength();return a.getPointAt(0===c?0:1-o/c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],c=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(let d=0;d<c.length;d++){const p=c[d];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new hF[r.type]).fromJSON(r))}return this}}class FE extends gce{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new IE(this.currentPoint.clone(),new tt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new lF(this.currentPoint.clone(),new tt(e,t),new tt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new cF(this.currentPoint.clone(),new tt(e,t),new tt(i,r),new tt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new dF(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const d=new TE(e,t,i,r,s,o,a,c);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Zu extends FE{constructor(e){super(e),this.uuid=nc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new FE).fromJSON(r))}return this}}function u6(n,e,t,i,r){let s,o;if(r===function Pce(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=f6(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=f6(s,n[s],n[s+1],o);return o&&RE(o,o.next)&&(Hy(o),o=o.next),o}function bh(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!RE(t,t.next)&&0!==kr(t.prev,t,t.next))t=t.next;else{if(Hy(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function By(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function Dce(n,e,t,i){let r=n;do{null===r.z&&(r.z=fF(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function Tce(n){let e,t,i,r,s,o,a,c,d=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<d&&(a++,i=i.nextZ,i);e++);for(c=d;a>0||c>0&&i;)0!==a&&(0===c||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,d*=2}while(o>1)}(r)}(n,i,r,s);let c,d,a=n;for(;n.prev!==n.next;)if(c=n.prev,d=n.next,s?yce(n,i,r,s):_ce(n))e.push(c.i/t),e.push(n.i/t),e.push(d.i/t),Hy(n),n=d.next,a=d.next;else if((n=d)===a){o?1===o?By(n=bce(bh(n),e,t),e,t,i,r,s,2):2===o&&xce(n,e,t,i,r,s):By(bh(n),e,t,i,r,s,1);break}}function _ce(n){const e=n.prev,t=n,i=n.next;if(kr(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(_0(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&kr(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function yce(n,e,t,i){const r=n.prev,s=n,o=n.next;if(kr(r,s,o)>=0)return!1;const d=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,p=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,g=fF(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),_=fF(d,p,e,t,i);let y=n.prevZ,x=n.nextZ;for(;y&&y.z>=g&&x&&x.z<=_;){if(y!==n.prev&&y!==n.next&&_0(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&kr(y.prev,y,y.next)>=0||(y=y.prevZ,x!==n.prev&&x!==n.next&&_0(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&kr(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;y&&y.z>=g;){if(y!==n.prev&&y!==n.next&&_0(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&kr(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=_;){if(x!==n.prev&&x!==n.next&&_0(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&kr(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function bce(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!RE(r,s)&&d6(r,i,i.next,s)&&Vy(r,s)&&Vy(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Hy(i),Hy(i.next),i=n=s),i=i.next}while(i!==n);return bh(i)}function xce(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Ice(o,a)){let c=h6(o,a);return o=bh(o,o.next),c=bh(c,c.next),By(o,e,t,i,r,s),void By(c,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function Sce(n,e){return n.x-e.x}function Ece(n,e){if(e=function Mce(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const _=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=i&&_>s){if(s=_,_===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,c=o.x,d=o.y;let g,p=1/0;t=o;do{i>=t.x&&t.x>=c&&i!==t.x&&_0(r<d?i:s,r,c,d,r<d?s:i,r,t.x,t.y)&&(g=Math.abs(r-t.y)/(i-t.x),Vy(t,n)&&(g<p||g===p&&(t.x>o.x||t.x===o.x&&Cce(o,t)))&&(o=t,p=g)),t=t.next}while(t!==a);return o}(n,e),e){const t=h6(e,n);bh(e,e.next),bh(t,t.next)}}function Cce(n,e){return kr(n.prev,n,e.prev)<0&&kr(e.next,n,n.next)<0}function fF(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ace(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function _0(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function Ice(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function Fce(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&d6(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(Vy(n,e)&&Vy(e,n)&&function Rce(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(kr(n.prev,n,e.prev)||kr(n,e.prev,e))||RE(n,e)&&kr(n.prev,n,n.next)>0&&kr(e.prev,e,e.next)>0)}function kr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function RE(n,e){return n.x===e.x&&n.y===e.y}function d6(n,e,t,i){const r=kE(kr(n,e,t)),s=kE(kr(n,e,i)),o=kE(kr(t,i,n)),a=kE(kr(t,i,e));return!!(r!==s&&o!==a||0===r&&PE(n,t,e)||0===s&&PE(n,i,e)||0===o&&PE(t,n,i)||0===a&&PE(t,e,i))}function PE(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function kE(n){return n>0?1:n<0?-1:0}function Vy(n,e){return kr(n.prev,n,n.next)<0?kr(n,e,n.next)>=0&&kr(n,n.prev,e)>=0:kr(n,e,n.prev)<0||kr(n,n.next,e)<0}function h6(n,e){const t=new pF(n.i,n.x,n.y),i=new pF(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function f6(n,e,t,i){const r=new pF(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Hy(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function pF(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ju{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return Ju.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];p6(e),m6(i,e);let o=e.length;t.forEach(p6);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,m6(i,t[c]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=u6(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,d,p,g,_,y;if(i&&(s=function wce(n,e,t,i){const r=[];let s,o,a,c,d;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,d=u6(n,a,c,i,!1),d===d.next&&(d.steiner=!0),r.push(Ace(d));for(r.sort(Sce),s=0;s<r.length;s++)Ece(r[s],t),t=bh(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=d=n[0],c=p=n[1];for(let x=t;x<r;x+=t)g=n[x],_=n[x+1],g<a&&(a=g),_<c&&(c=_),g>d&&(d=g),_>p&&(p=_);y=Math.max(d-a,p-c),y=0!==y?1/y:0}return By(s,o,t,a,c,y),o}(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function p6(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function m6(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Qu extends pn{constructor(e=new Zu([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++)o(e[a]);function o(a){const c=[],d=void 0!==t.curveSegments?t.curveSegments:12,p=void 0!==t.steps?t.steps:1;let g=void 0!==t.depth?t.depth:1,_=void 0===t.bevelEnabled||t.bevelEnabled,y=void 0!==t.bevelThickness?t.bevelThickness:.2,x=void 0!==t.bevelSize?t.bevelSize:y-.1,T=void 0!==t.bevelOffset?t.bevelOffset:0,N=void 0!==t.bevelSegments?t.bevelSegments:3;const I=t.extrudePath,A=void 0!==t.UVGenerator?t.UVGenerator:kce;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),g=t.amount);let H,X,re,K,he,G=!1;I&&(H=I.getSpacedPoints(p),G=!0,_=!1,X=I.computeFrenetFrames(p,!1),re=new ne,K=new ne,he=new ne),_||(N=0,y=0,x=0,T=0);const De=a.extractPoints(d);let Te=De.shape;const ge=De.holes;if(!Ju.isClockWise(Te)){Te=Te.reverse();for(let Ye=0,dt=ge.length;Ye<dt;Ye++){const yt=ge[Ye];Ju.isClockWise(yt)&&(ge[Ye]=yt.reverse())}}const Pe=Ju.triangulateShape(Te,ge),ke=Te;for(let Ye=0,dt=ge.length;Ye<dt;Ye++)Te=Te.concat(ge[Ye]);function Be(Ye,dt,yt){return dt||console.error("THREE.ExtrudeGeometry: vec does not exist"),dt.clone().multiplyScalar(yt).add(Ye)}const ye=Te.length,Ee=Pe.length;function je(Ye,dt,yt){let Vt,Tt,Vn;const Hn=Ye.x-dt.x,gi=Ye.y-dt.y,yr=yt.x-Ye.x,fe=yt.y-Ye.y,oe=Hn*Hn+gi*gi;if(Math.abs(Hn*fe-gi*yr)>Number.EPSILON){const st=Math.sqrt(oe),qt=Math.sqrt(yr*yr+fe*fe),Wt=dt.x-gi/st,Ce=dt.y+Hn/st,At=((yt.x-fe/qt-Wt)*fe-(yt.y+yr/qt-Ce)*yr)/(Hn*fe-gi*yr);Vt=Wt+Hn*At-Ye.x,Tt=Ce+gi*At-Ye.y;const St=Vt*Vt+Tt*Tt;if(St<=2)return new tt(Vt,Tt);Vn=Math.sqrt(St/2)}else{let st=!1;Hn>Number.EPSILON?yr>Number.EPSILON&&(st=!0):Hn<-Number.EPSILON?yr<-Number.EPSILON&&(st=!0):Math.sign(gi)===Math.sign(fe)&&(st=!0),st?(Vt=-gi,Tt=Hn,Vn=Math.sqrt(oe)):(Vt=Hn,Tt=gi,Vn=Math.sqrt(oe/2))}return new tt(Vt/Vn,Tt/Vn)}const lt=[];for(let Ye=0,dt=ke.length,yt=dt-1,Vt=Ye+1;Ye<dt;Ye++,yt++,Vt++)yt===dt&&(yt=0),Vt===dt&&(Vt=0),lt[Ye]=je(ke[Ye],ke[yt],ke[Vt]);const Ue=[];let qe,vt=lt.concat();for(let Ye=0,dt=ge.length;Ye<dt;Ye++){const yt=ge[Ye];qe=[];for(let Vt=0,Tt=yt.length,Vn=Tt-1,Hn=Vt+1;Vt<Tt;Vt++,Vn++,Hn++)Vn===Tt&&(Vn=0),Hn===Tt&&(Hn=0),qe[Vt]=je(yt[Vt],yt[Vn],yt[Hn]);Ue.push(qe),vt=vt.concat(qe)}for(let Ye=0;Ye<N;Ye++){const dt=Ye/N,yt=y*Math.cos(dt*Math.PI/2),Vt=x*Math.sin(dt*Math.PI/2)+T;for(let Tt=0,Vn=ke.length;Tt<Vn;Tt++){const Hn=Be(ke[Tt],lt[Tt],Vt);Xt(Hn.x,Hn.y,-yt)}for(let Tt=0,Vn=ge.length;Tt<Vn;Tt++){const Hn=ge[Tt];qe=Ue[Tt];for(let gi=0,yr=Hn.length;gi<yr;gi++){const fe=Be(Hn[gi],qe[gi],Vt);Xt(fe.x,fe.y,-yt)}}}const _t=x+T;for(let Ye=0;Ye<ye;Ye++){const dt=_?Be(Te[Ye],vt[Ye],_t):Te[Ye];G?(K.copy(X.normals[0]).multiplyScalar(dt.x),re.copy(X.binormals[0]).multiplyScalar(dt.y),he.copy(H[0]).add(K).add(re),Xt(he.x,he.y,he.z)):Xt(dt.x,dt.y,0)}for(let Ye=1;Ye<=p;Ye++)for(let dt=0;dt<ye;dt++){const yt=_?Be(Te[dt],vt[dt],_t):Te[dt];G?(K.copy(X.normals[Ye]).multiplyScalar(yt.x),re.copy(X.binormals[Ye]).multiplyScalar(yt.y),he.copy(H[Ye]).add(K).add(re),Xt(he.x,he.y,he.z)):Xt(yt.x,yt.y,g/p*Ye)}for(let Ye=N-1;Ye>=0;Ye--){const dt=Ye/N,yt=y*Math.cos(dt*Math.PI/2),Vt=x*Math.sin(dt*Math.PI/2)+T;for(let Tt=0,Vn=ke.length;Tt<Vn;Tt++){const Hn=Be(ke[Tt],lt[Tt],Vt);Xt(Hn.x,Hn.y,g+yt)}for(let Tt=0,Vn=ge.length;Tt<Vn;Tt++){const Hn=ge[Tt];qe=Ue[Tt];for(let gi=0,yr=Hn.length;gi<yr;gi++){const fe=Be(Hn[gi],qe[gi],Vt);G?Xt(fe.x,fe.y+H[p-1].y,H[p-1].x+yt):Xt(fe.x,fe.y,g+yt)}}}function ct(Ye,dt){let yt=Ye.length;for(;--yt>=0;){const Vt=yt;let Tt=yt-1;Tt<0&&(Tt=Ye.length-1);for(let Vn=0,Hn=p+2*N;Vn<Hn;Vn++){const gi=ye*Vn,yr=ye*(Vn+1);It(dt+Vt+gi,dt+Tt+gi,dt+Tt+yr,dt+Vt+yr)}}}function Xt(Ye,dt,yt){c.push(Ye),c.push(dt),c.push(yt)}function tn(Ye,dt,yt){nn(Ye),nn(dt),nn(yt);const Vt=r.length/3,Tt=A.generateTopUV(i,r,Vt-3,Vt-2,Vt-1);hi(Tt[0]),hi(Tt[1]),hi(Tt[2])}function It(Ye,dt,yt,Vt){nn(Ye),nn(dt),nn(Vt),nn(dt),nn(yt),nn(Vt);const Tt=r.length/3,Vn=A.generateSideWallUV(i,r,Tt-6,Tt-3,Tt-2,Tt-1);hi(Vn[0]),hi(Vn[1]),hi(Vn[3]),hi(Vn[1]),hi(Vn[2]),hi(Vn[3])}function nn(Ye){r.push(c[3*Ye+0]),r.push(c[3*Ye+1]),r.push(c[3*Ye+2])}function hi(Ye){s.push(Ye.x),s.push(Ye.y)}(function mt(){const Ye=r.length/3;if(_){let dt=0,yt=ye*dt;for(let Vt=0;Vt<Ee;Vt++){const Tt=Pe[Vt];tn(Tt[2]+yt,Tt[1]+yt,Tt[0]+yt)}dt=p+2*N,yt=ye*dt;for(let Vt=0;Vt<Ee;Vt++){const Tt=Pe[Vt];tn(Tt[0]+yt,Tt[1]+yt,Tt[2]+yt)}}else{for(let dt=0;dt<Ee;dt++){const yt=Pe[dt];tn(yt[2],yt[1],yt[0])}for(let dt=0;dt<Ee;dt++){const yt=Pe[dt];tn(yt[0]+ye*p,yt[1]+ye*p,yt[2]+ye*p)}}i.addGroup(Ye,r.length/3-Ye,0)})(),function di(){const Ye=r.length/3;let dt=0;ct(ke,dt),dt+=ke.length;for(let yt=0,Vt=ge.length;yt<Vt;yt++){const Tt=ge[yt];ct(Tt,dt),dt+=Tt.length}i.addGroup(Ye,r.length/3-Ye,1)}()}this.setAttribute("position",new jt(r,3)),this.setAttribute("uv",new jt(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function Oce(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new hF[r.type]).fromJSON(r)),new Qu(i,e.options)}}const kce={generateTopUV:function(n,e,t,i,r){const a=e[3*i],c=e[3*i+1],d=e[3*r],p=e[3*r+1];return[new tt(e[3*t],e[3*t+1]),new tt(a,c),new tt(d,p)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],c=e[3*t+2],d=e[3*i],p=e[3*i+1],g=e[3*i+2],_=e[3*r],y=e[3*r+1],x=e[3*r+2],T=e[3*s],N=e[3*s+1],I=e[3*s+2];return Math.abs(a-p)<Math.abs(o-d)?[new tt(o,1-c),new tt(d,1-g),new tt(_,1-x),new tt(T,1-I)]:[new tt(a,1-c),new tt(p,1-g),new tt(y,1-x),new tt(N,1-I)]}};class zy extends pn{constructor(e=new Zu([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(!1===Array.isArray(e))d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(a,c,p),a+=c,c=0;function d(p){const g=r.length/3,_=p.extractPoints(t);let y=_.shape;const x=_.holes;!1===Ju.isClockWise(y)&&(y=y.reverse());for(let N=0,I=x.length;N<I;N++){const A=x[N];!0===Ju.isClockWise(A)&&(x[N]=A.reverse())}const T=Ju.triangulateShape(y,x);for(let N=0,I=x.length;N<I;N++)y=y.concat(x[N]);for(let N=0,I=y.length;N<I;N++){const A=y[N];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let N=0,I=T.length;N<I;N++){const A=T[N];i.push(A[0]+g,A[1]+g,A[2]+g),c+=3}}this.setIndex(i),this.setAttribute("position",new jt(r,3)),this.setAttribute("normal",new jt(s,3)),this.setAttribute("uv",new jt(o,2))}toJSON(){const e=super.toJSON();return function Lce(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new zy(i,e.curveSegments)}}(class y6 extends So{constructor(e){super(),this.type="ShadowMaterial",this.color=new Rt(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class zE extends So{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vg,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}zE.prototype.isMeshStandardMaterial=!0;(class b6 extends zE{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class x6 extends So{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Rt(16777215),this.specular=new Rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vg,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=TS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class w6 extends So{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vg,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class S6 extends So{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vg,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class E6 extends So{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=TS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class M6 extends So{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vg,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class C6 extends Mo{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Cr={arraySlice:function(n,e,t){return Cr.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const d=s.tracks[c],p=d.getValueSize(),g=[],_=[];for(let y=0;y<d.times.length;++y){const x=d.times[y]*r;if(!(x<t||x>=i)){g.push(d.times[y]);for(let T=0;T<p;++T)_.push(d.values[y*p+T])}}0!==g.length&&(d.times=Cr.convertArray(g,d.times.constructor),d.values=Cr.convertArray(_,d.values.constructor),o.push(d))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],c=a.ValueTypeName;if("bool"===c||"string"===c)continue;const d=n.tracks.find(function(I){return I.name===a.name&&I.ValueTypeName===c});if(void 0===d)continue;let p=0;const g=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let _=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=y/3);const x=a.times.length-1;let T;if(s<=a.times[0])T=Cr.arraySlice(a.values,p,g-p);else if(s>=a.times[x]){const I=x*g+p;T=Cr.arraySlice(a.values,I,I+g-p)}else{const I=a.createInterpolant(),A=p,H=g-p;I.evaluate(s),T=Cr.arraySlice(I.resultBuffer,A,H)}"quaternion"===c&&(new Ho).fromArray(T).normalize().conjugate().toArray(T);const N=d.times.length;for(let I=0;I<N;++I){const A=I*y+_;if("quaternion"===c)Ho.multiplyQuaternionsFlat(d.values,A,T,0,d.values,A);else{const H=y-2*_;for(let G=0;G<H;++G)d.values[A+G]-=T[G]}}}return n.blendMode=2501,n}};class xh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}xh.prototype.beforeStart_=xh.prototype.copySampleValue_,xh.prototype.afterEnd_=xh.prototype.copySampleValue_;class Bce extends xh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ng,endingEnd:Ng}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Bg:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case Bg:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const d=.5*(i-t),p=this.valueSize;this._weightPrev=d/(t-a),this._weightNext=d/(c-i),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,d=c-a,p=this._offsetPrev,g=this._offsetNext,_=this._weightPrev,y=this._weightNext,x=(i-t)/(r-t),T=x*x,N=T*x,I=-_*N+2*_*T-_*x,A=(1+_)*N+(-1.5-2*_)*T+(-.5+_)*x+1,H=(-1-y)*N+(1.5+y)*T+.5*x,G=y*N-y*T;for(let X=0;X!==a;++X)s[X]=I*o[p+X]+A*o[d+X]+H*o[c+X]+G*o[g+X];return s}}class D6 extends xh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,d=c-a,p=(i-t)/(r-t),g=1-p;for(let _=0;_!==a;++_)s[_]=o[d+_]*g+o[c+_]*p;return s}}class Vce extends xh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Jl{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Cr.convertArray(t,this.TimeBufferType),this.values=Cr.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Cr.convertArray(e.times,Array),values:Cr.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Vce(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new D6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Bce(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Cr.arraySlice(i,s,o),this.values=Cr.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&Cr.isTypedArray(r))for(let a=0,c=r.length;a!==c;++a){const d=r[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),e=!1;break}}return e}optimize(){const e=Cr.arraySlice(this.times),t=Cr.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const d=e[a];if(d!==e[a+1]&&(1!==a||d!==e[0]))if(r)c=!0;else{const g=a*i,_=g-i,y=g+i;for(let x=0;x!==i;++x){const T=t[g+x];if(T!==t[_+x]||T!==t[y+x]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const g=a*i,_=o*i;for(let y=0;y!==i;++y)t[_+y]=t[g+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,d=0;d!==i;++d)t[c+d]=t[a+d];++o}return o!==e.length?(this.times=Cr.arraySlice(e,0,o),this.values=Cr.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Cr.arraySlice(this.times,0),t=Cr.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Jl.prototype.TimeBufferType=Float32Array,Jl.prototype.ValueBufferType=Float32Array,Jl.prototype.DefaultInterpolation=2301;class y0 extends Jl{}y0.prototype.ValueTypeName="bool",y0.prototype.ValueBufferType=Array,y0.prototype.DefaultInterpolation=2300,y0.prototype.InterpolantFactoryMethodLinear=void 0,y0.prototype.InterpolantFactoryMethodSmooth=void 0;class T6 extends Jl{}T6.prototype.ValueTypeName="color";class GE extends Jl{}GE.prototype.ValueTypeName="number";class Hce extends xh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let d=e*a;for(let p=d+a;d!==p;d+=4)Ho.slerpFlat(s,0,o,d-a,o,d,c);return s}}class jy extends Jl{InterpolantFactoryMethodLinear(e){return new Hce(this.times,this.values,this.getValueSize(),e)}}jy.prototype.ValueTypeName="quaternion",jy.prototype.DefaultInterpolation=2301,jy.prototype.InterpolantFactoryMethodSmooth=void 0;class b0 extends Jl{}b0.prototype.ValueTypeName="string",b0.prototype.ValueBufferType=Array,b0.prototype.DefaultInterpolation=2300,b0.prototype.InterpolantFactoryMethodLinear=void 0,b0.prototype.InterpolantFactoryMethodSmooth=void 0;class jE extends Jl{}jE.prototype.ValueTypeName="vector";class WE{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=nc(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(zce(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Jl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],d=[];c.push((a+s-1)%s,a,(a+1)%s),d.push(0,1,0);const p=Cr.getKeyframeOrder(c);c=Cr.sortedArray(c,1,p),d=Cr.sortedArray(d,1,p),!r&&0===c[0]&&(c.push(s),d.push(d[0])),o.push(new GE(".morphTargetInfluences["+t[a].name+"]",c,d).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const d=e[a],p=d.name.match(s);if(p&&p.length>1){const g=p[1];let _=r[g];_||(r[g]=_=[]),_.push(d)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,_,y,x,T){if(0!==y.length){const N=[],I=[];Cr.flattenJSON(y,N,I,x),0!==N.length&&T.push(new g(_,N,I))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const _=d[g].keys;if(_&&0!==_.length)if(_[0].morphTargets){const y={};let x;for(x=0;x<_.length;x++)if(_[x].morphTargets)for(let T=0;T<_[x].morphTargets.length;T++)y[_[x].morphTargets[T]]=-1;for(const T in y){const N=[],I=[];for(let A=0;A!==_[x].morphTargets.length;++A){const H=_[x];N.push(H.time),I.push(H.morphTarget===T?1:0)}r.push(new GE(".morphTargetInfluence["+T+"]",N,I))}c=y.length*(o||1)}else{const y=".bones["+t[g].name+"]";i(jE,y+".position",_,"pos",r),i(jy,y+".quaternion",_,"rot",r),i(jE,y+".scale",_,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zce(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Uce(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return GE;case"vector":case"vector2":case"vector3":case"vector4":return jE;case"color":return T6;case"quaternion":return jy;case"bool":case"boolean":return y0;case"string":return b0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];Cr.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const x0={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const Gce=new class A6{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){a++,!1===s&&void 0!==r.onStart&&r.onStart(p,o,a),s=!0},this.itemEnd=function(p){o++,void 0!==r.onProgress&&r.onProgress(p,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(p){void 0!==r.onError&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return d.push(p,g),this},this.removeHandler=function(p){const g=d.indexOf(p);return-1!==g&&d.splice(g,2),this},this.getHandler=function(p){for(let g=0,_=d.length;g<_;g+=2){const y=d[g],x=d[g+1];if(y.global&&(y.lastIndex=0),y.test(p))return x}return null}}};class ed{constructor(e){this.manager=void 0!==e?e:Gce,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const td={};class Ql extends ed{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=x0.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==td[e])return void td[e].push({onLoad:t,onProgress:i,onError:r});td[e]=[],td[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(200===a.status||0===a.status){0===a.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const c=td[e],d=a.body.getReader(),p=a.headers.get("Content-Length"),g=p?parseInt(p):0,_=0!==g;let y=0;return new ReadableStream({start(x){!function T(){d.read().then(({done:N,value:I})=>{if(N)x.close();else{y+=I.byteLength;const A=new ProgressEvent("progress",{lengthComputable:_,loaded:y,total:g});for(let H=0,G=c.length;H<G;H++){const X=c[H];X.onProgress&&X.onProgress(A)}x.enqueue(I),T()}})}()}})}throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const c=new Response(a);switch(this.responseType){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,this.mimeType));case"json":return c.json();default:return c.text()}}).then(a=>{x0.add(e,a);const c=td[e];delete td[e];for(let d=0,p=c.length;d<p;d++){const g=c[d];g.onLoad&&g.onLoad(a)}this.manager.itemEnd(e)}).catch(a=>{const c=td[e];delete td[e];for(let d=0,p=c.length;d<p;d++){const g=c[d];g.onError&&g.onError(a)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class $E extends ed{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=x0.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=HS("img");function c(){p(),x0.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(g){p(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){a.removeEventListener("load",c,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",d,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class jce extends ed{constructor(e){super(e)}load(e,t,i,r){const s=new Dy,o=new $E(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(d){o.load(e[d],function(p){s.images[d]=p,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let d=0;d<e.length;++d)c(d);return s}}class $ce extends ed{constructor(e){super(e)}load(e,t,i,r){const s=new eo,o=new $E(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class eu extends Ui{constructor(e,t=1){super(),this.type="Light",this.color=new Rt(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}eu.prototype.isLight=!0;(class I6 extends eu{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(Ui.DefaultUp),this.updateMatrix(),this.groundColor=new Rt(t)}copy(e){return eu.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const F6=new Gt,R6=new ne,P6=new ne;class mF{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sE,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new Ji(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;R6.setFromMatrixPosition(e.matrixWorld),t.position.copy(R6),P6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(P6),t.updateMatrixWorld(),F6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(F6),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class k6 extends mF{constructor(){super(new Eo(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=2*xy*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}k6.prototype.isSpotLightShadow=!0;(class O6 extends eu{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(Ui.DefaultUp),this.updateMatrix(),this.target=new Ui,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new k6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const L6=new Gt,Wy=new ne,gF=new ne;class N6 extends mF{constructor(){super(new Eo(90,1,.5,500)),this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new Ji(2,1,1,1),new Ji(0,1,1,1),new Ji(3,1,1,1),new Ji(1,1,1,1),new Ji(3,0,1,1),new Ji(1,0,1,1)],this._cubeDirections=[new ne(1,0,0),new ne(-1,0,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,1,0),new ne(0,-1,0)],this._cubeUps=[new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,0,1),new ne(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Wy.setFromMatrixPosition(e.matrixWorld),i.position.copy(Wy),gF.copy(i.position),gF.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(gF),i.updateMatrixWorld(),r.makeTranslation(-Wy.x,-Wy.y,-Wy.z),L6.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(L6)}}N6.prototype.isPointLightShadow=!0;(class B6 extends eu{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new N6}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class V6 extends mF{constructor(){super(new oE(-5,5,5,-5,.5,500))}}V6.prototype.isDirectionalLightShadow=!0;(class H6 extends eu{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Ui.DefaultUp),this.updateMatrix(),this.target=new Ui,this.shadow=new V6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class U6 extends eu{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class z6 extends eu{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class G6{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ne)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],i*r*1.092548),t.addScaledVector(o[5],r*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],i*s*1.092548),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*i),t.addScaledVector(o[4],.858086*i*r),t.addScaledVector(o[5],.858086*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}G6.prototype.isSphericalHarmonics3=!0;class qE extends eu{constructor(e=new G6,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}qE.prototype.isLightProbe=!0;class vF{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}let KE;(class j6 extends pn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class Xce extends ed{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=x0.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){x0.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class Zce extends ed{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ql(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const c=a.slice(0);(void 0===KE&&(KE=new(window.AudioContext||window.webkitAudioContext)),KE).decodeAudioData(c,function(p){t(p)})}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}}(class Jce extends qE{constructor(e,t,i=1){super(void 0,i);const r=(new Rt).set(e),s=(new Rt).set(t),o=new ne(r.r,r.g,r.b),a=new ne(s.r,s.g,s.b),c=Math.sqrt(Math.PI),d=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(d)}}).prototype.isHemisphereLightProbe=!0,class Qce extends qE{constructor(e,t=1){super(void 0,t);const i=(new Rt).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class sle{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,d=t+t;c!==d;++c)if(i[c]!==i[c+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Ho.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Ho.multiplyQuaternionsFlat(e,o,e,t,e,i),Ho.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const _F="\\[\\]\\.:\\/",ole=new RegExp("["+_F+"]","g"),yF="[^"+_F+"]",ale="[^"+_F.replace("\\.","")+"]",cle=/((?:WC+[\/:])*)/.source.replace("WC",yF),lle=/(WCOD+)?/.source.replace("WCOD",ale),ule=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",yF),dle=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",yF),hle=new RegExp("^"+cle+lle+ule+dle+"$"),fle=["material","materials","bones"];class ple{constructor(e,t,i){const r=i||vr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let vr=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(ole,"")}static parseTrackName(t){const i=hle.exec(t);if(!i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==fle.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(!i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const d=r(c.children);if(d)return d}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let p=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let g=0;g<t.length;g++)if(t[g].name===p){p=g;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==p){if(void 0===t[p])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[p]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=ple,n})();vr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vr.prototype.GetterByBindingType=[vr.prototype._getValue_direct,vr.prototype._getValue_array,vr.prototype._getValue_arrayElement,vr.prototype._getValue_toArray],vr.prototype.SetterByBindingTypeAndVersioning=[[vr.prototype._setValue_direct,vr.prototype._setValue_direct_setNeedsUpdate,vr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_array,vr.prototype._setValue_array_setNeedsUpdate,vr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_arrayElement,vr.prototype._setValue_arrayElement_setNeedsUpdate,vr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_fromArray,vr.prototype._setValue_fromArray_setNeedsUpdate,vr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class gle{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:Ng,endingEnd:Ng};for(let d=0;d!==o;++d){const p=s[d].createInterpolant(null);a[d]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,d=a.sampleValues;return c[0]=s,c[1]=s+i,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const c=(e-s)*i;if(c<0||0===i)return;this._startTime=null,t=i*c}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,d=this._propertyBindings;if(2501===this.blendMode)for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(o),d[p].accumulateAdditive(a);else for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(o),d[p].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===c){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Bg,r.endingEnd=Bg):(r.endingStart=e?this.zeroSlopeAtStart?Bg:Ng:2402,r.endingEnd=t?this.zeroSlopeAtEnd?Bg:Ng:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}}(class vle extends Qf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=i.uuid,d=this._bindingsByRootAndName;let p=d[c];void 0===p&&(p={},d[c]=p);for(let g=0;g!==s;++g){const _=r[g],y=_.name;let x=p[y];if(void 0!==x)o[g]=x;else{if(x=o[g],void 0!==x){null===x._cacheIndex&&(++x.referenceCount,this._addInactiveBinding(x,c,y));continue}x=new sle(vr.create(i,y,t&&t._propertyBindings[g].binding.parsedPath),_.ValueTypeName,_.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,y),o[g]=x}a[g].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,d=c[c.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,c[p]=d,c.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===c.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],d=e._cacheIndex;c._cacheIndex=d,t[d]=c,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new D6(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?WE.findByName(r,e):e;const a=null!==o?o.uuid:e,c=this._actionsByClip[a];let d=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==c){const g=c.actionByRoot[s];if(void 0!==g&&g.blendMode===i)return g;d=c.knownActions[0],null===o&&(o=d._clip)}if(null===o)return null;const p=new gle(this,o,t,i);return this._bindAction(p,d),this._addInactiveAction(p,a,s),p}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?WE.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)a[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const d=o[a];this._deactivateAction(d);const p=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot[t];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class bF{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new bF(void 0===this.value.clone?this.value:this.value.clone())}}(class _le extends l0{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const eV=new tt;class $y{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=eV.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return eV.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}$y.prototype.isBox2=!0;const wh=new ne,XE=new Gt,wF=new Gt;function iV(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,iV(n.children[t]));return e}class Cle{constructor(){this.type="ShapePath",this.color=new Rt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new FE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(A){const H=[];for(let G=0,X=A.length;G<X;G++){const re=A[G],K=new Zu;K.curves=re.curves,H.push(K)}return H}function r(A,H){const G=H.length;let X=!1;for(let re=G-1,K=0;K<G;re=K++){let he=H[re],De=H[K],Te=De.x-he.x,ge=De.y-he.y;if(Math.abs(ge)>Number.EPSILON){if(ge<0&&(he=H[K],Te=-Te,De=H[re],ge=-ge),A.y<he.y||A.y>De.y)continue;if(A.y===he.y){if(A.x===he.x)return!0}else{const Ze=ge*(A.x-he.x)-Te*(A.y-he.y);if(0===Ze)return!0;if(Ze<0)continue;X=!X}}else{if(A.y!==he.y)continue;if(De.x<=A.x&&A.x<=he.x||he.x<=A.x&&A.x<=De.x)return!0}}return X}const s=Ju.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return i(o);let a,c,d;const p=[];if(1===o.length)return c=o[0],d=new Zu,d.curves=c.curves,p.push(d),p;let g=!s(o[0].getPoints());g=e?!g:g;const _=[],y=[];let N,I,x=[],T=0;y[T]=void 0,x[T]=[];for(let A=0,H=o.length;A<H;A++)c=o[A],N=c.getPoints(),a=s(N),a=e?!a:a,a?(!g&&y[T]&&T++,y[T]={s:new Zu,p:N},y[T].s.curves=c.curves,g&&T++,x[T]=[]):x[T].push({h:c,p:N[0]});if(!y[0])return i(o);if(y.length>1){let A=!1;const H=[];for(let G=0,X=y.length;G<X;G++)_[G]=[];for(let G=0,X=y.length;G<X;G++){const re=x[G];for(let K=0;K<re.length;K++){const he=re[K];let De=!0;for(let Te=0;Te<y.length;Te++)r(he.p,y[Te].p)&&(G!==Te&&H.push({froms:G,tos:Te,hole:K}),De?(De=!1,_[Te].push(he)):A=!0);De&&_[G].push(he)}}H.length>0&&(A||(x=_))}for(let A=0,H=y.length;A<H;A++){d=y[A].s,p.push(d),I=x[A];for(let G=0,X=I.length;G<X;G++)d.holes.push(I[G].h)}return p}}const lV=new Float32Array(1);new Int32Array(lV.buffer),Hc.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Hc.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},FE.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class Sle extends _h{constructor(e=10,t=10,i=4473924,r=8947848){i=new Rt(i),r=new Rt(r);const s=t/2,o=e/t,a=e/2,c=[],d=[];for(let _=0,y=0,x=-a;_<=t;_++,x+=o){c.push(-a,0,x,a,0,x),c.push(x,0,-a,x,0,a);const T=_===s?i:r;T.toArray(d,y),y+=3,T.toArray(d,y),y+=3,T.toArray(d,y),y+=3,T.toArray(d,y),y+=3}const p=new pn;p.setAttribute("position",new jt(c,3)),p.setAttribute("color",new jt(d,3)),super(p,new Mo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class xle extends _h{constructor(e){const t=iV(e),i=new pn,r=[],s=[],o=new Rt(0,0,1),a=new Rt(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new jt(r,3)),i.setAttribute("color",new jt(s,3)),super(i,new Mo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");wF.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(XE.multiplyMatrices(wF,a.matrixWorld),wh.setFromMatrixPosition(XE),r.setXYZ(o,wh.x,wh.y,wh.z),XE.multiplyMatrices(wF,a.parent.matrixWorld),wh.setFromMatrixPosition(XE),r.setXYZ(o+1,wh.x,wh.y,wh.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ed.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),vF.extractUrlBase(n)},ed.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},$y.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},$y.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$y.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},$y.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},Bc.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},Bc.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Bc.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Bc.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},Bc.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},ip.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},sE.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Us.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Us.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Us.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Us.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Us.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Us.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Gt.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},Gt.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Gt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ne).setFromMatrixColumn(this,3)},Gt.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},Gt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Gt.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Gt.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Gt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Gt.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},Gt.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Gt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Gt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Gt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Gt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Gt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Gt.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Gt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Gt.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)},Gt.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Xu.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Ho.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Ho.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},rp.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},rp.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},rp.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},Es.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Es.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},Es.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},Es.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},Es.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},Es.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Es.getBarycoord(n,e,t,i,r)},Es.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Es.getNormal(n,e,t,i)},Zu.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},Zu.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Qu(this,n)},Zu.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new zy(this,n)},tt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},tt.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},tt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ne.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ne.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ne.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},ne.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},ne.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},ne.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},ne.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},ne.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},ne.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ji.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},Ji.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ui.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},Ui.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ui.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},Ui.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ui.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Ui.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),gr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(gr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),JI.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Eo.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(eu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(Li.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===by},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(by)}}}),Li.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?by:yy),this},Li.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Li.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},pn.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},pn.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Li(arguments[1],arguments[2])))},pn.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},pn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},pn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},pn.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},pn.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(pn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),l0.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?by:yy),this},l0.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Qu.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Qu.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Qu.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},hE.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},bF.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(So.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Rt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(mh.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),Qi.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},Qi.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},Qi.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Qi.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Qi.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Qi.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Qi.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Qi.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Qi.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Qi.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Qi.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Qi.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Qi.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Qi.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Qi.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},Qi.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Qi.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Qi.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Qi.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Qi.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Qi.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Qi.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Qi.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Qi.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Qi.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Qi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?BS:ba}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(LB.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Nc.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class nle extends Ui{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Zce).load(n,function(i){e.setBuffer(i)}),this},OI.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},OI.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)},zg.crossOrigin=void 0,zg.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new $ce;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},zg.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new jce;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s},zg.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},zg.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:JA}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=JA);class EF{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}class Tle{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}class tu{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygons=[],e&&this.build(e)}clone(){const e=new tu;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(t=>t.clone()),e}invert(){for(let t=0;t<this.polygons.length;t++)this.polygons[t].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let t=new Array,i=new Array;for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],t,i,t,i);return this.front&&(t=this.front.clipPolygons(t)),i=this.back?this.back.clipPolygons(i):[],t.concat(i)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const t=[],i=[];for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],this.polygons,this.polygons,t,i);t.length&&(this.front||(this.front=new tu),this.front.build(t)),i.length&&(this.back||(this.back=new tu),this.back.build(i))}}class xa{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clone(){return new xa(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}times(e){return this.x*=e,this.y*=e,this.z*=e,this}dividedBy(e){return this.x/=e,this.y/=e,this.z/=e,this}lerp(e,t){return this.add((new xa).copy(e).sub(this).times(t))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(e){const t=this.clone(),i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,c=e.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVector3(){return new ne(this.x,this.y,this.z)}}let Ale=(()=>{class n{constructor(t,i){this.normal=t,this.w=i,this.normal=t,this.w=i}clone(){return new n(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(t,i,r,s,o){let g=0;const _=[];for(let y=0;y<t.vertices.length;y++){const x=this.normal.dot(t.vertices[y].pos)-this.w,T=x<-n.EPSILON?2:x>n.EPSILON?1:0;g|=T,_.push(T)}switch(g){case 0:(this.normal.dot(t.plane.normal)>0?i:r).push(t);break;case 1:s.push(t);break;case 2:o.push(t);break;case 3:{const y=[],x=[];for(let T=0;T<t.vertices.length;T++){const N=(T+1)%t.vertices.length,I=_[T],A=_[N],H=t.vertices[T],G=t.vertices[N];if(2!=I&&y.push(H),1!=I&&x.push(2!=I?H.clone():H),3==(I|A)){const X=(this.w-this.normal.dot(H.pos))/this.normal.dot((new xa).copy(G.pos).sub(H.pos)),re=H.interpolate(G,X);y.push(re),x.push(re.clone())}}y.length>=3&&s.push(new w0(y,t.shared)),x.length>=3&&o.push(new w0(x,t.shared));break}}}static fromPoints(t,i,r){const s=(new xa).copy(i).sub(t).cross((new xa).copy(r).sub(t)).normalize();return new n(s.clone(),s.dot(t))}}return n.EPSILON=1e-5,n})();class w0{constructor(e,t){this.vertices=e,this.shared=t,this.plane=Ale.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){return new w0(this.vertices.map(e=>e.clone()),this.shared)}flip(){this.vertices.reverse().map(e=>e.flip()),this.plane.flip()}}class tM{constructor(e,t,i,r){this.pos=(new xa).copy(e),this.normal=(new xa).copy(t),this.uv=(new xa).copy(i),this.uv.z=0,r&&(this.color=(new xa).copy(r))}clone(){return new tM(this.pos,this.normal,this.uv,this.color)}flip(){this.normal.negate()}interpolate(e,t){return new tM(this.pos.clone().lerp(e.pos,t),this.normal.clone().lerp(e.normal,t),this.uv.clone().lerp(e.uv,t),this.color&&e.color&&this.color.clone().lerp(e.color,t))}}class _r{constructor(){this.polygons=new Array}static fromPolygons(e){const t=new _r;return t.polygons=e,t}static fromGeometry(e,t){let i=[];const r=e.attributes.position,s=e.attributes.normal,o=e.attributes.uv,a=e.attributes.color,c=e.groups;let d;if(e.index)d=e.index.array;else{d=new Array(r.array.length/r.itemSize|0);for(let g=0;g<d.length;g++)d[g]=g}i=new Array(d.length/3|0);for(let g=0,_=0,y=d.length;g<y;g+=3,_++){const x=new Array(3);for(let T=0;T<3;T++){const N=d[g+T],I=3*N,A=2*N,re=s.array[I],K=s.array[I+1],he=s.array[I+2],De=o?.array[A],Te=o?.array[A+1];x[T]=new tM(new xa(r.array[I],r.array[I+1],r.array[I+2]),new xa(re,K,he),new xa(De,Te,0),a&&new xa(a.array[A],a.array[A+1],a.array[A+2]))}if(void 0===t&&c&&c.length>0)for(const T of c)d[g]>=T.start&&d[g]<T.start+T.count&&(i[_]=new w0(x,T.materialIndex));else i[_]=new w0(x,t)}return _r.fromPolygons(i.filter(g=>!isNaN(g.plane.normal.x)))}static toGeometry(e,t){let i=0;const r=e.polygons;for(const y of r)i+=y.vertices.length-2;const s=new pn,o=new EF(3*i*3),a=new EF(3*i*3),c=new Tle(2*i*3);let d;const p=[],g=[];for(const y of r){const x=y.vertices,T=x.length;void 0!==y.shared&&(p[y.shared]||(p[y.shared]=[])),T&&void 0!==x[0].color&&(d||(d=new EF(3*i*3)));for(let N=3;N<=T;N++)(void 0===y.shared?g:p[y.shared]).push(o.top/3,o.top/3+1,o.top/3+2),o.write(x[0].pos),o.write(x[N-2].pos),o.write(x[N-1].pos),a.write(x[0].normal),a.write(x[N-2].normal),a.write(x[N-1].normal),c&&(c.write(x[0].uv),c.write(x[N-2].uv),c.write(x[N-1].uv)),d&&(d.write(x[0].color),d.write(x[N-2].color),d.write(x[N-1].color))}s.setAttribute("position",new Li(o.array,3)),s.setAttribute("normal",new Li(a.array,3)),c&&s.setAttribute("uv",new Li(c.array,2)),d&&s.setAttribute("color",new Li(d.array,3));for(let y=0;y<p.length;y++)void 0===p[y]&&(p[y]=[]);if(p.length){let y=[],x=0;for(let T=0;T<p.length;T++)s.addGroup(x,p[T].length,T),x+=p[T].length,y=y.concat(p[T]);s.addGroup(x,g.length,p.length),y=y.concat(g),s.setIndex(y)}const _=(new Gt).copy(t).invert();return s.applyMatrix4(_),s.computeBoundingSphere(),s.computeBoundingBox(),s}static fromMesh(e,t){const i=_r.fromGeometry(e.geometry,t),r=new ne,s=new Us;s.getNormalMatrix(e.matrix);for(let o=0;o<i.polygons.length;o++){const a=i.polygons[o];for(let c=0;c<a.vertices.length;c++){const d=a.vertices[c];d.pos.copy(r.copy(d.pos.toVector3()).applyMatrix4(e.matrix)),d.normal.copy(r.copy(d.normal.toVector3()).applyMatrix3(s))}}return i}static toMesh(e,t,i){const r=_r.toGeometry(e,t),s=new gr(r,i);return s.matrix.copy(t),s.matrix.decompose(s.position,s.quaternion,s.scale),s.rotation.setFromQuaternion(s.quaternion),s.updateMatrixWorld(),s.castShadow=s.receiveShadow=!0,s}static union(e,t){const i=_r.fromMesh(e),r=_r.fromMesh(t);return _r.toMesh(i.union(r),e.matrix,e.material)}static subtract(e,t){const i=_r.fromMesh(e),r=_r.fromMesh(t);return _r.toMesh(i.subtract(r),e.matrix,e.material)}static intersect(e,t){const i=_r.fromMesh(e),r=_r.fromMesh(t);return _r.toMesh(i.intersect(r),e.matrix,e.material)}clone(){const e=new _r;return e.polygons=this.polygons.map(t=>t.clone()).filter(t=>Number.isFinite(t.plane.w)),e}toPolygons(){return this.polygons}union(e){const t=new tu(this.clone().polygons),i=new tu(e.clone().polygons);return t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),_r.fromPolygons(t.allPolygons())}subtract(e){const t=new tu(this.clone().polygons),i=new tu(e.clone().polygons);return t.invert(),t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),t.invert(),_r.fromPolygons(t.allPolygons())}intersect(e){const t=new tu(this.clone().polygons),i=new tu(e.clone().polygons);return t.invert(),i.clipTo(t),i.invert(),t.clipTo(i),i.clipTo(t),t.build(i.allPolygons()),t.invert(),_r.fromPolygons(t.allPolygons())}inverse(){const e=this.clone();for(const t of e.polygons)t.flip();return e}toMesh(e,t){return _r.toMesh(this,e,t)}toGeometry(e){return _r.toGeometry(this,e)}}class Ile{parse(e,t={}){const i=void 0!==t.binary&&t.binary,r=[];let s=0;e.traverse(function(I){if(I.isMesh){const A=I.geometry;if(!0!==A.isBufferGeometry)throw new Error("THREE.STLExporter: Geometry is not of type THREE.BufferGeometry.");const H=A.index,G=A.getAttribute("position");s+=null!==H?H.count/3:G.count/3,r.push({object3d:I,geometry:A})}});let o,a=80;if(!0===i){const A=new ArrayBuffer(2*s+3*s*4*4+80+4);o=new DataView(A),o.setUint32(a,s,!0),a+=4}else o="",o+="solid exported\n";const c=new ne,d=new ne,p=new ne,g=new ne,_=new ne,y=new ne;for(let I=0,A=r.length;I<A;I++){const H=r[I].object3d,G=r[I].geometry,X=G.index,re=G.getAttribute("position");if(null!==X)for(let K=0;K<X.count;K+=3)x(X.getX(K+0),X.getX(K+1),X.getX(K+2),re,H);else for(let K=0;K<re.count;K+=3)x(K+0,K+1,K+2,re,H)}return!1===i&&(o+="endsolid exported\n"),o;function x(I,A,H,G,X){c.fromBufferAttribute(G,I),d.fromBufferAttribute(G,A),p.fromBufferAttribute(G,H),!0===X.isSkinnedMesh&&(X.boneTransform(I,c),X.boneTransform(A,d),X.boneTransform(H,p)),c.applyMatrix4(X.matrixWorld),d.applyMatrix4(X.matrixWorld),p.applyMatrix4(X.matrixWorld),function T(I,A,H){g.subVectors(H,A),_.subVectors(I,A),g.cross(_).normalize(),y.copy(g).normalize(),!0===i?(o.setFloat32(a,y.x,!0),a+=4,o.setFloat32(a,y.y,!0),a+=4,o.setFloat32(a,y.z,!0),a+=4):(o+="\tfacet normal "+y.x+" "+y.y+" "+y.z+"\n",o+="\t\touter loop\n")}(c,d,p),N(c),N(d),N(p),!0===i?(o.setUint16(a,0,!0),a+=2):(o+="\t\tendloop\n",o+="\tendfacet\n")}function N(I){!0===i?(o.setFloat32(a,I.x,!0),a+=4,o.setFloat32(a,I.y,!0),a+=4,o.setFloat32(a,I.z,!0),a+=4):o+="\t\t\tvertex "+I.x+" "+I.y+" "+I.z+"\n"}}}class nM extends Qu{constructor(e,t={}){const i=t.font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new pn;const r=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t),this.type="TextGeometry"}}class Fle extends ed{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ql(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){let c;try{c=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}const d=s.parse(c);t&&t(d)},i,r)}parse(e){return new uV(e)}}class uV{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const i=[],r=function Rle(n,e,t){const i=Array.from(n),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,c=0;for(let d=0;d<i.length;d++){const p=i[d];if("\n"===p)a=0,c-=s;else{const g=Ple(p,r,a,c,t);a+=g.offsetX,o.push(g.path)}}return o}(e,t,this.data);for(let s=0,o=r.length;s<o;s++)Array.prototype.push.apply(i,r[s].toShapes());return i}}function Ple(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");const o=new Cle;let a,c,d,p,g,_,y,x;if(s.o){const T=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let N=0,I=T.length;N<I;)switch(T[N++]){case"m":a=T[N++]*e+t,c=T[N++]*e+i,o.moveTo(a,c);break;case"l":a=T[N++]*e+t,c=T[N++]*e+i,o.lineTo(a,c);break;case"q":d=T[N++]*e+t,p=T[N++]*e+i,g=T[N++]*e+t,_=T[N++]*e+i,o.quadraticCurveTo(g,_,d,p);break;case"b":d=T[N++]*e+t,p=T[N++]*e+i,g=T[N++]*e+t,_=T[N++]*e+i,y=T[N++]*e+t,x=T[N++]*e+i,o.bezierCurveTo(g,_,y,x,d,p)}}return{offsetX:s.ha*e,path:o}}function kle(n,e){if(1&n&&(Oe(0,"mat-card",11)(1,"mat-card-title"),et(2),Ne(),Oe(3,"mat-card-subtitle"),et(4),Ne()()),2&n){const t=wn();Ge(2),$i(t.errorStatus),Ge(2),$i(t.errorMessage)}}function Ole(n,e){1&n&&(Oe(0,"mat-icon",12),et(1,"refresh"),Ne())}function Lle(n,e){if(1&n&&(Oe(0,"mat-option",13),et(1),ft(2,"async"),ft(3,"manifest"),Ne()),2&n){const t=e.$implicit;Qe("value",t),Ge(1),vs("",mn(2,2,xi(3,4,t,"activityMode"))," ")}}function Nle(n,e){if(1&n&&(Oe(0,"div",15),et(1),ft(2,"activitiesTotalTime"),Ne()),2&n){const t=wn().$implicit,i=wn();Ge(1),$i(mn(2,1,i.seasonActivities(t.days)))}}uV.prototype.isFont=!0;const Ble=function(n,e,t){return[n,e,t]},Vle=function(n){return{"background-color":n}};function Hle(n,e){if(1&n&&(vn(0,"div",20),ft(1,"milestone"),ft(2,"date"),ft(3,"addTime"),ft(4,"milestone"),ft(5,"date"),ft(6,"addTime"),ft(7,"addTime"),ft(8,"addTime"),ft(9,"addTime"),ft(10,"addTime"),ft(11,"date"),ft(12,"milestone"),ft(13,"date"),ft(14,"addTime"),ft(15,"addTime")),2&n){const t=e.$implicit,i=wn(2);Qe("ngClass",P2(51,Ble,i.poi?xi(1,3,d_(2,6,t.date,"y-M-d","GMT"),"class"):"",xi(3,10,t.activities,i.calendarFilter)>0?"active":"inactive",i.poi?xi(4,13,d_(5,16,t.date,"y-M-d","GMT"),"icon"):""))("ngStyle",Ud(55,Vle,"hsl("+(120*(100-xi(6,20,t.activities,i.calendarFilter)/864)/50-120)+", "+(xi(7,23,t.activities,i.calendarFilter)>0?"100%":"0%")+", "+(xi(8,26,t.activities,i.calendarFilter)>0?xi(9,29,t.activities,i.calendarFilter)/864>50?100-mn(10,32,t.activities)/864+"%":"50%":"90%")+")"))("matTooltip",d_(11,34,t.date,"shortDate","GMT")+xi(12,38,d_(13,41,t.date,"y-M-d","GMT"),"text")+": "+i.Math.floor(xi(14,45,t.activities,i.calendarFilter)/86400*24)+"h "+i.Math.floor(xi(15,48,t.activities,i.calendarFilter)%3600/60)+"m")}}function Ule(n,e){if(1&n){const t=xf();Oe(0,"button",21),ni("click",function(){P(t);const r=wn().$implicit,s=wn();return V(s.three(r,s.displayName,s.seasons.length))}),ft(1,"loadingReduce"),et(2,"Download STL"),Ne()}if(2&n){const t=wn().$implicit;Qe("disabled",mn(1,2,wn().loadingArray))("id","download"+t.number)}}const zle=function(n){return{width:n}};function Gle(n,e){if(1&n&&(Oe(0,"div",14)(1,"div",15),et(2),Ne(),Ot(3,Nle,3,3,"div",16),Oe(4,"div",17),ft(5,"loadingReduce"),Ot(6,Hle,16,57,"div",18),Ne(),Ot(7,Ule,3,4,"button",19),Ne()),2&n){const t=e.$implicit,i=wn();Qe("ngStyle",Ud(8,zle,i.Math.ceil(t.days.length/7)+"em")),Ge(2),$i(t.name),Ge(1),Qe("ngIf",i.seasonTimes),Ge(1),Qe("ngClass",mn(5,6,i.loadingArray)?"loading":""),Ge(2),Qe("ngForOf",t.days),Ge(1),Qe("ngIf",i.downloadButtons)}}function jle(n,e){1&n&&(Oe(0,"mat-icon",22),et(1,"refresh"),Ne())}function Wle(n,e){1&n&&(Oe(0,"mat-icon",37),et(1," trending_up "),Ne())}function $le(n,e){1&n&&(Oe(0,"mat-icon",38),et(1," trending_flat "),Ne())}function qle(n,e){1&n&&(Oe(0,"mat-icon",39),et(1," trending_down "),Ne())}function Kle(n,e){1&n&&(Oe(0,"mat-icon",37),et(1," trending_up "),Ne())}function Yle(n,e){1&n&&(Oe(0,"mat-icon",38),et(1," trending_flat "),Ne())}function Xle(n,e){1&n&&(Oe(0,"mat-icon",39),et(1," trending_down "),Ne())}function Zle(n,e){if(1&n&&(Oe(0,"div",24),Ot(1,Kle,2,0,"mat-icon",25),Ot(2,Yle,2,0,"mat-icon",26),Ot(3,Xle,2,0,"mat-icon",27),Oe(4,"div",28)(5,"div",29)(6,"div",30),et(7),ft(8,"async"),ft(9,"manifest"),Ne(),vn(10,"img",41),ft(11,"async"),ft(12,"manifest"),ft(13,"async"),ft(14,"manifest"),Ne(),Oe(15,"div",31)(16,"div",32)(17,"div",33),et(18),Ne(),Oe(19,"div",34),et(20,"13 week avg"),Ne()(),Oe(21,"div",35)(22,"div",33),et(23),Ne(),Oe(24,"div",34),et(25,"52 week avg"),Ne()()()()()),2&n){const t=wn().$implicit,i=wn(2);Ge(1),Qe("ngIf",t.quarter>t.year),Ge(1),Qe("ngIf",t.quarter===t.year),Ge(1),Qe("ngIf",t.quarter<t.year),Ge(4),$i(mn(8,8,xi(9,10,t.mode,"activityMode"))),Ge(3),Qe("src",mn(11,13,xi(12,15,t.mode,"activityModeIcon")),hf)("alt",mn(13,18,xi(14,20,t.mode,"activityMode"))),Ge(8),vs("",t.quarter>60?i.Math.floor(t.quarter/60)+"h"+t.quarter%60:t.quarter,"m/week"),Ge(5),vs("",t.year>60?i.Math.floor(t.year/60)+"h"+t.year%60:t.year,"m/week")}}function Jle(n,e){if(1&n&&(e_(0),Ot(1,Zle,26,23,"div",40),t_()),2&n){const t=e.$implicit;Ge(1),Qe("ngIf",t.quarter>0||t.year>0)}}function Qle(n,e){if(1&n&&(Oe(0,"div",23)(1,"div",24),Ot(2,Wle,2,0,"mat-icon",25),ft(3,"loadingReduce"),Ot(4,$le,2,0,"mat-icon",26),ft(5,"loadingReduce"),Ot(6,qle,2,0,"mat-icon",27),ft(7,"loadingReduce"),Oe(8,"div",28)(9,"div",29)(10,"div",30),et(11,"All Activities"),Ne()(),Oe(12,"div",31)(13,"div",32)(14,"div",33),et(15),Ne(),Oe(16,"div",34),et(17,"13 week avg"),Ne()(),Oe(18,"div",35)(19,"div",33),et(20),Ne(),Oe(21,"div",34),et(22,"52 week avg"),Ne()()()()(),Ot(23,Jle,2,1,"ng-container",36),Ne()),2&n){const t=wn();Ge(2),Qe("ngIf",!mn(3,6,t.loadingArray)&&t.getOverallTrend().quarter>t.getOverallTrend().year),Ge(2),Qe("ngIf",!mn(5,8,t.loadingArray)&&t.getOverallTrend().quarter===t.getOverallTrend().year),Ge(2),Qe("ngIf",!mn(7,10,t.loadingArray)&&t.getOverallTrend().quarter<t.getOverallTrend().year),Ge(9),vs("",t.getOverallTrend().quarter>60?t.Math.floor(t.getOverallTrend().quarter/60)+"h"+t.getOverallTrend().quarter%60:t.getOverallTrend().quarter,"m/week"),Ge(5),vs("",t.getOverallTrend().year>60?t.Math.floor(t.getOverallTrend().year/60)+"h"+t.getOverallTrend().year%60:t.getOverallTrend().year,"m/week"),Ge(3),Qe("ngForOf",t.getModeTrends())}}class qy{constructor(e,t,i,r,s,o){this.dialog=t,this.manifestService=i,this.bungieQueue=r,this.bungieAuth=s,this.zone=o,this.membershipDataForCurrentUser$=new Zi(void 0),this.accountResponse$=new Zi([]),this.displayName="",this.downloadLink="",this.downloadButtons=!0,this.seasonTimes=!0,this.poi=!0,this.Math=Math,this.locale=e}addDay(e){this.days[e.getUTCFullYear()]||(this.days[e.getUTCFullYear()]={}),this.days[e.getUTCFullYear()][e.getUTCMonth()+1]||(this.days[e.getUTCFullYear()][e.getUTCMonth()+1]={}),this.days[e.getUTCFullYear()][e.getUTCMonth()+1][e.getUTCDate()]||(this.days[e.getUTCFullYear()][e.getUTCMonth()+1][e.getUTCDate()]={date:new Date(e),activities:[]}),this.seasons.some(t=>{if(e>=t.startDate)return t.days.push(this.days[e.getUTCFullYear()][e.getUTCMonth()+1][e.getUTCDate()]),!0}),this.flatDays.push(this.days[e.getUTCFullYear()][e.getUTCMonth()+1][e.getUTCDate()].activities)}ngOnInit(){this.loadingArray=[],this.calendarFilter="0",this.subs=[],this.activities=[],this.days={},this.flatDays=[],this.oneQuarterAgo=new Date((new Date).setDate((new Date).getDate()-91)),this.oneYearAgo=new Date((new Date).setDate((new Date).getDate()-364)),this.modeTrends={},this.overallTrend={quarter:[],year:[]},this.seasons=[{number:20,name:"Season of Defiance",days:[],startDate:new Date("2023-02-28")},{number:19,name:"Season of the Seraph",days:[],startDate:new Date("2022-12-06")},{number:18,name:"Season of Plunder",days:[],startDate:new Date("2022-08-23")},{number:17,name:"Season of the Haunted",days:[],startDate:new Date("2022-05-24")},{number:16,name:"Season of the Risen",days:[],startDate:new Date("2022-02-22")},{number:15,name:"Season of the Lost",days:[],startDate:new Date("2021-08-24")},{number:14,name:"Season of the Splicer",days:[],startDate:new Date("2021-05-11")},{number:13,name:"Season of the Chosen",days:[],startDate:new Date("2021-02-09")},{number:12,name:"Season of the Hunt",days:[],startDate:new Date("2020-11-10")},{number:11,name:"Season of Arrivals",days:[],startDate:new Date("2020-06-09")},{number:10,name:"Season of the Worthy",days:[],startDate:new Date("2020-03-10")},{number:9,name:"Season of Dawn",days:[],startDate:new Date("2019-12-10")},{number:8,name:"Season of Undying",days:[],startDate:new Date("2019-10-01")},{number:7,name:"Season of Opulence",days:[],startDate:new Date("2019-06-04")},{number:6,name:"Season of the Drifter",days:[],startDate:new Date("2019-03-05")},{number:5,name:"Season of the Forge",days:[],startDate:new Date("2018-12-04")},{number:4,name:"Season of the Outlaw",days:[],startDate:new Date("2018-09-04")},{number:3,name:"Warmind",days:[],startDate:new Date("2018-05-08")},{number:2,name:"Curse of Osiris",days:[],startDate:new Date("2017-12-05")},{number:1,name:"The Red War",days:[],startDate:new Date("2017-09-05")}],this.flatDaysBS=new Zi([]),this.manifestService.state$.subscribe(s=>{s.loaded&&(this.modeOptions=Object.keys(this.manifestService.defs.ActivityMode.dbTable).map(o=>this.manifestService.defs.ActivityMode.dbTable[o].modeType).sort())}),this.errorStatus="",this.errorMessage="";const e=new Date("2017-09-05T00:00:00Z"),t=new Date;for(;e<=t;)this.addDay(e),e.setDate(e.getDate()+1);this.seasons.reverse(),this.seasons.forEach((s,o)=>{s.startDateString=uD(s.startDate,"shortDate",this.locale||"en-US"),this.seasons[o+1]&&(s.endDateString=uD(this.seasons[o+1].startDate,"shortDate",this.locale||"en-US"))}),this.flatDaysBS.next(this.flatDays),this.yearKeys=Object.keys(this.days),this.monthKeys={},this.monthOffsets={2017:{9:0}};let i=0,r=28;this.dayKeys={},this.yearKeys.forEach(s=>{this.monthKeys[s]=Object.keys(this.days[s]),this.monthOffsets[s]||(this.monthOffsets[s]={}),this.dayKeys[s]={},this.monthKeys[s].forEach(o=>{this.monthOffsets[s][o]||(this.monthOffsets[s][o]=(r+i)%7,r=Object.keys(this.days[s][o]).length,i=this.monthOffsets[s][o]),this.dayKeys[s][o]=Object.keys(this.days[s][o])})}),this.subs.push(this.bungieAuth.hasValidAccessToken$.pipe(Rc(),Mr(s=>{s&&this.bungieQueue.addToQueue("getProfile",h8,c=>{this.membershipDataForCurrentUser$.next(c)})})).subscribe()),this.subs.push(this.membershipDataForCurrentUser$.pipe(Rc(),yo(s=>eg(s?.Response?.destinyMemberships.map(o=>{const a={loading:!0};this.loadingArray.push(a);const c=new Zi(void 0),{membershipId:d,membershipType:p}=o;return this.bungieQueue.addToQueue("getProfile",u8,x=>{x&&1===x.ErrorCode&&x?.Response?.characters?.length>0?eg(x?.Response?.characters.map(T=>{const N={loading:!0};this.loadingArray.push(N);const I=new Zi(void 0),{characterId:A}=T,H=T.merged?.allTime?.secondsPlayed?.basic?.value;return this.bungieQueue.addToQueue("getProfile",l8,K=>{if(1===K.ErrorCode){const he=K;he.Response.character=K.Response.character??{data:{characterId:A,membershipId:d,membershipType:p,minutesPlayedTotal:H?this.Math.floor(H/60):0}},I.next(he)}N.loading=!1,I.complete()},{characterId:A,destinyMembershipId:d,membershipType:p,components:[200]}),I})??Fc).pipe(Vs(1)).subscribe(T=>{c.next(T),a.loading=!1,c.complete()}):(a.loading=!1,c.complete())},{destinyMembershipId:d,membershipType:p,groups:[1]}),c})??Fc)),gt(s=>this.accountResponse$.next(s))).subscribe()),this.membershipDataForCurrentUser$.pipe(Rc(),gt(s=>{this.displayName=s?.Response?.bungieNetUser?.displayName})).subscribe(),this.characters$=this.accountResponse$.pipe(Rc(),gt(s=>{const o=[];for(const a of s)if(a)for(const c of a)try{o.push(c.Response.character.data)}catch{}return o})),this.minutesPlayedTotal=this.characters$.pipe(gt(s=>{let o=0;return s.forEach(a=>{o+=+a.minutesPlayedTotal}),o})),this.subs.push(this.characters$.pipe(Rc()).subscribe(s=>{this.activities=[],s.forEach(o=>{const a={destinyMembershipId:o.membershipId,membershipType:o.membershipType,characterId:o.characterId,mode:0,count:250};this.addHistorySub({...a,page:0}),this.addHistorySub({...a,page:1}),this.addHistorySub({...a,page:2})})}))}addHistorySub(e){const t={loading:!0};this.loadingArray.push(t);const{page:i}=e,r=new Zi(void 0);this.bungieQueue.addToQueue("getActivityHistory",d8,a=>{r.next(a)},e),this.subs.push(r.subscribe(a=>{1!==a?.ErrorCode&&a?.ErrorStatus&&(this.errorStatus=a.ErrorStatus,this.errorMessage=a.Message),a?.Response.activities&&a?.Response.activities.length&&(this.addHistorySub({...e,page:i+3}),a.Response.activities.forEach(c=>{c.characterId=e.characterId;const p=(new Date(c.period).getTime()-612e5)/1e3+c.values.startSeconds.basic.value,g=p+c.values.timePlayedSeconds.basic.value;c.startDate=new Date(1e3*p),c.endDate=new Date(1e3*g),this.activities.push(c);try{this.days[c.startDate.getUTCFullYear()][c.startDate.getUTCMonth()+1][c.startDate.getUTCDate()].activities.push(c),c.endDate>this.oneYearAgo&&(c.activityDetails.modes.forEach(_=>{this.modeTrends[_]||(this.modeTrends[_]={quarter:[],year:[]}),this.modeTrends[_].year.push(c),c.endDate>this.oneQuarterAgo&&this.modeTrends[_].quarter.push(c)}),this.overallTrend.year.push(c),c.endDate>this.oneQuarterAgo&&this.overallTrend.quarter.push(c))}catch{}this.flatDaysBS.next(this.flatDays)})),a&&(t.loading=!1,this.flatDaysBS.next(this.flatDays))}))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}seasonActivities(e){return e.reduce((t,i)=>t.concat(i.activities),[])}three(e,t,i){this.zone.runOutsideAngular(r=>{let s,o,a,c,d,p,g,_,y;for(let N=1;N<=i;N++)s=document.getElementById("download"+N),s.setAttribute("disabled","true");s=document.getElementById("download"+e.number),s.innerHTML="Generating...";const x=2.5;!function T(){const N=new hE,I=2.5,A=Math.sqrt(7.25-5*Math.cos(Math.PI/2)),H=Math.acos((A*A+I*I-1)/(2*A*I));d=Math.ceil(e.days.length/7+2)*x,p=I*x,g=9*x,o=new Yu(d,p,g);const G=new zE;a=new gr(o,G);const X=a.geometry.getAttribute("position");X.setXYZ(2,X.getX(2)+x,X.getY(2),X.getZ(2)+x),X.setXYZ(3,X.getX(3)+x,X.getY(3),X.getZ(3)-x),X.setXYZ(6,X.getX(6)-x,X.getY(6),X.getZ(6)-x),X.setXYZ(7,X.getX(7)-x,X.getY(7),X.getZ(7)+x),X.setXYZ(12,X.getX(12)-x,X.getY(12),X.getZ(12)+x),X.setXYZ(13,X.getX(13)+x,X.getY(13),X.getZ(13)+x),X.setXYZ(14,X.getX(14)-x,X.getY(14),X.getZ(14)-x),X.setXYZ(15,X.getX(15)+x,X.getY(15),X.getZ(15)-x),X.setXYZ(18,X.getX(18)-x,X.getY(18),X.getZ(18)+x),X.setXYZ(19,X.getX(19)+x,X.getY(19),X.getZ(19)+x),X.setXYZ(22,X.getX(22)+x,X.getY(22),X.getZ(22)-x),X.setXYZ(23,X.getX(23)-x,X.getY(23),X.getZ(23)-x),d=(Math.ceil(e.days.length/7+2)/2-1.5)*x,p=-p/2,g=7.5,a.position.set(d,p,g),a.updateMatrix();for(let K=0;K<e.days.length;K++){const he=K,De=e.days[K];if(De.activities.length){const ge=De.activities.reduce((Ze,Pe)=>Ze+Pe.values.timePlayedSeconds.basic.value,0)/86400*24;d=2.5,p=ge*x,g=2.5,o=new Yu(d,p,g),c=new gr(o,G),d=(Math.floor(he/7)-52*Math.floor(he/364))*x,p=ge/2*x,g=(he%7+7*Math.floor(he/364))*x,c.position.set(d,p,g),c.updateMatrix(),a=_r.union(a,c)}}(new Fle).load("assets/fonts/helvetiker_bold.typeface.json",function(K){_=2.5,y=.625,o=new nM(e.name,{font:K,size:_,height:y}),o.computeBoundingBox(),d=((Math.ceil(e.days.length/7)-o.boundingBox.max.x/x)/2-.5)*x,p=-4.375,g=20.5,c=new gr(o,G),c.position.set(d,p,g),c.rotateX(-H),c.updateMatrix(),a=_r.union(a,c),c.geometry.dispose(),o=new nM(t,{font:K,size:_,height:y}),c=new gr(o,G),o.computeBoundingBox(),d=((Math.ceil(e.days.length/7)-o.boundingBox.max.x/x)/2-.5+o.boundingBox.max.x/x)*x,p=-4.375,g=-5.5,c.position.set(d,p,g),c.rotateX(H),c.rotateY(Math.PI),c.updateMatrix(),a=_r.union(a,c),e.startDateString&&(o=new nM(e.startDateString,{font:K,size:_,height:y}),c=new gr(o,G),o.computeBoundingBox(),d=-5.5,p=-4.375,g=((7-o.boundingBox.max.x/x)/2-.5)*x,c.position.set(d,p,g),c.rotateZ(-H),c.rotateY(-Math.PI/2),c.updateMatrix(),a=_r.union(a,c)),e.endDateString&&(o=new nM(e.endDateString,{font:K,size:_,height:y,curveSegments:12,bevelEnabled:!0,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0}),c=new gr(o,G),o.computeBoundingBox(),d=(Math.ceil(e.days.length/7)+1.2)*x,p=-4.375,g=((7-o.boundingBox.max.x/x)/2-.5+o.boundingBox.max.x/x)*x,c.position.set(d,p,g),c.rotateZ(H),c.rotateY(Math.PI/2),c.updateMatrix(),a=_r.union(a,c)),a.geometry.rotateX(Math.PI/2),a.updateMatrix(),N.add(a);const he=new Ile,De=document.createElement("a");De.style.display="none",document.body.appendChild(De);const Te=he.parse(N);De.href=URL.createObjectURL(new Blob([Te],{type:"text/plain"})),De.download=`${e.name}.stl`,De.click(),N.remove(a),a.geometry.dispose(),s.innerHTML="Download STL";for(let ge=1;ge<=i;ge++)s=document.getElementById("download"+ge),s.removeAttribute("disabled")})}()})}getModeTrends(){return Object.keys(this.modeTrends).map(e=>({mode:Number(e),quarter:Math.round(this.modeTrends[Number(e)].quarter.reduce((t,i)=>t+(i.endDate-i.startDate),0)/13),year:Math.round(this.modeTrends[Number(e)].year.reduce((t,i)=>t+(i.endDate-i.startDate),0)/52)})).sort((e,t)=>t.year-e.year).sort((e,t)=>t.quarter-e.quarter).map(e=>({...e,quarter:Math.round(e.quarter/6e4),year:Math.round(e.year/6e4)}))}getOverallTrend(){return{quarter:Math.round(this.overallTrend.quarter.reduce((e,t)=>e+(t.endDate-t.startDate),0)/13/6e4),year:Math.round(this.overallTrend.year.reduce((e,t)=>e+(t.endDate-t.startDate),0)/52/6e4)}}}qy.\u0275fac=function(e){return new(e||qy)(ae(Dc),ae(Lw),ae(rh),ae(Yf),ae(Uu),ae(cn))},qy.\u0275cmp=ai({type:qy,selectors:[["app-guardian-3d"]],decls:59,vars:40,consts:[["appearance","outlined","class","errorStatus",4,"ngIf"],[1,"mat-body-2"],[1,"mat-subtitle-2"],["aria-label","Search for Guardian","class","spinner",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"calYear"],["class","calMonth",3,"ngStyle",4,"ngFor","ngForOf"],[1,"trends-header"],["class","trending_loading",4,"ngIf"],["class","trends",4,"ngIf"],["appearance","outlined",1,"errorStatus"],["aria-label","Search for Guardian",1,"spinner"],[3,"value"],[1,"calMonth",3,"ngStyle"],[1,"monthLabel","mat-caption"],["class","monthLabel mat-caption",4,"ngIf"],[1,"dayWrapper",3,"ngClass"],["class","calDay",3,"ngClass","ngStyle","matTooltip",4,"ngFor","ngForOf"],["mat-button","","class","downloadButtons",3,"disabled","id","click",4,"ngIf"],[1,"calDay",3,"ngClass","ngStyle","matTooltip"],["mat-button","",1,"downloadButtons",3,"disabled","id","click"],[1,"trending_loading"],[1,"trends"],[1,"trend"],["class","trend-up",4,"ngIf"],["class","trend-flat",4,"ngIf"],["class","trend-down",4,"ngIf"],[1,"trend-main"],[1,"trend-header"],[1,"trend-name"],[1,"trend-values"],[1,"trend-quarter"],[1,"trend-value"],[1,"trend-time"],[1,"trend-year"],[4,"ngFor","ngForOf"],[1,"trend-up"],[1,"trend-flat"],[1,"trend-down"],["class","trend",4,"ngIf"],[1,"trend-icon",3,"src","alt"]],template:function(e,t){1&e&&(Ot(0,kle,5,2,"mat-card",0),Oe(1,"div",1),et(2," Name: "),Oe(3,"span",2),et(4),Ne(),vn(5,"br"),et(6," Total Time in Destiny 2: "),Oe(7,"span",2),et(8),ft(9,"hoursPlayed"),ft(10,"async"),Ne(),et(11," = "),Oe(12,"span",2),et(13),ft(14,"parseMinutesPlayed"),ft(15,"async"),Ne(),vn(16,"br"),et(17," Total Time in Activities: "),Oe(18,"span",2),et(19),ft(20,"activitiesTotalHours"),Ne(),et(21," = "),Oe(22,"span",2),et(23),ft(24,"activitiesTotalTime"),Ne(),vn(25,"br"),et(26," Destiny 2 Activity Count: "),Oe(27,"span",2),et(28),Ne(),Ot(29,Ole,2,0,"mat-icon",3),ft(30,"loadingReduce"),vn(31,"br"),et(32),ft(33,"currentStreak"),vn(34,"br"),et(35),ft(36,"longestStreaks"),vn(37,"br"),et(38," STL Download Buttons: "),Oe(39,"mat-checkbox",4),ni("ngModelChange",function(r){return t.downloadButtons=r}),Ne(),vn(40,"br"),et(41," Points of Interest: "),Oe(42,"mat-checkbox",4),ni("ngModelChange",function(r){return t.poi=r}),Ne(),vn(43,"br"),et(44," Seasonal Times: "),Oe(45,"mat-checkbox",4),ni("ngModelChange",function(r){return t.seasonTimes=r}),Ne(),vn(46,"br"),et(47," Filter Heatmap: "),Oe(48,"mat-form-field")(49,"mat-select",4),ni("ngModelChange",function(r){return t.calendarFilter=r}),Ot(50,Lle,4,7,"mat-option",5),Ne()()(),Oe(51,"div",6),Ot(52,Gle,8,10,"div",7),Ne(),Oe(53,"h3",8),et(54,"Trends"),Ne(),Ot(55,jle,2,0,"mat-icon",9),ft(56,"loadingReduce"),Ot(57,Qle,24,12,"div",10),ft(58,"loadingReduce")),2&e&&(Qe("ngIf",t.errorStatus),Ge(4),$i(t.displayName),Ge(4),$i(mn(9,18,mn(10,20,t.minutesPlayedTotal))),Ge(5),$i(mn(14,22,mn(15,24,t.minutesPlayedTotal))),Ge(6),$i(mn(20,26,t.activities)),Ge(4),$i(mn(24,28,t.activities)),Ge(5),$i(t.activities.length),Ge(1),Qe("ngIf",mn(30,30,t.loadingArray)),Ge(3),vs(" Current Streak: ",mn(33,32,t.flatDays),""),Ge(3),vs(" Longest Streaks: ",mn(36,34,t.flatDays),""),Ge(4),Qe("ngModel",t.downloadButtons),Ge(3),Qe("ngModel",t.poi),Ge(3),Qe("ngModel",t.seasonTimes),Ge(4),Qe("ngModel",t.calendarFilter),Ge(1),Qe("ngForOf",t.modeOptions),Ge(2),Qe("ngForOf",t.seasons),Ge(3),Qe("ngIf",mn(56,36,t.loadingArray)),Ge(2),Qe("ngIf",!mn(58,38,t.loadingArray)))},dependencies:[Jm,y_,Df,j1,jL,eN,VT,HT,JN,t4,xT,Cw,ST,wT,GD,hw,Tf,h3,$f,qf,xg,wg,Sg,Eg,Kf,Mg,Cg,Dg],styles:['.calYear[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:1em}.calMonth[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:.5em;margin-bottom:.5em}.dayWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:7em;flex-wrap:wrap}.calDay[_ngcontent-%COMP%]{display:block;width:1em;height:1em;box-sizing:border-box;cursor:pointer;transition:transform .2s;background-position:center;background-size:16px}.calDay[_ngcontent-%COMP%]:hover.icon{transform:scale(1.5);z-index:999;box-shadow:0 0 8px 3px #696969;opacity:1}.calDay[_ngcontent-%COMP%]:before{content:" ";top:0;left:0;width:100%;height:100%;filter:invert(1);display:block;-webkit-mask-size:contain;mask-size:contain}.calDay.red-war[_ngcontent-%COMP%]:before{-webkit-mask-image:url(red-war.3eff2acca21c93ca.png);mask-image:url(red-war.3eff2acca21c93ca.png);background-color:inherit}.calDay.curse-of-osiris[_ngcontent-%COMP%]:before{-webkit-mask-image:url(curse-of-osiris.6c410487c8c1193b.png);mask-image:url(curse-of-osiris.6c410487c8c1193b.png);background-color:inherit}.calDay.dawning[_ngcontent-%COMP%]:before{-webkit-mask-image:url(dawning.645be67ef31d090a.png);mask-image:url(dawning.645be67ef31d090a.png);background-color:inherit}.calDay.crimson-days[_ngcontent-%COMP%]:before{-webkit-mask-image:url(crimson-days.aa88f4d939be6b4f.png);mask-image:url(crimson-days.aa88f4d939be6b4f.png);background-color:inherit}.calDay.warmind[_ngcontent-%COMP%]:before{-webkit-mask-image:url(warmind.af5f3877c551d0a9.png);mask-image:url(warmind.af5f3877c551d0a9.png);background-color:inherit}.calDay.moments-of-triumph[_ngcontent-%COMP%]:before{-webkit-mask-image:url(moments-of-triumph.3dd2b9684009007a.png);mask-image:url(moments-of-triumph.3dd2b9684009007a.png);background-color:inherit}.calDay.solstice[_ngcontent-%COMP%]:before{-webkit-mask-image:url(solstice.cb7917ad27da3310.png);mask-image:url(solstice.cb7917ad27da3310.png);background-color:inherit}.calDay.forsaken[_ngcontent-%COMP%]:before{-webkit-mask-image:url(forsaken.f61a352f91528263.png);mask-image:url(forsaken.f61a352f91528263.png);background-color:inherit}.calDay.festival-of-the-lost[_ngcontent-%COMP%]:before{-webkit-mask-image:url(festival-of-the-lost.656fb66ff23db261.png);mask-image:url(festival-of-the-lost.656fb66ff23db261.png);background-color:inherit}.calDay.season-of-the-forge[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-forge.a88ddb98b2a97a0e.png);mask-image:url(season-of-the-forge.a88ddb98b2a97a0e.png);background-color:inherit}.calDay.season-of-the-drifter[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-drifter.1867ff7e8c88eda5.png);mask-image:url(season-of-the-drifter.1867ff7e8c88eda5.png);background-color:inherit}.calDay.revelry[_ngcontent-%COMP%]:before{-webkit-mask-image:url(revelry.4a84f0f680e2599d.png);mask-image:url(revelry.4a84f0f680e2599d.png);background-color:inherit}.calDay.season-of-opulence[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-opulence.3b878d66365d9cc6.png);mask-image:url(season-of-opulence.3b878d66365d9cc6.png);background-color:inherit}.calDay.shadowkeep[_ngcontent-%COMP%]:before{-webkit-mask-image:url(shadowkeep.2412f7e9615345e8.png);mask-image:url(shadowkeep.2412f7e9615345e8.png);background-color:inherit}.calDay.season-of-the-undying[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-undying.a0948d4e1e5532ab.png);mask-image:url(season-of-the-undying.a0948d4e1e5532ab.png);background-color:inherit}.calDay.season-of-dawn[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-dawn.152fa5fa97203b11.png);mask-image:url(season-of-dawn.152fa5fa97203b11.png);background-color:inherit}.calDay.season-of-the-worthy[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-worthy.97fe2af14ad98313.png);mask-image:url(season-of-the-worthy.97fe2af14ad98313.png);background-color:inherit}.calDay.guardian-games[_ngcontent-%COMP%]:before{-webkit-mask-image:url(guardian-games.1458a297ee32ae52.png);mask-image:url(guardian-games.1458a297ee32ae52.png);background-color:inherit}.calDay.season-of-arrivals[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-arrivals.649a4db068c154bf.png);mask-image:url(season-of-arrivals.649a4db068c154bf.png);background-color:inherit}.calDay.beyond-light[_ngcontent-%COMP%]:before{-webkit-mask-image:url(beyond-light.8fb053c5e78ee3c1.png);mask-image:url(beyond-light.8fb053c5e78ee3c1.png);background-color:inherit}.calDay.season-of-the-hunt[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-hunt.23c0a09811c2dd46.png);mask-image:url(season-of-the-hunt.23c0a09811c2dd46.png);background-color:inherit}.calDay.season-of-the-chosen[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-chosen.9d73f0c6a48c8b28.png);mask-image:url(season-of-the-chosen.9d73f0c6a48c8b28.png);background-color:inherit}.calDay.season-of-the-splicer[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-splicer.5cff32b822f61b20.png);mask-image:url(season-of-the-splicer.5cff32b822f61b20.png);background-color:inherit}.calDay.season-of-the-lost[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-lost.10a416eb34d1915e.png);mask-image:url(season-of-the-lost.10a416eb34d1915e.png);background-color:inherit}.calDay.thirtieth-anniversary[_ngcontent-%COMP%]:before{-webkit-mask-image:url(thirtieth-anniversary.3aa725ceedf9157d.png);mask-image:url(thirtieth-anniversary.3aa725ceedf9157d.png);background-color:inherit}.calDay.witch-queen[_ngcontent-%COMP%]:before{-webkit-mask-image:url(witch-queen.4fdd67baed2eb636.png);mask-image:url(witch-queen.4fdd67baed2eb636.png);background-color:inherit}.calDay.season-of-the-haunted[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-haunted.d4556f3df7022cf7.png);mask-image:url(season-of-the-haunted.d4556f3df7022cf7.png);background-color:inherit}.calDay.iron-banner[_ngcontent-%COMP%]:before{-webkit-mask-image:url(iron-banner.0cccf5ef6d1f8153.png);mask-image:url(iron-banner.0cccf5ef6d1f8153.png);background-color:inherit}.calDay.solstice2022[_ngcontent-%COMP%]:before{-webkit-mask-image:url(solstice2022.4129b7a862b1dd62.png);mask-image:url(solstice2022.4129b7a862b1dd62.png);background-color:inherit}.calDay.raid[_ngcontent-%COMP%]:before{-webkit-mask-image:url(raid.c24a762febb5d48f.png);mask-image:url(raid.c24a762febb5d48f.png);background-color:inherit}.calDay.season-of-plunder[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-plunder.a82a4f350d3ff629.png);mask-image:url(season-of-plunder.a82a4f350d3ff629.png);background-color:inherit}.calDay.dungeon[_ngcontent-%COMP%]:before{-webkit-mask-image:url(dungeon.1e3bb371bcf5c37b.png);mask-image:url(dungeon.1e3bb371bcf5c37b.png);background-color:inherit}.calDay.season-of-the-seraph[_ngcontent-%COMP%]:before{-webkit-mask-image:url(season-of-the-seraph.30ab5d205a09f6c4.png);mask-image:url(season-of-the-seraph.30ab5d205a09f6c4.png);background-color:inherit}.calDay.lightfall[_ngcontent-%COMP%]:before{-webkit-mask-image:url(lightfall.cbc105e4dbc42ae7.png);mask-image:url(lightfall.cbc105e4dbc42ae7.png);background-color:inherit}@media (prefers-reduced-motion){.calDay[_ngcontent-%COMP%]{transition:none}.calDay[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none;background-image:none}}.loading[_ngcontent-%COMP%] > .calDay[_ngcontent-%COMP%]{cursor:progress}.yearLabel[_ngcontent-%COMP%]{display:flex;align-items:center}.yearLabel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;transform:rotate(-90deg)}.monthSpacer[_ngcontent-%COMP%]{width:1em}.monthLabel[_ngcontent-%COMP%]{font-size:.75em;min-width:13em;text-align:center}.downloadButtons[_ngcontent-%COMP%]{font-size:.75em;min-width:12em}.release[_ngcontent-%COMP%]:before{width:100%;height:100%}.raid[_ngcontent-%COMP%]:before, .event[_ngcontent-%COMP%]:before{width:100%;height:100%}@media (prefers-color-scheme: dark){.inactive[_ngcontent-%COMP%]{opacity:.15}}.spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 3s infinite linear;height:1em;width:1em;display:inline-block;line-height:1em;font-size:.75em}@keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_spinX{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.errorStatus[_ngcontent-%COMP%]{margin-bottom:.5em}.trends-header[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.trending_loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 3s infinite linear}.trends[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;display:flex;flex-wrap:wrap;gap:1em}.trends[_ngcontent-%COMP%]   .trend-up[_ngcontent-%COMP%]{color:green}.trends[_ngcontent-%COMP%]   .trend-down[_ngcontent-%COMP%]{color:red}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75em;min-width:17em}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25em}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:1em}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-time[_ngcontent-%COMP%]{font-size:.75em;opacity:.6}.trends[_ngcontent-%COMP%]   .trend[_ngcontent-%COMP%]   .trend-values[_ngcontent-%COMP%]{display:flex;gap:.75em}']});class Ky{constructor(){}ngOnInit(){}}function eue(n,e){if(1&n&&(Oe(0,"mat-card",1),et(1),Ne()),2&n){const t=e.$implicit;Ge(1),vs(" ",t.AlertHtml,"\n")}}Ky.\u0275fac=function(e){return new(e||Ky)},Ky.\u0275cmp=ai({type:Ky,selectors:[["app-footer"]],decls:8,vars:0,consts:[[1,"mat-caption"],["href","https://mastodon.chateaude.luxe/@chrisfried","target","_blank"],["href","https://guardian.theater/","target","_blank"]],template:function(e,t){1&e&&(Oe(0,"span",0),et(1,"Brought to you by "),Oe(2,"a",1),et(3,"that guy"),Ne(),et(4," that made "),Oe(5,"a",2),et(6,"that other thing"),Ne(),et(7,"."),Ne())}});class Yy{constructor(e){this.http=e}ngOnInit(){this.bungieStatus=new Zi([]),this.bungieSub=this.http.get("https://www.bungie.net/Platform/GlobalAlerts/").pipe(ra(e=>Pc(e.error||"Server error"))).subscribe(e=>{try{this.bungieStatus.next(e.Response)}catch{}})}}function tue(n,e){1&n&&vn(0,"app-guardian")}function nue(n,e){1&n&&vn(0,"app-guardian-3d")}Yy.\u0275fac=function(e){return new(e||Yy)(ae($d))},Yy.\u0275cmp=ai({type:Yy,selectors:[["app-bungie-status"]],decls:2,vars:3,consts:[["appearance","outlined",4,"ngFor","ngForOf"],["appearance","outlined"]],template:function(e,t){1&e&&(Ot(0,eue,2,1,"mat-card",0),ft(1,"async")),2&e&&Qe("ngForOf",mn(1,1,t.bungieStatus))},dependencies:[y_,Cw,Tf]});class Xy{calendarChange(e){this.calendar=e}constructor(e){this.bungieAuth=e}}Xy.\u0275fac=function(e){return new(e||Xy)(ae(Uu))},Xy.\u0275cmp=ai({type:Xy,selectors:[["app-root"]],decls:9,vars:7,consts:[[1,"appWrapper"],[1,"bungieStatus"],[1,"nav",3,"calendar","calendarChange"],[4,"ngIf"],[1,"footer"]],template:function(e,t){1&e&&(Oe(0,"div",0),vn(1,"app-bungie-status",1),Oe(2,"app-nav",2),ni("calendarChange",function(r){return t.calendarChange(r)}),Ne(),Ot(3,tue,1,0,"app-guardian",3),ft(4,"async"),Ot(5,nue,1,0,"app-guardian-3d",3),ft(6,"async"),vn(7,"br")(8,"app-footer",4),Ne()),2&e&&(Ge(2),Qe("calendar",t.calendar),Ge(1),Qe("ngIf",mn(4,3,"gregorian"===t.calendar&&t.bungieAuth.hasValidAccessToken$)),Ge(2),Qe("ngIf",mn(6,5,"bungie"===t.calendar&&t.bungieAuth.hasValidAccessToken$)))},dependencies:[Df,uy,py,qy,Ky,Yy,Tf],styles:[".appWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;min-height:100%;top:0;left:.5em}.bungieStatus[_ngcontent-%COMP%], .nav[_ngcontent-%COMP%]{margin-top:.5em}.content[_ngcontent-%COMP%]{flex-grow:1}.footer[_ngcontent-%COMP%]{margin-bottom:.5em}"]});class Zy{constructor(){}ngOnInit(){}}Zy.\u0275fac=function(e){return new(e||Zy)},Zy.\u0275cmp=ai({type:Zy,selectors:[["app-front-page"]],decls:2,vars:0,consts:[[1,"mat-body-2"]],template:function(e,t){1&e&&(Oe(0,"p",0),et(1,"Welcome back, Guardian."),Ne())}});const iue=[{path:"",component:Zy},{path:"**",redirectTo:"",pathMatch:"full"}];class S0{}S0.\u0275fac=function(e){return new(e||S0)},S0.\u0275mod=Mt({type:S0}),S0.\u0275inj=Wn({imports:[a8.forRoot(iue,{}),a8]});const mp=void 0,sue=["en",[["a","p"],["AM","PM"],mp],[["AM","PM"],mp,mp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mp,"{1} 'at' {0}",mp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rue(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}],os=void 0,dV=["fr",[["AM","PM"],os,os],os,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]],os,[["av. J.-C.","ap. J.-C."],os,["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xe0' {0}",os],[",","\u202f",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[os,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[os,"\xa5"],COP:["$CO","$"],CYP:["\xa3CY"],EGP:[os,"\xa3E"],FJD:["$FJ","$"],FKP:["\xa3FK","\xa3"],FRF:["F"],GBP:["\xa3GB","\xa3"],GIP:["\xa3GI","\xa3"],HKD:[os,"$"],IEP:["\xa3IE"],ILP:["\xa3IL"],ITL:["\u20a4IT"],JPY:[os,"\xa5"],KMF:[os,"FC"],LBP:["\xa3LB","\xa3L"],MTP:["\xa3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[os,"$C"],NZD:["$NZ","$"],PHP:[os,"\u20b1"],RHD:["$RH"],RON:[os,"L"],RWF:[os,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[os,"$T"],TTD:["$TT","$"],TWD:[os,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[os,"$"],XPF:["FCFP"],ZMW:[os,"Kw"]},"ltr",function oue(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 0===t||1===t?1:0===r&&0!==t&&t%1e6==0&&0===i||!(r>=0&&r<=5)?4:5}],ar=void 0,hV=["es",[["a.\xa0m.","p.\xa0m."],ar,ar],ar,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],ar,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],ar,[["a. C.","d. C."],ar,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",ar,ar,ar],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[ar,"$"],BRL:[ar,"R$"],BYN:[ar,"\u0440."],CAD:[ar,"$"],CNY:[ar,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[ar,"\xa3"],HKD:[ar,"$"],ILS:[ar,"\u20aa"],INR:[ar,"\u20b9"],JPY:[ar,"\xa5"],KRW:[ar,"\u20a9"],MXN:[ar,"$"],NZD:[ar,"$"],PHP:[ar,"\u20b1"],RON:[ar,"L"],THB:["\u0e3f"],TWD:[ar,"NT$"],USD:["US$","$"],XAF:[],XCD:[ar,"$"],XOF:[]},"ltr",function aue(n){const e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===e?1:0===r&&0!==t&&t%1e6==0&&0===i||!(r>=0&&r<=5)?4:5}],sc=void 0,lue=["pt",[["AM","PM"],sc,sc],sc,[["D","S","T","Q","Q","S","S"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xe1b."],["domingo","segunda-feira","ter\xe7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xe1bado"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xe1b."]],sc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]],sc,[["a.C.","d.C."],sc,["antes de Cristo","depois de Cristo"]],0,[6,0],["dd/MM/y","d 'de' MMM 'de' y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",sc,sc,sc],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4\xa0#,##0.00","#E0"],"BRL","R$","Real brasileiro",{AUD:["AU$","$"],BYN:[sc,"\u0440."],JPY:["JP\xa5","\xa5"],PHP:[sc,"\u20b1"],PTE:["Esc."],RON:[sc,"L"],SYP:[sc,"S\xa3"],THB:["\u0e3f"],TWD:["NT$"],USD:["US$","$"]},"ltr",function cue(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===Math.floor(t)&&t>=0&&t<=1?1:0===r&&0!==t&&t%1e6==0&&0===i||!(r>=0&&r<=5)?4:5}],wa=void 0,fV=["zh",[["\u4e0a\u5348","\u4e0b\u5348"],wa,wa],wa,[["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"]],wa,[["1","2","3","4","5","6","7","8","9","10","11","12"],["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]],wa,[["\u516c\u5143\u524d","\u516c\u5143"],wa,wa],0,[6,0],["y/M/d","y\u5e74M\u6708d\u65e5",wa,"y\u5e74M\u6708d\u65e5EEEE"],["HH:mm","HH:mm:ss","z HH:mm:ss","zzzz HH:mm:ss"],["{1} {0}",wa,wa,wa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"CNY","\xa5","\u4eba\u6c11\u5e01",{AUD:["AU$","$"],BYN:[wa,"\u0440."],CNY:["\xa5"],ILR:["ILS"],JPY:["JP\xa5","\xa5"],KRW:["\uffe6","\u20a9"],PHP:[wa,"\u20b1"],RUR:[wa,"\u0440."],TWD:["NT$"],USD:["US$","$"],XXX:[]},"ltr",function uue(n){return 5}],no=void 0,pV=["de",[["AM","PM"],no,no],no,[["S","M","D","M","D","F","S"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["S","M","D","M","D","F","S"],["So","Mo","Di","Mi","Do","Fr","Sa"],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan.","Feb.","M\xe4rz","Apr.","Mai","Juni","Juli","Aug.","Sept.","Okt.","Nov.","Dez."],["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","M\xe4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["v. Chr.","n. Chr."],no,no],1,[6,0],["dd.MM.yy","dd.MM.y","d. MMMM y","EEEE, d. MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",no,"{1} 'um' {0}",no],[",",".",";","%","+","-","E","\xb7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","Euro",{ATS:["\xf6S"],AUD:["AU$","$"],BGM:["BGK"],BGO:["BGJ"],BYN:[no,"\u0440."],CUC:[no,"Cub$"],DEM:["DM"],FKP:[no,"Fl\xa3"],GHS:[no,"\u20b5"],GNF:[no,"F.G."],KMF:[no,"FC"],PHP:[no,"\u20b1"],RON:[no,"L"],RUR:[no,"\u0440."],RWF:[no,"F.Rw"],SYP:[],THB:["\u0e3f"],TWD:["NT$"],XXX:[],ZMW:[no,"K"]},"ltr",function due(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}],oa=void 0,mV=["ja",[["\u5348\u524d","\u5348\u5f8c"],oa,oa],oa,[["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],oa,["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"]],oa,[["1","2","3","4","5","6","7","8","9","10","11","12"],["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],oa],oa,[["BC","AD"],["\u7d00\u5143\u524d","\u897f\u66a6"],oa],0,[6,0],["y/MM/dd",oa,"y\u5e74M\u6708d\u65e5","y\u5e74M\u6708d\u65e5EEEE"],["H:mm","H:mm:ss","H:mm:ss z","H\u6642mm\u5206ss\u79d2 zzzz"],["{1} {0}",oa,oa,oa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"JPY","\uffe5","\u65e5\u672c\u5186",{BYN:[oa,"\u0440."],CNY:["\u5143","\uffe5"],JPY:["\uffe5"],PHP:[oa,"\u20b1"],RON:[oa,"\u30ec\u30a4"],XXX:[]},"ltr",function hue(n){return 5}],Sa=void 0,gV=["ko",[["AM","PM"],Sa,["\uc624\uc804","\uc624\ud6c4"]],Sa,[["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],Sa,["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"]],Sa,[["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],Sa,Sa],Sa,[["BC","AD"],Sa,["\uae30\uc6d0\uc804","\uc11c\uae30"]],0,[6,0],["yy. M. d.","y. M. d.","y\ub144 M\uc6d4 d\uc77c","y\ub144 M\uc6d4 d\uc77c EEEE"],["a h:mm","a h:mm:ss","a h\uc2dc m\ubd84 s\ucd08 z","a h\uc2dc m\ubd84 s\ucd08 zzzz"],["{1} {0}",Sa,Sa,Sa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"KRW","\u20a9","\ub300\ud55c\ubbfc\uad6d \uc6d0",{AUD:["AU$","$"],BYN:[Sa,"\u0440."],JPY:["JP\xa5","\xa5"],PHP:[Sa,"\u20b1"],RON:[Sa,"L"],TWD:["NT$"],USD:["US$","$"]},"ltr",function fue(n){return 5}],io=void 0,vV=["it",[["m.","p."],["AM","PM"],io],io,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xec","marted\xec","mercoled\xec","gioved\xec","venerd\xec","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],io,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],io,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",io,"{1} {0}",io],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{BRL:[io,"R$"],BYN:[io,"Br"],EGP:[io,"\xa3E"],HKD:[io,"$"],INR:[io,"\u20b9"],JPY:[io,"\xa5"],KRW:[io,"\u20a9"],MXN:[io,"$"],NOK:[io,"NKr"],THB:["\u0e3f"],TWD:[io,"NT$"],USD:[io,"$"],VND:[io,"\u20ab"]},"ltr",function pue(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===t&&0===i?1:0===r&&0!==t&&t%1e6==0&&0===i||!(r>=0&&r<=5)?4:5}],gl=void 0,_V=["ru",[["AM","PM"],gl,gl],gl,[["\u0412","\u041f","\u0412","\u0421","\u0427","\u041f","\u0421"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"]],gl,[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440.","\u0430\u043f\u0440.","\u043c\u0430\u044f","\u0438\u044e\u043d.","\u0438\u044e\u043b.","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"]],[["\u042f","\u0424","\u041c","\u0410","\u041c","\u0418","\u0418","\u0410","\u0421","\u041e","\u041d","\u0414"],["\u044f\u043d\u0432.","\u0444\u0435\u0432\u0440.","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440.","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433.","\u0441\u0435\u043d\u0442.","\u043e\u043a\u0442.","\u043d\u043e\u044f\u0431.","\u0434\u0435\u043a."],["\u044f\u043d\u0432\u0430\u0440\u044c","\u0444\u0435\u0432\u0440\u0430\u043b\u044c","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440\u0435\u043b\u044c","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u043e\u043a\u0442\u044f\u0431\u0440\u044c","\u043d\u043e\u044f\u0431\u0440\u044c","\u0434\u0435\u043a\u0430\u0431\u0440\u044c"]],[["\u0434\u043e \u043d.\u044d.","\u043d.\u044d."],["\u0434\u043e \u043d. \u044d.","\u043d. \u044d."],["\u0434\u043e \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430","\u043e\u0442 \u0420\u043e\u0436\u0434\u0435\u0441\u0442\u0432\u0430 \u0425\u0440\u0438\u0441\u0442\u043e\u0432\u0430"]],1,[6,0],["dd.MM.y","d MMM y '\u0433'.","d MMMM y '\u0433'.","EEEE, d MMMM y '\u0433'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",gl,gl,gl],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","\u043d\u0435\xa0\u0447\u0438\u0441\u043b\u043e",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"RUB","\u20bd","\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0440\u0443\u0431\u043b\u044c",{BYN:[gl,"\u0440."],GEL:[gl,"\u10da"],PHP:[gl,"\u20b1"],RON:[gl,"L"],RUB:["\u20bd"],RUR:["\u0440."],THB:["\u0e3f"],TMT:["\u0422\u041c\u0422"],TWD:["NT$"],UAH:["\u20b4"],XXX:["XXXX"]},"ltr",function mue(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 0===i&&t%10==1&&t%100!=11?1:0===i&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?3:0===i&&t%10==0||0===i&&t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===i&&t%100===Math.floor(t%100)&&t%100>=11&&t%100<=14?4:5}],as=void 0,yV=["pl",[["a","p"],["AM","PM"],as],as,[["n","p","w","\u015b","c","p","s"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["N","P","W","\u015a","C","P","S"],["niedz.","pon.","wt.","\u015br.","czw.","pt.","sob."],["niedziela","poniedzia\u0142ek","wtorek","\u015broda","czwartek","pi\u0105tek","sobota"],["nie","pon","wto","\u015bro","czw","pi\u0105","sob"]],[["s","l","m","k","m","c","l","s","w","p","l","g"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze\u015bnia","pa\u017adziernika","listopada","grudnia"]],[["S","L","M","K","M","C","L","S","W","P","L","G"],["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017a","lis","gru"],["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017adziernik","listopad","grudzie\u0144"]],[["p.n.e.","n.e."],as,["przed nasz\u0105 er\u0105","naszej ery"]],1,[6,0],["d.MM.y","d MMM y","d MMMM y","EEEE, d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",as,"{1} {0}",as],[",","\xa0",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xa0\xa4","#E0"],"PLN","z\u0142","z\u0142oty polski",{AUD:[as,"$"],CAD:[as,"$"],CNY:[as,"\xa5"],GBP:[as,"\xa3"],HKD:[as,"$"],ILS:[as,"\u20aa"],INR:[as,"\u20b9"],JPY:[as,"\xa5"],KRW:[as,"\u20a9"],MXN:[as,"$"],NZD:[as,"$"],PHP:[as,"\u20b1"],PLN:["z\u0142"],RON:[as,"lej"],TWD:[as,"NT$"],USD:[as,"$"],VND:[as,"\u20ab"]},"ltr",function gue(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:0===i&&t%10===Math.floor(t%10)&&t%10>=2&&t%10<=4&&!(t%100>=12&&t%100<=14)?3:0===i&&1!==t&&t%10===Math.floor(t%10)&&t%10>=0&&t%10<=1||0===i&&t%10===Math.floor(t%10)&&t%10>=5&&t%10<=9||0===i&&t%100===Math.floor(t%100)&&t%100>=12&&t%100<=14?4:5}];let Ms="en";bs(sue),navigator.languages.some(n=>{switch(n.toLowerCase()){case"pt-br":return bs(lue),Ms=n,!0;case"zh-cht":case"zh-chs":return bs(fV),Ms=n,!0;case"fr":return bs(dV),Ms=n,!0;case"es":return bs(hV),Ms=n,!0;case"de":return bs(pV),Ms=n,!0;case"it":return bs(vV),Ms=n,!0;case"ja":return bs(mV),Ms="ja",!0;case"ru":return bs(_V),Ms=n,!0;case"pl":return bs(yV),Ms=n,!0;case"ko":return bs(gV),Ms=n,!0}switch(n.toLowerCase().split("-")[0]){case"fr":return bs(dV),Ms=n,!0;case"es":return bs(hV),Ms=n,!0;case"de":return bs(pV),Ms=n,!0;case"it":return bs(vV),Ms=n,!0;case"ja":return bs(mV),Ms="ja",!0;case"ru":return bs(_V),Ms=n,!0;case"pl":return bs(yV),Ms=n,!0;case"ko":return bs(gV),Ms=n,!0}});class E0{}E0.\u0275fac=function(e){return new(e||E0)},E0.\u0275mod=Mt({type:E0,bootstrap:[Xy]}),E0.\u0275inj=Wn({providers:[{provide:Dc,useValue:Ms}],imports:[B3,mJ,G$,K$,oq,tY,gX,BK,tX,Eq,Yj,$G,S0,dg]}),fG().bootstrapModule(E0).catch(n=>console.log(n))},8410:function(Ea,Ma){!function(ut){"use strict";var Wr="function"==typeof WeakSet,le=Object.keys;function pt(Pt,$t){Pt&&"object"==typeof Pt&&$t.add(Pt)}function ls(Pt,$t,Kn,An){for(var In,un=Pt.length,rr=0;rr<un;rr++)if(Kn((In=Pt[rr])[0],$t[0],An)&&Kn(In[1],$t[1],An))return!0;return!1}function Ca(Pt,$t,Kn,An){for(var un=Pt.length,In=0;In<un;In++)if(Kn(Pt[In],$t,An))return!0;return!1}function fi(Pt,$t){return Pt===$t||Pt!=Pt&&$t!=$t}function ro(Pt){return Pt.constructor===Object||null==Pt.constructor}function nd(Pt){return!!Pt&&"function"==typeof Pt.then}function $r(Pt){return!(!Pt||!Pt.$$typeof)}var bl=Wr?function(){return new WeakSet}:function Tn(){return Object.create({_values:[],add:function(Pt){this._values.push(Pt)},has:function(Pt){return-1!==this._values.indexOf(Pt)}})};function ve(Pt){return function(Kn){var An=Pt||Kn;return function(In,rr,Vi){void 0===Vi&&(Vi=bl());var ac=Vi.has(In),so=Vi.has(rr);return ac||so?ac&&so:(pt(In,Vi),pt(rr,Vi),An(In,rr,Vi))}}}function Mn(Pt){var $t=new Array(Pt.size),Kn=0;return Pt.forEach(function(An,un){$t[Kn++]=[un,An]}),$t}function oi(Pt){var $t=new Array(Pt.size),Kn=0;return Pt.forEach(function(An){$t[Kn++]=An}),$t}var xl="_owner",us=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function Ds(Pt,$t,Kn,An){var un=le(Pt),In=un.length;if(le($t).length!==In)return!1;for(var rr,Vi=0;Vi<In;Vi++){if(!us($t,rr=un[Vi]))return!1;if(rr===xl&&$r(Pt)){if(!$r($t))return!1}else if(!Kn(Pt[rr],$t[rr],An))return!1}return!0}var an=Array.isArray,Ta="function"==typeof Map,id="function"==typeof Set,Aa="object";function zs(Pt){var $t="function"==typeof Pt?Pt(Kn):Kn;function Kn(An,un,In){if(fi(An,un))return!0;if(An&&un&&typeof An===Aa&&typeof un===Aa){if(ro(An)&&ro(un))return Ds(An,un,$t,In);var rr=an(An),Vi=an(un);if(rr||Vi)return rr===Vi&&function Cs(Pt,$t,Kn,An){var un=Pt.length;if($t.length!==un)return!1;for(var In=0;In<un;In++)if(!Kn(Pt[In],$t[In],An))return!1;return!0}(An,un,$t,In);var ac=An instanceof Date,so=un instanceof Date;if(ac||so)return ac===so&&fi(An.getTime(),un.getTime());var cc=An instanceof RegExp,Go=un instanceof RegExp;if(cc||Go)return cc===Go&&function qr(Pt,$t){return Pt.source===$t.source&&Pt.global===$t.global&&Pt.ignoreCase===$t.ignoreCase&&Pt.multiline===$t.multiline&&Pt.unicode===$t.unicode&&Pt.sticky===$t.sticky&&Pt.lastIndex===$t.lastIndex}(An,un);if(nd(An)||nd(un))return An===un;if(Ta){var Ts=An instanceof Map,gt=un instanceof Map;if(Ts||gt)return Ts===gt&&function Da(Pt,$t,Kn,An){if(Pt.size!==$t.size)return!1;for(var un=Mn(Pt),In=Mn($t),rr=un.length,Vi=0;Vi<rr;Vi++)if(!ls(In,un[Vi],Kn,An)||!ls(un,In[Vi],Kn,An))return!1;return!0}(An,un,$t,In)}if(id){var sd=An instanceof Set,Uc=un instanceof Set;if(sd||Uc)return sd===Uc&&function xr(Pt,$t,Kn,An){if(Pt.size!==$t.size)return!1;for(var un=oi(Pt),In=oi($t),rr=un.length,Vi=0;Vi<rr;Vi++)if(!Ca(In,un[Vi],Kn,An)||!Ca(un,In[Vi],Kn,An))return!1;return!0}(An,un,$t,In)}return Ds(An,un,$t,In)}return!1}return Kn}var rd=zs(),ln=zs(function(){return fi}),nu=zs(ve()),oc=zs(ve(fi));ut.circularDeepEqual=nu,ut.circularShallowEqual=oc,ut.createCustomEqual=zs,ut.deepEqual=rd,ut.sameValueZeroEqual=fi,ut.shallowEqual=ln,Object.defineProperty(ut,"__esModule",{value:!0})}(Ma)},2573:(Ea,Ma)=>{var l,f,v,b,E,M,D,R,k,U,F,h,Wr={userAgent:!1},le={},pt=pt||(l=Math,v=(f={}).lib={},b=v.Base=function(){function C(){}return{extend:function(B){C.prototype=this;var P=new C;return B&&P.mixIn(B),P.hasOwnProperty("init")||(P.init=function(){P.$super.init.apply(this,arguments)}),P.init.prototype=P,P.$super=this,P},create:function(){var B=this.extend();return B.init.apply(B,arguments),B},init:function(){},mixIn:function(B){for(var P in B)B.hasOwnProperty(P)&&(this[P]=B[P]);B.hasOwnProperty("toString")&&(this.toString=B.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),E=v.WordArray=b.extend({init:function(C,B){C=this.words=C||[],this.sigBytes=null!=B?B:4*C.length},toString:function(C){return(C||D).stringify(this)},concat:function(C){var B=this.words,P=C.words,V=this.sigBytes,L=C.sigBytes;if(this.clamp(),V%4)for(var $=0;$<L;$++)B[V+$>>>2]|=(P[$>>>2]>>>24-$%4*8&255)<<24-(V+$)%4*8;else for($=0;$<L;$+=4)B[V+$>>>2]=P[$>>>2];return this.sigBytes+=L,this},clamp:function(){var C=this.words,B=this.sigBytes;C[B>>>2]&=4294967295<<32-B%4*8,C.length=l.ceil(B/4)},clone:function(){var C=b.clone.call(this);return C.words=this.words.slice(0),C},random:function(C){for(var B=[],P=0;P<C;P+=4)B.push(4294967296*l.random()|0);return new E.init(B,C)}}),M=f.enc={},D=M.Hex={stringify:function(C){for(var B=C.words,P=C.sigBytes,V=[],L=0;L<P;L++){var $=B[L>>>2]>>>24-L%4*8&255;V.push(($>>>4).toString(16)),V.push((15&$).toString(16))}return V.join("")},parse:function(C){for(var B=C.length,P=[],V=0;V<B;V+=2)P[V>>>3]|=parseInt(C.substr(V,2),16)<<24-V%8*4;return new E.init(P,B/2)}},R=M.Latin1={stringify:function(C){for(var B=C.words,P=C.sigBytes,V=[],L=0;L<P;L++)V.push(String.fromCharCode(B[L>>>2]>>>24-L%4*8&255));return V.join("")},parse:function(C){for(var B=C.length,P=[],V=0;V<B;V++)P[V>>>2]|=(255&C.charCodeAt(V))<<24-V%4*8;return new E.init(P,B)}},k=M.Utf8={stringify:function(C){try{return decodeURIComponent(escape(R.stringify(C)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(C){return R.parse(unescape(encodeURIComponent(C)))}},U=v.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new E.init,this._nDataBytes=0},_append:function(C){"string"==typeof C&&(C=k.parse(C)),this._data.concat(C),this._nDataBytes+=C.sigBytes},_process:function(C){var B=this._data,P=B.words,V=B.sigBytes,L=this.blockSize,J=V/(4*L),Q=(J=C?l.ceil(J):l.max((0|J)-this._minBufferSize,0))*L,te=l.min(4*Q,V);if(Q){for(var we=0;we<Q;we+=L)this._doProcessBlock(P,we);var Ae=P.splice(0,Q);B.sigBytes-=te}return new E.init(Ae,te)},clone:function(){var C=b.clone.call(this);return C._data=this._data.clone(),C},_minBufferSize:0}),v.Hasher=U.extend({cfg:b.extend(),init:function(C){this.cfg=this.cfg.extend(C),this.reset()},reset:function(){U.reset.call(this),this._doReset()},update:function(C){return this._append(C),this._process(),this},finalize:function(C){return C&&this._append(C),this._doFinalize()},blockSize:16,_createHelper:function(C){return function(B,P){return new C.init(P).finalize(B)}},_createHmacHelper:function(C){return function(B,P){return new F.HMAC.init(C,P).finalize(B)}}}),F=f.algo={},f);(function(l){var b,h=(b=pt).lib,f=h.Base,v=h.WordArray;(b=b.x64={}).Word=f.extend({init:function(E,M){this.high=E,this.low=M}}),b.WordArray=f.extend({init:function(E,M){E=this.words=E||[],this.sigBytes=null!=M?M:8*E.length},toX32:function(){for(var E=this.words,M=E.length,D=[],R=0;R<M;R++){var k=E[R];D.push(k.high),D.push(k.low)}return v.create(D,this.sigBytes)},clone:function(){for(var E=f.clone.call(this),M=E.words=this.words.slice(0),D=M.length,R=0;R<D;R++)M[R]=M[R].clone();return E}})})(),pt.lib.Cipher||function(l){var h=(C=pt).lib,f=h.Base,v=h.WordArray,b=h.BufferedBlockAlgorithm,E=C.enc.Base64,M=C.algo.EvpKDF,D=h.Cipher=b.extend({cfg:f.extend(),createEncryptor:function(P,V){return this.create(this._ENC_XFORM_MODE,P,V)},createDecryptor:function(P,V){return this.create(this._DEC_XFORM_MODE,P,V)},init:function(P,V,L){this.cfg=this.cfg.extend(L),this._xformMode=P,this._key=V,this.reset()},reset:function(){b.reset.call(this),this._doReset()},process:function(P){return this._append(P),this._process()},finalize:function(P){return P&&this._append(P),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(P){return{encrypt:function(V,L,$){return("string"==typeof L?B:F).encrypt(P,V,L,$)},decrypt:function(V,L,$){return("string"==typeof L?B:F).decrypt(P,V,L,$)}}}});h.StreamCipher=D.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var z=C.mode={},R=function(P,V,L){var $=this._iv;$?this._iv=void 0:$=this._prevBlock;for(var J=0;J<L;J++)P[V+J]^=$[J]},k=(h.BlockCipherMode=f.extend({createEncryptor:function(P,V){return this.Encryptor.create(P,V)},createDecryptor:function(P,V){return this.Decryptor.create(P,V)},init:function(P,V){this._cipher=P,this._iv=V}})).extend();k.Encryptor=k.extend({processBlock:function(P,V){var L=this._cipher,$=L.blockSize;R.call(this,P,V,$),L.encryptBlock(P,V),this._prevBlock=P.slice(V,V+$)}}),k.Decryptor=k.extend({processBlock:function(P,V){var L=this._cipher,$=L.blockSize,J=P.slice(V,V+$);L.decryptBlock(P,V),R.call(this,P,V,$),this._prevBlock=J}}),z=z.CBC=k,k=(C.pad={}).Pkcs7={pad:function(P,V){for(var L,$=(L=(L=4*V)-P.sigBytes%L)<<24|L<<16|L<<8|L,J=[],Q=0;Q<L;Q+=4)J.push($);L=v.create(J,L),P.concat(L)},unpad:function(P){P.sigBytes-=255&P.words[P.sigBytes-1>>>2]}},h.BlockCipher=D.extend({cfg:D.cfg.extend({mode:z,padding:k}),reset:function(){D.reset.call(this);var P=(V=this.cfg).iv,V=V.mode;if(this._xformMode==this._ENC_XFORM_MODE)var L=V.createEncryptor;else L=V.createDecryptor,this._minBufferSize=1;this._mode=L.call(V,this,P&&P.words)},_doProcessBlock:function(P,V){this._mode.processBlock(P,V)},_doFinalize:function(){var P=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){P.pad(this._data,this.blockSize);var V=this._process(!0)}else V=this._process(!0),P.unpad(V);return V},blockSize:4});var U=h.CipherParams=f.extend({init:function(P){this.mixIn(P)},toString:function(P){return(P||this.formatter).stringify(this)}}),F=(z=(C.format={}).OpenSSL={stringify:function(P){var V=P.ciphertext;return((P=P.salt)?v.create([1398893684,1701076831]).concat(P).concat(V):V).toString(E)},parse:function(P){var V=(P=E.parse(P)).words;if(1398893684==V[0]&&1701076831==V[1]){var L=v.create(V.slice(2,4));V.splice(0,4),P.sigBytes-=16}return U.create({ciphertext:P,salt:L})}},h.SerializableCipher=f.extend({cfg:f.extend({format:z}),encrypt:function(P,V,L,$){$=this.cfg.extend($);var J=P.createEncryptor(L,$);return V=J.finalize(V),U.create({ciphertext:V,key:L,iv:(J=J.cfg).iv,algorithm:P,mode:J.mode,padding:J.padding,blockSize:P.blockSize,formatter:$.format})},decrypt:function(P,V,L,$){return $=this.cfg.extend($),V=this._parse(V,$.format),P.createDecryptor(L,$).finalize(V.ciphertext)},_parse:function(P,V){return"string"==typeof P?V.parse(P,this):P}})),C=(C.kdf={}).OpenSSL={execute:function(P,V,L,$){return $||($=v.random(8)),P=M.create({keySize:V+L}).compute(P,$),L=v.create(P.words.slice(V),4*L),P.sigBytes=4*V,U.create({key:P,iv:L,salt:$})}},B=h.PasswordBasedCipher=F.extend({cfg:F.cfg.extend({kdf:C}),encrypt:function(P,V,L,$){return L=($=this.cfg.extend($)).kdf.execute(L,P.keySize,P.ivSize),$.iv=L.iv,(P=F.encrypt.call(this,P,V,L.key,$)).mixIn(L),P},decrypt:function(P,V,L,$){return $=this.cfg.extend($),V=this._parse(V,$.format),L=$.kdf.execute(L,P.keySize,P.ivSize,V.salt),$.iv=L.iv,F.decrypt.call(this,P,V,L.key,$)}})}(),function(){for(var l=pt,h=l.lib.BlockCipher,we=l.algo,f=[],v=[],b=[],E=[],M=[],D=[],R=[],k=[],U=[],z=[],F=[],C=0;256>C;C++)F[C]=128>C?C<<1:C<<1^283;var B=0,P=0;for(C=0;256>C;C++){var V;f[B]=V=(V=P^P<<1^P<<2^P<<3^P<<4)>>>8^255&V^99,v[V]=B;var L=F[B],$=F[L],J=F[$],Q=257*F[V]^16843008*V;b[B]=Q<<24|Q>>>8,E[B]=Q<<16|Q>>>16,M[B]=Q<<8|Q>>>24,D[B]=Q,R[V]=(Q=16843009*J^65537*$^257*L^16843008*B)<<24|Q>>>8,k[V]=Q<<16|Q>>>16,U[V]=Q<<8|Q>>>24,z[V]=Q,B?(B=L^F[F[F[J^L]]],P^=F[F[P]]):B=P=1}var te=[0,1,2,4,8,16,32,64,128,27,54];we=we.AES=h.extend({_doReset:function(){for(var Ae=(q=this._key).words,j=q.sigBytes/4,q=4*((this._nRounds=j+6)+1),ee=this._keySchedule=[],ie=0;ie<q;ie++)if(ie<j)ee[ie]=Ae[ie];else{var de=ee[ie-1];ie%j?6<j&&ie%j==4&&(de=f[de>>>24]<<24|f[de>>>16&255]<<16|f[de>>>8&255]<<8|f[255&de]):(de=f[(de=de<<8|de>>>24)>>>24]<<24|f[de>>>16&255]<<16|f[de>>>8&255]<<8|f[255&de],de^=te[ie/j|0]<<24),ee[ie]=ee[ie-j]^de}for(Ae=this._invKeySchedule=[],j=0;j<q;j++)ie=q-j,de=j%4?ee[ie]:ee[ie-4],Ae[j]=4>j||4>=ie?de:R[f[de>>>24]]^k[f[de>>>16&255]]^U[f[de>>>8&255]]^z[f[255&de]]},encryptBlock:function(Ae,j){this._doCryptBlock(Ae,j,this._keySchedule,b,E,M,D,f)},decryptBlock:function(Ae,j){var q=Ae[j+1];Ae[j+1]=Ae[j+3],Ae[j+3]=q,this._doCryptBlock(Ae,j,this._invKeySchedule,R,k,U,z,v),q=Ae[j+1],Ae[j+1]=Ae[j+3],Ae[j+3]=q},_doCryptBlock:function(Ae,j,q,ee,ie,de,be,ce){for(var pe=this._nRounds,Y=Ae[j]^q[0],ci=Ae[j+1]^q[1],ti=Ae[j+2]^q[2],Fn=Ae[j+3]^q[3],_e=4,Ie=1;Ie<pe;Ie++){var Bt=ee[Y>>>24]^ie[ci>>>16&255]^de[ti>>>8&255]^be[255&Fn]^q[_e++],Nt=ee[ci>>>24]^ie[ti>>>16&255]^de[Fn>>>8&255]^be[255&Y]^q[_e++],Lt=ee[ti>>>24]^ie[Fn>>>16&255]^de[Y>>>8&255]^be[255&ci]^q[_e++];Fn=ee[Fn>>>24]^ie[Y>>>16&255]^de[ci>>>8&255]^be[255&ti]^q[_e++],Y=Bt,ci=Nt,ti=Lt}Bt=(ce[Y>>>24]<<24|ce[ci>>>16&255]<<16|ce[ti>>>8&255]<<8|ce[255&Fn])^q[_e++],Nt=(ce[ci>>>24]<<24|ce[ti>>>16&255]<<16|ce[Fn>>>8&255]<<8|ce[255&Y])^q[_e++],Lt=(ce[ti>>>24]<<24|ce[Fn>>>16&255]<<16|ce[Y>>>8&255]<<8|ce[255&ci])^q[_e++],Fn=(ce[Fn>>>24]<<24|ce[Y>>>16&255]<<16|ce[ci>>>8&255]<<8|ce[255&ti])^q[_e++],Ae[j]=Bt,Ae[j+1]=Nt,Ae[j+2]=Lt,Ae[j+3]=Fn},keySize:8}),l.AES=h._createHelper(we)}(),function(){function l(F,C){var B=(this._lBlock>>>F^this._rBlock)&C;this._rBlock^=B,this._lBlock^=B<<F}function h(F,C){var B=(this._rBlock>>>F^this._lBlock)&C;this._lBlock^=B,this._rBlock^=B<<F}var b,f=pt,v=(b=f.lib).WordArray,E=f.algo,M=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],D=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],R=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],k=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],U=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],z=E.DES=(b=b.BlockCipher).extend({_doReset:function(){for(var F=this._key.words,C=[],B=0;56>B;B++){var P=M[B]-1;C[B]=F[P>>>5]>>>31-P%32&1}for(F=this._subKeys=[],P=0;16>P;P++){var V=F[P]=[],L=R[P];for(B=0;24>B;B++)V[B/6|0]|=C[(D[B]-1+L)%28]<<31-B%6,V[4+(B/6|0)]|=C[28+(D[B+24]-1+L)%28]<<31-B%6;for(V[0]=V[0]<<1|V[0]>>>31,B=1;7>B;B++)V[B]>>>=4*(B-1)+3;V[7]=V[7]<<5|V[7]>>>27}for(C=this._invSubKeys=[],B=0;16>B;B++)C[B]=F[15-B]},encryptBlock:function(F,C){this._doCryptBlock(F,C,this._subKeys)},decryptBlock:function(F,C){this._doCryptBlock(F,C,this._invSubKeys)},_doCryptBlock:function(F,C,B){this._lBlock=F[C],this._rBlock=F[C+1],l.call(this,4,252645135),l.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),l.call(this,1,1431655765);for(var P=0;16>P;P++){for(var V=B[P],L=this._lBlock,$=this._rBlock,J=0,Q=0;8>Q;Q++)J|=k[Q][(($^V[Q])&U[Q])>>>0];this._lBlock=$,this._rBlock=L^J}B=this._lBlock,this._lBlock=this._rBlock,this._rBlock=B,l.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),l.call(this,16,65535),l.call(this,4,252645135),F[C]=this._lBlock,F[C+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});f.DES=b._createHelper(z),E=E.TripleDES=b.extend({_doReset:function(){var F=this._key.words;this._des1=z.createEncryptor(v.create(F.slice(0,2))),this._des2=z.createEncryptor(v.create(F.slice(2,4))),this._des3=z.createEncryptor(v.create(F.slice(4,6)))},encryptBlock:function(F,C){this._des1.encryptBlock(F,C),this._des2.decryptBlock(F,C),this._des3.encryptBlock(F,C)},decryptBlock:function(F,C){this._des3.decryptBlock(F,C),this._des2.encryptBlock(F,C),this._des1.decryptBlock(F,C)},keySize:6,ivSize:2,blockSize:2}),f.TripleDES=b._createHelper(E)}(),h=pt.lib.WordArray,pt.enc.Base64={stringify:function(f){var v=f.words,b=f.sigBytes,E=this._map;f.clamp(),f=[];for(var M=0;M<b;M+=3)for(var D=(v[M>>>2]>>>24-M%4*8&255)<<16|(v[M+1>>>2]>>>24-(M+1)%4*8&255)<<8|v[M+2>>>2]>>>24-(M+2)%4*8&255,R=0;4>R&&M+.75*R<b;R++)f.push(E.charAt(D>>>6*(3-R)&63));if(v=E.charAt(64))for(;f.length%4;)f.push(v);return f.join("")},parse:function(f){var v=f.length,b=this._map;(E=b.charAt(64))&&-1!=(E=f.indexOf(E))&&(v=E);for(var E=[],M=0,D=0;D<v;D++)if(D%4){var R=b.indexOf(f.charAt(D-1))<<D%4*2,k=b.indexOf(f.charAt(D))>>>6-D%4*2;E[M>>>2]|=(R|k)<<24-M%4*8,M++}return h.create(E,M)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(l){function h(z,F,C,B,P,V,L){return((z=z+(F&C|~F&B)+P+L)<<V|z>>>32-V)+F}function f(z,F,C,B,P,V,L){return((z=z+(F&B|C&~B)+P+L)<<V|z>>>32-V)+F}function v(z,F,C,B,P,V,L){return((z=z+(F^C^B)+P+L)<<V|z>>>32-V)+F}function b(z,F,C,B,P,V,L){return((z=z+(C^(F|~B))+P+L)<<V|z>>>32-V)+F}for(var E=pt,M=(R=E.lib).WordArray,D=R.Hasher,R=E.algo,k=[],U=0;64>U;U++)k[U]=4294967296*l.abs(l.sin(U+1))|0;R=R.MD5=D.extend({_doReset:function(){this._hash=new M.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(z,F){for(var C=0;16>C;C++)z[B=F+C]=16711935&((P=z[B])<<8|P>>>24)|4278255360&(P<<24|P>>>8);var B,P=z[F+1],V=z[F+2],L=z[F+3],$=z[F+4],J=z[F+5],Q=z[F+6],te=z[F+7],we=z[F+8],Ae=z[F+9],j=z[F+10],q=z[F+11],ee=z[F+12],ie=z[F+13],de=z[F+14],be=z[F+15],ce=h(ce=(C=this._hash.words)[0],Ie=C[1],_e=C[2],pe=C[3],B=z[F+0],7,k[0]),pe=h(pe,ce,Ie,_e,P,12,k[1]),_e=h(_e,pe,ce,Ie,V,17,k[2]),Ie=h(Ie,_e,pe,ce,L,22,k[3]);ce=h(ce,Ie,_e,pe,$,7,k[4]),pe=h(pe,ce,Ie,_e,J,12,k[5]),_e=h(_e,pe,ce,Ie,Q,17,k[6]),Ie=h(Ie,_e,pe,ce,te,22,k[7]),ce=h(ce,Ie,_e,pe,we,7,k[8]),pe=h(pe,ce,Ie,_e,Ae,12,k[9]),_e=h(_e,pe,ce,Ie,j,17,k[10]),Ie=h(Ie,_e,pe,ce,q,22,k[11]),ce=h(ce,Ie,_e,pe,ee,7,k[12]),pe=h(pe,ce,Ie,_e,ie,12,k[13]),_e=h(_e,pe,ce,Ie,de,17,k[14]),ce=f(ce,Ie=h(Ie,_e,pe,ce,be,22,k[15]),_e,pe,P,5,k[16]),pe=f(pe,ce,Ie,_e,Q,9,k[17]),_e=f(_e,pe,ce,Ie,q,14,k[18]),Ie=f(Ie,_e,pe,ce,B,20,k[19]),ce=f(ce,Ie,_e,pe,J,5,k[20]),pe=f(pe,ce,Ie,_e,j,9,k[21]),_e=f(_e,pe,ce,Ie,be,14,k[22]),Ie=f(Ie,_e,pe,ce,$,20,k[23]),ce=f(ce,Ie,_e,pe,Ae,5,k[24]),pe=f(pe,ce,Ie,_e,de,9,k[25]),_e=f(_e,pe,ce,Ie,L,14,k[26]),Ie=f(Ie,_e,pe,ce,we,20,k[27]),ce=f(ce,Ie,_e,pe,ie,5,k[28]),pe=f(pe,ce,Ie,_e,V,9,k[29]),_e=f(_e,pe,ce,Ie,te,14,k[30]),ce=v(ce,Ie=f(Ie,_e,pe,ce,ee,20,k[31]),_e,pe,J,4,k[32]),pe=v(pe,ce,Ie,_e,we,11,k[33]),_e=v(_e,pe,ce,Ie,q,16,k[34]),Ie=v(Ie,_e,pe,ce,de,23,k[35]),ce=v(ce,Ie,_e,pe,P,4,k[36]),pe=v(pe,ce,Ie,_e,$,11,k[37]),_e=v(_e,pe,ce,Ie,te,16,k[38]),Ie=v(Ie,_e,pe,ce,j,23,k[39]),ce=v(ce,Ie,_e,pe,ie,4,k[40]),pe=v(pe,ce,Ie,_e,B,11,k[41]),_e=v(_e,pe,ce,Ie,L,16,k[42]),Ie=v(Ie,_e,pe,ce,Q,23,k[43]),ce=v(ce,Ie,_e,pe,Ae,4,k[44]),pe=v(pe,ce,Ie,_e,ee,11,k[45]),_e=v(_e,pe,ce,Ie,be,16,k[46]),ce=b(ce,Ie=v(Ie,_e,pe,ce,V,23,k[47]),_e,pe,B,6,k[48]),pe=b(pe,ce,Ie,_e,te,10,k[49]),_e=b(_e,pe,ce,Ie,de,15,k[50]),Ie=b(Ie,_e,pe,ce,J,21,k[51]),ce=b(ce,Ie,_e,pe,ee,6,k[52]),pe=b(pe,ce,Ie,_e,L,10,k[53]),_e=b(_e,pe,ce,Ie,j,15,k[54]),Ie=b(Ie,_e,pe,ce,P,21,k[55]),ce=b(ce,Ie,_e,pe,we,6,k[56]),pe=b(pe,ce,Ie,_e,be,10,k[57]),_e=b(_e,pe,ce,Ie,Q,15,k[58]),Ie=b(Ie,_e,pe,ce,ie,21,k[59]),ce=b(ce,Ie,_e,pe,$,6,k[60]),pe=b(pe,ce,Ie,_e,q,10,k[61]),_e=b(_e,pe,ce,Ie,V,15,k[62]),Ie=b(Ie,_e,pe,ce,Ae,21,k[63]),C[0]=C[0]+ce|0,C[1]=C[1]+Ie|0,C[2]=C[2]+_e|0,C[3]=C[3]+pe|0},_doFinalize:function(){var z=this._data,F=z.words,C=8*this._nDataBytes,B=8*z.sigBytes;F[B>>>5]|=128<<24-B%32;var P=l.floor(C/4294967296);for(F[15+(B+64>>>9<<4)]=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),F[14+(B+64>>>9<<4)]=16711935&(C<<8|C>>>24)|4278255360&(C<<24|C>>>8),z.sigBytes=4*(F.length+1),this._process(),F=(z=this._hash).words,C=0;4>C;C++)F[C]=16711935&((B=F[C])<<8|B>>>24)|4278255360&(B<<24|B>>>8);return z},clone:function(){var z=D.clone.call(this);return z._hash=this._hash.clone(),z}}),E.MD5=D._createHelper(R),E.HmacMD5=D._createHmacHelper(R)}(Math),function(){var l=pt,h=(b=l.lib).WordArray,f=b.Hasher,v=[],b=l.algo.SHA1=f.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(E,M){for(var D=this._hash.words,R=D[0],k=D[1],U=D[2],z=D[3],F=D[4],C=0;80>C;C++){if(16>C)v[C]=0|E[M+C];else{var B=v[C-3]^v[C-8]^v[C-14]^v[C-16];v[C]=B<<1|B>>>31}B=(R<<5|R>>>27)+F+v[C],B=20>C?B+(1518500249+(k&U|~k&z)):40>C?B+(1859775393+(k^U^z)):60>C?B+((k&U|k&z|U&z)-1894007588):B+((k^U^z)-899497514),F=z,z=U,U=k<<30|k>>>2,k=R,R=B}D[0]=D[0]+R|0,D[1]=D[1]+k|0,D[2]=D[2]+U|0,D[3]=D[3]+z|0,D[4]=D[4]+F|0},_doFinalize:function(){var E=this._data,M=E.words,D=8*this._nDataBytes,R=8*E.sigBytes;return M[R>>>5]|=128<<24-R%32,M[14+(R+64>>>9<<4)]=Math.floor(D/4294967296),M[15+(R+64>>>9<<4)]=D,E.sigBytes=4*M.length,this._process(),this._hash},clone:function(){var E=f.clone.call(this);return E._hash=this._hash.clone(),E}});l.SHA1=f._createHelper(b),l.HmacSHA1=f._createHmacHelper(b)}(),function(l){for(var h=pt,f=(C=h.lib).WordArray,v=C.Hasher,C=h.algo,b=[],E=[],M=function(P){return 4294967296*(P-(0|P))|0},D=2,R=0;64>R;){var k;e:{for(var U=l.sqrt(k=D),z=2;z<=U;z++)if(!(k%z)){k=!1;break e}k=!0}k&&(8>R&&(b[R]=M(l.pow(D,.5))),E[R]=M(l.pow(D,1/3)),R++),D++}var F=[];C=C.SHA256=v.extend({_doReset:function(){this._hash=new f.init(b.slice(0))},_doProcessBlock:function(B,P){for(var V=this._hash.words,L=V[0],$=V[1],J=V[2],Q=V[3],te=V[4],we=V[5],Ae=V[6],j=V[7],q=0;64>q;q++){if(16>q)F[q]=0|B[P+q];else{var ee=F[q-15],ie=F[q-2];F[q]=((ee<<25|ee>>>7)^(ee<<14|ee>>>18)^ee>>>3)+F[q-7]+((ie<<15|ie>>>17)^(ie<<13|ie>>>19)^ie>>>10)+F[q-16]}ee=j+((te<<26|te>>>6)^(te<<21|te>>>11)^(te<<7|te>>>25))+(te&we^~te&Ae)+E[q]+F[q],ie=((L<<30|L>>>2)^(L<<19|L>>>13)^(L<<10|L>>>22))+(L&$^L&J^$&J),j=Ae,Ae=we,we=te,te=Q+ee|0,Q=J,J=$,$=L,L=ee+ie|0}V[0]=V[0]+L|0,V[1]=V[1]+$|0,V[2]=V[2]+J|0,V[3]=V[3]+Q|0,V[4]=V[4]+te|0,V[5]=V[5]+we|0,V[6]=V[6]+Ae|0,V[7]=V[7]+j|0},_doFinalize:function(){var B=this._data,P=B.words,V=8*this._nDataBytes,L=8*B.sigBytes;return P[L>>>5]|=128<<24-L%32,P[14+(L+64>>>9<<4)]=l.floor(V/4294967296),P[15+(L+64>>>9<<4)]=V,B.sigBytes=4*P.length,this._process(),this._hash},clone:function(){var B=v.clone.call(this);return B._hash=this._hash.clone(),B}}),h.SHA256=v._createHelper(C),h.HmacSHA256=v._createHmacHelper(C)}(Math),function(){var l=pt,h=l.lib.WordArray,f=(v=l.algo).SHA256,v=v.SHA224=f.extend({_doReset:function(){this._hash=new h.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var b=f._doFinalize.call(this);return b.sigBytes-=4,b}});l.SHA224=f._createHelper(v),l.HmacSHA224=f._createHmacHelper(v)}(),function(){function l(){return v.create.apply(v,arguments)}for(var h=pt,f=h.lib.Hasher,v=(E=h.x64).Word,b=E.WordArray,E=h.algo,M=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],D=[],R=0;80>R;R++)D[R]=l();E=E.SHA512=f.extend({_doReset:function(){this._hash=new b.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(k,U){for(var $,z=($=this._hash.words)[0],F=$[1],C=$[2],B=$[3],P=$[4],V=$[5],L=$[6],J=z.high,Q=z.low,te=F.high,we=F.low,Ae=C.high,j=C.low,q=B.high,ee=B.low,ie=P.high,de=P.low,be=V.high,ce=V.low,pe=L.high,_e=L.low,Ie=($=$[7]).high,Bt=$.low,Nt=J,Lt=Q,Fn=te,Y=we,ci=Ae,ti=j,Ci=q,sn=ee,Jr=ie,fs=de,Rs=be,zn=ce,Sr=pe,Xi=_e,Jn=Ie,pr=Bt,rn=0;80>rn;rn++){var yc=D[rn];if(16>rn)var ji=yc.high=0|k[U+2*rn],pi=yc.low=0|k[U+2*rn+1];else{ji=((pi=(ji=D[rn-15]).high)>>>1|(da=ji.low)<<31)^(pi>>>8|da<<24)^pi>>>7;var da=(da>>>1|pi<<31)^(da>>>8|pi<<24)^(da>>>7|pi<<25),$c=((pi=($c=D[rn-2]).high)>>>19|(Fi=$c.low)<<13)^(pi<<3|Fi>>>29)^pi>>>6,Fi=(Fi>>>19|pi<<13)^(Fi<<3|pi>>>29)^(Fi>>>6|pi<<26);yc.high=ji=(ji=(ji=ji+(vu=(pi=D[rn-7]).high)+((pi=da+pi.low)>>>0<da>>>0?1:0))+$c+((pi+=Fi)>>>0<Fi>>>0?1:0))+(Fo=(ua=D[rn-16]).high)+((pi+=ua=ua.low)>>>0<ua>>>0?1:0),yc.low=pi}var vu=Jr&Rs^~Jr&Sr,ua=fs&zn^~fs&Xi,B0=(yc=Nt&Fn^Nt&ci^Fn&ci,Lt&Y^Lt&ti^Y&ti),Io=(Fi=M[rn]).high,_u=Fi.low,Fo=Jn+((Jr>>>14|fs<<18)^(Jr>>>18|fs<<14)^(Jr<<23|fs>>>9))+((Fi=pr+((fs>>>14|Jr<<18)^(fs>>>18|Jr<<14)^(fs<<23|Jr>>>9)))>>>0<pr>>>0?1:0);Jn=Sr,pr=Xi,Sr=Rs,Xi=zn,Rs=Jr,zn=fs,Jr=Ci+(Fo=(Fo=(Fo=Fo+vu+((Fi+=ua)>>>0<ua>>>0?1:0))+Io+((Fi+=_u)>>>0<_u>>>0?1:0))+ji+((Fi+=pi)>>>0<pi>>>0?1:0))+((fs=sn+Fi|0)>>>0<sn>>>0?1:0)|0,Ci=ci,sn=ti,ci=Fn,ti=Y,Fn=Nt,Y=Lt,Nt=Fo+(yc=(da=(Nt>>>28|Lt<<4)^(Nt<<30|Lt>>>2)^(Nt<<25|Lt>>>7))+yc+((pi=($c=(Lt>>>28|Nt<<4)^(Lt<<30|Nt>>>2)^(Lt<<25|Nt>>>7))+B0)>>>0<$c>>>0?1:0))+((Lt=Fi+pi|0)>>>0<Fi>>>0?1:0)|0}Q=z.low=Q+Lt,z.high=J+Nt+(Q>>>0<Lt>>>0?1:0),we=F.low=we+Y,F.high=te+Fn+(we>>>0<Y>>>0?1:0),j=C.low=j+ti,C.high=Ae+ci+(j>>>0<ti>>>0?1:0),ee=B.low=ee+sn,B.high=q+Ci+(ee>>>0<sn>>>0?1:0),de=P.low=de+fs,P.high=ie+Jr+(de>>>0<fs>>>0?1:0),ce=V.low=ce+zn,V.high=be+Rs+(ce>>>0<zn>>>0?1:0),_e=L.low=_e+Xi,L.high=pe+Sr+(_e>>>0<Xi>>>0?1:0),Bt=$.low=Bt+pr,$.high=Ie+Jn+(Bt>>>0<pr>>>0?1:0)},_doFinalize:function(){var k=this._data,U=k.words,z=8*this._nDataBytes,F=8*k.sigBytes;return U[F>>>5]|=128<<24-F%32,U[30+(F+128>>>10<<5)]=Math.floor(z/4294967296),U[31+(F+128>>>10<<5)]=z,k.sigBytes=4*U.length,this._process(),this._hash.toX32()},clone:function(){var k=f.clone.call(this);return k._hash=this._hash.clone(),k},blockSize:32}),h.SHA512=f._createHelper(E),h.HmacSHA512=f._createHmacHelper(E)}(),function(){var l=pt,h=(b=l.x64).Word,f=b.WordArray,v=(b=l.algo).SHA512,b=b.SHA384=v.extend({_doReset:function(){this._hash=new f.init([new h.init(3418070365,3238371032),new h.init(1654270250,914150663),new h.init(2438529370,812702999),new h.init(355462360,4144912697),new h.init(1731405415,4290775857),new h.init(2394180231,1750603025),new h.init(3675008525,1694076839),new h.init(1203062813,3204075428)])},_doFinalize:function(){var E=v._doFinalize.call(this);return E.sigBytes-=16,E}});l.SHA384=v._createHelper(b),l.HmacSHA384=v._createHmacHelper(b)}(),function(){var l=pt,h=(k=l.lib).WordArray,f=k.Hasher,k=l.algo,v=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),b=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),E=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),M=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),D=h.create([0,1518500249,1859775393,2400959708,2840853838]),R=h.create([1352829926,1548603684,1836072691,2053994217,0]);k=k.RIPEMD160=f.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,z){for(var F=0;16>F;F++)U[C=z+F]=16711935&((B=U[C])<<8|B>>>24)|4278255360&(B<<24|B>>>8);var C,Q,te,we,Ae,j,q,ee,ie,de,be,ce,B=D.words,P=R.words,V=v.words,L=b.words,$=E.words,J=M.words;for(q=Q=(C=this._hash.words)[0],ee=te=C[1],ie=we=C[2],de=Ae=C[3],be=j=C[4],F=0;80>F;F+=1)ce=Q+U[z+V[F]]|0,ce=16>F?ce+((te^we^Ae)+B[0]):32>F?ce+((te&we|~te&Ae)+B[1]):48>F?ce+(((te|~we)^Ae)+B[2]):64>F?ce+((te&Ae|we&~Ae)+B[3]):ce+((te^(we|~Ae))+B[4]),ce=(ce=(ce|=0)<<$[F]|ce>>>32-$[F])+j|0,Q=j,j=Ae,Ae=we<<10|we>>>22,we=te,te=ce,ce=q+U[z+L[F]]|0,ce=16>F?ce+((ee^(ie|~de))+P[0]):32>F?ce+((ee&de|ie&~de)+P[1]):48>F?ce+(((ee|~ie)^de)+P[2]):64>F?ce+((ee&ie|~ee&de)+P[3]):ce+((ee^ie^de)+P[4]),ce=(ce=(ce|=0)<<J[F]|ce>>>32-J[F])+be|0,q=be,be=de,de=ie<<10|ie>>>22,ie=ee,ee=ce;ce=C[1]+we+de|0,C[1]=C[2]+Ae+be|0,C[2]=C[3]+j+q|0,C[3]=C[4]+Q+ee|0,C[4]=C[0]+te+ie|0,C[0]=ce},_doFinalize:function(){var U=this._data,z=U.words,F=8*this._nDataBytes,C=8*U.sigBytes;for(z[C>>>5]|=128<<24-C%32,z[14+(C+64>>>9<<4)]=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8),U.sigBytes=4*(z.length+1),this._process(),z=(U=this._hash).words,F=0;5>F;F++)z[F]=16711935&((C=z[F])<<8|C>>>24)|4278255360&(C<<24|C>>>8);return U},clone:function(){var U=f.clone.call(this);return U._hash=this._hash.clone(),U}}),l.RIPEMD160=f._createHelper(k),l.HmacRIPEMD160=f._createHmacHelper(k)}(Math),function(){var h=pt.enc.Utf8;pt.algo.HMAC=pt.lib.Base.extend({init:function(f,v){f=this._hasher=new f.init,"string"==typeof v&&(v=h.parse(v));var b=f.blockSize,E=4*b;v.sigBytes>E&&(v=f.finalize(v)),v.clamp();for(var M=this._oKey=v.clone(),D=this._iKey=v.clone(),R=M.words,k=D.words,U=0;U<b;U++)R[U]^=1549556828,k[U]^=909522486;M.sigBytes=D.sigBytes=E,this.reset()},reset:function(){var f=this._hasher;f.reset(),f.update(this._iKey)},update:function(f){return this._hasher.update(f),this},finalize:function(f){var v=this._hasher;return f=v.finalize(f),v.reset(),v.finalize(this._oKey.clone().concat(f))}})}(),function(){var v,l=pt,h=(v=l.lib).Base,f=v.WordArray,b=(v=l.algo).HMAC,E=v.PBKDF2=h.extend({cfg:h.extend({keySize:4,hasher:v.SHA1,iterations:1}),init:function(M){this.cfg=this.cfg.extend(M)},compute:function(M,D){for(var R=b.create((B=this.cfg).hasher,M),k=f.create(),U=f.create([1]),z=k.words,F=U.words,C=B.keySize,B=B.iterations;z.length<C;){var P=R.update(D).finalize(U);R.reset();for(var V=P.words,L=V.length,$=P,J=1;J<B;J++){$=R.finalize($),R.reset();for(var Q=$.words,te=0;te<L;te++)V[te]^=Q[te]}k.concat(P),F[0]++}return k.sigBytes=4*C,k}});l.PBKDF2=function(M,D,R){return E.create(R).compute(M,D)}}();var $r,ls="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ca="=";function fi(l){var h,f,v="";for(h=0;h+3<=l.length;h+=3)f=parseInt(l.substring(h,h+3),16),v+=ls.charAt(f>>6)+ls.charAt(63&f);if(h+1==l.length?(f=parseInt(l.substring(h,h+1),16),v+=ls.charAt(f<<2)):h+2==l.length&&(f=parseInt(l.substring(h,h+2),16),v+=ls.charAt(f>>2)+ls.charAt((3&f)<<4)),Ca)for(;(3&v.length)>0;)v+=Ca;return v}function ro(l){var f,b,E,h="",v=0;for(f=0;f<l.length&&l.charAt(f)!=Ca;++f)!((E=ls.indexOf(l.charAt(f)))<0)&&(0==v?(h+=an(E>>2),b=3&E,v=1):1==v?(h+=an(b<<2|E>>4),b=15&E,v=2):2==v?(h+=an(b),h+=an(E>>2),b=3&E,v=3):(h+=an(b<<2|E>>4),h+=an(15&E),v=0));return 1==v&&(h+=an(b<<2)),h}function ve(l,h,f){null!=l&&("number"==typeof l?this.fromNumber(l,h,f):this.fromString(l,null==h&&"string"!=typeof l?256:h))}function Mn(){return new ve(null)}"Microsoft Internet Explorer"==Wr.appName?(ve.prototype.am=function Cs(l,h,f,v,b,E){for(var M=32767&h,D=h>>15;--E>=0;){var R=32767&this[l],k=this[l++]>>15,U=D*R+k*M;b=((R=M*R+((32767&U)<<15)+f[v]+(1073741823&b))>>>30)+(U>>>15)+D*k+(b>>>30),f[v++]=1073741823&R}return b},$r=30):"Netscape"!=Wr.appName?(ve.prototype.am=function oi(l,h,f,v,b,E){for(;--E>=0;){var M=h*this[l++]+f[v]+b;b=Math.floor(M/67108864),f[v++]=67108863&M}return b},$r=26):(ve.prototype.am=function Da(l,h,f,v,b,E){for(var M=16383&h,D=h>>14;--E>=0;){var R=16383&this[l],k=this[l++]>>14,U=D*R+k*M;b=((R=M*R+((16383&U)<<14)+f[v]+b)>>28)+(U>>14)+D*k,f[v++]=268435455&R}return b},$r=28),ve.prototype.DB=$r,ve.prototype.DM=(1<<$r)-1,ve.prototype.DV=1<<$r,ve.prototype.FV=Math.pow(2,52),ve.prototype.F1=52-$r,ve.prototype.F2=2*$r-52;var qr,xr,us="0123456789abcdefghijklmnopqrstuvwxyz",Ds=new Array;for(qr="0".charCodeAt(0),xr=0;xr<=9;++xr)Ds[qr++]=xr;for(qr="a".charCodeAt(0),xr=10;xr<36;++xr)Ds[qr++]=xr;for(qr="A".charCodeAt(0),xr=10;xr<36;++xr)Ds[qr++]=xr;function an(l){return us.charAt(l)}function Ta(l,h){return Ds[l.charCodeAt(h)]??-1}function zs(l){var h=Mn();return h.fromInt(l),h}function Kn(l){var f,h=1;return 0!=(f=l>>>16)&&(l=f,h+=16),0!=(f=l>>8)&&(l=f,h+=8),0!=(f=l>>4)&&(l=f,h+=4),0!=(f=l>>2)&&(l=f,h+=2),0!=(f=l>>1)&&(l=f,h+=1),h}function gt(l){this.m=l}function zc(l){this.m=l,this.mp=l.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<l.DB-15)-1,this.mt2=2*l.t}function Pi(l,h){return l&h}function Si(l,h){return l|h}function Mp(l,h){return l^h}function Zt(l,h){return l&~h}function He(l){if(0==l)return-1;var h=0;return 65535&l||(l>>=16,h+=16),255&l||(l>>=8,h+=8),15&l||(l>>=4,h+=4),3&l||(l>>=2,h+=2),1&l||++h,h}function bn(l){for(var h=0;0!=l;)l&=l-1,++h;return h}function hc(){}function T0(l){return l}function Xe(l){this.r2=Mn(),this.q3=Mn(),ve.ONE.dlShiftTo(2*l.t,this.r2),this.mu=this.r2.divide(l),this.m=l}gt.prototype.convert=function sd(l){return l.s<0||l.compareTo(this.m)>=0?l.mod(this.m):l},gt.prototype.revert=function Uc(l){return l},gt.prototype.reduce=function od(l){l.divRemTo(this.m,null,l)},gt.prototype.mulTo=function xp(l,h,f){l.multiplyTo(h,f),this.reduce(f)},gt.prototype.sqrTo=function oo(l,h){l.squareTo(h),this.reduce(h)},zc.prototype.convert=function Ia(l){var h=Mn();return l.abs().dlShiftTo(this.m.t,h),h.divRemTo(this.m,null,h),l.s<0&&h.compareTo(ve.ZERO)>0&&this.m.subTo(h,h),h},zc.prototype.revert=function wp(l){var h=Mn();return l.copyTo(h),this.reduce(h),h},zc.prototype.reduce=function cr(l){for(;l.t<=this.mt2;)l[l.t++]=0;for(var h=0;h<this.m.t;++h){var f=32767&l[h],v=f*this.mpl+((f*this.mph+(l[h]>>15)*this.mpl&this.um)<<15)&l.DM;for(l[f=h+this.m.t]+=this.m.am(0,v,l,h,0,this.m.t);l[f]>=l.DV;)l[f]-=l.DV,l[++f]++}l.clamp(),l.drShiftTo(this.m.t,l),l.compareTo(this.m)>=0&&l.subTo(this.m,l)},zc.prototype.mulTo=function jo(l,h,f){l.multiplyTo(h,f),this.reduce(f)},zc.prototype.sqrTo=function lr(l,h){l.squareTo(h),this.reduce(h)},ve.prototype.copyTo=function id(l){for(var h=this.t-1;h>=0;--h)l[h]=this[h];l.t=this.t,l.s=this.s},ve.prototype.fromInt=function Aa(l){this.t=1,this.s=l<0?-1:0,l>0?this[0]=l:l<-1?this[0]=l+this.DV:this.t=0},ve.prototype.fromString=function rd(l,h){var f;if(16==h)f=4;else if(8==h)f=3;else if(256==h)f=8;else if(2==h)f=1;else if(32==h)f=5;else{if(4!=h)return void this.fromRadix(l,h);f=2}this.t=0,this.s=0;for(var v=l.length,b=!1,E=0;--v>=0;){var M=8==f?255&l[v]:Ta(l,v);M<0?"-"==l.charAt(v)&&(b=!0):(b=!1,0==E?this[this.t++]=M:E+f>this.DB?(this[this.t-1]|=(M&(1<<this.DB-E)-1)<<E,this[this.t++]=M>>this.DB-E):this[this.t-1]|=M<<E,(E+=f)>=this.DB&&(E-=this.DB))}8==f&&128&l[0]&&(this.s=-1,E>0&&(this[this.t-1]|=(1<<this.DB-E)-1<<E)),this.clamp(),b&&ve.ZERO.subTo(this,this)},ve.prototype.clamp=function ln(){for(var l=this.s&this.DM;this.t>0&&this[this.t-1]==l;)--this.t},ve.prototype.dlShiftTo=function un(l,h){var f;for(f=this.t-1;f>=0;--f)h[f+l]=this[f];for(f=l-1;f>=0;--f)h[f]=0;h.t=this.t+l,h.s=this.s},ve.prototype.drShiftTo=function In(l,h){for(var f=l;f<this.t;++f)h[f-l]=this[f];h.t=Math.max(this.t-l,0),h.s=this.s},ve.prototype.lShiftTo=function rr(l,h){var D,f=l%this.DB,v=this.DB-f,b=(1<<v)-1,E=Math.floor(l/this.DB),M=this.s<<f&this.DM;for(D=this.t-1;D>=0;--D)h[D+E+1]=this[D]>>v|M,M=(this[D]&b)<<f;for(D=E-1;D>=0;--D)h[D]=0;h[E]=M,h.t=this.t+E+1,h.s=this.s,h.clamp()},ve.prototype.rShiftTo=function Vi(l,h){h.s=this.s;var f=Math.floor(l/this.DB);if(f>=this.t)h.t=0;else{var v=l%this.DB,b=this.DB-v,E=(1<<v)-1;h[0]=this[f]>>v;for(var M=f+1;M<this.t;++M)h[M-f-1]|=(this[M]&E)<<b,h[M-f]=this[M]>>v;v>0&&(h[this.t-f-1]|=(this.s&E)<<b),h.t=this.t-f,h.clamp()}},ve.prototype.subTo=function ac(l,h){for(var f=0,v=0,b=Math.min(l.t,this.t);f<b;)v+=this[f]-l[f],h[f++]=v&this.DM,v>>=this.DB;if(l.t<this.t){for(v-=l.s;f<this.t;)v+=this[f],h[f++]=v&this.DM,v>>=this.DB;v+=this.s}else{for(v+=this.s;f<l.t;)v-=l[f],h[f++]=v&this.DM,v>>=this.DB;v-=l.s}h.s=v<0?-1:0,v<-1?h[f++]=this.DV+v:v>0&&(h[f++]=v),h.t=f,h.clamp()},ve.prototype.multiplyTo=function so(l,h){var f=this.abs(),v=l.abs(),b=f.t;for(h.t=b+v.t;--b>=0;)h[b]=0;for(b=0;b<v.t;++b)h[b+f.t]=f.am(0,v[b],h,b,0,f.t);h.s=0,h.clamp(),this.s!=l.s&&ve.ZERO.subTo(h,h)},ve.prototype.squareTo=function cc(l){for(var h=this.abs(),f=l.t=2*h.t;--f>=0;)l[f]=0;for(f=0;f<h.t-1;++f){var v=h.am(f,h[f],l,2*f,0,1);(l[f+h.t]+=h.am(f+1,2*h[f],l,2*f+1,v,h.t-f-1))>=h.DV&&(l[f+h.t]-=h.DV,l[f+h.t+1]=1)}l.t>0&&(l[l.t-1]+=h.am(f,h[f],l,2*f,0,1)),l.s=0,l.clamp()},ve.prototype.divRemTo=function Go(l,h,f){var v=l.abs();if(!(v.t<=0)){var b=this.abs();if(b.t<v.t)return h?.fromInt(0),void(null!=f&&this.copyTo(f));null==f&&(f=Mn());var E=Mn(),M=this.s,D=l.s,R=this.DB-Kn(v[v.t-1]);R>0?(v.lShiftTo(R,E),b.lShiftTo(R,f)):(v.copyTo(E),b.copyTo(f));var k=E.t,U=E[k-1];if(0!=U){var z=U*(1<<this.F1)+(k>1?E[k-2]>>this.F2:0),F=this.FV/z,C=(1<<this.F1)/z,B=1<<this.F2,P=f.t,V=P-k,L=h??Mn();for(E.dlShiftTo(V,L),f.compareTo(L)>=0&&(f[f.t++]=1,f.subTo(L,f)),ve.ONE.dlShiftTo(k,L),L.subTo(E,E);E.t<k;)E[E.t++]=0;for(;--V>=0;){var $=f[--P]==U?this.DM:Math.floor(f[P]*F+(f[P-1]+B)*C);if((f[P]+=E.am(0,$,f,V,0,k))<$)for(E.dlShiftTo(V,L),f.subTo(L,f);f[P]<--$;)f.subTo(L,f)}null!=h&&(f.drShiftTo(k,h),M!=D&&ve.ZERO.subTo(h,h)),f.t=k,f.clamp(),R>0&&f.rShiftTo(R,f),M<0&&ve.ZERO.subTo(f,f)}}},ve.prototype.invDigit=function iu(){if(this.t<1)return 0;var l=this[0];if(!(1&l))return 0;var h=3&l;return(h=(h=(h=(h=h*(2-(15&l)*h)&15)*(2-(255&l)*h)&255)*(2-((65535&l)*h&65535))&65535)*(2-l*h%this.DV)%this.DV)>0?this.DV-h:-h},ve.prototype.isEven=function ru(){return 0==(this.t>0?1&this[0]:this.s)},ve.prototype.exp=function Eh(l,h){if(l>4294967295||l<1)return ve.ONE;var f=Mn(),v=Mn(),b=h.convert(this),E=Kn(l)-1;for(b.copyTo(f);--E>=0;)if(h.sqrTo(f,v),(l&1<<E)>0)h.mulTo(v,b,f);else{var M=f;f=v,v=M}return h.revert(f)},ve.prototype.toString=function nu(l){if(this.s<0)return"-"+this.negate().toString(l);var h;if(16==l)h=4;else if(8==l)h=3;else if(2==l)h=1;else if(32==l)h=5;else{if(4!=l)return this.toRadix(l);h=2}var v,f=(1<<h)-1,b=!1,E="",M=this.t,D=this.DB-M*this.DB%h;if(M-- >0)for(D<this.DB&&(v=this[M]>>D)>0&&(b=!0,E=an(v));M>=0;)D<h?(v=(this[M]&(1<<D)-1)<<h-D,v|=this[--M]>>(D+=this.DB-h)):(v=this[M]>>(D-=h)&f,D<=0&&(D+=this.DB,--M)),v>0&&(b=!0),b&&(E+=an(v));return b?E:"0"},ve.prototype.negate=function oc(){var l=Mn();return ve.ZERO.subTo(this,l),l},ve.prototype.abs=function Pt(){return this.s<0?this.negate():this},ve.prototype.compareTo=function $t(l){var h=this.s-l.s;if(0!=h)return h;var f=this.t;if(0!=(h=f-l.t))return this.s<0?-h:h;for(;--f>=0;)if(0!=(h=this[f]-l[f]))return h;return 0},ve.prototype.bitLength=function An(){return this.t<=0?0:this.DB*(this.t-1)+Kn(this[this.t-1]^this.s&this.DM)},ve.prototype.mod=function Ts(l){var h=Mn();return this.abs().divRemTo(l,null,h),this.s<0&&h.compareTo(ve.ZERO)>0&&l.subTo(h,h),h},ve.prototype.modPowInt=function wl(l,h){var f;return f=l<256||h.isEven()?new gt(h):new zc(h),this.exp(l,f)},ve.ZERO=zs(0),ve.ONE=zs(1),hc.prototype.convert=T0,hc.prototype.revert=T0,hc.prototype.mulTo=function As(l,h,f){l.multiplyTo(h,f)},hc.prototype.sqrTo=function bi(l,h){l.squareTo(h)},Xe.prototype.convert=function I0(l){if(l.s<0||l.t>2*this.m.t)return l.mod(this.m);if(l.compareTo(this.m)<0)return l;var h=Mn();return l.copyTo(h),this.reduce(h),h},Xe.prototype.revert=function Wn(l){return l},Xe.prototype.reduce=function dd(l){for(l.drShiftTo(this.m.t-1,this.r2),l.t>this.m.t+1&&(l.t=this.m.t+1,l.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);l.compareTo(this.r2)<0;)l.dAddOffset(1,this.m.t+1);for(l.subTo(this.r2,l);l.compareTo(this.m)>=0;)l.subTo(this.m,l)},Xe.prototype.mulTo=function Dp(l,h,f){l.multiplyTo(h,f),this.reduce(f)},Xe.prototype.sqrTo=function F0(l,h){l.squareTo(h),this.reduce(h)};var Kr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Oh=(1<<26)/Kr[Kr.length-1];function ou(){this.i=0,this.j=0,this.S=new Array}ve.prototype.chunkSize=function Mh(l){return Math.floor(Math.LN2*this.DB/Math.log(l))},ve.prototype.toRadix=function Ch(l){if(null==l&&(l=10),0==this.signum()||l<2||l>36)return"0";var h=this.chunkSize(l),f=Math.pow(l,h),v=zs(f),b=Mn(),E=Mn(),M="";for(this.divRemTo(v,b,E);b.signum()>0;)M=(f+E.intValue()).toString(l).substr(1)+M,b.divRemTo(v,b,E);return E.intValue().toString(l)+M},ve.prototype.fromRadix=function Dh(l,h){this.fromInt(0),null==h&&(h=10);for(var f=this.chunkSize(h),v=Math.pow(h,f),b=!1,E=0,M=0,D=0;D<l.length;++D){var R=Ta(l,D);R<0?"-"==l.charAt(D)&&0==this.signum()&&(b=!0):(M=h*M+R,++E>=f&&(this.dMultiply(v),this.dAddOffset(M,0),E=0,M=0))}E>0&&(this.dMultiply(Math.pow(h,E)),this.dAddOffset(M,0)),b&&ve.ZERO.subTo(this,this)},ve.prototype.fromNumber=function Sp(l,h,f){if("number"==typeof h)if(l<2)this.fromInt(1);else for(this.fromNumber(l,f),this.testBit(l-1)||this.bitwiseTo(ve.ONE.shiftLeft(l-1),Si,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(h);)this.dAddOffset(2,0),this.bitLength()>l&&this.subTo(ve.ONE.shiftLeft(l-1),this);else{var v=new Array,b=7&l;v.length=1+(l>>3),h.nextBytes(v),b>0?v[0]&=(1<<b)-1:v[0]=0,this.fromString(v,256)}},ve.prototype.bitwiseTo=function Ep(l,h,f){var v,b,E=Math.min(l.t,this.t);for(v=0;v<E;++v)f[v]=h(this[v],l[v]);if(l.t<this.t){for(b=l.s&this.DM,v=E;v<this.t;++v)f[v]=h(this[v],b);f.t=this.t}else{for(b=this.s&this.DM,v=E;v<l.t;++v)f[v]=h(b,l[v]);f.t=l.t}f.s=h(this.s,l.s),f.clamp()},ve.prototype.changeBit=function tb(l,h){var f=ve.ONE.shiftLeft(l);return this.bitwiseTo(f,h,f),f},ve.prototype.addTo=function nb(l,h){for(var f=0,v=0,b=Math.min(l.t,this.t);f<b;)v+=this[f]+l[f],h[f++]=v&this.DM,v>>=this.DB;if(l.t<this.t){for(v+=l.s;f<this.t;)v+=this[f],h[f++]=v&this.DM,v>>=this.DB;v+=this.s}else{for(v+=this.s;f<l.t;)v+=l[f],h[f++]=v&this.DM,v>>=this.DB;v+=l.s}h.s=v<0?-1:0,v>0?h[f++]=v:v<-1&&(h[f++]=this.DV+v),h.t=f,h.clamp()},ve.prototype.dMultiply=function D0(l){this[this.t]=this.am(0,l-1,this,0,0,this.t),++this.t,this.clamp()},ve.prototype.dAddOffset=function cb(l,h){if(0!=l){for(;this.t<=h;)this[this.t++]=0;for(this[h]+=l;this[h]>=this.DV;)this[h]-=this.DV,++h>=this.t&&(this[this.t++]=0),++this[h]}},ve.prototype.multiplyLowerTo=function ub(l,h,f){var b,v=Math.min(this.t+l.t,h);for(f.s=0,f.t=v;v>0;)f[--v]=0;for(b=f.t-this.t;v<b;++v)f[v+this.t]=this.am(0,l[v],f,v,0,this.t);for(b=Math.min(l.t,h);v<b;++v)this.am(0,l[v],f,v,0,h-v);f.clamp()},ve.prototype.multiplyUpperTo=function A0(l,h,f){--h;var v=f.t=this.t+l.t-h;for(f.s=0;--v>=0;)f[v]=0;for(v=Math.max(h-this.t,0);v<l.t;++v)f[this.t+v-h]=this.am(h-v,l[v],f,0,0,this.t+v-h);f.clamp(),f.drShiftTo(1,f)},ve.prototype.modInt=function kh(l){if(l<=0)return 0;var h=this.DV%l,f=this.s<0?l-1:0;if(this.t>0)if(0==h)f=this[0]%l;else for(var v=this.t-1;v>=0;--v)f=(h*f+this[v])%l;return f},ve.prototype.millerRabin=function Jt(l){var h=this.subtract(ve.ONE),f=h.getLowestSetBit();if(f<=0)return!1;var v=h.shiftRight(f);(l=l+1>>1)>Kr.length&&(l=Kr.length);for(var b=Mn(),E=0;E<l;++E){b.fromInt(Kr[Math.floor(Math.random()*Kr.length)]);var M=b.modPow(v,this);if(0!=M.compareTo(ve.ONE)&&0!=M.compareTo(h)){for(var D=1;D++<f&&0!=M.compareTo(h);)if(0==(M=M.modPowInt(2,this)).compareTo(ve.ONE))return!1;if(0!=M.compareTo(h))return!1}}return!0},ve.prototype.clone=function lc(){var l=Mn();return this.copyTo(l),l},ve.prototype.intValue=function uc(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ve.prototype.byteValue=function dc(){return 0==this.t?this.s:this[0]<<24>>24},ve.prototype.shortValue=function Sl(){return 0==this.t?this.s:this[0]<<16>>16},ve.prototype.signum=function su(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ve.prototype.toByteArray=function Th(){var l=this.t,h=new Array;h[0]=this.s;var v,f=this.DB-l*this.DB%8,b=0;if(l-- >0)for(f<this.DB&&(v=this[l]>>f)!=(this.s&this.DM)>>f&&(h[b++]=v|this.s<<this.DB-f);l>=0;)f<8?(v=(this[l]&(1<<f)-1)<<8-f,v|=this[--l]>>(f+=this.DB-8)):(v=this[l]>>(f-=8)&255,f<=0&&(f+=this.DB,--l)),128&v&&(v|=-256),0==b&&(128&this.s)!=(128&v)&&++b,(b>0||v!=this.s)&&(h[b++]=v);return h},ve.prototype.equals=function Ah(l){return 0==this.compareTo(l)},ve.prototype.min=function Ih(l){return this.compareTo(l)<0?this:l},ve.prototype.max=function Fh(l){return this.compareTo(l)>0?this:l},ve.prototype.and=function Rh(l){var h=Mn();return this.bitwiseTo(l,Pi,h),h},ve.prototype.or=function ad(l){var h=Mn();return this.bitwiseTo(l,Si,h),h},ve.prototype.xor=function Ei(l){var h=Mn();return this.bitwiseTo(l,Mp,h),h},ve.prototype.andNot=function Ph(l){var h=Mn();return this.bitwiseTo(l,Zt,h),h},ve.prototype.not=function cd(){for(var l=Mn(),h=0;h<this.t;++h)l[h]=this.DM&~this[h];return l.t=this.t,l.s=~this.s,l},ve.prototype.shiftLeft=function eb(l){var h=Mn();return l<0?this.rShiftTo(-l,h):this.lShiftTo(l,h),h},ve.prototype.shiftRight=function ld(l){var h=Mn();return l<0?this.lShiftTo(-l,h):this.rShiftTo(l,h),h},ve.prototype.getLowestSetBit=function El(){for(var l=0;l<this.t;++l)if(0!=this[l])return l*this.DB+He(this[l]);return this.s<0?this.t*this.DB:-1},ve.prototype.bitCount=function vi(){for(var l=0,h=this.s&this.DM,f=0;f<this.t;++f)l+=bn(this[f]^h);return l},ve.prototype.testBit=function Cp(l){var h=Math.floor(l/this.DB);return h>=this.t?0!=this.s:0!=(this[h]&1<<l%this.DB)},ve.prototype.setBit=function M0(l){return this.changeBit(l,Si)},ve.prototype.clearBit=function ud(l){return this.changeBit(l,Zt)},ve.prototype.flipBit=function ao(l){return this.changeBit(l,Mp)},ve.prototype.add=function C0(l){var h=Mn();return this.addTo(l,h),h},ve.prototype.subtract=function ib(l){var h=Mn();return this.subTo(l,h),h},ve.prototype.multiply=function Fa(l){var h=Mn();return this.multiplyTo(l,h),h},ve.prototype.divide=function sb(l){var h=Mn();return this.divRemTo(l,h,null),h},ve.prototype.remainder=function ob(l){var h=Mn();return this.divRemTo(l,null,h),h},ve.prototype.divideAndRemainder=function ab(l){var h=Mn(),f=Mn();return this.divRemTo(l,h,f),new Array(h,f)},ve.prototype.modPow=function Tp(l,h){var v,E,f=l.bitLength(),b=zs(1);if(f<=0)return b;v=f<18?1:f<48?3:f<144?4:f<768?5:6,E=f<8?new gt(h):h.isEven()?new Xe(h):new zc(h);var M=new Array,D=3,R=v-1,k=(1<<v)-1;if(M[1]=E.convert(this),v>1){var U=Mn();for(E.sqrTo(M[1],U);D<=k;)M[D]=Mn(),E.mulTo(U,M[D-2],M[D]),D+=2}var F,P,z=l.t-1,C=!0,B=Mn();for(f=Kn(l[z])-1;z>=0;){for(f>=R?F=l[z]>>f-R&k:(F=(l[z]&(1<<f+1)-1)<<R-f,z>0&&(F|=l[z-1]>>this.DB+f-R)),D=v;!(1&F);)F>>=1,--D;if((f-=D)<0&&(f+=this.DB,--z),C)M[F].copyTo(b),C=!1;else{for(;D>1;)E.sqrTo(b,B),E.sqrTo(B,b),D-=2;D>0?E.sqrTo(b,B):(P=b,b=B,B=P),E.mulTo(B,M[F],b)}for(;z>=0&&!(l[z]&1<<f);)E.sqrTo(b,B),P=b,b=B,B=P,--f<0&&(f=this.DB-1,--z)}return E.revert(b)},ve.prototype.modInverse=function Ml(l){var h=l.isEven();if(this.isEven()&&h||0==l.signum())return ve.ZERO;for(var f=l.clone(),v=this.clone(),b=zs(1),E=zs(0),M=zs(0),D=zs(1);0!=f.signum();){for(;f.isEven();)f.rShiftTo(1,f),h?((!b.isEven()||!E.isEven())&&(b.addTo(this,b),E.subTo(l,E)),b.rShiftTo(1,b)):E.isEven()||E.subTo(l,E),E.rShiftTo(1,E);for(;v.isEven();)v.rShiftTo(1,v),h?((!M.isEven()||!D.isEven())&&(M.addTo(this,M),D.subTo(l,D)),M.rShiftTo(1,M)):D.isEven()||D.subTo(l,D),D.rShiftTo(1,D);f.compareTo(v)>=0?(f.subTo(v,f),h&&b.subTo(M,b),E.subTo(D,E)):(v.subTo(f,v),h&&M.subTo(b,M),D.subTo(E,D))}return 0!=v.compareTo(ve.ONE)?ve.ZERO:D.compareTo(l)>=0?D.subtract(l):D.signum()<0?(D.addTo(l,D),D.signum()<0?D.add(l):D):D},ve.prototype.pow=function lb(l){return this.exp(l,new hc)},ve.prototype.gcd=function Ap(l){var h=this.s<0?this.negate():this.clone(),f=l.s<0?l.negate():l.clone();if(h.compareTo(f)<0){var v=h;h=f,f=v}var b=h.getLowestSetBit(),E=f.getLowestSetBit();if(E<0)return h;for(b<E&&(E=b),E>0&&(h.rShiftTo(E,h),f.rShiftTo(E,f));h.signum()>0;)(b=h.getLowestSetBit())>0&&h.rShiftTo(b,h),(b=f.getLowestSetBit())>0&&f.rShiftTo(b,f),h.compareTo(f)>=0?(h.subTo(f,h),h.rShiftTo(1,h)):(f.subTo(h,f),f.rShiftTo(1,f));return E>0&&f.lShiftTo(E,f),f},ve.prototype.isProbablePrime=function hd(l){var h,f=this.abs();if(1==f.t&&f[0]<=Kr[Kr.length-1]){for(h=0;h<Kr.length;++h)if(f[0]==Kr[h])return!0;return!1}if(f.isEven())return!1;for(h=1;h<Kr.length;){for(var v=Kr[h],b=h+1;b<Kr.length&&v<Oh;)v*=Kr[b++];for(v=f.modInt(v);h<b;)if(v%Kr[h++]==0)return!1}return f.millerRabin(l)},ve.prototype.square=function rb(){var l=Mn();return this.squareTo(l),l},ou.prototype.init=function Ip(l){var h,f,v;for(h=0;h<256;++h)this.S[h]=h;for(f=0,h=0;h<256;++h)v=this.S[h],this.S[h]=this.S[f=f+this.S[h]+l[h%l.length]&255],this.S[f]=v;this.i=0,this.j=0},ou.prototype.next=function co(){var l;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,l=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=l,this.S[l+this.S[this.i]&255]};var Mi,Gs,Dr,Fp=256;function fc(){!function au(l){Gs[Dr++]^=255&l,Gs[Dr++]^=l>>8&255,Gs[Dr++]^=l>>16&255,Gs[Dr++]^=l>>24&255,Dr>=Fp&&(Dr-=Fp)}((new Date).getTime())}if(null==Gs){var js;if(Gs=new Array,Dr=0,void 0!==le&&(void 0!==le.crypto||void 0!==le.msCrypto)){var cu=le.crypto||le.msCrypto;if(cu.getRandomValues){var Lh=new Uint8Array(32);for(cu.getRandomValues(Lh),js=0;js<32;++js)Gs[Dr++]=Lh[js]}else if("Netscape"==Wr.appName&&Wr.appVersion<"5"){var Nh=le.crypto.random(32);for(js=0;js<Nh.length;++js)Gs[Dr++]=255&Nh.charCodeAt(js)}}for(;Dr<Fp;)js=Math.floor(65536*Math.random()),Gs[Dr++]=js>>>8,Gs[Dr++]=255&js;Dr=0,fc()}function Rp(){if(null==Mi){for(fc(),(Mi=function fd(){return new ou}()).init(Gs),Dr=0;Dr<Gs.length;++Dr)Gs[Dr]=0;Dr=0}return Mi.next()}function Co(){}function ur(l,h){return new ve(l,h)}function dn(l,h,f){for(var v="",b=0;v.length<h;)v+=f(String.fromCharCode.apply(String,l.concat([(4278190080&b)>>24,(16711680&b)>>16,(65280&b)>>8,255&b]))),b+=1;return v}function Ut(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Do(l,h,f){for(var v="",b=0;v.length<h;)v+=f(l+String.fromCharCode.apply(String,[(4278190080&b)>>24,(16711680&b)>>16,(65280&b)>>8,255&b])),b+=1;return v}function dr(l,h){this.x=h,this.q=l}function Mt(l,h,f,v){this.curve=l,this.x=h,this.y=f,this.z=null==v?ve.ONE:v,this.zinv=null}function Or(l,h,f){this.q=l,this.a=this.fromBigInteger(h),this.b=this.fromBigInteger(f),this.infinity=new Mt(this,null,null)}Co.prototype.nextBytes=function Bh(l){var h;for(h=0;h<l.length;++h)l[h]=Rp()},Ut.prototype.doPublic=function R0(l){return l.modPowInt(this.e,this.n)},Ut.prototype.setPublic=function Gc(l,h){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof l)this.n=l,this.e=h;else{if(!(null!=l&&null!=h&&l.length>0&&h.length>0))throw"Invalid RSA public key";this.n=ur(l,16),this.e=parseInt(h,16)}},Ut.prototype.encrypt=function P0(l){var h=function Pp(l,h){if(h<l.length+11)throw"Message too long for RSA";for(var f=new Array,v=l.length-1;v>=0&&h>0;){var b=l.charCodeAt(v--);b<128?f[--h]=b:b>127&&b<2048?(f[--h]=63&b|128,f[--h]=b>>6|192):(f[--h]=63&b|128,f[--h]=b>>6&63|128,f[--h]=b>>12|224)}f[--h]=0;for(var E=new Co,M=new Array;h>2;){for(M[0]=0;0==M[0];)E.nextBytes(M);f[--h]=M[0]}return f[--h]=2,f[--h]=0,new ve(f)}(l,this.n.bitLength()+7>>3);if(null==h)return null;var f=this.doPublic(h);if(null==f)return null;var v=f.toString(16);return 1&v.length?"0"+v:v},Ut.prototype.encryptOAEP=function k0(l,h,f){var v=function pd(l,h,f,v){var b=w.crypto.MessageDigest,E=w.crypto.Util,M=null;if(f||(f="sha1"),"string"==typeof f&&(M=b.getCanonicalAlgName(f),v=b.getHashLength(M),f=function(P){return Nr(E.hashHex(hs(P),M))}),l.length+2*v+2>h)throw"Message too long for RSA";var R,D="";for(R=0;R<h-l.length-2*v-2;R+=1)D+="\0";var k=f("")+D+"\x01"+l,U=new Array(v);(new Co).nextBytes(U);var z=dn(U,k.length,f),F=[];for(R=0;R<k.length;R+=1)F[R]=k.charCodeAt(R)^z.charCodeAt(R);var C=dn(F,U.length,f),B=[0];for(R=0;R<U.length;R+=1)B[R+1]=U[R]^C.charCodeAt(R);return new ve(B.concat(F))}(l,this.n.bitLength()+7>>3,h,f);if(null==v)return null;var b=this.doPublic(v);if(null==b)return null;var E=b.toString(16);return 1&E.length?"0"+E:E},Ut.prototype.type="RSA",Ut.prototype.doPrivate=function _i(l){if(null==this.p||null==this.q)return l.modPow(this.d,this.n);for(var h=l.mod(this.p).modPow(this.dmp1,this.p),f=l.mod(this.q).modPow(this.dmq1,this.q);h.compareTo(f)<0;)h=h.add(this.p);return h.subtract(f).multiply(this.coeff).mod(this.p).multiply(this.q).add(f)},Ut.prototype.setPrivate=function zi(l,h,f){if(this.isPrivate=!0,"string"!=typeof l)this.n=l,this.e=h,this.d=f;else{if(!(null!=l&&null!=h&&l.length>0&&h.length>0))throw"Invalid RSA private key";this.n=ur(l,16),this.e=parseInt(h,16),this.d=ur(f,16)}},Ut.prototype.setPrivateEx=function Wo(l,h,f,v,b,E,M,D){if(this.isPrivate=!0,this.isPublic=!1,null==l)throw"RSASetPrivateEx N == null";if(null==h)throw"RSASetPrivateEx E == null";if(0==l.length)throw"RSASetPrivateEx N.length == 0";if(0==h.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=l&&null!=h&&l.length>0&&h.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=ur(l,16),this.e=parseInt(h,16),this.d=ur(f,16),this.p=ur(v,16),this.q=ur(b,16),this.dmp1=ur(E,16),this.dmq1=ur(M,16),this.coeff=ur(D,16)},Ut.prototype.generate=function Ra(l,h){var f=new Co,v=l>>1;this.e=parseInt(h,16);for(var b=new ve(h,16),E=l/2-100,M=ve.ONE.shiftLeft(E);;){for(;this.p=new ve(l-v,1,f),0!=this.p.subtract(ve.ONE).gcd(b).compareTo(ve.ONE)||!this.p.isProbablePrime(10););for(;this.q=new ve(v,1,f),0!=this.q.subtract(ve.ONE).gcd(b).compareTo(ve.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var D=this.p;this.p=this.q,this.q=D}var R=this.q.subtract(this.p).abs();if(!(R.bitLength()<E||R.compareTo(M)<=0)){var k=this.p.subtract(ve.ONE),U=this.q.subtract(ve.ONE),z=k.multiply(U);if(0==z.gcd(b).compareTo(ve.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==l)){this.d=b.modInverse(z),this.dmp1=this.d.mod(k),this.dmq1=this.d.mod(U),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},Ut.prototype.decrypt=function md(l){if(l.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var h=ur(l,16),f=this.doPrivate(h);return null==f?null:function pc(l,h){for(var f=l.toByteArray(),v=0;v<f.length&&0==f[v];)++v;if(f.length-v!=h-1||2!=f[v])return null;for(++v;0!=f[v];)if(++v>=f.length)return null;for(var b="";++v<f.length;){var E=255&f[v];E<128?b+=String.fromCharCode(E):E>191&&E<224?(b+=String.fromCharCode((31&E)<<6|63&f[v+1]),++v):(b+=String.fromCharCode((15&E)<<12|(63&f[v+1])<<6|63&f[v+2]),v+=2)}return b}(f,this.n.bitLength()+7>>3)},Ut.prototype.decryptOAEP=function Vh(l,h,f){if(l.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var v=ur(l,16),b=this.doPrivate(v);return null==b?null:function qi(l,h,f,v){var b=w.crypto.MessageDigest,E=w.crypto.Util,M=null;for(f||(f="sha1"),"string"==typeof f&&(M=b.getCanonicalAlgName(f),v=b.getHashLength(M),f=function(V){return Nr(E.hashHex(hs(V),M))}),l=l.toByteArray(),z=0;z<l.length;z+=1)l[z]&=255;for(;l.length<h;)l.unshift(0);if((l=String.fromCharCode.apply(String,l)).length<2*v+2)throw"Cipher too short";var z,D=l.substr(1,v),R=l.substr(v+1),k=Do(R,v,f),U=[];for(z=0;z<D.length;z+=1)U[z]=D.charCodeAt(z)^k.charCodeAt(z);var F=Do(String.fromCharCode.apply(String,U),l.length-v,f),C=[];for(z=0;z<R.length;z+=1)C[z]=R.charCodeAt(z)^F.charCodeAt(z);if((C=String.fromCharCode.apply(String,C)).substr(0,v)!==f(""))throw"Hash mismatch";var B=(C=C.substr(v)).indexOf("\x01");if((-1!=B?C.substr(0,B).lastIndexOf("\0"):-1)+1!=B)throw"Malformed data";return C.substr(B+1)}(b,this.n.bitLength()+7>>3,h,f)},dr.prototype.equals=function Hh(l){return l==this||this.q.equals(l.q)&&this.x.equals(l.x)},dr.prototype.toBigInteger=function Pa(){return this.x},dr.prototype.negate=function hr(){return new dr(this.q,this.x.negate().mod(this.q))},dr.prototype.add=function kp(l){return new dr(this.q,this.x.add(l.toBigInteger()).mod(this.q))},dr.prototype.subtract=function ai(l){return new dr(this.q,this.x.subtract(l.toBigInteger()).mod(this.q))},dr.prototype.multiply=function Op(l){return new dr(this.q,this.x.multiply(l.toBigInteger()).mod(this.q))},dr.prototype.square=function gd(){return new dr(this.q,this.x.square().mod(this.q))},dr.prototype.divide=function lo(l){return new dr(this.q,this.x.multiply(l.toBigInteger().modInverse(this.q)).mod(this.q))},dr.prototype.sqrt=function(){return new dr(this.q,this.x.sqrt().mod(this.q))},Mt.prototype.getX=function Lp(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Mt.prototype.getY=function Uh(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Mt.prototype.equals=function ht(l){return l==this||(this.isInfinity()?l.isInfinity():l.isInfinity()?this.isInfinity():!!l.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(l.z)).mod(this.curve.q).equals(ve.ZERO)&&l.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(l.z)).mod(this.curve.q).equals(ve.ZERO))},Mt.prototype.isInfinity=function Gi(){return null==this.x&&null==this.y||this.z.equals(ve.ZERO)&&!this.y.toBigInteger().equals(ve.ZERO)},Mt.prototype.negate=function yi(){return new Mt(this.curve,this.x,this.y.negate(),this.z)},Mt.prototype.add=function Ii(l){if(this.isInfinity())return l;if(l.isInfinity())return this;var h=l.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(l.z)).mod(this.curve.q),f=l.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(l.z)).mod(this.curve.q);if(ve.ZERO.equals(f))return ve.ZERO.equals(h)?this.twice():this.curve.getInfinity();var v=new ve("3"),b=this.x.toBigInteger(),E=this.y.toBigInteger(),R=(l.x.toBigInteger(),l.y.toBigInteger(),f.square()),k=R.multiply(f),U=b.multiply(R),z=h.square().multiply(this.z),F=z.subtract(U.shiftLeft(1)).multiply(l.z).subtract(k).multiply(f).mod(this.curve.q),C=U.multiply(v).multiply(h).subtract(E.multiply(k)).subtract(z.multiply(h)).multiply(l.z).add(h.multiply(k)).mod(this.curve.q),B=k.multiply(this.z).multiply(l.z).mod(this.curve.q);return new Mt(this.curve,this.curve.fromBigInteger(F),this.curve.fromBigInteger(C),B)},Mt.prototype.twice=function Is(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var l=new ve("3"),h=this.x.toBigInteger(),f=this.y.toBigInteger(),v=f.multiply(this.z),b=v.multiply(f).mod(this.curve.q),E=this.curve.a.toBigInteger(),M=h.square().multiply(l);ve.ZERO.equals(E)||(M=M.add(this.z.square().multiply(E)));var D=(M=M.mod(this.curve.q)).square().subtract(h.shiftLeft(3).multiply(b)).shiftLeft(1).multiply(v).mod(this.curve.q),R=M.multiply(l).multiply(h).subtract(b.shiftLeft(1)).shiftLeft(2).multiply(b).subtract(M.square().multiply(M)).mod(this.curve.q),k=v.square().multiply(v).shiftLeft(3).mod(this.curve.q);return new Mt(this.curve,this.curve.fromBigInteger(D),this.curve.fromBigInteger(R),k)},Mt.prototype.multiply=function Yr(l){if(this.isInfinity())return this;if(0==l.signum())return this.curve.getInfinity();var k,h=l,f=h.multiply(new ve("3")),v=this.negate(),b=this,E=this.curve.q.subtract(l),M=E.multiply(new ve("3")),D=new Mt(this.curve,this.x,this.y),R=D.negate();for(k=f.bitLength()-2;k>0;--k){b=b.twice();var U=f.testBit(k);U!=h.testBit(k)&&(b=b.add(U?this:v))}for(k=M.bitLength()-2;k>0;--k){D=D.twice();var F=M.testBit(k);F!=E.testBit(k)&&(D=D.add(F?D:R))}return b},Mt.prototype.multiplyTwo=function uo(l,h,f){var v;v=l.bitLength()>f.bitLength()?l.bitLength()-1:f.bitLength()-1;for(var b=this.curve.getInfinity(),E=this.add(h);v>=0;)b=b.twice(),l.testBit(v)?b=f.testBit(v)?b.add(E):b.add(this):f.testBit(v)&&(b=b.add(h)),--v;return b},Or.prototype.getQ=function bt(){return this.q},Or.prototype.getA=function xn(){return this.a},Or.prototype.getB=function Ki(){return this.b},Or.prototype.equals=function ei(l){return l==this||this.q.equals(l.q)&&this.a.equals(l.a)&&this.b.equals(l.b)},Or.prototype.getInfinity=function Ws(){return this.infinity},Or.prototype.fromBigInteger=function Lr(l){return new dr(this.q,l)},Or.prototype.decodePointHex=function Cl(l){switch(parseInt(l.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var h=l.substr(0,2),v=(l.substr(2),this.fromBigInteger(new ve(k,16))),b=this.getA(),E=this.getB(),D=v.square().add(b).multiply(v).add(E).sqrt();return"03"==h&&(D=D.negate()),new Mt(this,v,D);case 4:case 6:case 7:var R=(l.length-2)/2,k=l.substr(2,R),U=l.substr(R+2,R);return new Mt(this,this.fromBigInteger(new ve(k,16)),this.fromBigInteger(new ve(U,16)));default:return null}},dr.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Mt.prototype.getEncoded=function(l){var h=function(E,M){var D=E.toByteArrayUnsigned();if(M<D.length)D=D.slice(D.length-M);else for(;M>D.length;)D.unshift(0);return D},f=this.getX().toBigInteger(),v=this.getY().toBigInteger(),b=h(f,32);return l?v.isEven()?b.unshift(2):b.unshift(3):(b.unshift(4),b=b.concat(h(v,32))),b},Mt.decodeFrom=function(l,h){var v=h.length-1,b=h.slice(1,1+v/2),E=h.slice(1+v/2,1+v);b.unshift(0),E.unshift(0);var M=new ve(b),D=new ve(E);return new Mt(l,l.fromBigInteger(M),l.fromBigInteger(D))},Mt.decodeFromHex=function(l,h){h.substr(0,2);var v=h.length-2,b=h.substr(2,v/2),E=h.substr(2+v/2,v/2),M=new ve(b,16),D=new ve(E,16);return new Mt(l,l.fromBigInteger(M),l.fromBigInteger(D))},Mt.prototype.add2D=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;if(this.x.equals(l.x))return this.y.equals(l.y)?this.twice():this.curve.getInfinity();var h=l.x.subtract(this.x),v=l.y.subtract(this.y).divide(h),b=v.square().subtract(this.x).subtract(l.x),E=v.multiply(this.x.subtract(b)).subtract(this.y);return new Mt(this.curve,b,E)},Mt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var l=this.curve.fromBigInteger(ve.valueOf(2)),h=this.curve.fromBigInteger(ve.valueOf(3)),f=this.x.square().multiply(h).add(this.curve.a).divide(this.y.multiply(l)),v=f.square().subtract(this.x.multiply(l)),b=f.multiply(this.x.subtract(v)).subtract(this.y);return new Mt(this.curve,v,b)},Mt.prototype.multiply2D=function(l){if(this.isInfinity())return this;if(0==l.signum())return this.curve.getInfinity();var E,h=l,f=h.multiply(new ve("3")),v=this.negate(),b=this;for(E=f.bitLength()-2;E>0;--E){b=b.twice();var M=f.testBit(E);M!=h.testBit(E)&&(b=b.add2D(M?this:v))}return b},Mt.prototype.isOnCurve=function(){var l=this.getX().toBigInteger(),h=this.getY().toBigInteger(),f=this.curve.getA().toBigInteger(),v=this.curve.getB().toBigInteger(),b=this.curve.getQ(),E=h.multiply(h).mod(b),M=l.multiply(l).multiply(l).add(f.multiply(l)).add(v).mod(b);return E.equals(M)},Mt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Mt.prototype.validate=function(){var l=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var h=this.getX().toBigInteger(),f=this.getY().toBigInteger();if(h.compareTo(ve.ONE)<0||h.compareTo(l.subtract(ve.ONE))>0)throw new Error("x coordinate out of bounds");if(f.compareTo(ve.ONE)<0||f.compareTo(l.subtract(ve.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(l).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var Yi=function(){var v=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),b=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),E={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function M(z,F,C){return F?E[F]:String.fromCharCode(parseInt(C,16))}var D=new String(""),U=Object.hasOwnProperty;return function(z,F){var B,C=z.match(v),P=C[0],V=!1;"{"===P?B={}:"["===P?B=[]:(B=[],V=!0);for(var L,$=[B],J=1-V,Q=C.length;J<Q;++J){var te;switch((P=C[J]).charCodeAt(0)){default:(te=$[0])[L||te.length]=+P,L=void 0;break;case 34:if(-1!==(P=P.substring(1,P.length-1)).indexOf("\\")&&(P=P.replace(b,M)),te=$[0],!L){if(!(te instanceof Array)){L=P||D;break}L=te.length}te[L]=P,L=void 0;break;case 91:$.unshift((te=$[0])[L||te.length]=[]),L=void 0;break;case 93:case 125:$.shift();break;case 102:(te=$[0])[L||te.length]=!1,L=void 0;break;case 110:(te=$[0])[L||te.length]=null,L=void 0;break;case 116:(te=$[0])[L||te.length]=!0,L=void 0;break;case 123:$.unshift((te=$[0])[L||te.length]={}),L=void 0}}if(V){if(1!==$.length)throw new Error;B=B[0]}else if($.length)throw new Error;if(F){var we=function(Ae,j){var q=Ae[j];if(q&&"object"==typeof q){var ee=null;for(var ie in q)if(U.call(q,ie)&&q!==Ae){var de=we(q,ie);void 0!==de?q[ie]=de:(ee||(ee=[]),ee.push(ie))}if(ee)for(var be=ee.length;--be>=0;)delete q[ee[be]]}return F.call(Ae,j,q)};B=we({"":B},"")}return B}}();(typeof w>"u"||!w)&&(w={}),(typeof w.asn1>"u"||!w.asn1)&&(w.asn1={}),w.asn1.ASN1Util=new function(){this.integerToByteHex=function(l){var h=l.toString(16);return h.length%2==1&&(h="0"+h),h},this.bigIntToMinTwosComplementsHex=function(l){var h=l.toString(16);if("-"!=h.substr(0,1))h.length%2==1?h="0"+h:h.match(/^[0-7]/)||(h="00"+h);else{var v=h.substr(1).length;v%2==1?v+=1:h.match(/^[0-7]/)||(v+=2);for(var b="",E=0;E<v;E++)b+="f";h=new ve(b,16).xor(l).add(ve.ONE).toString(16).replace(/^-/,"")}return h},this.getPEMStringFromHex=function(l,h){return Ar(l,h)},this.newObject=function(l){var f=w.asn1,v=f.ASN1Object,b=f.DERBoolean,E=f.DERInteger,M=f.DERBitString,D=f.DEROctetString,R=f.DERNull,k=f.DERObjectIdentifier,U=f.DEREnumerated,z=f.DERUTF8String,F=f.DERNumericString,C=f.DERPrintableString,B=f.DERTeletexString,P=f.DERIA5String,V=f.DERUTCTime,L=f.DERGeneralizedTime,$=f.DERVisibleString,J=f.DERBMPString,Q=f.DERSequence,te=f.DERSet,we=f.DERTaggedObject,Ae=f.ASN1Util.newObject;if(l instanceof f.ASN1Object)return l;var j=Object.keys(l);if(1!=j.length)throw new Error("key of param shall be only one.");var q=j[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+q+":"))throw new Error("undefined key: "+q);if("bool"==q)return new b(l[q]);if("int"==q)return new E(l[q]);if("bitstr"==q)return new M(l[q]);if("octstr"==q)return new D(l[q]);if("null"==q)return new R(l[q]);if("oid"==q)return new k(l[q]);if("enum"==q)return new U(l[q]);if("utf8str"==q)return new z(l[q]);if("numstr"==q)return new F(l[q]);if("prnstr"==q)return new C(l[q]);if("telstr"==q)return new B(l[q]);if("ia5str"==q)return new P(l[q]);if("utctime"==q)return new V(l[q]);if("gentime"==q)return new L(l[q]);if("visstr"==q)return new $(l[q]);if("bmpstr"==q)return new J(l[q]);if("asn1"==q)return new v(l[q]);if("seq"==q){for(var ee=l[q],ie=[],de=0;de<ee.length;de++){var be=Ae(ee[de]);ie.push(be)}return new Q({array:ie})}if("set"==q){for(ee=l[q],ie=[],de=0;de<ee.length;de++)be=Ae(ee[de]),ie.push(be);return new te({array:ie})}if("tag"==q){var ce=l[q];if("[object Array]"===Object.prototype.toString.call(ce)&&3==ce.length){var pe=Ae(ce[2]);return new we({tag:ce[0],explicit:ce[1],obj:pe})}return new we(ce)}},this.jsonToASN1HEX=function(l){return this.newObject(l).tohex()}},w.asn1.ASN1Util.oidHexToInt=function(l){for(var b="",h=parseInt(l.substr(0,2),16),E=(b=Math.floor(h/40)+"."+h%40,""),M=2;M<l.length;M+=2){var R=("00000000"+parseInt(l.substr(M,2),16).toString(2)).slice(-8);E+=R.substr(1,7),"0"==R.substr(0,1)&&(b=b+"."+new ve(E,2).toString(10),E="")}return b},w.asn1.ASN1Util.oidIntToHex=function(l){var h=function(D){var R=D.toString(16);return 1==R.length&&(R="0"+R),R},f=function(D){var R="",U=new ve(D,10).toString(2),z=7-U.length%7;7==z&&(z=0);for(var F="",C=0;C<z;C++)F+="0";for(U=F+U,C=0;C<U.length-1;C+=7){var B=U.substr(C,7);C!=U.length-7&&(B="1"+B),R+=h(parseInt(B,2))}return R};if(!l.match(/^[0-9.]+$/))throw"malformed oid string: "+l;var v="",b=l.split("."),E=40*parseInt(b[0])+parseInt(b[1]);v+=h(E),b.splice(0,2);for(var M=0;M<b.length;M++)v+=f(b[M]);return v},w.asn1.ASN1Object=function(l){this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var M=this.hV.length/2,D=M.toString(16);if(D.length%2==1&&(D="0"+D),M<128)return D;var R=D.length/2;if(R>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+M.toString(16));return(128+R).toString(16)+D},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(M){this.params=M},null!=l&&null!=l.tlv&&(this.hTLV=l.tlv,this.isModified=!1)},w.asn1.DERAbstractString=function(l){w.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(v){this.hTLV=null,this.isModified=!0,this.s=v,this.hV=To(this.s).toLowerCase()},this.setStringHex=function(v){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=v},this.getFreshValueHex=function(){return this.hV},typeof l<"u"&&("string"==typeof l?this.setString(l):typeof l.str<"u"?this.setString(l.str):typeof l.hex<"u"&&this.setStringHex(l.hex))},Ve(w.asn1.DERAbstractString,w.asn1.ASN1Object),w.asn1.DERAbstractTime=function(l){w.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(v){var b=v.getTime()+6e4*v.getTimezoneOffset();return new Date(b)},this.formatDate=function(v,b,E){var M=this.zeroPadding,D=this.localDateToUTC(v),R=String(D.getFullYear());"utc"==b&&(R=R.substr(2,2));var B=R+M(String(D.getMonth()+1),2)+M(String(D.getDate()),2)+M(String(D.getHours()),2)+M(String(D.getMinutes()),2)+M(String(D.getSeconds()),2);if(!0===E){var P=D.getMilliseconds();if(0!=P){var V=M(String(P),3);B=B+"."+(V=V.replace(/[0]+$/,""))}}return B+"Z"},this.zeroPadding=function(v,b){return v.length>=b?v:new Array(b-v.length+1).join("0")+v},this.setByParam=function(v){this.hV=null,this.hTLV=null,this.params=v},this.getString=function(){},this.setString=function(v){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=v},this.setByDate=function(v){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=v},this.setByDateValue=function(v,b,E,M,D,R){var k=new Date(Date.UTC(v,b-1,E,M,D,R,0));this.setByDate(k)},this.getFreshValueHex=function(){return this.hV}},Ve(w.asn1.DERAbstractTime,w.asn1.ASN1Object),w.asn1.DERAbstractStructured=function(l){w.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(f){this.hTLV=null,this.isModified=!0,this.asn1Array=f},this.appendASN1Object=function(f){this.hTLV=null,this.isModified=!0,this.asn1Array.push(f)},this.asn1Array=new Array,typeof l<"u"&&typeof l.array<"u"&&(this.asn1Array=l.array)},Ve(w.asn1.DERAbstractStructured,w.asn1.ASN1Object),w.asn1.DERBoolean=function(l){w.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==l?"010100":"0101ff"},Ve(w.asn1.DERBoolean,w.asn1.ASN1Object),w.asn1.DERInteger=function(l){w.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(h){this.hTLV=null,this.isModified=!0,this.hV=w.asn1.ASN1Util.bigIntToMinTwosComplementsHex(h)},this.setByInteger=function(h){var f=new ve(String(h),10);this.setByBigInteger(f)},this.setValueHex=function(h){this.hV=h},this.getFreshValueHex=function(){return this.hV},typeof l<"u"&&(typeof l.bigint<"u"?this.setByBigInteger(l.bigint):typeof l.int<"u"?this.setByInteger(l.int):"number"==typeof l?this.setByInteger(l):typeof l.hex<"u"&&this.setValueHex(l.hex))},Ve(w.asn1.DERInteger,w.asn1.ASN1Object),w.asn1.DERBitString=function(l){if(void 0!==l&&typeof l.obj<"u"){var h=w.asn1.ASN1Util.newObject(l.obj);l.hex="00"+h.tohex()}w.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(f){this.hTLV=null,this.isModified=!0,this.hV=f},this.setUnusedBitsAndHexValue=function(f,v){if(f<0||7<f)throw"unused bits shall be from 0 to 7: u = "+f;var b="0"+f;this.hTLV=null,this.isModified=!0,this.hV=b+v},this.setByBinaryString=function(f){var v=8-(f=f.replace(/0+$/,"")).length%8;8==v&&(v=0),f+="0000000".substr(0,v);for(var b="",E=0;E<f.length-1;E+=8){var M=f.substr(E,8),D=parseInt(M,2).toString(16);1==D.length&&(D="0"+D),b+=D}this.hTLV=null,this.isModified=!0,this.hV="0"+v+b},this.setByBooleanArray=function(f){for(var v="",b=0;b<f.length;b++)v+=1==f[b]?"1":"0";this.setByBinaryString(v)},this.newFalseArray=function(f){for(var v=new Array(f),b=0;b<f;b++)v[b]=!1;return v},this.getFreshValueHex=function(){return this.hV},typeof l<"u"&&("string"==typeof l&&l.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(l):typeof l.hex<"u"?this.setHexValueIncludingUnusedBits(l.hex):typeof l.bin<"u"?this.setByBinaryString(l.bin):typeof l.array<"u"&&this.setByBooleanArray(l.array))},Ve(w.asn1.DERBitString,w.asn1.ASN1Object),w.asn1.DEROctetString=function(l){if(void 0!==l&&typeof l.obj<"u"){var h=w.asn1.ASN1Util.newObject(l.obj);l.hex=h.tohex()}w.asn1.DEROctetString.superclass.constructor.call(this,l),this.hT="04"},Ve(w.asn1.DEROctetString,w.asn1.DERAbstractString),w.asn1.DERNull=function(){w.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Ve(w.asn1.DERNull,w.asn1.ASN1Object),w.asn1.DERObjectIdentifier=function(l){w.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(h){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=h},this.setValueOidString=function(h){var f=function mo(l){var h=function(D){var R=D.toString(16);return 1==R.length&&(R="0"+R),R},f=function(D){var R="",U=parseInt(D,10).toString(2),z=7-U.length%7;7==z&&(z=0);for(var F="",C=0;C<z;C++)F+="0";for(U=F+U,C=0;C<U.length-1;C+=7){var B=U.substr(C,7);C!=U.length-7&&(B="1"+B),R+=h(parseInt(B,2))}return R};try{if(!l.match(/^[0-9.]+$/))return null;var v="",b=l.split("."),E=40*parseInt(b[0],10)+parseInt(b[1],10);v+=h(E),b.splice(0,2);for(var M=0;M<b.length;M++)v+=f(b[M]);return v}catch{return null}}(h);if(null==f)throw new Error("malformed oid string: "+h);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=f},this.setValueName=function(h){var f=w.asn1.x509.OID.name2oid(h);if(""===f)throw new Error("DERObjectIdentifier oidName undefined: "+h);this.setValueOidString(f)},this.setValueNameOrOid=function(h){h.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(h):this.setValueName(h)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(h){"string"==typeof h?this.setValueNameOrOid(h):void 0!==h.oid?this.setValueNameOrOid(h.oid):void 0!==h.name?this.setValueNameOrOid(h.name):void 0!==h.hex&&this.setValueHex(h.hex)},void 0!==l&&this.setByParam(l)},Ve(w.asn1.DERObjectIdentifier,w.asn1.ASN1Object),w.asn1.DEREnumerated=function(l){w.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(h){this.hTLV=null,this.isModified=!0,this.hV=w.asn1.ASN1Util.bigIntToMinTwosComplementsHex(h)},this.setByInteger=function(h){var f=new ve(String(h),10);this.setByBigInteger(f)},this.setValueHex=function(h){this.hV=h},this.getFreshValueHex=function(){return this.hV},typeof l<"u"&&(typeof l.int<"u"?this.setByInteger(l.int):"number"==typeof l?this.setByInteger(l):typeof l.hex<"u"&&this.setValueHex(l.hex))},Ve(w.asn1.DEREnumerated,w.asn1.ASN1Object),w.asn1.DERUTF8String=function(l){w.asn1.DERUTF8String.superclass.constructor.call(this,l),this.hT="0c"},Ve(w.asn1.DERUTF8String,w.asn1.DERAbstractString),w.asn1.DERNumericString=function(l){w.asn1.DERNumericString.superclass.constructor.call(this,l),this.hT="12"},Ve(w.asn1.DERNumericString,w.asn1.DERAbstractString),w.asn1.DERPrintableString=function(l){w.asn1.DERPrintableString.superclass.constructor.call(this,l),this.hT="13"},Ve(w.asn1.DERPrintableString,w.asn1.DERAbstractString),w.asn1.DERTeletexString=function(l){w.asn1.DERTeletexString.superclass.constructor.call(this,l),this.hT="14"},Ve(w.asn1.DERTeletexString,w.asn1.DERAbstractString),w.asn1.DERIA5String=function(l){w.asn1.DERIA5String.superclass.constructor.call(this,l),this.hT="16"},Ve(w.asn1.DERIA5String,w.asn1.DERAbstractString),w.asn1.DERVisibleString=function(l){w.asn1.DERIA5String.superclass.constructor.call(this,l),this.hT="1a"},Ve(w.asn1.DERVisibleString,w.asn1.DERAbstractString),w.asn1.DERBMPString=function(l){w.asn1.DERBMPString.superclass.constructor.call(this,l),this.hT="1e"},Ve(w.asn1.DERBMPString,w.asn1.DERAbstractString),w.asn1.DERUTCTime=function(l){w.asn1.DERUTCTime.superclass.constructor.call(this,l),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var h=this.params;if(null==this.params&&(h={date:new Date}),"string"==typeof h){if(!h.match(/^[0-9]{12}Z$/)&&!h.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+h);this.hV=Tr(h)}else null!=h.str?this.hV=Tr(h.str):null==h.date&&1==h.millis?this.hV=Tr(this.formatDate(new Date,"utc",!0)):null!=h.date&&h.date instanceof Date?this.hV=Tr(this.formatDate(h.date,"utc",!0===h.millis)):h instanceof Date&&(this.hV=Tr(this.formatDate(h,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=l&&this.setByParam(l)},Ve(w.asn1.DERUTCTime,w.asn1.DERAbstractTime),w.asn1.DERGeneralizedTime=function(l){w.asn1.DERGeneralizedTime.superclass.constructor.call(this,l),this.hT="18",this.params=l,this.getFreshValueHex=function(){var h=this.params;if(null==this.params&&(h={date:new Date}),"string"==typeof h){if(!h.match(/^[0-9]{14}Z$/)&&!h.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+h);this.hV=Tr(h)}else null!=h.str?this.hV=Tr(h.str):null==h.date&&1==h.millis?this.hV=Tr(this.formatDate(new Date,"gen",!0)):null!=h.date&&h.date instanceof Date?this.hV=Tr(this.formatDate(h.date,"gen",!0===h.millis)):h instanceof Date&&(this.hV=Tr(this.formatDate(h,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=l&&this.setByParam(l)},Ve(w.asn1.DERGeneralizedTime,w.asn1.DERAbstractTime),w.asn1.DERSequence=function(l){w.asn1.DERSequence.superclass.constructor.call(this,l),this.hT="30",this.getFreshValueHex=function(){for(var h="",f=0;f<this.asn1Array.length;f++)h+=this.asn1Array[f].tohex();return this.hV=h,this.hV}},Ve(w.asn1.DERSequence,w.asn1.DERAbstractStructured),w.asn1.DERSet=function(l){w.asn1.DERSet.superclass.constructor.call(this,l),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var h=new Array,f=0;f<this.asn1Array.length;f++)h.push(this.asn1Array[f].tohex());return 1==this.sortFlag&&h.sort(),this.hV=h.join(""),this.hV},typeof l<"u"&&typeof l.sortflag<"u"&&0==l.sortflag&&(this.sortFlag=!1)},Ve(w.asn1.DERSet,w.asn1.DERAbstractStructured),w.asn1.DERTaggedObject=function(l){w.asn1.DERTaggedObject.superclass.constructor.call(this);var h=w.asn1,v=rt.getV,E=h.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(M,D,R){this.params={tag:D,explicit:M,obj:R}},this.getFreshValueHex=function(){var M=this.params;if(null==M.explicit&&(M.explicit=!0),null!=M.tage&&(M.tag=M.tage,M.explicit=!0),null!=M.tagi&&(M.tag=M.tagi,M.explicit=!1),null!=M.str)this.hV=To(M.str);else if(null!=M.hex)this.hV=M.hex;else{if(null==M.obj)throw new Error("str, hex nor obj not specified");var D;M.obj instanceof h.ASN1Object?D=M.obj.tohex():"object"==typeof M.obj&&(D=E(M.obj).tohex()),this.hV=M.explicit?D:v(D,0)}return null==M.tag&&(M.tag="a0"),this.hT=M.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(M){this.params=M},void 0!==l&&this.setByParam(l)},Ve(w.asn1.DERTaggedObject,w.asn1.ASN1Object);var w,Tl,ho,rt=new function(){};function aa(l){for(var h="",f=0;f<l.length;f++){var v=l[f].toString(16);1==v.length&&(v="0"+v),h+=v}return h}function Tr(l){return aa(function lu(l){for(var h=new Array,f=0;f<l.length;f++)h[f]=l.charCodeAt(f);return h}(l))}function Zr(l){return(l=(l=l.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ca(l){return l.length%4==2?l+="==":l.length%4==3&&(l+="="),(l=l.replace(/-/g,"+")).replace(/_/g,"/")}function wr(l){return l.length%2==1&&(l="0"+l),Zr(fi(l))}function Qt(l){return ro(ca(l))}function To(l){return po(Fe(l)).toLowerCase()}function Yn(l){try{return decodeURIComponent(Gh(l))}catch{return null}}function ds(l){return Yn(function fo(l){for(var h=l.match(/.{1,2}/g),f=[],v=0;v<h.length;v++){var b=parseInt(h[v],16);161<=b&&b<=191?(f.push("c2"),f.push(h[v])):192<=b&&b<=255?(f.push("c3"),f.push((b-64).toString(16))):f.push(h[v])}return f.join("")}(l))}function Nr(l){for(var h="",f=0;f<l.length-1;f+=2)h+=String.fromCharCode(parseInt(l.substr(f,2),16));return h}function hs(l){for(var h="",f=0;f<l.length;f++)h+=("0"+l.charCodeAt(f).toString(16)).slice(-2);return h}function Ao(l){var f=function la(l){return fi(l)}(l).replace(/(.{64})/g,"$1\r\n");return f.replace(/\r\n$/,"")}function Ar(l,h){return"-----BEGIN "+h+"-----\r\n"+Ao(l)+"\r\n-----END "+h+"-----\r\n"}function er(l,h){if(-1==l.indexOf("-----BEGIN "))throw"can't find PEM header: "+h;return function Np(l){return ro(l.replace(/[^0-9A-Za-z\/+=]*/g,""))}(l=void 0!==h?(l=l.replace(new RegExp("^[^]*-----BEGIN "+h+"-----"),"")).replace(new RegExp("-----END "+h+"-----[^]*$"),""):(l=l.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function O0(l){return Math.round(function Bp(l){var h,f,v,b,E,M,D,k,U,z,F;if(F=l.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return k=F[1],h=parseInt(k),2===k.length&&(50<=h&&h<100?h=1900+h:0<=h&&h<50&&(h=2e3+h)),f=parseInt(F[2])-1,v=parseInt(F[3]),b=parseInt(F[4]),E=parseInt(F[5]),M=parseInt(F[6]),D=0,""!==(U=F[7])&&(z=(U.substr(1)+"00").substr(0,3),D=parseInt(z)),Date.UTC(h,f,v,b,E,M,D);throw new Error("unsupported zulu format: "+l)}(l)/1e3)}function po(l){return l.replace(/%/g,"")}function Gh(l){return l.replace(/(..)/g,"%$1")}function Vp(l){var h="malformed IPv6 address";if(!l.match(/^[0-9A-Fa-f:]+$/))throw h;var f=(l=l.toLowerCase()).split(":").length-1;if(f<2)throw h;var v=":".repeat(7-f+2),b=(l=l.replace("::",v)).split(":");if(8!=b.length)throw h;for(var E=0;E<8;E++)b[E]=("0000"+b[E]).slice(-4);return b.join("")}function Hp(l){if(!l.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+l);var h=(l=l.toLowerCase()).match(/.{1,4}/g);h=h.map(function(b){return b.replace(/^0+/,"")}),h=h.map(function(b){return""==b?"0":b});var f=(l=":"+h.join(":")+":").match(/:(0:){2,}/g);if(null==f)return l.slice(1,-1);var v=f.sort().slice(-1)[0];return"::"!=(l=l.replace(v.substr(0,v.length-1),":")).substr(0,2)&&(l=l.substr(1)),"::"!=l.substr(-2,2)&&(l=l.substr(0,l.length-1)),l}function jh(l){var h=new Error("malformed hex value");if(!l.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw h;if(8==l.length)try{return parseInt(l.substr(0,2),16)+"."+parseInt(l.substr(2,2),16)+"."+parseInt(l.substr(4,2),16)+"."+parseInt(l.substr(6,2),16)}catch{throw h}else{if(16!=l.length){if(32==l.length)return Hp(l);if(64==l.length){try{return Hp(l.substr(0,32))+"/"+L0(l.substr(32))}catch{throw h}return}return l}try{return jh(l.substr(0,8))+"/"+L0(l.substr(8))}catch{throw h}}}function L0(l){var f,h=new Error("malformed mask");try{f=new ve(l,16).toString(2)}catch{throw h}if(!f.match(/^1*0*$/))throw h;return f.replace(/0+$/,"").length}function du(l){var h=new Error("malformed IP address");if(!(l=l.toLowerCase(l)).match(/^[0-9a-f.:/]+$/))throw h;if(!l.match(/^[0-9.]+$/)){var M;if(l.match(/^[0-9.]+\/[0-9]+$/))return du((M=l.split("/"))[0])+xe(parseInt(M[1]),32);if(l.match(/^[0-9a-f:]+$/)&&-1!==l.indexOf(":"))return Vp(l);if(l.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==l.indexOf(":"))return Vp((M=l.split("/"))[0])+xe(parseInt(M[1]),128);throw h}var f=l.split(".");if(4!==f.length)throw h;var v="";try{for(var b=0;b<4;b++)v+=("0"+parseInt(f[b]).toString(16)).slice(-2);return v}catch{throw h}}function xe(l,h){return 32==h&&0==l?"00000000":128==h&&0==l?"00000000000000000000000000000000":new ve(Array(l+1).join("1")+Array(h-l+1).join("0"),2).toString(16)}function ze(l){var v=l.match(/.{4}/g).map(function h(b){var E=parseInt(b.substr(0,2),16),M=parseInt(b.substr(2),16);if(0==E&M<128)return String.fromCharCode(M);if(E<8){var R=128|63&M;return Yn((192|(7&E)<<3|(192&M)>>6).toString(16)+R.toString(16))}R=128|(15&E)<<2|(192&M)>>6;var k=128|63&M;return Yn((224|(240&E)>>4).toString(16)+R.toString(16)+k.toString(16))});return v.join("")}function Fe(l){for(var h=encodeURIComponent(l),f="",v=0;v<h.length;v++)"%"==h[v]?(f+=h.substr(v,3),v+=2):f=f+"%"+Tr(h[v]);return f}function Un(l){return!(l.length%2!=0||!l.match(/^[0-9a-f]+$/)&&!l.match(/^[0-9A-F]+$/))}function fr(l){return!!l.match(/^[0-9A-Za-z-_.]+$/)}function Dn(l){return l.length%2==1?"0"+l:l.substr(0,1)>"7"?"00"+l:l}function vc(l){if(!Un(l))return null;try{var h=[],f=l.substr(0,2),v=parseInt(f,16);h[0]=new String(Math.floor(v/40)),h[1]=new String(v%40);for(var b=l.substr(2),E=[],M=0;M<b.length/2;M++)E.push(parseInt(b.substr(2*M,2),16));var D=[],R="";for(M=0;M<E.length;M++)128&E[M]?R+=hu((127&E[M]).toString(2),7):(R+=hu((127&E[M]).toString(2),7),D.push(new String(parseInt(R,2))),R="");var k=h.join(".");return D.length>0&&(k=k+"."+D.join(".")),k}catch{return null}}rt.getLblen=function(l,h){if("8"!=l.substr(h+2,1))return 1;var f=parseInt(l.substr(h+3,1));return 0==f?-1:0<f&&f<10?f+1:-2},rt.getL=function(l,h){var f=rt.getLblen(l,h);return f<1?"":l.substr(h+2,2*f)},rt.getVblen=function(l,h){var f;return""==(f=rt.getL(l,h))?-1:("8"===f.substr(0,1)?new ve(f.substr(2),16):new ve(f,16)).intValue()},rt.getVidx=function(l,h){var f=rt.getLblen(l,h);return f<0?f:h+2*(f+1)},rt.getV=function(l,h){var f=rt.getVidx(l,h),v=rt.getVblen(l,h);return l.substr(f,2*v)},rt.getTLV=function(l,h){return l.substr(h,2)+rt.getL(l,h)+rt.getV(l,h)},rt.getTLVblen=function(l,h){return 2+2*rt.getLblen(l,h)+2*rt.getVblen(l,h)},rt.getNextSiblingIdx=function(l,h){return rt.getVidx(l,h)+2*rt.getVblen(l,h)},rt.getChildIdx=function(l,h){var b,E,M,f=rt,v=[];b=f.getVidx(l,h),E=2*f.getVblen(l,h),"03"==l.substr(h,2)&&(b+=2,E-=2),M=0;for(var D=b;M<=E;){var R=f.getTLVblen(l,D);if((M+=R)<=E&&v.push(D),D+=R,M>=E)break}return v},rt.getNthChildIdx=function(l,h,f){return rt.getChildIdx(l,h)[f]},rt.getIdxbyList=function(l,h,f,v){var E,M,b=rt;return 0==f.length?void 0!==v&&l.substr(h,2)!==v?-1:h:(E=f.shift())>=(M=b.getChildIdx(l,h)).length?-1:b.getIdxbyList(l,M[E],f,v)},rt.getIdxbyListEx=function(l,h,f,v){var E,M,b=rt;if(0==f.length)return void 0!==v&&l.substr(h,2)!==v?-1:h;E=f.shift(),M=b.getChildIdx(l,h);for(var D=0,R=0;R<M.length;R++){var k=l.substr(M[R],2);if("number"==typeof E&&!b.isContextTag(k)&&D==E||"string"==typeof E&&b.isContextTag(k,E))return b.getIdxbyListEx(l,M[R],f,v);b.isContextTag(k)||D++}return-1},rt.getTLVbyList=function(l,h,f,v){var b=rt,E=b.getIdxbyList(l,h,f,v);return-1==E||E>=l.length?null:b.getTLV(l,E)},rt.getTLVbyListEx=function(l,h,f,v){var b=rt,E=b.getIdxbyListEx(l,h,f,v);return-1==E?null:b.getTLV(l,E)},rt.getVbyList=function(l,h,f,v,b){var M,D,E=rt;return-1==(M=E.getIdxbyList(l,h,f,v))||M>=l.length?null:(D=E.getV(l,M),!0===b&&(D=D.substr(2)),D)},rt.getVbyListEx=function(l,h,f,v,b){var M,R,E=rt;return-1==(M=E.getIdxbyListEx(l,h,f,v))?null:(R=E.getV(l,M),"03"==l.substr(M,2)&&!1!==b&&(R=R.substr(2)),R)},rt.getInt=function(l,h,f){null==f&&(f=-1);try{var v=l.substr(h,2);if("02"!=v&&"03"!=v)return f;var b=rt.getV(l,h);return"02"==v?parseInt(b,16):function jc(l){if(l.length%2!=0||null==(l=l.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var h=l.substr(0,2);if("00"==h)return parseInt(l.substr(2),16);var f=parseInt(h,16);if(f>7)return-1;var v=l.substr(2),b=parseInt(v,16).toString(2);"0"==b&&(b="00000000"),b=b.slice(0,0-f);var E=parseInt(b,2);return NaN==E?-1:E}catch{return-1}}(b)}catch{return f}},rt.getOID=function(l,h,f){null==f&&(f=null);try{return"06"!=l.substr(h,2)?f:vc(rt.getV(l,h))}catch{return f}},rt.getOIDName=function(l,h,f){null==f&&(f=null);try{var v=rt.getOID(l,h,f);if(v==f)return f;var b=w.asn1.x509.OID.oid2name(v);return""==b?v:b}catch{return f}},rt.getString=function(l,h,f){null==f&&(f=null);try{return Nr(rt.getV(l,h))}catch{return f}},rt.hextooidstr=function(l){var h=function(z,F){return z.length>=F?z:new Array(F-z.length+1).join("0")+z},f=[],v=l.substr(0,2),b=parseInt(v,16);f[0]=new String(Math.floor(b/40)),f[1]=new String(b%40);for(var E=l.substr(2),M=[],D=0;D<E.length/2;D++)M.push(parseInt(E.substr(2*D,2),16));var R=[],k="";for(D=0;D<M.length;D++)128&M[D]?k+=h((127&M[D]).toString(2),7):(k+=h((127&M[D]).toString(2),7),R.push(new String(parseInt(k,2))),k="");var U=f.join(".");return R.length>0&&(U=U+"."+R.join(".")),U},rt.dump=function(l,h,f,v){var b=rt,E=b.getV,M=b.dump,D=b.getChildIdx,R=l;l instanceof w.asn1.ASN1Object&&(R=l.tohex());var k=function(Ae,j){return Ae.length<=2*j?Ae:Ae.substr(0,j)+"..(total "+Ae.length/2+"bytes).."+Ae.substr(Ae.length-j,j)};void 0===h&&(h={ommit_long_octet:32}),void 0===f&&(f=0),void 0===v&&(v="");var te,U=h.ommit_long_octet;if("01"==(te=R.substr(f,2)))return"00"==(z=E(R,f))?v+"BOOLEAN FALSE\n":v+"BOOLEAN TRUE\n";if("02"==te)return v+"INTEGER "+k(z=E(R,f),U)+"\n";if("03"==te){var z=E(R,f);return b.isASN1HEX(z.substr(2))?(F=v+"BITSTRING, encapsulates\n")+M(z.substr(2),h,0,v+"  "):v+"BITSTRING "+k(z,U)+"\n"}if("04"==te)return z=E(R,f),b.isASN1HEX(z)?(F=v+"OCTETSTRING, encapsulates\n")+M(z,h,0,v+"  "):v+"OCTETSTRING "+k(z,U)+"\n";if("05"==te)return v+"NULL\n";if("06"==te){var C=E(R,f),B=w.asn1.ASN1Util.oidHexToInt(C),P=w.asn1.x509.OID.oid2name(B),V=B.replace(/\./g," ");return""!=P?v+"ObjectIdentifier "+P+" ("+V+")\n":v+"ObjectIdentifier ("+V+")\n"}if("0a"==te)return v+"ENUMERATED "+parseInt(E(R,f))+"\n";if("0c"==te)return v+"UTF8String '"+Yn(E(R,f))+"'\n";if("13"==te)return v+"PrintableString '"+Yn(E(R,f))+"'\n";if("14"==te)return v+"TeletexString '"+Yn(E(R,f))+"'\n";if("16"==te)return v+"IA5String '"+Yn(E(R,f))+"'\n";if("17"==te)return v+"UTCTime "+Yn(E(R,f))+"\n";if("18"==te)return v+"GeneralizedTime "+Yn(E(R,f))+"\n";if("1a"==te)return v+"VisualString '"+Yn(E(R,f))+"'\n";if("1e"==te)return v+"BMPString '"+ze(E(R,f))+"'\n";if("30"==te){if("3000"==R.substr(f,4))return v+"SEQUENCE {}\n";F=v+"SEQUENCE\n";var $=h;if((2==(L=D(R,f)).length||3==L.length)&&"06"==R.substr(L[0],2)&&"04"==R.substr(L[L.length-1],2)){P=b.oidname(E(R,L[0]));var J=JSON.parse(JSON.stringify(h));J.x509ExtName=P,$=J}for(var Q=0;Q<L.length;Q++)F+=M(R,$,L[Q],v+"  ");return F}if("31"==te){F=v+"SET\n";var L=D(R,f);for(Q=0;Q<L.length;Q++)F+=M(R,h,L[Q],v+"  ");return F}if(128&(te=parseInt(te,16))){var F,we=31&te;if(32&te){for(F=v+"["+we+"]\n",L=D(R,f),Q=0;Q<L.length;Q++)F+=M(R,h,L[Q],v+"  ");return F}return z=E(R,f),rt.isASN1HEX(z)?(F=v+"["+we+"]\n")+M(z,h,0,v+"  "):(("68747470"==z.substr(0,8)||"subjectAltName"===h.x509ExtName&&2==we)&&(z=Yn(z)),v+"["+we+"] "+z+"\n")}return v+"UNKNOWN("+te+") "+E(R,f)+"\n"},rt.parse=function(l){var f=rt.parse,v=rt.isASN1HEX,b=rt.getV,E=rt.getTLV,M=rt.getChildIdx,D=w.asn1,R=D.ASN1Util.oidHexToInt,k=D.x509.OID.oid2name,U=Yn,z=ze,F=ds,C={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},P=l.substr(0,2),V={},L=b(l,0);if("01"==P)return"0101ff"==l?{bool:!0}:{bool:!1};if("02"==P)return{int:{hex:L}};if("03"==P)try{if("00"!=L.substr(0,2))throw"not encap";var $=L.substr(2);if(!v($))throw"not encap";return{bitstr:{obj:f($)}}}catch{var J=null;return L.length<=10&&(J=function fu(l){if("string"!=typeof l||l.length%2!=0||!l.match(/^[0-9a-f]+$/))return null;try{var h=parseInt(l.substr(0,2),16);if(h<0||7<h)return null;for(var f=l.substr(2),v="",b=0;b<f.length;b+=2){var E=f.substr(b,2),M=parseInt(E,16).toString(2);v+=M=("0000000"+M).slice(-8)}return v.substr(0,v.length-h)}catch{return null}}(L)),null==J?{bitstr:{hex:L}}:{bitstr:{bin:J}}}else if("04"==P)try{if(!v(L))throw"not encap";return{octstr:{obj:f(L)}}}catch{return{octstr:{hex:L}}}else{if("05"==P)return{null:""};if("06"==P){var Q=R(L),te=k(Q);return""==te?{oid:Q}:{oid:te}}if("0a"==P)return L.length>4?{enum:{hex:L}}:{enum:parseInt(L,16)};if("30"==P||"31"==P)return V[C[P]]=function(q){for(var ee=[],ie=M(q,0),de=0;de<ie.length;de++){var ce=E(q,ie[de]),pe=f(ce);ee.push(pe)}return ee}(l),V;if("14"==P){var we=F(L);return V[C[P]]={str:we},V}if("1e"==P)return we=z(L),V[C[P]]={str:we},V;if(-1!=":0c:12:13:16:17:18:1a:".indexOf(P))return we=U(L),V[C[P]]={str:we},V;if(P.match(/^8[0-9]$/))return null==(we=U(L))|""==we||null!=we.match(/[\x00-\x1F\x7F-\x9F]/)||null!=we.match(/[\u0000-\u001F\u0080\u2013\u009F]/)?{tag:{tag:P,explicit:!1,hex:L}}:{tag:{tag:P,explicit:!1,str:we}};if(!P.match(/^a[0-9]$/)){var Ae=new w.asn1.ASN1Object;return Ae.hV=L,{asn1:{tlv:P+Ae.getLengthHexFromValue()+L}}}try{if(!v(L))throw new Error("not encap");return{tag:{tag:P,explicit:!0,obj:f(L)}}}catch{return{tag:{tag:P,explicit:!0,hex:L}}}}},rt.isContextTag=function(l,h){var f,v;l=l.toLowerCase();try{f=parseInt(l,16)}catch{return-1}if(void 0===h)return 128==(192&f);try{return!(null==h.match(/^\[[0-9]+\]$/)||(v=parseInt(h.substr(1,h.length-1),10),v>31))&&128==(192&f)&&(31&f)==v}catch{return!1}},rt.isASN1HEX=function(l){var h=rt;if(l.length%2==1)return!1;var f=h.getVblen(l,0),v=l.substr(0,2),b=h.getL(l,0);return l.length-v.length-b.length==2*f},rt.checkStrictDER=function(l,h,f,v,b){var E=rt;if(void 0===f){if("string"!=typeof l)throw new Error("not hex string");if(l=l.toLowerCase(),!w.lang.String.isHex(l))throw new Error("not hex string");f=l.length,b=(v=l.length/2)<128?1:Math.ceil(v.toString(16))+1}if(E.getL(l,h).length>2*b)throw new Error("L of TLV too long: idx="+h);var D=E.getVblen(l,h);if(D>v)throw new Error("value of L too long than hex: idx="+h);var R=E.getTLV(l,h),k=R.length-2-E.getL(l,h).length;if(k!==2*D)throw new Error("V string length and L's value not the same:"+k+"/"+2*D);if(0===h&&l.length!=R.length)throw new Error("total length and TLV length unmatch:"+l.length+"!="+R.length);var U=l.substr(h,2);if("02"===U){var z=E.getVidx(l,h);if("00"==l.substr(z,2)&&l.charCodeAt(z+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(U,16)){for(var F=E.getVblen(l,h),C=0,B=E.getChildIdx(l,h),P=0;P<B.length;P++)C+=E.getTLV(l,B[P]).length,E.checkStrictDER(l,B[P],f,v,b);if(2*F!=C)throw new Error("sum of children's TLV length and L unmatch: "+2*F+"!="+C)}},rt.oidname=function(l){var h=w.asn1;w.lang.String.isHex(l)&&(l=h.ASN1Util.oidHexToInt(l));var f=h.x509.OID.oid2name(l);return""===f&&(f=l),f},(typeof w>"u"||!w)&&(w={}),(typeof w.asn1>"u"||!w.asn1)&&(w.asn1={}),(typeof w.asn1.x509>"u"||!w.asn1.x509)&&(w.asn1.x509={}),w.asn1.x509.Certificate=function(l){w.asn1.x509.Certificate.superclass.constructor.call(this);var f=w.asn1,v=f.DERBitString,b=f.DERSequence,E=f.x509,M=E.TBSCertificate,D=E.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(R){this.params=R},this.sign=function(){var R=this.params,k=R.sigalg;null!=R.sigalg.name&&(k=R.sigalg.name);var U=R.tbsobj.tohex(),z=new w.crypto.Signature({alg:k});z.init(R.cakey),z.updateHex(U),R.sighex=z.sign()},this.getPEM=function(){return Ar(this.tohex(),"CERTIFICATE")},this.tohex=function(){var R=this.params;if((null==R.tbsobj||null==R.tbsobj)&&(R.tbsobj=new M(R)),null==R.sighex&&null!=R.cakey&&this.sign(),null==R.sighex)throw new Error("sighex or cakey parameter not defined");var k=[];return k.push(R.tbsobj),k.push(new D({name:R.sigalg})),k.push(new v({hex:"00"+R.sighex})),new b({array:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&(this.params=l)},Ve(w.asn1.x509.Certificate,w.asn1.ASN1Object),w.asn1.x509.TBSCertificate=function(l){w.asn1.x509.TBSCertificate.superclass.constructor.call(this);var f=w.asn1,v=f.x509,b=f.DERTaggedObject,E=f.DERInteger,M=f.DERSequence,D=v.AlgorithmIdentifier,R=v.Time,k=v.X500Name,U=v.Extensions,z=v.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(F){this.params=F},this.tohex=function(){var F=[],C=this.params;if(null!=C.version||1!=C.version){var B=2;null!=C.version&&(B=C.version-1);var P=new b({obj:new E({int:B})});F.push(P)}return F.push(new E(C.serial)),F.push(new D({name:C.sigalg})),F.push(new k(C.issuer)),F.push(new M({array:[new R(C.notbefore),new R(C.notafter)]})),F.push(new k(C.subject)),F.push(new z(Yt.getKey(C.sbjpubkey))),void 0!==C.ext&&C.ext.length>0&&F.push(new b({tag:"a3",obj:new U(C.ext)})),new w.asn1.DERSequence({array:F}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.TBSCertificate,w.asn1.ASN1Object),w.asn1.x509.Extensions=function(l){w.asn1.x509.Extensions.superclass.constructor.call(this);var f=w.asn1,v=f.DERSequence,b=f.x509;this.aParam=[],this.setByParam=function(E){this.aParam=E},this.tohex=function(){for(var E=[],M=0;M<this.aParam.length;M++){var D=this.aParam[M],R=D.extname,k=null;if(null!=D.extn)k=new b.PrivateExtension(D);else if("subjectKeyIdentifier"==R)k=new b.SubjectKeyIdentifier(D);else if("keyUsage"==R)k=new b.KeyUsage(D);else if("subjectAltName"==R)k=new b.SubjectAltName(D);else if("issuerAltName"==R)k=new b.IssuerAltName(D);else if("basicConstraints"==R)k=new b.BasicConstraints(D);else if("nameConstraints"==R)k=new b.NameConstraints(D);else if("cRLDistributionPoints"==R)k=new b.CRLDistributionPoints(D);else if("certificatePolicies"==R)k=new b.CertificatePolicies(D);else if("policyMappings"==R)k=new b.PolicyMappings(D);else if("policyConstraints"==R)k=new b.PolicyConstraints(D);else if("inhibitAnyPolicy"==R)k=new b.InhibitAnyPolicy(D);else if("authorityKeyIdentifier"==R)k=new b.AuthorityKeyIdentifier(D);else if("extKeyUsage"==R)k=new b.ExtKeyUsage(D);else if("authorityInfoAccess"==R)k=new b.AuthorityInfoAccess(D);else if("cRLNumber"==R)k=new b.CRLNumber(D);else if("cRLReason"==R)k=new b.CRLReason(D);else if("ocspNonce"==R)k=new b.OCSPNonce(D);else if("ocspNoCheck"==R)k=new b.OCSPNoCheck(D);else if("adobeTimeStamp"==R)k=new b.AdobeTimeStamp(D);else{if("subjectDirectoryAttributes"!=R)throw new Error("extension not supported:"+JSON.stringify(D));k=new b.SubjectDirectoryAttributes(D)}null!=k&&E.push(k)}return new v({array:E}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.x509.Extensions,w.asn1.ASN1Object),w.asn1.x509.Extension=function(l){w.asn1.x509.Extension.superclass.constructor.call(this);var v=w.asn1,b=v.DERObjectIdentifier,E=v.DEROctetString,D=v.DERBoolean,R=v.DERSequence;this.tohex=function(){var k=new b({oid:this.oid}),U=new E({hex:this.getExtnValueHex()}),z=new Array;return z.push(k),this.critical&&z.push(new D),z.push(U),new R({array:z}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==l&&void 0!==l.critical&&(this.critical=l.critical)},Ve(w.asn1.x509.Extension,w.asn1.ASN1Object),w.asn1.x509.KeyUsage=function(l){w.asn1.x509.KeyUsage.superclass.constructor.call(this,l);var h=Error,f={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var v=this.getBinValue();return this.asn1ExtnValue=new w.asn1.DERBitString({bin:v}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var v=this.params;if("object"!=typeof v||"object"!=typeof v.names&&"string"!=typeof v.bin)throw new h("parameter not yet set");if(null!=v.names)return pu(v.names,f);if(null!=v.bin)return v.bin;throw new h("parameter not set properly")},this.oid="2.5.29.15",void 0!==l&&(this.params=l)},Ve(w.asn1.x509.KeyUsage,w.asn1.x509.Extension),w.asn1.x509.BasicConstraints=function(l){w.asn1.x509.BasicConstraints.superclass.constructor.call(this,l);var h=w.asn1,f=h.DERBoolean,v=h.DERInteger,b=h.DERSequence;this.getExtnValueHex=function(){var D=new Array;this.cA&&D.push(new f),this.pathLen>-1&&D.push(new v({int:this.pathLen}));var R=new b({array:D});return this.asn1ExtnValue=R,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==l&&(void 0!==l.cA&&(this.cA=l.cA),void 0!==l.pathLen&&(this.pathLen=l.pathLen))},Ve(w.asn1.x509.BasicConstraints,w.asn1.x509.Extension),w.asn1.x509.CRLDistributionPoints=function(l){w.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,l);var f=w.asn1,v=f.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(b){for(var E=[],M=0;M<b.length;M++)if(b[M]instanceof w.asn1.ASN1Object)E.push(b[M]);else{var D=new v.DistributionPoint(b[M]);E.push(D)}this.asn1ExtnValue=new f.DERSequence({array:E})},this.setByOneURI=function(b){var E=new v.DistributionPoint({fulluri:b});this.setByDPArray([E])},this.oid="2.5.29.31",void 0!==l&&(void 0!==l.array?this.setByDPArray(l.array):void 0!==l.uri&&this.setByOneURI(l.uri))},Ve(w.asn1.x509.CRLDistributionPoints,w.asn1.x509.Extension),w.asn1.x509.DistributionPoint=function(l){w.asn1.x509.DistributionPoint.superclass.constructor.call(this);var v=w.asn1,b=v.x509.DistributionPointName;this.tohex=function(){var E=new v.DERSequence;if(null!=this.asn1DP){var M=new v.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});E.appendASN1Object(M)}return this.hTLV=E.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&(void 0!==l.dpobj?this.asn1DP=l.dpobj:void 0!==l.dpname?this.asn1DP=new b(l.dpname):void 0!==l.fulluri&&(this.asn1DP=new b({full:[{uri:l.fulluri}]})))},Ve(w.asn1.x509.DistributionPoint,w.asn1.ASN1Object),w.asn1.x509.DistributionPointName=function(l){w.asn1.x509.DistributionPointName.superclass.constructor.call(this);var M=w.asn1,D=M.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new D({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l)if(M.x509.GeneralNames.prototype.isPrototypeOf(l))this.type="full",this.tag="a0",this.asn1V=l;else{if(void 0===l.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new M.x509.GeneralNames(l.full)}},Ve(w.asn1.x509.DistributionPointName,w.asn1.ASN1Object),w.asn1.x509.CertificatePolicies=function(l){w.asn1.x509.CertificatePolicies.superclass.constructor.call(this,l);var f=w.asn1,b=f.DERSequence,E=f.x509.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var M=[],D=0;D<this.params.array.length;D++)M.push(new E(this.params.array[D]));var R=new b({array:M});return this.asn1ExtnValue=R,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==l&&(this.params=l)},Ve(w.asn1.x509.CertificatePolicies,w.asn1.x509.Extension),w.asn1.x509.PolicyInformation=function(l){w.asn1.x509.PolicyInformation.superclass.constructor.call(this,l);var h=w.asn1,f=h.DERSequence,v=h.DERObjectIdentifier,b=h.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var E=[new v(this.params.policyoid)];if(void 0!==this.params.array){for(var M=[],D=0;D<this.params.array.length;D++)M.push(new b(this.params.array[D]));M.length>0&&E.push(new f({array:M}))}return new f({array:E}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&(this.params=l)},Ve(w.asn1.x509.PolicyInformation,w.asn1.ASN1Object),w.asn1.x509.PolicyQualifierInfo=function(l){w.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,l);var h=w.asn1,f=h.DERSequence,v=h.DERIA5String,b=h.DERObjectIdentifier,E=h.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new f({array:[new b({oid:"1.3.6.1.5.5.7.2.1"}),new v({str:this.params.cps})]}).tohex():null!=this.params.unotice?new f({array:[new b({oid:"1.3.6.1.5.5.7.2.2"}),new E(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&(this.params=l)},Ve(w.asn1.x509.PolicyQualifierInfo,w.asn1.ASN1Object),w.asn1.x509.UserNotice=function(l){w.asn1.x509.UserNotice.superclass.constructor.call(this,l);var h=w.asn1.DERSequence,v=w.asn1.x509.DisplayText,b=w.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var E=[];return void 0!==this.params.noticeref&&E.push(new b(this.params.noticeref)),void 0!==this.params.exptext&&E.push(new v(this.params.exptext)),new h({array:E}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&(this.params=l)},Ve(w.asn1.x509.UserNotice,w.asn1.ASN1Object),w.asn1.x509.NoticeReference=function(l){w.asn1.x509.NoticeReference.superclass.constructor.call(this,l);var h=w.asn1.DERSequence,f=w.asn1.DERInteger,v=w.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var b=[];if(void 0!==this.params.org&&b.push(new v(this.params.org)),void 0!==this.params.noticenum){for(var E=[],M=this.params.noticenum,D=0;D<M.length;D++)E.push(new f(M[D]));b.push(new h({array:E}))}if(0==b.length)throw new Error("parameter is empty");return new h({array:b}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&(this.params=l)},Ve(w.asn1.x509.NoticeReference,w.asn1.ASN1Object),w.asn1.x509.DisplayText=function(l){w.asn1.x509.DisplayText.superclass.constructor.call(this,l),this.hT="0c",void 0!==l&&("ia5"===l.type?this.hT="16":"vis"===l.type?this.hT="1a":"bmp"===l.type&&(this.hT="1e"))},Ve(w.asn1.x509.DisplayText,w.asn1.DERAbstractString),w.asn1.x509.PolicyMappings=function(l){w.asn1.x509.PolicyMappings.superclass.constructor.call(this,l);var b=w.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var E=this.params,M=[],D=0;D<E.array.length;D++){var R=E.array[D];M.push({seq:[{oid:R[0]},{oid:R[1]}]})}return this.asn1ExtnValue=b({seq:M}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",void 0!==l&&(this.params=l)},Ve(w.asn1.x509.PolicyMappings,w.asn1.x509.Extension),w.asn1.x509.PolicyConstraints=function(l){w.asn1.x509.PolicyConstraints.superclass.constructor.call(this,l);var b=w.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var E=this.params,M=[];return null!=E.reqexp&&M.push({tag:{tagi:"80",obj:{int:E.reqexp}}}),null!=E.inhibit&&M.push({tag:{tagi:"81",obj:{int:E.inhibit}}}),this.asn1ExtnValue=b({seq:M}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",void 0!==l&&(this.params=l)},Ve(w.asn1.x509.PolicyConstraints,w.asn1.x509.Extension),w.asn1.x509.InhibitAnyPolicy=function(l){w.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,l);var b=w.asn1.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=b({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",void 0!==l&&(this.params=l)},Ve(w.asn1.x509.InhibitAnyPolicy,w.asn1.x509.Extension),w.asn1.x509.NameConstraints=function(l){w.asn1.x509.NameConstraints.superclass.constructor.call(this,l);var f=w.asn1,b=f.ASN1Util.newObject,E=f.x509.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var M=this.params,D=[];if(null!=M.permit&&null!=M.permit.length){for(var R=[],k=0;k<M.permit.length;k++)R.push(new E(M.permit[k]));D.push({tag:{tagi:"a0",obj:{seq:R}}})}if(null!=M.exclude&&null!=M.exclude.length){var U=[];for(k=0;k<M.exclude.length;k++)U.push(new E(M.exclude[k]));D.push({tag:{tagi:"a1",obj:{seq:U}}})}return this.asn1ExtnValue=b({seq:D}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==l&&(this.params=l)},Ve(w.asn1.x509.NameConstraints,w.asn1.x509.Extension),w.asn1.x509.GeneralSubtree=function(l){w.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var h=w.asn1,v=h.x509.GeneralName,b=h.ASN1Util.newObject;this.params=null,this.setByParam=function(E){this.params=E},this.tohex=function(){var E=this.params,M=[new v(E)];return null!=E.min&&M.push({tag:{tagi:"80",obj:{int:E.min}}}),null!=E.max&&M.push({tag:{tagi:"81",obj:{int:E.max}}}),b({seq:M}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.GeneralSubtree,w.asn1.ASN1Object),w.asn1.x509.ExtKeyUsage=function(l){w.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,l);var f=w.asn1;this.setPurposeArray=function(v){this.asn1ExtnValue=new f.DERSequence;for(var b=0;b<v.length;b++){var E=new f.DERObjectIdentifier(v[b]);this.asn1ExtnValue.appendASN1Object(E)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==l&&void 0!==l.array&&this.setPurposeArray(l.array)},Ve(w.asn1.x509.ExtKeyUsage,w.asn1.x509.Extension),w.asn1.x509.AuthorityKeyIdentifier=function(l){w.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,l);var f=w.asn1,v=f.DERTaggedObject,b=f.x509.GeneralNames;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var M=new Array;this.asn1KID&&M.push(new v({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&M.push(new v({explicit:!1,tag:"a1",obj:new b([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&M.push(new v({explicit:!1,tag:"82",obj:this.asn1CertSN}));var D=new f.DERSequence({array:M});return this.asn1ExtnValue=D,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(M){if(void 0!==M.str||void 0!==M.hex)this.asn1KID=new w.asn1.DEROctetString(M);else if("object"==typeof M&&w.crypto.Util.isKey(M)||"string"==typeof M&&-1!=M.indexOf("BEGIN ")){var D=M;"string"==typeof M&&(D=Yt.getKey(M));var R=Yt.getKeyID(D);this.asn1KID=new w.asn1.DEROctetString({hex:R})}},this.setCertIssuerByParam=function(M){void 0!==M.str||void 0!==M.ldapstr||void 0!==M.hex||void 0!==M.certsubject||void 0!==M.certissuer?this.asn1CertIssuer=new w.asn1.x509.X500Name(M):"string"==typeof M&&-1!=M.indexOf("BEGIN ")&&-1!=M.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new w.asn1.x509.X500Name({certissuer:M}))},this.setCertSNByParam=function(M){if(void 0!==M.str||void 0!==M.bigint||void 0!==M.hex)this.asn1CertSN=new w.asn1.DERInteger(M);else if("string"==typeof M&&-1!=M.indexOf("BEGIN ")&&M.indexOf("CERTIFICATE")){var D=new en;D.readCertPEM(M);var R=D.getSerialNumberHex();this.asn1CertSN=new w.asn1.DERInteger({hex:R})}},this.oid="2.5.29.35",void 0!==l&&(void 0!==l.kid&&this.setKIDByParam(l.kid),void 0!==l.issuer&&this.setCertIssuerByParam(l.issuer),void 0!==l.sn&&this.setCertSNByParam(l.sn),void 0!==l.issuersn&&"string"==typeof l.issuersn&&-1!=l.issuersn.indexOf("BEGIN ")&&l.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(l.issuersn),this.setCertIssuerByParam(l.issuersn)))},Ve(w.asn1.x509.AuthorityKeyIdentifier,w.asn1.x509.Extension),w.asn1.x509.SubjectKeyIdentifier=function(l){w.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,l);var v=w.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(b){if(void 0!==b.str||void 0!==b.hex)this.asn1KID=new v(b);else if("object"==typeof b&&w.crypto.Util.isKey(b)||"string"==typeof b&&-1!=b.indexOf("BEGIN")){var E=b;"string"==typeof b&&(E=Yt.getKey(b));var M=Yt.getKeyID(E);this.asn1KID=new w.asn1.DEROctetString({hex:M})}},this.oid="2.5.29.14",void 0!==l&&void 0!==l.kid&&this.setKIDByParam(l.kid)},Ve(w.asn1.x509.SubjectKeyIdentifier,w.asn1.x509.Extension),w.asn1.x509.AuthorityInfoAccess=function(l){w.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,l),this.setAccessDescriptionArray=function(h){for(var f=new Array,b=w.asn1,E=b.DERSequence,M=b.DERObjectIdentifier,D=b.x509.GeneralName,R=0;R<h.length;R++){var k,U=h[R];if(void 0!==U.ocsp)k=new E({array:[new M({oid:"1.3.6.1.5.5.7.48.1"}),new D({uri:U.ocsp})]});else{if(void 0===U.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(U));k=new E({array:[new M({oid:"1.3.6.1.5.5.7.48.2"}),new D({uri:U.caissuer})]})}f.push(k)}this.asn1ExtnValue=new E({array:f})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==l&&void 0!==l.array&&this.setAccessDescriptionArray(l.array)},Ve(w.asn1.x509.AuthorityInfoAccess,w.asn1.x509.Extension),w.asn1.x509.SubjectAltName=function(l){w.asn1.x509.SubjectAltName.superclass.constructor.call(this,l),this.setNameArray=function(h){this.asn1ExtnValue=new w.asn1.x509.GeneralNames(h)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==l&&void 0!==l.array&&this.setNameArray(l.array)},Ve(w.asn1.x509.SubjectAltName,w.asn1.x509.Extension),w.asn1.x509.IssuerAltName=function(l){w.asn1.x509.IssuerAltName.superclass.constructor.call(this,l),this.setNameArray=function(h){this.asn1ExtnValue=new w.asn1.x509.GeneralNames(h)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==l&&void 0!==l.array&&this.setNameArray(l.array)},Ve(w.asn1.x509.IssuerAltName,w.asn1.x509.Extension),w.asn1.x509.SubjectDirectoryAttributes=function(l){w.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,l);var h=w.asn1,f=h.DERSequence,v=h.ASN1Util.newObject,b=h.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var E=[],M=0;M<this.params.array.length;M++){var D=this.params.array[M],R={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==D.attr)R.seq[0].oid=b(D.attr),R.seq[1].set[0]={gentime:D.str};else if("placeOfBirth"==D.attr)R.seq[0].oid=b(D.attr),R.seq[1].set[0]={utf8str:D.str};else if("gender"==D.attr)R.seq[0].oid=b(D.attr),R.seq[1].set[0]={prnstr:D.str};else if("countryOfCitizenship"==D.attr)R.seq[0].oid=b(D.attr),R.seq[1].set[0]={prnstr:D.str};else{if("countryOfResidence"!=D.attr)throw new Error("unsupported attribute: "+D.attr);R.seq[0].oid=b(D.attr),R.seq[1].set[0]={prnstr:D.str}}E.push(new v(R))}var k=new f({array:E});return this.asn1ExtnValue=k,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==l&&(this.params=l)},Ve(w.asn1.x509.SubjectDirectoryAttributes,w.asn1.x509.Extension),w.asn1.x509.PrivateExtension=function(l){w.asn1.x509.PrivateExtension.superclass.constructor.call(this,l);var f=w.lang.String.isHex,v=w.asn1,b=v.x509.OID.name2oid,E=v.ASN1Util.newObject;this.params=null,this.setByParam=function(M){this.oid=b(M.extname),this.params=M},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var M=this.params.extn;if("string"==typeof M&&f(M))return M;if("object"==typeof M)try{return E(M).tohex()}catch{}throw new Error("unsupported extn value")},null!=l&&this.setByParam(l)},Ve(w.asn1.x509.PrivateExtension,w.asn1.x509.Extension),w.asn1.x509.CRL=function(l){w.asn1.x509.CRL.superclass.constructor.call(this);var f=w.asn1,v=f.DERSequence,b=f.DERBitString,E=f.x509,M=E.AlgorithmIdentifier,D=E.TBSCertList;this.params=void 0,this.setByParam=function(R){this.params=R},this.sign=function(){var R=new D(this.params).tohex(),k=new w.crypto.Signature({alg:this.params.sigalg});k.init(this.params.cakey),k.updateHex(R);var U=k.sign();this.params.sighex=U},this.getPEM=function(){return Ar(this.tohex(),"X509 CRL")},this.tohex=function(){var R=this.params;if(null==R.tbsobj&&(R.tbsobj=new D(R)),null==R.sighex&&null!=R.cakey&&this.sign(),null==R.sighex)throw new Error("sighex or cakey parameter not defined");var k=[];return k.push(R.tbsobj),k.push(new M({name:R.sigalg})),k.push(new b({hex:"00"+R.sighex})),new v({array:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&(this.params=l)},Ve(w.asn1.x509.CRL,w.asn1.ASN1Object),w.asn1.x509.TBSCertList=function(l){w.asn1.x509.TBSCertList.superclass.constructor.call(this);var f=w.asn1,v=f.DERInteger,b=f.DERSequence,E=f.DERTaggedObject,D=f.x509,R=D.AlgorithmIdentifier,k=D.Time,U=D.Extensions,z=D.X500Name;this.params=null,this.setByParam=function(F){this.params=F},this.getRevCertSequence=function(){for(var F=[],C=this.params.revcert,B=0;B<C.length;B++){var P=[new v(C[B].sn),new k(C[B].date)];null!=C[B].ext&&P.push(new U(C[B].ext)),F.push(new b({array:P}))}return new b({array:F})},this.tohex=function(){var F=[],C=this.params;if(null!=C.version){var P=new v({int:C.version-1});F.push(P)}if(F.push(new R({name:C.sigalg})),F.push(new z(C.issuer)),F.push(new k(C.thisupdate)),null!=C.nextupdate&&F.push(new k(C.nextupdate)),null!=C.revcert&&F.push(this.getRevCertSequence()),null!=C.ext){var V=new U(C.ext);F.push(new E({tag:"a0",explicit:!0,obj:V}))}return new b({array:F}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.TBSCertList,w.asn1.ASN1Object),w.asn1.x509.CRLEntry=function(l){w.asn1.x509.CRLEntry.superclass.constructor.call(this);var b=w.asn1;this.setCertSerial=function(E){this.sn=new b.DERInteger(E)},this.setRevocationDate=function(E){this.time=new b.x509.Time(E)},this.tohex=function(){var E=new b.DERSequence({array:[this.sn,this.time]});return this.TLV=E.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&(void 0!==l.time&&this.setRevocationDate(l.time),void 0!==l.sn&&this.setCertSerial(l.sn))},Ve(w.asn1.x509.CRLEntry,w.asn1.ASN1Object),w.asn1.x509.CRLNumber=function(l){w.asn1.x509.CRLNumber.superclass.constructor.call(this,l),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new w.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=l&&(this.params=l)},Ve(w.asn1.x509.CRLNumber,w.asn1.x509.Extension),w.asn1.x509.CRLReason=function(l){w.asn1.x509.CRLReason.superclass.constructor.call(this,l),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new w.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=l&&(this.params=l)},Ve(w.asn1.x509.CRLReason,w.asn1.x509.Extension),w.asn1.x509.OCSPNonce=function(l){w.asn1.x509.OCSPNonce.superclass.constructor.call(this,l),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new w.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=l&&(this.params=l)},Ve(w.asn1.x509.OCSPNonce,w.asn1.x509.Extension),w.asn1.x509.OCSPNoCheck=function(l){w.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,l),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new w.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=l&&(this.params=l)},Ve(w.asn1.x509.OCSPNoCheck,w.asn1.x509.Extension),w.asn1.x509.AdobeTimeStamp=function(l){w.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,l);var f=w.asn1,v=f.DERInteger,b=f.DERBoolean,E=f.DERSequence,M=f.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var D=this.params,R=[new v(1)];return R.push(new M({uri:D.uri})),null!=D.reqauth&&R.push(new b(D.reqauth)),this.asn1ExtnValue=new E({array:R}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.AdobeTimeStamp,w.asn1.x509.Extension),w.asn1.x509.X500Name=function(l){w.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var f=w.asn1,v=f.x509,b=v.RDN;this.setByString=function(M,D){void 0!==D&&(this.sRule=D);var R=M.split("/");R.shift();for(var k=[],U=0;U<R.length;U++)if(R[U].match(/^[^=]+=.+$/))k.push(R[U]);else{var z=k.length-1;k[z]=k[z]+"/"+R[U]}for(U=0;U<k.length;U++)this.asn1Array.push(new b({str:k[U],rule:this.sRule}))},this.setByLdapString=function(M,D){void 0!==D&&(this.sRule=D);var R=v.X500Name.ldapToCompat(M);this.setByString(R,D)},this.setByObject=function(M,D){for(var R in void 0!==D&&(this.sRule=D),M)if(M.hasOwnProperty(R)){var k=new b({str:R+"="+M[R],rule:this.sRule});this.asn1Array?this.asn1Array.push(k):this.asn1Array=[k]}},this.setByParam=function(M){if(void 0!==M.rule&&(this.sRule=M.rule),void 0!==M.array)this.paramArray=M.array;else if(void 0!==M.str)this.setByString(M.str);else if(void 0!==M.ldapstr)this.setByLdapString(M.ldapstr);else if(void 0!==M.hex)this.hTLV=M.hex;else if(void 0!==M.certissuer)(D=new en).readCertPEM(M.certissuer),this.hTLV=D.getIssuerHex();else if(void 0!==M.certsubject){var D;(D=new en).readCertPEM(M.certsubject),this.hTLV=D.getSubjectHex()}else"object"==typeof M&&void 0===M.certsubject&&void 0===M.certissuer&&this.setByObject(M)},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var M=0;M<this.paramArray.length;M++){var D={array:this.paramArray[M]};"utf8"!=this.sRule&&(D.rule=this.sRule);var R=new b(D);this.asn1Array.push(R)}var k=new f.DERSequence({array:this.asn1Array});return this.hTLV=k.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.X500Name,w.asn1.ASN1Object),w.asn1.x509.X500Name.compatToLDAP=function(l){if("/"!==l.substr(0,1))throw"malformed input";var f=(l=l.substr(1)).split("/");return f.reverse(),f=f.map(function(v){return v.replace(/,/,"\\,")}),f.join(",")},w.asn1.x509.X500Name.onelineToLDAP=function(l){return w.asn1.x509.X500Name.compatToLDAP(l)},w.asn1.x509.X500Name.ldapToCompat=function(l){for(var h=l.split(","),f=!1,v=[],b=0;h.length>0;b++){var E=h.shift();if(!0===f){var D=(v.pop()+","+E).replace(/\\,/g,",");v.push(D),f=!1}else v.push(E);"\\"===E.substr(-1,1)&&(f=!0)}return v=v.map(function(R){return R.replace("/","\\/")}),v.reverse(),"/"+v.join("/")},w.asn1.x509.X500Name.ldapToOneline=function(l){return w.asn1.x509.X500Name.ldapToCompat(l)},w.asn1.x509.RDN=function(l){w.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var h=w.asn1.x509.AttributeTypeAndValue;this.setByParam=function(f){void 0!==f.rule&&(this.sRule=f.rule),void 0!==f.str&&this.addByMultiValuedString(f.str),void 0!==f.array&&(this.paramArray=f.array)},this.addByString=function(f){this.asn1Array.push(new w.asn1.x509.AttributeTypeAndValue({str:f,rule:this.sRule}))},this.addByMultiValuedString=function(f){for(var v=w.asn1.x509.RDN.parseString(f),b=0;b<v.length;b++)this.addByString(v[b])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var f=0;f<this.paramArray.length;f++){var v=this.paramArray[f];void 0!==v.rule&&"utf8"!=this.sRule&&(v.rule=this.sRule);var b=new h(v);this.asn1Array.push(b)}var E=new w.asn1.DERSet({array:this.asn1Array});return this.TLV=E.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.RDN,w.asn1.ASN1Object),w.asn1.x509.RDN.parseString=function(l){for(var h=l.split(/\+/),f=!1,v=[],b=0;h.length>0;b++){var E=h.shift();if(!0===f){var D=(v.pop()+"+"+E).replace(/\\\+/g,"+");v.push(D),f=!1}else v.push(E);"\\"===E.substr(-1,1)&&(f=!0)}var R=!1,k=[];for(b=0;v.length>0;b++){if(E=v.shift(),!0===R){var U=k.pop();E.match(/"$/)?(D=(U+"+"+E).replace(/^([^=]+)="(.*)"$/,"$1=$2"),k.push(D),R=!1):k.push(U+"+"+E)}else k.push(E);E.match(/^[^=]+="/)&&(R=!0)}return k},w.asn1.x509.AttributeTypeAndValue=function(l){w.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var f=w.asn1,v=f.DERSequence,b=f.DERUTF8String,E=f.DERPrintableString,M=f.DERTeletexString,D=f.DERIA5String,R=f.DERVisibleString,k=f.DERBMPString,U=w.lang.String.isMail,z=w.lang.String.isPrintable;this.setByParam=function(F){if(void 0!==F.rule&&(this.sRule=F.rule),void 0!==F.ds&&(this.dsType=F.ds),void 0===F.value&&void 0!==F.str){var B=F.str.match(/^([^=]+)=(.+)$/);if(!B)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=B[1],this.sValue=B[2]}else this.sType=F.type,this.sValue=F.value},this.setByString=function(F,C){void 0!==C&&(this.sRule=C);var B=F.match(/^([^=]+)=(.+)$/);if(!B)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(B[1],B[2])},this._getDsType=function(){var F=this.sType,C=this.sValue,B=this.sRule;return"prn"===B?"CN"==F&&U(C)?"ia5":z(C)?"prn":"utf8":"utf8"===B?"CN"==F&&U(C)?"ia5":"C"==F?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(F,C,B){void 0!==B&&(this.sRule=B),this.sType=F,this.sValue=C},this.getValueObj=function(F,C){if("utf8"==F)return new b({str:C});if("prn"==F)return new E({str:C});if("tel"==F)return new M({str:C});if("ia5"==F)return new D({str:C});if("vis"==F)return new R({str:C});if("bmp"==F)return new k({str:C});throw new Error("unsupported directory string type: type="+F+" value="+C)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var F=w.asn1.x509.OID.atype2obj(this.sType),C=this.getValueObj(this.dsType,this.sValue),B=new v({array:[F,C]});return this.TLV=B.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.AttributeTypeAndValue,w.asn1.ASN1Object),w.asn1.x509.SubjectPublicKeyInfo=function(l){w.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var b=w.asn1,E=b.DERInteger,M=b.DERBitString,D=b.DERObjectIdentifier,R=b.DERSequence,k=b.ASN1Util.newObject,z=b.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new R({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var P=this.getASN1Object();return this.hTLV=P.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(P){try{if(P instanceof Ut){var L=k({seq:[{int:{bigint:P.n}},{int:{int:P.e}}]}).tohex();this.asn1AlgId=new z({name:"rsaEncryption"}),this.asn1SubjPKey=new M({hex:"00"+L})}}catch{}try{if(P instanceof w.crypto.ECDSA){var $=new D({name:P.curveName});this.asn1AlgId=new z({name:"ecPublicKey",asn1params:$}),this.asn1SubjPKey=new M({hex:"00"+P.pubKeyHex})}}catch{}try{if(P instanceof w.crypto.DSA){$=new k({seq:[{int:{bigint:P.p}},{int:{bigint:P.q}},{int:{bigint:P.g}}]}),this.asn1AlgId=new z({name:"dsa",asn1params:$});var J=new E({bigint:P.y});this.asn1SubjPKey=new M({hex:"00"+J.tohex()})}}catch{}},void 0!==l&&this.setPubKey(l)},Ve(w.asn1.x509.SubjectPublicKeyInfo,w.asn1.ASN1Object),w.asn1.x509.Time=function(l){w.asn1.x509.Time.superclass.constructor.call(this);var b=w.asn1,E=b.DERUTCTime,M=b.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(D){this.timeParams=D},this.setByParam=function(D){this.params=D},this.getType=function(D){return D.match(/^[0-9]{12}Z$/)?"utc":D.match(/^[0-9]{14}Z$/)?"gen":D.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":D.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var D=this.params,R=null;if("string"==typeof D&&(D={str:D}),null!=D&&D.str&&(null==D.type||null==D.type)&&(D.type=this.getType(D.str)),null!=D&&D.str?("utc"==D.type&&(R=new E(D.str)),"gen"==D.type&&(R=new M(D.str))):R="gen"==this.type?new M:new E,null==R)throw new Error("wrong setting for Time");return this.TLV=R.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},w.asn1.x509.Time_bak=function(l){w.asn1.x509.Time_bak.superclass.constructor.call(this);var b=w.asn1,E=b.DERUTCTime,M=b.DERGeneralizedTime;this.setTimeParams=function(D){this.timeParams=D},this.tohex=function(){var D=null;return D=null!=this.timeParams?"utc"==this.type?new E(this.timeParams):new M(this.timeParams):"utc"==this.type?new E:new M,this.TLV=D.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==l&&(void 0!==l.type?this.type=l.type:void 0!==l.str&&(l.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),l.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=l)},Ve(w.asn1.x509.Time,w.asn1.ASN1Object),w.asn1.x509.AlgorithmIdentifier=function(l){w.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var f=w.asn1,v=f.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var E=null;for(var M in v)M===this.nameAlg&&(E=v[M]);if(null!==E)return this.hTLV=E,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=f.x509.OID.name2obj(this.nameAlg));var D=[this.asn1Alg];null!==this.asn1Params&&D.push(this.asn1Params);var R=new f.DERSequence({array:D});return this.hTLV=R.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&(void 0!==l.name&&(this.nameAlg=l.name),void 0!==l.asn1params&&(this.asn1Params=l.asn1params),void 0!==l.paramempty&&(this.paramEmpty=l.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var b=this.nameAlg.toLowerCase();"withdsa"!==b.substr(-7,7)&&"withecdsa"!==b.substr(-9,9)&&(this.asn1Params=new f.DERNull)}},Ve(w.asn1.x509.AlgorithmIdentifier,w.asn1.ASN1Object),w.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},w.asn1.x509.GeneralName=function(l){w.asn1.x509.GeneralName.superclass.constructor.call(this);var v=w.asn1,b=v.x509,E=b.X500Name,M=b.OtherName,D=v.DERIA5String,k=v.DEROctetString,U=v.DERTaggedObject,z=v.ASN1Object,F=Error;this.params=null,this.setByParam=function(C){this.params=C},this.tohex=function(){var B,P,C=this.params,V=!1;if(void 0!==C.other)B="a0",P=new M(C.other);else if(void 0!==C.rfc822)B="81",P=new D({str:C.rfc822});else if(void 0!==C.dns)B="82",P=new D({str:C.dns});else if(void 0!==C.dn)B="a4",V=!0,P="string"==typeof C.dn?new E({str:C.dn}):C.dn instanceof w.asn1.x509.X500Name?C.dn:new E(C.dn);else if(void 0!==C.ldapdn)B="a4",V=!0,P=new E({ldapstr:C.ldapdn});else if(void 0!==C.certissuer||void 0!==C.certsubj){B="a4",V=!0;var L,$,J=null;if(void 0!==C.certsubj?(L=!1,$=C.certsubj):(L=!0,$=C.certissuer),$.match(/^[0-9A-Fa-f]+$/),-1!=$.indexOf("-----BEGIN ")&&(J=er($)),null==J)throw new Error("certsubj/certissuer not cert");var te,Q=new en;Q.hex=J,te=L?Q.getIssuerHex():Q.getSubjectHex(),(P=new z).hTLV=te}else if(void 0!==C.uri)B="86",P=new D({str:C.uri});else{if(void 0===C.ip)throw new F("improper params");B="87";var we,Ae=C.ip;try{if(Ae.match(/^[0-9a-f]+$/)){var j=Ae.length;if(8!=j&&16!=j&&32!=j&&64!=j)throw"err";we=Ae}else we=du(Ae)}catch(ee){throw new F("malformed IP address: "+C.ip+":"+ee.message)}P=new k({hex:we})}return new U({tag:B,explicit:V,obj:P}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.GeneralName,w.asn1.ASN1Object),w.asn1.x509.GeneralNames=function(l){w.asn1.x509.GeneralNames.superclass.constructor.call(this);var v=w.asn1;this.setByParamArray=function(b){for(var E=0;E<b.length;E++){var M=new v.x509.GeneralName(b[E]);this.asn1Array.push(M)}},this.tohex=function(){return new v.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof l<"u"&&this.setByParamArray(l)},Ve(w.asn1.x509.GeneralNames,w.asn1.ASN1Object),w.asn1.x509.OtherName=function(l){w.asn1.x509.OtherName.superclass.constructor.call(this);var b=w.asn1,E=b.DERObjectIdentifier,M=b.DERSequence,D=b.ASN1Util.newObject;this.params=null,this.setByParam=function(R){this.params=R},this.tohex=function(){var R=this.params;if(null==R.oid||null==R.value)throw new Error("oid or value not specified");var k=new E({oid:R.oid}),U=D({tag:{tag:"a0",explicit:!0,obj:R.value}});return new M({array:[k,U]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.x509.OtherName,w.asn1.ASN1Object),w.asn1.x509.OID=new function(){var l=w.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(h){if(typeof this.objCache[h]<"u")return this.objCache[h];if(typeof this.name2oidList[h]>"u")throw"Name of ObjectIdentifier not defined: "+h;var v=new l({oid:this.name2oidList[h]});return this.objCache[h]=v,v},this.atype2obj=function(h){if(void 0!==this.objCache[h])return this.objCache[h];var f;if(h.match(/^\d+\.\d+\.[0-9.]+$/))f=h;else if(void 0!==this.atype2oidList[h])f=this.atype2oidList[h];else{if(void 0===this.name2oidList[h])throw new Error("AttributeType name undefined: "+h);f=this.name2oidList[h]}var v=new l({oid:f});return this.objCache[h]=v,v},this.registerOIDs=function(h){if(this.checkOIDs(h))for(var f in h)this.name2oidList[f]=h[f]},this.checkOIDs=function(h){try{var f=Object.keys(h);return 0!=f.length&&(f.map(function(v,b,E){if(!this[v].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},h),!0)}catch{return!1}}},w.asn1.x509.OID.oid2name=function(l){var h=w.asn1.x509.OID.name2oidList;for(var f in h)if(h[f]==l)return f;return""},w.asn1.x509.OID.oid2atype=function(l){var h=w.asn1.x509.OID.atype2oidList;for(var f in h)if(h[f]==l)return f;return l},w.asn1.x509.OID.name2oid=function(l){if(l.match(/^[0-9.]+$/))return l;var h=w.asn1.x509.OID.name2oidList;return void 0===h[l]?"":h[l]},w.asn1.x509.X509Util={},w.asn1.x509.X509Util.newCertPEM=function(l){return new(0,w.asn1.x509.Certificate)(l).getPEM()},(typeof w>"u"||!w)&&(w={}),(typeof w.asn1>"u"||!w.asn1)&&(w.asn1={}),(typeof w.asn1.cms>"u"||!w.asn1.cms)&&(w.asn1.cms={}),w.asn1.cms.Attribute=function(l){var h=Error,v=w.asn1,b=v.DERSequence,E=v.DERSet,M=v.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(D){this.params=D},this.getValueArray=function(){throw new h("not yet implemented abstract")},this.tohex=function(){var D=new M({oid:this.typeOid}),R=new E({array:this.getValueArray()});return new b({array:[D,R]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},Ve(w.asn1.cms.Attribute,w.asn1.ASN1Object),w.asn1.cms.ContentType=function(l){var f=w.asn1;f.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new f.DERObjectIdentifier(this.params.type)]},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.ContentType,w.asn1.cms.Attribute),w.asn1.cms.MessageDigest=function(l){var f=w.asn1,v=f.DEROctetString;f.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new v(this.params)]},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.MessageDigest,w.asn1.cms.Attribute),w.asn1.cms.SigningTime=function(l){var f=w.asn1;f.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new f.x509.Time(this.params)]},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.SigningTime,w.asn1.cms.Attribute),w.asn1.cms.SigningCertificate=function(l){var h=Error,v=w.asn1,b=v.DERSequence,E=v.cms,M=E.ESSCertID;E.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new h("parameter 'array' not specified");for(var R=this.params.array,k=[],U=0;U<R.length;U++){var z=R[U];0==l.hasis&&"string"==typeof z&&(-1!=z.indexOf("-----BEGIN")||rt.isASN1HEX(z))&&(z={cert:z}),0!=z.hasis&&0==l.hasis&&(z.hasis=!1),k.push(new M(z))}var F=new b({array:k});return[new b({array:[F]})]},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.SigningCertificate,w.asn1.cms.Attribute),w.asn1.cms.ESSCertID=function(l){w.asn1.cms.ESSCertID.superclass.constructor.call(this);var h=Error,f=w,v=f.asn1,b=v.DEROctetString,E=v.DERSequence,M=v.cms.IssuerSerial;this.params=null,this.getCertHash=function(D,R){if(null!=D.hash)return D.hash;if("string"==typeof D&&-1==D.indexOf("-----BEGIN")&&!rt.isASN1HEX(D))return D;var k,U,z;if("string"==typeof D)k=D;else{if(null==D.cert)throw new h("hash nor cert unspecified");k=D.cert}if(U=-1!=k.indexOf("-----BEGIN")?er(k):k,"string"==typeof D&&(-1!=D.indexOf("-----BEGIN")?U=er(D):rt.isASN1HEX(D)&&(U=D)),null!=D.alg)z=D.alg;else{if(null==R)throw new h("hash alg unspecified");z=R}return f.crypto.Util.hashHex(U,z)},this.tohex=function(){var D=this.params,R=this.getCertHash(D,"sha1"),k=[];return k.push(new b({hex:R})),("string"==typeof D&&-1!=D.indexOf("-----BEGIN")||null!=D.cert&&0!=D.hasis||null!=D.issuer&&null!=D.serial)&&k.push(new M(D)),new E({array:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.ESSCertID,w.asn1.ASN1Object),w.asn1.cms.SigningCertificateV2=function(l){var h=Error,v=w.asn1,b=v.DERSequence,M=v.cms,D=M.ESSCertIDv2;M.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new h("parameter 'array' not specified");for(var k=this.params.array,U=[],z=0;z<k.length;z++){var F=k[z];(null!=l.alg||0==l.hasis)&&"string"==typeof F&&(-1!=F.indexOf("-----BEGIN")||rt.isASN1HEX(F))&&(F={cert:F}),null==F.alg&&null!=l.alg&&(F.alg=l.alg),0!=F.hasis&&0==l.hasis&&(F.hasis=!1),U.push(new D(F))}var C=new b({array:U});return[new b({array:[C]})]},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.SigningCertificateV2,w.asn1.cms.Attribute),w.asn1.cms.ESSCertIDv2=function(l){w.asn1.cms.ESSCertIDv2.superclass.constructor.call(this),Error;var v=w.asn1,b=v.DEROctetString,E=v.DERSequence,M=v.cms.IssuerSerial,D=v.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var R=this.params,k=this.getCertHash(R,"sha256"),U=[];return null!=R.alg&&"sha256"!=R.alg&&U.push(new D({name:R.alg})),U.push(new b({hex:k})),("string"==typeof R&&-1!=R.indexOf("-----BEGIN")||null!=R.cert&&0!=R.hasis||null!=R.issuer&&null!=R.serial)&&U.push(new M(R)),new E({array:U}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.ESSCertIDv2,w.asn1.cms.ESSCertID),w.asn1.cms.IssuerSerial=function(l){var h=Error,v=w.asn1,b=v.DERInteger,E=v.DERSequence,R=v.x509.GeneralNames,k=en;v.cms.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(U){this.params=U},this.tohex=function(){var z,F,U=this.params;if("string"==typeof U&&-1!=U.indexOf("-----BEGIN")||null!=U.cert){var C;C=null!=U.cert?U.cert:U;var B=new k;B.readCertPEM(C),z=B.getIssuer(),F={hex:B.getSerialNumberHex()}}else{if(null==U.issuer||!U.serial)throw new h("cert or issuer and serial parameter not specified");z=U.issuer,F=U.serial}var P=new R([{dn:z}]),V=new b(F);return new E({array:[P,V]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.IssuerSerial,w.asn1.ASN1Object),w.asn1.cms.SignerIdentifier=function(l){var E=w.asn1.cms,M=E.IssuerAndSerialNumber,D=E.SubjectKeyIdentifier;Error,E.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var F=this.params;if("isssn"==F.type)return new M(F).tohex();if("skid"==F.type)return new D(F).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.SignerIdentifier,w.asn1.ASN1Object),w.asn1.cms.IssuerAndSerialNumber=function(l){var f=w.asn1,v=f.DERInteger,b=f.DERSequence,D=f.x509.X500Name,R=en,k=Error;f.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var z,F,U=this.params;if("string"==typeof U&&-1!=U.indexOf("-----BEGIN")||null!=U.cert){var C;C=null!=U.cert?U.cert:U;var B=new R;B.readCertPEM(C),z=B.getIssuer(),F={hex:B.getSerialNumberHex()}}else{if(null==U.issuer||!U.serial)throw new k("cert or issuer and serial parameter not specified");z=U.issuer,F=U.serial}var P=new D(z),V=new v(F);return new b({array:[P,V]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(U){this.params=U},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.IssuerAndSerialNumber,w.asn1.ASN1Object),w.asn1.cms.SubjectKeyIdentifier=function(l){var f=w.asn1,E=f.ASN1Util.newObject,z=en,F=Error;f.cms.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var B,C=this.params;if(null==C.cert&&null==C.skid)throw new F("property cert nor skid undefined");return null!=C.cert?B=new z(C.cert).getExtSubjectKeyIdentifier().kid.hex:null!=C.skid&&(B=C.skid),E({tag:{tage:"a0",obj:{octstr:{hex:B}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.SubjectKeyIdentifier,w.asn1.ASN1Object),w.asn1.cms.AttributeList=function(l){var h=Error,v=w.asn1,b=v.DERSet,E=v.cms;E.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(M){this.params=M},this.tohex=function(){var M=this.params;if(null!=this.hTLV)return this.hTLV;var D=!0;null!=M.sortflag&&(D=M.sortflag);for(var R=M.array,k=[],U=0;U<R.length;U++){var z=R[U],F=z.attr;if("contentType"==F)k.push(new E.ContentType(z));else if("messageDigest"==F)k.push(new E.MessageDigest(z));else if("signingTime"==F)k.push(new E.SigningTime(z));else if("signingCertificate"==F)k.push(new E.SigningCertificate(z));else if("signingCertificateV2"==F)k.push(new E.SigningCertificateV2(z));else if("signaturePolicyIdentifier"==F)k.push(new w.asn1.cades.SignaturePolicyIdentifier(z));else{if("signatureTimeStamp"!=F&&"timeStampToken"!=F)throw new h("unknown attr: "+F);k.push(new w.asn1.cades.SignatureTimeStamp(z))}}var C=new b({array:k,sortflag:D});return this.hTLV=C.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.AttributeList,w.asn1.ASN1Object),w.asn1.cms.SignerInfo=function(l){var h=Error,v=w.asn1,b=v.DERInteger,E=v.DEROctetString,M=v.DERSequence,D=v.DERTaggedObject,R=v.cms,k=R.SignerIdentifier,U=R.AttributeList,V=v.x509.AlgorithmIdentifier,L=w.crypto,$=Yt;R.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var J=this.params,Q=J.sigalg,te=new U(J.sattrs).tohex(),we=$.getKey(J.signkey),Ae=new L.Signature({alg:Q});Ae.init(we),Ae.updateHex(te);var j=Ae.sign();J.sighex=j},this.tohex=function(){var J=this.params,Q=[];if(Q.push(new b({int:J.version})),Q.push(new k(J.id)),Q.push(new V({name:J.hashalg})),null!=J.sattrs){var te=new U(J.sattrs);try{Q.push(new D({tag:"a0",explicit:!1,obj:te}))}catch(Ae){throw new h("si sattr error: "+Ae)}}if(Q.push(new V(null!=J.sigalgfield?{name:J.sigalgfield}:{name:J.sigalg})),null==J.sighex&&null!=J.signkey&&this.sign(),Q.push(new E({hex:J.sighex})),null!=J.uattrs){te=new U(J.uattrs);try{Q.push(new D({tag:"a1",explicit:!1,obj:te}))}catch(j){throw new h("si uattr error: "+j)}}return new M({array:Q}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.SignerInfo,w.asn1.ASN1Object),w.asn1.cms.EncapsulatedContentInfo=function(l){var f=w.asn1,v=f.DERTaggedObject,b=f.DERSequence,E=f.DERObjectIdentifier,M=f.DEROctetString;f.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var R=this.params,k=[];if(k.push(new E(R.type)),null!=R.content&&(null!=R.content.hex||null!=R.content.str)&&1!=R.isDetached){var U=new M(R.content),z=new v({tag:"a0",explicit:!0,obj:U});k.push(z)}return new b({array:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(R){this.params=R},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.EncapsulatedContentInfo,w.asn1.ASN1Object),w.asn1.cms.ContentInfo=function(l){var f=w.asn1,v=f.DERTaggedObject,b=f.DERSequence,E=f.DERObjectIdentifier;w.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var R=this.params,k=[];k.push(new E(R.type));var U=new v({tag:"a0",explicit:!0,obj:R.obj});return k.push(U),new b({array:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(R){this.params=R},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.ContentInfo,w.asn1.ASN1Object),w.asn1.cms.SignedData=function(l){Error;var v=w.asn1,E=v.DERInteger,M=v.DERSet,D=v.DERSequence,k=v.cms,U=k.EncapsulatedContentInfo,z=k.SignerInfo,F=k.ContentInfo,C=k.CertificateSet,B=k.RevocationInfoChoices,V=v.x509.AlgorithmIdentifier;w.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var L=this.params;this._setDigestAlgs(L),this._setContentTypeByEContent(L),this._setMessageDigestByEContent(L),this._setSignerInfoVersion(L),this._setSignedDataVersion(L)},this._setDigestAlgs=function(L){for(var $={},J=L.sinfos,Q=0;Q<J.length;Q++)$[J[Q].hashalg]=1;L.hashalgs=Object.keys($).sort()},this._setContentTypeByEContent=function(L){for(var $=L.econtent.type,J=L.sinfos,Q=0;Q<J.length;Q++)this._getAttrParamByName(J[Q],"contentType").type=$},this._setMessageDigestByEContent=function(L){var $=L.econtent,Q=$.content.hex;null==Q&&"data"==$.type&&null!=$.content.str&&(Q=hs($.content.str));for(var te=L.sinfos,we=0;we<te.length;we++){var Ae=te[we],j=Ae.hashalg,q=this._getAttrParamByName(Ae,"messageDigest"),ee=w.crypto.Util.hashHex(Q,j);q.hex=ee}},this._getAttrParamByName=function(L,$){for(var J=L.sattrs.array,Q=0;Q<J.length;Q++)if(J[Q].attr==$)return J[Q]},this._setSignerInfoVersion=function(L){for(var $=L.sinfos,J=0;J<$.length;J++){var Q=$[J],te=1;"skid"==Q.id.type&&(te=3),Q.version=te}},this._setSignedDataVersion=function(L){var $=this._getSignedDataVersion(L);L.version=$},this._getSignedDataVersion=function(L){if(null!=L.revinfos)for(var $=L.revinfos,J=0;J<$.length;J++)if(null!=$[J].ocsp)return 5;var te=L.sinfos;for(J=0;J<te.length;J++)if(3==L.sinfos[J].version)return 3;return"data"!=L.econtent.type?3:1},this.tohex=function(){var L=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=L.fixed&&this.checkAndFixParam();var $=[];$.push(new E({int:L.version}));for(var J=[],Q=0;Q<L.hashalgs.length;Q++)J.push(new V({name:L.hashalgs[Q]}));$.push(new M({array:J})),$.push(new U(L.econtent)),null!=L.certs&&$.push(new C(L.certs)),null!=L.revinfos&&$.push(new B(L.revinfos));var we=[];for(Q=0;Q<L.sinfos.length;Q++)we.push(new z(L.sinfos[Q]));return $.push(new M({array:we})),new D({array:$}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new F({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.SignedData,w.asn1.ASN1Object),w.asn1.cms.CertificateSet=function(l){w.asn1.cms.CertificateSet.superclass.constructor.call(this);var h=Error,f=w.asn1,v=f.DERTaggedObject,b=f.DERSet,E=f.ASN1Object;this.params=null,this.tohex=function(){var R,M=this.params,D=[];if(M instanceof Array)R=M;else{if(null==M.array)throw new h("cert array not specified");R=M.array}for(var k=0;k<R.length;k++){var z=er(R[k]),F=new E;F.hTLV=z,D.push(F)}var C={array:D};0==M.sortflag&&(C.sortflag=!1);var B=new b(C);return new v({tag:"a0",explicit:!1,obj:B}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.CertificateSet,w.asn1.ASN1Object),w.asn1.cms.RevocationInfoChoices=function(l){w.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(!h instanceof Array)throw new Error("params is not array");for(var f=[],v=0;v<h.length;v++)f.push(new w.asn1.cms.RevocationInfoChoice(h[v]));return w.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:f}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.RevocationInfoChoices,w.asn1.ASN1Object),w.asn1.cms.RevocationInfoChoice=function(l){w.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(null!=h.crl&&"string"==typeof h.crl){var f=h.crl;return-1!=h.crl.indexOf("-----BEGIN")&&(f=er(h.crl)),f}if(null!=h.ocsp)return w.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new w.asn1.cms.OtherRevocationFormat(h)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.RevocationInfoChoice,w.asn1.ASN1Object),w.asn1.cms.OtherRevocationFormat=function(l){w.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var h=Error,b=w.asn1.ASN1Util.newObject,E=w.lang.String.isHex;this.params=null,this.tohex=function(){var M=this.params;if(null==M.ocsp)throw new h("property ocsp not specified");if(!E(M.ocsp)||!rt.isASN1HEX(M.ocsp))throw new h("ocsp value not ASN.1 hex string");return b({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:M.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cms.OtherRevocationFormat,w.asn1.ASN1Object),w.asn1.cms.CMSUtil=new function(){},w.asn1.cms.CMSUtil.newSignedData=function(l){return new w.asn1.cms.SignedData(l)},w.asn1.cms.CMSUtil.verifySignedData=function(l){var C=rt.getVbyList,B=rt.getTLVbyList,P=rt.getIdxbyList,V=rt.getChildIdx,L=rt.getTLV,$=rt.oidname,J=w.crypto.Util.hashHex;void 0===l.cms&&(0,w.lang.String.isHex)(l.cms);var Q=l.cms,Ae=function(pe,_e){var Ie=_e.idx;_e.signerid_issuer1=B(pe,Ie,[1,0],"30"),_e.signerid_serial1=C(pe,Ie,[1,1],"02"),_e.hashalg=$(C(pe,Ie,[2,0],"06"));var Bt=P(pe,Ie,[3],"a0");_e.idxSignedAttrs=Bt,j(pe,_e,Bt);var Lt=V(pe,Ie).length;if(Lt<6)throw"malformed SignerInfo";_e.sigalg=$(C(pe,Ie,[Lt-2,0],"06")),_e.sigval=C(pe,Ie,[Lt-1],"04")},j=function(pe,_e,Ie){var Bt=V(pe,Ie);_e.signedAttrIdxList=Bt;for(var Nt=0;Nt<Bt.length;Nt++){var Y,Lt=Bt[Nt],Fn=C(pe,Lt,[0],"06");"2a864886f70d010905"===Fn?(Y=Yn(C(pe,Lt,[1,0])),_e.saSigningTime=Y):"2a864886f70d010904"===Fn&&(Y=C(pe,Lt,[1,0],"04"),_e.saMessageDigest=Y)}},de=function(pe,_e,Ie,Bt){Ie.verifyDetail={};var Nt=Ie.verifyDetail,Lt=_e.parse.econtent,Fn=Ie.hashalg,Y=Ie.saMessageDigest;Nt.validMessageDigest=!1,J(Lt,Fn)===Y&&(Nt.validMessageDigest=!0),function(pe,_e,Ie,Bt){var Lt,Nt=_e.parse.certsIdx;if(void 0===_e.certs){Lt=[],_e.certkeys=[];for(var Fn=V(pe,Nt),Y=0;Y<Fn.length;Y++){var ci=L(pe,Fn[Y]),ti=new en;ti.readCertHex(ci),Lt[Y]=ti,_e.certkeys[Y]=ti.getPublicKey()}_e.certs=Lt}else Lt=_e.certs;for(_e.cccc=Lt.length,_e.cccci=Fn.length,Y=0;Y<Lt.length;Y++){var Ci=ti.getIssuerHex(),sn=ti.getSerialNumberHex();Ie.signerid_issuer1===Ci&&Ie.signerid_serial1===sn&&(Ie.certkey_idx=Y)}}(pe,_e,Ie),Nt.validSignatureValue=!1;var ci=Ie.sigalg,ti="31"+L(pe,Ie.idxSignedAttrs).substr(2);Ie.signedattrshex=ti;var Ci=_e.certs[Ie.certkey_idx].getPublicKey(),sn=new w.crypto.Signature({alg:ci});sn.init(Ci),sn.updateHex(ti);var Jr=sn.verify(Ie.sigval);Nt.validSignatureValue_isValid=Jr,!0===Jr&&(Nt.validSignatureValue=!0),Ie.isValid=!1,Nt.validMessageDigest&&Nt.validSignatureValue&&(Ie.isValid=!0)},ce={isValid:!1,parse:{}};return function(pe,_e){if("2a864886f70d010702"!==C(pe,0,[0],"06"))return _e;_e.cmsType="signedData",_e.econtent=C(pe,0,[1,0,2,1,0]),function(pe,_e){for(var Ie,Bt=3;Bt<6;Bt++)if(void 0!==(Ie=P(pe,0,[1,0,Bt]))){var Nt=pe.substr(Ie,2);"a0"===Nt&&(_e.certsIdx=Ie),"a1"===Nt&&(_e.revinfosIdx=Ie),"31"===Nt&&(_e.signerinfosIdx=Ie)}}(pe,_e),_e.signerInfos=[],function(pe,_e){var Ie=_e.signerinfosIdx;if(void 0!==Ie){var Bt=V(pe,Ie);_e.signerInfoIdxList=Bt;for(var Nt=0;Nt<Bt.length;Nt++){var Fn={idx:Bt[Nt]};Ae(pe,Fn),_e.signerInfos.push(Fn)}}}(pe,_e)}(Q,ce.parse),function(pe,_e){for(var Ie=_e.parse.signerInfos,Bt=Ie.length,Nt=!0,Lt=0;Lt<Bt;Lt++){var Fn=Ie[Lt];de(pe,_e,Fn),Fn.isValid||(Nt=!1)}_e.isValid=Nt}(Q,ce),ce},w.asn1.cms.CMSParser=function(){var l=Error,h=en,f=new h,v=rt,b=v.getV,E=v.getTLV,D=v.getTLVbyList,R=v.getTLVbyListEx,k=v.getVbyList,U=v.getVbyListEx,z=v.getChildIdx;this.getCMSSignedData=function(F){var C=D(F,0,[1,0]);return this.getSignedData(C)},this.getSignedData=function(F){var C=z(F,0),B={},P=b(F,C[0]),V=parseInt(P,16);B.version=V;var L=E(F,C[1]);B.hashalgs=this.getHashAlgArray(L);var $=E(F,C[2]);B.econtent=this.getEContent($);var J=R(F,0,["[0]"]);null!=J&&(B.certs=this.getCertificateSet(J)),R(F,0,["[1]"]);var te=R(F,0,[3]);return B.sinfos=this.getSignerInfos(te),B},this.getHashAlgArray=function(F){for(var C=z(F,0),B=new h,P=[],V=0;V<C.length;V++){var L=E(F,C[V]),$=B.getAlgorithmIdentifierName(L);P.push($)}return P},this.getEContent=function(F){var C={},B=k(F,0,[0]),P=k(F,0,[1,0]);return C.type=w.asn1.x509.OID.oid2name(rt.hextooidstr(B)),C.content={hex:P},C},this.getSignerInfos=function(F){for(var C=[],B=z(F,0),P=0;P<B.length;P++){var V=E(F,B[P]),L=this.getSignerInfo(V);C.push(L)}return C},this.getSignerInfo=function(F){var C={},B=z(F,0),P=v.getInt(F,B[0],-1);-1!=P&&(C.version=P);var V=E(F,B[1]),L=this.getIssuerAndSerialNumber(V);C.id=L;var $=E(F,B[2]),J=f.getAlgorithmIdentifierName($);C.hashalg=J;var Q=R(F,0,["[0]"]);if(null!=Q){var te=this.getAttributeList(Q);C.sattrs=te}var we=R(F,0,[3]),Ae=f.getAlgorithmIdentifierName(we);C.sigalg=Ae;var j=U(F,0,[4]);C.sighex=j;var q=R(F,0,["[1]"]);if(null!=q){var ee=this.getAttributeList(q);C.uattrs=ee}return C},this.getSignerIdentifier=function(F){if("30"==F.substr(0,2))return this.getIssuerAndSerialNumber(F);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(F){var C={type:"isssn"},B=z(F,0),P=E(F,B[0]);C.issuer=f.getX500Name(P);var V=b(F,B[1]);return C.serial={hex:V},C},this.getAttributeList=function(F){for(var C=[],B=z(F,0),P=0;P<B.length;P++){var V=E(F,B[P]),L=this.getAttribute(V);C.push(L)}return{array:C}},this.getAttribute=function(F){var C={},B=z(F,0),P=v.getOID(F,B[0]),V=w.asn1.x509.OID.oid2name(P);C.attr=V;var L=E(F,B[1]),$=z(L,0);if(1==$.length)C.valhex=E(L,$[0]);else{for(var J=[],Q=0;Q<$.length;Q++)J.push(E(L,$[Q]));C.valhex=J}return"contentType"==V?this.setContentType(C):"messageDigest"==V?this.setMessageDigest(C):"signingTime"==V?this.setSigningTime(C):"signingCertificate"==V?this.setSigningCertificate(C):"signingCertificateV2"==V?this.setSigningCertificateV2(C):"signaturePolicyIdentifier"==V&&this.setSignaturePolicyIdentifier(C),C},this.setContentType=function(F){var C=v.getOIDName(F.valhex,0,null);null!=C&&(F.type=C,delete F.valhex)},this.setSigningTime=function(F){var B=Yn(b(F.valhex,0));F.str=B,delete F.valhex},this.setMessageDigest=function(F){var C=b(F.valhex,0);F.hex=C,delete F.valhex},this.setSigningCertificate=function(F){var C=z(F.valhex,0);if(C.length>0){for(var B=E(F.valhex,C[0]),P=z(B,0),V=[],L=0;L<P.length;L++){var $=E(B,P[L]),J=this.getESSCertID($);V.push(J)}F.array=V}if(C.length>1){var Q=E(F.valhex,C[1]);F.polhex=Q}delete F.valhex},this.setSignaturePolicyIdentifier=function(F){var C=z(F.valhex,0);if(C.length>0){var B=v.getOID(F.valhex,C[0]);F.oid=B}if(C.length>1){var P=new h,V=z(F.valhex,C[1]),L=E(F.valhex,V[0]),$=P.getAlgorithmIdentifierName(L);F.alg=$;var J=b(F.valhex,V[1]);F.hash=J}delete F.valhex},this.setSigningCertificateV2=function(F){var C=z(F.valhex,0);if(C.length>0){for(var B=E(F.valhex,C[0]),P=z(B,0),V=[],L=0;L<P.length;L++){var $=E(B,P[L]),J=this.getESSCertIDv2($);V.push(J)}F.array=V}if(C.length>1){var Q=E(F.valhex,C[1]);F.polhex=Q}delete F.valhex},this.getESSCertID=function(F){var C={},B=z(F,0);if(B.length>0){var P=b(F,B[0]);C.hash=P}if(B.length>1){var V=E(F,B[1]),L=this.getIssuerSerial(V);null!=L.serial&&(C.serial=L.serial),null!=L.issuer&&(C.issuer=L.issuer)}return C},this.getESSCertIDv2=function(F){var C={},B=z(F,0);if(B.length<1||3<B.length)throw new l("wrong number of elements");var P=0;if("30"==F.substr(B[0],2)){var V=E(F,B[0]);C.alg=f.getAlgorithmIdentifierName(V),P++}else C.alg="sha256";var L=b(F,B[P]);if(C.hash=L,B.length>P+1){var $=E(F,B[P+1]),J=this.getIssuerSerial($);C.issuer=J.issuer,C.serial=J.serial}return C},this.getIssuerSerial=function(F){var C={},B=z(F,0),P=E(F,B[0]),V=f.getGeneralNames(P);C.issuer=V[0].dn;var $=b(F,B[1]);return C.serial={hex:$},C},this.getCertificateSet=function(F){for(var C=z(F,0),B=[],P=0;P<C.length;P++){var V=E(F,C[P]);if("30"==V.substr(0,2)){var L=Ar(V,"CERTIFICATE");B.push(L)}}return{array:B,sortflag:!1}}},(typeof w>"u"||!w)&&(w={}),(typeof w.asn1>"u"||!w.asn1)&&(w.asn1={}),(typeof w.asn1.tsp>"u"||!w.asn1.tsp)&&(w.asn1.tsp={}),w.asn1.tsp.TimeStampToken=function(l){var v=w.asn1.tsp;v.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var b=new v.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=b.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.TimeStampToken,w.asn1.cms.SignedData),w.asn1.tsp.TSTInfo=function(l){Error;var v=w.asn1,b=v.DERSequence,E=v.DERInteger,M=v.DERBoolean,D=v.DERGeneralizedTime,R=v.DERObjectIdentifier,k=v.DERTaggedObject,U=v.tsp,z=U.MessageImprint,F=U.Accuracy,B=v.x509.GeneralName;if(U.TSTInfo.superclass.constructor.call(this),this.dVersion=new E({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var P=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(P.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(P.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(P.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");P.push(this.dGenTime),null!=this.dAccuracy&&P.push(this.dAccuracy),null!=this.dOrdering&&P.push(this.dOrdering),null!=this.dNonce&&P.push(this.dNonce),null!=this.dTsa&&P.push(this.dTsa);var V=new b({array:P});return this.hTLV=V.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l){if("string"==typeof l.policy){if(!l.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new R({oid:l.policy})}void 0!==l.messageImprint&&(this.dMessageImprint=new z(l.messageImprint)),void 0!==l.serial&&(this.dSerial=new E(l.serial)),void 0!==l.genTime&&(this.dGenTime=new D(l.genTime)),void 0!==l.accuracy&&(this.dAccuracy=new F(l.accuracy)),void 0!==l.ordering&&1==l.ordering&&(this.dOrdering=new M),void 0!==l.nonce&&(this.dNonce=new E(l.nonce)),void 0!==l.tsa&&(this.dTsa=new k({tag:"a0",explicit:!0,obj:new B({dn:l.tsa})}))}},Ve(w.asn1.tsp.TSTInfo,w.asn1.ASN1Object),w.asn1.tsp.Accuracy=function(l){var f=w.asn1,v=f.ASN1Util.newObject;f.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var b=this.params,E=[];return null!=b.seconds&&"number"==typeof b.seconds&&E.push({int:b.seconds}),null!=b.millis&&"number"==typeof b.millis&&E.push({tag:{tagi:"80",obj:{int:b.millis}}}),null!=b.micros&&"number"==typeof b.micros&&E.push({tag:{tagi:"81",obj:{int:b.micros}}}),v({seq:E}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.Accuracy,w.asn1.ASN1Object),w.asn1.tsp.MessageImprint=function(l){var f=w.asn1,v=f.DERSequence,b=f.DEROctetString,M=f.x509.AlgorithmIdentifier;f.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var D=this.params,R=new M({name:D.alg}),k=new b({hex:D.hash});return new v({array:[R,k]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.tsp.MessageImprint,w.asn1.ASN1Object),w.asn1.tsp.TimeStampReq=function(l){var f=w.asn1,v=f.DERSequence,b=f.DERInteger,E=f.DERBoolean,D=f.DERObjectIdentifier,R=f.tsp,k=R.MessageImprint;R.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var U=this.params,z=[];return z.push(new b({int:1})),z.push(U.messageImprint instanceof w.asn1.ASN1Object?U.messageImprint:new k(U.messageImprint)),null!=U.policy&&z.push(new D(U.policy)),null!=U.nonce&&z.push(new b(U.nonce)),1==U.certreq&&z.push(new E),new v({array:z}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.TimeStampReq,w.asn1.ASN1Object),w.asn1.tsp.TimeStampResp=function(l){var f=w.asn1,v=f.DERSequence,E=f.tsp,M=E.PKIStatusInfo;E.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var D=this.params,R=[];if(null!=D.econtent||null!=D.tst)if(R.push(new M(null!=D.statusinfo?D.statusinfo:"granted")),null!=D.econtent)R.push(new E.TimeStampToken(D).getContentInfo());else{if(!(D.tst instanceof f.ASN1Object))throw new Error("improper member tst value");R.push(D.tst)}else{if(null==D.statusinfo)throw new Error("parameter for token nor statusinfo not specified");R.push(new M(D.statusinfo))}return new v({array:R}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.TimeStampResp,w.asn1.ASN1Object),w.asn1.tsp.PKIStatusInfo=function(l){var h=Error,v=w.asn1,b=v.DERSequence,E=v.tsp,M=E.PKIStatus,D=E.PKIFreeText,R=E.PKIFailureInfo;E.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var k=this.params,U=[];if("string"==typeof k)U.push(new M(k));else{if(null==k.status)throw new h("property 'status' unspecified");U.push(new M(k.status)),null!=k.statusstr&&U.push(new D(k.statusstr)),null!=k.failinfo&&U.push(new R(k.failinfo))}return new b({array:U}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.PKIStatusInfo,w.asn1.ASN1Object),w.asn1.tsp.PKIStatus=function(l){var h=Error,v=w.asn1,b=v.DERInteger;v.tsp.PKIStatus.superclass.constructor.call(this);var M={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var k,D=this.params;if("string"==typeof D)try{k=M[D]}catch{throw new h("undefined name: "+D)}else{if("number"!=typeof D)throw new h("unsupported params");k=D}return new b({int:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.PKIStatus,w.asn1.ASN1Object),w.asn1.tsp.PKIFreeText=function(l){var h=Error,v=w.asn1,b=v.DERSequence,E=v.DERUTF8String;v.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var D=this.params;if(!D instanceof Array)throw new h("wrong params: not array");for(var R=[],k=0;k<D.length;k++)R.push(new E({str:D[k]}));return new b({array:R}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.PKIFreeText,w.asn1.ASN1Object),w.asn1.tsp.PKIFailureInfo=function(l){var h=Error,v=w.asn1,b=v.DERBitString,D={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};v.tsp.PKIFailureInfo.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var R=this.params,k=0;if("number"==typeof R&&0<=R&&R<=25){for(var U=(k|=1<<R).toString(2),z="",F=U.length-1;F>=0;F--)z+=U[F];return z}if("string"==typeof R&&null!=D[R])return pu([R],D);if("object"==typeof R&&null!=R.length)return pu(R,D);throw new h("wrong params")},this.tohex=function(){var k=this.getBinValue();return new b({bin:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.tsp.PKIFailureInfo,w.asn1.ASN1Object),w.asn1.tsp.AbstractTSAAdapter=function(l){this.getTSTHex=function(h,f){throw"not implemented yet"}},w.asn1.tsp.SimpleTSAAdapter=function(l){var v=w.asn1.tsp,b=w.crypto.Util.hashHex;v.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(E,M){var D=b(E,M);this.params.econtent.content.messageImprint={alg:M,hash:D},this.params.econtent.content.serial={int:this.serial++};var R=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:R},new v.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==l&&(this.params=l)},Ve(w.asn1.tsp.SimpleTSAAdapter,w.asn1.tsp.AbstractTSAAdapter),w.asn1.tsp.FixedTSAAdapter=function(l){var v=w.asn1.tsp,b=w.crypto.Util.hashHex;v.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(E,M){var D=b(E,M);return this.params.econtent.content.messageImprint={alg:M,hash:D},new v.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==l&&(this.params=l)},Ve(w.asn1.tsp.FixedTSAAdapter,w.asn1.tsp.AbstractTSAAdapter),w.asn1.tsp.TSPUtil=new function(){},w.asn1.tsp.TSPUtil.newTimeStampToken=function(l){return new w.asn1.tsp.TimeStampToken(l)},w.asn1.tsp.TSPUtil.parseTimeStampReq=function(l){return(new w.asn1.tsp.TSPParser).getTimeStampReq(l)},w.asn1.tsp.TSPUtil.parseMessageImprint=function(l){return(new w.asn1.tsp.TSPParser).getMessageImprint(l)},w.asn1.tsp.TSPParser=function(){Error;var f=new en,v=rt,b=v.getV,E=v.getTLV,M=v.getIdxbyList,R=v.getChildIdx,k=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],U={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(z){var F=R(z,0);if(1==F.length)return this.getPKIStatusInfo(E(z,F[0]));if(F.length>1){var C=this.getPKIStatusInfo(E(z,F[0])),B=E(z,F[1]),P=this.getToken(B);return P.statusinfo=C,P}},this.getToken=function(z){var C=(new w.asn1.cms.CMSParser).getCMSSignedData(z);return this.setTSTInfo(C),C},this.setTSTInfo=function(z){var F=z.econtent;if("tstinfo"==F.type){var B=this.getTSTInfo(F.content.hex);F.content=B}},this.getTSTInfo=function(z){var F={},C=R(z,0),B=b(z,C[1]);F.policy=vc(B);var P=E(z,C[2]);F.messageImprint=this.getMessageImprint(P);var V=b(z,C[3]);F.serial={hex:V};var L=b(z,C[4]);F.genTime={str:Yn(L)};var $=0;if(C.length>5&&"30"==z.substr(C[5],2)){var J=E(z,C[5]);F.accuracy=this.getAccuracy(J),$++}if(C.length>5+$&&"01"==z.substr(C[5+$],2)&&("ff"==b(z,C[5+$])&&(F.ordering=!0),$++),C.length>5+$&&"02"==z.substr(C[5+$],2)){var te=b(z,C[5+$]);F.nonce={hex:te},$++}if(C.length>5+$&&"a0"==z.substr(C[5+$],2)){var we=E(z,C[5+$]);we="30"+we.substr(2),pGeneralNames=f.getGeneralNames(we);var Ae=pGeneralNames[0].dn;F.tsa=Ae,$++}if(C.length>5+$&&"a1"==z.substr(C[5+$],2)){var j=E(z,C[5+$]);j="30"+j.substr(2);var q=f.getExtParamArray(j);F.ext=q,$++}return F},this.getAccuracy=function(z){for(var F={},C=R(z,0),B=0;B<C.length;B++){var P=z.substr(C[B],2),V=b(z,C[B]),L=parseInt(V,16);"02"==P?F.seconds=L:"80"==P?F.millis=L:"81"==P&&(F.micros=L)}return F},this.getMessageImprint=function(z){if("30"!=z.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var F={},B=(R(z,0),M(z,0,[0,0])),P=b(z,B),V=v.hextooidstr(P),L=w.asn1.x509.OID.oid2name(V);if(""==L)throw new Error("hashAlg name undefined: "+V);var $=L,J=M(z,0,[1]);return F.alg=$,F.hash=b(z,J),F},this.getPKIStatusInfo=function(z){var F={},C=R(z,0),B=0;try{var P=b(z,C[0]),V=parseInt(P,16);F.status=k[V]}catch{}if(C.length>1&&"30"==z.substr(C[1],2)){var L=E(z,C[1]);F.statusstr=this.getPKIFreeText(L),B++}if(C.length>B&&"03"==z.substr(C[1+B],2)){var $=E(z,C[1+B]);F.failinfo=this.getPKIFailureInfo($)}return F},this.getPKIFreeText=function(z){for(var F=[],C=R(z,0),B=0;B<C.length;B++)F.push(v.getString(z,C[B]));return F},this.getPKIFailureInfo=function(z){var F=v.getInt(z,0);return null!=U[F]?U[F]:F},this.getTimeStampReq=function(z){var F={certreq:!1},C=R(z,0);if(C.length<2)throw new Error("TimeStampReq must have at least 2 items");var B=E(z,C[1]);F.messageImprint=w.asn1.tsp.TSPUtil.parseMessageImprint(B);for(var P=2;P<C.length;P++){var V=C[P],L=z.substr(V,2);if("06"==L){var $=b(z,V);F.policy=v.hextooidstr($)}"02"==L&&(F.nonce=b(z,V)),"01"==L&&(F.certreq=!0)}return F}},(typeof w>"u"||!w)&&(w={}),(typeof w.asn1>"u"||!w.asn1)&&(w.asn1={}),(typeof w.asn1.cades>"u"||!w.asn1.cades)&&(w.asn1.cades={}),w.asn1.cades.SignaturePolicyIdentifier=function(l){var v=w.asn1.cades,b=v.SignaturePolicyId;v.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new b(this.params)]},this.setByParam=function(E){this.params=E},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.SignaturePolicyIdentifier,w.asn1.cms.Attribute),w.asn1.cades.SignaturePolicyId=function(l){var f=w.asn1,v=f.DERSequence,b=f.DERObjectIdentifier,D=f.cades,k=D.OtherHashAlgAndValue;D.SignaturePolicyId.superclass.constructor.call(this),this.params=null,this.tohex=function(){var U=this.params,z=[];return z.push(new b(U.oid)),z.push(new k(U)),new v({array:z}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(U){this.params=U},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.SignaturePolicyId,w.asn1.ASN1Object),w.asn1.cades.OtherHashAlgAndValue=function(l){var h=Error,v=w.asn1,b=v.DERSequence,E=v.DEROctetString,D=v.x509.AlgorithmIdentifier;v.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var U=this.params;if(null==U.alg)throw new h("property 'alg' not specified");if(null==U.hash&&null==U.cert)throw new h("property 'hash' nor 'cert' not specified");var z=null;if(null!=U.hash)z=U.hash;else if(null!=U.cert){if("string"!=typeof U.cert)throw new h("cert not string");var F=U.cert;-1!=U.cert.indexOf("-----BEGIN")&&(F=er(U.cert)),z=w.crypto.Util.hashHex(F,U.alg)}var C=[];return C.push(new D({name:U.alg})),C.push(new E({hex:z})),new b({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.OtherHashAlgAndValue,w.asn1.ASN1Object),w.asn1.cades.OtherHashValue=function(l){w.asn1.cades.OtherHashValue.superclass.constructor.call(this);var h=Error,E=w.asn1.DEROctetString;this.params=null,this.tohex=function(){var D=this.params;if(null==D.hash&&null==D.cert)throw new h("hash or cert not specified");var R=null;if(null!=D.hash)R=D.hash;else if(null!=D.cert){if("string"!=typeof D.cert)throw new h("cert not string");var k=D.cert;-1!=D.cert.indexOf("-----BEGIN")&&(k=er(D.cert)),R=w.crypto.Util.hashHex(k,"sha1")}return new E({hex:R}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.OtherHashValue,w.asn1.ASN1Object),w.asn1.cades.SignatureTimeStamp=function(l){var h=Error,v=w.lang.String.isHex,b=w.asn1,E=b.ASN1Object;b.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var R=this.params;if(null!=R.tst){if(v(R.tst))return(k=new E).hTLV=R.tst,[k];if(R.tst instanceof E)return[R.tst];throw new h("params.tst has wrong value")}if(null!=R.res){var k,U=R.res;if(U instanceof E&&(U=U.tohex()),"string"!=typeof U||!v(U))throw new h("params.res has wrong value");return rt.getTLVbyList(U,0,[1]),(k=new E).hTLV=R.tst,[k]}},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.SignatureTimeStamp,w.asn1.cms.Attribute),w.asn1.cades.CompleteCertificateRefs=function(l){var h=Error,v=w.asn1,b=v.DERSequence,E=v.cades,M=E.OtherCertID,D=w.lang.String.isHex;E.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var R=this.params,k=[],U=0;U<R.array.length;U++){var z=R.array[U];if("string"==typeof z)if(-1!=z.indexOf("-----BEGIN"))z={cert:z};else{if(!D(z))throw new h("unsupported value: "+z);z={hash:z}}null!=R.alg&&null==z.alg&&(z.alg=R.alg),null!=R.hasis&&null==z.hasis&&(z.hasis=R.hasis);var F=new M(z);k.push(F)}return[new b({array:k})]},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.CompleteCertificateRefs,w.asn1.cms.Attribute),w.asn1.cades.OtherCertID=function(l){var f=w.asn1,v=f.DERSequence,E=f.cms.IssuerSerial,M=f.cades,D=M.OtherHashValue,R=M.OtherHashAlgAndValue;M.OtherCertID.superclass.constructor.call(this),this.params=l,this.tohex=function(){var k=this.params;"string"==typeof k&&(-1!=k.indexOf("-----BEGIN")?k={cert:k}:_isHex(k)&&(k={hash:k}));var z,U=[];if(z=null!=k.alg?new R(k):new D(k),U.push(z),null!=k.cert&&1==k.hasis||null!=k.issuer&&null!=k.serial){var F=new E(k);U.push(F)}return new v({array:U}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.OtherCertID,w.asn1.ASN1Object),w.asn1.cades.OtherHash=function(l){Error;var E=w.asn1.cades,M=E.OtherHashAlgAndValue,D=E.OtherHashValue,k=w.lang.String.isHex;E.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var U=this.params;return"string"==typeof U&&(-1!=U.indexOf("-----BEGIN")?U={cert:U}:k(U)&&(U={hash:U})),(null!=U.alg?new M(U):new D(U)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.cades.OtherHash,w.asn1.ASN1Object),w.asn1.cades.CAdESUtil=new function(){},w.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(l){return(new w.asn1.cms.CMSParser).getCMSSignedData(l)},w.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(l,h,f){var E=rt.getTLV,M=rt.getV,R=w.asn1,k=R.ASN1Object,U=R.cms,z=U.AttributeList,F=U.SignerInfo,C={},B=(0,rt.getChildIdx)(l,h);if(6!=B.length)throw"not supported items for SignerInfo (!=6)";var P=B.shift();C.version=E(l,P);var V=B.shift();C.si=E(l,V);var L=B.shift();C.digalg=E(l,L);var $=B.shift();C.sattrs=E(l,$);var J=B.shift();C.sigalg=E(l,J);var Q=B.shift();C.sig=E(l,Q),C.sigval=M(l,Q);var te=null;return C.obj=new F,(te=new k).hTLV=C.version,C.obj.dCMSVersion=te,(te=new k).hTLV=C.si,C.obj.dSignerIdentifier=te,(te=new k).hTLV=C.digalg,C.obj.dDigestAlgorithm=te,(te=new k).hTLV=C.sattrs,C.obj.dSignedAttrs=te,(te=new k).hTLV=C.sigalg,C.obj.dSigAlg=te,(te=new k).hTLV=C.sig,C.obj.dSig=te,C.obj.dUnsignedAttrs=new z,C},(typeof w.asn1.csr>"u"||!w.asn1.csr)&&(w.asn1.csr={}),w.asn1.csr.CertificationRequest=function(l){var f=w.asn1,v=f.DERBitString,b=f.DERSequence,E=f.csr,D=E.CertificationRequestInfo;E.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(R){this.params=R},this.sign=function(){var R=new D(this.params).tohex(),k=new w.crypto.Signature({alg:this.params.sigalg});k.init(this.params.sbjprvkey),k.updateHex(R);var U=k.sign();this.params.sighex=U},this.getPEM=function(){return Ar(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var R=this.params,k=new w.asn1.csr.CertificationRequestInfo(this.params),U=new w.asn1.x509.AlgorithmIdentifier({name:R.sigalg});if(null==R.sighex&&null!=R.sbjprvkey&&this.sign(),null==R.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var z=new v({hex:"00"+R.sighex});return new b({array:[k,U,z]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.csr.CertificationRequest,w.asn1.ASN1Object),w.asn1.csr.CertificationRequestInfo=function(l){var f=w.asn1,b=f.DERSequence,E=f.DERInteger,M=f.DERUTF8String,D=f.DERTaggedObject,R=f.ASN1Util.newObject,U=f.x509,z=U.X500Name,F=U.Extensions,C=U.SubjectPublicKeyInfo;f.csr.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(V){null!=V&&(this.params=V)},this.tohex=function(){var V=this.params,L=[];if(L.push(new E({int:0})),L.push(new z(V.subject)),L.push(new C(Yt.getKey(V.sbjpubkey))),null!=V.attrs){var $=function P(V){for(var L=Error,$=w.asn1.x509.Extensions,J=[],Q=0;Q<V.length;Q++){var te=V[Q],we=te.attr;if("extensionRequest"==we){var Ae=new $(te.ext);J.push({seq:[{oid:"1.2.840.113549.1.9.14"},{set:[Ae]}]})}else if("unstructuredName"==we)J.push({seq:[{oid:"1.2.840.113549.1.9.2"},{set:te.names}]});else{if("challengePassword"!=we)throw new L("unknown CSR attribute");J.push({seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:te.password}]}]})}}return{set:J}}(V.attrs),J=R({tag:{tage:"a0",obj:$}});L.push(J)}else if(null!=V.extreq){var Q=new F(V.extreq);J=R({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[Q]}]}}}),L.push(J)}else L.push(new D({tag:"a0",explicit:!1,obj:new M({str:""})}));return new b({array:L}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=l&&this.setByParam(l)},Ve(w.asn1.csr.CertificationRequestInfo,w.asn1.ASN1Object),w.asn1.csr.AttributeList=function(l){},Ve(w.asn1.csr.AttributeList,w.asn1.ASN1Object),w.asn1.csr.CSRUtil=new function(){},w.asn1.csr.CSRUtil.newCSRPEM=function(l){return new w.asn1.csr.CertificationRequest(l).getPEM()},w.asn1.csr.CSRUtil.getParam=function(l,h){var v=rt.getV,b=rt.getIdxbyList,E=rt.getTLVbyList,M=rt.getTLVbyListEx,D=rt.getVbyListEx,k={};if(-1==l.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var U=er(l,"CERTIFICATE REQUEST");h&&(k.tbs=E(U,0,[0]));try{var z=M(U,0,[0,1]);if("3000"==z)k.subject={};else{var P=new en;k.subject=P.getX500Name(z)}}catch{}var F=M(U,0,[0,2]),C=Yt.getKey(F,null,"pkcs8pub");k.sbjpubkey=Yt.getPEM(C,"PKCS8PUB");var $,J,B=(J=b($=U,0,[0,3,0,0],"06"),"2a864886f70d01090e"!=v($,J)?null:E($,0,[0,3,0,1,0],"30"));P=new en,null!=B&&(k.extreq=P.getExtParamArray(B));try{var V=M(U,0,[1],"30");P=new en,k.sigalg=P.getAlgorithmIdentifierName(V)}catch{}try{var L=D(U,0,[2]);k.sighex=L}catch{}return k},w.asn1.csr.CSRUtil.verifySignature=function(l){try{var h=null;if("string"==typeof l&&-1!=l.indexOf("-----BEGIN CERTIFICATE REQUEST")?h=w.asn1.csr.CSRUtil.getParam(l,!0):"object"==typeof l&&null!=l.sbjpubkey&&null!=l.sigalg&&null!=l.sighex&&null!=l.tbs&&(h=l),null==h)return!1;var f=new w.crypto.Signature({alg:h.sigalg});return f.init(h.sbjpubkey),f.updateHex(h.tbs),f.verify(h.sighex)}catch(v){return alert(v),!1}},(typeof w>"u"||!w)&&(w={}),(typeof w.asn1>"u"||!w.asn1)&&(w.asn1={}),(typeof w.asn1.ocsp>"u"||!w.asn1.ocsp)&&(w.asn1.ocsp={}),w.asn1.ocsp.DEFAULT_HASH="sha1",w.asn1.ocsp.OCSPResponse=function(l){w.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var f=w.asn1.ASN1Util.newObject,v=w.asn1.ocsp.ResponseBytes,b=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var E=this.params.resstatus;return"number"==typeof E?E:"string"!=typeof E?-1:b.indexOf(E)},this.setByParam=function(E){this.params=E},this.tohex=function(){var E=this.params,M=this._getStatusCode();if(-1==M)throw new Error("responseStatus not supported: "+E.resstatus);if(0!=M)return f({seq:[{enum:{int:M}}]}).tohex();var D=new v(E);return f({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:D}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.OCSPResponse,w.asn1.ASN1Object),w.asn1.ocsp.ResponseBytes=function(l){w.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var h=w.asn1,f=h.DERSequence,v=h.DERObjectIdentifier,b=h.DEROctetString,E=h.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(M){this.params=M},this.tohex=function(){var M=this.params;if("ocspBasic"!=M.restype)throw new Error("not supported responseType: "+M.restype);var D=new E(M),R=[];return R.push(new v({name:"ocspBasic"})),R.push(new b({hex:D.tohex()})),new f({array:R}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.ResponseBytes,w.asn1.ASN1Object),w.asn1.ocsp.BasicOCSPResponse=function(l){w.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var h=Error,f=w.asn1,v=f.ASN1Object,b=f.DERSequence,M=f.DERTaggedObject,D=f.DERBitString,k=f.x509.AlgorithmIdentifier,U=f.ocsp;_SingleResponseList=U.SingleResponseList,_ResponseData=U.ResponseData,this.params=null,this.setByParam=function(F){this.params=F},this.sign=function(){var F=this.params,C=F.tbsresp.tohex(),B=new w.crypto.Signature({alg:F.sigalg});B.init(F.reskey),B.updateHex(C),F.sighex=B.sign()},this.tohex=function(){var F=this.params;null==F.tbsresp&&(F.tbsresp=new _ResponseData(F)),null==F.sighex&&null!=F.reskey&&this.sign();var C=[];if(C.push(F.tbsresp),C.push(new k({name:F.sigalg})),C.push(new D({hex:"00"+F.sighex})),null!=F.certs&&null!=F.certs.length){for(var B=[],P=0;P<F.certs.length;P++){var V=F.certs[P],L=null;if(rt.isASN1HEX(V))L=V;else{if(!V.match(/-----BEGIN/))throw new h("certs["+P+"] not hex or PEM");L=er(V)}B.push(new v({tlv:L}))}var $=new b({array:B});C.push(new M({tag:"a0",explicit:!0,obj:$}))}return new b({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.BasicOCSPResponse,w.asn1.ASN1Object),w.asn1.ocsp.ResponseData=function(l){w.asn1.ocsp.ResponseData.superclass.constructor.call(this);var h=Error,f=w.asn1,v=f.DERSequence,b=f.DERGeneralizedTime,E=f.DERTaggedObject,M=f.x509.Extensions,D=f.ocsp,R=D.ResponderID;_SingleResponseList=D.SingleResponseList,this.params=null,this.tohex=function(){var k=this.params;null!=k.respid&&new h("respid not specified"),null!=k.prodat&&new h("prodat not specified"),null!=k.array&&new h("array not specified");var U=[];if(U.push(new R(k.respid)),U.push(new b(k.prodat)),U.push(new _SingleResponseList(k.array)),null!=k.ext){var z=new M(k.ext);U.push(new E({tag:"a1",explicit:!0,obj:z}))}return new v({array:U}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(k){this.params=k},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.ResponseData,w.asn1.ASN1Object),w.asn1.ocsp.ResponderID=function(l){w.asn1.ocsp.ResponderID.superclass.constructor.call(this);var f=w.asn1,v=f.ASN1Util.newObject,b=f.x509.X500Name,E=w.lang.String.isHex,M=Error;this.params=null,this.tohex=function(){var D=this.params;if(null!=D.key){var R=null;if("string"==typeof D.key)E(D.key)&&(R=D.key),D.key.match(/-----BEGIN CERTIFICATE/)&&null!=(U=new en(D.key).getExtSubjectKeyIdentifier())&&(R=U.kid.hex);else if(D.key instanceof en){var U;null!=(U=D.key.getExtSubjectKeyIdentifier())&&(R=U.kid.hex)}if(null==R)throw new M("wrong key member value");return v({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:R}}}}).tohex()}if(null!=D.name){var F=null;if("string"==typeof D.name&&D.name.match(/-----BEGIN CERTIFICATE/)?F=new en(D.name).getSubject():D.name instanceof en?F=D.name.getSubject():"object"==typeof D.name&&(null!=D.name.array||null!=D.name.str)&&(F=D.name),null==F)throw new M("wrong name member value");return v({tag:{tag:"a1",explicit:!0,obj:new b(F)}}).tohex()}throw new M("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(D){this.params=D},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.ResponderID,w.asn1.ASN1Object),w.asn1.ocsp.SingleResponseList=function(l){w.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var h=w.asn1,f=h.DERSequence,v=h.ocsp.SingleResponse;this.params=null,this.tohex=function(){var b=this.params;if("object"!=typeof b||null==b.length)throw new Error("params not specified properly");for(var E=[],M=0;M<b.length;M++)E.push(new v(b[M]));return new f({array:E}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.SingleResponseList,w.asn1.ASN1Object),w.asn1.ocsp.SingleResponse=function(l){var h=Error,v=w.asn1,b=v.DERSequence,E=v.DERGeneralizedTime,M=v.DERTaggedObject,D=v.ocsp,R=D.CertID,k=D.CertStatus,z=v.x509.Extensions;D.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var F=this.params,C=[];if(null==F.certid)throw new h("certid unspecified");if(null==F.status)throw new h("status unspecified");if(null==F.thisupdate)throw new h("thisupdate unspecified");if(C.push(new R(F.certid)),C.push(new k(F.status)),C.push(new E(F.thisupdate)),null!=F.nextupdate){var B=new E(F.nextupdate);C.push(new M({tag:"a0",explicit:!0,obj:B}))}if(null!=F.ext){var P=new z(F.ext);C.push(new M({tag:"a1",explicit:!0,obj:P}))}return new b({array:C}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(F){this.params=F},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.SingleResponse,w.asn1.ASN1Object),w.asn1.ocsp.CertID=function(l){var f=w.asn1,v=f.DEROctetString,b=f.DERInteger,E=f.DERSequence,D=f.x509.AlgorithmIdentifier,z=w.crypto.Util.hashHex,F=en,B=rt.getVbyList;f.ocsp.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(P,V,L,$){null==$&&($=this.DEFAULT_HASH),this.params={alg:$,issname:P,isskey:V,sbjsn:L}},this.setByCert=function(P,V,L){null==L&&(L=this.DEFAULT_HASH),this.params={alg:L,issuerCert:P,subjectCert:V}},this.getParamByCerts=function(P,V,L){null==L&&(L=this.DEFAULT_HASH);var $=new F(P),J=new F(V),Q=z($.getSubjectHex(),L),te=$.getPublicKeyHex();return{alg:L,issname:Q,isskey:z(B(te,0,[1],"03",!0),L),sbjsn:J.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var V,L,$,J,P=this.params;if(J=null==P.alg?this.DEFAULT_HASH:P.alg,null!=P.issuerCert&&null!=P.subjectCert){var Q=this.getParamByCerts(P.issuerCert,P.subjectCert,J);V=Q.issname,L=Q.isskey,$=Q.sbjsn}else{if(null==P.issname||null==P.isskey||null==P.sbjsn)throw new Error("required param members not defined");V=P.issname,L=P.isskey,$=P.sbjsn}var te=new D({name:J}),we=new v({hex:V}),Ae=new v({hex:L}),j=new b({hex:$}),q=new E({array:[te,we,Ae,j]});return this.hTLV=q.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.CertID,w.asn1.ASN1Object),w.asn1.ocsp.CertStatus=function(l){w.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if("good"==h.status)return"8000";if("unknown"==h.status)return"8200";if("revoked"==h.status){var f=[{gentime:{str:h.time}}];return null!=h.reason&&f.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:h.reason}}}}),w.asn1.ASN1Util.newObject({tag:{tag:"a1",explicit:!1,obj:{seq:f}}}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},void 0!==l&&this.setByParam(l)},Ve(w.asn1.ocsp.CertStatus,w.asn1.ASN1Object),w.asn1.ocsp.Request=function(l){var f=w.asn1,v=f.DERSequence,b=f.ocsp;if(b.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var M=[];if(null===this.dReqCert)throw"reqCert not set";M.push(this.dReqCert);var D=new v({array:M});return this.hTLV=D.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof l<"u"){var E=new b.CertID(l);this.dReqCert=E}},Ve(w.asn1.ocsp.Request,w.asn1.ASN1Object),w.asn1.ocsp.TBSRequest=function(l){var f=w.asn1,v=f.DERSequence,b=f.ocsp;b.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(E){for(var M=[],D=0;D<E.length;D++){var R=new b.Request(E[0]);M.push(R)}this.dRequestList=M},this.tohex=function(){var E=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var M=new v({array:this.dRequestList});if(E.push(M),null!==this.dRequestExt)throw"requestExtensions not supported";var D=new v({array:E});return this.hTLV=D.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&void 0!==l.reqList&&this.setRequestListByParam(l.reqList)},Ve(w.asn1.ocsp.TBSRequest,w.asn1.ASN1Object),w.asn1.ocsp.OCSPRequest=function(l){var f=w.asn1,v=f.DERSequence,b=f.ocsp;if(b.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var M=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(M.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var D=new v({array:M});return this.hTLV=D.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==l&&void 0!==l.reqList){var E=new b.TBSRequest(l);this.dTbsRequest=E}},Ve(w.asn1.ocsp.OCSPRequest,w.asn1.ASN1Object),w.asn1.ocsp.OCSPUtil={},w.asn1.ocsp.OCSPUtil.getRequestHex=function(l,h,f){var E=w.asn1.ocsp;return void 0===f&&(f=E.DEFAULT_HASH),new E.OCSPRequest({reqList:[{alg:f,issuerCert:l,subjectCert:h}]}).tohex()},w.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(l){var f=rt.getVbyList,v=rt.getVbyListEx,b=rt.getIdxbyList,M=rt.getV,D={};try{var R=v(l,0,[0],"0a");D.responseStatus=parseInt(R,16)}catch{}if(0!==D.responseStatus)return D;try{var k=b(l,0,[1,0,1,0,0,2,0,1]);"80"===l.substr(k,2)?D.certStatus="good":"a1"===l.substr(k,2)?(D.certStatus="revoked",D.revocationTime=Yn(f(l,k,[0]))):"82"===l.substr(k,2)&&(D.certStatus="unknown")}catch{}try{var U=b(l,0,[1,0,1,0,0,2,0,2]);D.thisUpdate=Yn(M(l,U))}catch{}try{var z=b(l,0,[1,0,1,0,0,2,0,3]);"a0"===l.substr(z,2)&&(D.nextUpdate=Yn(f(l,z,[0])))}catch{}return D},w.asn1.ocsp.OCSPParser=function(){var l=Error,h=en,f=new h,b=rt.getV,E=rt.getTLV,M=rt.getIdxbyList,D=rt.getVbyList,R=rt.getTLVbyList,k=rt.getVbyListEx,U=rt.getTLVbyListEx,z=rt.getChildIdx;this.getOCSPRequest=function(F){var C=z(F,0);if(1!=C.length&&2!=C.length)throw new l("wrong number elements: "+C.length);return this.getTBSRequest(E(F,C[0]))},this.getTBSRequest=function(F){var C={},B=U(F,0,[0],"30");C.array=this.getRequestList(B);var P=U(F,0,["[2]",0],"30");return null!=P&&(C.ext=f.getExtParamArray(P)),C},this.getRequestList=function(F){for(var C=[],B=z(F,0),P=0;P<B.length;P++)F=E(F,B[P]),C.push(this.getRequest(F));return C},this.getRequest=function(F){var C=z(F,0);if(1!=C.length&&2!=C.length)throw new l("wrong number elements: "+C.length);var B=this.getCertID(E(F,C[0]));if(2==C.length){var P=M(F,0,[1,0]);B.ext=f.getExtParamArray(E(F,P))}return B},this.getCertID=function(F){var C=z(F,0);if(4!=C.length)throw new l("wrong number elements: "+C.length);var B=new h,P={};return P.alg=B.getAlgorithmIdentifierName(E(F,C[0])),P.issname=b(F,C[1]),P.isskey=b(F,C[2]),P.sbjsn=b(F,C[3]),P},this.getOCSPResponse=function(F){var B,C=z(F,0),P=b(F,C[0]),V=parseInt(P);if(1==C.length)return{resstatus:V};var L=R(F,0,[1,0]);return(B=this.getResponseBytes(L)).resstatus=V,B},this.getResponseBytes=function(F){var B,C=z(F,0),P=R(F,0,[1,0]);B=this.getBasicOCSPResponse(P);var V=b(F,C[0]);return B.restype=w.asn1.x509.OID.oid2name(vc(V)),B},this.getBasicOCSPResponse=function(F){var B,C=z(F,0);B=this.getResponseData(E(F,C[0]));var P=new en;B.alg=P.getAlgorithmIdentifierName(E(F,C[1]));var V=b(F,C[2]);B.sighex=V.substr(2);var L=k(F,0,["[0]"]);if(null!=L){for(var $=z(L,0),J=[],Q=0;Q<$.length;Q++){var te=E(L,$[Q]);J.push(te)}B.certs=J}return B},this.getResponseData=function(F){var C=z(F,0),B=C.length,P={},V=0;"a0"==F.substr(C[0],2)&&V++,P.respid=this.getResponderID(E(F,C[V++]));var L=b(F,C[V++]);if(P.prodat=Yn(L),P.array=this.getSingleResponseList(E(F,C[V++])),"a1"==F.substr(C[B-1],2)){var $=R(F,C[B-1],[0]),J=new en;P.ext=J.getExtParamArray($)}return P},this.getResponderID=function(F){var C={};if("a2"==F.substr(0,2)){var B=D(F,0,[0]);C.key=B}if("a1"==F.substr(0,2)){var P=R(F,0,[0]),V=new en;C.name=V.getX500Name(P)}return C},this.getSingleResponseList=function(F){for(var C=z(F,0),B=[],P=0;P<C.length;P++){var V=this.getSingleResponse(E(F,C[P]));B.push(V)}return B},this.getSingleResponse=function(F){var C=z(F,0),B={},P=this.getCertID(E(F,C[0]));B.certid=P;var V=this.getCertStatus(E(F,C[1]));if(B.status=V,"18"==F.substr(C[2],2)){var L=b(F,C[2]);B.thisupdate=Yn(L)}for(var $=3;$<C.length;$++){if("a0"==F.substr(C[$],2)){var J=D(F,C[$],[0],"18");B.nextupdate=Yn(J)}if("a1"==F.substr(C[$],2)){var Q=new en,te=R(F,0,[$,0]);B.ext=Q.getExtParamArray(te)}}return B},this.getCertStatus=function(F){var C={};if("8000"==F)return{status:"good"};if("8200"==F)return{status:"unknown"};if("a1"==F.substr(0,2)){C.status="revoked";var P=Yn(D(F,0,[0]));C.time=P}return C}},(typeof w>"u"||!w)&&(w={}),(typeof w.lang>"u"||!w.lang)&&(w.lang={}),w.lang.String=function(){},"function"==typeof Buffer?(Tl=function(l){return Zr(Buffer.from(l,"utf8").toString("base64"))},ho=function(l){return Buffer.from(ca(l),"base64").toString("utf8")}):(Tl=function(l){return wr(po(Fe(l)))},ho=function(l){return decodeURIComponent(Gh(Qt(l)))}),w.lang.String.isInteger=function(l){return!!l.match(/^[0-9]+$/)||!!l.match(/^-[0-9]+$/)},w.lang.String.isHex=function(l){return Un(l)},w.lang.String.isBase64=function(l){return!(!(l=l.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||l.length%4!=0)},w.lang.String.isBase64URL=function(l){return!l.match(/[+/=]/)&&(l=ca(l),w.lang.String.isBase64(l))},w.lang.String.isIntegerArray=function(l){return!!(l=l.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},w.lang.String.isPrintable=function(l){return null!==l.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},w.lang.String.isIA5=function(l){return null!==l.match(/^[\x20-\x21\x23-\x7f]*$/)},w.lang.String.isMail=function(l){return null!==l.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var hu=function(l,h,f){return null==f&&(f="0"),l.length>=h?l:new Array(h-l.length+1).join(f)+l};function pu(l,h){for(var f=0,v=0;v<l.length;v++)f|=1<<h[l[v]];var b=f.toString(2),E="";for(v=b.length-1;v>=0;v--)E+=b[v];return E}function Ve(l,h){var f=function(){};f.prototype=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.superclass=h.prototype,h.prototype.constructor==Object.prototype.constructor&&(h.prototype.constructor=h)}(typeof w>"u"||!w)&&(w={}),(typeof w.crypto>"u"||!w.crypto)&&(w.crypto={}),w.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:pt.algo.MD5,sha1:pt.algo.SHA1,sha224:pt.algo.SHA224,sha256:pt.algo.SHA256,sha384:pt.algo.SHA384,sha512:pt.algo.SHA512,ripemd160:pt.algo.RIPEMD160},this.getDigestInfoHex=function(l,h){if(typeof this.DIGESTINFOHEAD[h]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+h;return this.DIGESTINFOHEAD[h]+l},this.getPaddedDigestInfoHex=function(l,h,f){var v=this.getDigestInfoHex(l,h),b=f/4;if(v.length+22>b)throw"key is too short for SigAlg: keylen="+f+","+h;for(var E="0001",M="00"+v,D="",R=b-E.length-M.length,k=0;k<R;k+=2)D+="ff";return E+D+M},this.hashString=function(l,h){return new w.crypto.MessageDigest({alg:h}).digestString(l)},this.hashHex=function(l,h){return new w.crypto.MessageDigest({alg:h}).digestHex(l)},this.sha1=function(l){return this.hashString(l,"sha1")},this.sha256=function(l){return this.hashString(l,"sha256")},this.sha256Hex=function(l){return this.hashHex(l,"sha256")},this.sha512=function(l){return this.hashString(l,"sha512")},this.sha512Hex=function(l){return this.hashHex(l,"sha512")},this.isKey=function(l){return l instanceof Ut||l instanceof w.crypto.DSA||l instanceof w.crypto.ECDSA}},w.crypto.Util.md5=function(l){return new w.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(l)},w.crypto.Util.ripemd160=function(l){return new w.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(l)},w.crypto.Util.SECURERANDOMGEN=new Co,w.crypto.Util.getRandomHexOfNbytes=function(l){var h=new Array(l);return w.crypto.Util.SECURERANDOMGEN.nextBytes(h),aa(h)},w.crypto.Util.getRandomBigIntegerOfNbytes=function(l){return new ve(w.crypto.Util.getRandomHexOfNbytes(l),16)},w.crypto.Util.getRandomHexOfNbits=function(l){var h=l%8,v=new Array((l-h)/8+1);return w.crypto.Util.SECURERANDOMGEN.nextBytes(v),v[0]=(255<<h&255^255)&v[0],aa(v)},w.crypto.Util.getRandomBigIntegerOfNbits=function(l){return new ve(w.crypto.Util.getRandomHexOfNbits(l),16)},w.crypto.Util.getRandomBigIntegerZeroToMax=function(l){for(var h=l.bitLength();;){var f=w.crypto.Util.getRandomBigIntegerOfNbits(h);if(-1!=l.compareTo(f))return f}},w.crypto.Util.getRandomBigIntegerMinToMax=function(l,h){var f=l.compareTo(h);if(1==f)throw"biMin is greater than biMax";if(0==f)return l;var v=h.subtract(l);return w.crypto.Util.getRandomBigIntegerZeroToMax(v).add(l)},w.crypto.MessageDigest=function(l){this.setAlgAndProvider=function(b,E){if(null!==(b=w.crypto.MessageDigest.getCanonicalAlgName(b))&&void 0===E&&(E=w.crypto.Util.DEFAULTPROVIDER[b]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(b)&&"cryptojs"==E){try{this.md=w.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[b].create()}catch(M){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+M}this.updateString=function(M){this.md.update(M)},this.updateHex=function(M){var D=pt.enc.Hex.parse(M);this.md.update(D)},this.digest=function(){return this.md.finalize().toString(pt.enc.Hex)},this.digestString=function(M){return this.updateString(M),this.digest()},this.digestHex=function(M){return this.updateHex(M),this.digest()}}if(-1!=":sha256:".indexOf(b)&&"sjcl"==E){try{this.md=new sjcl.hash.sha256}catch(M){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+M}this.updateString=function(M){this.md.update(M)},this.updateHex=function(M){var D=sjcl.codec.hex.toBits(M);this.md.update(D)},this.digest=function(){var M=this.md.finalize();return sjcl.codec.hex.fromBits(M)},this.digestString=function(M){return this.updateString(M),this.digest()},this.digestHex=function(M){return this.updateHex(M),this.digest()}}},this.updateString=function(b){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(b){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(b){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==l&&void 0!==l.alg&&(this.algName=l.alg,void 0===l.prov&&(this.provName=w.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},w.crypto.MessageDigest.getCanonicalAlgName=function(l){return"string"==typeof l&&(l=(l=l.toLowerCase()).replace(/-/,"")),l},w.crypto.MessageDigest.getHashLength=function(l){var h=w.crypto.MessageDigest,f=h.getCanonicalAlgName(l);if(void 0===h.HASHLENGTH[f])throw"not supported algorithm: "+l;return h.HASHLENGTH[f]},w.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},w.crypto.Mac=function(l){this.setAlgAndProvider=function(M,D){if(null==(M=M.toLowerCase())&&(M="hmacsha1"),"hmac"!=(M=M.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+M;void 0===D&&(D=w.crypto.Util.DEFAULTPROVIDER[M]),this.algProv=M+"/"+D;var R=M.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(R)&&"cryptojs"==D){try{this.mac=pt.algo.HMAC.create(w.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[R],this.pass)}catch(U){throw"setAlgAndProvider hash alg set fail hashAlg="+R+"/"+U}this.updateString=function(U){this.mac.update(U)},this.updateHex=function(U){var z=pt.enc.Hex.parse(U);this.mac.update(z)},this.doFinal=function(){return this.mac.finalize().toString(pt.enc.Hex)},this.doFinalString=function(U){return this.updateString(U),this.doFinal()},this.doFinalHex=function(U){return this.updateHex(U),this.doFinal()}}},this.updateString=function(M){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(M){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(M){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(M){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(M){if("string"==typeof M){var D=M;return(M.length%2==1||!M.match(/^[0-9A-Fa-f]+$/))&&(D=hs(M)),void(this.pass=pt.enc.Hex.parse(D))}if("object"!=typeof M)throw"KJUR.crypto.Mac unsupported password type: "+M;if(D=null,void 0!==M.hex){if(M.hex.length%2!=0||!M.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+M.hex;D=M.hex}if(void 0!==M.utf8&&(D=To(M.utf8)),void 0!==M.rstr&&(D=hs(M.rstr)),void 0!==M.b64&&(D=ro(M.b64)),void 0!==M.b64u&&(D=Qt(M.b64u)),null==D)throw"KJUR.crypto.Mac unsupported password type: "+M;this.pass=pt.enc.Hex.parse(D)},void 0!==l&&(void 0!==l.pass&&this.setPassword(l.pass),void 0!==l.alg&&(this.algName=l.alg,void 0===l.prov&&(this.provName=w.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},w.crypto.Signature=function(l){var h=null;if(this._setAlgNames=function(){var L=this.algName.match(/^(.+)with(.+)$/);L&&(this.mdAlgName=L[1].toLowerCase(),this.pubkeyAlgName=L[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(L,$){for(var J="",Q=$/4-L.length,te=0;te<Q;te++)J+="0";return J+L},this.setAlgAndProvider=function(L,$){if(this._setAlgNames(),"cryptojs/jsrsa"!=$)throw new Error("provider not supported: "+$);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new w.crypto.MessageDigest({alg:this.mdAlgName})}catch(J){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+J)}this.init=function(J,Q){var te=null;try{te=void 0===Q?Yt.getKey(J):Yt.getKey(J,Q)}catch(we){throw"init failed:"+we}if(!0===te.isPrivate)this.prvKey=te,this.state="SIGN";else{if(!0!==te.isPublic)throw"init failed.:"+te;this.pubKey=te,this.state="VERIFY"}},this.updateString=function(J){this.md.updateString(J)},this.updateHex=function(J){this.md.updateHex(J)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==w.crypto.ECDSA&&(this.prvKey=new w.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Ut&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Ut&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof w.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof w.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(J){return this.updateString(J),this.sign()},this.signHex=function(J){return this.updateHex(J),this.sign()},this.verify=function(J){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==w.crypto.ECDSA&&(this.pubKey=new w.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Ut&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,J,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Ut&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,J);if(void 0!==w.crypto.ECDSA&&this.pubKey instanceof w.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,J);if(void 0!==w.crypto.DSA&&this.pubKey instanceof w.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,J);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(L,$){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(L){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(L){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(L){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(L){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(L){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=l,void 0!==l&&(void 0!==l.alg&&(this.algName=l.alg,this.provName=void 0===l.prov?w.crypto.Util.DEFAULTPROVIDER[this.algName]:l.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==l.psssaltlen&&(this.pssSaltLen=l.psssaltlen),void 0!==l.prvkeypem)){if(void 0!==l.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{h=Yt.getKey(l.prvkeypem),this.init(h)}catch(L){throw"fatal error to load pem private key: "+L}}},w.crypto.Cipher=function(l){},w.crypto.Cipher.encrypt=function(l,h,f){if(h instanceof Ut&&h.isPublic){var v=w.crypto.Cipher.getAlgByKeyAndName(h,f);if("RSA"===v)return h.encrypt(l);if("RSAOAEP"===v)return h.encryptOAEP(l,"sha1");var b=v.match(/^RSAOAEP(\d+)$/);if(null!==b)return h.encryptOAEP(l,"sha"+b[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+f}throw"Cipher.encrypt: unsupported key or algorithm"},w.crypto.Cipher.decrypt=function(l,h,f){if(h instanceof Ut&&h.isPrivate){var v=w.crypto.Cipher.getAlgByKeyAndName(h,f);if("RSA"===v)return h.decrypt(l);if("RSAOAEP"===v)return h.decryptOAEP(l,"sha1");var b=v.match(/^RSAOAEP(\d+)$/);if(null!==b)return h.decryptOAEP(l,"sha"+b[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+f}throw"Cipher.decrypt: unsupported key or algorithm"},w.crypto.Cipher.getAlgByKeyAndName=function(l,h){if(l instanceof Ut){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(h))return h;if(null==h)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+h}throw"getAlgByKeyAndName: not supported algorithm name: "+h},w.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},(typeof w>"u"||!w)&&(w={}),(typeof w.crypto>"u"||!w.crypto)&&(w.crypto={}),w.crypto.ECDSA=function(l){var E=Error,M=ve,D=Mt,R=w.crypto.ECDSA,k=w.crypto.ECParameterDB,U=R.getName,F=rt.getVbyListEx,C=rt.isASN1HEX,B=new Co;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(L){return new M(L.bitLength(),B).mod(L.subtract(M.ONE)).add(M.ONE)},this.setNamedCurve=function(L){this.ecparams=k.getByName(L),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=L},this.setPrivateKeyHex=function(L){this.isPrivate=!0,this.prvKeyHex=L},this.setPublicKeyHex=function(L){this.isPublic=!0,this.pubKeyHex=L},this.getPublicKeyXYHex=function(){var L=this.pubKeyHex;if("04"!==L.substr(0,2))throw"this method supports uncompressed format(04) only";var $=this.ecparams.keycharlen;if(L.length!==2+2*$)throw"malformed public key hex length";var J={};return J.x=L.substr(2,$),J.y=L.substr(2+$),J},this.getShortNISTPCurveName=function(){var L=this.curveName;return"secp256r1"===L||"NIST P-256"===L||"P-256"===L||"prime256v1"===L?"P-256":"secp384r1"===L||"NIST P-384"===L||"P-384"===L?"P-384":"secp521r1"===L||"NIST P-521"===L||"P-521"===L?"P-521":null},this.generateKeyPairHex=function(){var $=this.getBigRandom(this.ecparams.n),J=this.ecparams.keycharlen,Q=("0000000000"+$.toString(16)).slice(-J);return this.setPrivateKeyHex(Q),{ecprvhex:Q,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var L=new M(this.prvKeyHex,16),$=this.ecparams.G.multiply(L),J=$.getX().toBigInteger(),Q=$.getY().toBigInteger(),te=this.ecparams.keycharlen,j="04"+("0000000000"+J.toString(16)).slice(-te)+("0000000000"+Q.toString(16)).slice(-te);return this.setPublicKeyHex(j),j},this.signWithMessageHash=function(L){return this.signHex(L,this.prvKeyHex)},this.signHex=function(L,$){var J=new M($,16),Q=this.ecparams.n,te=new M(L.substring(0,this.ecparams.keycharlen),16);do{var we=this.getBigRandom(Q),q=this.ecparams.G.multiply(we).getX().toBigInteger().mod(Q)}while(q.compareTo(M.ZERO)<=0);var ee=we.modInverse(Q).multiply(te.add(J.multiply(q))).mod(Q);return R.biRSSigToASN1Sig(q,ee)},this.sign=function(L,$){var J=$,Q=this.ecparams.n,te=M.fromByteArrayUnsigned(L);do{var we=this.getBigRandom(Q),q=this.ecparams.G.multiply(we).getX().toBigInteger().mod(Q)}while(q.compareTo(ve.ZERO)<=0);var ee=we.modInverse(Q).multiply(te.add(J.multiply(q))).mod(Q);return this.serializeSig(q,ee)},this.verifyWithMessageHash=function(L,$){return this.verifyHex(L,$,this.pubKeyHex)},this.verifyHex=function(L,$,J){try{var Q,te,we=R.parseSigHex($);Q=we.r,te=we.s;var Ae=D.decodeFromHex(this.ecparams.curve,J),j=new M(L.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(j,Q,te,Ae)}catch{return!1}},this.verify=function(L,$,J){var Q,te,Ae;if(Bitcoin.Util.isArray($)){var we=this.parseSig($);Q=we.r,te=we.s}else{if("object"!=typeof $||!$.r||!$.s)throw"Invalid value for signature";Q=$.r,te=$.s}if(J instanceof Mt)Ae=J;else{if(!Bitcoin.Util.isArray(J))throw"Invalid format for pubkey value, must be byte array or ECPointFp";Ae=D.decodeFrom(this.ecparams.curve,J)}var j=M.fromByteArrayUnsigned(L);return this.verifyRaw(j,Q,te,Ae)},this.verifyRaw=function(L,$,J,Q){var te=this.ecparams.n,we=this.ecparams.G;if($.compareTo(M.ONE)<0||$.compareTo(te)>=0||J.compareTo(M.ONE)<0||J.compareTo(te)>=0)return!1;var Ae=J.modInverse(te),j=L.multiply(Ae).mod(te),q=$.multiply(Ae).mod(te);return we.multiply(j).add(Q.multiply(q)).getX().toBigInteger().mod(te).equals($)},this.serializeSig=function(L,$){var J=L.toByteArraySigned(),Q=$.toByteArraySigned(),te=[];return te.push(2),te.push(J.length),(te=te.concat(J)).push(2),te.push(Q.length),(te=te.concat(Q)).unshift(te.length),te.unshift(48),te},this.parseSig=function(L){var $;if(48!=L[0])throw new Error("Signature not a valid DERSequence");if(2!=L[$=2])throw new Error("First element in signature must be a DERInteger");var J=L.slice($+2,$+2+L[$+1]);if(2!=L[$+=2+L[$+1]])throw new Error("Second element in signature must be a DERInteger");var Q=L.slice($+2,$+2+L[$+1]);return $+=2+L[$+1],{r:M.fromByteArrayUnsigned(J),s:M.fromByteArrayUnsigned(Q)}},this.parseSigCompact=function(L){if(65!==L.length)throw"Signature has the wrong length";var $=L[0]-27;if($<0||$>7)throw"Invalid signature type";var J=this.ecparams.n;return{r:M.fromByteArrayUnsigned(L.slice(1,33)).mod(J),s:M.fromByteArrayUnsigned(L.slice(33,65)).mod(J),i:$}},this.readPKCS5PrvKeyHex=function(L){if(!1===C(L))throw new Error("not ASN.1 hex string");var $,J,Q;try{$=F(L,0,["[0]",0],"06"),J=F(L,0,[1],"04");try{Q=F(L,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=U($),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(Q),this.setPrivateKeyHex(J),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(L){if(!1===C(L))throw new E("not ASN.1 hex string");var J,Q,te;try{F(L,0,[1,0],"06"),J=F(L,0,[1,1],"06"),Q=F(L,0,[2,0,1],"04");try{te=F(L,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new E("malformed PKCS#8 plain ECC private key")}if(this.curveName=U(J),void 0===this.curveName)throw new E("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(te),this.setPrivateKeyHex(Q),this.isPublic=!1},this.readPKCS8PubKeyHex=function(L){if(!1===C(L))throw new E("not ASN.1 hex string");var J,Q;try{F(L,0,[0,0],"06"),J=F(L,0,[0,1],"06"),Q=F(L,0,[1],"03")}catch{throw new E("malformed PKCS#8 ECC public key")}if(this.curveName=U(J),null===this.curveName)throw new E("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Q)},this.readCertPubKeyHex=function(L,$){if(!1===C(L))throw new E("not ASN.1 hex string");var J,Q;try{J=F(L,0,[0,5,0,1],"06"),Q=F(L,0,[0,5,1],"03")}catch{throw new E("malformed X.509 certificate ECC public key")}if(this.curveName=U(J),null===this.curveName)throw new E("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Q)},void 0!==l&&void 0!==l.curve&&(this.curveName=l.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==l&&(void 0!==l.prv&&this.setPrivateKeyHex(l.prv),void 0!==l.pub&&this.setPublicKeyHex(l.pub))},w.crypto.ECDSA.parseSigHex=function(l){var h=w.crypto.ECDSA.parseSigHexInHexRS(l);return{r:new ve(h.r,16),s:new ve(h.s,16)}},w.crypto.ECDSA.parseSigHexInHexRS=function(l){var f=rt.getChildIdx,v=rt.getV;if(rt.checkStrictDER(l,0),"30"!=l.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var b=f(l,0);if(2!=b.length)throw new Error("signature shall have two elements");var E=b[0],M=b[1];if("02"!=l.substr(E,2))throw new Error("1st item not ASN.1 integer");if("02"!=l.substr(M,2))throw new Error("2nd item not ASN.1 integer");return{r:v(l,E),s:v(l,M)}},w.crypto.ECDSA.asn1SigToConcatSig=function(l){var h=w.crypto.ECDSA.parseSigHexInHexRS(l),f=h.r,v=h.s;if(f.length>=130&&f.length<=134){if(f.length%2!=0)throw Error("unknown ECDSA sig r length error");if(v.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==f.substr(0,2)&&(f=f.substr(2)),"00"==v.substr(0,2)&&(v=v.substr(2));var b=Math.max(f.length,v.length);return(f=("000000"+f).slice(-b))+("000000"+v).slice(-b)}if("00"==f.substr(0,2)&&f.length%32==2&&(f=f.substr(2)),"00"==v.substr(0,2)&&v.length%32==2&&(v=v.substr(2)),f.length%32==30&&(f="00"+f),v.length%32==30&&(v="00"+v),f.length%32!=0)throw Error("unknown ECDSA sig r length error");if(v.length%32!=0)throw Error("unknown ECDSA sig s length error");return f+v},w.crypto.ECDSA.concatSigToASN1Sig=function(l){if(l.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var h=l.substr(0,l.length/2),f=l.substr(l.length/2);return w.crypto.ECDSA.hexRSSigToASN1Sig(h,f)},w.crypto.ECDSA.hexRSSigToASN1Sig=function(l,h){var f=new ve(l,16),v=new ve(h,16);return w.crypto.ECDSA.biRSSigToASN1Sig(f,v)},w.crypto.ECDSA.biRSSigToASN1Sig=function(l,h){var f=w.asn1,v=new f.DERInteger({bigint:l}),b=new f.DERInteger({bigint:h});return new f.DERSequence({array:[v,b]}).tohex()},w.crypto.ECDSA.getName=function(l){return"2b8104001f"===l?"secp192k1":"2a8648ce3d030107"===l?"secp256r1":"2b8104000a"===l?"secp256k1":"2b81040021"===l?"secp224r1":"2b81040022"===l?"secp384r1":"2b81040023"===l?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(l)?"secp256r1":-1!=="|secp256k1|".indexOf(l)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(l)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(l)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(l)?"secp521r1":null},(typeof w>"u"||!w)&&(w={}),(typeof w.crypto>"u"||!w.crypto)&&(w.crypto={}),w.crypto.ECParameterDB=new function(){var l={},h={};function f(v){return new ve(v,16)}this.getByName=function(v){var b=v;if(typeof h[b]<"u"&&(b=h[v]),typeof l[b]<"u")return l[b];throw"unregistered EC curve name: "+b},this.regist=function(v,b,E,M,D,R,k,U,z,F,C,B){l[v]={};var P=f(E),V=f(M),L=f(D),$=f(R),J=f(k),Q=new Or(P,V,L),te=Q.decodePointHex("04"+U+z);l[v].name=v,l[v].keylen=b,l[v].keycharlen=2*Math.ceil(b/8),l[v].curve=Q,l[v].G=te,l[v].n=$,l[v].h=J,l[v].oid=C,l[v].info=B;for(var we=0;we<F.length;we++)h[F[we]]=v}},w.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),w.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),w.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),w.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),w.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),w.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),w.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),w.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),w.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),w.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),(typeof w>"u"||!w)&&(w={}),(typeof w.crypto>"u"||!w.crypto)&&(w.crypto={}),w.crypto.DSA=function(){var f=rt.getVbyListEx,v=rt.isASN1HEX,b=ve;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(E,M,D,R,k){this.isPrivate=!0,this.p=E,this.q=M,this.g=D,this.y=R,this.x=k},this.setPrivateHex=function(E,M,D,R,k){var U,z,F,C,B;U=new ve(E,16),z=new ve(M,16),F=new ve(D,16),C="string"==typeof R&&R.length>1?new ve(R,16):null,B=new ve(k,16),this.setPrivate(U,z,F,C,B)},this.setPublic=function(E,M,D,R){this.isPublic=!0,this.p=E,this.q=M,this.g=D,this.y=R,this.x=null},this.setPublicHex=function(E,M,D,R){var k,U,z,F;k=new ve(E,16),U=new ve(M,16),z=new ve(D,16),F=new ve(R,16),this.setPublic(k,U,z,F)},this.signWithMessageHash=function(E){var M=this.p,D=this.q,R=this.g,U=this.x,z=w.crypto.Util.getRandomBigIntegerMinToMax(ve.ONE.add(ve.ONE),D.subtract(ve.ONE)),C=new ve(E.substr(0,D.bitLength()/4),16),B=R.modPow(z,M).mod(D),P=z.modInverse(D).multiply(C.add(U.multiply(B))).mod(D);return w.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:B}},{int:{bigint:P}}]})},this.verifyWithMessageHash=function(E,M){var D=this.p,R=this.q,k=this.g,U=this.y,z=this.parseASN1Signature(M),F=z[0],C=z[1],P=new ve(E.substr(0,R.bitLength()/4),16);if(ve.ZERO.compareTo(F)>0||F.compareTo(R)>0||ve.ZERO.compareTo(C)>=0||C.compareTo(R)>0)throw"invalid DSA signature";var V=C.modInverse(R),L=P.multiply(V).mod(R),$=F.multiply(V).mod(R);return 0==k.modPow(L,D).multiply(U.modPow($,D)).mod(D).mod(R).compareTo(F)},this.parseASN1Signature=function(E){try{return[new b(f(E,0,[0],"02"),16),new b(f(E,0,[1],"02"),16)]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(E){var M,D,R,k,U;if(!1===v(E))throw new Error("not ASN.1 hex string");try{M=f(E,0,[1],"02"),D=f(E,0,[2],"02"),R=f(E,0,[3],"02"),k=f(E,0,[4],"02"),U=f(E,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(M,D,R,k,U)},this.readPKCS8PrvKeyHex=function(E){var M,D,R,k;if(!1===v(E))throw new Error("not ASN.1 hex string");try{M=f(E,0,[1,1,0],"02"),D=f(E,0,[1,1,1],"02"),R=f(E,0,[1,1,2],"02"),k=f(E,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(M,D,R,null,k)},this.readPKCS8PubKeyHex=function(E){var M,D,R,k;if(!1===v(E))throw new Error("not ASN.1 hex string");try{M=f(E,0,[0,1,0],"02"),D=f(E,0,[0,1,1],"02"),R=f(E,0,[0,1,2],"02"),k=f(E,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(M,D,R,k)},this.readCertPubKeyHex=function(E,M){var D,R,k,U;if(!1===v(E))throw new Error("not ASN.1 hex string");try{D=f(E,0,[0,5,0,1,0],"02"),R=f(E,0,[0,5,0,1,1],"02"),k=f(E,0,[0,5,0,1,2],"02"),U=f(E,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(D,R,k,U)}};var Yt=function(){var l=function(P,V,L){return v(pt.AES,P,V,L)},v=function(P,V,L,$){var J=pt.enc.Hex.parse(V),Q=pt.enc.Hex.parse(L),te=pt.enc.Hex.parse($),we={};we.key=Q,we.iv=te,we.ciphertext=J;var Ae=P.decrypt(we,Q,{iv:te});return pt.enc.Hex.stringify(Ae)},b=function(P,V,L){return D(pt.AES,P,V,L)},D=function(P,V,L,$){var J=pt.enc.Hex.parse(V),Q=pt.enc.Hex.parse(L),te=pt.enc.Hex.parse($),we=P.encrypt(J,Q,{iv:te}),Ae=pt.enc.Hex.parse(we.toString());return pt.enc.Base64.stringify(Ae)},R={"AES-256-CBC":{proc:l,eproc:b,keylen:32,ivlen:16},"AES-192-CBC":{proc:l,eproc:b,keylen:24,ivlen:16},"AES-128-CBC":{proc:l,eproc:b,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(P,V,L){return v(pt.TripleDES,P,V,L)},eproc:function(P,V,L){return D(pt.TripleDES,P,V,L)},keylen:24,ivlen:8},"DES-CBC":{proc:function(P,V,L){return v(pt.DES,P,V,L)},eproc:function(P,V,L){return D(pt.DES,P,V,L)},keylen:8,ivlen:8}},z=function(P){var V={},L=P.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));L&&(V.cipher=L[1],V.ivsalt=L[2]);var $=P.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));$&&(V.type=$[1]);var J=-1,Q=0;-1!=P.indexOf("\r\n\r\n")&&(J=P.indexOf("\r\n\r\n"),Q=2),-1!=P.indexOf("\n\n")&&(J=P.indexOf("\n\n"),Q=1);var te=P.indexOf("-----END");if(-1!=J&&-1!=te){var we=P.substring(J+2*Q,te-Q);we=we.replace(/\s+/g,""),V.data=we}return V},F=function(P,V,L){for(var $=L.substring(0,16),J=pt.enc.Hex.parse($),Q=pt.enc.Utf8.parse(V),te=R[P].keylen+R[P].ivlen,we="",Ae=null;;){var j=pt.algo.MD5.create();if(null!=Ae&&j.update(Ae),j.update(Q),j.update(J),Ae=j.finalize(),(we+=pt.enc.Hex.stringify(Ae)).length>=2*te)break}var q={};return q.keyhex=we.substr(0,2*R[P].keylen),q.ivhex=we.substr(2*R[P].keylen,2*R[P].ivlen),q},C=function(P,V,L,$){var J=pt.enc.Base64.parse(P),Q=pt.enc.Hex.stringify(J);return(0,R[V].proc)(Q,L,$)};return{version:"1.0.0",parsePKCS5PEM:function(P){return z(P)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(P,V,L){return F(P,V,L)},decryptKeyB64:function(P,V,L,$){return C(P,V,L,$)},getDecryptedKeyHex:function(P,V){var L=z(P),J=L.cipher,Q=L.ivsalt,te=L.data,we=F(J,V,Q);return C(te,J,we.keyhex,Q)},getEncryptedPKCS5PEMFromPrvKeyHex:function(P,V,L,$,J){var ee="";if((typeof $>"u"||null==$)&&($="AES-256-CBC"),typeof R[$]>"u")throw new Error("KEYUTIL unsupported algorithm: "+$);if(typeof J>"u"||null==J){var te=function(P){var V=pt.lib.WordArray.random(P);return pt.enc.Hex.stringify(V)}(R[$].ivlen);J=te.toUpperCase()}var j=function(P,V,L,$){return(0,R[V].eproc)(P,L,$)}(V,$,F($,L,J).keyhex,J);return ee="-----BEGIN "+P+" PRIVATE KEY-----\r\n",ee+="Proc-Type: 4,ENCRYPTED\r\n",ee+="DEK-Info: "+$+","+J+"\r\n",ee+="\r\n",(ee+=j.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+P+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(P){var L=rt.getChildIdx,$=rt.getV,J={},Q=L(P,0);if(2!=Q.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+Q.length);J.ciphertext=$(P,Q[1]);var te=L(P,Q[0]);if(2!=te.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+te.length);if("2a864886f70d01050d"!=$(P,te[0]))throw new Error("this only supports pkcs5PBES2");var we=L(P,te[1]);if(2!=te.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+we.length);var Ae=L(P,we[1]);if(2!=Ae.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+Ae.length);if("2a864886f70d0307"!=$(P,Ae[0]))throw"this only supports TripleDES";J.encryptionSchemeAlg="TripleDES",J.encryptionSchemeIV=$(P,Ae[1]);var j=L(P,we[0]);if(2!=j.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+j.length);if("2a864886f70d01050c"!=$(P,j[0]))throw new Error("this only supports pkcs5PBKDF2");var q=L(P,j[1]);if(q.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+q.length);J.pbkdf2Salt=$(P,q[0]);var ee=$(P,q[1]);try{J.pbkdf2Iter=parseInt(ee,16)}catch{throw new Error("malformed format pbkdf2Iter: "+ee)}return J},getPBKDF2KeyHexFromParam:function(P,V){var L=pt.enc.Hex.parse(P.pbkdf2Salt),J=pt.PBKDF2(V,L,{keySize:6,iterations:P.pbkdf2Iter});return pt.enc.Hex.stringify(J)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(P,V){var L=er(P,"ENCRYPTED PRIVATE KEY"),$=this.parseHexOfEncryptedPKCS8(L),J=Yt.getPBKDF2KeyHexFromParam($,V),Q={};Q.ciphertext=pt.enc.Hex.parse($.ciphertext);var te=pt.enc.Hex.parse(J),we=pt.enc.Hex.parse($.encryptionSchemeIV),Ae=pt.TripleDES.decrypt(Q,te,{iv:we});return pt.enc.Hex.stringify(Ae)},getKeyFromEncryptedPKCS8PEM:function(P,V){var L=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(P,V);return this.getKeyFromPlainPrivatePKCS8Hex(L)},parsePlainPrivatePKCS8Hex:function(P){var V=rt,L=V.getChildIdx,$=V.getV,J={algparam:null};if("30"!=P.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var Q=L(P,0);if(Q.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=P.substr(Q[1],2))throw new Error("malformed PKCS8 private key(code:003)");var te=L(P,Q[1]);if(2!=te.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=P.substr(te[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(J.algoid=$(P,te[0]),"06"==P.substr(te[1],2)&&(J.algparam=$(P,te[1])),"04"!=P.substr(Q[2],2))throw new Error("malformed PKCS8 private key(code:006)");return J.keyidx=V.getVidx(P,Q[2]),J},getKeyFromPlainPrivatePKCS8PEM:function(P){var V=er(P,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(V)},getKeyFromPlainPrivatePKCS8Hex:function(P){var L,V=this.parsePlainPrivatePKCS8Hex(P);if("2a864886f70d010101"==V.algoid)L=new Ut;else if("2a8648ce380401"==V.algoid)L=new w.crypto.DSA;else{if("2a8648ce3d0201"!=V.algoid)throw new Error("unsupported private key algorithm");L=new w.crypto.ECDSA}return L.readPKCS8PrvKeyHex(P),L},_getKeyFromPublicPKCS8Hex:function(P){var V,L=rt.getVbyList(P,0,[0,0],"06");if("2a864886f70d010101"===L)V=new Ut;else if("2a8648ce380401"===L)V=new w.crypto.DSA;else{if("2a8648ce3d0201"!==L)throw new Error("unsupported PKCS#8 public key hex");V=new w.crypto.ECDSA}return V.readPKCS8PubKeyHex(P),V},parsePublicRawRSAKeyHex:function(P){var L=rt.getChildIdx,$=rt.getV,J={};if("30"!=P.substr(0,2))throw new Error("malformed RSA key(code:001)");var Q=L(P,0);if(2!=Q.length)throw new Error("malformed RSA key(code:002)");if("02"!=P.substr(Q[0],2))throw new Error("malformed RSA key(code:003)");if(J.n=$(P,Q[0]),"02"!=P.substr(Q[1],2))throw new Error("malformed RSA key(code:004)");return J.e=$(P,Q[1]),J},parsePublicPKCS8Hex:function(P){var V=rt,L=V.getChildIdx,$=V.getV,J={algparam:null},Q=L(P,0);if(2!=Q.length)throw new Error("outer DERSequence shall have 2 elements: "+Q.length);var te=Q[0];if("30"!=P.substr(te,2))throw new Error("malformed PKCS8 public key(code:001)");var we=L(P,te);if(2!=we.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=P.substr(we[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(J.algoid=$(P,we[0]),"06"==P.substr(we[1],2)?J.algparam=$(P,we[1]):"30"==P.substr(we[1],2)&&(J.algparam={},J.algparam.p=V.getVbyList(P,we[1],[0],"02"),J.algparam.q=V.getVbyList(P,we[1],[1],"02"),J.algparam.g=V.getVbyList(P,we[1],[2],"02")),"03"!=P.substr(Q[1],2))throw new Error("malformed PKCS8 public key(code:004)");return J.key=$(P,Q[1]).substr(2),J}}}();function qs(l,h){for(var f="",v=h/4-l.length,b=0;b<v;b++)f+="0";return f+l}function mu(l,h,f){for(var v="",b=0;v.length<h;)v+=Nr(f(hs(l+String.fromCharCode.apply(String,[(4278190080&b)>>24,(16711680&b)>>16,(65280&b)>>8,255&b])))),b+=1;return v}function Fs(l){for(var h in w.crypto.Util.DIGESTINFOHEAD){var f=w.crypto.Util.DIGESTINFOHEAD[h],v=f.length;if(l.substring(0,v)==f)return[h,l.substring(v)]}return[]}function en(l){var J,h=rt,f=h.getChildIdx,v=h.getV,E=h.parse,M=h.getTLV,D=h.getVbyList,R=h.getVbyListEx,k=h.getTLVbyList,U=h.getTLVbyListEx,z=h.getIdxbyList,F=h.getIdxbyListEx,C=h.getVidx,B=h.getInt,P=h.oidname,V=h.hextooidstr,$=er,Q=Error;try{J=w.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var j=k(this.hex,0,[0,0]);if("a0"==j.substr(0,2)){var q=k(j,0,[0]),ee=B(q,0);if(ee<0||2<ee)throw new Error("malformed version field");return this.version=ee+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return R(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var j=U(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(j)},this.getAlgorithmIdentifierName=function(j){for(var q in J)if(j===J[q])return q;return P(R(j,0,[0],"06"))},this.getIssuer=function(j,q){return this.getX500Name(this.getIssuerHex(),j,q)},this.getIssuerHex=function(){return k(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(j,q){return this.getX500Name(this.getSubjectHex(),j,q)},this.getSubjectHex=function(){return k(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var j=D(this.hex,0,[0,4+this.foffset,0]);return j=j.replace(/(..)/g,"%$1"),decodeURIComponent(j)},this.getNotAfter=function(){var j=D(this.hex,0,[0,4+this.foffset,1]);return j=j.replace(/(..)/g,"%$1"),decodeURIComponent(j)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return k(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var j=this.getSPKI();return null==j?null:D(j,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return z(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var j=this.getPublicKeyIdx();return z(this.hex,j,[1,0],"30")},this.getPublicKey=function(){return Yt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var j=k(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(j)},this.getSignatureValueHex=function(){return D(this.hex,0,[2],"03",!0)},this.verifySignature=function(j){var q=this.getSignatureAlgorithmField(),ee=this.getSignatureValueHex(),ie=k(this.hex,0,[0],"30"),de=new w.crypto.Signature({alg:q});return de.init(j),de.updateHex(ie),de.verify(ee)},this.parseExt=function(j){var q,ee,ie;if(void 0===j){if(3!==this.version)return-1;q=z(ie=this.hex,0,[0,7,0],"30"),ee=f(ie,q)}else{ie=er(j);var de=z(ie,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=v(ie,de))return void(this.aExtInfo=new Array);q=z(ie,0,[0,3,0,1,0],"30"),ee=f(ie,q),this.hex=ie}this.aExtInfo=new Array;for(var be=0;be<ee.length;be++){var ce={critical:!1},_e=0;3===f(ie,ee[be]).length&&(ce.critical=!0,_e=1),ce.oid=h.hextooidstr(D(ie,ee[be],[0],"06"));var Ie=z(ie,ee[be],[1+_e]);ce.vidx=C(ie,Ie),this.aExtInfo.push(ce)}},this.getExtInfo=function(j){var q=this.aExtInfo,ee=j;if(j.match(/^[0-9.]+$/)||(ee=w.asn1.x509.OID.name2oid(j)),""!==ee)for(var ie=0;ie<q.length;ie++)if(q[ie].oid===ee)return q[ie]},this.getCriticalExtV=function(j,q,ee){if(null!=q)return[q,ee];var ie=this.getExtInfo(j);return null==ie?[null,null]:[M(this.hex,ie.vidx),ie.critical]},this.getExtBasicConstraints=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("basicConstraints");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"basicConstraints"};if(q&&(ie.critical=!0),"3000"===j)return ie;if("30030101ff"===j)return ie.cA=!0,ie;if("30060101ff02"===j.substr(0,12)){var de=v(j,10),be=parseInt(de,16);return ie.cA=!0,ie.pathLen=be,ie}throw new Error("hExtV parse error: "+j)},this.getExtNameConstraints=function(j,q){var ee=this.getCriticalExtV("nameConstraints",j,q);if(q=ee[1],null!=(j=ee[0])){var ie={extname:"nameConstraints"};q&&(ie.critical=!0);for(var de=f(j,0),be=0;be<de.length;be++){for(var ce=[],pe=f(j,de[be]),_e=0;_e<pe.length;_e++){var Ie=M(j,pe[_e]),Bt=this.getGeneralSubtree(Ie);ce.push(Bt)}var Nt=j.substr(de[be],2);"a0"==Nt?ie.permit=ce:"a1"==Nt&&(ie.exclude=ce)}return ie}},this.getGeneralSubtree=function(j){var q=f(j,0),ee=q.length;if(ee<1||2<ee)throw new Error("wrong num elements");for(var ie=this.getGeneralName(M(j,q[0])),de=1;de<ee;de++){var be=j.substr(q[de],2),ce=v(j,q[de]),pe=parseInt(ce,16);"80"==be&&(ie.min=pe),"81"==be&&(ie.max=pe)}return ie},this.getExtKeyUsage=function(j,q){var ee=this.getCriticalExtV("keyUsage",j,q);if(q=ee[1],null!=(j=ee[0])){var ie={extname:"keyUsage"};return q&&(ie.critical=!0),ie.names=this.getExtKeyUsageString(j).split(","),ie}},this.getExtKeyUsageBin=function(j){if(void 0===j){var q=this.getExtInfo("keyUsage");if(void 0===q)return"";j=M(this.hex,q.vidx)}if(8!=j.length&&10!=j.length)throw new Error("malformed key usage value: "+j);var ee="000000000000000"+parseInt(j.substr(6),16).toString(2);return 8==j.length&&(ee=ee.slice(-8)),10==j.length&&(ee=ee.slice(-16)),""==(ee=ee.replace(/0+$/,""))&&(ee="0"),ee},this.getExtKeyUsageString=function(j){for(var q=this.getExtKeyUsageBin(j),ee=new Array,ie=0;ie<q.length;ie++)"1"==q.substr(ie,1)&&ee.push(en.KEYUSAGE_NAME[ie]);return ee.join(",")},this.getExtSubjectKeyIdentifier=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("subjectKeyIdentifier");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"subjectKeyIdentifier"};q&&(ie.critical=!0);var de=v(j,0);return ie.kid={hex:de},ie},this.getExtAuthorityKeyIdentifier=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("authorityKeyIdentifier");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"authorityKeyIdentifier"};q&&(ie.critical=!0);for(var de=f(j,0),be=0;be<de.length;be++){var ce=j.substr(de[be],2);if("80"===ce&&(ie.kid={hex:v(j,de[be])}),"a1"===ce){var pe=M(j,de[be]),_e=this.getGeneralNames(pe);ie.issuer=_e[0].dn}"82"===ce&&(ie.sn={hex:v(j,de[be])})}return ie},this.getExtExtKeyUsage=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("extKeyUsage");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"extKeyUsage",array:[]};q&&(ie.critical=!0);for(var de=f(j,0),be=0;be<de.length;be++)ie.array.push(P(v(j,de[be])));return ie},this.getExtExtKeyUsageName=function(){var j=this.getExtInfo("extKeyUsage");if(void 0===j)return j;var q=new Array,ee=M(this.hex,j.vidx);if(""===ee)return q;for(var ie=f(ee,0),de=0;de<ie.length;de++)q.push(P(v(ee,ie[de])));return q},this.getExtSubjectAltName=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("subjectAltName");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"subjectAltName",array:[]};return q&&(ie.critical=!0),ie.array=this.getGeneralNames(j),ie},this.getExtIssuerAltName=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("issuerAltName");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"issuerAltName",array:[]};return q&&(ie.critical=!0),ie.array=this.getGeneralNames(j),ie},this.getGeneralNames=function(j){for(var q=f(j,0),ee=[],ie=0;ie<q.length;ie++){var de=this.getGeneralName(M(j,q[ie]));void 0!==de&&ee.push(de)}return ee},this.getGeneralName=function(j){var q=j.substr(0,2),ee=v(j,0),ie=Nr(ee);return"81"==q?{rfc822:ie}:"82"==q?{dns:ie}:"86"==q?{uri:ie}:"87"==q?{ip:jh(ee)}:"a4"==q?{dn:this.getX500Name(ee)}:"a0"==q?{other:this.getOtherName(j)}:void 0},this.getExtSubjectAltName2=function(){var j,q,ee,ie=this.getExtInfo("subjectAltName");if(void 0===ie)return ie;for(var de=new Array,be=M(this.hex,ie.vidx),ce=f(be,0),pe=0;pe<ce.length;pe++)ee=be.substr(ce[pe],2),j=v(be,ce[pe]),"81"===ee&&(q=Yn(j),de.push(["MAIL",q])),"82"===ee&&(q=Yn(j),de.push(["DNS",q])),"84"===ee&&(q=en.hex2dn(j,0),de.push(["DN",q])),"86"===ee&&(q=Yn(j),de.push(["URI",q])),"87"===ee&&(q=jh(j),de.push(["IP",q]));return de},this.getExtCRLDistributionPoints=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("cRLDistributionPoints");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"cRLDistributionPoints",array:[]};q&&(ie.critical=!0);for(var de=f(j,0),be=0;be<de.length;be++){var ce=M(j,de[be]);ie.array.push(this.getDistributionPoint(ce))}return ie},this.getDistributionPoint=function(j){for(var q={},ee=f(j,0),ie=0;ie<ee.length;ie++){var de=j.substr(ee[ie],2),be=M(j,ee[ie]);"a0"==de&&(q.dpname=this.getDistributionPointName(be))}return q},this.getDistributionPointName=function(j){for(var q={},ee=f(j,0),ie=0;ie<ee.length;ie++){var de=j.substr(ee[ie],2),be=M(j,ee[ie]);"a0"==de&&(q.full=this.getGeneralNames(be))}return q},this.getExtCRLDistributionPointsURI=function(){var j=this.getExtCRLDistributionPoints();if(null==j)return j;for(var q=j.array,ee=[],ie=0;ie<q.length;ie++)try{null!=q[ie].dpname.full[0].uri&&ee.push(q[ie].dpname.full[0].uri)}catch{}return ee},this.getExtAIAInfo=function(){var j=this.getExtInfo("authorityInfoAccess");if(void 0===j)return j;for(var q={ocsp:[],caissuer:[]},ee=f(this.hex,j.vidx),ie=0;ie<ee.length;ie++){var de=D(this.hex,ee[ie],[0],"06"),be=D(this.hex,ee[ie],[1],"86");"2b06010505073001"===de&&q.ocsp.push(Yn(be)),"2b06010505073002"===de&&q.caissuer.push(Yn(be))}return q},this.getExtAuthorityInfoAccess=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("authorityInfoAccess");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"authorityInfoAccess",array:[]};q&&(ie.critical=!0);for(var de=f(j,0),be=0;be<de.length;be++){var ce=R(j,de[be],[0],"06"),_e=Yn(D(j,de[be],[1],"86"));if("2b06010505073001"==ce)ie.array.push({ocsp:_e});else{if("2b06010505073002"!=ce)throw new Error("unknown method: "+ce);ie.array.push({caissuer:_e})}}return ie},this.getExtCertificatePolicies=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("certificatePolicies");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"certificatePolicies",array:[]};q&&(ie.critical=!0);for(var de=f(j,0),be=0;be<de.length;be++){var ce=M(j,de[be]),pe=this.getPolicyInformation(ce);ie.array.push(pe)}return ie},this.getPolicyInformation=function(j){var q={},ee=D(j,0,[0],"06");q.policyoid=P(ee);var ie=F(j,0,[1],"30");if(-1!=ie){q.array=[];for(var de=f(j,ie),be=0;be<de.length;be++){var ce=M(j,de[be]),pe=this.getPolicyQualifierInfo(ce);q.array.push(pe)}}return q},this.getOtherName=function(j){var q={},ee=f(j,0),ie=D(j,ee[0],[],"06"),de=D(j,ee[1],[]);return q.oid=P(ie),q.value=E(de),q},this.getPolicyQualifierInfo=function(j){var q={},ee=D(j,0,[0],"06");if("2b06010505070201"===ee){var ie=R(j,0,[1],"16");q.cps=Nr(ie)}else if("2b06010505070202"===ee){var de=k(j,0,[1],"30");q.unotice=this.getUserNotice(de)}return q},this.getUserNotice=function(j){for(var q={},ee=f(j,0),ie=0;ie<ee.length;ie++){var de=M(j,ee[ie]);"30"!=de.substr(0,2)&&(q.exptext=this.getDisplayText(de))}return q},this.getDisplayText=function(j){var ee={};return ee.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[j.substr(0,2)],ee.str=Nr(v(j,0)),ee},this.getExtPolicyMappings=function(j,q){var ee=this.getCriticalExtV("policyMappings",j,q);if(q=ee[1],null!=(j=ee[0])){var ie={extname:"policyMappings"};q&&(ie.critical=!0);try{for(var be=E(j).seq,ce=[],pe=0;pe<be.length;pe++){var _e=be[pe].seq;ce.push([_e[0].oid,_e[1].oid])}ie.array=ce}catch{throw new Q("malformed policyMappings")}return ie}},this.getExtPolicyConstraints=function(j,q){var ee=this.getCriticalExtV("policyConstraints",j,q);if(q=ee[1],null!=(j=ee[0])){var ie={extname:"policyConstraints"};q&&(ie.critical=!0);var de=E(j);try{for(var be=de.seq,ce=0;ce<be.length;ce++){var pe=be[ce].tag;0==pe.explicit&&("80"==pe.tag&&(ie.reqexp=parseInt(pe.hex,16)),"81"==pe.tag&&(ie.inhibit=parseInt(pe.hex,16)))}}catch{return new Q("malformed policyConstraints value")}return ie}},this.getExtInhibitAnyPolicy=function(j,q){var ee=this.getCriticalExtV("inhibitAnyPolicy",j,q);if(q=ee[1],null!=(j=ee[0])){var ie={extname:"inhibitAnyPolicy"};q&&(ie.critical=!0);var de=B(j,0);return-1==de?new Q("wrong value"):(ie.skip=de,ie)}},this.getExtCRLNumber=function(j,q){var ee={extname:"cRLNumber"};if(q&&(ee.critical=!0),"02"==j.substr(0,2))return ee.num={hex:v(j,0)},ee;throw new Q("hExtV parse error: "+j)},this.getExtCRLReason=function(j,q){var ee={extname:"cRLReason"};if(q&&(ee.critical=!0),"0a"==j.substr(0,2))return ee.code=parseInt(v(j,0),16),ee;throw new Error("hExtV parse error: "+j)},this.getExtOcspNonce=function(j,q){var ee={extname:"ocspNonce"};q&&(ee.critical=!0);var ie=v(j,0);return ee.hex=ie,ee},this.getExtOcspNoCheck=function(j,q){var ee={extname:"ocspNoCheck"};return q&&(ee.critical=!0),ee},this.getExtAdobeTimeStamp=function(j,q){if(void 0===j&&void 0===q){var ee=this.getExtInfo("adobeTimeStamp");if(void 0===ee)return;j=M(this.hex,ee.vidx),q=ee.critical}var ie={extname:"adobeTimeStamp"};q&&(ie.critical=!0);var de=f(j,0);if(de.length>1){var be=M(j,de[1]),ce=this.getGeneralName(be);null!=ce.uri&&(ie.uri=ce.uri)}if(de.length>2){var pe=M(j,de[2]);"0101ff"==pe&&(ie.reqauth=!0),"010100"==pe&&(ie.reqauth=!1)}return ie};var te=function(j){var q={};try{var ie=w.asn1.x509.OID.name2oid(j.seq[0].oid);q.type=w.asn1.x509.OID.oid2atype(ie);var de=j.seq[1];if(null!=de.utf8str)q.ds="utf8",q.value=de.utf8str.str;else if(null!=de.numstr)q.ds="num",q.value=de.numstr.str;else if(null!=de.telstr)q.ds="tel",q.value=de.telstr.str;else if(null!=de.prnstr)q.ds="prn",q.value=de.prnstr.str;else if(null!=de.ia5str)q.ds="ia5",q.value=de.ia5str.str;else if(null!=de.visstr)q.ds="vis",q.value=de.visstr.str;else{if(null==de.bmpstr)throw"error";q.ds="bmp",q.value=de.bmpstr.str}return q}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},we=function(j){try{return j.set.map(function(q){return te(q)})}catch(q){throw new Error("improper ASN.1 parsed RDN: "+q)}};this.getX500NameRule=function(j){for(var ce=null,pe=[],_e=0;_e<j.length;_e++)for(var Ie=j[_e],Bt=0;Bt<Ie.length;Bt++)pe.push(Ie[Bt]);for(_e=0;_e<pe.length;_e++){var Nt=pe[_e],Lt=Nt.ds,Y=Nt.type;if("prn"!=Lt&&"utf8"!=Lt&&"ia5"!=Lt)return"mixed";if("ia5"==Lt){if("CN"!=Y)return"mixed";if(w.lang.String.isMail(Nt.value))continue;return"mixed"}if("C"==Y){if("prn"==Lt)continue;return"mixed"}if(null==ce)ce=Lt;else if(ce!==Lt)return"mixed"}return ce??"prn"},this.getAttrTypeAndValue=function(j){var q=E(j);return te(q)},this.getRDN=function(j){var q=E(j);return we(q)},this.getX500NameArray=function(j){return function(j){try{return j.seq.map(function(q){return we(q)})}catch(q){throw new Error("improper ASN.1 parsed X500Name: "+q)}}(E(j))},this.getX500Name=function(j,q,ee){var ie=this.getX500NameArray(j),be={str:this.dnarraytostr(ie)};return be.array=ie,1==ee&&(be.hex=j),1==q&&(be.canon=this.c14nRDNArray(ie)),be},this.readCertPEM=function(j){this.readCertHex($(j))},this.readCertHex=function(j){this.hex=j,this.getVersion();try{z(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(j){var q={};return null==j&&(j={}),q.version=this.getVersion(),q.serial={hex:this.getSerialNumberHex()},q.sigalg=this.getSignatureAlgorithmField(),q.issuer=this.getIssuer(j.dncanon,j.dnhex),q.notbefore=this.getNotBefore(),q.notafter=this.getNotAfter(),q.subject=this.getSubject(j.dncanon,j.dnhex),q.sbjpubkey=Ar(this.getPublicKeyHex(),"PUBLIC KEY"),null!=this.aExtInfo&&this.aExtInfo.length>0&&(q.ext=this.getExtParamArray()),q.sighex=this.getSignatureValueHex(),1==j.tbshex&&(q.tbshex=k(this.hex,0,[0])),1==j.nodnarray&&(delete q.issuer.array,delete q.subject.array),q},this.getExtParamArray=function(j){null==j&&-1!=F(this.hex,0,[0,"[3]"])&&(j=U(this.hex,0,[0,"[3]",0],"30"));for(var ee=[],ie=f(j,0),de=0;de<ie.length;de++){var be=M(j,ie[de]),ce=this.getExtParam(be);null!=ce&&ee.push(ce)}return ee},this.getExtParam=function(j){var ie=f(j,0).length;if(2!=ie&&3!=ie)throw new Error("wrong number elements in Extension: "+ie+" "+j);var de=V(D(j,0,[0],"06")),be=!1;3==ie&&"0101ff"==k(j,0,[1])&&(be=!0);var ce=k(j,0,[ie-1,0]),pe=void 0;if("2.5.29.14"==de?pe=this.getExtSubjectKeyIdentifier(ce,be):"2.5.29.15"==de?pe=this.getExtKeyUsage(ce,be):"2.5.29.17"==de?pe=this.getExtSubjectAltName(ce,be):"2.5.29.18"==de?pe=this.getExtIssuerAltName(ce,be):"2.5.29.19"==de?pe=this.getExtBasicConstraints(ce,be):"2.5.29.30"==de?pe=this.getExtNameConstraints(ce,be):"2.5.29.31"==de?pe=this.getExtCRLDistributionPoints(ce,be):"2.5.29.32"==de?pe=this.getExtCertificatePolicies(ce,be):"2.5.29.33"==de?pe=this.getExtPolicyMappings(ce,be):"2.5.29.35"==de?pe=this.getExtAuthorityKeyIdentifier(ce,be):"2.5.29.36"==de?pe=this.getExtPolicyConstraints(ce,be):"2.5.29.37"==de?pe=this.getExtExtKeyUsage(ce,be):"2.5.29.54"==de?pe=this.getExtInhibitAnyPolicy(ce,be):"1.3.6.1.5.5.7.1.1"==de?pe=this.getExtAuthorityInfoAccess(ce,be):"2.5.29.20"==de?pe=this.getExtCRLNumber(ce,be):"2.5.29.21"==de?pe=this.getExtCRLReason(ce,be):"1.3.6.1.5.5.7.48.1.2"==de?pe=this.getExtOcspNonce(ce,be):"1.3.6.1.5.5.7.48.1.5"==de?pe=this.getExtOcspNoCheck(ce,be):"1.2.840.113583.1.1.9.1"==de&&(pe=this.getExtAdobeTimeStamp(ce,be)),null!=pe)return pe;var _e={extname:de,extn:ce};return be&&(_e.critical=!0),_e},this.findExt=function(j,q){for(var ee=0;ee<j.length;ee++)if(j[ee].extname==q)return j[ee];return null},this.updateExtCDPFullURI=function(j,q){var ee=this.findExt(j,"cRLDistributionPoints");if(null!=ee&&null!=ee.array)for(var ie=ee.array,de=0;de<ie.length;de++)if(null!=ie[de].dpname&&null!=ie[de].dpname.full)for(var be=ie[de].dpname.full,ce=0;ce<be.length;ce++){var pe=be[de];null!=pe.uri&&(pe.uri=q)}},this.updateExtAIAOCSP=function(j,q){var ee=this.findExt(j,"authorityInfoAccess");if(null!=ee&&null!=ee.array)for(var ie=ee.array,de=0;de<ie.length;de++)null!=ie[de].ocsp&&(ie[de].ocsp=q)},this.updateExtAIACAIssuer=function(j,q){var ee=this.findExt(j,"authorityInfoAccess");if(null!=ee&&null!=ee.array)for(var ie=ee.array,de=0;de<ie.length;de++)null!=ie[de].caissuer&&(ie[de].caissuer=q)},this.dnarraytostr=function(j){return"/"+j.map(function(ie){return function q(ie){return ie.map(function(de){return function ee(ie){return ie.type+"="+ie.value}(de).replace(/\+/,"\\+")}).join("+")}(ie).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(j){var q;if(null!=j.str&&null==j.array){var ie=new w.asn1.x509.X500Name({str:j.str}).tohex();q=this.getX500NameArray(ie)}else q=j.array;null==j.canon&&(j.canon=this.c14nRDNArray(q))},this.c14nRDNArray=function(j){for(var q=[],ee=0;ee<j.length;ee++){for(var ie=j[ee],de=[],be=0;be<ie.length;be++){var ce=ie[be],pe=ce.value;pe=(pe=(pe=(pe=pe.replace(/^\s*/,"")).replace(/\s*$/,"")).replace(/\s+/g," ")).toLowerCase(),de.push(ce.type.toLowerCase()+"="+pe)}q.push(de.join("+"))}return"/"+q.join("/")},this.getInfo=function(){var be,ce,pe,j=function(Rs){for(var zn="",Sr="    ",Jn=Rs.array,pr=0;pr<Jn.length;pr++){var rn=Jn[pr];null!=rn.dn&&(zn+=Sr+"dn: "+rn.dn.str+"\n"),null!=rn.ip&&(zn+=Sr+"ip: "+rn.ip+"\n"),null!=rn.rfc822&&(zn+=Sr+"rfc822: "+rn.rfc822+"\n"),null!=rn.dns&&(zn+=Sr+"dns: "+rn.dns+"\n"),null!=rn.uri&&(zn+=Sr+"uri: "+rn.uri+"\n"),null!=rn.other&&(zn+=Sr+"other: "+rn.other.oid+"="+JSON.stringify(rn.other.value).replace(/\"/g,"")+"\n")}return zn.replace(/\n$/,"")},q=function(Rs){for(var zn="",Sr=Rs.array,Xi=0;Xi<Sr.length;Xi++){var Jn=Sr[Xi];if(zn+="    policy oid: "+Jn.policyoid+"\n",void 0!==Jn.array)for(var pr=0;pr<Jn.array.length;pr++){var rn=Jn.array[pr];void 0!==rn.cps&&(zn+="    cps: "+rn.cps+"\n")}}return zn},ee=function(Rs){for(var zn="",Sr=Rs.array,Xi=0;Xi<Sr.length;Xi++){var Jn=Sr[Xi];try{void 0!==Jn.dpname.full[0].uri&&(zn+="    "+Jn.dpname.full[0].uri+"\n")}catch{}try{void 0!==Jn.dname.full[0].dn.hex&&(zn+="    "+en.hex2dn(Jn.dpname.full[0].dn.hex)+"\n")}catch{}}return zn},ie=function(Rs){for(var zn="",Sr=Rs.array,Xi=0;Xi<Sr.length;Xi++){var Jn=Sr[Xi];void 0!==Jn.caissuer&&(zn+="    caissuer: "+Jn.caissuer+"\n"),void 0!==Jn.ocsp&&(zn+="    ocsp: "+Jn.ocsp+"\n")}return zn};if(be="Basic Fields\n",be+="  serial number: "+this.getSerialNumberHex()+"\n",be+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",be+="  issuer: "+this.getIssuerString()+"\n",be+="  notBefore: "+this.getNotBefore()+"\n",be+="  notAfter: "+this.getNotAfter()+"\n",be+="  subject: "+this.getSubjectString()+"\n",be+="  subject public key info: \n",be+="    key algorithm: "+(ce=this.getPublicKey()).type+"\n","RSA"===ce.type&&(be+="    n="+Dn(ce.n.toString(16)).substr(0,16)+"...\n",be+="    e="+Dn(ce.e.toString(16))+"\n"),null!=(pe=this.aExtInfo)){be+="X509v3 Extensions:\n";for(var _e=0;_e<pe.length;_e++){var Ie=pe[_e],Bt=w.asn1.x509.OID.oid2name(Ie.oid);""===Bt&&(Bt=Ie.oid);var Nt="";if(!0===Ie.critical&&(Nt="CRITICAL"),be+="  "+Bt+" "+Nt+":\n","basicConstraints"===Bt){var Lt=this.getExtBasicConstraints();void 0===Lt.cA?be+="    {}\n":(be+="    cA=true",void 0!==Lt.pathLen&&(be+=", pathLen="+Lt.pathLen),be+="\n")}else if("policyMappings"==Bt)be+="    "+this.getExtPolicyMappings().array.map(function(Rs){return Rs[0]+":"+Rs[1]}).join(", ")+"\n";else if("policyConstraints"==Bt)be+="    ",null!=(ci=this.getExtPolicyConstraints()).reqexp&&(be+=" reqexp="+ci.reqexp),null!=ci.inhibit&&(be+=" inhibit="+ci.inhibit),be+="\n";else if("inhibitAnyPolicy"==Bt){var ci;be+="    skip="+(ci=this.getExtInhibitAnyPolicy()).skip+"\n"}else if("keyUsage"==Bt)be+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"==Bt)be+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"==Bt){var ti=this.getExtAuthorityKeyIdentifier();void 0!==ti.kid&&(be+="    kid="+ti.kid.hex+"\n")}else"extKeyUsage"==Bt?be+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"==Bt?be+=j(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"==Bt?be+=ee(this.getExtCRLDistributionPoints()):"authorityInfoAccess"==Bt?be+=ie(this.getExtAuthorityInfoAccess()):"certificatePolicies"==Bt&&(be+=q(this.getExtCertificatePolicies()))}}return(be+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof l&&(-1!=l.indexOf("-----BEGIN")?this.readCertPEM(l):w.lang.String.isHex(l)&&this.readCertHex(l))}Yt.getKey=function(l,h,f){var j,b=(v=rt).getChildIdx,M=v.getVbyList,D=w.crypto,R=D.ECDSA,k=D.DSA,U=Ut,z=er,F=Yt;if(typeof U<"u"&&l instanceof U||typeof R<"u"&&l instanceof R||typeof k<"u"&&l instanceof k)return l;if(void 0!==l.curve&&void 0!==l.xy&&void 0===l.d)return new R({pub:l.xy,curve:l.curve});if(void 0!==l.curve&&void 0!==l.d)return new R({prv:l.d,curve:l.curve});if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0===l.d)return(C=new U).setPublic(l.n,l.e),C;if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0!==l.p&&void 0!==l.q&&void 0!==l.dp&&void 0!==l.dq&&void 0!==l.co&&void 0===l.qi)return(C=new U).setPrivateEx(l.n,l.e,l.d,l.p,l.q,l.dp,l.dq,l.co),C;if(void 0===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0===l.p)return(C=new U).setPrivate(l.n,l.e,l.d),C;if(void 0!==l.p&&void 0!==l.q&&void 0!==l.g&&void 0!==l.y&&void 0===l.x)return(C=new k).setPublic(l.p,l.q,l.g,l.y),C;if(void 0!==l.p&&void 0!==l.q&&void 0!==l.g&&void 0!==l.y&&void 0!==l.x)return(C=new k).setPrivate(l.p,l.q,l.g,l.y,l.x),C;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0===l.d)return(C=new U).setPublic(Qt(l.n),Qt(l.e)),C;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d&&void 0!==l.p&&void 0!==l.q&&void 0!==l.dp&&void 0!==l.dq&&void 0!==l.qi)return(C=new U).setPrivateEx(Qt(l.n),Qt(l.e),Qt(l.d),Qt(l.p),Qt(l.q),Qt(l.dp),Qt(l.dq),Qt(l.qi)),C;if("RSA"===l.kty&&void 0!==l.n&&void 0!==l.e&&void 0!==l.d)return(C=new U).setPrivate(Qt(l.n),Qt(l.e),Qt(l.d)),C;if("EC"===l.kty&&void 0!==l.crv&&void 0!==l.x&&void 0!==l.y&&void 0===l.d){var P=(B=new R({curve:l.crv})).ecparams.keycharlen,V=("0000000000"+Qt(l.x)).slice(-P),L=("0000000000"+Qt(l.y)).slice(-P);return B.setPublicKeyHex($="04"+V+L),B}if("EC"===l.kty&&void 0!==l.crv&&void 0!==l.x&&void 0!==l.y&&void 0!==l.d){P=(B=new R({curve:l.crv})).ecparams.keycharlen;var $="04"+(V=("0000000000"+Qt(l.x)).slice(-P))+(L=("0000000000"+Qt(l.y)).slice(-P)),J=("0000000000"+Qt(l.d)).slice(-P);return B.setPublicKeyHex($),B.setPrivateKeyHex(J),B}if("pkcs5prv"===f){var te,Q=l,v=rt;if(9===(te=b(Q,0)).length)(C=new U).readPKCS5PrvKeyHex(Q);else if(6===te.length)(C=new k).readPKCS5PrvKeyHex(Q);else{if(!(te.length>2&&"04"===Q.substr(te[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(C=new R).readPKCS5PrvKeyHex(Q)}return C}if("pkcs8prv"===f)return F.getKeyFromPlainPrivatePKCS8Hex(l);if("pkcs8pub"===f)return F._getKeyFromPublicPKCS8Hex(l);if("x509pub"===f)return en.getPublicKeyFromCertHex(l);if(-1!=l.indexOf("-END CERTIFICATE-",0)||-1!=l.indexOf("-END X509 CERTIFICATE-",0)||-1!=l.indexOf("-END TRUSTED CERTIFICATE-",0))return en.getPublicKeyFromCertPEM(l);if(-1!=l.indexOf("-END PUBLIC KEY-")){var we=er(l,"PUBLIC KEY");return F._getKeyFromPublicPKCS8Hex(we)}if(-1!=l.indexOf("-END RSA PRIVATE KEY-")&&-1==l.indexOf("4,ENCRYPTED")){var Ae=z(l,"RSA PRIVATE KEY");return F.getKey(Ae,null,"pkcs5prv")}if(-1!=l.indexOf("-END DSA PRIVATE KEY-")&&-1==l.indexOf("4,ENCRYPTED")){var q=M(j=z(l,"DSA PRIVATE KEY"),0,[1],"02"),ee=M(j,0,[2],"02"),ie=M(j,0,[3],"02"),de=M(j,0,[4],"02"),be=M(j,0,[5],"02");return(C=new k).setPrivate(new ve(q,16),new ve(ee,16),new ve(ie,16),new ve(de,16),new ve(be,16)),C}if(-1!=l.indexOf("-END EC PRIVATE KEY-")&&-1==l.indexOf("4,ENCRYPTED"))return Ae=z(l,"EC PRIVATE KEY"),F.getKey(Ae,null,"pkcs5prv");if(-1!=l.indexOf("-END PRIVATE KEY-"))return F.getKeyFromPlainPrivatePKCS8PEM(l);if(-1!=l.indexOf("-END RSA PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED")){var ce=F.getDecryptedKeyHex(l,h),pe=new Ut;return pe.readPKCS5PrvKeyHex(ce),pe}if(-1!=l.indexOf("-END EC PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED")){var B,C=M(j=F.getDecryptedKeyHex(l,h),0,[1],"04"),_e=M(j,0,[2,0],"06"),Ie=M(j,0,[3,0],"03").substr(2);if(void 0===w.crypto.OID.oidhex2name[_e])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+_e);return(B=new R({curve:w.crypto.OID.oidhex2name[_e]})).setPublicKeyHex(Ie),B.setPrivateKeyHex(C),B.isPublic=!1,B}if(-1!=l.indexOf("-END DSA PRIVATE KEY-")&&-1!=l.indexOf("4,ENCRYPTED"))return q=M(j=F.getDecryptedKeyHex(l,h),0,[1],"02"),ee=M(j,0,[2],"02"),ie=M(j,0,[3],"02"),de=M(j,0,[4],"02"),be=M(j,0,[5],"02"),(C=new k).setPrivate(new ve(q,16),new ve(ee,16),new ve(ie,16),new ve(de,16),new ve(be,16)),C;if(-1!=l.indexOf("-END ENCRYPTED PRIVATE KEY-"))return F.getKeyFromEncryptedPKCS8PEM(l,h);throw new Error("not supported argument")},Yt.generateKeypair=function(l,h){if("RSA"==l){var f=h;(v=new Ut).generate(f,"10001"),v.isPrivate=!0,v.isPublic=!0;var b=new Ut,E=v.n.toString(16),M=v.e.toString(16);return b.setPublic(E,M),b.isPrivate=!1,b.isPublic=!0,(D={}).prvKeyObj=v,D.pubKeyObj=b,D}if("EC"==l){var v,D,R=h,U=new w.crypto.ECDSA({curve:R}).generateKeyPairHex();return(v=new w.crypto.ECDSA({curve:R})).setPublicKeyHex(U.ecpubhex),v.setPrivateKeyHex(U.ecprvhex),v.isPrivate=!0,v.isPublic=!1,(b=new w.crypto.ECDSA({curve:R})).setPublicKeyHex(U.ecpubhex),b.isPrivate=!1,b.isPublic=!0,(D={}).prvKeyObj=v,D.pubKeyObj=b,D}throw new Error("unknown algorithm: "+l)},Yt.getPEM=function(l,h,f,v,b,E){var D=w.asn1,R=D.DERObjectIdentifier,k=D.DERInteger,U=D.ASN1Util.newObject,C=w.crypto,B=C.DSA,P=C.ECDSA,V=Ut;function L(_e){return U({seq:[{int:0},{int:{bigint:_e.n}},{int:_e.e},{int:{bigint:_e.d}},{int:{bigint:_e.p}},{int:{bigint:_e.q}},{int:{bigint:_e.dmp1}},{int:{bigint:_e.dmq1}},{int:{bigint:_e.coeff}}]})}function $(_e){return U({seq:[{int:1},{octstr:{hex:_e.prvKeyHex}},{tag:["a0",!0,{oid:{name:_e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+_e.pubKeyHex}}]}]})}function J(_e){return U({seq:[{int:0},{int:{bigint:_e.p}},{int:{bigint:_e.q}},{int:{bigint:_e.g}},{int:{bigint:_e.y}},{int:{bigint:_e.x}}]})}if((void 0!==V&&l instanceof V||void 0!==B&&l instanceof B||void 0!==P&&l instanceof P)&&1==l.isPublic&&(void 0===h||"PKCS8PUB"==h))return Ar(te=new(0,D.x509.SubjectPublicKeyInfo)(l).tohex(),"PUBLIC KEY");if("PKCS1PRV"==h&&void 0!==V&&l instanceof V&&(void 0===f||null==f)&&1==l.isPrivate)return Ar(te=L(l).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==h&&void 0!==P&&l instanceof P&&(void 0===f||null==f)&&1==l.isPrivate){var Ae=new R({name:l.curveName}).tohex(),q=$(l).tohex(),ee="";return(ee+=Ar(Ae,"EC PARAMETERS"))+Ar(q,"EC PRIVATE KEY")}if("PKCS1PRV"==h&&void 0!==B&&l instanceof B&&(void 0===f||null==f)&&1==l.isPrivate)return Ar(te=J(l).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==h&&void 0!==V&&l instanceof V&&void 0!==f&&null!=f&&1==l.isPrivate){var te=L(l).tohex();return void 0===v&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",te,f,v,E)}if("PKCS5PRV"==h&&void 0!==P&&l instanceof P&&void 0!==f&&null!=f&&1==l.isPrivate)return te=$(l).tohex(),void 0===v&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",te,f,v,E);if("PKCS5PRV"==h&&void 0!==B&&l instanceof B&&void 0!==f&&null!=f&&1==l.isPrivate)return te=J(l).tohex(),void 0===v&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",te,f,v,E);var ie=function(_e,Ie){var Bt=de(_e,Ie);return new U({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Bt.pbkdf2Salt}},{int:Bt.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Bt.encryptionSchemeIV}}]}]}]},{octstr:{hex:Bt.ciphertext}}]}).tohex()},de=function(_e,Ie){var Nt=pt.lib.WordArray.random(8),Fn=pt.lib.WordArray.random(8),Y=pt.PBKDF2(Ie,Nt,{keySize:6,iterations:100}),ci=pt.enc.Hex.parse(_e),ti=pt.TripleDES.encrypt(ci,Y,{iv:Fn})+"",Ci={};return Ci.ciphertext=ti,Ci.pbkdf2Salt=pt.enc.Hex.stringify(Nt),Ci.pbkdf2Iter=100,Ci.encryptionSchemeAlg="DES-EDE3-CBC",Ci.encryptionSchemeIV=pt.enc.Hex.stringify(Fn),Ci};if("PKCS8PRV"==h&&null!=V&&l instanceof V&&1==l.isPrivate){var ce=L(l).tohex();return te=U({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:ce}}]}).tohex(),void 0===f||null==f?Ar(te,"PRIVATE KEY"):Ar(q=ie(te,f),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==h&&void 0!==P&&l instanceof P&&1==l.isPrivate){var pe={seq:[{int:1},{octstr:{hex:l.prvKeyHex}}]};return"string"==typeof l.pubKeyHex&&pe.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+l.pubKeyHex}}]}),ce=new U(pe).tohex(),te=U({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:l.curveName}}]},{octstr:{hex:ce}}]}).tohex(),void 0===f||null==f?Ar(te,"PRIVATE KEY"):Ar(q=ie(te,f),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==h&&void 0!==B&&l instanceof B&&1==l.isPrivate)return ce=new k({bigint:l.x}).tohex(),te=U({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:l.p}},{int:{bigint:l.q}},{int:{bigint:l.g}}]}]},{octstr:{hex:ce}}]}).tohex(),void 0===f||null==f?Ar(te,"PRIVATE KEY"):Ar(q=ie(te,f),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Yt.getKeyFromCSRPEM=function(l){var h=er(l,"CERTIFICATE REQUEST");return Yt.getKeyFromCSRHex(h)},Yt.getKeyFromCSRHex=function(l){var h=Yt.parseCSRHex(l);return Yt.getKey(h.p8pubkeyhex,null,"pkcs8pub")},Yt.parseCSRHex=function(l){var f=rt.getChildIdx,v=rt.getTLV,b={},E=l;if("30"!=E.substr(0,2))throw new Error("malformed CSR(code:001)");var M=f(E,0);if(M.length<1)throw new Error("malformed CSR(code:002)");if("30"!=E.substr(M[0],2))throw new Error("malformed CSR(code:003)");var D=f(E,M[0]);if(D.length<3)throw new Error("malformed CSR(code:004)");return b.p8pubkeyhex=v(E,D[2]),b},Yt.getKeyID=function(l){var h=Yt,f=rt;"string"==typeof l&&-1!=l.indexOf("BEGIN ")&&(l=h.getKey(l));var v=er(h.getPEM(l)),b=f.getIdxbyList(v,0,[1]),E=f.getV(v,b).substring(2);return w.crypto.Util.hashHex(E,"sha1")},Yt.getJWK=function(l,h,f,v,b){var E,D,M={},R=w.crypto.Util.hashHex;if("string"==typeof l)E=Yt.getKey(l),-1!=l.indexOf("CERTIFICATE")&&(D=er(l));else{if("object"!=typeof l)throw new Error("unsupported keyinfo type");l instanceof en?(E=l.getPublicKey(),D=l.hex):E=l}if(E instanceof Ut&&E.isPrivate)M.kty="RSA",M.n=wr(E.n.toString(16)),M.e=wr(E.e.toString(16)),M.d=wr(E.d.toString(16)),M.p=wr(E.p.toString(16)),M.q=wr(E.q.toString(16)),M.dp=wr(E.dmp1.toString(16)),M.dq=wr(E.dmq1.toString(16)),M.qi=wr(E.coeff.toString(16));else if(E instanceof Ut&&E.isPublic)M.kty="RSA",M.n=wr(E.n.toString(16)),M.e=wr(E.e.toString(16));else if(E instanceof w.crypto.ECDSA&&E.isPrivate){if("P-256"!==(k=E.getShortNISTPCurveName())&&"P-384"!==k&&"P-521"!==k)throw new Error("unsupported curve name for JWT: "+k);var U=E.getPublicKeyXYHex();M.kty="EC",M.crv=k,M.x=wr(U.x),M.y=wr(U.y),M.d=wr(E.prvKeyHex)}else if(E instanceof w.crypto.ECDSA&&E.isPublic){var k;if("P-256"!==(k=E.getShortNISTPCurveName())&&"P-384"!==k&&"P-521"!==k)throw new Error("unsupported curve name for JWT: "+k);U=E.getPublicKeyXYHex(),M.kty="EC",M.crv=k,M.x=wr(U.x),M.y=wr(U.y)}if(null==M.kty)throw new Error("unsupported keyinfo");return!E.isPrivate&&1!=h&&(M.kid=w.jws.JWS.getJWKthumbprint(M)),null!=D&&1!=f&&(M.x5c=[fi(D)]),null!=D&&1!=v&&(M.x5t=Zr(fi(R(D,"sha1")))),null!=D&&1!=b&&(M["x5t#S256"]=Zr(fi(R(D,"sha256")))),M},Yt.getJWKFromKey=function(l){return Yt.getJWK(l,!0,!0,!0,!0)},Ut.getPosArrayOfChildrenFromHex=function(l){return rt.getChildIdx(l,0)},Ut.getHexValueArrayOfChildrenFromHex=function(l){var F,f=rt.getV,v=f(l,(F=Ut.getPosArrayOfChildrenFromHex(l))[0]),b=f(l,F[1]),E=f(l,F[2]),M=f(l,F[3]),D=f(l,F[4]),R=f(l,F[5]),k=f(l,F[6]),U=f(l,F[7]),z=f(l,F[8]);return(F=new Array).push(v,b,E,M,D,R,k,U,z),F},Ut.prototype.readPrivateKeyFromPEMString=function(l){var h=er(l),f=Ut.getHexValueArrayOfChildrenFromHex(h);this.setPrivateEx(f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},Ut.prototype.readPKCS5PrvKeyHex=function(l){var h=Ut.getHexValueArrayOfChildrenFromHex(l);this.setPrivateEx(h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8])},Ut.prototype.readPKCS8PrvKeyHex=function(l){var h,f,v,b,E,M,D,R,U=rt.getVbyListEx;if(!1===rt.isASN1HEX(l))throw new Error("not ASN.1 hex string");try{h=U(l,0,[2,0,1],"02"),f=U(l,0,[2,0,2],"02"),v=U(l,0,[2,0,3],"02"),b=U(l,0,[2,0,4],"02"),E=U(l,0,[2,0,5],"02"),M=U(l,0,[2,0,6],"02"),D=U(l,0,[2,0,7],"02"),R=U(l,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(h,f,v,b,E,M,D,R)},Ut.prototype.readPKCS5PubKeyHex=function(l){var h=rt,f=h.getV;if(!1===h.isASN1HEX(l))throw new Error("keyHex is not ASN.1 hex string");var v=h.getChildIdx(l,0);if(2!==v.length||"02"!==l.substr(v[0],2)||"02"!==l.substr(v[1],2))throw new Error("wrong hex for PKCS#5 public key");var b=f(l,v[0]),E=f(l,v[1]);this.setPublic(b,E)},Ut.prototype.readPKCS8PubKeyHex=function(l){var h=rt;if(!1===h.isASN1HEX(l))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==h.getTLVbyListEx(l,0,[0,0]))throw new Error("not PKCS8 RSA public key");var f=h.getTLVbyListEx(l,0,[1,0]);this.readPKCS5PubKeyHex(f)},Ut.prototype.readCertPubKeyHex=function(l,h){var f,v;(f=new en).readCertHex(l),v=f.getPublicKeyHex(),this.readPKCS8PubKeyHex(v)},Ut.prototype.sign=function(l,h){var v=function(b){return w.crypto.Util.hashString(b,h)}(l);return this.signWithMessageHash(v,h)},Ut.prototype.signWithMessageHash=function(l,h){var v=ur(w.crypto.Util.getPaddedDigestInfoHex(l,h,this.n.bitLength()),16);return qs(this.doPrivate(v).toString(16),this.n.bitLength())},Ut.prototype.signPSS=function(l,h,f){var b=function(E){return w.crypto.Util.hashHex(E,h)}(hs(l));return void 0===f&&(f=-1),this.signWithMessageHashPSS(b,h,f)},Ut.prototype.signWithMessageHashPSS=function(l,h,f){var D,v=Nr(l),b=v.length,E=this.n.bitLength()-1,M=Math.ceil(E/8),R=function(V){return w.crypto.Util.hashHex(V,h)};if(-1===f||void 0===f)f=b;else if(-2===f)f=M-b-2;else if(f<-2)throw new Error("invalid salt length");if(M<b+f+2)throw new Error("data too long");var k="";f>0&&(k=new Array(f),(new Co).nextBytes(k),k=String.fromCharCode.apply(String,k));var U=Nr(R(hs("\0\0\0\0\0\0\0\0"+v+k))),z=[];for(D=0;D<M-f-b-2;D+=1)z[D]=0;var F=String.fromCharCode.apply(String,z)+"\x01"+k,C=mu(U,F.length,R),B=[];for(D=0;D<F.length;D+=1)B[D]=F.charCodeAt(D)^C.charCodeAt(D);for(B[0]&=~(65280>>8*M-E&255),D=0;D<b;D++)B.push(U.charCodeAt(D));return B.push(188),qs(this.doPrivate(new ve(B)).toString(16),this.n.bitLength())},Ut.prototype.verify=function(l,h){if(null==(h=h.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var f=ur(h,16),v=this.n.bitLength();if(f.bitLength()>v)return!1;var E=this.doPublic(f).toString(16);if(E.length+3!=v/4)return!1;var D=Fs(E.replace(/^1f+00/,""));if(0==D.length)return!1;var R=D[0],k=D[1],z=function(F){return w.crypto.Util.hashString(F,R)}(l);return k==z},Ut.prototype.verifyWithMessageHash=function(l,h){if(h.length!=Math.ceil(this.n.bitLength()/4))return!1;var f=ur(h,16);if(f.bitLength()>this.n.bitLength())return 0;var E=Fs(this.doPublic(f).toString(16).replace(/^1f+00/,""));return 0!=E.length&&E[1]==l},Ut.prototype.verifyPSS=function(l,h,f,v){var E=function(M){return w.crypto.Util.hashHex(M,f)}(hs(l));return void 0===v&&(v=-1),this.verifyWithMessageHashPSS(E,h,f,v)},Ut.prototype.verifyWithMessageHashPSS=function(l,h,f,v){if(h.length!=Math.ceil(this.n.bitLength()/4))return!1;var U,b=new ve(h,16),E=function($){return w.crypto.Util.hashHex($,f)},M=Nr(l),D=M.length,R=this.n.bitLength()-1,k=Math.ceil(R/8);if(-1===v||void 0===v)v=D;else if(-2===v)v=k-D-2;else if(v<-2)throw new Error("invalid salt length");if(k<D+v+2)throw new Error("data too long");var z=this.doPublic(b).toByteArray();for(U=0;U<z.length;U+=1)z[U]&=255;for(;z.length<k;)z.unshift(0);if(188!==z[k-1])throw new Error("encoded message does not end in 0xbc");var F=(z=String.fromCharCode.apply(String,z)).substr(0,k-D-1),C=z.substr(F.length,D),B=65280>>8*k-R&255;if(F.charCodeAt(0)&B)throw new Error("bits beyond keysize not zero");var P=mu(C,F.length,E),V=[];for(U=0;U<F.length;U+=1)V[U]=F.charCodeAt(U)^P.charCodeAt(U);V[0]&=~B;var L=k-D-v-2;for(U=0;U<L;U+=1)if(0!==V[U])throw new Error("leftmost octets not zero");if(1!==V[L])throw new Error("0x01 marker not found");return C===Nr(E(hs("\0\0\0\0\0\0\0\0"+M+String.fromCharCode.apply(String,V.slice(-v)))))},Ut.SALT_LEN_HLEN=-1,Ut.SALT_LEN_MAX=-2,Ut.SALT_LEN_RECOVER=-2,en.hex2dn=function(l,h){void 0===h&&(h=0);var f=new en;return rt.getTLV(l,h),f.getX500Name(l).str},en.hex2rdn=function(l,h){if(void 0===h&&(h=0),"31"!==l.substr(h,2))throw new Error("malformed RDN");for(var f=new Array,v=rt.getChildIdx(l,h),b=0;b<v.length;b++)f.push(en.hex2attrTypeValue(l,v[b]));return f=f.map(function(E){return E.replace("+","\\+")}),f.join("+")},en.hex2attrTypeValue=function(l,h){var f=rt,v=f.getV;if(void 0===h&&(h=0),"30"!==l.substr(h,2))throw new Error("malformed attribute type and value");var b=f.getChildIdx(l,h);2!==b.length||l.substr(b[0],2);var E=v(l,b[0]),M=w.asn1.ASN1Util.oidHexToInt(E);return w.asn1.x509.OID.oid2atype(M)+"="+Nr(v(l,b[1]))},en.getPublicKeyFromCertHex=function(l){var h=new en;return h.readCertHex(l),h.getPublicKey()},en.getPublicKeyFromCertPEM=function(l){var h=new en;return h.readCertPEM(l),h.getPublicKey()},en.getPublicKeyInfoPropOfCertPEM=function(l){var b,E,f=rt.getVbyList,v={algparam:null};return(b=new en).readCertPEM(l),E=b.getPublicKeyHex(),v.keyhex=f(E,0,[1],"03").substr(2),v.algoid=f(E,0,[0,0],"06"),"2a8648ce3d0201"===v.algoid&&(v.algparam=f(E,0,[0,1],"06")),v},en.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],(typeof w>"u"||!w)&&(w={}),(typeof w.jws>"u"||!w.jws)&&(w.jws={}),w.jws.JWS=function(){var f=w.jws.JWS.isSafeJSONString;this.parseJWS=function(v,b){if(void 0===this.parsedJWS||!b&&void 0===this.parsedJWS.sigvalH){var E=v.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==E)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var M=E[1],D=E[2],R=E[3],k=M+"."+D;if(this.parsedJWS={},this.parsedJWS.headB64U=M,this.parsedJWS.payloadB64U=D,this.parsedJWS.sigvalB64U=R,this.parsedJWS.si=k,!b){var U=Qt(R),z=ur(U,16);this.parsedJWS.sigvalH=U,this.parsedJWS.sigvalBI=z}var F=ho(M),C=ho(D);if(this.parsedJWS.headS=F,this.parsedJWS.payloadS=C,!f(F,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+F}}},w.jws.JWS.sign=function(l,h,f,v,b){var P,V,L,D=w.jws.JWS,R=D.readSafeJSONString,k=D.isSafeJSONString,U=w.crypto,F=U.Mac,C=U.Signature,B=JSON;if("string"!=typeof h&&"object"!=typeof h)throw"spHeader must be JSON string or object: "+h;if("object"==typeof h&&(P=B.stringify(V=h)),"string"==typeof h){if(!k(P=h))throw"JWS Head is not safe JSON string: "+P;V=R(P)}if(L=f,"object"==typeof f&&(L=B.stringify(f)),(""==l||null==l)&&void 0!==V.alg&&(l=V.alg),""!=l&&null!=l&&void 0===V.alg&&(V.alg=l,P=B.stringify(V)),l!==V.alg)throw"alg and sHeader.alg doesn't match: "+l+"!="+V.alg;var $=null;if(void 0===D.jwsalg2sigalg[l])throw"unsupported alg name: "+l;$=D.jwsalg2sigalg[l];var te=Tl(P)+"."+Tl(L),we="";if("Hmac"==$.substr(0,4)){if(void 0===v)throw"mac key shall be specified for HS* alg";var Ae=new F({alg:$,prov:"cryptojs",pass:v});Ae.updateString(te),we=Ae.doFinal()}else if(-1!=$.indexOf("withECDSA")){(j=new C({alg:$})).init(v,b),j.updateString(te);var q=j.sign();we=w.crypto.ECDSA.asn1SigToConcatSig(q)}else if("none"!=$){var j;(j=new C({alg:$})).init(v,b),j.updateString(te),we=j.sign()}return te+"."+wr(we)},w.jws.JWS.verify=function(l,h,f){var z,E=w.jws.JWS,M=E.readSafeJSONString,D=w.crypto,R=D.ECDSA,k=D.Mac,U=D.Signature;if(z=Ut,!fr(l))return!1;var F=l.split(".");if(3!==F.length)return!1;var J,P=F[0]+"."+F[1],V=Qt(F[2]),L=M(ho(F[0])),$=null;if(void 0===L.alg)throw"algorithm not specified in header";if(J=($=L.alg).substr(0,2),null!=f&&"[object Array]"===Object.prototype.toString.call(f)&&f.length>0&&-1==(":"+f.join(":")+":").indexOf(":"+$+":"))throw"algorithm '"+$+"' not accepted in the list";if("none"!=$&&null===h)throw"key shall be specified to verify.";if("string"==typeof h&&-1!=h.indexOf("-----BEGIN ")&&(h=Yt.getKey(h)),!("RS"!=J&&"PS"!=J||h instanceof z))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==J&&!(h instanceof R))throw"key shall be a ECDSA obj for ES* algs";var te=null;if(void 0===E.jwsalg2sigalg[L.alg])throw"unsupported alg name: "+$;if("none"==(te=E.jwsalg2sigalg[$]))throw"not supported";if("Hmac"==te.substr(0,4)){if(void 0===h)throw"hexadecimal key shall be specified for HMAC";var Ae=new k({alg:te,pass:h});return Ae.updateString(P),V==Ae.doFinal()}if(-1!=te.indexOf("withECDSA")){var q,j=null;try{j=R.concatSigToASN1Sig(V)}catch{return!1}return(q=new U({alg:te})).init(h),q.updateString(P),q.verify(j)}return(q=new U({alg:te})).init(h),q.updateString(P),q.verify(V)},w.jws.JWS.parse=function(l){var b,E,h=l.split("."),f={};if(2!=h.length&&3!=h.length)throw"malformed sJWS: wrong number of '.' splitted elements";return b=h[1],3==h.length&&(E=h[2]),f.headerObj=w.jws.JWS.readSafeJSONString(ho(h[0])),f.payloadObj=w.jws.JWS.readSafeJSONString(ho(b)),f.headerPP=JSON.stringify(f.headerObj,null,"  "),f.payloadPP=null==f.payloadObj?ho(b):JSON.stringify(f.payloadObj,null,"  "),void 0!==E&&(f.sigHex=Qt(E)),f},w.jws.JWS.verifyJWT=function(l,h,f){var b=w.jws,E=b.JWS,M=E.readSafeJSONString,D=E.inArray,R=E.includedArray;if(!fr(l))return!1;var k=l.split(".");if(3!=k.length)return!1;var U=k[0],z=k[1],B=(Qt(k[2]),M(ho(U))),P=M(ho(z));if(void 0===B.alg)return!1;if(void 0===f.alg)throw"acceptField.alg shall be specified";if(!D(B.alg,f.alg)||void 0!==P.iss&&"object"==typeof f.iss&&!D(P.iss,f.iss)||void 0!==P.sub&&"object"==typeof f.sub&&!D(P.sub,f.sub))return!1;if(void 0!==P.aud&&"object"==typeof f.aud)if("string"==typeof P.aud){if(!D(P.aud,f.aud))return!1}else if("object"==typeof P.aud&&!R(P.aud,f.aud))return!1;var V=b.IntDate.getNow();return void 0!==f.verifyAt&&"number"==typeof f.verifyAt&&(V=f.verifyAt),(void 0===f.gracePeriod||"number"!=typeof f.gracePeriod)&&(f.gracePeriod=0),!(void 0!==P.exp&&"number"==typeof P.exp&&P.exp+f.gracePeriod<V||void 0!==P.nbf&&"number"==typeof P.nbf&&V<P.nbf-f.gracePeriod||void 0!==P.iat&&"number"==typeof P.iat&&V<P.iat-f.gracePeriod||void 0!==P.jti&&void 0!==f.jti&&P.jti!==f.jti||!E.verify(l,h,f.alg))},w.jws.JWS.includedArray=function(l,h){var f=w.jws.JWS.inArray;if(null===l||"object"!=typeof l||"number"!=typeof l.length)return!1;for(var v=0;v<l.length;v++)if(!f(l[v],h))return!1;return!0},w.jws.JWS.inArray=function(l,h){if(null===h||"object"!=typeof h||"number"!=typeof h.length)return!1;for(var f=0;f<h.length;f++)if(h[f]==l)return!0;return!1},w.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},w.jws.JWS.isSafeJSONString=function(l,h,f){var v=null;try{return"object"!=typeof(v=Yi(l))||v.constructor===Array?0:(h&&(h[f]=v),1)}catch{return 0}},w.jws.JWS.readSafeJSONString=function(l){var h=null;try{return"object"!=typeof(h=Yi(l))||h.constructor===Array?null:h}catch{return null}},w.jws.JWS.getEncodedSignatureValueFromJWS=function(l){var h=l.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==h)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return h[1]},w.jws.JWS.getJWKthumbprint=function(l){if("RSA"!==l.kty&&"EC"!==l.kty&&"oct"!==l.kty)throw"unsupported algorithm for JWK Thumprint";var h="{";if("RSA"===l.kty){if("string"!=typeof l.n||"string"!=typeof l.e)throw"wrong n and e value for RSA key";h+='"e":"'+l.e+'",',h+='"kty":"'+l.kty+'",',h+='"n":"'+l.n+'"}'}else if("EC"===l.kty){if("string"!=typeof l.crv||"string"!=typeof l.x||"string"!=typeof l.y)throw"wrong crv, x and y value for EC key";h+='"crv":"'+l.crv+'",',h+='"kty":"'+l.kty+'",',h+='"x":"'+l.x+'",',h+='"y":"'+l.y+'"}'}else if("oct"===l.kty){if("string"!=typeof l.k)throw"wrong k value for oct(symmetric) key";h+='"kty":"'+l.kty+'",',h+='"k":"'+l.k+'"}'}var f=hs(h);return wr(w.crypto.Util.hashHex(f,"sha256"))},w.jws.IntDate={},w.jws.IntDate.get=function(l){var h=w.jws.IntDate,f=h.getNow,v=h.getZulu;if("now"==l)return f();if("now + 1hour"==l)return f()+3600;if("now + 1day"==l)return f()+86400;if("now + 1month"==l)return f()+2592e3;if("now + 1year"==l)return f()+31536e3;if(l.match(/Z$/))return v(l);if(l.match(/^[0-9]+$/))return parseInt(l);throw"unsupported format: "+l},w.jws.IntDate.getZulu=function(l){return O0(l)},w.jws.IntDate.getNow=function(){return~~(new Date/1e3)},w.jws.IntDate.intDate2UTCString=function(l){return new Date(1e3*l).toUTCString()},w.jws.IntDate.intDate2Zulu=function(l){var h=new Date(1e3*l);return("0000"+h.getUTCFullYear()).slice(-4)+("00"+(h.getUTCMonth()+1)).slice(-2)+("00"+h.getUTCDate()).slice(-2)+("00"+h.getUTCHours()).slice(-2)+("00"+h.getUTCMinutes()).slice(-2)+("00"+h.getUTCSeconds()).slice(-2)+"Z"},(typeof w>"u"||!w)&&(w={}),(typeof w.jws>"u"||!w.jws)&&(w.jws={}),w.jws.JWSJS=function(){var f=w.jws.JWS,v=f.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(b){this.init();var E=b.split(".");if(3!=E.length)throw"malformed input JWS";this.aHeader.push(E[0]),this.sPayload=E[1],this.aSignature.push(E[2])},this.addSignature=function(b,E,M,D){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var R=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var U=w.jws.JWS.sign(b,E,this.sPayload,M,D).split(".");this.aHeader.push(U[0]),this.aSignature.push(U[2])}catch(C){throw this.aHeader.length>R&&this.aHeader.pop(),this.aSignature.length>R&&this.aSignature.pop(),"addSignature failed: "+C}},this.verifyAll=function(b){if(this.aHeader.length!==b.length||this.aSignature.length!==b.length)return!1;for(var E=0;E<b.length;E++){var M=b[E];if(2!==M.length)return!1;if(!1===this.verifyNth(E,M[0],M[1]))return!1}return!0},this.verifyNth=function(b,E,M){if(this.aHeader.length<=b||this.aSignature.length<=b)return!1;var k=this.aHeader[b]+"."+this.sPayload+"."+this.aSignature[b],U=!1;try{U=f.verify(k,E,M)}catch{return!1}return U},this.readJWSJS=function(b){if("string"==typeof b){var E=v(b);if(null==E)throw"argument is not safe JSON object string";this.aHeader=E.headers,this.sPayload=E.payload,this.aSignature=E.signatures}else try{if(!(b.headers.length>0))throw"malformed header";if(this.aHeader=b.headers,"string"!=typeof b.payload)throw"malformed signatures";if(this.sPayload=b.payload,!(b.signatures.length>0))throw"malformed signatures";this.aSignature=b.signatures}catch(M){throw"malformed JWS-JS JSON object: "+M}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},Ma.KZ=Yt,Ma.fs=w},7489:function(Ea,Ma,ut){var Wr;Ea=ut.nmd(Ea),function(){var le,ls=200,fi="Expected a function",ro="__lodash_hash_undefined__",$r="__lodash_placeholder__",Tn=1,bl=2,ve=4,Mn=1,oi=2,Cs=1,Da=2,xl=4,us=8,Ds=16,qr=32,xr=64,an=128,Ta=256,id=512,rd=800,ln=16,$t=1/0,Kn=9007199254740991,An=17976931348623157e292,un=NaN,In=4294967295,rr=In-1,Vi=In>>>1,ac=[["ary",an],["bind",Cs],["bindKey",Da],["curry",us],["curryRight",Ds],["flip",id],["partial",qr],["partialRight",xr],["rearg",Ta]],so="[object Arguments]",cc="[object Array]",Go="[object AsyncFunction]",Ts="[object Boolean]",gt="[object Date]",sd="[object DOMException]",Uc="[object Error]",od="[object Function]",xp="[object GeneratorFunction]",oo="[object Map]",iu="[object Number]",zc="[object Null]",Ia="[object Object]",wp="[object Promise]",cr="[object Proxy]",lr="[object RegExp]",jo="[object Set]",ru="[object String]",Eh="[object Symbol]",wl="[object Undefined]",lc="[object WeakMap]",dc="[object ArrayBuffer]",Sl="[object DataView]",Mh="[object Float32Array]",su="[object Float64Array]",Ch="[object Int8Array]",Dh="[object Int16Array]",Sp="[object Int32Array]",Th="[object Uint8Array]",Ah="[object Uint8ClampedArray]",Ih="[object Uint16Array]",Fh="[object Uint32Array]",Ep=/\b__p \+= '';/g,Pi=/\b(__p \+=) '' \+/g,Rh=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Si=/&(?:amp|lt|gt|quot|#39);/g,ad=/[&<>"']/g,Mp=RegExp(Si.source),Ei=RegExp(ad.source),Zt=/<%-([\s\S]+?)%>/g,Ph=/<%([\s\S]+?)%>/g,cd=/<%=([\s\S]+?)%>/g,eb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ld=/^\w*$/,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,El=/[\\^$.*+?()[\]{}|]/g,bn=RegExp(El.source),vi=/^\s+|\s+$/g,Cp=/^\s+/,tb=/\s+$/,M0=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ud=/\{\n\/\* \[wrapped with (.+)\] \*/,ao=/,? & /,nb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,C0=/\\(\\)?/g,ib=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fa=/\w*$/,rb=/^[-+]0x[0-9a-f]+$/i,sb=/^0b[01]+$/i,ob=/^\[object .+?Constructor\]$/,ab=/^0o[0-7]+$/i,D0=/^(?:0|[1-9]\d*)$/,cb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hc=/($^)/,T0=/['\n\r\u2028\u2029\\]/g,As="\\ud800-\\udfff",A0="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xe="\\u2700-\\u27bf",I0="a-z\\xdf-\\xf6\\xf8-\\xff",Tp="A-Z\\xc0-\\xd6\\xd8-\\xde",Ap="\\ufe0e\\ufe0f",kh="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kr="["+As+"]",Oh="["+kh+"]",hd="["+A0+"]",Jt="\\d+",ou="["+Xe+"]",Ip="["+I0+"]",co="[^"+As+kh+Jt+Xe+I0+Tp+"]",fd="\\ud83c[\\udffb-\\udfff]",Mi="[^"+As+"]",Gs="(?:\\ud83c[\\udde6-\\uddff]){2}",Dr="[\\ud800-\\udbff][\\udc00-\\udfff]",au="["+Tp+"]",js="(?:"+Ip+"|"+co+")",cu="(?:"+au+"|"+co+")",Lh="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Nh="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Rp="(?:"+hd+"|"+fd+")?",Bh="["+Ap+"]?",Me=Bh+Rp+"(?:\\u200d(?:"+[Mi,Gs,Dr].join("|")+")"+Bh+Rp+")*",Pp="(?:"+[ou,Gs,Dr].join("|")+")"+Me,dn="(?:"+[Mi+hd+"?",hd,Gs,Dr,Kr].join("|")+")",pd=RegExp("['\u2019]","g"),Ut=RegExp(hd,"g"),Gc=RegExp(fd+"(?="+fd+")|"+dn+Me,"g"),R0=RegExp([au+"?"+Ip+"+"+Lh+"(?="+[Oh,au,"$"].join("|")+")",cu+"+"+Nh+"(?="+[Oh,au+js,"$"].join("|")+")",au+"?"+js+"+"+Lh,au+"+"+Nh,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jt,Pp].join("|"),"g"),P0=RegExp("[\\u200d"+As+A0+Ap+"]"),k0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Do=-1,qi={};qi[Mh]=qi[su]=qi[Ch]=qi[Dh]=qi[Sp]=qi[Th]=qi[Ah]=qi[Ih]=qi[Fh]=!0,qi[so]=qi[cc]=qi[dc]=qi[Ts]=qi[Sl]=qi[gt]=qi[Uc]=qi[od]=qi[oo]=qi[iu]=qi[Ia]=qi[lr]=qi[jo]=qi[ru]=qi[lc]=!1;var zi={};zi[so]=zi[cc]=zi[dc]=zi[Sl]=zi[Ts]=zi[gt]=zi[Mh]=zi[su]=zi[Ch]=zi[Dh]=zi[Sp]=zi[oo]=zi[iu]=zi[Ia]=zi[lr]=zi[jo]=zi[ru]=zi[Eh]=zi[Th]=zi[Ah]=zi[Ih]=zi[Fh]=!0,zi[Uc]=zi[od]=zi[lc]=!1;var md={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vh=parseFloat,dr=parseInt,Hh="object"==typeof global&&global&&global.Object===Object&&global,Pa="object"==typeof self&&self&&self.Object===Object&&self,hr=Hh||Pa||Function("return this")(),kp=Ma&&!Ma.nodeType&&Ma,ai=kp&&Ea&&!Ea.nodeType&&Ea,Op=ai&&ai.exports===kp,gd=Op&&Hh.process,lo=function(){try{return ai&&ai.require&&ai.require("util").types||gd&&gd.binding&&gd.binding("util")}catch{}}(),Mt=lo&&lo.isArrayBuffer,Lp=lo&&lo.isDate,Uh=lo&&lo.isMap,ht=lo&&lo.isRegExp,Gi=lo&&lo.isSet,yi=lo&&lo.isTypedArray;function Ii(xe,ze,Fe){switch(Fe.length){case 0:return xe.call(ze);case 1:return xe.call(ze,Fe[0]);case 2:return xe.call(ze,Fe[0],Fe[1]);case 3:return xe.call(ze,Fe[0],Fe[1],Fe[2])}return xe.apply(ze,Fe)}function Is(xe,ze,Fe,Ft){for(var Cn=-1,Un=null==xe?0:xe.length;++Cn<Un;){var fr=xe[Cn];ze(Ft,fr,Fe(fr),xe)}return Ft}function Yr(xe,ze){for(var Fe=-1,Ft=null==xe?0:xe.length;++Fe<Ft&&!1!==ze(xe[Fe],Fe,xe););return xe}function uo(xe,ze){for(var Fe=null==xe?0:xe.length;Fe--&&!1!==ze(xe[Fe],Fe,xe););return xe}function Or(xe,ze){for(var Fe=-1,Ft=null==xe?0:xe.length;++Fe<Ft;)if(!ze(xe[Fe],Fe,xe))return!1;return!0}function bt(xe,ze){for(var Fe=-1,Ft=null==xe?0:xe.length,Cn=0,Un=[];++Fe<Ft;){var fr=xe[Fe];ze(fr,Fe,xe)&&(Un[Cn++]=fr)}return Un}function xn(xe,ze){return!(null==xe||!xe.length)&&aa(xe,ze,0)>-1}function Ki(xe,ze,Fe){for(var Ft=-1,Cn=null==xe?0:xe.length;++Ft<Cn;)if(Fe(ze,xe[Ft]))return!0;return!1}function ei(xe,ze){for(var Fe=-1,Ft=null==xe?0:xe.length,Cn=Array(Ft);++Fe<Ft;)Cn[Fe]=ze(xe[Fe],Fe,xe);return Cn}function Ws(xe,ze){for(var Fe=-1,Ft=ze.length,Cn=xe.length;++Fe<Ft;)xe[Cn+Fe]=ze[Fe];return xe}function Lr(xe,ze,Fe,Ft){var Cn=-1,Un=null==xe?0:xe.length;for(Ft&&Un&&(Fe=xe[++Cn]);++Cn<Un;)Fe=ze(Fe,xe[Cn],Cn,xe);return Fe}function Cl(xe,ze,Fe,Ft){var Cn=null==xe?0:xe.length;for(Ft&&Cn&&(Fe=xe[--Cn]);Cn--;)Fe=ze(Fe,xe[Cn],Cn,xe);return Fe}function Yi(xe,ze){for(var Fe=-1,Ft=null==xe?0:xe.length;++Fe<Ft;)if(ze(xe[Fe],Fe,xe))return!0;return!1}var rt=mc("length");function lu(xe,ze,Fe){var Ft;return Fe(xe,function(Cn,Un,fr){if(ze(Cn,Un,fr))return Ft=Un,!1}),Ft}function ka(xe,ze,Fe,Ft){for(var Cn=xe.length,Un=Fe+(Ft?1:-1);Ft?Un--:++Un<Cn;)if(ze(xe[Un],Un,xe))return Un;return-1}function aa(xe,ze,Fe){return ze==ze?function O0(xe,ze,Fe){for(var Ft=Fe-1,Cn=xe.length;++Ft<Cn;)if(xe[Ft]===ze)return Ft;return-1}(xe,ze,Fe):ka(xe,Xr,Fe)}function Tr(xe,ze,Fe,Ft){for(var Cn=Fe-1,Un=xe.length;++Cn<Un;)if(Ft(xe[Cn],ze))return Cn;return-1}function Xr(xe){return xe!=xe}function Dl(xe,ze){var Fe=null==xe?0:xe.length;return Fe?Qt(xe,ze)/Fe:un}function mc(xe){return function(ze){return null==ze?le:ze[xe]}}function Zr(xe){return function(ze){return null==xe?le:xe[ze]}}function ca(xe,ze,Fe,Ft,Cn){return Cn(xe,function(Un,fr,Dn){Fe=Ft?(Ft=!1,Un):ze(Fe,Un,fr,Dn)}),Fe}function Qt(xe,ze){for(var Fe,Ft=-1,Cn=xe.length;++Ft<Cn;){var Un=ze(xe[Ft]);Un!==le&&(Fe=Fe===le?Un:Fe+Un)}return Fe}function Tl(xe,ze){for(var Fe=-1,Ft=Array(xe);++Fe<xe;)Ft[Fe]=ze(Fe);return Ft}function $s(xe){return function(ze){return xe(ze)}}function Al(xe,ze){return ei(ze,function(Fe){return xe[Fe]})}function To(xe,ze){return xe.has(ze)}function Yn(xe,ze){for(var Fe=-1,Ft=xe.length;++Fe<Ft&&aa(ze,xe[Fe],0)>-1;);return Fe}function ds(xe,ze){for(var Fe=xe.length;Fe--&&aa(ze,xe[Fe],0)>-1;);return Fe}var fo=Zr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),$o=Zr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nr(xe){return"\\"+md[xe]}function la(xe){return P0.test(xe)}function Ar(xe){var ze=-1,Fe=Array(xe.size);return xe.forEach(function(Ft,Cn){Fe[++ze]=[Cn,Ft]}),Fe}function er(xe,ze){return function(Fe){return xe(ze(Fe))}}function gc(xe,ze){for(var Fe=-1,Ft=xe.length,Cn=0,Un=[];++Fe<Ft;){var fr=xe[Fe];(fr===ze||fr===$r)&&(xe[Fe]=$r,Un[Cn++]=Fe)}return Un}function zh(xe){var ze=-1,Fe=Array(xe.size);return xe.forEach(function(Ft){Fe[++ze]=Ft}),Fe}function uu(xe){return la(xe)?function Vp(xe){for(var ze=Gc.lastIndex=0;Gc.test(xe);)++ze;return ze}(xe):rt(xe)}function po(xe){return la(xe)?function Hp(xe){return xe.match(Gc)||[]}(xe):function w(xe){return xe.split("")}(xe)}var Gh=Zr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),du=function xe(ze){var u,Fe=(ze=null==ze?hr:du.defaults(hr.Object(),ze,du.pick(hr,pc))).Array,Ft=ze.Date,Cn=ze.Error,Un=ze.Function,fr=ze.Math,Dn=ze.Object,vd=ze.RegExp,N0=ze.String,mo=ze.TypeError,vc=Fe.prototype,jc=Dn.prototype,Wc=ze["__core-js_shared__"],fu=Un.prototype.toString,Rn=jc.hasOwnProperty,pu=0,Ve=(u=/[^.]+$/.exec(Wc&&Wc.keys&&Wc.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Yt=jc.toString,fb=fu.call(Dn),Wh=hr._,qs=vd("^"+fu.call(Rn).replace(El,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mu=Op?ze.Buffer:le,Oa=ze.Symbol,_c=ze.Uint8Array,Fs=mu?mu.allocUnsafe:le,en=er(Dn.getPrototypeOf,Dn),gu=Dn.create,l=jc.propertyIsEnumerable,h=vc.splice,f=Oa?Oa.isConcatSpreadable:le,v=Oa?Oa.iterator:le,b=Oa?Oa.toStringTag:le,E=function(){try{var u=Ol(Dn,"defineProperty");return u({},"",{}),u}catch{}}(),M=ze.clearTimeout!==hr.clearTimeout&&ze.clearTimeout,D=Ft&&Ft.now!==hr.Date.now&&Ft.now,R=ze.setTimeout!==hr.setTimeout&&ze.setTimeout,k=fr.ceil,U=fr.floor,z=Dn.getOwnPropertySymbols,F=mu?mu.isBuffer:le,C=ze.isFinite,B=vc.join,P=er(Dn.keys,Dn),V=fr.max,L=fr.min,$=Ft.now,J=ze.parseInt,Q=fr.random,te=vc.reverse,we=Ol(ze,"DataView"),Ae=Ol(ze,"Map"),j=Ol(ze,"Promise"),q=Ol(ze,"Set"),ee=Ol(ze,"WeakMap"),ie=Ol(Dn,"create"),de=ee&&new ee,be={},ce=Nl(we),pe=Nl(Ae),_e=Nl(j),Ie=Nl(q),Bt=Nl(ee),Nt=Oa?Oa.prototype:le,Lt=Nt?Nt.valueOf:le,Fn=Nt?Nt.toString:le;function Y(u){if(Er(u)&&!gn(u)&&!(u instanceof sn)){if(u instanceof Ci)return u;if(Rn.call(u,"__wrapped__"))return VM(u)}return new Ci(u)}var ci=function(){function u(){}return function(m){if(!mr(m))return{};if(gu)return gu(m);u.prototype=m;var S=new u;return u.prototype=le,S}}();function ti(){}function Ci(u,m){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=le}function sn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=In,this.__views__=[]}function zn(u){var m=-1,S=null==u?0:u.length;for(this.clear();++m<S;){var O=u[m];this.set(O[0],O[1])}}function ji(u){var m=-1,S=null==u?0:u.length;for(this.clear();++m<S;){var O=u[m];this.set(O[0],O[1])}}function Io(u){var m=-1,S=null==u?0:u.length;for(this.clear();++m<S;){var O=u[m];this.set(O[0],O[1])}}function ha(u){var m=-1,S=null==u?0:u.length;for(this.__data__=new Io;++m<S;)this.add(u[m])}function bc(u){var m=this.__data__=new ji(u);this.size=m.size}function cM(u,m){var S=gn(u),O=!S&&Tu(u),W=!S&&!O&&Vl(u),Z=!S&&!O&&!W&&Zs(u),ue=S||O||W||Z,me=ue?Tl(u.length,N0):[],Se=me.length;for(var $e in u)(m||Rn.call(u,$e))&&(!ue||!("length"==$e||W&&("offset"==$e||"parent"==$e)||Z&&("buffer"==$e||"byteLength"==$e||"byteOffset"==$e)||Zc($e,Se)))&&me.push($e);return me}function Up(u){var m=u.length;return m?u[Dd(0,m-1)]:le}function pb(u,m){return lf(ks(u),bd(m,0,u.length))}function mb(u){return lf(ks(u))}function yu(u,m,S){(S!==le&&!Ga(u[m],S)||S===le&&!(m in u))&&La(u,m,S)}function _d(u,m,S){var O=u[m];(!Rn.call(u,m)||!Ga(O,S)||S===le&&!(m in u))&&La(u,m,S)}function qh(u,m){for(var S=u.length;S--;)if(Ga(u[S][0],m))return S;return-1}function zp(u,m,S,O){return Ba(u,function(W,Z,ue){m(O,W,S(W),ue)}),O}function gb(u,m){return u&&Ua(m,gs(m),u)}function La(u,m,S){"__proto__"==m&&E?E(u,m,{configurable:!0,enumerable:!0,value:S,writable:!0}):u[m]=S}function yd(u,m){for(var S=-1,O=m.length,W=Fe(O),Z=null==u;++S<O;)W[S]=Z?le:Nx(u,m[S]);return W}function bd(u,m,S){return u==u&&(S!==le&&(u=u<=S?u:S),m!==le&&(u=u>=m?u:m)),u}function qo(u,m,S,O,W,Z){var ue,me=m&Tn,Se=m&bl,$e=m&ve;if(S&&(ue=W?S(u,O,W,Z):S(u)),ue!==le)return ue;if(!mr(u))return u;var Ke=gn(u);if(Ke){if(ue=function RM(u){var m=u.length,S=new u.constructor(m);return m&&"string"==typeof u[0]&&Rn.call(u,"index")&&(S.index=u.index,S.input=u.input),S}(u),!me)return ks(u,ue)}else{var nt=Os(u),xt=nt==od||nt==xp;if(Vl(u))return wu(u,me);if(nt==Ia||nt==so||xt&&!W){if(ue=Se||xt?{}:nm(u),!me)return Se?function Ob(u,m){return Ua(u,Hb(u),m)}(u,function Gp(u,m){return u&&Ua(m,Qr(m),u)}(ue,u)):function xM(u,m){return Ua(u,tm(u),m)}(u,gb(ue,u))}else{if(!zi[nt])return W?u:{};ue=function sv(u,m,S){var O=u.constructor;switch(m){case dc:return Su(u);case Ts:case gt:return new O(+u);case Sl:return function _M(u,m){var S=m?Su(u.buffer):u.buffer;return new u.constructor(S,u.byteOffset,u.byteLength)}(u,S);case Mh:case su:case Ch:case Dh:case Sp:case Th:case Ah:case Ih:case Fh:return Rb(u,S);case oo:return new O;case iu:case ru:return new O(u);case lr:return function PF(u){var m=new u.constructor(u.source,Fa.exec(u));return m.lastIndex=u.lastIndex,m}(u);case jo:return new O;case Eh:return function Fb(u){return Lt?Dn(Lt.call(u)):{}}(u)}}(u,nt,me)}}Z||(Z=new bc);var Ht=Z.get(u);if(Ht)return Ht;Z.set(u,ue),Fv(u)?u.forEach(function(on){ue.add(qo(on,m,S,on,u,Z))}):Iu(u)&&u.forEach(function(on,Qn){ue.set(Qn,qo(on,m,S,Qn,u,Z))});var Nn=Ke?le:($e?Se?Xs:rv:Se?Qr:gs)(u);return Yr(Nn||u,function(on,Qn){Nn&&(on=u[Qn=on]),_d(ue,Qn,qo(on,m,S,Qn,u,Z))}),ue}function _b(u,m,S){var O=S.length;if(null==u)return!O;for(u=Dn(u);O--;){var W=S[O],ue=u[W];if(ue===le&&!(W in u)||!(0,m[W])(ue))return!1}return!0}function Na(u,m,S){if("function"!=typeof u)throw new mo(fi);return Mu(function(){u.apply(le,S)},m)}function Kh(u,m,S,O){var W=-1,Z=xn,ue=!0,me=u.length,Se=[],$e=m.length;if(!me)return Se;S&&(m=ei(m,$s(S))),O?(Z=Ki,ue=!1):m.length>=ls&&(Z=To,ue=!1,m=new ha(m));e:for(;++W<me;){var Ke=u[W],nt=null==S?Ke:S(Ke);if(Ke=O||0!==Ke?Ke:0,ue&&nt==nt){for(var xt=$e;xt--;)if(m[xt]===nt)continue e;Se.push(Ke)}else Z(m,nt,O)||Se.push(Ke)}return Se}Y.templateSettings={escape:Zt,evaluate:Ph,interpolate:cd,variable:"",imports:{_:Y}},(Y.prototype=ti.prototype).constructor=Y,(Ci.prototype=ci(ti.prototype)).constructor=Ci,(sn.prototype=ci(ti.prototype)).constructor=sn,zn.prototype.clear=function Sr(){this.__data__=ie?ie(null):{},this.size=0},zn.prototype.delete=function Xi(u){var m=this.has(u)&&delete this.__data__[u];return this.size-=m?1:0,m},zn.prototype.get=function Jn(u){var m=this.__data__;if(ie){var S=m[u];return S===ro?le:S}return Rn.call(m,u)?m[u]:le},zn.prototype.has=function pr(u){var m=this.__data__;return ie?m[u]!==le:Rn.call(m,u)},zn.prototype.set=function rn(u,m){var S=this.__data__;return this.size+=this.has(u)?0:1,S[u]=ie&&m===le?ro:m,this},ji.prototype.clear=function vu(){this.__data__=[],this.size=0},ji.prototype.delete=function ua(u){var m=this.__data__,S=qh(m,u);return!(S<0||(S==m.length-1?m.pop():h.call(m,S,1),--this.size,0))},ji.prototype.get=function B0(u){var m=this.__data__,S=qh(m,u);return S<0?le:m[S][1]},ji.prototype.has=function da(u){return qh(this.__data__,u)>-1},ji.prototype.set=function $c(u,m){var S=this.__data__,O=qh(S,u);return O<0?(++this.size,S.push([u,m])):S[O][1]=m,this},Io.prototype.clear=function _u(){this.size=0,this.__data__={hash:new zn,map:new(Ae||ji),string:new zn}},Io.prototype.delete=function Fi(u){var m=kl(this,u).delete(u);return this.size-=m?1:0,m},Io.prototype.get=function Fo(u){return kl(this,u).get(u)},Io.prototype.has=function pi(u){return kl(this,u).has(u)},Io.prototype.set=function yc(u,m){var S=kl(this,u),O=S.size;return S.set(u,m),this.size+=S.size==O?0:1,this},ha.prototype.add=ha.prototype.push=function $h(u){return this.__data__.set(u,ro),this},ha.prototype.has=function sM(u){return this.__data__.has(u)},bc.prototype.clear=function V0(){this.__data__=new ji,this.size=0},bc.prototype.delete=function CF(u){var m=this.__data__,S=m.delete(u);return this.size=m.size,S},bc.prototype.get=function oM(u){return this.__data__.get(u)},bc.prototype.has=function aM(u){return this.__data__.has(u)},bc.prototype.set=function DF(u,m){var S=this.__data__;if(S instanceof ji){var O=S.__data__;if(!Ae||O.length<ls-1)return O.push([u,m]),this.size=++S.size,this;S=this.__data__=new Io(O)}return S.set(u,m),this.size=S.size,this};var Ba=wM(Va),jp=wM(z0,!0);function yb(u,m){var S=!0;return Ba(u,function(O,W,Z){return S=!!m(O,W,Z)}),S}function xd(u,m,S){for(var O=-1,W=u.length;++O<W;){var Z=u[O],ue=m(Z);if(null!=ue&&(me===le?ue==ue&&!Qo(ue):S(ue,me)))var me=ue,Se=Z}return Se}function bb(u,m){var S=[];return Ba(u,function(O,W,Z){m(O,W,Z)&&S.push(O)}),S}function ps(u,m,S,O,W){var Z=-1,ue=u.length;for(S||(S=sf),W||(W=[]);++Z<ue;){var me=u[Z];m>0&&S(me)?m>1?ps(me,m-1,S,O,W):Ws(W,me):O||(W[W.length]=me)}return W}var Wp=Lb(),U0=Lb(!0);function Va(u,m){return u&&Wp(u,m,gs)}function z0(u,m){return u&&U0(u,m,gs)}function bu(u,m){return bt(m,function(S){return tl(u[S])})}function Ko(u,m){for(var S=0,O=(m=Ha(m,u)).length;null!=u&&S<O;)u=u[za(m[S++])];return S&&S==O?u:le}function xb(u,m,S){var O=m(u);return gn(u)?O:Ws(O,S(u))}function Ks(u){return null==u?u===le?wl:zc:b&&b in Dn(u)?function IM(u){var m=Rn.call(u,b),S=u[b];try{u[b]=le;var O=!0}catch{}var W=Yt.call(u);return O&&(m?u[b]=S:delete u[b]),W}(u):function NM(u){return Yt.call(u)}(u)}function $p(u,m){return u>m}function wd(u,m){return null!=u&&Rn.call(u,m)}function lM(u,m){return null!=u&&m in Dn(u)}function Yh(u,m,S){for(var O=S?Ki:xn,W=u[0].length,Z=u.length,ue=Z,me=Fe(Z),Se=1/0,$e=[];ue--;){var Ke=u[ue];ue&&m&&(Ke=ei(Ke,$s(m))),Se=L(Ke.length,Se),me[ue]=!S&&(m||W>=120&&Ke.length>=120)?new ha(ue&&Ke):le}Ke=u[0];var nt=-1,xt=me[0];e:for(;++nt<W&&$e.length<Se;){var Ht=Ke[nt],hn=m?m(Ht):Ht;if(Ht=S||0!==Ht?Ht:0,!(xt?To(xt,hn):O($e,hn,S))){for(ue=Z;--ue;){var Nn=me[ue];if(!(Nn?To(Nn,hn):O(u[ue],hn,S)))continue e}xt&&xt.push(hn),$e.push(Ht)}}return $e}function Sd(u,m,S){var O=null==(u=Wb(u,m=Ha(m,u)))?u:u[za(ma(m))];return null==O?le:Ii(O,u,S)}function qc(u){return Er(u)&&Ks(u)==so}function xc(u,m,S,O,W){return u===m||(null==u||null==m||!Er(u)&&!Er(m)?u!=u&&m!=m:function wb(u,m,S,O,W,Z){var ue=gn(u),me=gn(m),Se=ue?cc:Os(u),$e=me?cc:Os(m),Ke=(Se=Se==so?Ia:Se)==Ia,nt=($e=$e==so?Ia:$e)==Ia,xt=Se==$e;if(xt&&Vl(u)){if(!Vl(m))return!1;ue=!0,Ke=!1}if(xt&&!Ke)return Z||(Z=new bc),ue||Zs(u)?Bb(u,m,S,O,W,Z):function AM(u,m,S,O,W,Z,ue){switch(S){case Sl:if(u.byteLength!=m.byteLength||u.byteOffset!=m.byteOffset)return!1;u=u.buffer,m=m.buffer;case dc:return!(u.byteLength!=m.byteLength||!Z(new _c(u),new _c(m)));case Ts:case gt:case iu:return Ga(+u,+m);case Uc:return u.name==m.name&&u.message==m.message;case lr:case ru:return u==m+"";case oo:var me=Ar;case jo:if(me||(me=zh),u.size!=m.size&&!(O&Mn))return!1;var $e=ue.get(u);if($e)return $e==m;O|=oi,ue.set(u,m);var Ke=Bb(me(u),me(m),O,W,Z,ue);return ue.delete(u),Ke;case Eh:if(Lt)return Lt.call(u)==Lt.call(m)}return!1}(u,m,Se,S,O,W,Z);if(!(S&Mn)){var Ht=Ke&&Rn.call(u,"__wrapped__"),hn=nt&&Rn.call(m,"__wrapped__");if(Ht||hn){var Nn=Ht?u.value():u,on=hn?m.value():m;return Z||(Z=new bc),W(Nn,on,S,O,Z)}}return!!xt&&(Z||(Z=new bc),function Vb(u,m,S,O,W,Z){var ue=S&Mn,me=rv(u),Se=me.length;if(Se!=rv(m).length&&!ue)return!1;for(var nt=Se;nt--;){var xt=me[nt];if(!(ue?xt in m:Rn.call(m,xt)))return!1}var Ht=Z.get(u),hn=Z.get(m);if(Ht&&hn)return Ht==m&&hn==u;var Nn=!0;Z.set(u,m),Z.set(m,u);for(var on=ue;++nt<Se;){var Qn=u[xt=me[nt]],mi=m[xt];if(O)var ko=ue?O(mi,Qn,xt,m,u,Z):O(Qn,mi,xt,u,m,Z);if(!(ko===le?Qn===mi||W(Qn,mi,S,O,Z):ko)){Nn=!1;break}on||(on="constructor"==xt)}if(Nn&&!on){var Oo=u.constructor,Js=m.constructor;Oo!=Js&&"constructor"in u&&"constructor"in m&&!("function"==typeof Oo&&Oo instanceof Oo&&"function"==typeof Js&&Js instanceof Js)&&(Nn=!1)}return Z.delete(u),Z.delete(m),Nn}(u,m,S,O,W,Z))}(u,m,S,O,xc,W))}function Il(u,m,S,O){var W=S.length,Z=W,ue=!O;if(null==u)return!Z;for(u=Dn(u);W--;){var me=S[W];if(ue&&me[2]?me[1]!==u[me[0]]:!(me[0]in u))return!1}for(;++W<Z;){var Se=(me=S[W])[0],$e=u[Se],Ke=me[1];if(ue&&me[2]){if($e===le&&!(Se in u))return!1}else{var nt=new bc;if(O)var xt=O($e,Ke,Se,u,m,nt);if(!(xt===le?xc(Ke,$e,Mn|oi,O,nt):xt))return!1}}return!0}function dM(u){return!(!mr(u)||function Id(u){return!!Ve&&Ve in u}(u))&&(tl(u)?qs:ob).test(Nl(u))}function fM(u){return"function"==typeof u?u:null==u?Po:"object"==typeof u?gn(u)?Cd(u[0],u[1]):mM(u):a1(u)}function Sb(u){if(!Fd(u))return P(u);var m=[];for(var S in Dn(u))Rn.call(u,S)&&"constructor"!=S&&m.push(S);return m}function Eb(u,m){return u<m}function pM(u,m){var S=-1,O=Ro(u)?Fe(u.length):[];return Ba(u,function(W,Z,ue){O[++S]=m(W,Z,ue)}),O}function mM(u){var m=em(u);return 1==m.length&&m[0][2]?rm(m[0][0],m[0][1]):function(S){return S===u||Il(S,u,m)}}function Cd(u,m){return af(u)&&Gb(m)?rm(za(u),m):function(S){var O=Nx(S,u);return O===le&&O===m?Bx(S,u):xc(m,O,Mn|oi)}}function j0(u,m,S,O,W){u!==m&&Wp(m,function(Z,ue){if(W||(W=new bc),mr(Z))!function IF(u,m,S,O,W,Z,ue){var me=cf(u,S),Se=cf(m,S),$e=ue.get(Se);if($e)yu(u,S,$e);else{var Ke=Z?Z(me,Se,S+"",u,m,ue):le,nt=Ke===le;if(nt){var xt=gn(Se),Ht=!xt&&Vl(Se),hn=!xt&&!Ht&&Zs(Se);Ke=Se,xt||Ht||hn?gn(me)?Ke=me:Fr(me)?Ke=ks(me):Ht?(nt=!1,Ke=wu(Se,!0)):hn?(nt=!1,Ke=Rb(Se,!0)):Ke=[]:Nd(Se)||Tu(Se)?(Ke=me,Tu(me)?Ke=Sn(me):(!mr(me)||tl(me))&&(Ke=nm(Se))):nt=!1}nt&&(ue.set(Se,Ke),W(Ke,Se,O,Z,ue),ue.delete(Se)),yu(u,S,Ke)}}(u,m,ue,S,j0,O,W);else{var me=O?O(cf(u,ue),Z,ue+"",u,m,W):le;me===le&&(me=Z),yu(u,ue,me)}},Qr)}function Br(u,m){var S=u.length;if(S)return Zc(m+=m<0?S:0,S)?u[m]:le}function qp(u,m,S){m=m.length?ei(m,function(Z){return gn(Z)?function(ue){return Ko(ue,1===Z.length?Z[0]:Z)}:Z}):[Po];var O=-1;return m=ei(m,$s(kt())),function wr(xe,ze){var Fe=xe.length;for(xe.sort(ze);Fe--;)xe[Fe]=xe[Fe].value;return xe}(pM(u,function(Z,ue,me){return{criteria:ei(m,function($e){return $e(Z)}),index:++O,value:Z}}),function(Z,ue){return function bM(u,m,S){for(var O=-1,W=u.criteria,Z=m.criteria,ue=W.length,me=S.length;++O<ue;){var Se=yM(W[O],Z[O]);if(Se)return O>=me?Se:Se*("desc"==S[O]?-1:1)}return u.index-m.index}(Z,ue,S)})}function Mb(u,m,S){for(var O=-1,W=m.length,Z={};++O<W;){var ue=m[O],me=Ko(u,ue);S(me,ue)&&Ps(Z,Ha(ue,u),me)}return Z}function Kc(u,m,S,O){var W=O?Tr:aa,Z=-1,ue=m.length,me=u;for(u===m&&(m=ks(m)),S&&(me=ei(u,$s(S)));++Z<ue;)for(var Se=0,$e=m[Z],Ke=S?S($e):$e;(Se=W(me,Ke,Se,O))>-1;)me!==u&&h.call(me,Se,1),h.call(u,Se,1);return u}function W0(u,m){for(var S=u?m.length:0,O=S-1;S--;){var W=m[S];if(S==O||W!==Z){var Z=W;Zc(W)?h.call(u,W,1):Ad(u,W)}}return u}function Dd(u,m){return u+U(Q()*(m-u+1))}function $0(u,m){var S="";if(!u||m<1||m>Kn)return S;do{m%2&&(S+=u),(m=U(m/2))&&(u+=u)}while(m);return S}function Xn(u,m){return lv(jb(u,m,Po),u+"")}function gM(u){return Up(Bd(u))}function FF(u,m){var S=Bd(u);return lf(S,bd(m,0,S.length))}function Ps(u,m,S,O){if(!mr(u))return u;for(var W=-1,Z=(m=Ha(m,u)).length,ue=Z-1,me=u;null!=me&&++W<Z;){var Se=za(m[W]),$e=S;if("__proto__"===Se||"constructor"===Se||"prototype"===Se)return u;if(W!=ue){var Ke=me[Se];($e=O?O(Ke,Se,me):le)===le&&($e=mr(Ke)?Ke:Zc(m[W+1])?[]:{})}_d(me,Se,$e),me=me[Se]}return u}var Kp=de?function(u,m){return de.set(u,m),u}:Po,Td=E?function(u,m){return E(u,"toString",{configurable:!0,enumerable:!1,value:jv(m),writable:!0})}:Po;function RF(u){return lf(Bd(u))}function Yo(u,m,S){var O=-1,W=u.length;m<0&&(m=-m>W?0:W+m),(S=S>W?W:S)<0&&(S+=W),W=m>S?0:S-m>>>0,m>>>=0;for(var Z=Fe(W);++O<W;)Z[O]=u[O+m];return Z}function vM(u,m){var S;return Ba(u,function(O,W,Z){return!(S=m(O,W,Z))}),!!S}function Yp(u,m,S){var O=0,W=null==u?O:u.length;if("number"==typeof m&&m==m&&W<=Vi){for(;O<W;){var Z=O+W>>>1,ue=u[Z];null!==ue&&!Qo(ue)&&(S?ue<=m:ue<m)?O=Z+1:W=Z}return W}return q0(u,m,Po,S)}function q0(u,m,S,O){var W=0,Z=null==u?0:u.length;if(0===Z)return 0;for(var ue=(m=S(m))!=m,me=null===m,Se=Qo(m),$e=m===le;W<Z;){var Ke=U((W+Z)/2),nt=S(u[Ke]),xt=nt!==le,Ht=null===nt,hn=nt==nt,Nn=Qo(nt);if(ue)var on=O||hn;else on=$e?hn&&(O||xt):me?hn&&xt&&(O||!Ht):Se?hn&&xt&&!Ht&&(O||!Nn):!Ht&&!Nn&&(O?nt<=m:nt<m);on?W=Ke+1:Z=Ke}return L(Z,rr)}function Cb(u,m){for(var S=-1,O=u.length,W=0,Z=[];++S<O;){var ue=u[S],me=m?m(ue):ue;if(!S||!Ga(me,Se)){var Se=me;Z[W++]=0===ue?0:ue}}return Z}function Db(u){return"number"==typeof u?u:Qo(u)?un:+u}function Xo(u){if("string"==typeof u)return u;if(gn(u))return ei(u,Xo)+"";if(Qo(u))return Fn?Fn.call(u):"";var m=u+"";return"0"==m&&1/u==-$t?"-0":m}function wc(u,m,S){var O=-1,W=xn,Z=u.length,ue=!0,me=[],Se=me;if(S)ue=!1,W=Ki;else if(Z>=ls){var $e=m?null:DM(u);if($e)return zh($e);ue=!1,W=To,Se=new ha}else Se=m?[]:me;e:for(;++O<Z;){var Ke=u[O],nt=m?m(Ke):Ke;if(Ke=S||0!==Ke?Ke:0,ue&&nt==nt){for(var xt=Se.length;xt--;)if(Se[xt]===nt)continue e;m&&Se.push(nt),me.push(Ke)}else W(Se,nt,S)||(Se!==me&&Se.push(nt),me.push(Ke))}return me}function Ad(u,m){return null==(u=Wb(u,m=Ha(m,u)))||delete u[za(ma(m))]}function Jh(u,m,S,O){return Ps(u,m,S(Ko(u,m)),O)}function pa(u,m,S,O){for(var W=u.length,Z=O?W:-1;(O?Z--:++Z<W)&&m(u[Z],Z,u););return S?Yo(u,O?0:Z,O?Z+1:W):Yo(u,O?Z+1:0,O?W:Z)}function K0(u,m){var S=u;return S instanceof sn&&(S=S.value()),Lr(m,function(O,W){return W.func.apply(W.thisArg,Ws([O],W.args))},S)}function Fl(u,m,S){var O=u.length;if(O<2)return O?wc(u[0]):[];for(var W=-1,Z=Fe(O);++W<O;)for(var ue=u[W],me=-1;++me<O;)me!=W&&(Z[W]=Kh(Z[W]||ue,u[me],m,S));return wc(ps(Z,1),m,S)}function Tb(u,m,S){for(var O=-1,W=u.length,Z=m.length,ue={};++O<W;)S(ue,u[O],O<Z?m[O]:le);return ue}function Xp(u){return Fr(u)?u:[]}function xu(u){return"function"==typeof u?u:Po}function Ha(u,m){return gn(u)?u:af(u,m)?[u]:Ll(Ti(u))}var Ab=Xn;function Rl(u,m,S){var O=u.length;return S=S===le?O:S,!m&&S>=O?u:Yo(u,m,S)}var Ib=M||function(u){return hr.clearTimeout(u)};function wu(u,m){if(m)return u.slice();var S=u.length,O=Fs?Fs(S):new u.constructor(S);return u.copy(O),O}function Su(u){var m=new u.constructor(u.byteLength);return new _c(m).set(new _c(u)),m}function Rb(u,m){var S=m?Su(u.buffer):u.buffer;return new u.constructor(S,u.byteOffset,u.length)}function yM(u,m){if(u!==m){var S=u!==le,O=null===u,W=u==u,Z=Qo(u),ue=m!==le,me=null===m,Se=m==m,$e=Qo(m);if(!me&&!$e&&!Z&&u>m||Z&&ue&&Se&&!me&&!$e||O&&ue&&Se||!S&&Se||!W)return 1;if(!O&&!Z&&!$e&&u<m||$e&&S&&W&&!O&&!Z||me&&S&&W||!ue&&W||!Se)return-1}return 0}function Pb(u,m,S,O){for(var W=-1,Z=u.length,ue=S.length,me=-1,Se=m.length,$e=V(Z-ue,0),Ke=Fe(Se+$e),nt=!O;++me<Se;)Ke[me]=m[me];for(;++W<ue;)(nt||W<Z)&&(Ke[S[W]]=u[W]);for(;$e--;)Ke[me++]=u[W++];return Ke}function kb(u,m,S,O){for(var W=-1,Z=u.length,ue=-1,me=S.length,Se=-1,$e=m.length,Ke=V(Z-me,0),nt=Fe(Ke+$e),xt=!O;++W<Ke;)nt[W]=u[W];for(var Ht=W;++Se<$e;)nt[Ht+Se]=m[Se];for(;++ue<me;)(xt||W<Z)&&(nt[Ht+S[ue]]=u[W++]);return nt}function ks(u,m){var S=-1,O=u.length;for(m||(m=Fe(O));++S<O;)m[S]=u[S];return m}function Ua(u,m,S,O){var W=!S;S||(S={});for(var Z=-1,ue=m.length;++Z<ue;){var me=m[Z],Se=O?O(S[me],u[me],me,S,u):le;Se===le&&(Se=u[me]),W?La(S,me,Se):_d(S,me,Se)}return S}function Y0(u,m){return function(S,O){var W=gn(S)?Is:zp,Z=m?m():{};return W(S,u,kt(O,2),Z)}}function Eu(u){return Xn(function(m,S){var O=-1,W=S.length,Z=W>1?S[W-1]:le,ue=W>2?S[2]:le;for(Z=u.length>3&&"function"==typeof Z?(W--,Z):le,ue&&go(S[0],S[1],ue)&&(Z=W<3?le:Z,W=1),m=Dn(m);++O<W;){var me=S[O];me&&u(m,me,O,Z)}return m})}function wM(u,m){return function(S,O){if(null==S)return S;if(!Ro(S))return u(S,O);for(var W=S.length,Z=m?W:-1,ue=Dn(S);(m?Z--:++Z<W)&&!1!==O(ue[Z],Z,ue););return S}}function Lb(u){return function(m,S,O){for(var W=-1,Z=Dn(m),ue=O(m),me=ue.length;me--;){var Se=ue[u?me:++W];if(!1===S(Z[Se],Se,Z))break}return m}}function Zp(u){return function(m){var S=la(m=Ti(m))?po(m):le,O=S?S[0]:m.charAt(0),W=S?Rl(S,1).join(""):m.slice(1);return O[u]()+W}}function Qh(u){return function(m){return Lr(n1(Yx(m).replace(pd,"")),u,"")}}function Jp(u){return function(){var m=arguments;switch(m.length){case 0:return new u;case 1:return new u(m[0]);case 2:return new u(m[0],m[1]);case 3:return new u(m[0],m[1],m[2]);case 4:return new u(m[0],m[1],m[2],m[3]);case 5:return new u(m[0],m[1],m[2],m[3],m[4]);case 6:return new u(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new u(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var S=ci(u.prototype),O=u.apply(S,m);return mr(O)?O:S}}function EM(u){return function(m,S,O){var W=Dn(m);if(!Ro(m)){var Z=kt(S,3);m=gs(m),S=function(me){return Z(W[me],me,W)}}var ue=u(m,S,O);return ue>-1?W[Z?m[ue]:ue]:le}}function MM(u){return Xc(function(m){var S=m.length,O=S,W=Ci.prototype.thru;for(u&&m.reverse();O--;){var Z=m[O];if("function"!=typeof Z)throw new mo(fi);if(W&&!ue&&"wrapper"==rf(Z))var ue=new Ci([],!0)}for(O=ue?O:S;++O<S;){var me=rf(Z=m[O]),Se="wrapper"==me?nf(Z):le;ue=Se&&im(Se[0])&&Se[1]==(an|us|qr|Ta)&&!Se[4].length&&1==Se[9]?ue[rf(Se[0])].apply(ue,Se[3]):1==Z.length&&im(Z)?ue[me]():ue.thru(Z)}return function(){var $e=arguments,Ke=$e[0];if(ue&&1==$e.length&&gn(Ke))return ue.plant(Ke).value();for(var nt=0,xt=S?m[nt].apply(this,$e):Ke;++nt<S;)xt=m[nt].call(this,xt);return xt}})}function Z0(u,m,S,O,W,Z,ue,me,Se,$e){var Ke=m&an,nt=m&Cs,xt=m&Da,Ht=m&(us|Ds),hn=m&id,Nn=xt?le:Jp(u);return function on(){for(var Qn=arguments.length,mi=Fe(Qn),ko=Qn;ko--;)mi[ko]=arguments[ko];if(Ht)var Oo=Pl(on),Js=function rM(xe,ze){for(var Fe=xe.length,Ft=0;Fe--;)xe[Fe]===ze&&++Ft;return Ft}(mi,Oo);if(O&&(mi=Pb(mi,O,W,Ht)),Z&&(mi=kb(mi,Z,ue,Ht)),Qn-=Js,Ht&&Qn<$e){var Rr=gc(mi,Oo);return nv(u,m,Z0,on.placeholder,S,mi,Rr,me,Se,$e-Qn)}var ja=nt?S:this,Wa=xt?ja[u]:u;return Qn=mi.length,me?mi=function $b(u,m){for(var S=u.length,O=L(m.length,S),W=ks(u);O--;){var Z=m[O];u[O]=Zc(Z,S)?W[Z]:le}return u}(mi,me):hn&&Qn>1&&mi.reverse(),Ke&&Se<Qn&&(mi.length=Se),this&&this!==hr&&this instanceof on&&(Wa=Nn||Jp(Wa)),Wa.apply(ja,mi)}}function CM(u,m){return function(S,O){return function uM(u,m,S,O){return Va(u,function(W,Z,ue){m(O,S(W),Z,ue)}),O}(S,u,m(O),{})}}function J0(u,m){return function(S,O){var W;if(S===le&&O===le)return m;if(S!==le&&(W=S),O!==le){if(W===le)return O;"string"==typeof S||"string"==typeof O?(S=Xo(S),O=Xo(O)):(S=Db(S),O=Db(O)),W=u(S,O)}return W}}function Q0(u){return Xc(function(m){return m=ei(m,$s(kt())),Xn(function(S){var O=this;return u(m,function(W){return Ii(W,O,S)})})})}function ef(u,m){var S=(m=m===le?" ":Xo(m)).length;if(S<2)return S?$0(m,u):m;var O=$0(m,k(u/uu(m)));return la(m)?Rl(po(O),0,u).join(""):O.slice(0,u)}function tv(u){return function(m,S,O){return O&&"number"!=typeof O&&go(m,S,O)&&(S=O=le),m=Ec(m),S===le?(S=m,m=0):S=Ec(S),function Zh(u,m,S,O){for(var W=-1,Z=V(k((m-u)/(S||1)),0),ue=Fe(Z);Z--;)ue[O?Z:++W]=u,u+=S;return ue}(m,S,O=O===le?m<S?1:-1:Ec(O),u)}}function tf(u){return function(m,S){return"string"==typeof m&&"string"==typeof S||(m=ga(m),S=ga(S)),u(m,S)}}function nv(u,m,S,O,W,Z,ue,me,Se,$e){var Ke=m&us;m|=Ke?qr:xr,(m&=~(Ke?xr:qr))&xl||(m&=~(Cs|Da));var Nn=[u,m,W,Ke?Z:le,Ke?ue:le,Ke?le:Z,Ke?le:ue,me,Se,$e],on=S.apply(le,Nn);return im(u)&&cv(on,Nn),on.placeholder=O,qb(on,u,m)}function Ys(u){var m=fr[u];return function(S,O){if(S=ga(S),(O=null==O?0:L(Ln(O),292))&&C(S)){var W=(Ti(S)+"e").split("e");return+((W=(Ti(m(W[0]+"e"+(+W[1]+O)))+"e").split("e"))[0]+"e"+(+W[1]-O))}return m(S)}}var DM=q&&1/zh(new q([,-0]))[1]==$t?function(u){return new q(u)}:Yv;function Nb(u){return function(m){var S=Os(m);return S==oo?Ar(m):S==jo?function Bp(xe){var ze=-1,Fe=Array(xe.size);return xe.forEach(function(Ft){Fe[++ze]=[Ft,Ft]}),Fe}(m):function ho(xe,ze){return ei(ze,function(Fe){return[Fe,xe[Fe]]})}(m,u(m))}}function Yc(u,m,S,O,W,Z,ue,me){var Se=m&Da;if(!Se&&"function"!=typeof u)throw new mo(fi);var $e=O?O.length:0;if($e||(m&=~(qr|xr),O=W=le),ue=ue===le?ue:V(Ln(ue),0),me=me===le?me:Ln(me),$e-=W?W.length:0,m&xr){var Ke=O,nt=W;O=W=le}var xt=Se?le:nf(u),Ht=[u,m,S,O,W,Ke,nt,Z,ue,me];if(xt&&function OM(u,m){var S=u[1],O=m[1],W=S|O;if(!(W<(Cs|Da|an))&&!(O==an&&S==us||O==an&&S==Ta&&u[7].length<=m[8]||O==(an|Ta)&&m[7].length<=m[8]&&S==us))return u;O&Cs&&(u[2]=m[2],W|=S&Cs?0:xl);var me=m[3];if(me){var Se=u[3];u[3]=Se?Pb(Se,me,m[4]):me,u[4]=Se?gc(u[3],$r):m[4]}(me=m[5])&&(u[5]=(Se=u[5])?kb(Se,me,m[6]):me,u[6]=Se?gc(u[5],$r):m[6]),(me=m[7])&&(u[7]=me),O&an&&(u[8]=null==u[8]?m[8]:L(u[8],m[8])),null==u[9]&&(u[9]=m[9]),u[0]=m[0],u[1]=W}(Ht,xt),u=Ht[0],m=Ht[1],S=Ht[2],O=Ht[3],W=Ht[4],!(me=Ht[9]=Ht[9]===le?Se?0:u.length:V(Ht[9]-$e,0))&&m&(us|Ds)&&(m&=~(us|Ds)),m&&m!=Cs)hn=m==us||m==Ds?function X0(u,m,S){var O=Jp(u);return function W(){for(var Z=arguments.length,ue=Fe(Z),me=Z,Se=Pl(W);me--;)ue[me]=arguments[me];var $e=Z<3&&ue[0]!==Se&&ue[Z-1]!==Se?[]:gc(ue,Se);return(Z-=$e.length)<S?nv(u,m,Z0,W.placeholder,le,ue,$e,le,le,S-Z):Ii(this&&this!==hr&&this instanceof W?O:u,this,ue)}}(u,m,me):m!=qr&&m!=(Cs|qr)||W.length?Z0.apply(le,Ht):function ev(u,m,S,O){var W=m&Cs,Z=Jp(u);return function ue(){for(var me=-1,Se=arguments.length,$e=-1,Ke=O.length,nt=Fe(Ke+Se),xt=this&&this!==hr&&this instanceof ue?Z:u;++$e<Ke;)nt[$e]=O[$e];for(;Se--;)nt[$e++]=arguments[++me];return Ii(xt,W?S:this,nt)}}(u,m,S,O);else var hn=function SM(u,m,S){var O=m&Cs,W=Jp(u);return function Z(){return(this&&this!==hr&&this instanceof Z?W:u).apply(O?S:this,arguments)}}(u,m,S);return qb((xt?Kp:cv)(hn,Ht),u,m)}function iv(u,m,S,O){return u===le||Ga(u,jc[S])&&!Rn.call(O,S)?m:u}function Qp(u,m,S,O,W,Z){return mr(u)&&mr(m)&&(Z.set(m,u),j0(u,m,le,Qp,Z),Z.delete(m)),u}function TM(u){return Nd(u)?le:u}function Bb(u,m,S,O,W,Z){var ue=S&Mn,me=u.length,Se=m.length;if(me!=Se&&!(ue&&Se>me))return!1;var $e=Z.get(u),Ke=Z.get(m);if($e&&Ke)return $e==m&&Ke==u;var nt=-1,xt=!0,Ht=S&oi?new ha:le;for(Z.set(u,m),Z.set(m,u);++nt<me;){var hn=u[nt],Nn=m[nt];if(O)var on=ue?O(Nn,hn,nt,m,u,Z):O(hn,Nn,nt,u,m,Z);if(on!==le){if(on)continue;xt=!1;break}if(Ht){if(!Yi(m,function(Qn,mi){if(!To(Ht,mi)&&(hn===Qn||W(hn,Qn,S,O,Z)))return Ht.push(mi)})){xt=!1;break}}else if(hn!==Nn&&!W(hn,Nn,S,O,Z)){xt=!1;break}}return Z.delete(u),Z.delete(m),xt}function Xc(u){return lv(jb(u,le,Rd),u+"")}function rv(u){return xb(u,gs,tm)}function Xs(u){return xb(u,Qr,Hb)}var nf=de?function(u){return de.get(u)}:Yv;function rf(u){for(var m=u.name+"",S=be[m],O=Rn.call(be,m)?S.length:0;O--;){var W=S[O],Z=W.func;if(null==Z||Z==u)return W.name}return m}function Pl(u){return(Rn.call(Y,"placeholder")?Y:u).placeholder}function kt(){var u=Y.iteratee||$v;return u=u===$v?fM:u,arguments.length?u(arguments[0],arguments[1]):u}function kl(u,m){var S=u.__data__;return function ov(u){var m=typeof u;return"string"==m||"number"==m||"symbol"==m||"boolean"==m?"__proto__"!==u:null===u}(m)?S["string"==typeof m?"string":"hash"]:S.map}function em(u){for(var m=gs(u),S=m.length;S--;){var O=m[S],W=u[O];m[S]=[O,W,Gb(W)]}return m}function Ol(u,m){var S=function hs(xe,ze){return null==xe?le:xe[ze]}(u,m);return dM(S)?S:le}var tm=z?function(u){return null==u?[]:(u=Dn(u),bt(z(u),function(m){return l.call(u,m)}))}:c1,Hb=z?function(u){for(var m=[];u;)Ws(m,tm(u)),u=en(u);return m}:c1,Os=Ks;function zb(u,m,S){for(var O=-1,W=(m=Ha(m,u)).length,Z=!1;++O<W;){var ue=za(m[O]);if(!(Z=null!=u&&S(u,ue)))break;u=u[ue]}return Z||++O!=W?Z:!!(W=null==u?0:u.length)&&xm(W)&&Zc(ue,W)&&(gn(u)||Tu(u))}function nm(u){return"function"!=typeof u.constructor||Fd(u)?{}:ci(en(u))}function sf(u){return gn(u)||Tu(u)||!!(f&&u&&u[f])}function Zc(u,m){var S=typeof u;return!!(m=m??Kn)&&("number"==S||"symbol"!=S&&D0.test(u))&&u>-1&&u%1==0&&u<m}function go(u,m,S){if(!mr(S))return!1;var O=typeof m;return!!("number"==O?Ro(S)&&Zc(m,S.length):"string"==O&&m in S)&&Ga(S[m],u)}function af(u,m){if(gn(u))return!1;var S=typeof u;return!("number"!=S&&"symbol"!=S&&"boolean"!=S&&null!=u&&!Qo(u))||ld.test(u)||!eb.test(u)||null!=m&&u in Dn(m)}function im(u){var m=rf(u),S=Y[m];if("function"!=typeof S||!(m in sn.prototype))return!1;if(u===S)return!0;var O=nf(S);return!!O&&u===O[0]}(we&&Os(new we(new ArrayBuffer(1)))!=Sl||Ae&&Os(new Ae)!=oo||j&&Os(j.resolve())!=wp||q&&Os(new q)!=jo||ee&&Os(new ee)!=lc)&&(Os=function(u){var m=Ks(u),S=m==Ia?u.constructor:le,O=S?Nl(S):"";if(O)switch(O){case ce:return Sl;case pe:return oo;case _e:return wp;case Ie:return jo;case Bt:return lc}return m});var av=Wc?tl:vf;function Fd(u){var m=u&&u.constructor;return u===("function"==typeof m&&m.prototype||jc)}function Gb(u){return u==u&&!mr(u)}function rm(u,m){return function(S){return null!=S&&S[u]===m&&(m!==le||u in Dn(S))}}function jb(u,m,S){return m=V(m===le?u.length-1:m,0),function(){for(var O=arguments,W=-1,Z=V(O.length-m,0),ue=Fe(Z);++W<Z;)ue[W]=O[m+W];W=-1;for(var me=Fe(m+1);++W<m;)me[W]=O[W];return me[m]=S(ue),Ii(u,this,me)}}function Wb(u,m){return m.length<2?u:Ko(u,Yo(m,0,-1))}function cf(u,m){if(("constructor"!==m||"function"!=typeof u[m])&&"__proto__"!=m)return u[m]}var cv=uv(Kp),Mu=R||function(u,m){return hr.setTimeout(u,m)},lv=uv(Td);function qb(u,m,S){var O=m+"";return lv(u,function PM(u,m){var S=m.length;if(!S)return u;var O=S-1;return m[O]=(S>1?"& ":"")+m[O],m=m.join(S>2?", ":" "),u.replace(M0,"{\n/* [wrapped with "+m+"] */\n")}(O,function BM(u,m){return Yr(ac,function(S){var O="_."+S[0];m&S[1]&&!xn(u,O)&&u.push(O)}),u.sort()}(function Ub(u){var m=u.match(ud);return m?m[1].split(ao):[]}(O),S)))}function uv(u){var m=0,S=0;return function(){var O=$(),W=ln-(O-S);if(S=O,W>0){if(++m>=rd)return arguments[0]}else m=0;return u.apply(le,arguments)}}function lf(u,m){var S=-1,O=u.length,W=O-1;for(m=m===le?O:m;++S<m;){var Z=Dd(S,W),ue=u[Z];u[Z]=u[S],u[S]=ue}return u.length=m,u}var Ll=function kM(u){var m=Jo(u,function(O){return 500===S.size&&S.clear(),O}),S=m.cache;return m}(function(u){var m=[];return 46===u.charCodeAt(0)&&m.push(""),u.replace(He,function(S,O,W,Z){m.push(W?Z.replace(C0,"$1"):O||S)}),m});function za(u){if("string"==typeof u||Qo(u))return u;var m=u+"";return"0"==m&&1/u==-$t?"-0":m}function Nl(u){if(null!=u){try{return fu.call(u)}catch{}try{return u+""}catch{}}return""}function VM(u){if(u instanceof sn)return u.clone();var m=new Ci(u.__wrapped__,u.__chain__);return m.__actions__=ks(u.__actions__),m.__index__=u.__index__,m.__values__=u.__values__,m}var Yb=Xn(function(u,m){return Fr(u)?Kh(u,ps(m,1,Fr,!0)):[]}),Xb=Xn(function(u,m){var S=ma(m);return Fr(S)&&(S=le),Fr(u)?Kh(u,ps(m,1,Fr,!0),kt(S,2)):[]}),dv=Xn(function(u,m){var S=ma(m);return Fr(S)&&(S=le),Fr(u)?Kh(u,ps(m,1,Fr,!0),le,S):[]});function cm(u,m,S){var O=null==u?0:u.length;if(!O)return-1;var W=null==S?0:Ln(S);return W<0&&(W=V(O+W,0)),ka(u,kt(m,3),W)}function lm(u,m,S){var O=null==u?0:u.length;if(!O)return-1;var W=O-1;return S!==le&&(W=Ln(S),W=S<0?V(O+W,0):L(W,O-1)),ka(u,kt(m,3),W,!0)}function Rd(u){return null!=u&&u.length?ps(u,1):[]}function ex(u){return u&&u.length?u[0]:le}var nx=Xn(function(u){var m=ei(u,Xp);return m.length&&m[0]===u[0]?Yh(m):[]}),um=Xn(function(u){var m=ma(u),S=ei(u,Xp);return m===ma(S)?m=le:S.pop(),S.length&&S[0]===u[0]?Yh(S,kt(m,2)):[]}),fv=Xn(function(u){var m=ma(u),S=ei(u,Xp);return(m="function"==typeof m?m:le)&&S.pop(),S.length&&S[0]===u[0]?Yh(S,le,m):[]});function ma(u){var m=null==u?0:u.length;return m?u[m-1]:le}var WM=Xn(dm);function dm(u,m){return u&&u.length&&m&&m.length?Kc(u,m):u}var hm=Xc(function(u,m){var S=null==u?0:u.length,O=yd(u,m);return W0(u,ei(m,function(W){return Zc(W,S)?+W:W}).sort(yM)),O});function fm(u){return null==u?u:te.call(u)}var nC=Xn(function(u){return wc(ps(u,1,Fr,!0))}),iC=Xn(function(u){var m=ma(u);return Fr(m)&&(m=le),wc(ps(u,1,Fr,!0),kt(m,2))}),ox=Xn(function(u){var m=ma(u);return m="function"==typeof m?m:le,wc(ps(u,1,Fr,!0),le,m)});function mv(u){if(!u||!u.length)return[];var m=0;return u=bt(u,function(S){if(Fr(S))return m=V(S.length,m),!0}),Tl(m,function(S){return ei(u,mc(S))})}function uf(u,m){if(!u||!u.length)return[];var S=mv(u);return null==m?S:ei(S,function(O){return Ii(m,le,O)})}var Jc=Xn(function(u,m){return Fr(u)?Kh(u,m):[]}),df=Xn(function(u){return Fl(bt(u,Fr))}),ax=Xn(function(u){var m=ma(u);return Fr(m)&&(m=le),Fl(bt(u,Fr),kt(m,2))}),cx=Xn(function(u){var m=ma(u);return m="function"==typeof m?m:le,Fl(bt(u,Fr),le,m)}),lx=Xn(mv),NF=Xn(function(u){var m=u.length,S=m>1?u[m-1]:le;return S="function"==typeof S?(u.pop(),S):le,uf(u,S)});function pm(u){var m=Y(u);return m.__chain__=!0,m}function vv(u,m){return m(u)}var BF=Xc(function(u){var m=u.length,S=m?u[0]:0,O=this.__wrapped__,W=function(Z){return yd(Z,u)};return!(m>1||this.__actions__.length)&&O instanceof sn&&Zc(S)?((O=O.slice(S,+S+(m?1:0))).__actions__.push({func:vv,args:[W],thisArg:le}),new Ci(O,this.__chain__).thru(function(Z){return m&&!Z.length&&Z.push(le),Z})):this.thru(W)}),hx=Y0(function(u,m,S){Rn.call(u,S)?++u[S]:La(u,S,1)}),Di=EM(cm),hC=EM(lm);function px(u,m){return(gn(u)?Yr:Ba)(u,kt(m,3))}function mx(u,m){return(gn(u)?uo:jp)(u,kt(m,3))}var pC=Y0(function(u,m,S){Rn.call(u,S)?u[S].push(m):La(u,S,[m])}),gx=Xn(function(u,m,S){var O=-1,W="function"==typeof m,Z=Ro(u)?Fe(u.length):[];return Ba(u,function(ue){Z[++O]=W?Ii(m,ue,S):Sd(ue,m,S)}),Z}),VF=Y0(function(u,m,S){La(u,S,m)});function yv(u,m){return(gn(u)?ei:pM)(u,kt(m,3))}var gm=Y0(function(u,m,S){u[S?0:1].push(m)},function(){return[[],[]]}),HF=Xn(function(u,m){if(null==u)return[];var S=m.length;return S>1&&go(u,m[0],m[1])?m=[]:S>2&&go(m[0],m[1],m[2])&&(m=[m[0]]),qp(u,ps(m,1),[])}),kd=D||function(){return hr.Date.now()};function vm(u,m,S){return m=S?le:m,Yc(u,an,le,le,le,le,m=u&&null==m?u.length:m)}function xv(u,m){var S;if("function"!=typeof m)throw new mo(fi);return u=Ln(u),function(){return--u>0&&(S=m.apply(this,arguments)),u<=1&&(m=le),S}}var _m=Xn(function(u,m,S){var O=Cs;if(S.length){var W=gc(S,Pl(_m));O|=qr}return Yc(u,O,m,S,W)}),Bl=Xn(function(u,m,S){var O=Cs|Da;if(S.length){var W=gc(S,Pl(Bl));O|=qr}return Yc(m,O,u,S,W)});function pf(u,m,S){var O,W,Z,ue,me,Se,$e=0,Ke=!1,nt=!1,xt=!0;if("function"!=typeof u)throw new mo(fi);function Ht(Rr){var ja=O,Wa=W;return O=W=le,$e=Rr,ue=u.apply(Wa,ja)}function on(Rr){var ja=Rr-Se;return Se===le||ja>=m||ja<0||nt&&Rr-$e>=Z}function Qn(){var Rr=kd();if(on(Rr))return mi(Rr);me=Mu(Qn,function Nn(Rr){var m1=m-(Rr-Se);return nt?L(m1,Z-(Rr-$e)):m1}(Rr))}function mi(Rr){return me=le,xt&&O?Ht(Rr):(O=W=le,ue)}function Js(){var Rr=kd(),ja=on(Rr);if(O=arguments,W=this,Se=Rr,ja){if(me===le)return function hn(Rr){return $e=Rr,me=Mu(Qn,m),Ke?Ht(Rr):ue}(Se);if(nt)return Ib(me),me=Mu(Qn,m),Ht(Se)}return me===le&&(me=Mu(Qn,m)),ue}return m=ga(m)||0,mr(S)&&(Ke=!!S.leading,Z=(nt="maxWait"in S)?V(ga(S.maxWait)||0,m):Z,xt="trailing"in S?!!S.trailing:xt),Js.cancel=function ko(){me!==le&&Ib(me),$e=0,O=Se=W=me=le},Js.flush=function Oo(){return me===le?ue:mi(kd())},Js}var _C=Xn(function(u,m){return Na(u,1,m)}),wv=Xn(function(u,m,S){return Na(u,ga(m)||0,S)});function Jo(u,m){if("function"!=typeof u||null!=m&&"function"!=typeof m)throw new mo(fi);var S=function(){var O=arguments,W=m?m.apply(this,O):O[0],Z=S.cache;if(Z.has(W))return Z.get(W);var ue=u.apply(this,O);return S.cache=Z.set(W,ue)||Z,ue};return S.cache=new(Jo.Cache||Io),S}function mf(u){if("function"!=typeof u)throw new mo(fi);return function(){var m=arguments;switch(m.length){case 0:return!u.call(this);case 1:return!u.call(this,m[0]);case 2:return!u.call(this,m[0],m[1]);case 3:return!u.call(this,m[0],m[1],m[2])}return!u.apply(this,m)}}Jo.Cache=Io;var yC=Ab(function(u,m){var S=(m=1==m.length&&gn(m[0])?ei(m[0],$s(kt())):ei(ps(m,1),$s(kt()))).length;return Xn(function(O){for(var W=-1,Z=L(O.length,S);++W<Z;)O[W]=m[W].call(this,O[W]);return Ii(u,this,O)})}),Ev=Xn(function(u,m){var S=gc(m,Pl(Ev));return Yc(u,qr,le,m,S)}),Mv=Xn(function(u,m){var S=gc(m,Pl(Mv));return Yc(u,xr,le,m,S)}),Od=Xc(function(u,m){return Yc(u,Ta,le,le,le,m)});function Ga(u,m){return u===m||u!=u&&m!=m}var Ld=tf($p),Gn=tf(function(u,m){return u>=m}),Tu=qc(function(){return arguments}())?qc:function(u){return Er(u)&&Rn.call(u,"callee")&&!l.call(u,"callee")},gn=Fe.isArray,Qc=Mt?$s(Mt):function Ed(u){return Er(u)&&Ks(u)==dc};function Ro(u){return null!=u&&xm(u.length)&&!tl(u)}function Fr(u){return Er(u)&&Ro(u)}var Vl=F||vf,Dv=Lp?$s(Lp):function Md(u){return Er(u)&&Ks(u)==gt};function Iv(u){if(!Er(u))return!1;var m=Ks(u);return m==Uc||m==sd||"string"==typeof u.message&&"string"==typeof u.name&&!Nd(u)}function tl(u){if(!mr(u))return!1;var m=Ks(u);return m==od||m==xp||m==Go||m==cr}function Cx(u){return"number"==typeof u&&u==Ln(u)}function xm(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Kn}function mr(u){var m=typeof u;return null!=u&&("object"==m||"function"==m)}function Er(u){return null!=u&&"object"==typeof u}var Iu=Uh?$s(Uh):function G0(u){return Er(u)&&Os(u)==oo};function IC(u){return"number"==typeof u||Er(u)&&Ks(u)==iu}function Nd(u){if(!Er(u)||Ks(u)!=Ia)return!1;var m=en(u);if(null===m)return!0;var S=Rn.call(m,"constructor")&&m.constructor;return"function"==typeof S&&S instanceof S&&fu.call(S)==fb}var wm=ht?$s(ht):function hM(u){return Er(u)&&Ks(u)==lr},Fv=Gi?$s(Gi):function it(u){return Er(u)&&Os(u)==jo};function Sm(u){return"string"==typeof u||!gn(u)&&Er(u)&&Ks(u)==ru}function Qo(u){return"symbol"==typeof u||Er(u)&&Ks(u)==Eh}var Zs=yi?$s(yi):function TF(u){return Er(u)&&xm(u.length)&&!!qi[Ks(u)]},kC=tf(Eb),OC=tf(function(u,m){return u<=m});function Ax(u){if(!u)return[];if(Ro(u))return Sm(u)?po(u):ks(u);if(v&&u[v])return function Np(xe){for(var ze,Fe=[];!(ze=xe.next()).done;)Fe.push(ze.value);return Fe}(u[v]());var m=Os(u);return(m==oo?Ar:m==jo?zh:Bd)(u)}function Ec(u){return u?(u=ga(u))===$t||u===-$t?(u<0?-1:1)*An:u==u?u:0:0===u?u:0}function Ln(u){var m=Ec(u),S=m%1;return m==m?S?m-S:m:0}function Ix(u){return u?bd(Ln(u),0,In):0}function ga(u){if("number"==typeof u)return u;if(Qo(u))return un;if(mr(u)){var m="function"==typeof u.valueOf?u.valueOf():u;u=mr(m)?m+"":m}if("string"!=typeof u)return 0===u?u:+u;u=u.replace(vi,"");var S=sb.test(u);return S||ab.test(u)?dr(u.slice(2),S?2:8):rb.test(u)?un:+u}function Sn(u){return Ua(u,Qr(u))}function Ti(u){return null==u?"":Xo(u)}var Fx=Eu(function(u,m){if(Fd(m)||Ro(m))Ua(m,gs(m),u);else for(var S in m)Rn.call(m,S)&&_d(u,S,m[S])}),Rx=Eu(function(u,m){Ua(m,Qr(m),u)}),Em=Eu(function(u,m,S,O){Ua(m,Qr(m),u,O)}),Px=Eu(function(u,m,S,O){Ua(m,gs(m),u,O)}),LC=Xc(yd),NC=Xn(function(u,m){u=Dn(u);var S=-1,O=m.length,W=O>2?m[2]:le;for(W&&go(m[0],m[1],W)&&(O=1);++S<O;)for(var Z=m[S],ue=Qr(Z),me=-1,Se=ue.length;++me<Se;){var $e=ue[me],Ke=u[$e];(Ke===le||Ga(Ke,jc[$e])&&!Rn.call(u,$e))&&(u[$e]=Z[$e])}return u}),BC=Xn(function(u){return u.push(le,Qp),Ii(Ux,le,u)});function Nx(u,m,S){var O=null==u?le:Ko(u,m);return O===le?S:O}function Bx(u,m){return null!=u&&zb(u,m,lM)}var UC=CM(function(u,m,S){null!=m&&"function"!=typeof m.toString&&(m=Yt.call(m)),u[m]=S},jv(Po)),Vx=CM(function(u,m,S){null!=m&&"function"!=typeof m.toString&&(m=Yt.call(m)),Rn.call(u,m)?u[m].push(S):u[m]=[S]},kt),$F=Xn(Sd);function gs(u){return Ro(u)?cM(u):Sb(u)}function Qr(u){return Ro(u)?cM(u,!0):function AF(u){if(!mr(u))return function LM(u){var m=[];if(null!=u)for(var S in Dn(u))m.push(S);return m}(u);var m=Fd(u),S=[];for(var O in u)"constructor"==O&&(m||!Rn.call(u,O))||S.push(O);return S}(u)}var Mm=Eu(function(u,m,S){j0(u,m,S)}),Ux=Eu(function(u,m,S,O){j0(u,m,S,O)}),zx=Xc(function(u,m){var S={};if(null==u)return S;var O=!1;m=ei(m,function(Z){return Z=Ha(Z,u),O||(O=Z.length>1),Z}),Ua(u,Xs(u),S),O&&(S=qo(S,Tn|bl|ve,TM));for(var W=m.length;W--;)Ad(S,m[W]);return S}),jC=Xc(function(u,m){return null==u?{}:function Xh(u,m){return Mb(u,m,function(S,O){return Bx(u,O)})}(u,m)});function Gx(u,m){if(null==u)return{};var S=ei(Xs(u),function(O){return[O]});return m=kt(m),Mb(u,S,function(O,W){return m(O,W[0])})}var Wx=Nb(gs),kv=Nb(Qr);function Bd(u){return null==u?[]:Al(u,gs(u))}var qx=Qh(function(u,m,S){return m=m.toLowerCase(),u+(S?Kx(m):m)});function Kx(u){return Tm(Ti(u).toLowerCase())}function Yx(u){return(u=Ti(u))&&u.replace(cb,fo).replace(Ut,"")}var gf=Qh(function(u,m,S){return u+(S?"-":"")+m.toLowerCase()}),Bv=Qh(function(u,m,S){return u+(S?" ":"")+m.toLowerCase()}),Dm=Zp("toLowerCase"),KC=Qh(function(u,m,S){return u+(S?"_":"")+m.toLowerCase()}),Jx=Qh(function(u,m,S){return u+(S?" ":"")+Tm(m)}),Gv=Qh(function(u,m,S){return u+(S?" ":"")+m.toUpperCase()}),Tm=Zp("toUpperCase");function n1(u,m,S){return u=Ti(u),(m=S?le:m)===le?function Ao(xe){return k0.test(xe)}(u)?function jh(xe){return xe.match(R0)||[]}(u):function On(xe){return xe.match(nb)||[]}(u):u.match(m)||[]}var r1=Xn(function(u,m){try{return Ii(u,le,m)}catch(S){return Iv(S)?S:new Cn(S)}}),e2=Xc(function(u,m){return Yr(m,function(S){S=za(S),La(u,S,_m(u[S],u))}),u});function jv(u){return function(){return u}}var n2=MM(),r2=MM(!0);function Po(u){return u}function $v(u){return fM("function"==typeof u?u:qo(u,Tn))}var qv=Xn(function(u,m){return function(S){return Sd(S,u,m)}}),o2=Xn(function(u,m){return function(S){return Sd(u,S,m)}});function Kv(u,m,S){var O=gs(m),W=bu(m,O);null==S&&(!mr(m)||!W.length&&O.length)&&(S=m,m=u,u=this,W=bu(m,gs(m)));var Z=!(mr(S)&&"chain"in S&&!S.chain),ue=tl(u);return Yr(W,function(me){var Se=m[me];u[me]=Se,ue&&(u.prototype[me]=function(){var $e=this.__chain__;if(Z||$e){var Ke=u(this.__wrapped__);return(Ke.__actions__=ks(this.__actions__)).push({func:Se,args:arguments,thisArg:u}),Ke.__chain__=$e,Ke}return Se.apply(u,Ws([this.value()],arguments))})}),u}function Yv(){}var c2=Q0(ei),Xv=Q0(Or),l2=Q0(Yi);function a1(u){return af(u)?mc(za(u)):function fa(u){return function(m){return Ko(m,u)}}(u)}var Zv=tv(),Im=tv(!0);function c1(){return[]}function vf(){return!1}var il=J0(function(u,m){return u+m},0),Fm=Ys("ceil"),Rm=J0(function(u,m){return u/m},1),_f=Ys("floor"),f2=J0(function(u,m){return u*m},1),ZF=Ys("round"),p2=J0(function(u,m){return u-m},0);return Y.after=function vC(u,m){if("function"!=typeof m)throw new mo(fi);return u=Ln(u),function(){if(--u<1)return m.apply(this,arguments)}},Y.ary=vm,Y.assign=Fx,Y.assignIn=Rx,Y.assignInWith=Em,Y.assignWith=Px,Y.at=LC,Y.before=xv,Y.bind=_m,Y.bindAll=e2,Y.bindKey=Bl,Y.castArray=function Ex(){if(!arguments.length)return[];var u=arguments[0];return gn(u)?u:[u]},Y.chain=pm,Y.chunk=function sm(u,m,S){m=(S?go(u,m,S):m===le)?1:V(Ln(m),0);var O=null==u?0:u.length;if(!O||m<1)return[];for(var W=0,Z=0,ue=Fe(k(O/m));W<O;)ue[Z++]=Yo(u,W,W+=m);return ue},Y.compact=function HM(u){for(var m=-1,S=null==u?0:u.length,O=0,W=[];++m<S;){var Z=u[m];Z&&(W[O++]=Z)}return W},Y.concat=function Kb(){var u=arguments.length;if(!u)return[];for(var m=Fe(u-1),S=arguments[0],O=u;O--;)m[O-1]=arguments[O];return Ws(gn(S)?ks(S):[S],ps(m,1))},Y.cond=function s1(u){var m=null==u?0:u.length,S=kt();return u=m?ei(u,function(O){if("function"!=typeof O[1])throw new mo(fi);return[S(O[0]),O[1]]}):[],Xn(function(O){for(var W=-1;++W<m;){var Z=u[W];if(Ii(Z[0],this,O))return Ii(Z[1],this,O)}})},Y.conforms=function t2(u){return function vb(u){var m=gs(u);return function(S){return _b(S,u,m)}}(qo(u,Tn))},Y.constant=jv,Y.countBy=hx,Y.create=function kx(u,m){var S=ci(u);return null==m?S:gb(S,m)},Y.curry=function Sx(u,m,S){var O=Yc(u,us,le,le,le,le,le,m=S?le:m);return O.placeholder=Sx.placeholder,O},Y.curryRight=function ym(u,m,S){var O=Yc(u,Ds,le,le,le,le,le,m=S?le:m);return O.placeholder=ym.placeholder,O},Y.debounce=pf,Y.defaults=NC,Y.defaultsDeep=BC,Y.defer=_C,Y.delay=wv,Y.difference=Yb,Y.differenceBy=Xb,Y.differenceWith=dv,Y.drop=function Zb(u,m,S){var O=null==u?0:u.length;return O?Yo(u,(m=S||m===le?1:Ln(m))<0?0:m,O):[]},Y.dropRight=function om(u,m,S){var O=null==u?0:u.length;return O?Yo(u,0,(m=O-(m=S||m===le?1:Ln(m)))<0?0:m):[]},Y.dropRightWhile=function am(u,m){return u&&u.length?pa(u,kt(m,3),!0,!0):[]},Y.dropWhile=function Jb(u,m){return u&&u.length?pa(u,kt(m,3),!0):[]},Y.fill=function hv(u,m,S,O){var W=null==u?0:u.length;return W?(S&&"number"!=typeof S&&go(u,m,S)&&(S=0,O=W),function H0(u,m,S,O){var W=u.length;for((S=Ln(S))<0&&(S=-S>W?0:W+S),(O=O===le||O>W?W:Ln(O))<0&&(O+=W),O=S>O?0:Ix(O);S<O;)u[S++]=m;return u}(u,m,S,O)):[]},Y.filter=function dC(u,m){return(gn(u)?bt:bb)(u,kt(m,3))},Y.flatMap=function fC(u,m){return ps(yv(u,m),1)},Y.flatMapDeep=function hf(u,m){return ps(yv(u,m),$t)},Y.flatMapDepth=function fx(u,m,S){return S=S===le?1:Ln(S),ps(yv(u,m),S)},Y.flatten=Rd,Y.flattenDeep=function UM(u){return null!=u&&u.length?ps(u,$t):[]},Y.flattenDepth=function Qb(u,m){return null!=u&&u.length?ps(u,m=m===le?1:Ln(m)):[]},Y.flip=function bm(u){return Yc(u,id)},Y.flow=n2,Y.flowRight=r2,Y.fromPairs=function zM(u){for(var m=-1,S=null==u?0:u.length,O={};++m<S;){var W=u[m];O[W[0]]=W[1]}return O},Y.functions=function Pv(u){return null==u?[]:bu(u,gs(u))},Y.functionsIn=function HC(u){return null==u?[]:bu(u,Qr(u))},Y.groupBy=pC,Y.initial=function tx(u){return null!=u&&u.length?Yo(u,0,-1):[]},Y.intersection=nx,Y.intersectionBy=um,Y.intersectionWith=fv,Y.invert=UC,Y.invertBy=Vx,Y.invokeMap=gx,Y.iteratee=$v,Y.keyBy=VF,Y.keys=gs,Y.keysIn=Qr,Y.map=yv,Y.mapKeys=function zC(u,m){var S={};return m=kt(m,3),Va(u,function(O,W,Z){La(S,m(O,W,Z),O)}),S},Y.mapValues=function Hx(u,m){var S={};return m=kt(m,3),Va(u,function(O,W,Z){La(S,W,m(O,W,Z))}),S},Y.matches=function s2(u){return mM(qo(u,Tn))},Y.matchesProperty=function Mc(u,m){return Cd(u,qo(m,Tn))},Y.memoize=Jo,Y.merge=Mm,Y.mergeWith=Ux,Y.method=qv,Y.methodOf=o2,Y.mixin=Kv,Y.negate=mf,Y.nthArg=function a2(u){return u=Ln(u),Xn(function(m){return Br(m,u)})},Y.omit=zx,Y.omitBy=function GC(u,m){return Gx(u,mf(kt(m)))},Y.once=function Sv(u){return xv(2,u)},Y.orderBy=function ff(u,m,S,O){return null==u?[]:(gn(m)||(m=null==m?[]:[m]),gn(S=O?le:S)||(S=null==S?[]:[S]),qp(u,m,S))},Y.over=c2,Y.overArgs=yC,Y.overEvery=Xv,Y.overSome=l2,Y.partial=Ev,Y.partialRight=Mv,Y.partition=gm,Y.pick=jC,Y.pickBy=Gx,Y.property=a1,Y.propertyOf=function Am(u){return function(m){return null==u?le:Ko(u,m)}},Y.pull=WM,Y.pullAll=dm,Y.pullAllBy=function $M(u,m,S){return u&&u.length&&m&&m.length?Kc(u,m,kt(S,2)):u},Y.pullAllWith=function ix(u,m,S){return u&&u.length&&m&&m.length?Kc(u,m,le,S):u},Y.pullAt=hm,Y.range=Zv,Y.rangeRight=Im,Y.rearg=Od,Y.reject=function yx(u,m){return(gn(u)?bt:bb)(u,mf(kt(m,3)))},Y.remove=function pv(u,m){var S=[];if(!u||!u.length)return S;var O=-1,W=[],Z=u.length;for(m=kt(m,3);++O<Z;){var ue=u[O];m(ue,O,u)&&(S.push(ue),W.push(O))}return W0(u,W),S},Y.rest=function bC(u,m){if("function"!=typeof u)throw new mo(fi);return Xn(u,m=m===le?m:Ln(m))},Y.reverse=fm,Y.sampleSize=function gC(u,m,S){return m=(S?go(u,m,S):m===le)?1:Ln(m),(gn(u)?pb:FF)(u,m)},Y.set=function $C(u,m,S){return null==u?u:Ps(u,m,S)},Y.setWith=function jx(u,m,S,O){return O="function"==typeof O?O:le,null==u?u:Ps(u,m,S,O)},Y.shuffle=function xx(u){return(gn(u)?mb:RF)(u)},Y.slice=function rx(u,m,S){var O=null==u?0:u.length;return O?(S&&"number"!=typeof S&&go(u,m,S)?(m=0,S=O):(m=null==m?0:Ln(m),S=S===le?O:Ln(S)),Yo(u,m,S)):[]},Y.sortBy=HF,Y.sortedUniq=function ZM(u){return u&&u.length?Cb(u):[]},Y.sortedUniqBy=function Zo(u,m){return u&&u.length?Cb(u,kt(m,2)):[]},Y.split=function YC(u,m,S){return S&&"number"!=typeof S&&go(u,m,S)&&(m=S=le),(S=S===le?In:S>>>0)?(u=Ti(u))&&("string"==typeof m||null!=m&&!wm(m))&&!(m=Xo(m))&&la(u)?Rl(po(u),0,S):u.split(m,S):[]},Y.spread=function xC(u,m){if("function"!=typeof u)throw new mo(fi);return m=null==m?0:V(Ln(m),0),Xn(function(S){var O=S[m],W=Rl(S,0,m);return O&&Ws(W,O),Ii(u,this,W)})},Y.tail=function Sc(u){var m=null==u?0:u.length;return m?Yo(u,1,m):[]},Y.take=function JM(u,m,S){return u&&u.length?Yo(u,0,(m=S||m===le?1:Ln(m))<0?0:m):[]},Y.takeRight=function QM(u,m,S){var O=null==u?0:u.length;return O?Yo(u,(m=O-(m=S||m===le?1:Ln(m)))<0?0:m,O):[]},Y.takeRightWhile=function eC(u,m){return u&&u.length?pa(u,kt(m,3),!1,!0):[]},Y.takeWhile=function tC(u,m){return u&&u.length?pa(u,kt(m,3)):[]},Y.tap=function gv(u,m){return m(u),u},Y.throttle=function wC(u,m,S){var O=!0,W=!0;if("function"!=typeof u)throw new mo(fi);return mr(S)&&(O="leading"in S?!!S.leading:O,W="trailing"in S?!!S.trailing:W),pf(u,m,{leading:O,maxWait:m,trailing:W})},Y.thru=vv,Y.toArray=Ax,Y.toPairs=Wx,Y.toPairsIn=kv,Y.toPath=function h1(u){return gn(u)?ei(u,za):Qo(u)?[u]:ks(Ll(Ti(u)))},Y.toPlainObject=Sn,Y.transform=function $x(u,m,S){var O=gn(u),W=O||Vl(u)||Zs(u);if(m=kt(m,4),null==S){var Z=u&&u.constructor;S=W?O?new Z:[]:mr(u)&&tl(Z)?ci(en(u)):{}}return(W?Yr:Va)(u,function(ue,me,Se){return m(S,ue,me,Se)}),S},Y.unary=function Cv(u){return vm(u,1)},Y.union=nC,Y.unionBy=iC,Y.unionWith=ox,Y.uniq=function rC(u){return u&&u.length?wc(u):[]},Y.uniqBy=function sC(u,m){return u&&u.length?wc(u,kt(m,2)):[]},Y.uniqWith=function oC(u,m){return m="function"==typeof m?m:le,u&&u.length?wc(u,le,m):[]},Y.unset=function Ov(u,m){return null==u||Ad(u,m)},Y.unzip=mv,Y.unzipWith=uf,Y.update=function qF(u,m,S){return null==u?u:Jh(u,m,xu(S))},Y.updateWith=function Lv(u,m,S,O){return O="function"==typeof O?O:le,null==u?u:Jh(u,m,xu(S),O)},Y.values=Bd,Y.valuesIn=function KF(u){return null==u?[]:Al(u,Qr(u))},Y.without=Jc,Y.words=n1,Y.wrap=function SC(u,m){return Ev(xu(m),u)},Y.xor=df,Y.xorBy=ax,Y.xorWith=cx,Y.zip=lx,Y.zipObject=function OF(u,m){return Tb(u||[],m||[],_d)},Y.zipObjectDeep=function LF(u,m){return Tb(u||[],m||[],Ps)},Y.zipWith=NF,Y.entries=Wx,Y.entriesIn=kv,Y.extend=Rx,Y.extendWith=Em,Kv(Y,Y),Y.add=il,Y.attempt=r1,Y.camelCase=qx,Y.capitalize=Kx,Y.ceil=Fm,Y.clamp=function ae(u,m,S){return S===le&&(S=m,m=le),S!==le&&(S=(S=ga(S))==S?S:0),m!==le&&(m=(m=ga(m))==m?m:0),bd(ga(u),m,S)},Y.clone=function EC(u){return qo(u,ve)},Y.cloneDeep=function UF(u){return qo(u,Tn|ve)},Y.cloneDeepWith=function MC(u,m){return qo(u,Tn|ve,m="function"==typeof m?m:le)},Y.cloneWith=function Mx(u,m){return qo(u,ve,m="function"==typeof m?m:le)},Y.conformsTo=function Du(u,m){return null==m||_b(u,m,gs(m))},Y.deburr=Yx,Y.defaultTo=function Wv(u,m){return null==u||u!=u?m:u},Y.divide=Rm,Y.endsWith=function Cm(u,m,S){u=Ti(u),m=Xo(m);var O=u.length,W=S=S===le?O:bd(Ln(S),0,O);return(S-=m.length)>=0&&u.slice(S,W)==m},Y.eq=Ga,Y.escape=function Vd(u){return(u=Ti(u))&&Ei.test(u)?u.replace(ad,$o):u},Y.escapeRegExp=function Nv(u){return(u=Ti(u))&&bn.test(u)?u.replace(El,"\\$&"):u},Y.every=function _v(u,m,S){var O=gn(u)?Or:yb;return S&&go(u,m,S)&&(m=le),O(u,kt(m,3))},Y.find=Di,Y.findIndex=cm,Y.findKey=function jF(u,m){return lu(u,kt(m,3),Va)},Y.findLast=hC,Y.findLastIndex=lm,Y.findLastKey=function Ox(u,m){return lu(u,kt(m,3),z0)},Y.floor=_f,Y.forEach=px,Y.forEachRight=mx,Y.forIn=function Lx(u,m){return null==u?u:Wp(u,kt(m,3),Qr)},Y.forInRight=function ms(u,m){return null==u?u:U0(u,kt(m,3),Qr)},Y.forOwn=function VC(u,m){return u&&Va(u,kt(m,3))},Y.forOwnRight=function Rv(u,m){return u&&z0(u,kt(m,3))},Y.get=Nx,Y.gt=Ld,Y.gte=Gn,Y.has=function WF(u,m){return null!=u&&zb(u,m,wd)},Y.hasIn=Bx,Y.head=ex,Y.identity=Po,Y.includes=function mC(u,m,S,O){u=Ro(u)?u:Bd(u),S=S&&!O?Ln(S):0;var W=u.length;return S<0&&(S=V(W+S,0)),Sm(u)?S<=W&&u.indexOf(m,S)>-1:!!W&&aa(u,m,S)>-1},Y.indexOf=function GM(u,m,S){var O=null==u?0:u.length;if(!O)return-1;var W=null==S?0:Ln(S);return W<0&&(W=V(O+W,0)),aa(u,m,W)},Y.inRange=function Hl(u,m,S){return m=Ec(m),S===le?(S=m,m=0):S=Ec(S),function Ir(u,m,S){return u>=L(m,S)&&u<V(m,S)}(u=ga(u),m,S)},Y.invoke=$F,Y.isArguments=Tu,Y.isArray=gn,Y.isArrayBuffer=Qc,Y.isArrayLike=Ro,Y.isArrayLikeObject=Fr,Y.isBoolean=function Au(u){return!0===u||!1===u||Er(u)&&Ks(u)==Ts},Y.isBuffer=Vl,Y.isDate=Dv,Y.isElement=function Tv(u){return Er(u)&&1===u.nodeType&&!Nd(u)},Y.isEmpty=function CC(u){if(null==u)return!0;if(Ro(u)&&(gn(u)||"string"==typeof u||"function"==typeof u.splice||Vl(u)||Zs(u)||Tu(u)))return!u.length;var m=Os(u);if(m==oo||m==jo)return!u.size;if(Fd(u))return!Sb(u).length;for(var S in u)if(Rn.call(u,S))return!1;return!0},Y.isEqual=function Av(u,m){return xc(u,m)},Y.isEqualWith=function el(u,m,S){var O=(S="function"==typeof S?S:le)?S(u,m):le;return O===le?xc(u,m,le,S):!!O},Y.isError=Iv,Y.isFinite=function DC(u){return"number"==typeof u&&C(u)},Y.isFunction=tl,Y.isInteger=Cx,Y.isLength=xm,Y.isMap=Iu,Y.isMatch=function nl(u,m){return u===m||Il(u,m,em(m))},Y.isMatchWith=function TC(u,m,S){return S="function"==typeof S?S:le,Il(u,m,em(m),S)},Y.isNaN=function AC(u){return IC(u)&&u!=+u},Y.isNative=function zF(u){if(av(u))throw new Cn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return dM(u)},Y.isNil=function Dx(u){return null==u},Y.isNull=function GF(u){return null===u},Y.isNumber=IC,Y.isObject=mr,Y.isObjectLike=Er,Y.isPlainObject=Nd,Y.isRegExp=wm,Y.isSafeInteger=function FC(u){return Cx(u)&&u>=-Kn&&u<=Kn},Y.isSet=Fv,Y.isString=Sm,Y.isSymbol=Qo,Y.isTypedArray=Zs,Y.isUndefined=function RC(u){return u===le},Y.isWeakMap=function Tx(u){return Er(u)&&Os(u)==lc},Y.isWeakSet=function PC(u){return Er(u)&&"[object WeakSet]"==Ks(u)},Y.join=function Pd(u,m){return null==u?"":B.call(u,m)},Y.kebabCase=gf,Y.last=ma,Y.lastIndexOf=function jM(u,m,S){var O=null==u?0:u.length;if(!O)return-1;var W=O;return S!==le&&(W=(W=Ln(S))<0?V(O+W,0):L(W,O-1)),m==m?function hb(xe,ze,Fe){for(var Ft=Fe+1;Ft--;)if(xe[Ft]===ze)return Ft;return Ft}(u,m,W):ka(u,Xr,W,!0)},Y.lowerCase=Bv,Y.lowerFirst=Dm,Y.lt=kC,Y.lte=OC,Y.max=function u2(u){return u&&u.length?xd(u,Po,$p):le},Y.maxBy=function f1(u,m){return u&&u.length?xd(u,kt(m,2),$p):le},Y.mean=function p1(u){return Dl(u,Po)},Y.meanBy=function d2(u,m){return Dl(u,kt(m,2))},Y.min=function h2(u){return u&&u.length?xd(u,Po,Eb):le},Y.minBy=function yf(u,m){return u&&u.length?xd(u,kt(m,2),Eb):le},Y.stubArray=c1,Y.stubFalse=vf,Y.stubObject=function XF(){return{}},Y.stubString=function l1(){return""},Y.stubTrue=function u1(){return!0},Y.multiply=f2,Y.nth=function kF(u,m){return u&&u.length?Br(u,Ln(m)):le},Y.noConflict=function o1(){return hr._===this&&(hr._=Wh),this},Y.noop=Yv,Y.now=kd,Y.pad=function Xx(u,m,S){u=Ti(u);var O=(m=Ln(m))?uu(u):0;if(!m||O>=m)return u;var W=(m-O)/2;return ef(U(W),S)+u+ef(k(W),S)},Y.padEnd=function Vv(u,m,S){u=Ti(u);var O=(m=Ln(m))?uu(u):0;return m&&O<m?u+ef(m-O,S):u},Y.padStart=function Hv(u,m,S){u=Ti(u);var O=(m=Ln(m))?uu(u):0;return m&&O<m?ef(m-O,S)+u:u},Y.parseInt=function Uv(u,m,S){return S||null==m?m=0:m&&(m=+m),J(Ti(u).replace(Cp,""),m||0)},Y.random=function qC(u,m,S){if(S&&"boolean"!=typeof S&&go(u,m,S)&&(m=S=le),S===le&&("boolean"==typeof m?(S=m,m=le):"boolean"==typeof u&&(S=u,u=le)),u===le&&m===le?(u=0,m=1):(u=Ec(u),m===le?(m=u,u=0):m=Ec(m)),u>m){var O=u;u=m,m=O}if(S||u%1||m%1){var W=Q();return L(u+W*(m-u+Vh("1e-"+((W+"").length-1))),m)}return Dd(u,m)},Y.reduce=function vx(u,m,S){var O=gn(u)?Lr:ca,W=arguments.length<3;return O(u,kt(m,4),S,W,Ba)},Y.reduceRight=function _x(u,m,S){var O=gn(u)?Cl:ca,W=arguments.length<3;return O(u,kt(m,4),S,W,jp)},Y.repeat=function Zx(u,m,S){return m=(S?go(u,m,S):m===le)?1:Ln(m),$0(Ti(u),m)},Y.replace=function zv(){var u=arguments,m=Ti(u[0]);return u.length<3?m:m.replace(u[1],u[2])},Y.result=function WC(u,m,S){var O=-1,W=(m=Ha(m,u)).length;for(W||(W=1,u=le);++O<W;){var Z=null==u?le:u[za(m[O])];Z===le&&(O=W,Z=S),u=tl(Z)?Z.call(u):Z}return u},Y.round=ZF,Y.runInContext=xe,Y.sample=function bx(u){return(gn(u)?Up:gM)(u)},Y.size=function wx(u){if(null==u)return 0;if(Ro(u))return Sm(u)?uu(u):u.length;var m=Os(u);return m==oo||m==jo?u.size:Sb(u).length},Y.snakeCase=KC,Y.some=function bv(u,m,S){var O=gn(u)?Yi:vM;return S&&go(u,m,S)&&(m=le),O(u,kt(m,3))},Y.sortedIndex=function sx(u,m){return Yp(u,m)},Y.sortedIndexBy=function Cu(u,m,S){return q0(u,m,kt(S,2))},Y.sortedIndexOf=function qM(u,m){var S=null==u?0:u.length;if(S){var O=Yp(u,m);if(O<S&&Ga(u[O],m))return O}return-1},Y.sortedLastIndex=function KM(u,m){return Yp(u,m,!0)},Y.sortedLastIndexBy=function YM(u,m,S){return q0(u,m,kt(S,2),!0)},Y.sortedLastIndexOf=function XM(u,m){if(null!=u&&u.length){var O=Yp(u,m,!0)-1;if(Ga(u[O],m))return O}return-1},Y.startCase=Jx,Y.startsWith=function XC(u,m,S){return u=Ti(u),S=null==S?0:bd(Ln(S),0,u.length),m=Xo(m),u.slice(S,S+m.length)==m},Y.subtract=p2,Y.sum=function m2(u){return u&&u.length?Qt(u,Po):0},Y.sumBy=function g2(u,m){return u&&u.length?Qt(u,kt(m,2)):0},Y.template=function Qx(u,m,S){var O=Y.templateSettings;S&&go(u,m,S)&&(m=le),u=Ti(u),m=Em({},m,O,iv);var me,Se,W=Em({},m.imports,O.imports,iv),Z=gs(W),ue=Al(W,Z),$e=0,Ke=m.interpolate||hc,nt="__p += '",xt=vd((m.escape||hc).source+"|"+Ke.source+"|"+(Ke===cd?ib:hc).source+"|"+(m.evaluate||hc).source+"|$","g"),Ht="//# sourceURL="+(Rn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Do+"]")+"\n";u.replace(xt,function(on,Qn,mi,ko,Oo,Js){return mi||(mi=ko),nt+=u.slice($e,Js).replace(T0,Nr),Qn&&(me=!0,nt+="' +\n__e("+Qn+") +\n'"),Oo&&(Se=!0,nt+="';\n"+Oo+";\n__p += '"),mi&&(nt+="' +\n((__t = ("+mi+")) == null ? '' : __t) +\n'"),$e=Js+on.length,on}),nt+="';\n";var hn=Rn.call(m,"variable")&&m.variable;hn||(nt="with (obj) {\n"+nt+"\n}\n"),nt=(Se?nt.replace(Ep,""):nt).replace(Pi,"$1").replace(Rh,"$1;"),nt="function("+(hn||"obj")+") {\n"+(hn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(me?", __e = _.escape":"")+(Se?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+nt+"return __p\n}";var Nn=r1(function(){return Un(Z,Ht+"return "+nt).apply(le,ue)});if(Nn.source=nt,Iv(Nn))throw Nn;return Nn},Y.times=function d1(u,m){if((u=Ln(u))<1||u>Kn)return[];var S=In,O=L(u,In);m=kt(m),u-=In;for(var W=Tl(O,m);++S<u;)m(S);return W},Y.toFinite=Ec,Y.toInteger=Ln,Y.toLength=Ix,Y.toLower=function e1(u){return Ti(u).toLowerCase()},Y.toNumber=ga,Y.toSafeInteger=function Ge(u){return u?bd(Ln(u),-Kn,Kn):0===u?u:0},Y.toString=Ti,Y.toUpper=function ZC(u){return Ti(u).toUpperCase()},Y.trim=function JC(u,m,S){if((u=Ti(u))&&(S||m===le))return u.replace(vi,"");if(!u||!(m=Xo(m)))return u;var O=po(u),W=po(m);return Rl(O,Yn(O,W),ds(O,W)+1).join("")},Y.trimEnd=function ea(u,m,S){if((u=Ti(u))&&(S||m===le))return u.replace(tb,"");if(!u||!(m=Xo(m)))return u;var O=po(u);return Rl(O,0,ds(O,po(m))+1).join("")},Y.trimStart=function t1(u,m,S){if((u=Ti(u))&&(S||m===le))return u.replace(Cp,"");if(!u||!(m=Xo(m)))return u;var O=po(u);return Rl(O,Yn(O,po(m))).join("")},Y.truncate=function QC(u,m){var S=30,O="...";if(mr(m)){var W="separator"in m?m.separator:W;S="length"in m?Ln(m.length):S,O="omission"in m?Xo(m.omission):O}var Z=(u=Ti(u)).length;if(la(u)){var ue=po(u);Z=ue.length}if(S>=Z)return u;var me=S-uu(O);if(me<1)return O;var Se=ue?Rl(ue,0,me).join(""):u.slice(0,me);if(W===le)return Se+O;if(ue&&(me+=Se.length-me),wm(W)){if(u.slice(me).search(W)){var $e,Ke=Se;for(W.global||(W=vd(W.source,Ti(Fa.exec(W))+"g")),W.lastIndex=0;$e=W.exec(Ke);)var nt=$e.index;Se=Se.slice(0,nt===le?me:nt)}}else if(u.indexOf(Xo(W),me)!=me){var xt=Se.lastIndexOf(W);xt>-1&&(Se=Se.slice(0,xt))}return Se+O},Y.unescape=function YF(u){return(u=Ti(u))&&Mp.test(u)?u.replace(Si,Gh):u},Y.uniqueId=function Jv(u){var m=++pu;return Ti(u)+m},Y.upperCase=Gv,Y.upperFirst=Tm,Y.each=px,Y.eachRight=mx,Y.first=ex,Kv(Y,function(){var u={};return Va(Y,function(m,S){Rn.call(Y.prototype,S)||(u[S]=m)}),u}(),{chain:!1}),Y.VERSION="4.17.19",Yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Y[u].placeholder=Y}),Yr(["drop","take"],function(u,m){sn.prototype[u]=function(S){S=S===le?1:V(Ln(S),0);var O=this.__filtered__&&!m?new sn(this):this.clone();return O.__filtered__?O.__takeCount__=L(S,O.__takeCount__):O.__views__.push({size:L(S,In),type:u+(O.__dir__<0?"Right":"")}),O},sn.prototype[u+"Right"]=function(S){return this.reverse()[u](S).reverse()}}),Yr(["filter","map","takeWhile"],function(u,m){var S=m+1,O=1==S||3==S;sn.prototype[u]=function(W){var Z=this.clone();return Z.__iteratees__.push({iteratee:kt(W,3),type:S}),Z.__filtered__=Z.__filtered__||O,Z}}),Yr(["head","last"],function(u,m){var S="take"+(m?"Right":"");sn.prototype[u]=function(){return this[S](1).value()[0]}}),Yr(["initial","tail"],function(u,m){var S="drop"+(m?"":"Right");sn.prototype[u]=function(){return this.__filtered__?new sn(this):this[S](1)}}),sn.prototype.compact=function(){return this.filter(Po)},sn.prototype.find=function(u){return this.filter(u).head()},sn.prototype.findLast=function(u){return this.reverse().find(u)},sn.prototype.invokeMap=Xn(function(u,m){return"function"==typeof u?new sn(this):this.map(function(S){return Sd(S,u,m)})}),sn.prototype.reject=function(u){return this.filter(mf(kt(u)))},sn.prototype.slice=function(u,m){u=Ln(u);var S=this;return S.__filtered__&&(u>0||m<0)?new sn(S):(u<0?S=S.takeRight(-u):u&&(S=S.drop(u)),m!==le&&(S=(m=Ln(m))<0?S.dropRight(-m):S.take(m-u)),S)},sn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},sn.prototype.toArray=function(){return this.take(In)},Va(sn.prototype,function(u,m){var S=/^(?:filter|find|map|reject)|While$/.test(m),O=/^(?:head|last)$/.test(m),W=Y[O?"take"+("last"==m?"Right":""):m],Z=O||/^find/.test(m);W&&(Y.prototype[m]=function(){var ue=this.__wrapped__,me=O?[1]:arguments,Se=ue instanceof sn,$e=me[0],Ke=Se||gn(ue),nt=function(Qn){var mi=W.apply(Y,Ws([Qn],me));return O&&xt?mi[0]:mi};Ke&&S&&"function"==typeof $e&&1!=$e.length&&(Se=Ke=!1);var xt=this.__chain__,hn=Z&&!xt,Nn=Se&&!this.__actions__.length;if(!Z&&Ke){ue=Nn?ue:new sn(this);var on=u.apply(ue,me);return on.__actions__.push({func:vv,args:[nt],thisArg:le}),new Ci(on,xt)}return hn&&Nn?u.apply(this,me):(on=this.thru(nt),hn?O?on.value()[0]:on.value():on)})}),Yr(["pop","push","shift","sort","splice","unshift"],function(u){var m=vc[u],S=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",O=/^(?:pop|shift)$/.test(u);Y.prototype[u]=function(){var W=arguments;if(O&&!this.__chain__){var Z=this.value();return m.apply(gn(Z)?Z:[],W)}return this[S](function(ue){return m.apply(gn(ue)?ue:[],W)})}}),Va(sn.prototype,function(u,m){var S=Y[m];if(S){var O=S.name+"";Rn.call(be,O)||(be[O]=[]),be[O].push({name:m,func:S})}}),be[Z0(le,Da).name]=[{name:"wrapper",func:le}],sn.prototype.clone=function Jr(){var u=new sn(this.__wrapped__);return u.__actions__=ks(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=ks(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=ks(this.__views__),u},sn.prototype.reverse=function fs(){if(this.__filtered__){var u=new sn(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},sn.prototype.value=function Rs(){var u=this.__wrapped__.value(),m=this.__dir__,S=gn(u),O=m<0,W=S?u.length:0,Z=function FM(u,m,S){for(var O=-1,W=S.length;++O<W;){var Z=S[O],ue=Z.size;switch(Z.type){case"drop":u+=ue;break;case"dropRight":m-=ue;break;case"take":m=L(m,u+ue);break;case"takeRight":u=V(u,m-ue)}}return{start:u,end:m}}(0,W,this.__views__),ue=Z.start,me=Z.end,Se=me-ue,$e=O?me:ue-1,Ke=this.__iteratees__,nt=Ke.length,xt=0,Ht=L(Se,this.__takeCount__);if(!S||!O&&W==Se&&Ht==Se)return K0(u,this.__actions__);var hn=[];e:for(;Se--&&xt<Ht;){for(var Nn=-1,on=u[$e+=m];++Nn<nt;){var Qn=Ke[Nn],ko=Qn.type,Oo=(0,Qn.iteratee)(on);if(2==ko)on=Oo;else if(!Oo){if(1==ko)continue e;break e}}hn[xt++]=on}return hn},Y.prototype.at=BF,Y.prototype.chain=function ux(){return pm(this)},Y.prototype.commit=function aC(){return new Ci(this.value(),this.__chain__)},Y.prototype.next=function cC(){this.__values__===le&&(this.__values__=Ax(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?le:this.__values__[this.__index__++]}},Y.prototype.plant=function uC(u){for(var m,S=this;S instanceof ti;){var O=VM(S);O.__index__=0,O.__values__=le,m?W.__wrapped__=O:m=O;var W=O;S=S.__wrapped__}return W.__wrapped__=u,m},Y.prototype.reverse=function dx(){var u=this.__wrapped__;if(u instanceof sn){var m=u;return this.__actions__.length&&(m=new sn(this)),(m=m.reverse()).__actions__.push({func:vv,args:[fm],thisArg:le}),new Ci(m,this.__chain__)}return this.thru(fm)},Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=function mm(){return K0(this.__wrapped__,this.__actions__)},Y.prototype.first=Y.prototype.head,v&&(Y.prototype[v]=function lC(){return this}),Y}();hr._=du,(Wr=function(){return du}.call(Ma,ut,Ma,Ea))!==le&&(Ea.exports=Wr)}.call(this)}},Ea=>{Ea(Ea.s=3504)}]);