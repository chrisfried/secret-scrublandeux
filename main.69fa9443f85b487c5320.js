(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"1OyB":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},"25BE":function(e,t,n){"use strict";function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},"2QA8":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},"2WcH":function(e,t,n){"use strict";function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},"2fFW":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"3E0/":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("D0XW"),u=n("mlxB"),c=n("7o/Q"),l=n("WMd4");function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a,n=Object(u.a)(e),r=n?+e-t.now():Math.abs(e);return function(e){return e.lift(new f(r,t))}}var f=function(){function e(t,n){Object(a.a)(this,e),this.delay=t,this.scheduler=n}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new d(e,this.delay,this.scheduler))}}]),e}(),d=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i){var o;return Object(a.a)(this,n),(o=t.call(this,e)).delay=r,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return Object(o.a)(n,[{key:"_schedule",value:function(e){this.active=!0,this.destination.add(e.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}},{key:"scheduleNotification",value:function(e){if(!0!==this.errored){var t=this.scheduler,n=new p(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}}},{key:"_next",value:function(e){this.scheduleNotification(l.a.createNext(e))}},{key:"_error",value:function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(l.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var a=Math.max(0,n[0].time-r.now());this.schedule(e,a)}else this.unsubscribe(),t.active=!1}}]),n}(c.a),p=function e(t,n){Object(a.a)(this,e),this.time=t,this.notification=n}},"3N8a":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("LK+K"),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this,e,i)).scheduler=e,a.work=i,a.pending=!1,a}return Object(i.a)(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i){return Object(r.a)(this,n),t.call(this)}return Object(i.a)(n,[{key:"schedule",value:function(e){return this}}]),n}(n("quSY").a))},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"4I5i":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},"5+tZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("lJxs"),u=n("Cfvw"),c=n("zx2A");function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(l((function(n,r){return Object(u.a)(e(n,r)).pipe(Object(s.a)((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new h(e,n))})}var h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;Object(a.a)(this,e),this.project=t,this.concurrent=n}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new f(e,this.project,this.concurrent))}}]),e}(),f=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return Object(a.a)(this,n),(i=t.call(this,e)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return Object(o.a)(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new c.a(this),n=this.destination;n.add(t);var r=Object(c.c)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(c.b)},"7o/Q":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("1OyB"),i=n("vuIU"),a=n("JX7q"),o=n("ReuC"),s=n("foSv"),u=n("Ji7U"),c=n("LK+K"),l=n("n6bG"),h=n("gRHU"),f=n("quSY"),d=n("2QA8"),p=n("2fFW"),v=n("NJ4a"),m=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,o){var s;switch(Object(r.a)(this,n),(s=t.call(this)).syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=h.a;break;case 1:if(!e){s.destination=h.a;break}if("object"==typeof e){e instanceof n?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(Object(a.a)(s))):(s.syncErrorThrowable=!0,s.destination=new g(Object(a.a)(s),e));break}default:s.syncErrorThrowable=!0,s.destination=new g(Object(a.a)(s),e,i,o)}return s}return Object(i.a)(n,[{key:d.a,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,Object(o.a)(Object(s.a)(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var i=new n(e,t,r);return i.syncErrorThrowable=!1,i}}]),n}(f.a),g=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,o,s){var u,c;Object(r.a)(this,n),(u=t.call(this))._parentSubscriber=e;var f=Object(a.a)(u);return Object(l.a)(i)?c=i:i&&(c=i.next,o=i.error,s=i.complete,i!==h.a&&(f=Object.create(i),Object(l.a)(f.unsubscribe)&&u.add(f.unsubscribe.bind(f)),f.unsubscribe=u.unsubscribe.bind(Object(a.a)(u)))),u._context=f,u._next=c,u._error=o,u._complete=s,u}return Object(i.a)(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;p.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=p.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(v.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(v.a)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};p.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),p.a.useDeprecatedSynchronousErrorHandling)throw n;Object(v.a)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!p.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return p.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(v.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(m)},"9ppp":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},BsWD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("a3WO");function i(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},Cfvw:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),a=n("quSY"),o=n("kJWO"),s=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.a]}(e))return function(e,t){return new r.a((function(n){var r=new a.a;return r.add(t.schedule((function(){var i=e[o.a]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Object(c.a)(e))return function(e,t){return new r.a((function(n){var r=new a.a;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Object(l.a)(e))return Object(s.a)(e,t);if(function(e){return e&&"function"==typeof e[u.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,i=new a.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[u.a](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(a){return void n.error(a)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.a?e:new r.a(Object(i.a)(e))}},D0XW:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("3N8a"),i=new(n("IjjT").a)(r.a)},DH7j:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},DSFK:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},EY2u:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("HDdC"),i=new r.a((function(e){return e.complete()}));function a(e){return e?function(e){return new r.a((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},HDdC:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("1OyB"),i=n("vuIU"),a=n("7o/Q"),o=n("2QA8"),s=n("gRHU"),u=n("kJWO"),c=n("SpAZ");function l(e){return 0===e.length?c.a:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var h=n("2fFW"),f=function(){var e=function(){function e(t){Object(r.a)(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return Object(i.a)(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof a.a)return e;if(e[o.a])return e[o.a]()}return e||t||n?new a.a(e,t,n):new a.a(s.a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||h.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),h.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){h.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof a.a?t:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=d(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:u.a,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:l(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=d(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}();return e.create=function(t){return new e(t)},e}();function d(e){if(e||(e=h.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},I55L:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},IjjT:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("1OyB"),i=n("vuIU"),a=n("JX7q"),o=n("ReuC"),s=n("foSv"),u=n("Ji7U"),c=n("LK+K"),l=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;Object(r.a)(this,e),this.SchedulerAction=t,this.now=n}return Object(i.a)(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),h=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.now;return Object(r.a)(this,n),(i=t.call(this,e,(function(){return n.delegate&&n.delegate!==Object(a.a)(i)?n.delegate.now():o()}))).actions=[],i.active=!1,i.scheduled=void 0,i}return Object(i.a)(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):Object(o.a)(Object(s.a)(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(l)},IzEk:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("7o/Q"),u=n("4I5i"),c=n("EY2u");function l(e){return function(t){return 0===e?Object(c.b)():t.lift(new h(e))}}var h=function(){function e(t){if(Object(a.a)(this,e),this.total=t,this.total<0)throw new u.a}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new f(e,this.total))}}]),e}(),f=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return Object(o.a)(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(s.a)},JIr8:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("ReuC"),i=n("foSv"),a=n("Ji7U"),o=n("LK+K"),s=n("1OyB"),u=n("vuIU"),c=n("zx2A");function l(e){return function(t){var n=new h(e),r=t.lift(n);return n.caught=r}}var h=function(){function e(t){Object(s.a)(this,e),this.selector=t}return Object(u.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new f(e,this.selector,this.caught))}}]),e}(),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,r,i){var a;return Object(s.a)(this,n),(a=t.call(this,e)).selector=r,a.caught=i,a}return Object(u.a)(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(s){return void Object(r.a)(Object(i.a)(n.prototype),"error",this).call(this,s)}this._unsubscribeAndRecycle();var a=new c.a(this);this.add(a);var o=Object(c.c)(t,a);o!==a&&this.add(o)}}}]),n}(c.b)},JX7q:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},Ji7U:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("s4An");function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},KQm4:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("a3WO"),i=n("25BE"),a=n("BsWD");function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(i.a)(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},Kj3r:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("7o/Q"),u=n("D0XW");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a;return function(n){return n.lift(new l(e,t))}}var l=function(){function e(t,n){Object(a.a)(this,e),this.dueTime=t,this.scheduler=n}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.dueTime,this.scheduler))}}]),e}(),h=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i){var o;return Object(a.a)(this,n),(o=t.call(this,e)).dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return Object(o.a)(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(f,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(s.a);function f(e){e.debouncedNext()}},"LK+K":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("foSv"),i=n("2WcH"),a=n("md7G");function o(e){var t=Object(i.a)();return function(){var n,i=Object(r.a)(e);if(t){var o=Object(r.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}},LRne:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("z+Ro"),i=n("yCtX"),a=n("jZKg");function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return Object(r.a)(o)?(t.pop(),Object(a.a)(t,o)):Object(i.a)(t)}},LgUO:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractValidationHandler})),__webpack_require__.d(__webpack_exports__,"b",(function(){return OAuthModule})),__webpack_require__.d(__webpack_exports__,"c",(function(){return OAuthService})),__webpack_require__.d(__webpack_exports__,"d",(function(){return OAuthStorage}));var _home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ODXe"),_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("uFwe"),_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Ji7U"),_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("LK+K"),_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("o0o1"),_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__),_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("vuIU"),_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1OyB"),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ofXK"),_angular_common_http__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tk/3"),tslib__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("mrSG"),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("XNiG"),rxjs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("LRne"),rxjs__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Cfvw"),rxjs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("Nv8m"),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("z6cu"),rxjs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("itXk"),rxjs__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("VRyK"),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("vkgz"),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("Kj3r"),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("3E0/"),rxjs_operators__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("SxV6"),rxjs_operators__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("JIr8"),rxjs_operators__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("tS1D"),rxjs_operators__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("5+tZ"),LoginOptions=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.preventClearHashAfterLogin=!1},OAuthLogger=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)},OAuthStorage=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)},MemoryStorage=function(){var e=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.data=new Map}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"getItem",value:function(e){return this.data.get(e)}},{key:"removeItem",value:function(e){this.data.delete(e)}},{key:"setItem",value:function(e,t){this.data.set(e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Gb({token:e,factory:e.\u0275fac}),e}(),ReceivedTokens=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)};function b64DecodeUnicode(e){var t=e.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function base64UrlEncode(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var ValidationHandler=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)},AbstractValidationHandler=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"validateAtHash",value:function(e){return Object(tslib__WEBPACK_IMPORTED_MODULE_10__.a)(this,void 0,void 0,_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function t(){var n,r,i,a,o;return _home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.inferHashAlgorithm(e.idTokenHeader),t.next=3,this.calcHash(e.accessToken,n);case 3:return i=(r=t.sent).substr(0,r.length/2),a=base64UrlEncode(i),o=e.idTokenClaims.at_hash.replace(/=/g,""),a!==o&&(console.error("exptected at_hash: "+a),console.error("actual at_hash: "+o)),t.abrupt("return",a===o);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"inferHashAlgorithm",value:function(e){var t=e.alg;if(!t.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+t);return"sha-"+t.substr(2)}}]),e}(),UrlHelperService=function(){var e=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"getHashFragmentParams",value:function(e){var t=e||window.location.hash;if(0!==(t=decodeURIComponent(t)).indexOf("#"))return{};var n=t.indexOf("?");return t=t.substr(n>-1?n+1:1),this.parseQueryString(t)}},{key:"parseQueryString",value:function(e){var t,n,r,i,a,o,s,u={};if(null===e)return u;t=e.split("&");for(var c=0;c<t.length;c++)-1===(r=(n=t[c]).indexOf("="))?(i=n,a=null):(i=n.substr(0,r),a=n.substr(r+1)),o=decodeURIComponent(i),s=decodeURIComponent(a),"/"===o.substr(0,1)&&(o=o.substr(1)),u[o]=s;return u}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Gb({token:e,factory:e.\u0275fac}),e}(),OAuthEvent=function e(t){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.type=t},OAuthSuccessEvent=function(e){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(n,e);var t=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,n),(r=t.call(this,e)).info=i,r}return n}(OAuthEvent),OAuthInfoEvent=function(e){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(n,e);var t=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,n),(r=t.call(this,e)).info=i,r}return n}(OAuthEvent),OAuthErrorEvent=function(e){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(n,e);var t=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,n),(i=t.call(this,e)).reason=r,i.params=a,i}return n}(OAuthEvent),AuthConfig=function e(t){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.revocationEndpoint=null,this.customTokenParameters=[],this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.openUri=function(e){location.href=e},t&&Object.assign(this,t)},WebHttpUrlEncodingCodec=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"encodeKey",value:function(e){return encodeURIComponent(e)}},{key:"encodeValue",value:function(e){return encodeURIComponent(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}(),ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&__webpack_require__("PDX0"),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,!0).update(n)[e]()}},\u02750=createOutputMethod,createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createOutputMethod(r,e)}return t},\u02751=createMethod,nodeWrap=function nodeWrap(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},\u02752=nodeWrap,createHmacOutputMethod=function(e,t){return function(n,r){return new HmacSha256(n,t,!0).update(r)[e]()}},\u02753=createHmacOutputMethod,createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createHmacOutputMethod(r,e)}return t},\u02754=createHmacMethod;function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var r,i=typeof e;if("string"===i){var a,o=[],s=e.length,u=0;for(r=0;r<s;++r)(a=e.charCodeAt(r))<128?o[u++]=a:a<2048?(o[u++]=192|a>>6,o[u++]=128|63&a):a<55296||a>=57344?(o[u++]=224|a>>12,o[u++]=128|a>>6&63,o[u++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++r)),o[u++]=240|a>>18,o[u++]=128|a>>12&63,o[u++]=128|a>>6&63,o[u++]=128|63&a);e=o}else{if("object"!==i)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var c=[],l=[];for(r=0;r<64;++r){var h=e[r]||0;c[r]=92^h,l[r]=54^h}Sha256.call(this,t,n),this.update(l),this.oKeyPad=c,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var r,i,a=0,o=e.length,s=this.blocks;a<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(i=this.start;a<o&&i<64;++a)s[i>>2]|=e[a]<<SHIFT[3&i++];else for(i=this.start;a<o&&i<64;++a)(r=e.charCodeAt(a))<128?s[i>>2]|=r<<SHIFT[3&i++]:r<2048?(s[i>>2]|=(192|r>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(s[i>>2]|=(224|r>>12)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++a)),s[i>>2]|=(240|r>>18)<<SHIFT[3&i++],s[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=s[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,n,r,i,a,o=this.h0,s=this.h1,u=this.h2,c=this.h3,l=this.h4,h=this.h5,f=this.h6,d=this.h7,p=this.blocks;for(e=16;e<64;++e)p[e]=p[e-16]+(((t=p[e-15])>>>7|t<<25)^(t>>>18|t<<14)^t>>>3)+p[e-7]+(((t=p[e-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)<<0;for(a=s&u,e=0;e<64;e+=4)this.first?(this.is224?(n=300032,d=(t=p[0]-1413257819)-150054599<<0,c=t+24177077<<0):(n=704751109,d=(t=p[0]-210244248)-1521486534<<0,c=t+143694565<<0),this.first=!1):(d=c+(t=d+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&h^~l&f)+K[e]+p[e])<<0,c=t+(((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+((n=o&s)^o&u^a))<<0),f=u+(t=f+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&l^~d&h)+K[e+1]+p[e+1])<<0,u=t+(((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+((r=c&o)^c&s^n))<<0,h=s+(t=h+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&d^~f&l)+K[e+2]+p[e+2])<<0,s=t+(((u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10))+((i=u&c)^u&o^r))<<0,l=o+(t=l+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&f^~h&d)+K[e+3]+p[e+3])<<0,o=t+(((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+((a=s&u)^s&c^i))<<0;this.h0=this.h0+o<<0,this.h1=this.h1+s<<0,this.h2=this.h2+u<<0,this.h3=this.h3+c<<0,this.h4=this.h4+l<<0,this.h5=this.h5+h<<0,this.h6=this.h6+f<<0,this.h7=this.h7+d<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,o=this.h6,s=this.h7,u=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o];return this.is224||(u+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]),u},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,o=this.h6,s=this.h7,u=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||u.push(s>>24&255,s>>16&255,s>>8&255,255&s),u},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0);var HashHandler=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)},DefaultHashHandler=function(){var e=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"calcHash",value:function(e,t){return Object(tslib__WEBPACK_IMPORTED_MODULE_10__.a)(this,void 0,void 0,_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function t(){var n,r;return _home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=exports.array(e),r=this.toHashString2(n),t.abrupt("return",r);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"toHashString2",value:function(e){var t,n="",r=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(e);try{for(r.s();!(t=r.n()).done;)n+=String.fromCharCode(t.value)}catch(err){r.e(err)}finally{r.f()}return n}},{key:"toHashString",value:function(e){var t,n=new Uint8Array(e),r="",i=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(n);try{for(i.s();!(t=i.n()).done;)r+=String.fromCharCode(t.value)}catch(err){i.e(err)}finally{i.f()}return r}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Gb({token:e,factory:e.\u0275fac}),e}(),OAuthService=function(){var e=function(e){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(n,e);var t=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(n);function n(e,r,i,a,o,s,u,c,l){var h,f;Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,n),(h=t.call(this)).ngZone=e,h.http=r,h.config=o,h.urlHelper=s,h.logger=u,h.crypto=c,h.discoveryDocumentLoaded=!1,h.state="",h.eventsSubject=new rxjs__WEBPACK_IMPORTED_MODULE_11__.a,h.discoveryDocumentLoadedSubject=new rxjs__WEBPACK_IMPORTED_MODULE_11__.a,h.grantTypesSupported=[],h.inImplicitFlow=!1,h.saveNoncesInLocalStorage=!1,h.debug("angular-oauth2-oidc v10"),h.document=l,o||(o={}),h.discoveryDocumentLoaded$=h.discoveryDocumentLoadedSubject.asObservable(),h.events=h.eventsSubject.asObservable(),a&&(h.tokenValidationHandler=a),o&&h.configure(o);try{i?h.setStorage(i):"undefined"!=typeof sessionStorage&&h.setStorage(sessionStorage)}catch(p){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",p)}if("undefined"!=typeof window&&void 0!==window.localStorage){var d=null===(f=null===window||void 0===window?void 0:window.navigator)||void 0===f?void 0:f.userAgent;((null==d?void 0:d.includes("MSIE "))||(null==d?void 0:d.includes("Trident")))&&(h.saveNoncesInLocalStorage=!0)}return h.setupRefreshTimer(),h}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(n,[{key:"configure",value:function(e){Object.assign(this,new AuthConfig,e),this.config=Object.assign({},new AuthConfig,e),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}},{key:"configChanged",value:function(){this.setupRefreshTimer()}},{key:"restartSessionChecksIfStillLoggedIn",value:function(){this.hasValidIdToken()&&this.initSessionCheck()}},{key:"restartRefreshTimerIfStillLoggedIn",value:function(){this.setupExpirationTimers()}},{key:"setupSessionCheck",value:function(){var e=this;this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"token_received"===e.type}))).subscribe((function(t){e.initSessionCheck()}))}},{key:"setupAutomaticSilentRefresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!0;this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.a)((function(e){"token_received"===e.type?i=!0:"logout"===e.type&&(i=!1)})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"token_expires"===e.type})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.a)(1e3)).subscribe((function(a){null!=n&&"any"!==n&&a.info!==n||!i||e.refreshInternal(t,r).catch((function(t){e.debug("Automatic silent refresh did not work")}))})),this.restartRefreshTimerIfStillLoggedIn()}},{key:"refreshInternal",value:function(e,t){return this.useSilentRefresh||"code"!==this.responseType?this.silentRefresh(e,t):this.refreshToken()}},{key:"loadDiscoveryDocumentAndTryLogin",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loadDiscoveryDocument().then((function(n){return e.tryLogin(t)}))}},{key:"loadDiscoveryDocumentAndLogin",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.loadDiscoveryDocumentAndTryLogin(t=t||{}).then((function(n){return!(!e.hasValidIdToken()||!e.hasValidAccessToken())||(e.initLoginFlow("string"==typeof t.state?t.state:""),!1)}))}},{key:"debug",value:function(){if(this.showDebugInformation){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug.apply(this.logger,t)}}},{key:"validateUrlFromDiscoveryDocument",value:function(e){var t=[],n=this.validateUrlForHttps(e),r=this.validateUrlAgainstIssuer(e);return n||t.push("https for all urls required. Also for urls received by discovery."),r||t.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),t}},{key:"validateUrlForHttps",value:function(e){if(!e)return!0;var t=e.toLowerCase();return!1===this.requireHttps||!(!t.match(/^http:\/\/localhost($|[:\/])/)&&!t.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps)||t.startsWith("https://")}},{key:"assertUrlNotNullAndCorrectProtocol",value:function(e,t){if(!e)throw new Error("'".concat(t,"' should not be null"));if(!this.validateUrlForHttps(e))throw new Error("'".concat(t,"' must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS)."))}},{key:"validateUrlAgainstIssuer",value:function(e){return!this.strictDiscoveryDocumentValidation||!e||e.toLowerCase().startsWith(this.issuer.toLowerCase())}},{key:"setupRefreshTimer",value:function(){var e=this;"undefined"!=typeof window?((this.hasValidIdToken()||this.hasValidAccessToken())&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.tokenReceivedSubscription&&this.tokenReceivedSubscription.unsubscribe(),this.tokenReceivedSubscription=this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"token_received"===e.type}))).subscribe((function(t){e.clearAccessTokenTimer(),e.clearIdTokenTimer(),e.setupExpirationTimers()}))):this.debug("timer not supported on this plattform")}},{key:"setupExpirationTimers",value:function(){this.hasValidAccessToken()&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&this.setupIdTokenTimer()}},{key:"setupAccessTokenTimer",value:function(){var e=this,t=this.getAccessTokenExpiration(),n=this.getAccessTokenStoredAt(),r=this.calcTimeout(n,t);this.ngZone.runOutsideAngular((function(){e.accessTokenTimeoutSubscription=Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(new OAuthInfoEvent("token_expires","access_token")).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.a)(r)).subscribe((function(t){e.ngZone.run((function(){e.eventsSubject.next(t)}))}))}))}},{key:"setupIdTokenTimer",value:function(){var e=this,t=this.getIdTokenExpiration(),n=this.getIdTokenStoredAt(),r=this.calcTimeout(n,t);this.ngZone.runOutsideAngular((function(){e.idTokenTimeoutSubscription=Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(new OAuthInfoEvent("token_expires","id_token")).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.a)(r)).subscribe((function(t){e.ngZone.run((function(){e.eventsSubject.next(t)}))}))}))}},{key:"stopAutomaticRefresh",value:function(){this.clearAccessTokenTimer(),this.clearIdTokenTimer()}},{key:"clearAccessTokenTimer",value:function(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}},{key:"clearIdTokenTimer",value:function(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}},{key:"calcTimeout",value:function(e,t){var n=Date.now();return Math.max(0,(t-e)*this.timeoutFactor-(n-e))}},{key:"setStorage",value:function(e){this._storage=e,this.configChanged()}},{key:"loadDiscoveryDocument",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){t||((t=e.issuer||"").endsWith("/")||(t+="/"),t+=".well-known/openid-configuration"),e.validateUrlForHttps(t)?e.http.get(t).subscribe((function(t){if(!e.validateDiscoveryDocument(t))return e.eventsSubject.next(new OAuthErrorEvent("discovery_document_validation_error",null)),void r("discovery_document_validation_error");e.loginUrl=t.authorization_endpoint,e.logoutUrl=t.end_session_endpoint||e.logoutUrl,e.grantTypesSupported=t.grant_types_supported,e.issuer=t.issuer,e.tokenEndpoint=t.token_endpoint,e.userinfoEndpoint=t.userinfo_endpoint||e.userinfoEndpoint,e.jwksUri=t.jwks_uri,e.sessionCheckIFrameUrl=t.check_session_iframe||e.sessionCheckIFrameUrl,e.discoveryDocumentLoaded=!0,e.discoveryDocumentLoadedSubject.next(t),e.revocationEndpoint=t.revocation_endpoint,e.sessionChecksEnabled&&e.restartSessionChecksIfStillLoggedIn(),e.loadJwks().then((function(r){var i=new OAuthSuccessEvent("discovery_document_loaded",{discoveryDocument:t,jwks:r});e.eventsSubject.next(i),n(i)})).catch((function(t){e.eventsSubject.next(new OAuthErrorEvent("discovery_document_load_error",t)),r(t)}))}),(function(t){e.logger.error("error loading discovery document",t),e.eventsSubject.next(new OAuthErrorEvent("discovery_document_load_error",t)),r(t)})):r("issuer  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).")}))}},{key:"loadJwks",value:function(){var e=this;return new Promise((function(t,n){e.jwksUri?e.http.get(e.jwksUri).subscribe((function(n){e.jwks=n,e.eventsSubject.next(new OAuthSuccessEvent("discovery_document_loaded")),t(n)}),(function(t){e.logger.error("error loading jwks",t),e.eventsSubject.next(new OAuthErrorEvent("jwks_load_error",t)),n(t)})):t(null)}))}},{key:"validateDiscoveryDocument",value:function(e){var t;return this.skipIssuerCheck||e.issuer===this.issuer?(t=this.validateUrlFromDiscoveryDocument(e.authorization_endpoint)).length>0?(this.logger.error("error validating authorization_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.end_session_endpoint)).length>0?(this.logger.error("error validating end_session_endpoint in discovery document",t),!1):((t=this.validateUrlFromDiscoveryDocument(e.token_endpoint)).length>0&&this.logger.error("error validating token_endpoint in discovery document",t),(t=this.validateUrlFromDiscoveryDocument(e.revocation_endpoint)).length>0&&this.logger.error("error validating revocation_endpoint in discovery document",t),(t=this.validateUrlFromDiscoveryDocument(e.userinfo_endpoint)).length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.jwks_uri)).length>0?(this.logger.error("error validating jwks_uri in discovery document",t),!1):(this.sessionChecksEnabled&&!e.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0)):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+e.issuer),!1)}},{key:"fetchTokenUsingPasswordFlowAndLoadUserProfile",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.d;return this.fetchTokenUsingPasswordFlow(e,t,r).then((function(){return n.loadUserProfile()}))}},{key:"loadUserProfile",value:function(){var e=this;if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return new Promise((function(t,n){var r=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.d).set("Authorization","Bearer "+e.getAccessToken());e.http.get(e.userinfoEndpoint,{headers:r}).subscribe((function(r){e.debug("userinfo received",r);var i=e.getIdentityClaims()||{};e.skipSubjectCheck||!e.oidc||i.sub&&r.sub===i.sub?(r=Object.assign({},i,r),e._storage.setItem("id_token_claims_obj",JSON.stringify(r)),e.eventsSubject.next(new OAuthSuccessEvent("user_profile_loaded")),t(r)):n("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false")}),(function(t){e.logger.error("error loading user info",t),e.eventsSubject.next(new OAuthErrorEvent("user_profile_load_error",t)),n(t)}))}))}},{key:"fetchTokenUsingPasswordFlow",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.d;return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((function(i,a){var o=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.e({encoder:new WebHttpUrlEncodingCodec}).set("grant_type","password").set("scope",n.scope).set("username",e).set("password",t);if(n.useHttpBasicAuth){var s=btoa("".concat(n.clientId,":").concat(n.dummyClientSecret));r=r.set("Authorization","Basic "+s)}if(n.useHttpBasicAuth||(o=o.set("client_id",n.clientId)),!n.useHttpBasicAuth&&n.dummyClientSecret&&(o=o.set("client_secret",n.dummyClientSecret)),n.customQueryParams){var u,c=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(Object.getOwnPropertyNames(n.customQueryParams));try{for(c.s();!(u=c.n()).done;){var l=u.value;o=o.set(l,n.customQueryParams[l])}}catch(err){c.e(err)}finally{c.f()}}r=r.set("Content-Type","application/x-www-form-urlencoded"),n.http.post(n.tokenEndpoint,o,{headers:r}).subscribe((function(e){n.debug("tokenResponse",e),n.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in||n.fallbackAccessTokenExpirationTimeInSec,e.scope,n.extractRecognizedCustomParameters(e)),n.eventsSubject.next(new OAuthSuccessEvent("token_received")),i(e)}),(function(e){n.logger.error("Error performing password flow",e),n.eventsSubject.next(new OAuthErrorEvent("token_error",e)),a(e)}))}))}},{key:"refreshToken",value:function(){var e=this;return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((function(t,n){var r=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.e).set("grant_type","refresh_token").set("scope",e.scope).set("refresh_token",e._storage.getItem("refresh_token")),i=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.d).set("Content-Type","application/x-www-form-urlencoded");if(e.useHttpBasicAuth){var a=btoa("".concat(e.clientId,":").concat(e.dummyClientSecret));i=i.set("Authorization","Basic "+a)}if(e.useHttpBasicAuth||(r=r.set("client_id",e.clientId)),!e.useHttpBasicAuth&&e.dummyClientSecret&&(r=r.set("client_secret",e.dummyClientSecret)),e.customQueryParams){var o,s=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(Object.getOwnPropertyNames(e.customQueryParams));try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.set(u,e.customQueryParams[u])}}catch(err){s.e(err)}finally{s.f()}}e.http.post(e.tokenEndpoint,r,{headers:i}).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.a)((function(t){return t.id_token?Object(rxjs__WEBPACK_IMPORTED_MODULE_13__.a)(e.processIdToken(t.id_token,t.access_token,!0)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.a)((function(t){return e.storeIdToken(t)})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.a)((function(e){return t}))):Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(t)}))).subscribe((function(n){e.debug("refresh tokenResponse",n),e.storeAccessTokenResponse(n.access_token,n.refresh_token,n.expires_in||e.fallbackAccessTokenExpirationTimeInSec,n.scope,e.extractRecognizedCustomParameters(n)),e.eventsSubject.next(new OAuthSuccessEvent("token_received")),e.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),t(n)}),(function(t){e.logger.error("Error refreshing token",t),e.eventsSubject.next(new OAuthErrorEvent("token_refresh_error",t)),n(t)}))}))}},{key:"removeSilentRefreshEventListener",value:function(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}},{key:"setupSilentRefreshEventListener",value:function(){var e=this;this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=function(t){var n=e.processMessageEventMessage(t);e.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0,customRedirectUri:e.silentRefreshRedirectUri||e.redirectUri}).catch((function(t){return e.debug("tryLogin during silent refresh failed",t)}))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}},{key:"silentRefresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(t.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(void 0===this.document)throw new Error("silent refresh is not supported on this platform");var i=this.document.getElementById(this.silentRefreshIFrameName);i&&this.document.body.removeChild(i),this.silentRefreshSubject=r.sub;var a=this.document.createElement("iframe");a.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener();var o=this.silentRefreshRedirectUri||this.redirectUri;this.createLoginUrl(null,null,o,n,t).then((function(t){a.setAttribute("src",t),e.silentRefreshShowIFrame||(a.style.display="none"),e.document.body.appendChild(a)}));var s=this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return e instanceof OAuthErrorEvent})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.a)()),u=this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"token_received"===e.type})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.a)()),c=Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(new OAuthErrorEvent("silent_refresh_timeout",null)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.a)(this.silentRefreshTimeout));return Object(rxjs__WEBPACK_IMPORTED_MODULE_14__.a)([s,u,c]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.a)((function(t){if(t instanceof OAuthErrorEvent)throw"silent_refresh_timeout"===t.type||(t=new OAuthErrorEvent("silent_refresh_error",t)),e.eventsSubject.next(t),t;return"token_received"===t.type&&(t=new OAuthSuccessEvent("silently_refreshed"),e.eventsSubject.next(t)),t}))).toPromise()}},{key:"initImplicitFlowInPopup",value:function(e){return this.initLoginFlowInPopup(e)}},{key:"initLoginFlowInPopup",value:function(e){var t=this;return e=e||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then((function(n){return new Promise((function(r,i){var a,o=window.open(n,"_blank",t.calculatePopupFeatures(e));o?a=window.setInterval((function(){o&&!o.closed||(s(),i(new OAuthErrorEvent("popup_closed",{})))}),500):i(new OAuthErrorEvent("popup_blocked",{}));var s=function(){window.clearInterval(a),window.removeEventListener("message",u),null!==o&&o.close(),o=null},u=function(e){var n=t.processMessageEventMessage(e);n&&null!==n?t.tryLogin({customHashFragment:n,preventClearHashAfterLogin:!0,customRedirectUri:t.silentRefreshRedirectUri}).then((function(){s(),r()}),(function(e){s(),i(e)})):console.log("false event firing")};window.addEventListener("message",u)}))}))}},{key:"calculatePopupFeatures",value:function(e){var t=e.height||470,n=e.width||500,r=window.screenLeft+(window.outerWidth-n)/2,i=window.screenTop+(window.outerHeight-t)/2;return"location=no,toolbar=no,width=".concat(n,",height=").concat(t,",top=").concat(i,",left=").concat(r)}},{key:"processMessageEventMessage",value:function(e){var t="#";if(this.silentRefreshMessagePrefix&&(t+=this.silentRefreshMessagePrefix),e&&e.data&&"string"==typeof e.data){var n=e.data;if(n.startsWith(t))return"#"+n.substr(t.length)}}},{key:"canPerformSessionCheck",value:function(){return!!this.sessionChecksEnabled&&(this.sessionCheckIFrameUrl?this.getSessionState()?void 0!==this.document:(console.warn("sessionChecksEnabled is activated but there is no session_state"),!1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),!1))}},{key:"setupSessionCheckEventListener",value:function(){var e=this;this.removeSessionCheckEventListener(),this.sessionCheckEventListener=function(t){var n=t.origin.toLowerCase(),r=e.issuer.toLowerCase();if(e.debug("sessionCheckEventListener"),r.startsWith(n)){switch(t.data){case"unchanged":e.handleSessionUnchanged();break;case"changed":e.ngZone.run((function(){e.handleSessionChange()}));break;case"error":e.ngZone.run((function(){e.handleSessionError()}))}e.debug("got info from session check inframe",t)}else e.debug("sessionCheckEventListener","wrong origin",n,"expected",r,"event",t)},this.ngZone.runOutsideAngular((function(){window.addEventListener("message",e.sessionCheckEventListener)}))}},{key:"handleSessionUnchanged",value:function(){this.debug("session check","session unchanged")}},{key:"handleSessionChange",value:function(){var e=this;this.eventsSubject.next(new OAuthInfoEvent("session_changed")),this.stopSessionCheckTimer(),this.useSilentRefresh||"code"!==this.responseType?this.silentRefreshRedirectUri?(this.silentRefresh().catch((function(t){return e.debug("silent refresh failed after session changed")})),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new OAuthInfoEvent("session_terminated")),this.logOut(!0)):this.refreshToken().then((function(t){e.debug("token refresh after session change worked")})).catch((function(t){e.debug("token refresh did not work after session changed"),e.eventsSubject.next(new OAuthInfoEvent("session_terminated")),e.logOut(!0)}))}},{key:"waitForSilentRefreshAfterSessionChange",value:function(){var e=this;this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"silently_refreshed"===e.type||"silent_refresh_timeout"===e.type||"silent_refresh_error"===e.type})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.a)()).subscribe((function(t){"silently_refreshed"!==t.type&&(e.debug("silent refresh did not work after session changed"),e.eventsSubject.next(new OAuthInfoEvent("session_terminated")),e.logOut(!0))}))}},{key:"handleSessionError",value:function(){this.stopSessionCheckTimer(),this.eventsSubject.next(new OAuthInfoEvent("session_error"))}},{key:"removeSessionCheckEventListener",value:function(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}},{key:"initSessionCheck",value:function(){if(this.canPerformSessionCheck()){var e=this.document.getElementById(this.sessionCheckIFrameName);e&&this.document.body.removeChild(e);var t=this.document.createElement("iframe");t.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),t.setAttribute("src",this.sessionCheckIFrameUrl),t.style.display="none",this.document.body.appendChild(t),this.startSessionCheckTimer()}}},{key:"startSessionCheckTimer",value:function(){var e=this;this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular((function(){e.sessionCheckTimer=setInterval(e.checkSession.bind(e),e.sessionCheckIntervall)}))}},{key:"stopSessionCheckTimer",value:function(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}},{key:"checkSession",value:function(){var e=this.document.getElementById(this.sessionCheckIFrameName);e||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);var t=this.getSessionState();t||this.stopSessionCheckTimer(),e.contentWindow.postMessage(this.clientId+" "+t,this.issuer)}},{key:"createLoginUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Object(tslib__WEBPACK_IMPORTED_MODULE_10__.a)(this,void 0,void 0,_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function a(){var o,s,u,c,l,h,f,d,p,v,m,g,y,b,_,w;return _home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=this,s=n||this.redirectUri,a.next=4,this.createAndSaveNonce();case 4:if(u=a.sent,e=e?u+this.config.nonceStateSeparator+encodeURIComponent(e):u,this.requestAccessToken||this.oidc){a.next=8;break}throw new Error("Either requestAccessToken or oidc or both must be true");case 8:if(this.responseType=this.config.responseType?this.config.responseType:this.oidc&&this.requestAccessToken?"id_token token":this.oidc&&!this.requestAccessToken?"id_token":"token",c=o.loginUrl.indexOf("?")>-1?"&":"?",l=o.scope,this.oidc&&!l.match(/(^|\s)openid($|\s)/)&&(l="openid "+l),h=o.loginUrl+c+"response_type="+encodeURIComponent(o.responseType)+"&client_id="+encodeURIComponent(o.clientId)+"&state="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(s)+"&scope="+encodeURIComponent(l),!this.responseType.includes("code")||this.disablePKCE){a.next=23;break}return a.next=16,this.createChallangeVerifierPairForPKCE();case 16:f=a.sent,d=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(f,2),p=d[0],v=d[1],this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.setItem("PKCE_verifier",v):this._storage.setItem("PKCE_verifier",v),h+="&code_challenge="+p,h+="&code_challenge_method=S256";case 23:for(t&&(h+="&login_hint="+encodeURIComponent(t)),o.resource&&(h+="&resource="+encodeURIComponent(o.resource)),o.oidc&&(h+="&nonce="+encodeURIComponent(u)),r&&(h+="&prompt=none"),m=0,g=Object.keys(i);m<g.length;m++)y=g[m],h+="&"+encodeURIComponent(y)+"="+encodeURIComponent(i[y]);if(this.customQueryParams){b=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(Object.getOwnPropertyNames(this.customQueryParams));try{for(b.s();!(_=b.n()).done;)h+="&"+(w=_.value)+"="+encodeURIComponent(this.customQueryParams[w])}catch(err){b.e(err)}finally{b.f()}}return a.abrupt("return",h);case 30:case"end":return a.stop()}}),a,this)})))}},{key:"initImplicitFlowInternal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!this.inImplicitFlow){if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");var r={},i=null;"string"==typeof n?i=n:"object"==typeof n&&(r=n),this.createLoginUrl(t,i,null,!1,r).then(this.config.openUri).catch((function(t){console.error("Error in initImplicitFlow",t),e.inImplicitFlow=!1}))}}},{key:"initImplicitFlow",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""!==this.loginUrl?this.initImplicitFlowInternal(t,n):this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"discovery_document_loaded"===e.type}))).subscribe((function(r){return e.initImplicitFlowInternal(t,n)}))}},{key:"resetImplicitFlow",value:function(){this.inImplicitFlow=!1}},{key:"callOnTokenReceivedIfExists",value:function(e){if(e.onTokenReceived){var t={idClaims:this.getIdentityClaims(),idToken:this.getIdToken(),accessToken:this.getAccessToken(),state:this.state};e.onTokenReceived(t)}}},{key:"storeAccessTokenResponse",value:function(e,t,n,r,i){var a=this;if(this._storage.setItem("access_token",e),r&&!Array.isArray(r)?this._storage.setItem("granted_scopes",JSON.stringify(r.split("+"))):r&&Array.isArray(r)&&this._storage.setItem("granted_scopes",JSON.stringify(r)),this._storage.setItem("access_token_stored_at",""+Date.now()),n){var o=1e3*n,s=(new Date).getTime()+o;this._storage.setItem("expires_at",""+s)}t&&this._storage.setItem("refresh_token",t),i&&i.forEach((function(e,t){a._storage.setItem(t,e)}))}},{key:"tryLogin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"code"===this.config.responseType?this.tryLoginCodeFlow(e).then((function(e){return!0})):this.tryLoginImplicitFlow(e)}},{key:"parseQueryString",value:function(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):{}}},{key:"tryLoginCodeFlow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(e=e||{}).customHashFragment?e.customHashFragment.substring(1):window.location.search,n=this.getCodePartsFromUrl(t),r=n.code,i=n.state,a=n.session_state;if(!e.preventClearHashAfterLogin){var o=location.href.replace(/[&\?]code=[^&\$]*/,"").replace(/[&\?]scope=[^&\$]*/,"").replace(/[&\?]state=[^&\$]*/,"").replace(/[&\?]session_state=[^&\$]*/,"");history.replaceState(null,window.name,o)}var s=this.parseState(i),u=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(s,2),c=u[0],l=u[1];if(this.state=l,n.error){this.debug("error trying to login"),this.handleLoginError({},n);var h=new OAuthErrorEvent("code_error",{},n);return this.eventsSubject.next(h),Promise.reject(h)}if(!c)return Promise.resolve();var f=this.validateNonce(c);if(!f){var d=new OAuthErrorEvent("invalid_nonce_in_state",null);return this.eventsSubject.next(d),Promise.reject(d)}return this.storeSessionState(a),r?this.getTokenFromCode(r,e).then((function(e){return null})):Promise.resolve()}},{key:"getCodePartsFromUrl",value:function(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):this.urlHelper.getHashFragmentParams()}},{key:"getTokenFromCode",value:function(e,t){var n,r=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.e).set("grant_type","authorization_code").set("code",e).set("redirect_uri",t.customRedirectUri||this.redirectUri);return this.disablePKCE||((n=this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.getItem("PKCE_verifier"):this._storage.getItem("PKCE_verifier"))?r=r.set("code_verifier",n):console.warn("No PKCE verifier found in oauth storage!")),this.fetchAndProcessToken(r)}},{key:"fetchAndProcessToken",value:function(e){var t=this;this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");var n=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.d).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){var r=btoa("".concat(this.clientId,":").concat(this.dummyClientSecret));n=n.set("Authorization","Basic "+r)}return this.useHttpBasicAuth||(e=e.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(e=e.set("client_secret",this.dummyClientSecret)),new Promise((function(r,i){if(t.customQueryParams){var a,o=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(Object.getOwnPropertyNames(t.customQueryParams));try{for(o.s();!(a=o.n()).done;){var s=a.value;e=e.set(s,t.customQueryParams[s])}}catch(err){o.e(err)}finally{o.f()}}t.http.post(t.tokenEndpoint,e,{headers:n}).subscribe((function(e){t.debug("refresh tokenResponse",e),t.storeAccessTokenResponse(e.access_token,e.refresh_token,e.expires_in||t.fallbackAccessTokenExpirationTimeInSec,e.scope,t.extractRecognizedCustomParameters(e)),t.oidc&&e.id_token?t.processIdToken(e.id_token,e.access_token).then((function(n){t.storeIdToken(n),t.eventsSubject.next(new OAuthSuccessEvent("token_received")),t.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),r(e)})).catch((function(e){t.eventsSubject.next(new OAuthErrorEvent("token_validation_error",e)),console.error("Error validating tokens"),console.error(e),i(e)})):(t.eventsSubject.next(new OAuthSuccessEvent("token_received")),t.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),r(e))}),(function(e){console.error("Error getting token",e),t.eventsSubject.next(new OAuthErrorEvent("token_refresh_error",e)),i(e)}))}))}},{key:"tryLoginImplicitFlow",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=(n=n||{}).customHashFragment?this.urlHelper.getHashFragmentParams(n.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",e);var r=e.state,i=this.parseState(r),a=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(i,2),o=a[0],s=a[1];if(this.state=s,e.error){this.debug("error trying to login"),this.handleLoginError(n,e);var u=new OAuthErrorEvent("token_error",{},e);return this.eventsSubject.next(u),Promise.reject(u)}var c=e.access_token,l=e.id_token,h=e.session_state,f=e.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!c)return Promise.resolve(!1);if(this.requestAccessToken&&!n.disableOAuth2StateCheck&&!r)return Promise.resolve(!1);if(this.oidc&&!l)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!h&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!n.disableOAuth2StateCheck){var d=this.validateNonce(o);if(!d){var p=new OAuthErrorEvent("invalid_nonce_in_state",null);return this.eventsSubject.next(p),Promise.reject(p)}}return this.requestAccessToken&&this.storeAccessTokenResponse(c,null,e.expires_in||this.fallbackAccessTokenExpirationTimeInSec,f),this.oidc?this.processIdToken(l,c).then((function(e){return n.validationHandler?n.validationHandler({accessToken:c,idClaims:e.idTokenClaims,idToken:e.idToken,state:r}).then((function(t){return e})):e})).then((function(e){return t.storeIdToken(e),t.storeSessionState(h),t.clearHashAfterLogin&&!n.preventClearHashAfterLogin&&(location.hash=""),t.eventsSubject.next(new OAuthSuccessEvent("token_received")),t.callOnTokenReceivedIfExists(n),t.inImplicitFlow=!1,!0})).catch((function(e){return t.eventsSubject.next(new OAuthErrorEvent("token_validation_error",e)),t.logger.error("Error validating tokens"),t.logger.error(e),Promise.reject(e)})):(this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.clearHashAfterLogin&&!n.preventClearHashAfterLogin&&(location.hash=""),this.callOnTokenReceivedIfExists(n),Promise.resolve(!0))}},{key:"parseState",value:function(e){var t=e,n="";if(e){var r=e.indexOf(this.config.nonceStateSeparator);r>-1&&(t=e.substr(0,r),n=e.substr(r+this.config.nonceStateSeparator.length))}return[t,n]}},{key:"validateNonce",value:function(e){var t;return(t=this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.getItem("nonce"):this._storage.getItem("nonce"))===e||(console.error("Validating access_token failed, wrong state/nonce.",t,e),!1)}},{key:"storeIdToken",value:function(e){this._storage.setItem("id_token",e.idToken),this._storage.setItem("id_token_claims_obj",e.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+e.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+Date.now())}},{key:"storeSessionState",value:function(e){this._storage.setItem("session_state",e)}},{key:"getSessionState",value:function(){return this._storage.getItem("session_state")}},{key:"handleLoginError",value:function(e,t){e.onLoginError&&e.onLoginError(t),this.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&(location.hash="")}},{key:"processIdToken",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.split("."),o=this.padBase64(a[0]),s=b64DecodeUnicode(o),u=JSON.parse(s),c=this.padBase64(a[1]),l=b64DecodeUnicode(c),h=JSON.parse(l);if(n=this.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.getItem("nonce"):this._storage.getItem("nonce"),Array.isArray(h.aud)){if(h.aud.every((function(e){return e!==r.clientId}))){var f="Wrong audience: "+h.aud.join(",");return this.logger.warn(f),Promise.reject(f)}}else if(h.aud!==this.clientId){var d="Wrong audience: "+h.aud;return this.logger.warn(d),Promise.reject(d)}if(!h.sub){var p="No sub claim in id_token";return this.logger.warn(p),Promise.reject(p)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==h.sub){var v="After refreshing, we got an id_token for another user (sub). "+"Expected sub: ".concat(this.silentRefreshSubject,", received sub: ").concat(h.sub);return this.logger.warn(v),Promise.reject(v)}if(!h.iat){var m="No iat claim in id_token";return this.logger.warn(m),Promise.reject(m)}if(!this.skipIssuerCheck&&h.iss!==this.issuer){var g="Wrong issuer: "+h.iss;return this.logger.warn(g),Promise.reject(g)}if(!i&&h.nonce!==n){var y="Wrong nonce: "+h.nonce;return this.logger.warn(y),Promise.reject(y)}if(!this.hasOwnProperty("responseType")||"code"!==this.responseType&&"id_token"!==this.responseType||(this.disableAtHashCheck=!0),!this.disableAtHashCheck&&this.requestAccessToken&&!h.at_hash){var b="An at_hash is needed!";return this.logger.warn(b),Promise.reject(b)}var _=Date.now(),w=1e3*h.iat,x=1e3*h.exp,k=1e3*(this.clockSkewInSec||600);if(w-k>=_||x+k<=_){var S="Token has expired";return console.error(S),console.error({now:_,issuedAtMSec:w,expiresAtMSec:x}),Promise.reject(S)}var E={accessToken:t,idToken:e,jwks:this.jwks,idTokenClaims:h,idTokenHeader:u,loadKeys:function(){return r.loadJwks()}};return this.disableAtHashCheck?this.checkSignature(E).then((function(t){return{idToken:e,idTokenClaims:h,idTokenClaimsJson:l,idTokenHeader:u,idTokenHeaderJson:s,idTokenExpiresAt:x}})):this.checkAtHash(E).then((function(t){return r.disableAtHashCheck||!r.requestAccessToken||t?r.checkSignature(E).then((function(t){var n={idToken:e,idTokenClaims:h,idTokenClaimsJson:l,idTokenHeader:u,idTokenHeaderJson:s,idTokenExpiresAt:x};return r.disableAtHashCheck?n:r.checkAtHash(E).then((function(e){return r.requestAccessToken&&!e?(r.logger.warn("Wrong at_hash"),Promise.reject("Wrong at_hash")):n}))})):(r.logger.warn("Wrong at_hash"),Promise.reject("Wrong at_hash"))}))}},{key:"getIdentityClaims",value:function(){var e=this._storage.getItem("id_token_claims_obj");return e?JSON.parse(e):null}},{key:"getGrantedScopes",value:function(){var e=this._storage.getItem("granted_scopes");return e?JSON.parse(e):null}},{key:"getIdToken",value:function(){return this._storage?this._storage.getItem("id_token"):null}},{key:"padBase64",value:function(e){for(;e.length%4!=0;)e+="=";return e}},{key:"getAccessToken",value:function(){return this._storage?this._storage.getItem("access_token"):null}},{key:"getRefreshToken",value:function(){return this._storage?this._storage.getItem("refresh_token"):null}},{key:"getAccessTokenExpiration",value:function(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}},{key:"getAccessTokenStoredAt",value:function(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}},{key:"getIdTokenStoredAt",value:function(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}},{key:"getIdTokenExpiration",value:function(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}},{key:"hasValidAccessToken",value:function(){if(this.getAccessToken()){var e=this._storage.getItem("expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1}},{key:"hasValidIdToken",value:function(){if(this.getIdToken()){var e=this._storage.getItem("id_token_expires_at"),t=new Date;return!(e&&parseInt(e,10)<t.getTime())}return!1}},{key:"getCustomTokenResponseProperty",value:function(e){return this._storage&&this.config.customTokenParameters&&this.config.customTokenParameters.indexOf(e)>=0&&null!==this._storage.getItem(e)?JSON.parse(this._storage.getItem(e)):null}},{key:"authorizationHeader",value:function(){return"Bearer "+this.getAccessToken()}},{key:"logOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=!1;"boolean"==typeof t&&(r=t,t={});var i=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this.saveNoncesInLocalStorage?(localStorage.removeItem("nonce"),localStorage.removeItem("PKCE_verifier")):(this._storage.removeItem("nonce"),this._storage.removeItem("PKCE_verifier")),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.config.customTokenParameters&&this.config.customTokenParameters.forEach((function(t){return e._storage.removeItem(t)})),this.silentRefreshSubject=null,this.eventsSubject.next(new OAuthInfoEvent("logout")),this.logoutUrl&&!r&&(i||this.postLogoutRedirectUri)){var a;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(this.logoutUrl.indexOf("{{")>-1)a=this.logoutUrl.replace(/\{\{id_token\}\}/,i).replace(/\{\{client_id\}\}/,this.clientId);else{var o=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.e;i&&(o=o.set("id_token_hint",i));var s=this.postLogoutRedirectUri||this.redirectUri;for(var u in s&&(o=o.set("post_logout_redirect_uri",s),n&&(o=o.set("state",n))),t)o=o.set(u,t[u]);a=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+o.toString()}this.config.openUri(a)}}},{key:"createAndSaveNonce",value:function(){var e=this;return this.createNonce().then((function(t){return e.saveNoncesInLocalStorage&&void 0!==window.localStorage?localStorage.setItem("nonce",t):e._storage.setItem("nonce",t),t}))}},{key:"ngOnDestroy",value:function(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.removeSilentRefreshEventListener();var e=this.document.getElementById(this.silentRefreshIFrameName);e&&e.remove(),this.stopSessionCheckTimer(),this.removeSessionCheckEventListener();var t=this.document.getElementById(this.sessionCheckIFrameName);t&&t.remove()}},{key:"createNonce",value:function(){var e=this;return new Promise((function(t){if(e.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=45,i="",a="undefined"==typeof self?null:self.crypto||self.msCrypto;if(a){var o=new Uint8Array(r);a.getRandomValues(o),o.map||(o.map=Array.prototype.map),o=o.map((function(e){return n.charCodeAt(e%n.length)})),i=String.fromCharCode.apply(null,o)}else for(;0<r--;)i+=n[Math.random()*n.length|0];t(base64UrlEncode(i))}))}},{key:"checkAtHash",value:function(e){return Object(tslib__WEBPACK_IMPORTED_MODULE_10__.a)(this,void 0,void 0,_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function t(){return _home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tokenValidationHandler){t.next=3;break}return this.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),t.abrupt("return",!0);case 3:return t.abrupt("return",this.tokenValidationHandler.validateAtHash(e));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"checkSignature",value:function(e){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(e):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}},{key:"initLoginFlow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"code"===this.responseType?this.initCodeFlow(e,t):this.initImplicitFlow(e,t)}},{key:"initCodeFlow",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};""!==this.loginUrl?this.initCodeFlowInternal(t,n):this.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"discovery_document_loaded"===e.type}))).subscribe((function(r){return e.initCodeFlowInternal(t,n)}))}},{key:"initCodeFlowInternal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");this.createLoginUrl(e,"",null,!1,t).then(this.config.openUri).catch((function(e){console.error("Error in initAuthorizationCodeFlow"),console.error(e)}))}},{key:"createChallangeVerifierPairForPKCE",value:function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_10__.a)(this,void 0,void 0,_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(){var t,n;return _home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.crypto){e.next=2;break}throw new Error("PKCE support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");case 2:return e.next=4,this.createNonce();case 4:return t=e.sent,e.next=7,this.crypto.calcHash(t,"sha-256");case 7:return n=base64UrlEncode(e.sent),e.abrupt("return",[n,t]);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"extractRecognizedCustomParameters",value:function(e){var t=new Map;return this.config.customTokenParameters?(this.config.customTokenParameters.forEach((function(n){e[n]&&t.set(n,JSON.stringify(e[n]))})),t):t}},{key:"revokeTokenAndLogout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.revocationEndpoint,i=this.getAccessToken(),a=this.getRefreshToken();if(i){var o=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.e,s=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.d).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){var u=btoa("".concat(this.clientId,":").concat(this.dummyClientSecret));s=s.set("Authorization","Basic "+u)}if(this.useHttpBasicAuth||(o=o.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(o=o.set("client_secret",this.dummyClientSecret)),this.customQueryParams){var c,l=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(Object.getOwnPropertyNames(this.customQueryParams));try{for(l.s();!(c=l.n()).done;){var h=c.value;o=o.set(h,this.customQueryParams[h])}}catch(err){l.e(err)}finally{l.f()}}return new Promise((function(u,c){var l,h;if(i){var f=o.set("token",i).set("token_type_hint","access_token");l=e.http.post(r,f,{headers:s})}else l=Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(null);if(a){var d=o.set("token",a).set("token_type_hint","refresh_token");h=e.http.post(r,d,{headers:s})}else h=Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(null);n&&(l=l.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.a)((function(e){return 0===e.status?Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(null):Object(rxjs__WEBPACK_IMPORTED_MODULE_15__.a)(e)}))),h=h.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.a)((function(e){return 0===e.status?Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(null):Object(rxjs__WEBPACK_IMPORTED_MODULE_15__.a)(e)})))),Object(rxjs__WEBPACK_IMPORTED_MODULE_16__.a)([l,h]).subscribe((function(n){e.logOut(t),u(n),e.logger.info("Token successfully revoked")}),(function(t){e.logger.error("Error revoking token",t),e.eventsSubject.next(new OAuthErrorEvent("token_revoke_error",t)),c(t)}))}))}}}]),n}(AuthConfig);return e.\u0275fac=function(t){return new(t||e)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(_angular_core__WEBPACK_IMPORTED_MODULE_7__.z),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(_angular_common_http__WEBPACK_IMPORTED_MODULE_9__.b),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(OAuthStorage,8),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(ValidationHandler,8),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(AuthConfig,8),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(UrlHelperService),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(OAuthLogger),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(HashHandler,8),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(_angular_common__WEBPACK_IMPORTED_MODULE_8__.d))},e.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Gb({token:e,factory:e.\u0275fac}),e}(),OAuthModuleConfig=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)},OAuthResourceServerConfig=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)},OAuthResourceServerErrorHandler=function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)},OAuthNoopResourceServerErrorHandler=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"handleError",value:function(e){return Object(rxjs__WEBPACK_IMPORTED_MODULE_15__.a)(e)}}]),e}(),DefaultOAuthInterceptor=function(){var e=function(){function e(t,n,r,i){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e),this.authStorage=t,this.oAuthService=n,this.errorHandler=r,this.moduleConfig=i}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"checkUrl",value:function(e){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(e):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find((function(t){return e.startsWith(t)}))}},{key:"intercept",value:function(e,t){var n=this,r=e.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer&&this.checkUrl(r)?this.moduleConfig.resourceServer.sendAccessToken?Object(rxjs__WEBPACK_IMPORTED_MODULE_17__.a)(Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(this.oAuthService.getAccessToken()).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return!!e}))),this.oAuthService.events.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)((function(e){return"token_received"===e.type})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.a)(this.oAuthService.waitForTokenInMsec||0),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.a)((function(e){return Object(rxjs__WEBPACK_IMPORTED_MODULE_12__.a)(null)})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.a)((function(e){return n.oAuthService.getAccessToken()})))).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_28__.a)((function(r){if(r){var i=e.headers.set("Authorization","Bearer "+r);e=e.clone({headers:i})}return t.handle(e).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.a)((function(e){return n.errorHandler.handleError(e)})))}))):t.handle(e).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.a)((function(e){return n.errorHandler.handleError(e)}))):t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(OAuthStorage),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(OAuthService),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(OAuthResourceServerErrorHandler),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Tb(OAuthModuleConfig,8))},e.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Gb({token:e,factory:e.\u0275fac}),e}(),NullValidationHandler=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,[{key:"validateSignature",value:function(e){return Promise.resolve(null)}},{key:"validateAtHash",value:function(e){return Promise.resolve(!0)}}]),e}();function createDefaultLogger(){return console}function createDefaultStorage(){return"undefined"!=typeof sessionStorage?sessionStorage:new MemoryStorage}var OAuthModule=function(){var e=function(){function e(){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,e)}return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__.a)(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NullValidationHandler;return{ngModule:e,providers:[OAuthService,UrlHelperService,{provide:OAuthLogger,useFactory:createDefaultLogger},{provide:OAuthStorage,useFactory:createDefaultStorage},{provide:ValidationHandler,useClass:n},{provide:HashHandler,useClass:DefaultHashHandler},{provide:OAuthResourceServerErrorHandler,useClass:OAuthNoopResourceServerErrorHandler},{provide:OAuthModuleConfig,useValue:t},{provide:_angular_common_http__WEBPACK_IMPORTED_MODULE_9__.a,useClass:DefaultOAuthInterceptor,multi:!0}]}}}]),e}();return e.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Ib({type:e}),e.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Hb({factory:function(t){return new(t||e)},imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_8__.c]]}),e}(),err="PLEASE READ THIS CAREFULLY:\n\nBeginning with angular-oauth2-oidc version 9, the JwksValidationHandler\nhas been moved to an library of its own. If you need it for implementing\nOAuth2/OIDC **implicit flow**, please install it using npm:\n\n  npm i angular-oauth2-oidc-jwks --save\n\nAfter that, you can import it into your application:\n\n  import { JwksValidationHandler } from 'angular-oauth2-oidc-jwks';\n\nPlease note, that this dependency is not needed for the **code flow**,\nwhich is nowadays the **recommented** one for single page applications.\nThis also results in smaller bundle sizes.\n",JwksValidationHandler=function(e){Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(n,e);var t=Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(n);function n(){var e;return Object(_home_runner_work_secret_scrublandeux_secret_scrublandeux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_6__.a)(this,n),e=t.call(this),console.error(err),e}return n}(NullValidationHandler),AUTH_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_7__.q("AUTH_CONFIG")}).call(this,__webpack_require__("3UD+")(module))},Lhse:function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",(function(){return i}));var i=r()},LvDl:function(e,t,n){(function(e){var r;(function(){var i="Expected a function",a="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",u="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",f="[object Function]",d="[object GeneratorFunction]",p="[object Map]",v="[object Number]",m="[object Object]",g="[object RegExp]",y="[object Set]",b="[object String]",_="[object Symbol]",w="[object WeakMap]",x="[object ArrayBuffer]",k="[object DataView]",S="[object Float32Array]",E="[object Float64Array]",O="[object Int8Array]",T="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",M="[object Uint16Array]",j="[object Uint32Array]",P=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,I=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,L=RegExp(D.source),N=RegExp(F.source),B=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,K=RegExp(G.source),q=/^\s+/,X=/\s/,Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Z=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$=/[()=,{}\[\]\/\s]/,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,re=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\d*)$/,ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ce=/($^)/,le=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="["+fe+"]",pe="["+he+"]",ve="\\d+",me="[a-z\\xdf-\\xf6\\xf8-\\xff]",ge="[^\\ud800-\\udfff"+fe+ve+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ye="\\ud83c[\\udffb-\\udfff]",be="[^\\ud800-\\udfff]",_e="(?:\\ud83c[\\udde6-\\uddff]){2}",we="[\\ud800-\\udbff][\\udc00-\\udfff]",xe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ke="(?:"+me+"|"+ge+")",Se="(?:"+xe+"|"+ge+")",Ee="(?:"+pe+"|"+ye+")?",Oe="[\\ufe0e\\ufe0f]?"+Ee+"(?:\\u200d(?:"+[be,_e,we].join("|")+")[\\ufe0e\\ufe0f]?"+Ee+")*",Te="(?:"+["[\\u2700-\\u27bf]",_e,we].join("|")+")"+Oe,Ce="(?:"+[be+pe+"?",pe,_e,we,"[\\ud800-\\udfff]"].join("|")+")",Ae=RegExp("['\u2019]","g"),Me=RegExp(pe,"g"),je=RegExp(ye+"(?="+ye+")|"+Ce+Oe,"g"),Pe=RegExp([xe+"?"+me+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[de,xe,"$"].join("|")+")",Se+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[de,xe+ke,"$"].join("|")+")",xe+"?"+ke+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",xe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ve,Te].join("|"),"g"),Re=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),Ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,De=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,Le={};Le[S]=Le[E]=Le[O]=Le[T]=Le[C]=Le[A]=Le["[object Uint8ClampedArray]"]=Le[M]=Le[j]=!0,Le[s]=Le[u]=Le[x]=Le[c]=Le[k]=Le[l]=Le[h]=Le[f]=Le[p]=Le[v]=Le[m]=Le[g]=Le[y]=Le[b]=Le[w]=!1;var Ne={};Ne[s]=Ne[u]=Ne[x]=Ne[k]=Ne[c]=Ne[l]=Ne[S]=Ne[E]=Ne[O]=Ne[T]=Ne[C]=Ne[p]=Ne[v]=Ne[m]=Ne[g]=Ne[y]=Ne[b]=Ne[_]=Ne[A]=Ne["[object Uint8ClampedArray]"]=Ne[M]=Ne[j]=!0,Ne[h]=Ne[f]=Ne[w]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},He=parseFloat,Ue=parseInt,Ve="object"==typeof global&&global&&global.Object===Object&&global,ze="object"==typeof self&&self&&self.Object===Object&&self,We=Ve||ze||Function("return this")(),Ge=t&&!t.nodeType&&t,Ke=Ge&&"object"==typeof e&&e&&!e.nodeType&&e,qe=Ke&&Ke.exports===Ge,Xe=qe&&Ve.process,Ye=function(){try{return Ke&&Ke.require&&Ke.require("util").types||Xe&&Xe.binding&&Xe.binding("util")}catch(e){}}(),Ze=Ye&&Ye.isArrayBuffer,Je=Ye&&Ye.isDate,Qe=Ye&&Ye.isMap,$e=Ye&&Ye.isRegExp,et=Ye&&Ye.isSet,tt=Ye&&Ye.isTypedArray;function nt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function rt(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function it(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function st(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function ut(e,t){return!(null==e||!e.length)&&yt(e,t,0)>-1}function ct(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function lt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function ht(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ft(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function dt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var vt=xt("length");function mt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function gt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function yt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):gt(e,_t,n)}function bt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function _t(e){return e!=e}function wt(e,t){var n=null==e?0:e.length;return n?Et(e,t)/n:NaN}function xt(e){return function(t){return null==t?void 0:t[e]}}function kt(e){return function(t){return null==e?void 0:e[t]}}function St(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Et(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}function Ot(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Tt(e){return e?e.slice(0,Gt(e)+1).replace(q,""):e}function Ct(e){return function(t){return e(t)}}function At(e,t){return lt(t,(function(t){return e[t]}))}function Mt(e,t){return e.has(t)}function jt(e,t){for(var n=-1,r=e.length;++n<r&&yt(t,e[n],0)>-1;);return n}function Pt(e,t){for(var n=e.length;n--&&yt(t,e[n],0)>-1;);return n}function Rt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var It=kt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Dt=kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ft(e){return"\\"+Be[e]}function Lt(e){return Re.test(e)}function Nt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Bt(e,t){return function(n){return e(t(n))}}function Ht(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function Ut(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Vt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function zt(e){return Lt(e)?function(e){for(var t=je.lastIndex=0;je.test(e);)++t;return t}(e):vt(e)}function Wt(e){return Lt(e)?function(e){return e.match(je)||[]}(e):function(e){return e.split("")}(e)}function Gt(e){for(var t=e.length;t--&&X.test(e.charAt(t)););return t}var Kt=kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),qt=function e(t){var n,r=(t=null==t?We:qt.defaults(We.Object(),t,qt.pick(We,De))).Array,X=t.Date,he=t.Error,fe=t.Function,de=t.Math,pe=t.Object,ve=t.RegExp,me=t.String,ge=t.TypeError,ye=r.prototype,be=pe.prototype,_e=t["__core-js_shared__"],we=fe.prototype.toString,xe=be.hasOwnProperty,ke=0,Se=(n=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ee=be.toString,Oe=we.call(pe),Te=We._,Ce=ve("^"+we.call(xe).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=qe?t.Buffer:void 0,Re=t.Symbol,Be=t.Uint8Array,Ve=je?je.allocUnsafe:void 0,ze=Bt(pe.getPrototypeOf,pe),Ge=pe.create,Ke=be.propertyIsEnumerable,Xe=ye.splice,Ye=Re?Re.isConcatSpreadable:void 0,vt=Re?Re.iterator:void 0,kt=Re?Re.toStringTag:void 0,Xt=function(){try{var e=Qi(pe,"defineProperty");return e({},"",{}),e}catch(t){}}(),Yt=t.clearTimeout!==We.clearTimeout&&t.clearTimeout,Zt=X&&X.now!==We.Date.now&&X.now,Jt=t.setTimeout!==We.setTimeout&&t.setTimeout,Qt=de.ceil,$t=de.floor,en=pe.getOwnPropertySymbols,tn=je?je.isBuffer:void 0,nn=t.isFinite,rn=ye.join,an=Bt(pe.keys,pe),on=de.max,sn=de.min,un=X.now,cn=t.parseInt,ln=de.random,hn=ye.reverse,fn=Qi(t,"DataView"),dn=Qi(t,"Map"),pn=Qi(t,"Promise"),vn=Qi(t,"Set"),mn=Qi(t,"WeakMap"),gn=Qi(pe,"create"),yn=mn&&new mn,bn={},_n=Ta(fn),wn=Ta(dn),xn=Ta(pn),kn=Ta(vn),Sn=Ta(mn),En=Re?Re.prototype:void 0,On=En?En.valueOf:void 0,Tn=En?En.toString:void 0;function Cn(e){if(Go(e)&&!Io(e)&&!(e instanceof Pn)){if(e instanceof jn)return e;if(xe.call(e,"__wrapped__"))return Ca(e)}return new jn(e)}var An=function(){function e(){}return function(t){if(!Wo(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Mn(){}function jn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Pn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Dn;++t<n;)this.add(e[t])}function Ln(e){var t=this.__data__=new In(e);this.size=t.size}function Nn(e,t){var n=Io(e),r=!n&&Ro(e),i=!n&&!r&&No(e),a=!n&&!r&&!i&&$o(e),o=n||r||i||a,s=o?Ot(e.length,me):[],u=s.length;for(var c in e)!t&&!xe.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||aa(c,u))||s.push(c);return s}function Bn(e){var t=e.length;return t?e[Dr(0,t-1)]:void 0}function Hn(e,t){return xa(mi(e),Yn(t,0,e.length))}function Un(e){return xa(mi(e))}function Vn(e,t,n){(void 0!==n&&!Mo(e[t],n)||void 0===n&&!(t in e))&&qn(e,t,n)}function zn(e,t,n){var r=e[t];xe.call(e,t)&&Mo(r,n)&&(void 0!==n||t in e)||qn(e,t,n)}function Wn(e,t){for(var n=e.length;n--;)if(Mo(e[n][0],t))return n;return-1}function Gn(e,t,n,r){return er(e,(function(e,i,a){t(r,e,n(e),a)})),r}function Kn(e,t){return e&&gi(t,ws(t),e)}function qn(e,t,n){"__proto__"==t&&Xt?Xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xn(e,t){for(var n=-1,i=t.length,a=r(i),o=null==e;++n<i;)a[n]=o?void 0:ms(e,t[n]);return a}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Zn(e,t,n,r,i,a){var o,u=1&t,h=2&t,w=4&t;if(n&&(o=i?n(e,r,i,a):n(e)),void 0!==o)return o;if(!Wo(e))return e;var P=Io(e);if(P){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&xe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return mi(e,o)}else{var R=ta(e),I=R==f||R==d;if(No(e))return li(e,u);if(R==m||R==s||I&&!i){if(o=h||I?{}:ra(e),!u)return h?function(e,t){return gi(e,ea(e),t)}(e,function(e,t){return e&&gi(t,xs(t),e)}(o,e)):function(e,t){return gi(e,$i(e),t)}(e,Kn(o,e))}else{if(!Ne[R])return i?e:{};o=function(e,t,n){var r=e.constructor;switch(t){case x:return hi(e);case c:case l:return new r(+e);case k:return function(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case E:case O:case T:case C:case A:case"[object Uint8ClampedArray]":case M:case j:return fi(e,n);case p:return new r;case v:case b:return new r(e);case g:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case y:return new r;case _:return On?pe(On.call(e)):{}}}(e,R,u)}}a||(a=new Ln);var D=a.get(e);if(D)return D;a.set(e,o),Zo(e)?e.forEach((function(r){o.add(Zn(r,t,n,r,e,a))})):Ko(e)&&e.forEach((function(r,i){o.set(i,Zn(r,t,n,i,e,a))}));var F=P?void 0:(w?h?Gi:Wi:h?xs:ws)(e);return it(F||e,(function(r,i){F&&(r=e[i=r]),zn(o,i,Zn(r,t,n,i,e,a))})),o}function Jn(e,t,n){var r=n.length;if(null==e)return!r;for(e=pe(e);r--;){var i=n[r],a=e[i];if(void 0===a&&!(i in e)||!(0,t[i])(a))return!1}return!0}function Qn(e,t,n){if("function"!=typeof e)throw new ge(i);return ya((function(){e.apply(void 0,n)}),t)}function $n(e,t,n,r){var i=-1,a=ut,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=lt(t,Ct(n))),r?(a=ct,o=!1):t.length>=200&&(a=Mt,o=!1,t=new Fn(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h==h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else a(t,h,r)||u.push(l)}return u}Cn.templateSettings={escape:B,evaluate:H,interpolate:U,variable:"",imports:{_:Cn}},(Cn.prototype=Mn.prototype).constructor=Cn,(jn.prototype=An(Mn.prototype)).constructor=jn,(Pn.prototype=An(Mn.prototype)).constructor=Pn,Rn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Rn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Rn.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return xe.call(t,e)?t[e]:void 0},Rn.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:xe.call(t,e)},Rn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},In.prototype.clear=function(){this.__data__=[],this.size=0},In.prototype.delete=function(e){var t=this.__data__,n=Wn(t,e);return!(n<0||(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,0))},In.prototype.get=function(e){var t=this.__data__,n=Wn(t,e);return n<0?void 0:t[n][1]},In.prototype.has=function(e){return Wn(this.__data__,e)>-1},In.prototype.set=function(e,t){var n=this.__data__,r=Wn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Dn.prototype.clear=function(){this.size=0,this.__data__={hash:new Rn,map:new(dn||In),string:new Rn}},Dn.prototype.delete=function(e){var t=Zi(this,e).delete(e);return this.size-=t?1:0,t},Dn.prototype.get=function(e){return Zi(this,e).get(e)},Dn.prototype.has=function(e){return Zi(this,e).has(e)},Dn.prototype.set=function(e,t){var n=Zi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Fn.prototype.add=Fn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Fn.prototype.has=function(e){return this.__data__.has(e)},Ln.prototype.clear=function(){this.__data__=new In,this.size=0},Ln.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ln.prototype.get=function(e){return this.__data__.get(e)},Ln.prototype.has=function(e){return this.__data__.has(e)},Ln.prototype.set=function(e,t){var n=this.__data__;if(n instanceof In){var r=n.__data__;if(!dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Dn(r)}return n.set(e,t),this.size=n.size,this};var er=_i(ur),tr=_i(cr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(null!=o&&(void 0===s?o==o&&!Qo(o):n(o,s)))var s=o,u=a}return u}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ar(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ia),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?ar(s,t-1,n,r,i):ht(i,s):r||(i[i.length]=s)}return i}var or=wi(),sr=wi(!0);function ur(e,t){return e&&or(e,t,ws)}function cr(e,t){return e&&sr(e,t,ws)}function lr(e,t){return st(t,(function(t){return Uo(e[t])}))}function hr(e,t){for(var n=0,r=(t=oi(t,e)).length;null!=e&&n<r;)e=e[Oa(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return Io(e)?r:ht(r,n(e))}function dr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":kt&&kt in pe(e)?function(e){var t=xe.call(e,kt),n=e[kt];try{e[kt]=void 0;var r=!0}catch(a){}var i=Ee.call(e);return r&&(t?e[kt]=n:delete e[kt]),i}(e):function(e){return Ee.call(e)}(e)}function pr(e,t){return e>t}function vr(e,t){return null!=e&&xe.call(e,t)}function mr(e,t){return null!=e&&t in pe(e)}function gr(e,t,n){for(var i=n?ct:ut,a=e[0].length,o=e.length,s=o,u=r(o),c=1/0,l=[];s--;){var h=e[s];s&&t&&(h=lt(h,Ct(t))),c=sn(h.length,c),u[s]=!n&&(t||a>=120&&h.length>=120)?new Fn(s&&h):void 0}h=e[0];var f=-1,d=u[0];e:for(;++f<a&&l.length<c;){var p=h[f],v=t?t(p):p;if(p=n||0!==p?p:0,!(d?Mt(d,v):i(l,v,n))){for(s=o;--s;){var m=u[s];if(!(m?Mt(m,v):i(e[s],v,n)))continue e}d&&d.push(v),l.push(p)}}return l}function yr(e,t,n){var r=null==(e=pa(e,t=oi(t,e)))?e:e[Oa(Ba(t))];return null==r?void 0:nt(r,e,n)}function br(e){return Go(e)&&dr(e)==s}function _r(e,t,n,r,i){return e===t||(null==e||null==t||!Go(e)&&!Go(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var o=Io(e),f=Io(t),d=o?u:ta(e),w=f?u:ta(t),S=(d=d==s?m:d)==m,E=(w=w==s?m:w)==m,O=d==w;if(O&&No(e)){if(!No(t))return!1;o=!0,S=!1}if(O&&!S)return a||(a=new Ln),o||$o(e)?Vi(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!a(new Be(e),new Be(t)));case c:case l:case v:return Mo(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case b:return e==t+"";case p:var s=Nt;case y:if(s||(s=Ut),e.size!=t.size&&!(1&r))return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var f=Vi(s(e),s(t),r,i,a,o);return o.delete(e),f;case _:if(On)return On.call(e)==On.call(t)}return!1}(e,t,d,n,r,i,a);if(!(1&n)){var T=S&&xe.call(e,"__wrapped__"),C=E&&xe.call(t,"__wrapped__");if(T||C){var A=T?e.value():e,M=C?t.value():t;return a||(a=new Ln),i(A,M,n,r,a)}}return!!O&&(a||(a=new Ln),function(e,t,n,r,i,a){var o=1&n,s=Wi(e),u=s.length;if(u!=Wi(t).length&&!o)return!1;for(var c=u;c--;){var l=s[c];if(!(o?l in t:xe.call(t,l)))return!1}var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var d=!0;a.set(e,t),a.set(t,e);for(var p=o;++c<u;){var v=e[l=s[c]],m=t[l];if(r)var g=o?r(m,v,l,t,e,a):r(v,m,l,e,t,a);if(!(void 0===g?v===m||i(v,m,n,r,a):g)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return a.delete(e),a.delete(t),d}(e,t,n,r,i,a))}(e,t,n,r,_r,i))}function wr(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=pe(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var u=(s=n[i])[0],c=e[u],l=s[1];if(o&&s[2]){if(void 0===c&&!(u in e))return!1}else{var h=new Ln;if(r)var f=r(c,l,u,e,t,h);if(!(void 0===f?_r(l,c,3,r,h):f))return!1}}return!0}function xr(e){return!(!Wo(e)||(t=e,Se&&Se in t))&&(Uo(e)?Ce:ae).test(Ta(e));var t}function kr(e){return"function"==typeof e?e:null==e?qs:"object"==typeof e?Io(e)?Cr(e[0],e[1]):Tr(e):nu(e)}function Sr(e){if(!la(e))return an(e);var t=[];for(var n in pe(e))xe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Er(e,t){return e<t}function Or(e,t){var n=-1,i=Fo(e)?r(e.length):[];return er(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Tr(e){var t=Ji(e);return 1==t.length&&t[0][2]?fa(t[0][0],t[0][1]):function(n){return n===e||wr(n,e,t)}}function Cr(e,t){return sa(e)&&ha(t)?fa(Oa(e),t):function(n){var r=ms(n,e);return void 0===r&&r===t?gs(n,e):_r(t,r,3)}}function Ar(e,t,n,r,i){e!==t&&or(t,(function(a,o){if(i||(i=new Ln),Wo(a))!function(e,t,n,r,i,a,o){var s=ma(e,n),u=ma(t,n),c=o.get(u);if(c)Vn(e,n,c);else{var l=a?a(s,u,n+"",e,t,o):void 0,h=void 0===l;if(h){var f=Io(u),d=!f&&No(u),p=!f&&!d&&$o(u);l=u,f||d||p?Io(s)?l=s:Lo(s)?l=mi(s):d?(h=!1,l=li(u,!0)):p?(h=!1,l=fi(u,!0)):l=[]:Xo(u)||Ro(u)?(l=s,Ro(s)?l=ss(s):Wo(s)&&!Uo(s)||(l=ra(u))):h=!1}h&&(o.set(u,l),i(l,u,r,a,o),o.delete(u)),Vn(e,n,l)}}(e,t,o,n,Ar,r,i);else{var s=r?r(ma(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),Vn(e,o,s)}}),xs)}function Mr(e,t){var n=e.length;if(n)return aa(t+=t<0?n:0,n)?e[t]:void 0}function jr(e,t,n){t=t.length?lt(t,(function(e){return Io(e)?function(t){return hr(t,1===e.length?e[0]:e)}:e})):[qs];var r=-1;return t=lt(t,Ct(Yi())),function(e,t){var r=e.length;for(e.sort((function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var u=di(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}));r--;)e[r]=e[r].value;return e}(Or(e,(function(e,n,i){return{criteria:lt(t,(function(t){return t(e)})),index:++r,value:e}})))}function Pr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=hr(e,o);n(s,o)&&Hr(a,oi(o,e),s)}return a}function Rr(e,t,n,r){var i=r?bt:yt,a=-1,o=t.length,s=e;for(e===t&&(t=mi(t)),n&&(s=lt(e,Ct(n)));++a<o;)for(var u=0,c=t[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Xe.call(s,u,1),Xe.call(e,u,1);return e}function Ir(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;aa(i)?Xe.call(e,i,1):Qr(e,i)}}return e}function Dr(e,t){return e+$t(ln()*(t-e+1))}function Fr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=$t(t/2))&&(e+=e)}while(t);return n}function Lr(e,t){return ba(da(e,t,qs),e+"")}function Nr(e){return Bn(Ms(e))}function Br(e,t){var n=Ms(e);return xa(n,Yn(t,0,n.length))}function Hr(e,t,n,r){if(!Wo(e))return e;for(var i=-1,a=(t=oi(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var u=Oa(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=o){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=Wo(l)?l:aa(t[i+1])?[]:{})}zn(s,u,c),s=s[u]}return e}var Ur=yn?function(e,t){return yn.set(e,t),e}:qs,Vr=Xt?function(e,t){return Xt(e,"toString",{configurable:!0,enumerable:!1,value:Ws(t),writable:!0})}:qs;function zr(e){return xa(Ms(e))}function Wr(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function Gr(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Kr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!Qo(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return qr(e,t,qs,n)}function qr(e,t,n,r){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=n(t))!=t,s=null===t,u=Qo(t),c=void 0===t;i<a;){var l=$t((i+a)/2),h=n(e[l]),f=void 0!==h,d=null===h,p=h==h,v=Qo(h);if(o)var m=r||p;else m=c?p&&(r||f):s?p&&f&&(r||!d):u?p&&f&&!d&&(r||!v):!d&&!v&&(r?h<=t:h<t);m?i=l+1:a=l}return sn(a,4294967294)}function Xr(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Mo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Yr(e){return"number"==typeof e?e:Qo(e)?NaN:+e}function Zr(e){if("string"==typeof e)return e;if(Io(e))return lt(e,Zr)+"";if(Qo(e))return Tn?Tn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Jr(e,t,n){var r=-1,i=ut,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=ct;else if(a>=200){var c=t?null:Fi(e);if(c)return Ut(c);o=!1,i=Mt,u=new Fn}else u=t?[]:s;e:for(;++r<a;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,o&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function Qr(e,t){return null==(e=pa(e,t=oi(t,e)))||delete e[Oa(Ba(t))]}function $r(e,t,n,r){return Hr(e,t,n(hr(e,t)),r)}function ei(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Wr(e,r?0:a,r?a+1:i):Wr(e,r?a+1:0,r?i:a)}function ti(e,t){var n=e;return n instanceof Pn&&(n=n.value()),ft(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),n)}function ni(e,t,n){var i=e.length;if(i<2)return i?Jr(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=$n(o[a]||s,e[u],t,n));return Jr(ar(o,1),t,n)}function ri(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;)n(o,e[r],r<a?t[r]:void 0);return o}function ii(e){return Lo(e)?e:[]}function ai(e){return"function"==typeof e?e:qs}function oi(e,t){return Io(e)?e:sa(e,t)?[e]:Ea(us(e))}var si=Lr;function ui(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Wr(e,t,n)}var ci=Yt||function(e){return We.clearTimeout(e)};function li(e,t){if(t)return e.slice();var n=e.length,r=Ve?Ve(n):new e.constructor(n);return e.copy(r),r}function hi(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function fi(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function di(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,a=Qo(e),o=void 0!==t,s=null===t,u=t==t,c=Qo(t);if(!s&&!c&&!a&&e>t||a&&o&&u&&!s&&!c||r&&o&&u||!n&&u||!i)return 1;if(!r&&!a&&!c&&e<t||c&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!u)return-1}return 0}function pi(e,t,n,i){for(var a=-1,o=e.length,s=n.length,u=-1,c=t.length,l=on(o-s,0),h=r(c+l),f=!i;++u<c;)h[u]=t[u];for(;++a<s;)(f||a<o)&&(h[n[a]]=e[a]);for(;l--;)h[u++]=e[a++];return h}function vi(e,t,n,i){for(var a=-1,o=e.length,s=-1,u=n.length,c=-1,l=t.length,h=on(o-u,0),f=r(h+l),d=!i;++a<h;)f[a]=e[a];for(var p=a;++c<l;)f[p+c]=t[c];for(;++s<u;)(d||a<o)&&(f[p+n[s]]=e[a++]);return f}function mi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function gi(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?qn(n,s,u):zn(n,s,u)}return n}function yi(e,t){return function(n,r){var i=Io(n)?rt:Gn,a=t?t():{};return i(n,e,Yi(r,2),a)}}function bi(e){return Lr((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&oa(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=pe(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t}))}function _i(e,t){return function(n,r){if(null==n)return n;if(!Fo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=pe(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function wi(e){return function(t,n,r){for(var i=-1,a=pe(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function xi(e){return function(t){var n=Lt(t=us(t))?Wt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ui(n,1).join(""):t.slice(1);return r[e]()+i}}function ki(e){return function(t){return ft(Us(Rs(t).replace(Ae,"")),e,"")}}function Si(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=An(e.prototype),r=e.apply(n,t);return Wo(r)?r:n}}function Ei(e){return function(t,n,r){var i=pe(t);if(!Fo(t)){var a=Yi(n,3);t=ws(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:void 0}}function Oi(e){return zi((function(t){var n=t.length,r=n,a=jn.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new ge(i);if(a&&!s&&"wrapper"==qi(o))var s=new jn([],!0)}for(r=s?r:n;++r<n;){var u=qi(o=t[r]),c="wrapper"==u?Ki(o):void 0;s=c&&ua(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[qi(c[0])].apply(s,c[3]):1==o.length&&ua(o)?s[u]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Io(r))return s.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Ti(e,t,n,i,a,o,s,u,c,l){var h=128&t,f=1&t,d=2&t,p=24&t,v=512&t,m=d?void 0:Si(e);return function g(){for(var y=arguments.length,b=r(y),_=y;_--;)b[_]=arguments[_];if(p)var w=Xi(g),x=Rt(b,w);if(i&&(b=pi(b,i,a,p)),o&&(b=vi(b,o,s,p)),y-=x,p&&y<l){var k=Ht(b,w);return Ii(e,t,Ti,g.placeholder,n,b,k,u,c,l-y)}var S=f?n:this,E=d?S[e]:e;return y=b.length,u?b=va(b,u):v&&y>1&&b.reverse(),h&&c<y&&(b.length=c),this&&this!==We&&this instanceof g&&(E=m||Si(E)),E.apply(S,b)}}function Ci(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Ai(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=Yr(n),r=Yr(r)),i=e(n,r)}return i}}function Mi(e){return zi((function(t){return t=lt(t,Ct(Yi())),Lr((function(n){var r=this;return e(t,(function(e){return nt(e,r,n)}))}))}))}function ji(e,t){var n=(t=void 0===t?" ":Zr(t)).length;if(n<2)return n?Fr(t,e):t;var r=Fr(t,Qt(e/zt(t)));return Lt(t)?ui(Wt(r),0,e).join(""):r.slice(0,e)}function Pi(e){return function(t,n,i){return i&&"number"!=typeof i&&oa(t,n,i)&&(n=i=void 0),t=rs(t),void 0===n?(n=t,t=0):n=rs(n),function(e,t,n,i){for(var a=-1,o=on(Qt((t-e)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=e,e+=n;return s}(t,n,i=void 0===i?t<n?1:-1:rs(i),e)}}function Ri(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=os(t),n=os(n)),e(t,n)}}function Ii(e,t,n,r,i,a,o,s,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var h=[e,t,i,l?a:void 0,l?o:void 0,l?void 0:a,l?void 0:o,s,u,c],f=n.apply(void 0,h);return ua(e)&&ga(f,h),f.placeholder=r,_a(f,e,t)}function Di(e){var t=de[e];return function(e,n){if(e=os(e),(n=null==n?0:sn(is(n),292))&&nn(e)){var r=(us(e)+"e").split("e");return+((r=(us(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Fi=vn&&1/Ut(new vn([,-0]))[1]==1/0?function(e){return new vn(e)}:Qs;function Li(e){return function(t){var n=ta(t);return n==p?Nt(t):n==y?Vt(t):function(e,t){return lt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ni(e,t,n,o,s,u,c,l){var h=2&t;if(!h&&"function"!=typeof e)throw new ge(i);var f=o?o.length:0;if(f||(t&=-97,o=s=void 0),c=void 0===c?c:on(is(c),0),l=void 0===l?l:is(l),f-=s?s.length:0,64&t){var d=o,p=s;o=s=void 0}var v=h?void 0:Ki(e),m=[e,t,n,o,s,d,p,u,c,l];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r;if(!(i<131||128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n))return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var o=t[3];if(o){var s=e[3];e[3]=s?pi(s,o,t[4]):o,e[4]=s?Ht(e[3],a):t[4]}(o=t[5])&&(e[5]=(s=e[5])?vi(s,o,t[6]):o,e[6]=s?Ht(e[5],a):t[6]),(o=t[7])&&(e[7]=o),128&r&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(m,v),e=m[0],t=m[1],n=m[2],o=m[3],s=m[4],!(l=m[9]=void 0===m[9]?h?0:e.length:on(m[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,n){var i=Si(e);return function a(){for(var o=arguments.length,s=r(o),u=o,c=Xi(a);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:Ht(s,c);if((o-=l.length)<n)return Ii(e,t,Ti,a.placeholder,void 0,s,l,void 0,void 0,n-o);var h=this&&this!==We&&this instanceof a?i:e;return nt(h,this,s)}}(e,t,l):32!=t&&33!=t||s.length?Ti.apply(void 0,m):function(e,t,n,i){var a=1&t,o=Si(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==We&&this instanceof t?o:e;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++s];return nt(f,a?n:this,h)}}(e,t,n,o);else var g=function(e,t,n){var r=1&t,i=Si(e);return function t(){var a=this&&this!==We&&this instanceof t?i:e;return a.apply(r?n:this,arguments)}}(e,t,n);return _a((v?Ur:ga)(g,m),e,t)}function Bi(e,t,n,r){return void 0===e||Mo(e,be[n])&&!xe.call(r,n)?t:e}function Hi(e,t,n,r,i,a){return Wo(e)&&Wo(t)&&(a.set(t,e),Ar(e,t,void 0,Hi,a),a.delete(t)),e}function Ui(e){return Xo(e)?void 0:e}function Vi(e,t,n,r,i,a){var o=1&n,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var h=-1,f=!0,d=2&n?new Fn:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var p=e[h],v=t[h];if(r)var m=o?r(v,p,h,t,e,a):r(p,v,h,e,t,a);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!pt(t,(function(e,t){if(!Mt(d,t)&&(p===e||i(p,e,n,r,a)))return d.push(t)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function zi(e){return ba(da(e,void 0,Ia),e+"")}function Wi(e){return fr(e,ws,$i)}function Gi(e){return fr(e,xs,ea)}var Ki=yn?function(e){return yn.get(e)}:Qs;function qi(e){for(var t=e.name+"",n=bn[t],r=xe.call(bn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function Xi(e){return(xe.call(Cn,"placeholder")?Cn:e).placeholder}function Yi(){var e=Cn.iteratee||Xs;return e=e===Xs?kr:e,arguments.length?e(arguments[0],arguments[1]):e}function Zi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ji(e){for(var t=ws(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ha(i)]}return t}function Qi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return xr(n)?n:void 0}var $i=en?function(e){return null==e?[]:(e=pe(e),st(en(e),(function(t){return Ke.call(e,t)})))}:au,ea=en?function(e){for(var t=[];e;)ht(t,$i(e)),e=ze(e);return t}:au,ta=dr;function na(e,t,n){for(var r=-1,i=(t=oi(t,e)).length,a=!1;++r<i;){var o=Oa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&zo(i)&&aa(o,i)&&(Io(e)||Ro(e))}function ra(e){return"function"!=typeof e.constructor||la(e)?{}:An(ze(e))}function ia(e){return Io(e)||Ro(e)||!!(Ye&&e&&e[Ye])}function aa(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&se.test(e))&&e>-1&&e%1==0&&e<t}function oa(e,t,n){if(!Wo(n))return!1;var r=typeof t;return!!("number"==r?Fo(n)&&aa(t,n.length):"string"==r&&t in n)&&Mo(n[t],e)}function sa(e,t){if(Io(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Qo(e))||z.test(e)||!V.test(e)||null!=t&&e in pe(t)}function ua(e){var t=qi(e),n=Cn[t];if("function"!=typeof n||!(t in Pn.prototype))return!1;if(e===n)return!0;var r=Ki(n);return!!r&&e===r[0]}(fn&&ta(new fn(new ArrayBuffer(1)))!=k||dn&&ta(new dn)!=p||pn&&"[object Promise]"!=ta(pn.resolve())||vn&&ta(new vn)!=y||mn&&ta(new mn)!=w)&&(ta=function(e){var t=dr(e),n=t==m?e.constructor:void 0,r=n?Ta(n):"";if(r)switch(r){case _n:return k;case wn:return p;case xn:return"[object Promise]";case kn:return y;case Sn:return w}return t});var ca=_e?Uo:ou;function la(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||be)}function ha(e){return e==e&&!Wo(e)}function fa(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in pe(n))}}function da(e,t,n){return t=on(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=on(i.length-t,0),s=r(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=r(t+1);++a<t;)u[a]=i[a];return u[t]=n(s),nt(e,this,u)}}function pa(e,t){return t.length<2?e:hr(e,Wr(t,0,-1))}function va(e,t){for(var n=e.length,r=sn(t.length,n),i=mi(e);r--;){var a=t[r];e[r]=aa(a,n)?i[a]:void 0}return e}function ma(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ga=wa(Ur),ya=Jt||function(e,t){return We.setTimeout(e,t)},ba=wa(Vr);function _a(e,t,n){var r=t+"";return ba(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Y,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return it(o,(function(n){var r="_."+n[0];t&n[1]&&!ut(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(Z);return t?t[1].split(J):[]}(r),n)))}function wa(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function xa(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var a=Dr(n,i),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}var ka,Sa,Ea=(ka=So((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,(function(e,n,r,i){t.push(r?i.replace(ee,"$1"):n||e)})),t}),(function(e){return 500===Sa.size&&Sa.clear(),e})),Sa=ka.cache,ka);function Oa(e){if("string"==typeof e||Qo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ta(e){if(null!=e){try{return we.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ca(e){if(e instanceof Pn)return e.clone();var t=new jn(e.__wrapped__,e.__chain__);return t.__actions__=mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Aa=Lr((function(e,t){return Lo(e)?$n(e,ar(t,1,Lo,!0)):[]})),Ma=Lr((function(e,t){var n=Ba(t);return Lo(n)&&(n=void 0),Lo(e)?$n(e,ar(t,1,Lo,!0),Yi(n,2)):[]})),ja=Lr((function(e,t){var n=Ba(t);return Lo(n)&&(n=void 0),Lo(e)?$n(e,ar(t,1,Lo,!0),void 0,n):[]}));function Pa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=on(r+i,0)),gt(e,Yi(t,3),i)}function Ra(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=is(n),i=n<0?on(r+i,0):sn(i,r-1)),gt(e,Yi(t,3),i,!0)}function Ia(e){return null!=e&&e.length?ar(e,1):[]}function Da(e){return e&&e.length?e[0]:void 0}var Fa=Lr((function(e){var t=lt(e,ii);return t.length&&t[0]===e[0]?gr(t):[]})),La=Lr((function(e){var t=Ba(e),n=lt(e,ii);return t===Ba(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gr(n,Yi(t,2)):[]})),Na=Lr((function(e){var t=Ba(e),n=lt(e,ii);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gr(n,void 0,t):[]}));function Ba(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ha=Lr(Ua);function Ua(e,t){return e&&e.length&&t&&t.length?Rr(e,t):e}var Va=zi((function(e,t){var n=null==e?0:e.length,r=Xn(e,t);return Ir(e,lt(t,(function(e){return aa(e,n)?+e:e})).sort(di)),r}));function za(e){return null==e?e:hn.call(e)}var Wa=Lr((function(e){return Jr(ar(e,1,Lo,!0))})),Ga=Lr((function(e){var t=Ba(e);return Lo(t)&&(t=void 0),Jr(ar(e,1,Lo,!0),Yi(t,2))})),Ka=Lr((function(e){var t=Ba(e);return t="function"==typeof t?t:void 0,Jr(ar(e,1,Lo,!0),void 0,t)}));function qa(e){if(!e||!e.length)return[];var t=0;return e=st(e,(function(e){if(Lo(e))return t=on(e.length,t),!0})),Ot(t,(function(t){return lt(e,xt(t))}))}function Xa(e,t){if(!e||!e.length)return[];var n=qa(e);return null==t?n:lt(n,(function(e){return nt(t,void 0,e)}))}var Ya=Lr((function(e,t){return Lo(e)?$n(e,t):[]})),Za=Lr((function(e){return ni(st(e,Lo))})),Ja=Lr((function(e){var t=Ba(e);return Lo(t)&&(t=void 0),ni(st(e,Lo),Yi(t,2))})),Qa=Lr((function(e){var t=Ba(e);return t="function"==typeof t?t:void 0,ni(st(e,Lo),void 0,t)})),$a=Lr(qa),eo=Lr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Xa(e,n)}));function to(e){var t=Cn(e);return t.__chain__=!0,t}function no(e,t){return t(e)}var ro=zi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Xn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Pn&&aa(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:no,args:[i],thisArg:void 0}),new jn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)})),io=yi((function(e,t,n){xe.call(e,n)?++e[n]:qn(e,n,1)})),ao=Ei(Pa),oo=Ei(Ra);function so(e,t){return(Io(e)?it:er)(e,Yi(t,3))}function uo(e,t){return(Io(e)?at:tr)(e,Yi(t,3))}var co=yi((function(e,t,n){xe.call(e,n)?e[n].push(t):qn(e,n,[t])})),lo=Lr((function(e,t,n){var i=-1,a="function"==typeof t,o=Fo(e)?r(e.length):[];return er(e,(function(e){o[++i]=a?nt(t,e,n):yr(e,t,n)})),o})),ho=yi((function(e,t,n){qn(e,n,t)}));function fo(e,t){return(Io(e)?lt:Or)(e,Yi(t,3))}var po=yi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),vo=Lr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&oa(e,t[0],t[1])?t=[]:n>2&&oa(t[0],t[1],t[2])&&(t=[t[0]]),jr(e,ar(t,1),[])})),mo=Zt||function(){return We.Date.now()};function go(e,t,n){return t=n?void 0:t,Ni(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function yo(e,t){var n;if("function"!=typeof t)throw new ge(i);return e=is(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var bo=Lr((function(e,t,n){var r=1;if(n.length){var i=Ht(n,Xi(bo));r|=32}return Ni(e,r,t,n,i)})),_o=Lr((function(e,t,n){var r=3;if(n.length){var i=Ht(n,Xi(_o));r|=32}return Ni(t,r,e,n,i)}));function wo(e,t,n){var r,a,o,s,u,c,l=0,h=!1,f=!1,d=!0;if("function"!=typeof e)throw new ge(i);function p(t){var n=r,i=a;return r=a=void 0,l=t,s=e.apply(i,n)}function v(e){return l=e,u=ya(g,t),h?p(e):s}function m(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-l>=o}function g(){var e=mo();if(m(e))return y(e);u=ya(g,function(e){var n=t-(e-c);return f?sn(n,o-(e-l)):n}(e))}function y(e){return u=void 0,d&&r?p(e):(r=a=void 0,s)}function b(){var e=mo(),n=m(e);if(r=arguments,a=this,c=e,n){if(void 0===u)return v(c);if(f)return ci(u),u=ya(g,t),p(c)}return void 0===u&&(u=ya(g,t)),s}return t=os(t)||0,Wo(n)&&(h=!!n.leading,o=(f="maxWait"in n)?on(os(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==u&&ci(u),l=0,r=c=a=u=void 0},b.flush=function(){return void 0===u?s:y(mo())},b}var xo=Lr((function(e,t){return Qn(e,1,t)})),ko=Lr((function(e,t,n){return Qn(e,os(t)||0,n)}));function So(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ge(i);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(So.Cache||Dn),n}function Eo(e){if("function"!=typeof e)throw new ge(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}So.Cache=Dn;var Oo=si((function(e,t){var n=(t=1==t.length&&Io(t[0])?lt(t[0],Ct(Yi())):lt(ar(t,1),Ct(Yi()))).length;return Lr((function(r){for(var i=-1,a=sn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return nt(e,this,r)}))})),To=Lr((function(e,t){return Ni(e,32,void 0,t,Ht(t,Xi(To)))})),Co=Lr((function(e,t){return Ni(e,64,void 0,t,Ht(t,Xi(Co)))})),Ao=zi((function(e,t){return Ni(e,256,void 0,void 0,void 0,t)}));function Mo(e,t){return e===t||e!=e&&t!=t}var jo=Ri(pr),Po=Ri((function(e,t){return e>=t})),Ro=br(function(){return arguments}())?br:function(e){return Go(e)&&xe.call(e,"callee")&&!Ke.call(e,"callee")},Io=r.isArray,Do=Ze?Ct(Ze):function(e){return Go(e)&&dr(e)==x};function Fo(e){return null!=e&&zo(e.length)&&!Uo(e)}function Lo(e){return Go(e)&&Fo(e)}var No=tn||ou,Bo=Je?Ct(Je):function(e){return Go(e)&&dr(e)==l};function Ho(e){if(!Go(e))return!1;var t=dr(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xo(e)}function Uo(e){if(!Wo(e))return!1;var t=dr(e);return t==f||t==d||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Vo(e){return"number"==typeof e&&e==is(e)}function zo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Wo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Go(e){return null!=e&&"object"==typeof e}var Ko=Qe?Ct(Qe):function(e){return Go(e)&&ta(e)==p};function qo(e){return"number"==typeof e||Go(e)&&dr(e)==v}function Xo(e){if(!Go(e)||dr(e)!=m)return!1;var t=ze(e);if(null===t)return!0;var n=xe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&we.call(n)==Oe}var Yo=$e?Ct($e):function(e){return Go(e)&&dr(e)==g},Zo=et?Ct(et):function(e){return Go(e)&&ta(e)==y};function Jo(e){return"string"==typeof e||!Io(e)&&Go(e)&&dr(e)==b}function Qo(e){return"symbol"==typeof e||Go(e)&&dr(e)==_}var $o=tt?Ct(tt):function(e){return Go(e)&&zo(e.length)&&!!Le[dr(e)]},es=Ri(Er),ts=Ri((function(e,t){return e<=t}));function ns(e){if(!e)return[];if(Fo(e))return Jo(e)?Wt(e):mi(e);if(vt&&e[vt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[vt]());var t=ta(e);return(t==p?Nt:t==y?Ut:Ms)(e)}function rs(e){return e?(e=os(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function is(e){var t=rs(e),n=t%1;return t==t?n?t-n:t:0}function as(e){return e?Yn(is(e),0,4294967295):0}function os(e){if("number"==typeof e)return e;if(Qo(e))return NaN;if(Wo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Tt(e);var n=ie.test(e);return n||oe.test(e)?Ue(e.slice(2),n?2:8):re.test(e)?NaN:+e}function ss(e){return gi(e,xs(e))}function us(e){return null==e?"":Zr(e)}var cs=bi((function(e,t){if(la(t)||Fo(t))gi(t,ws(t),e);else for(var n in t)xe.call(t,n)&&zn(e,n,t[n])})),ls=bi((function(e,t){gi(t,xs(t),e)})),hs=bi((function(e,t,n,r){gi(t,xs(t),e,r)})),fs=bi((function(e,t,n,r){gi(t,ws(t),e,r)})),ds=zi(Xn),ps=Lr((function(e,t){e=pe(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&oa(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],o=xs(a),s=-1,u=o.length;++s<u;){var c=o[s],l=e[c];(void 0===l||Mo(l,be[c])&&!xe.call(e,c))&&(e[c]=a[c])}return e})),vs=Lr((function(e){return e.push(void 0,Hi),nt(Ss,void 0,e)}));function ms(e,t,n){var r=null==e?void 0:hr(e,t);return void 0===r?n:r}function gs(e,t){return null!=e&&na(e,t,mr)}var ys=Ci((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ee.call(t)),e[t]=n}),Ws(qs)),bs=Ci((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ee.call(t)),xe.call(e,t)?e[t].push(n):e[t]=[n]}),Yi),_s=Lr(yr);function ws(e){return Fo(e)?Nn(e):Sr(e)}function xs(e){return Fo(e)?Nn(e,!0):function(e){if(!Wo(e))return function(e){var t=[];if(null!=e)for(var n in pe(e))t.push(n);return t}(e);var t=la(e),n=[];for(var r in e)("constructor"!=r||!t&&xe.call(e,r))&&n.push(r);return n}(e)}var ks=bi((function(e,t,n){Ar(e,t,n)})),Ss=bi((function(e,t,n,r){Ar(e,t,n,r)})),Es=zi((function(e,t){var n={};if(null==e)return n;var r=!1;t=lt(t,(function(t){return t=oi(t,e),r||(r=t.length>1),t})),gi(e,Gi(e),n),r&&(n=Zn(n,7,Ui));for(var i=t.length;i--;)Qr(n,t[i]);return n})),Os=zi((function(e,t){return null==e?{}:function(e,t){return Pr(e,t,(function(t,n){return gs(e,n)}))}(e,t)}));function Ts(e,t){if(null==e)return{};var n=lt(Gi(e),(function(e){return[e]}));return t=Yi(t),Pr(e,n,(function(e,n){return t(e,n[0])}))}var Cs=Li(ws),As=Li(xs);function Ms(e){return null==e?[]:At(e,ws(e))}var js=ki((function(e,t,n){return t=t.toLowerCase(),e+(n?Ps(t):t)}));function Ps(e){return Hs(us(e).toLowerCase())}function Rs(e){return(e=us(e))&&e.replace(ue,It).replace(Me,"")}var Is=ki((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ds=ki((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Fs=xi("toLowerCase"),Ls=ki((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Ns=ki((function(e,t,n){return e+(n?" ":"")+Hs(t)})),Bs=ki((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Hs=xi("toUpperCase");function Us(e,t,n){return e=us(e),void 0===(t=n?void 0:t)?function(e){return Ie.test(e)}(e)?function(e){return e.match(Pe)||[]}(e):function(e){return e.match(Q)||[]}(e):e.match(t)||[]}var Vs=Lr((function(e,t){try{return nt(e,void 0,t)}catch(n){return Ho(n)?n:new he(n)}})),zs=zi((function(e,t){return it(t,(function(t){t=Oa(t),qn(e,t,bo(e[t],e))})),e}));function Ws(e){return function(){return e}}var Gs=Oi(),Ks=Oi(!0);function qs(e){return e}function Xs(e){return kr("function"==typeof e?e:Zn(e,1))}var Ys=Lr((function(e,t){return function(n){return yr(n,e,t)}})),Zs=Lr((function(e,t){return function(n){return yr(e,n,t)}}));function Js(e,t,n){var r=ws(t),i=lr(t,r);null!=n||Wo(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=lr(t,ws(t)));var a=!(Wo(n)&&"chain"in n&&!n.chain),o=Uo(e);return it(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})})),e}function Qs(){}var $s=Mi(lt),eu=Mi(ot),tu=Mi(pt);function nu(e){return sa(e)?xt(Oa(e)):function(e){return function(t){return hr(t,e)}}(e)}var ru=Pi(),iu=Pi(!0);function au(){return[]}function ou(){return!1}var su,uu=Ai((function(e,t){return e+t}),0),cu=Di("ceil"),lu=Ai((function(e,t){return e/t}),1),hu=Di("floor"),fu=Ai((function(e,t){return e*t}),1),du=Di("round"),pu=Ai((function(e,t){return e-t}),0);return Cn.after=function(e,t){if("function"!=typeof t)throw new ge(i);return e=is(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=go,Cn.assign=cs,Cn.assignIn=ls,Cn.assignInWith=hs,Cn.assignWith=fs,Cn.at=ds,Cn.before=yo,Cn.bind=bo,Cn.bindAll=zs,Cn.bindKey=_o,Cn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Io(e)?e:[e]},Cn.chain=to,Cn.chunk=function(e,t,n){t=(n?oa(e,t,n):void 0===t)?1:on(is(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,o=0,s=r(Qt(i/t));a<i;)s[o++]=Wr(e,a,a+=t);return s},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ht(Io(n)?mi(n):[n],ar(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,n=Yi();return e=t?lt(e,(function(e){if("function"!=typeof e[1])throw new ge(i);return[n(e[0]),e[1]]})):[],Lr((function(n){for(var r=-1;++r<t;){var i=e[r];if(nt(i[0],this,n))return nt(i[1],this,n)}}))},Cn.conforms=function(e){return function(e){var t=ws(e);return function(n){return Jn(n,e,t)}}(Zn(e,1))},Cn.constant=Ws,Cn.countBy=io,Cn.create=function(e,t){var n=An(e);return null==t?n:Kn(n,t)},Cn.curry=function e(t,n,r){var i=Ni(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.curryRight=function e(t,n,r){var i=Ni(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Cn.debounce=wo,Cn.defaults=ps,Cn.defaultsDeep=vs,Cn.defer=xo,Cn.delay=ko,Cn.difference=Aa,Cn.differenceBy=Ma,Cn.differenceWith=ja,Cn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=n||void 0===t?1:is(t))<0?0:t,r):[]},Cn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,0,(t=r-(t=n||void 0===t?1:is(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3),!0):[]},Cn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&oa(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=is(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:is(r))<0&&(r+=i),r=n>r?0:as(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Cn.filter=function(e,t){return(Io(e)?st:ir)(e,Yi(t,3))},Cn.flatMap=function(e,t){return ar(fo(e,t),1)},Cn.flatMapDeep=function(e,t){return ar(fo(e,t),1/0)},Cn.flatMapDepth=function(e,t,n){return n=void 0===n?1:is(n),ar(fo(e,t),n)},Cn.flatten=Ia,Cn.flattenDeep=function(e){return null!=e&&e.length?ar(e,1/0):[]},Cn.flattenDepth=function(e,t){return null!=e&&e.length?ar(e,t=void 0===t?1:is(t)):[]},Cn.flip=function(e){return Ni(e,512)},Cn.flow=Gs,Cn.flowRight=Ks,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Cn.functions=function(e){return null==e?[]:lr(e,ws(e))},Cn.functionsIn=function(e){return null==e?[]:lr(e,xs(e))},Cn.groupBy=co,Cn.initial=function(e){return null!=e&&e.length?Wr(e,0,-1):[]},Cn.intersection=Fa,Cn.intersectionBy=La,Cn.intersectionWith=Na,Cn.invert=ys,Cn.invertBy=bs,Cn.invokeMap=lo,Cn.iteratee=Xs,Cn.keyBy=ho,Cn.keys=ws,Cn.keysIn=xs,Cn.map=fo,Cn.mapKeys=function(e,t){var n={};return t=Yi(t,3),ur(e,(function(e,r,i){qn(n,t(e,r,i),e)})),n},Cn.mapValues=function(e,t){var n={};return t=Yi(t,3),ur(e,(function(e,r,i){qn(n,r,t(e,r,i))})),n},Cn.matches=function(e){return Tr(Zn(e,1))},Cn.matchesProperty=function(e,t){return Cr(e,Zn(t,1))},Cn.memoize=So,Cn.merge=ks,Cn.mergeWith=Ss,Cn.method=Ys,Cn.methodOf=Zs,Cn.mixin=Js,Cn.negate=Eo,Cn.nthArg=function(e){return e=is(e),Lr((function(t){return Mr(t,e)}))},Cn.omit=Es,Cn.omitBy=function(e,t){return Ts(e,Eo(Yi(t)))},Cn.once=function(e){return yo(2,e)},Cn.orderBy=function(e,t,n,r){return null==e?[]:(Io(t)||(t=null==t?[]:[t]),Io(n=r?void 0:n)||(n=null==n?[]:[n]),jr(e,t,n))},Cn.over=$s,Cn.overArgs=Oo,Cn.overEvery=eu,Cn.overSome=tu,Cn.partial=To,Cn.partialRight=Co,Cn.partition=po,Cn.pick=Os,Cn.pickBy=Ts,Cn.property=nu,Cn.propertyOf=function(e){return function(t){return null==e?void 0:hr(e,t)}},Cn.pull=Ha,Cn.pullAll=Ua,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,Yi(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,void 0,n):e},Cn.pullAt=Va,Cn.range=ru,Cn.rangeRight=iu,Cn.rearg=Ao,Cn.reject=function(e,t){return(Io(e)?st:ir)(e,Eo(Yi(t,3)))},Cn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=Yi(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Ir(e,i),n},Cn.rest=function(e,t){if("function"!=typeof e)throw new ge(i);return Lr(e,t=void 0===t?t:is(t))},Cn.reverse=za,Cn.sampleSize=function(e,t,n){return t=(n?oa(e,t,n):void 0===t)?1:is(t),(Io(e)?Hn:Br)(e,t)},Cn.set=function(e,t,n){return null==e?e:Hr(e,t,n)},Cn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Hr(e,t,n,r)},Cn.shuffle=function(e){return(Io(e)?Un:zr)(e)},Cn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&oa(e,t,n)?(t=0,n=r):(t=null==t?0:is(t),n=void 0===n?r:is(n)),Wr(e,t,n)):[]},Cn.sortBy=vo,Cn.sortedUniq=function(e){return e&&e.length?Xr(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?Xr(e,Yi(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&oa(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=us(e))&&("string"==typeof t||null!=t&&!Yo(t))&&!(t=Zr(t))&&Lt(e)?ui(Wt(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new ge(i);return t=null==t?0:on(is(t),0),Lr((function(n){var r=n[t],i=ui(n,0,t);return r&&ht(i,r),nt(e,this,i)}))},Cn.tail=function(e){var t=null==e?0:e.length;return t?Wr(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?Wr(e,0,(t=n||void 0===t?1:is(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=r-(t=n||void 0===t?1:is(t)))<0?0:t,r):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?ei(e,Yi(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new ge(i);return Wo(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),wo(e,t,{leading:r,maxWait:t,trailing:a})},Cn.thru=no,Cn.toArray=ns,Cn.toPairs=Cs,Cn.toPairsIn=As,Cn.toPath=function(e){return Io(e)?lt(e,Oa):Qo(e)?[e]:mi(Ea(us(e)))},Cn.toPlainObject=ss,Cn.transform=function(e,t,n){var r=Io(e),i=r||No(e)||$o(e);if(t=Yi(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:Wo(e)&&Uo(a)?An(ze(e)):{}}return(i?it:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},Cn.unary=function(e){return go(e,1)},Cn.union=Wa,Cn.unionBy=Ga,Cn.unionWith=Ka,Cn.uniq=function(e){return e&&e.length?Jr(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?Jr(e,Yi(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Jr(e,void 0,t):[]},Cn.unset=function(e,t){return null==e||Qr(e,t)},Cn.unzip=qa,Cn.unzipWith=Xa,Cn.update=function(e,t,n){return null==e?e:$r(e,t,ai(n))},Cn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:$r(e,t,ai(n),r)},Cn.values=Ms,Cn.valuesIn=function(e){return null==e?[]:At(e,xs(e))},Cn.without=Ya,Cn.words=Us,Cn.wrap=function(e,t){return To(ai(t),e)},Cn.xor=Za,Cn.xorBy=Ja,Cn.xorWith=Qa,Cn.zip=$a,Cn.zipObject=function(e,t){return ri(e||[],t||[],zn)},Cn.zipObjectDeep=function(e,t){return ri(e||[],t||[],Hr)},Cn.zipWith=eo,Cn.entries=Cs,Cn.entriesIn=As,Cn.extend=ls,Cn.extendWith=hs,Js(Cn,Cn),Cn.add=uu,Cn.attempt=Vs,Cn.camelCase=js,Cn.capitalize=Ps,Cn.ceil=cu,Cn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=os(n))==n?n:0),void 0!==t&&(t=(t=os(t))==t?t:0),Yn(os(e),t,n)},Cn.clone=function(e){return Zn(e,4)},Cn.cloneDeep=function(e){return Zn(e,5)},Cn.cloneDeepWith=function(e,t){return Zn(e,5,t="function"==typeof t?t:void 0)},Cn.cloneWith=function(e,t){return Zn(e,4,t="function"==typeof t?t:void 0)},Cn.conformsTo=function(e,t){return null==t||Jn(e,t,ws(t))},Cn.deburr=Rs,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=lu,Cn.endsWith=function(e,t,n){e=us(e),t=Zr(t);var r=e.length,i=n=void 0===n?r:Yn(is(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Cn.eq=Mo,Cn.escape=function(e){return(e=us(e))&&N.test(e)?e.replace(F,Dt):e},Cn.escapeRegExp=function(e){return(e=us(e))&&K.test(e)?e.replace(G,"\\$&"):e},Cn.every=function(e,t,n){var r=Io(e)?ot:nr;return n&&oa(e,t,n)&&(t=void 0),r(e,Yi(t,3))},Cn.find=ao,Cn.findIndex=Pa,Cn.findKey=function(e,t){return mt(e,Yi(t,3),ur)},Cn.findLast=oo,Cn.findLastIndex=Ra,Cn.findLastKey=function(e,t){return mt(e,Yi(t,3),cr)},Cn.floor=hu,Cn.forEach=so,Cn.forEachRight=uo,Cn.forIn=function(e,t){return null==e?e:or(e,Yi(t,3),xs)},Cn.forInRight=function(e,t){return null==e?e:sr(e,Yi(t,3),xs)},Cn.forOwn=function(e,t){return e&&ur(e,Yi(t,3))},Cn.forOwnRight=function(e,t){return e&&cr(e,Yi(t,3))},Cn.get=ms,Cn.gt=jo,Cn.gte=Po,Cn.has=function(e,t){return null!=e&&na(e,t,vr)},Cn.hasIn=gs,Cn.head=Da,Cn.identity=qs,Cn.includes=function(e,t,n,r){e=Fo(e)?e:Ms(e),n=n&&!r?is(n):0;var i=e.length;return n<0&&(n=on(i+n,0)),Jo(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&yt(e,t,n)>-1},Cn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=on(r+i,0)),yt(e,t,i)},Cn.inRange=function(e,t,n){return t=rs(t),void 0===n?(n=t,t=0):n=rs(n),function(e,t,n){return e>=sn(t,n)&&e<on(t,n)}(e=os(e),t,n)},Cn.invoke=_s,Cn.isArguments=Ro,Cn.isArray=Io,Cn.isArrayBuffer=Do,Cn.isArrayLike=Fo,Cn.isArrayLikeObject=Lo,Cn.isBoolean=function(e){return!0===e||!1===e||Go(e)&&dr(e)==c},Cn.isBuffer=No,Cn.isDate=Bo,Cn.isElement=function(e){return Go(e)&&1===e.nodeType&&!Xo(e)},Cn.isEmpty=function(e){if(null==e)return!0;if(Fo(e)&&(Io(e)||"string"==typeof e||"function"==typeof e.splice||No(e)||$o(e)||Ro(e)))return!e.length;var t=ta(e);if(t==p||t==y)return!e.size;if(la(e))return!Sr(e).length;for(var n in e)if(xe.call(e,n))return!1;return!0},Cn.isEqual=function(e,t){return _r(e,t)},Cn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?_r(e,t,void 0,n):!!r},Cn.isError=Ho,Cn.isFinite=function(e){return"number"==typeof e&&nn(e)},Cn.isFunction=Uo,Cn.isInteger=Vo,Cn.isLength=zo,Cn.isMap=Ko,Cn.isMatch=function(e,t){return e===t||wr(e,t,Ji(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,wr(e,t,Ji(t),n)},Cn.isNaN=function(e){return qo(e)&&e!=+e},Cn.isNative=function(e){if(ca(e))throw new he("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=qo,Cn.isObject=Wo,Cn.isObjectLike=Go,Cn.isPlainObject=Xo,Cn.isRegExp=Yo,Cn.isSafeInteger=function(e){return Vo(e)&&e>=-9007199254740991&&e<=9007199254740991},Cn.isSet=Zo,Cn.isString=Jo,Cn.isSymbol=Qo,Cn.isTypedArray=$o,Cn.isUndefined=function(e){return void 0===e},Cn.isWeakMap=function(e){return Go(e)&&ta(e)==w},Cn.isWeakSet=function(e){return Go(e)&&"[object WeakSet]"==dr(e)},Cn.join=function(e,t){return null==e?"":rn.call(e,t)},Cn.kebabCase=Is,Cn.last=Ba,Cn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=is(n))<0?on(r+i,0):sn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):gt(e,_t,i,!0)},Cn.lowerCase=Ds,Cn.lowerFirst=Fs,Cn.lt=es,Cn.lte=ts,Cn.max=function(e){return e&&e.length?rr(e,qs,pr):void 0},Cn.maxBy=function(e,t){return e&&e.length?rr(e,Yi(t,2),pr):void 0},Cn.mean=function(e){return wt(e,qs)},Cn.meanBy=function(e,t){return wt(e,Yi(t,2))},Cn.min=function(e){return e&&e.length?rr(e,qs,Er):void 0},Cn.minBy=function(e,t){return e&&e.length?rr(e,Yi(t,2),Er):void 0},Cn.stubArray=au,Cn.stubFalse=ou,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=fu,Cn.nth=function(e,t){return e&&e.length?Mr(e,is(t)):void 0},Cn.noConflict=function(){return We._===this&&(We._=Te),this},Cn.noop=Qs,Cn.now=mo,Cn.pad=function(e,t,n){e=us(e);var r=(t=is(t))?zt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ji($t(i),n)+e+ji(Qt(i),n)},Cn.padEnd=function(e,t,n){e=us(e);var r=(t=is(t))?zt(e):0;return t&&r<t?e+ji(t-r,n):e},Cn.padStart=function(e,t,n){e=us(e);var r=(t=is(t))?zt(e):0;return t&&r<t?ji(t-r,n)+e:e},Cn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(us(e).replace(q,""),t||0)},Cn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&oa(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=rs(e),void 0===t?(t=e,e=0):t=rs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ln();return sn(e+i*(t-e+He("1e-"+((i+"").length-1))),t)}return Dr(e,t)},Cn.reduce=function(e,t,n){var r=Io(e)?ft:St,i=arguments.length<3;return r(e,Yi(t,4),n,i,er)},Cn.reduceRight=function(e,t,n){var r=Io(e)?dt:St,i=arguments.length<3;return r(e,Yi(t,4),n,i,tr)},Cn.repeat=function(e,t,n){return t=(n?oa(e,t,n):void 0===t)?1:is(t),Fr(us(e),t)},Cn.replace=function(){var e=arguments,t=us(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var r=-1,i=(t=oi(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var a=null==e?void 0:e[Oa(t[r])];void 0===a&&(r=i,a=n),e=Uo(a)?a.call(e):a}return e},Cn.round=du,Cn.runInContext=e,Cn.sample=function(e){return(Io(e)?Bn:Nr)(e)},Cn.size=function(e){if(null==e)return 0;if(Fo(e))return Jo(e)?zt(e):e.length;var t=ta(e);return t==p||t==y?e.size:Sr(e).length},Cn.snakeCase=Ls,Cn.some=function(e,t,n){var r=Io(e)?pt:Gr;return n&&oa(e,t,n)&&(t=void 0),r(e,Yi(t,3))},Cn.sortedIndex=function(e,t){return Kr(e,t)},Cn.sortedIndexBy=function(e,t,n){return qr(e,t,Yi(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Kr(e,t);if(r<n&&Mo(e[r],t))return r}return-1},Cn.sortedLastIndex=function(e,t){return Kr(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return qr(e,t,Yi(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Kr(e,t,!0)-1;if(Mo(e[n],t))return n}return-1},Cn.startCase=Ns,Cn.startsWith=function(e,t,n){return e=us(e),n=null==n?0:Yn(is(n),0,e.length),t=Zr(t),e.slice(n,n+t.length)==t},Cn.subtract=pu,Cn.sum=function(e){return e&&e.length?Et(e,qs):0},Cn.sumBy=function(e,t){return e&&e.length?Et(e,Yi(t,2)):0},Cn.template=function(e,t,n){var r=Cn.templateSettings;n&&oa(e,t,n)&&(t=void 0),e=us(e),t=hs({},t,r,Bi);var i,a,o=hs({},t.imports,r.imports,Bi),s=ws(o),u=At(o,s),c=0,l=t.interpolate||ce,h="__p += '",f=ve((t.escape||ce).source+"|"+l.source+"|"+(l===U?te:ce).source+"|"+(t.evaluate||ce).source+"|$","g"),d="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(f,(function(t,n,r,o,s,u){return r||(r=o),h+=e.slice(c,u).replace(le,Ft),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),h+="';\n";var p=xe.call(t,"variable")&&t.variable;if(p){if($.test(p))throw new he("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(P,""):h).replace(R,"$1").replace(I,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Vs((function(){return fe(s,d+"return "+h).apply(void 0,u)}));if(v.source=h,Ho(v))throw v;return v},Cn.times=function(e,t){if((e=is(e))<1||e>9007199254740991)return[];var n=4294967295,r=sn(e,4294967295);e-=4294967295;for(var i=Ot(r,t=Yi(t));++n<e;)t(n);return i},Cn.toFinite=rs,Cn.toInteger=is,Cn.toLength=as,Cn.toLower=function(e){return us(e).toLowerCase()},Cn.toNumber=os,Cn.toSafeInteger=function(e){return e?Yn(is(e),-9007199254740991,9007199254740991):0===e?e:0},Cn.toString=us,Cn.toUpper=function(e){return us(e).toUpperCase()},Cn.trim=function(e,t,n){if((e=us(e))&&(n||void 0===t))return Tt(e);if(!e||!(t=Zr(t)))return e;var r=Wt(e),i=Wt(t);return ui(r,jt(r,i),Pt(r,i)+1).join("")},Cn.trimEnd=function(e,t,n){if((e=us(e))&&(n||void 0===t))return e.slice(0,Gt(e)+1);if(!e||!(t=Zr(t)))return e;var r=Wt(e);return ui(r,0,Pt(r,Wt(t))+1).join("")},Cn.trimStart=function(e,t,n){if((e=us(e))&&(n||void 0===t))return e.replace(q,"");if(!e||!(t=Zr(t)))return e;var r=Wt(e);return ui(r,jt(r,Wt(t))).join("")},Cn.truncate=function(e,t){var n=30,r="...";if(Wo(t)){var i="separator"in t?t.separator:i;n="length"in t?is(t.length):n,r="omission"in t?Zr(t.omission):r}var a=(e=us(e)).length;if(Lt(e)){var o=Wt(e);a=o.length}if(n>=a)return e;var s=n-zt(r);if(s<1)return r;var u=o?ui(o,0,s).join(""):e.slice(0,s);if(void 0===i)return u+r;if(o&&(s+=u.length-s),Yo(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=ve(i.source,us(ne.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var h=c.index;u=u.slice(0,void 0===h?s:h)}}else if(e.indexOf(Zr(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},Cn.unescape=function(e){return(e=us(e))&&L.test(e)?e.replace(D,Kt):e},Cn.uniqueId=function(e){var t=++ke;return us(e)+t},Cn.upperCase=Bs,Cn.upperFirst=Hs,Cn.each=so,Cn.eachRight=uo,Cn.first=Da,Js(Cn,(su={},ur(Cn,(function(e,t){xe.call(Cn.prototype,t)||(su[t]=e)})),su),{chain:!1}),Cn.VERSION="4.17.21",it(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Cn[e].placeholder=Cn})),it(["drop","take"],(function(e,t){Pn.prototype[e]=function(n){n=void 0===n?1:on(is(n),0);var r=this.__filtered__&&!t?new Pn(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Pn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),it(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Pn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),it(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Pn.prototype[e]=function(){return this[n](1).value()[0]}})),it(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Pn.prototype[e]=function(){return this.__filtered__?new Pn(this):this[n](1)}})),Pn.prototype.compact=function(){return this.filter(qs)},Pn.prototype.find=function(e){return this.filter(e).head()},Pn.prototype.findLast=function(e){return this.reverse().find(e)},Pn.prototype.invokeMap=Lr((function(e,t){return"function"==typeof e?new Pn(this):this.map((function(n){return yr(n,e,t)}))})),Pn.prototype.reject=function(e){return this.filter(Eo(Yi(e)))},Pn.prototype.slice=function(e,t){e=is(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Pn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=is(t))<0?n.dropRight(-t):n.take(t-e)),n)},Pn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pn.prototype.toArray=function(){return this.take(4294967295)},ur(Pn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Cn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(Cn.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,s=t instanceof Pn,u=o[0],c=s||Io(t),l=function(e){var t=i.apply(Cn,ht([e],o));return r&&h?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var h=this.__chain__,f=!!this.__actions__.length,d=a&&!h,p=s&&!f;if(!a&&c){t=p?t:new Pn(this);var v=e.apply(t,o);return v.__actions__.push({func:no,args:[l],thisArg:void 0}),new jn(v,h)}return d&&p?e.apply(this,o):(v=this.thru(l),d?r?v.value()[0]:v.value():v)})})),it(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Io(i)?i:[],e)}return this[n]((function(n){return t.apply(Io(n)?n:[],e)}))}})),ur(Pn.prototype,(function(e,t){var n=Cn[t];if(n){var r=n.name+"";xe.call(bn,r)||(bn[r]=[]),bn[r].push({name:t,func:n})}})),bn[Ti(void 0,2).name]=[{name:"wrapper",func:void 0}],Pn.prototype.clone=function(){var e=new Pn(this.__wrapped__);return e.__actions__=mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mi(this.__views__),e},Pn.prototype.reverse=function(){if(this.__filtered__){var e=new Pn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Pn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Io(e),r=t<0,i=n?e.length:0,a=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=sn(t,e+o);break;case"takeRight":e=on(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,h=l.length,f=0,d=sn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ti(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var v=-1,m=e[c+=t];++v<h;){var g=l[v],y=g.type,b=(0,g.iteratee)(m);if(2==y)m=b;else if(!b){if(1==y)continue e;break e}}p[f++]=m}return p},Cn.prototype.at=ro,Cn.prototype.chain=function(){return to(this)},Cn.prototype.commit=function(){return new jn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ns(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof Mn;){var r=Ca(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Pn){var t=e;return this.__actions__.length&&(t=new Pn(this)),(t=t.reverse()).__actions__.push({func:no,args:[za],thisArg:void 0}),new jn(t,this.__chain__)}return this.thru(za)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ti(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,vt&&(Cn.prototype[vt]=function(){return this}),Cn}();We._=qt,void 0===(r=(function(){return qt}).call(t,n,t,e))||(e.exports=r)}).call(this)}).call(this,n("YuTi")(e))},NJ4a:function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,"a",(function(){return r}))},Nv8m:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("DH7j"),u=n("yCtX"),c=n("l7GE"),l=n("ZUHj");function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){if(!Object(s.a)(t[0]))return t[0];t=t[0]}return Object(u.a)(t,void 0).lift(new f)}var f=function(){function e(){Object(a.a)(this,e)}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new d(e))}}]),e}(),d=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).hasFirst=!1,r.observables=[],r.subscriptions=[],r}return Object(o.a)(n,[{key:"_next",value:function(e){this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(l.a)(this,r,void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}}},{key:"notifyNext",value:function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)}}]),n}(c.a)},ODXe:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("DSFK"),i=n("BsWD"),a=n("PYwp");function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||Object(i.a)(e,t)||Object(a.a)()}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},PYwp:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},ReuC:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("foSv");function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}},SeVD:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),a=n("Lhse"),o=n("kJWO"),s=n("I55L"),u=n("c2HN"),c=n("XoHu"),l=function(e){if(e&&"function"==typeof e[o.a])return l=e,function(e){var t=l[o.a]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Object(s.a)(e))return Object(r.a)(e);if(Object(u.a)(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,i.a),e};if(e&&"function"==typeof e[a.a])return t=e,function(e){for(var n=t[a.a]();;){var r=void 0;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,l,h=Object(c.a)(e)?"an invalid object":"'".concat(e,"'"),f="You provided ".concat(h," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(f)}},SpAZ:function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",(function(){return r}))},SxV6:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("sVev"),i=n("pLZG"),a=n("IzEk"),o=n("xbPD"),s=n("XDbj"),u=n("SpAZ");function c(e,t){var n=arguments.length>=2;return function(c){return c.pipe(e?Object(i.a)((function(t,n){return e(t,n,c)})):u.a,Object(a.a)(1),n?Object(o.a)(t):Object(s.a)((function(){return new r.a})))}}},VRyK:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("HDdC"),i=n("z+Ro"),a=n("bHdf"),o=n("yCtX");function s(){for(var e=Number.POSITIVE_INFINITY,t=null,n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];var c=s[s.length-1];return Object(i.a)(c)?(t=s.pop(),s.length>1&&"number"==typeof s[s.length-1]&&(e=s.pop())):"number"==typeof c&&(e=s.pop()),null===t&&1===s.length&&s[0]instanceof r.a?s[0]:Object(a.a)(e)(Object(o.a)(s,t))}},WMd4:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("1OyB"),i=n("vuIU"),a=n("EY2u"),o=n("LRne"),s=n("z6cu"),u=function(){var e=function(){function e(t,n,i){Object(r.a)(this,e),this.kind=t,this.value=n,this.error=i,this.hasValue="N"===t}return Object(i.a)(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(a.b)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},XDbj:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("sVev"),u=n("7o/Q");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return function(t){return t.lift(new l(e))}}var l=function(){function e(t){Object(a.a)(this,e),this.errorFactory=t}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.errorFactory))}}]),e}(),h=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return Object(o.a)(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(u.a);function f(){return new s.a}},XNiG:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return m}));var r=n("vuIU"),i=n("ReuC"),a=n("foSv"),o=n("1OyB"),s=n("Ji7U"),u=n("LK+K"),c=n("HDdC"),l=n("7o/Q"),h=n("quSY"),f=n("9ppp"),d=n("Ylt2"),p=n("2QA8"),v=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).destination=e,r}return n}(l.a),m=function(){var e=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Object(r.a)(n,[{key:p.a,value:function(){return new v(this)}},{key:"lift",value:function(e){var t=new g(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new f.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new f.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new f.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new f.a;return Object(i.a)(Object(a.a)(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new f.a;return this.hasError?(e.error(this.thrownError),h.a.EMPTY):this.isStopped?(e.complete(),h.a.EMPTY):(this.observers.push(e),new d.a(this,e))}},{key:"asObservable",value:function(){var e=new c.a;return e.source=this,e}}]),n}(c.a);return e.create=function(e,t){return new g(e,t)},e}(),g=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this)).destination=e,i.source=r,i}return Object(r.a)(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):h.a.EMPTY}}]),n}(m)},XoHu:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",(function(){return r}))},Ylt2:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("LK+K"),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this)).subject=e,a.subscriber=i,a.closed=!1,a}return Object(i.a)(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(n("quSY").a)},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},ZUHj:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("LK+K"),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,a){var o;return Object(r.a)(this,n),(o=t.call(this)).parent=e,o.outerValue=i,o.outerIndex=a,o.index=0,o}return Object(i.a)(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(n("7o/Q").a),u=n("SeVD"),c=n("HDdC");function l(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new s(e,n,r);if(!i.closed)return t instanceof c.a?t.subscribe(i):Object(u.a)(t)(i)}},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},bHdf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("5+tZ"),i=n("SpAZ");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,e)}},bOdf:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("5+tZ");function i(e,t){return Object(r.a)(e,t,1)}},c2HN:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",(function(){return r}))},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},eIep:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("ReuC"),i=n("foSv"),a=n("Ji7U"),o=n("LK+K"),s=n("1OyB"),u=n("vuIU"),c=n("lJxs"),l=n("Cfvw"),h=n("zx2A");function f(e,t){return"function"==typeof t?function(n){return n.pipe(f((function(n,r){return Object(l.a)(e(n,r)).pipe(Object(c.a)((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new d(e))}}var d=function(){function e(t){Object(s.a)(this,e),this.project=t}return Object(u.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new p(e,this.project))}}]),e}(),p=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,r){var i;return Object(s.a)(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return Object(u.a)(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new h.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(h.c)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||Object(r.a)(Object(i.a)(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&Object(r.a)(Object(i.a)(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(h.b)},equ2:function(e,t,n){!function(e){"use strict";var t="function"==typeof WeakSet,n=Object.keys;function r(e,t){return e===t||e!=e&&t!=t}function i(e){return e.constructor===Object||null==e.constructor}function a(e){return!!e&&"function"==typeof e.then}function o(e){return!(!e||!e.$$typeof)}var s=t?function(){return new WeakSet}:function(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}};function u(e){return function(t){var n=e||t;return function(e,t,r){void 0===r&&(r=s());var i=!!e&&"object"==typeof e,a=!!t&&"object"==typeof t;if(i||a){var o=i&&r.has(e),u=a&&r.has(t);if(o||u)return o&&u;i&&r.add(e),a&&r.add(t)}return n(e,t,r)}}}var c=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function l(e,t,r,i){var a=n(e),s=a.length;if(n(t).length!==s)return!1;if(s)for(var u=void 0;s-- >0;){if("_owner"===(u=a[s])){var l=o(e),h=o(t);if((l||h)&&l!==h)return!1}if(!c(t,u)||!r(e[u],t[u],i))return!1}return!0}var h="function"==typeof Map,f="function"==typeof Set;function d(e){var t="function"==typeof e?e(n):n;function n(e,n,o){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(i(e)&&i(n))return l(e,n,t,o);var s=Array.isArray(e),u=Array.isArray(n);return s||u?s===u&&function(e,t,n,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n(e[i],t[i],r))return!1;return!0}(e,n,t,o):(s=e instanceof Date,u=n instanceof Date,s||u?s===u&&r(e.getTime(),n.getTime()):(s=e instanceof RegExp,u=n instanceof RegExp,s||u?s===u&&function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}(e,n):a(e)||a(n)?e===n:h&&(s=e instanceof Map,u=n instanceof Map,s||u)?s===u&&function(e,t,n,r){var i=e.size===t.size;return i&&e.size&&e.forEach((function(e,a){i&&(i=!1,t.forEach((function(t,o){!i&&n(a,o,r)&&(i=n(e,t,r))})))})),i}(e,n,t,o):f&&(s=e instanceof Set,u=n instanceof Set,s||u)?s===u&&function(e,t,n,r){var i=e.size===t.size;return i&&e.size&&e.forEach((function(e){i&&(i=!1,t.forEach((function(t){i||(i=n(e,t,r))})))})),i}(e,n,t,o):l(e,n,t,o)))}return e!=e&&n!=n}return n}var p=d(),v=d((function(){return r})),m=d(u()),g=d(u(r));e.circularDeepEqual=m,e.circularShallowEqual=g,e.createCustomEqual=d,e.deepEqual=p,e.sameValueZeroEqual=r,e.shallowEqual=v,Object.defineProperty(e,"__esModule",{value:!0})}(t)},fXoL:function(e,t,n){"use strict";n.d(t,"a",(function(){return Za})),n.d(t,"b",(function(){return ic})),n.d(t,"c",(function(){return $u})),n.d(t,"d",(function(){return Ju})),n.d(t,"e",(function(){return Qu})),n.d(t,"f",(function(){return Zc})),n.d(t,"g",(function(){return Hc})),n.d(t,"h",(function(){return ja})),n.d(t,"i",(function(){return vc})),n.d(t,"j",(function(){return ks})),n.d(t,"k",(function(){return sc})),n.d(t,"l",(function(){return Ss})),n.d(t,"m",(function(){return Gn})),n.d(t,"n",(function(){return Cu})),n.d(t,"o",(function(){return se})),n.d(t,"p",(function(){return S})),n.d(t,"q",(function(){return oe})),n.d(t,"r",(function(){return Ya})),n.d(t,"s",(function(){return zs})),n.d(t,"t",(function(){return Ws})),n.d(t,"u",(function(){return oc})),n.d(t,"v",(function(){return xe})),n.d(t,"w",(function(){return Vc})),n.d(t,"x",(function(){return we})),n.d(t,"y",(function(){return Rc})),n.d(t,"z",(function(){return yc})),n.d(t,"A",(function(){return E})),n.d(t,"B",(function(){return rc})),n.d(t,"C",(function(){return nc})),n.d(t,"D",(function(){return Mu})),n.d(t,"E",(function(){return Cs})),n.d(t,"F",(function(){return Os})),n.d(t,"G",(function(){return Ts})),n.d(t,"H",(function(){return Ms})),n.d(t,"I",(function(){return Rr})),n.d(t,"J",(function(){return T})),n.d(t,"K",(function(){return Gc})),n.d(t,"L",(function(){return Xs})),n.d(t,"M",(function(){return Oc})),n.d(t,"N",(function(){return Ra})),n.d(t,"O",(function(){return js})),n.d(t,"P",(function(){return Zs})),n.d(t,"Q",(function(){return je})),n.d(t,"R",(function(){return Dc})),n.d(t,"S",(function(){return cr})),n.d(t,"T",(function(){return W})),n.d(t,"U",(function(){return me})),n.d(t,"V",(function(){return ur})),n.d(t,"W",(function(){return Xc})),n.d(t,"X",(function(){return Cc})),n.d(t,"Y",(function(){return ac})),n.d(t,"Z",(function(){return Ia})),n.d(t,"ab",(function(){return fu})),n.d(t,"bb",(function(){return jr})),n.d(t,"cb",(function(){return pr})),n.d(t,"db",(function(){return $n})),n.d(t,"eb",(function(){return tr})),n.d(t,"fb",(function(){return ar})),n.d(t,"gb",(function(){return rr})),n.d(t,"hb",(function(){return nr})),n.d(t,"ib",(function(){return ir})),n.d(t,"jb",(function(){return uu})),n.d(t,"kb",(function(){return qc})),n.d(t,"lb",(function(){return cu})),n.d(t,"mb",(function(){return lu})),n.d(t,"nb",(function(){return er})),n.d(t,"ob",(function(){return Q})),n.d(t,"pb",(function(){return to})),n.d(t,"qb",(function(){return xo})),n.d(t,"rb",(function(){return wo})),n.d(t,"sb",(function(){return su})),n.d(t,"tb",(function(){return st})),n.d(t,"ub",(function(){return U})),n.d(t,"vb",(function(){return Qn})),n.d(t,"wb",(function(){return os})),n.d(t,"xb",(function(){return tt})),n.d(t,"yb",(function(){return bs})),n.d(t,"zb",(function(){return ei})),n.d(t,"Ab",(function(){return oo})),n.d(t,"Bb",(function(){return ns})),n.d(t,"Cb",(function(){return Uo})),n.d(t,"Db",(function(){return zu})),n.d(t,"Eb",(function(){return De})),n.d(t,"Fb",(function(){return Ve})),n.d(t,"Gb",(function(){return j})),n.d(t,"Hb",(function(){return P})),n.d(t,"Ib",(function(){return Be})),n.d(t,"Jb",(function(){return ze})),n.d(t,"Kb",(function(){return lo})),n.d(t,"Lb",(function(){return go})),n.d(t,"Mb",(function(){return bo})),n.d(t,"Nb",(function(){return yo})),n.d(t,"Ob",(function(){return mo})),n.d(t,"Pb",(function(){return vo})),n.d(t,"Qb",(function(){return _o})),n.d(t,"Rb",(function(){return Un})),n.d(t,"Sb",(function(){return rs})),n.d(t,"Tb",(function(){return ve})),n.d(t,"Ub",(function(){return ho})),n.d(t,"Vb",(function(){return Zu})),n.d(t,"Wb",(function(){return ko})),n.d(t,"Xb",(function(){return Ku})),n.d(t,"Yb",(function(){return en})),n.d(t,"Zb",(function(){return $t})),n.d(t,"ac",(function(){return Ao})),n.d(t,"bc",(function(){return ku})),n.d(t,"cc",(function(){return Su})),n.d(t,"dc",(function(){return Eu})),n.d(t,"ec",(function(){return Po})),n.d(t,"fc",(function(){return jo})),n.d(t,"gc",(function(){return fo})),n.d(t,"hc",(function(){return gu})),n.d(t,"ic",(function(){return yu})),n.d(t,"jc",(function(){return bu})),n.d(t,"kc",(function(){return Bu})),n.d(t,"lc",(function(){return co})),n.d(t,"mc",(function(){return wn})),n.d(t,"nc",(function(){return Ot})),n.d(t,"oc",(function(){return Ir})),n.d(t,"pc",(function(){return He})),n.d(t,"qc",(function(){return Wu})),n.d(t,"rc",(function(){return Hu})),n.d(t,"sc",(function(){return Ho})),n.d(t,"tc",(function(){return So})),n.d(t,"uc",(function(){return is})),n.d(t,"vc",(function(){return uo})),n.d(t,"wc",(function(){return Qo})),n.d(t,"xc",(function(){return $o})),n.d(t,"yc",(function(){return es})),n.d(t,"zc",(function(){return ts})),n.d(t,"Ac",(function(){return Uu}));var r=n("ReuC"),i=n("foSv"),a=n("JX7q"),o=n("ODXe"),s=n("KQm4");n("rePB"),n("DSFK"),n("25BE"),n("BsWD"),n("PYwp");var u=n("uFwe"),c=n("Ji7U"),l=n("LK+K"),h=n("1OyB"),f=n("vuIU"),d=n("s4An"),p=n("2WcH");function v(e,t,n){return(v=Object(p.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(d.a)(i,n.prototype),i}).apply(null,arguments)}var m=n("quSY"),g=n("XNiG"),y=n("HDdC"),b=n("VRyK"),_=n("w1tV");function w(e){return{toString:e}.toString()}var x="__parameters__";function k(e,t,n){return w((function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=v(i,t);return o.annotation=a,o;function o(e,t,n){for(var r=e.hasOwnProperty(x)?e[x]:Object.defineProperty(e,x,{value:[]})[x];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}))}var S=k("Inject",(function(e){return{token:e}})),E=k("Optional"),O=k("Self"),T=k("SkipSelf"),C=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function A(e){for(var t in e)if(e[t]===A)return t;throw Error("Could not find renamed property on target object.")}function M(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function j(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function P(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function R(e){return I(e,e[F])||I(e,e[B])}function I(e,t){return t&&t.token===e?t:null}function D(e){return e&&(e.hasOwnProperty(L)||e.hasOwnProperty(H))?e[L]:null}var F=A({"\u0275prov":A}),L=A({"\u0275inj":A}),N=A({"\u0275provFallback":A}),B=A({ngInjectableDef:A}),H=A({ngInjectorDef:A});function U(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(U).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function V(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var z=A({__forward_ref__:A});function W(e){return e.__forward_ref__=W,e.toString=function(){return U(this())},e}function G(e){return K(e)?e():e}function K(e){return"function"==typeof e&&e.hasOwnProperty(z)&&e.__forward_ref__===W}var q,X="undefined"!=typeof globalThis&&globalThis,Y="undefined"!=typeof window&&window,Z="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,J="undefined"!=typeof global&&global,Q=X||J||Y||Z,$=A({"\u0275cmp":A}),ee=A({"\u0275dir":A}),te=A({"\u0275pipe":A}),ne=A({"\u0275mod":A}),re=A({"\u0275loc":A}),ie=A({"\u0275fac":A}),ae=A({__NG_ELEMENT_ID__:A}),oe=function(){function e(t,n){Object(h.a)(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return Object(f.a)(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),se=new oe("INJECTOR",-1),ue={},ce=/\n/gm,le=A({provide:String,useValue:A}),he=void 0;function fe(e){var t=he;return he=e,t}function de(e){var t=q;return q=e,t}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.Default;if(void 0===he)throw new Error("inject() must be called from an injection context");return null===he?ge(e,void 0,t):he.get(e,t&C.Optional?null:void 0,t)}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.Default;return(q||pe)(G(e),t)}var me=ve;function ge(e,t,n){var r=R(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&C.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(U(e),"]"))}function ye(e){for(var t=[],n=0;n<e.length;n++){var r=G(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=C.Default,o=0;o<r.length;o++){var s=r[o];s instanceof E||"Optional"===s.ngMetadataName||s===E?a|=C.Optional:s instanceof T||"SkipSelf"===s.ngMetadataName||s===T?a|=C.SkipSelf:s instanceof O||"Self"===s.ngMetadataName||s===O?a|=C.Self:i=s instanceof S||s===S?s.token:s}t.push(ve(i,a))}else t.push(ve(r))}return t}var be=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue;if(t===ue){var n=new Error("NullInjectorError: No provider for ".concat(U(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}();function _e(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=U(t);if(Array.isArray(t))i=t.map(U).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):U(s)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(ce,"\n  "))}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}var we=function e(){Object(h.a)(this,e)},xe=function e(){Object(h.a)(this,e)};function ke(e,t){e.forEach((function(e){return Array.isArray(e)?ke(e,t):t(e)}))}function Se(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ee(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Oe(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function Te(e,t,n){var r=Ae(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function Ce(e,t){var n=Ae(e,t);if(n>=0)return e[1|n]}function Ae(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),o=e[a<<1];if(t===o)return a<<1;o>t?i=a:r=a+1}return~(i<<1)}(e,t)}var Me=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),je=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),Pe={},Re=[],Ie=0;function De(e){return w((function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Me.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Re,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||je.Emulated,id:"c",styles:e.styles||Re,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,a=e.pipes;return n.id+=Ie++,n.inputs=Ue(e.inputs,t),n.outputs=Ue(e.outputs),i&&i.forEach((function(e){return e(n)})),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(Fe)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(Le)}:null,n}))}function Fe(e){return We(e)||function(e){return e[ee]||null}(e)}function Le(e){return function(e){return e[te]||null}(e)}var Ne={};function Be(e){var t={type:e.type,bootstrap:e.bootstrap||Re,declarations:e.declarations||Re,imports:e.imports||Re,exports:e.exports||Re,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&w((function(){Ne[e.id]=e.type})),t}function He(e,t){return w((function(){var n=Ke(e,!0);n.declarations=t.declarations||Re,n.imports=t.imports||Re,n.exports=t.exports||Re}))}function Ue(e,t){if(null==e)return Pe;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var Ve=De;function ze(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function We(e){return e[$]||null}function Ge(e,t){return e.hasOwnProperty(ie)?e[ie]:null}function Ke(e,t){var n=e[ne]||null;if(!n&&!0===t)throw new Error("Type ".concat(U(e)," does not have '\u0275mod' property."));return n}function qe(e){return Array.isArray(e)&&"object"==typeof e[1]}function Xe(e){return Array.isArray(e)&&!0===e[1]}function Ye(e){return 0!=(8&e.flags)}function Ze(e){return 2==(2&e.flags)}function Je(e){return 1==(1&e.flags)}function Qe(e){return null!==e.template}function $e(e){return 0!=(512&e[2])}var et=function(){function e(t,n,r){Object(h.a)(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return Object(f.a)(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function tt(){return nt}function nt(e){return e.type.prototype.ngOnChanges&&(e.setInput=it),rt}function rt(){var e=at(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===Pe)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function it(e,t,n,r){var i=at(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Pe,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],u=o[s];a[s]=new et(u&&u.currentValue,t,o===Pe),e[r]=t}function at(e){return e.__ngSimpleChanges__||null}tt.ngInherit=!0;var ot=void 0;function st(e){ot=e}function ut(e){return!!e.listen}var ct={createRenderer:function(e,t){return void 0!==ot?ot:"undefined"!=typeof document?document:void 0}};function lt(e){for(;Array.isArray(e);)e=e[0];return e}function ht(e,t){return lt(t[e+20])}function ft(e,t){return lt(t[e.index])}function dt(e,t){return e.data[t+20]}function pt(e,t){return e[t+20]}function vt(e,t){var n=t[e];return qe(n)?n:n[0]}function mt(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function gt(e){return 4==(4&e[2])}function yt(e){return 128==(128&e[2])}function bt(e,t){return null===e||null==t?null:e[t]}function _t(e){e[18]=0}function wt(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var xt={lFrame:Gt(null),bindingsEnabled:!0,checkNoChangesMode:!1};function kt(){return xt.bindingsEnabled}function St(){return xt.lFrame.lView}function Et(){return xt.lFrame.tView}function Ot(e){xt.lFrame.contextLView=e}function Tt(){return xt.lFrame.previousOrParentTNode}function Ct(e,t){xt.lFrame.previousOrParentTNode=e,xt.lFrame.isParent=t}function At(){return xt.lFrame.isParent}function Mt(){xt.lFrame.isParent=!1}function jt(){return xt.checkNoChangesMode}function Pt(e){xt.checkNoChangesMode=e}function Rt(){var e=xt.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function It(){return xt.lFrame.bindingIndex}function Dt(){return xt.lFrame.bindingIndex++}function Ft(e){var t=xt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Lt(e,t){var n=xt.lFrame;n.bindingIndex=n.bindingRootIndex=e,Nt(t)}function Nt(e){xt.lFrame.currentDirectiveIndex=e}function Bt(e){var t=xt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function Ht(){return xt.lFrame.currentQueryIndex}function Ut(e){xt.lFrame.currentQueryIndex=e}function Vt(e,t){var n=Wt();xt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function zt(e,t){var n=Wt(),r=e[1];xt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function Wt(){var e=xt.lFrame,t=null===e?null:e.child;return null===t?Gt(e):t}function Gt(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function Kt(){var e=xt.lFrame;return xt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var qt=Kt;function Xt(){var e=Kt();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Yt(e){return(xt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,xt.lFrame.contextLView))[8]}function Zt(){return xt.lFrame.selectedIndex}function Jt(e){xt.lFrame.selectedIndex=e}function Qt(){var e=xt.lFrame;return dt(e.tView,e.selectedIndex)}function $t(){xt.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function en(){xt.lFrame.currentNamespace=null}function tn(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function nn(e,t,n){on(e,t,3,n)}function rn(e,t,n,r){(3&e[2])===n&&on(e,t,n,r)}function an(e,t){var n=e[2];(3&n)===t&&(n&=2047,e[2]=n+=1)}function on(e,t,n,r){for(var i=null!=r?r:-1,a=0,o=void 0!==r?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(a=t[o],null!=r&&a>=r)break}else t[o]<0&&(e[18]+=65536),(a<i||-1==i)&&(sn(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function sn(e,t,n,r){var i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];i?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,a.call(o)):a.call(o)}var un=function e(t,n,r){Object(h.a)(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function cn(e,t,n){for(var r=ut(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],s=n[i++],u=n[i++];r?e.setAttribute(t,s,u,o):t.setAttributeNS(o,s,u)}else{var c=a,l=n[++i];hn(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function ln(e){return 3===e||4===e||6===e}function hn(e){return 64===e.charCodeAt(0)}function fn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||dn(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function dn(e,t,n,r,i){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var s=e[a++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=a-1;break}}}for(;a<e.length;){var u=e[a];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function pn(e){return-1!==e}function vn(e){return 32767&e}function mn(e){return e>>16}function gn(e,t){for(var n=mn(e),r=t;n>0;)r=r[15],n--;return r}function yn(e){return"string"==typeof e?e:null==e?"":""+e}function bn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():yn(e)}var _n=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Q)}();function wn(e){return{name:"body",target:e.ownerDocument.body}}function xn(e){return e instanceof Function?e():e}var kn=!0;function Sn(e){var t=kn;return kn=e,t}var En=0;function On(e,t){var n=Cn(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Tn(r.data,e),Tn(t,null),Tn(r.blueprint,null));var i=An(e,t),a=e.injectorIndex;if(pn(i))for(var o=vn(i),s=gn(i,t),u=s[1].data,c=0;c<8;c++)t[a+c]=s[o+c]|u[o+c];return t[a+8]=i,a}function Tn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Cn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function An(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],r=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Mn(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ae)&&(r=n[ae]),null==r&&(r=n[ae]=En++);var i=255&r,a=1<<i,o=64&i,s=32&i,u=t.data;128&i?o?s?u[e+7]|=a:u[e+6]|=a:s?u[e+5]|=a:u[e+4]|=a:o?s?u[e+3]|=a:u[e+2]|=a:s?u[e+1]|=a:u[e]|=a}(e,t,n)}function jn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=Fn(n);if("function"==typeof a){Vt(t,e);try{var o=a();if(null!=o||r&C.Optional)return o;throw new Error("No provider for ".concat(bn(n),"!"))}finally{qt()}}else if("number"==typeof a){if(-1===a)return new Bn(e,t);var s=null,u=Cn(e,t),c=-1,l=r&C.Host?t[16][6]:null;for((-1===u||r&C.SkipSelf)&&(c=-1===u?An(e,t):t[u+8],Nn(r,!1)?(s=t[1],u=vn(c),t=gn(c,t)):u=-1);-1!==u;){c=t[u+8];var h=t[1];if(Ln(a,u,h.data)){var f=Rn(u,t,n,s,r,l);if(f!==Pn)return f}Nn(r,t[1].data[u+8]===l)&&Ln(a,u,t)?(s=h,u=vn(c),t=gn(c,t)):u=-1}}}if(r&C.Optional&&void 0===i&&(i=null),0==(r&(C.Self|C.Host))){var d=t[9],p=de(void 0);try{return d?d.get(n,i,r&C.Optional):ge(n,i,r&C.Optional)}finally{de(p)}}if(r&C.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(bn(n),"]"))}var Pn={};function Rn(e,t,n,r,i,a){var o=t[1],s=o.data[e+8],u=In(s,o,n,null==r?Ze(s)&&kn:r!=o&&3===s.type,i&C.Host&&a===s);return null!==u?Dn(t,o,u,s):Pn}function In(e,t,n,r,i){for(var a=e.providerIndexes,o=t.data,s=1048575&a,u=e.directiveStart,c=a>>20,l=i?s+c:e.directiveEnd,h=r?s:s+c;h<l;h++){var f=o[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=o[u];if(d&&Qe(d)&&d.type===n)return u}return null}function Dn(e,t,n,r){var i=e[n],a=t.data;if(i instanceof un){var o=i;if(o.resolving)throw new Error("Circular dep for ".concat(bn(a[n])));var s,u=Sn(o.canSeeViewProviders);o.resolving=!0,o.injectImpl&&(s=de(o.injectImpl)),Vt(e,r);try{i=e[n]=o.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnInit,a=r.ngDoCheck;if(r.ngOnChanges){var o=nt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a))}(n,a[n],t)}finally{o.injectImpl&&de(s),Sn(u),o.resolving=!1,qt()}}return i}function Fn(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(ae)?e[ae]:void 0;return"number"==typeof t&&t>0?255&t:t}function Ln(e,t,n){var r=64&e,i=32&e;return!!((128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t])&1<<e)}function Nn(e,t){return!(e&C.Self||e&C.Host&&t)}var Bn=function(){function e(t,n){Object(h.a)(this,e),this._tNode=t,this._lView=n}return Object(f.a)(e,[{key:"get",value:function(e,t){return jn(this._tNode,this._lView,e,void 0,t)}}]),e}();function Hn(e){var t=e;if(K(e))return function(){var e=Hn(G(t));return e?e():null};var n=Ge(t);if(null===n){var r=D(t);n=r&&r.factory}return n||null}function Un(e){return w((function(){for(var t=e.prototype.constructor,n=t[ie]||Hn(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var a=i[ie]||Hn(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return function(e){return new e}}))}function Vn(e){return e.ngDebugContext}function zn(e){return e.ngOriginalError}function Wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Gn=function(){function e(){Object(h.a)(this,e),this._console=console}return Object(f.a)(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Wn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Vn(e)?Vn(e):this._findContext(zn(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=zn(e);t&&zn(t);)t=zn(t);return t}}]),e}(),Kn=function(){function e(t){Object(h.a)(this,e),this.changingThisBreaksApplicationSecurity=t}return Object(f.a)(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),e}(),qn=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Kn),Xn=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Kn),Yn=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Kn),Zn=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Kn),Jn=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Kn);function Qn(e){return e instanceof Kn?e.changingThisBreaksApplicationSecurity:e}function $n(e,t){var n=er(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===t}function er(e){return e instanceof Kn&&e.getTypeName()||null}function tr(e){return new qn(e)}function nr(e){return new Xn(e)}function rr(e){return new Yn(e)}function ir(e){return new Zn(e)}function ar(e){return new Jn(e)}var or=!0,sr=!1;function ur(){return sr=!0,or}function cr(){if(sr)throw new Error("Cannot enable prod mode after platform setup.");or=!1}var lr=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}}]),e}(),hr=function(){function e(t){if(Object(h.a)(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return Object(f.a)(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=e,t;var n=this.inertDocument.createElement("body");return n.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),fr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,dr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function pr(e){return(e=String(e)).match(fr)||e.match(dr)?e:(ur()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function vr(e){var t,n={},r=Object(u.a)(e.split(","));try{for(r.s();!(t=r.n()).done;)n[t.value]=!0}catch(i){r.e(i)}finally{r.f()}return n}function mr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)o.hasOwnProperty(s)&&(e[s]=!0)}return e}var gr,yr=vr("area,br,col,hr,img,wbr"),br=vr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_r=vr("rp,rt"),wr=mr(_r,br),xr=mr(yr,mr(br,vr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mr(_r,vr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wr),kr=vr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Sr=vr("srcset"),Er=mr(kr,Sr,vr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Or=vr("script,style,template"),Tr=function(){function e(){Object(h.a)(this,e),this.sanitizedSomething=!1,this.buf=[]}return Object(f.a)(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t,n=e.nodeName.toLowerCase();if(!xr.hasOwnProperty(n))return this.sanitizedSomething=!0,!Or.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);for(var r=e.attributes,i=0;i<r.length;i++){var a=r.item(i),o=a.name,s=o.toLowerCase();if(Er.hasOwnProperty(s)){var u=a.value;kr[s]&&(u=pr(u)),Sr[s]&&(t=u,u=(t=String(t)).split(",").map((function(e){return pr(e.trim())})).join(", ")),this.buf.push(" ",o,'="',Mr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();xr.hasOwnProperty(t)&&!yr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Mr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),Cr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ar=/([^\#-~ |!])/g;function Mr(e){return e.replace(/&/g,"&amp;").replace(Cr,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(Ar,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function jr(e,t){var n=null;try{gr=gr||function(e){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(e){return!1}}()?new lr:new hr(e)}(e);var r=t?String(t):"";n=gr.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=gr.getInertBodyElement(r)}while(r!==a);var o=new Tr,s=o.sanitizeChildren(Pr(n)||n);return ur()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=Pr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function Pr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Rr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function Ir(e){var t,n=(t=St())&&t[12];return n?n.sanitize(Rr.URL,e)||"":$n(e,"URL")?Qn(e):pr(yn(e))}function Dr(e,t){e.__ngContext__=t}function Fr(e){throw new Error("Multiple components match node with tagname ".concat(e.tagName))}function Lr(){throw new Error("Cannot mix multi providers and regular providers")}function Nr(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}function Br(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==Nr((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Hr(e){return 0===e.type&&"ng-template"!==e.tagName}function Ur(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function Vr(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(ln(e[t]))return t;return e.length}(i),o=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Ur(e,u,n)||""===u&&1===t.length){if(zr(r))return!1;o=!0}}else{var c=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!Br(e.attrs,c,n)){if(zr(r))return!1;o=!0}continue}var l=Wr(8&r?"class":u,i,Hr(e),n);if(-1===l){if(zr(r))return!1;o=!0;continue}if(""!==c){var h;h=l>a?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Nr(f,c,0)||2&r&&c!==h){if(zr(r))return!1;o=!0}}}}else{if(!o&&!zr(r)&&!zr(u))return!1;if(o&&zr(u))continue;o=!1,r=u|1&r}}return zr(r)||o}function zr(e){return 0==(1&e)}function Wr(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Gr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(Vr(e,t[r],n))return!0;return!1}function Kr(e,t){e:for(var n=0;n<t.length;n++){var r=t[n];if(e.length===r.length){for(var i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function qr(e,t){return e?":not("+t.trim()+")":t}function Xr(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var s=e[++n];i+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||zr(o)||(t+=qr(a,i),i=""),r=o,a=a||!zr(r);n++}return""!==i&&(t+=qr(a,i)),t}var Yr={};function Zr(e){var t=e[3];return Xe(t)?t[3]:t}function Jr(e){return $r(e[13])}function Qr(e){return $r(e[4])}function $r(e){for(;null!==e&&!Xe(e);)e=e[4];return e}function ei(e){ti(Et(),St(),Zt()+e,jt())}function ti(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&nn(t,i,n)}else{var a=e.preOrderHooks;null!==a&&rn(t,a,0,n)}Jt(n)}function ni(e,t){return e<<17|t<<2}function ri(e){return e>>17&32767}function ii(e){return 2|e}function ai(e){return(131068&e)>>2}function oi(e,t){return-131069&e|t<<2}function si(e){return 1|e}function ui(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r+1];if(-1!==i){var a=e.data[i];Ut(n[r]),a.contentQueries(2,t[i],i)}}}function ci(e,t,n){return ut(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function li(e,t,n,r,i,a,o,s,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,_t(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=s||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=a,l[16]=2==t.type?e[16]:l,l}function hi(e,t,n,r,i,a){var o=n+20,s=e.data[o]||function(e,t,n,r,i,a){var o=Tt(),s=At(),u=s?o:o&&o.parent,c=e.data[n]=xi(0,u&&u!==t?u:null,r,n,i,a);return null===e.firstChild&&(e.firstChild=c),o&&(!s||null!=o.child||null===c.parent&&2!==o.type?s||(o.next=c):o.child=c),c}(e,t,o,r,i,a);return Ct(s,!0),s}function fi(e,t,n){zt(t,t[6]);try{var r=e.viewQuery;null!==r&&Wi(1,r,n);var i=e.template;null!==i&&vi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ui(e,t),e.staticViewQueries&&Wi(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)Bi(e,t[n])}(t,a)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,Xt()}}function di(e,t,n,r){var i=t[2];if(256!=(256&i)){zt(t,t[6]);var a=jt();try{_t(t),xt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&vi(e,t,n,2,r);var o=3==(3&i);if(!a)if(o){var s=e.preOrderCheckHooks;null!==s&&nn(t,s,null)}else{var u=e.preOrderHooks;null!==u&&rn(t,u,0,null),an(t,0)}if(function(e){for(var t=Jr(e);null!==t;t=Qr(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r];0==(1024&i[2])&&wt(i[3],1),i[2]|=1024}}(t),function(e){for(var t=Jr(e);null!==t;t=Qr(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];yt(r)&&di(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&ui(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&nn(t,c)}else{var l=e.contentHooks;null!==l&&rn(t,l,1),an(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var r=e.expandoStartIndex,i=-1,a=0;a<n.length;a++){var o=n[a];"number"==typeof o?o<=0?(Jt(0-o),i=r+=9+n[++a]):r+=o:(null!==o&&(Lt(r,i),o(2,t[i])),i++)}}finally{Jt(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Ni(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&Wi(2,f,r),!a)if(o){var d=e.viewCheckHooks;null!==d&&nn(t,d)}else{var p=e.viewHooks;null!==p&&rn(t,p,2),an(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,wt(t[3],-1))}finally{Xt()}}}function pi(e,t,n,r){var i=t[10],a=!jt(),o=gt(t);try{a&&!o&&i.begin&&i.begin(),o&&fi(e,t,r),di(e,t,n,r)}finally{a&&!o&&i.end&&i.end()}}function vi(e,t,n,r,i){var a=Zt();try{Jt(-1),2&r&&t.length>20&&ti(e,t,0,jt()),n(r,i)}finally{Jt(a)}}function mi(e,t,n){if(Ye(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function gi(e,t,n){kt()&&(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||On(n,t),Dr(r,t);for(var o=n.initialInputs,s=i;s<a;s++){var u=e.data[s],c=Qe(u);c&&Ii(t,n,u);var l=Dn(t,e,s,n);Dr(l,t),null!==o&&Di(0,s-i,l,u,0,o),c&&(vt(n.index,t)[8]=l)}}(e,t,n,ft(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=e.expandoInstructions,o=e.firstCreatePass,s=n.index-20,u=xt.lFrame.currentDirectiveIndex;try{Jt(s);for(var c=r;c<i;c++){var l=e.data[c],h=t[c];Nt(c),null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs?Ci(l,h):o&&a.push(null)}}finally{Jt(-1),Nt(u)}}(e,t,n))}function yi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ft,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var o=r[a+1],s=-1===o?n(t,e):e[o];e[i++]=s}}function bi(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=_i(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function _i(e,t,n,r,i,a,o,s,u,c){var l=20+r,h=l+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:Yr);return n}(l,h);return f[1]={type:e,id:t,blueprint:f,template:n,queries:null,viewQuery:s,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function wi(e,t,n,r){var i=Ki(t);i.push(n),e.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1)}function xi(e,t,n,r,i,a){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ki(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Si(e,t,n,r,i,a,o,s){var u,c,l=ft(t,n),h=t.inputs;!s&&null!=h&&(u=h[r])?(Yi(e,n,u,r,i),Ze(t)&&function(e,t){var n=vt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=o?o(i,t.tagName||"",r):i,ut(a)?a.setProperty(l,r,i):hn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Ei(e,t,n,r){var i=!1;if(kt()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];Gr(n,o.selectors,!1)&&(i||(i=[]),Mn(On(n,t),e,o.type),Qe(o)?(2&n.flags&&Fr(n),Mi(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==a){var s=0;i=!0,Pi(n,e.data.length,a.length);for(var u=0;u<a.length;u++){var c=a[u];c.providersResolver&&c.providersResolver(c)}Ai(e,n,a.length);for(var l=!1,h=!1,f=0;f<a.length;f++){var d=a[f];n.mergedAttrs=fn(n.mergedAttrs,d.hostAttrs),Ri(e,t,d),ji(e.data.length-1,d,o),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-20),l=!0),h||!p.ngOnChanges&&!p.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-20),h=!0),Oi(e,d),s+=d.hostVars}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],o=null,s=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||Hr(t)?null:Fi(l,i);a.push(h),o=ki(l,u,o),s=ki(c.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=s}(e,n),Ti(e,t,s)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new Error("Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,o)}return n.mergedAttrs=fn(n.mergedAttrs,n.attrs),i}function Oi(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function Ti(e,t,n){for(var r=0;r<n;r++)t.push(Yr),e.blueprint.push(Yr),e.data.push(null)}function Ci(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ai(e,t,n){var r=20-t.index,i=e.data.length-(1048575&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function Mi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ji(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Qe(t)&&(n[""]=e)}}function Pi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ri(e,t,n){e.data.push(n);var r=n.factory||(n.factory=Ge(n.type)),i=new un(r,Qe(n),null);e.blueprint.push(i),t.push(i)}function Ii(e,t,n){var r=ft(t,e),i=bi(n),a=e[10],o=Hi(e,li(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n)));e[t.index]=o}function Di(e,t,n,r,i,a){var o=a[t];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var c=o[u++],l=o[u++],h=o[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function Fi(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Li(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Ni(e,t){var n=vt(t,e);if(yt(n)){var r=n[1];80&n[2]?di(r,n,r.template,n[8]):n[5]>0&&function e(t){for(var n=Jr(t);null!==n;n=Qr(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var a=i[1];di(a,i,a.template,i[8])}else i[5]>0&&e(i)}var o=t[1].components;if(null!==o)for(var s=0;s<o.length;s++){var u=vt(o[s],t);yt(u)&&u[5]>0&&e(u)}}(n)}}function Bi(e,t){var n=vt(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),fi(r,n,n[8])}function Hi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Ui(e){for(;e;){e[2]|=64;var t=Zr(e);if($e(e)&&!t)return e;e=t}return null}function Vi(e,t,n){var r=t[10];r.begin&&r.begin();try{di(e,t,e.template,n)}catch(i){throw Xi(t,i),i}finally{r.end&&r.end()}}function zi(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=mt(n),i=r[1];pi(i,r,i.template,n)}}(e[8])}function Wi(e,t,n){Ut(0),t(e,n)}var Gi=function(){return Promise.resolve(null)}();function Ki(e){return e[7]||(e[7]=[])}function qi(e,t,n){return(null===e||Qe(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function Xi(e,t){var n=e[9],r=n?n.get(Gn,null):null;r&&r.handleError(t)}function Yi(e,t,n,r,i){for(var a=0;a<n.length;){var o=n[a++],s=n[a++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function Zi(e,t,n){var r=ht(t,e),i=e[11];ut(i)?i.setValue(r,n):r.textContent=n}function Ji(e,t){var n=t[3];return-1===e.index?Xe(n)?n:null:n}function Qi(e,t){var n=Ji(e,t);return n?ha(t[11],n[7]):null}function $i(e,t,n,r,i){if(null!=r){var a,o=!1;Xe(r)?a=r:qe(r)&&(o=!0,r=r[0]);var s=lt(r);0===e&&null!==n?null==i?ca(t,n,s):ua(t,n,s,i||null):1===e&&null!==n?ua(t,n,s,i||null):2===e?function(e,t,n){var r=ha(e,t);r&&function(e,t,n,r){ut(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=a&&function(e,t,n,r,i){var a=n[7];a!==lt(n)&&$i(t,e,r,a,i);for(var o=10;o<n.length;o++){var s=n[o];ma(s[1],s,e,t,r,a)}}(t,e,a,n,i)}}function ea(e,t){return ut(t)?t.createText(e):t.createTextNode(e)}function ta(e,t,n,r){var i=Qi(e.node,t);i&&ma(e,t,t[11],n?1:2,i,r)}function na(e,t){var n=e[9],r=n.indexOf(t);1024&t[2]&&wt(t[3],-1),n.splice(r,1)}function ra(e,t){if(!(e.length<=10)){var n=10+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&na(i,r),t>0&&(e[n-1][4]=r[4]);var a=Ee(e,10+t);ta(r[1],r,!1,null);var o=a[19];null!==o&&o.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function ia(e,t){if(!(256&t[2])){var n=t[11];ut(n)&&n.destroyNode&&ma(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return oa(e[1],e);for(;t;){var n=null;if(qe(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)qe(t)&&oa(t[1],t),t=aa(t,e);null===t&&(t=e),qe(t)&&oa(t[1],t),n=t&&t[4]}t=n}}(t)}}function aa(e,t){var n;return qe(e)&&(n=e[6])&&2===n.type?Ji(n,e):e[3]===t?null:e[3]}function oa(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof un)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2)a[o+1].call(i[a[o]]);else a.call(i)}}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var r=t[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var a=n[i+1],o="function"==typeof a?a(t):lt(t[a]),s=n[i+3];"boolean"==typeof s?o.removeEventListener(n[i],r[n[i+2]],s):s>=0?r[s]():r[-s].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&ut(t[11])&&t[11].destroy();var r=t[17];if(null!==r&&Xe(t[3])){r!==t[3]&&na(r,t);var i=t[19];null!==i&&i.detachView(e)}}}function sa(e,t,n){for(var r=t.parent;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){var i=n[6];return 2===i.type?Qi(i,n):n[0]}if(t&&5===t.type&&4&t.flags)return ft(t,n).parentNode;if(2&r.flags){var a=e.data,o=a[a[r.index].directiveStart].encapsulation;if(o!==je.ShadowDom&&o!==je.Native)return null}return ft(r,n)}function ua(e,t,n,r){ut(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function ca(e,t,n){ut(e)?e.appendChild(t,n):t.appendChild(n)}function la(e,t,n,r){null!==r?ua(e,t,n,r):ca(e,t,n)}function ha(e,t){return ut(e)?e.parentNode(t):t.parentNode}function fa(e,t){if(2===e.type){var n=Ji(e,t);return null===n?null:pa(n.indexOf(t,10)-10,n)}return 4===e.type||5===e.type?ft(e,t):null}function da(e,t,n,r){var i=sa(e,r,t);if(null!=i){var a=t[11],o=fa(r.parent||t[6],t);if(Array.isArray(n))for(var s=0;s<n.length;s++)la(a,i,n[s],o);else la(a,i,n,o)}}function pa(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return function e(t,n){if(null!==n){var r=n.type;if(3===r)return ft(n,t);if(0===r)return pa(-1,t[n.index]);if(4===r||5===r){var i=n.child;if(null!==i)return e(t,i);var a=t[n.index];return Xe(a)?pa(-1,a):lt(a)}var o=t[16],s=o[6],u=Zr(o),c=s.projection[n.projection];return null!=c?e(u,c):e(t,n.next)}return null}(r,i)}return t[7]}function va(e,t,n,r,i,a,o){for(;null!=n;){var s=r[n.index],u=n.type;o&&0===t&&(s&&Dr(lt(s),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(va(e,t,n.child,r,i,a,!1),$i(t,e,i,s,a)):1===u?ya(e,t,r,n,i,a):$i(t,e,i,s,a)),n=o?n.projectionNext:n.next}}function ma(e,t,n,r,i,a){va(n,r,e.node.child,t,i,a,!1)}function ga(e,t,n){ya(t[11],0,t,n,sa(e,n,t),fa(n.parent||t[6],t))}function ya(e,t,n,r,i,a){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)$i(t,e,i,s[u],a);else va(e,t,s,o[3],i,a,!0)}function ba(e,t,n){ut(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function _a(e,t,n){ut(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var wa,xa,ka,Sa=function(){function e(t,n){Object(h.a)(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return Object(f.a)(e,[{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var o=n[r.index];if(null!==o&&i.push(lt(o)),Xe(o))for(var u=10;u<o.length;u++){var c=o[u],l=c[1].firstChild;null!==l&&e(c[1],c,l,i)}var h=r.type;if(4===h||5===h)e(t,n,r.child,i);else if(1===h){var f=n[16],d=f[6],p=r.projection,v=d.projection[p];if(Array.isArray(v))i.push.apply(i,Object(s.a)(v));else{var m=Zr(f);e(m[1],m,v,i,!0)}}r=a?r.projectionNext:r.next}return i}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}ia(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){wi(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){Ui(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Vi(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){Pt(!0);try{Vi(e,t,n)}finally{Pt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,ma(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),Ea=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e))._view=e,r}return Object(f.a)(n,[{key:"detectChanges",value:function(){zi(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Pt(!0);try{zi(e)}finally{Pt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Sa);function Oa(e,t,n){return wa||(wa=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return n}(e)),new wa(ft(t,n))}function Ta(e,t,n,r){return xa||(xa=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r,i){var a;return Object(h.a)(this,n),(a=t.call(this))._declarationView=e,a._declarationTContainer=r,a.elementRef=i,a}return Object(f.a)(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=li(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),fi(t,n,e),new Sa(n)}}]),n}(e)),0===n.type?new xa(r,n,Oa(t,n,r)):null}function Ca(e,t,n,r){var i;ka||(ka=function(e){Object(c.a)(r,e);var n=Object(l.a)(r);function r(e,t,i){var a;return Object(h.a)(this,r),(a=n.call(this))._lContainer=e,a._hostTNode=t,a._hostView=i,a}return Object(f.a)(r,[{key:"element",get:function(){return Oa(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new Bn(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=An(this._hostTNode,this._hostView),t=gn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.parent.injectorIndex;)i=i.parent;return i}for(var a=mn(e),o=t,s=t[6];a>1;)s=(o=o[15])[6],a--;return s}(e,this._hostView,this._hostTNode);return pn(e)&&null!=n?new Bn(n,t):new Bn(null,this._hostView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var o=a.get(we,null);o&&(i=o)}var s=e.create(a,r,void 0,i);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Xe(n[3])){var i=this.indexOf(e);if(-1!==i)this.detach(i);else{var a=n[3],o=new ka(a,a[6],a[3]);o.detach(o.indexOf(e))}}var s=this._adjustIndex(t);return function(e,t,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-10?(t[4]=n[i],Se(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var s=t[19];null!==s&&s.insertView(e),t[2]|=128}(r,n,this._lContainer,s),ta(r,n,!0,pa(s,this._lContainer)),e.attachToViewContainerRef(this),Se(this._lContainer[8],s,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);!function(e,t){var n=ra(e,t);n&&ia(n[1],n)}(this._lContainer,t),Ee(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=ra(this._lContainer,t);return n&&null!=Ee(this._lContainer[8],t)?new Sa(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}}]),r}(e));var a=r[n.index];if(Xe(a))i=a;else{var o;if(4===n.type)o=lt(a);else if(o=r[11].createComment(""),$e(r)){var s=r[11],u=ft(n,r);ua(s,ha(s,u),o,function(e,t){return ut(e)?e.nextSibling(t):t.nextSibling}(s,u))}else da(r[1],r,o,n);r[n.index]=i=Li(a,r,o,n),Hi(r,i)}return new ka(i,n,r)}function Aa(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ma(Tt(),St(),e)}function Ma(e,t,n){if(!n&&Ze(e)){var r=vt(e.index,t);return new Sa(r,r)}return 3===e.type||0===e.type||4===e.type||5===e.type?new Sa(t[16],t):null}var ja=function(){var e=function e(){Object(h.a)(this,e)};return e.__NG_ELEMENT_ID__=function(){return Pa()},e}(),Pa=Aa,Ra=Function,Ia=new oe("Set Injector scope."),Da={},Fa={},La=[],Na=void 0;function Ba(){return void 0===Na&&(Na=new be),Na}function Ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Ua(e,n,t||Ba(),r)}var Ua=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(h.a)(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&ke(n,(function(e){return i.processProvider(e,t,n)})),ke([t],(function(e){return i.processInjectorType(e,[],o)})),this.records.set(se,Wa(void 0,this));var s=this.records.get(Ia);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof t?null:U(t))}return Object(f.a)(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.Default;this.assertNotDestroyed();var r=fe(this);try{if(!(n&C.SkipSelf)){var i=this.records.get(e);if(void 0===i){var a=qa(e)&&R(e);i=a&&this.injectableDefInScope(a)?Wa(Va(e),Da):null,this.records.set(e,i)}if(null!=i)return this.hydrate(e,i)}var o=n&C.Self?Ba():this.parent;return o.get(e,t=n&C.Optional&&t===ue?null:t)}catch(u){if("NullInjectorError"===u.name){var s=u.ngTempTokenPath=u.ngTempTokenPath||[];if(s.unshift(U(e)),r)throw u;return _e(u,e,"R3InjectorError",this.source)}throw u}finally{fe(r)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(U(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=G(e)))return!1;var i=D(e),a=null==i&&e.ngModule||void 0,o=void 0===a?e:a,s=-1!==n.indexOf(o);if(void 0!==a&&(i=D(a)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(o);try{ke(i.imports,(function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))}))}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,i=t.providers;ke(i,(function(e){return r.processProvider(e,n,i||La)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(o),this.records.set(o,Wa(i.factory,Da));var h=i.providers;if(null!=h&&!s){var f=e;ke(h,(function(e){return r.processProvider(e,f,h)}))}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=Ka(e=G(e))?e:G(e&&e.provide),i=function(e,t,n){return Ga(e)?Wa(void 0,e.useValue):Wa(za(e,t,n),Da)}(e,t,n);if(Ka(e)||!0!==e.multi){var a=this.records.get(r);a&&void 0!==a.multi&&Lr()}else{var o=this.records.get(r);o?void 0===o.multi&&Lr():((o=Wa(void 0,Da,!0)).factory=function(){return ye(o.multi)},this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===Fa?function(e){throw new Error("Cannot instantiate cyclic dependency! ".concat(e))}(U(e)):t.value===Da&&(t.value=Fa,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}]),e}();function Va(e){var t=R(e),n=null!==t?t.factory:Ge(e);if(null!==n)return n;var r=D(e);if(null!==r)return r.factory;if(e instanceof oe)throw new Error("Token ".concat(U(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=Oe(t,"?");throw new Error("Can't resolve all parameters for ".concat(U(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[F]||e[B]||e[N]&&e[N]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function za(e,t,n){var r,i=void 0;if(Ka(e)){var a=G(e);return Ge(a)||Va(a)}if(Ga(e))i=function(){return G(e.useValue)};else if((r=e)&&r.useFactory)i=function(){return e.useFactory.apply(e,Object(s.a)(ye(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return ve(G(e.useExisting))};else{var o=G(e&&(e.useClass||e.provide));if(o||function(e,t,n){var r="";if(e&&t){var i=t.map((function(e){return e==n?"?"+n+"?":"..."}));r=" - only instances of Provider and Type are allowed, got: [".concat(i.join(", "),"]")}throw new Error("Invalid provider for the NgModule '".concat(U(e),"'")+r)}(t,n,e),!function(e){return!!e.deps}(e))return Ge(o)||Va(o);i=function(){return v(o,Object(s.a)(ye(e.deps)))}}return i}function Wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Ga(e){return null!==e&&"object"==typeof e&&le in e}function Ka(e){return"function"==typeof e}function qa(e){return"function"==typeof e||"object"==typeof e&&e instanceof oe}var Xa=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Ha(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},Ya=function(){var e=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Xa(e,t,""):Xa(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=ue,e.NULL=new be,e.\u0275prov=j({token:e,providedIn:"any",factory:function(){return ve(se)}}),e.__NG_ELEMENT_ID__=-1,e}(),Za=new oe("AnalyzeForEntryComponents");function Ja(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?a=s:1==a?i=V(i,s):2==a&&(r=V(r,s+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Qa=null;function $a(){if(!Qa){var e=Q.Symbol;if(e&&e.iterator)Qa=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Qa=r)}}return Qa}var eo=function(){function e(t){Object(h.a)(this,e),this.wrapped=t}return Object(f.a)(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function to(e){return!!no(e)&&(Array.isArray(e)||!(e instanceof Map)&&$a()in e)}function no(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ro(e,t,n){return e[t]=n}function io(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ao(e,t,n,r){var i=io(e,t,n);return io(e,t+1,r)||i}function oo(e,t,n,r){var i=St();return io(i,Dt(),t)&&(Et(),function(e,t,n,r,i,a){var o=ft(e,t),s=t[11];if(null==r)ut(s)?s.removeAttribute(o,n,a):o.removeAttribute(n);else{var u=null==i?yn(r):i(r,e.tagName||"",n);ut(s)?s.setAttribute(o,n,u,a):a?o.setAttributeNS(a,n,u):o.setAttribute(n,u)}}(Qt(),i,e,t,n,r)),oo}function so(e,t,n,r){return io(e,Dt(),n)?t+yn(n)+r:Yr}function uo(e,t,n,r,i,a,o,s){var u=St(),c=Et(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,a,o,s,u){var c=t.consts,l=hi(t,n[6],e,0,o||null,bt(c,s));Ei(t,n,l,bt(c,u)),tn(t,l);var h=l.tViews=_i(2,-1,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c),f=xi(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(e,c,u,t,n,r,i,a,o):c.data[l];Ct(h,!1);var f=u[11].createComment("");da(c,u,f,h),Dr(f,u),Hi(u,u[l]=Li(f,u,f,h)),Je(h)&&gi(c,u,h),null!=o&&yi(u,h,s)}function co(e){return pt(xt.lFrame.contextLView,e)}function lo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.Default,n=St();if(null==n)return ve(e,t);var r=Tt();return jn(r,n,G(e),t)}function ho(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(ln(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}return null}(Tt(),e)}function fo(e,t,n){var r=St();return io(r,Dt(),t)&&Si(Et(),Qt(),r,e,t,r[11],n,!1),fo}function po(e,t,n,r,i){var a=i?"class":"style";Yi(e,n,t.inputs[a],a,r)}function vo(e,t,n,r){var i=St(),a=Et(),o=20+e,s=i[11],u=i[o]=ci(t,s,xt.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,r,i,a,o){var s=t.consts,u=bt(s,a),c=hi(t,n[6],e,3,i,u);return Ei(t,n,c,bt(s,o)),null!==c.attrs&&Ja(c,c.attrs,!1),null!==c.mergedAttrs&&Ja(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(e,a,i,0,t,n,r):a.data[o];Ct(c,!0);var l=c.mergedAttrs;null!==l&&cn(s,u,l);var h=c.classes;null!==h&&_a(s,u,h);var f=c.styles;null!==f&&ba(s,u,f),da(a,i,u,c),0===xt.lFrame.elementDepthCount&&Dr(u,i),xt.lFrame.elementDepthCount++,Je(c)&&(gi(a,i,c),mi(a,c,i)),null!==r&&yi(i,c)}function mo(){var e=Tt();At()?Mt():Ct(e=e.parent,!1);var t=e;xt.lFrame.elementDepthCount--;var n=Et();n.firstCreatePass&&(tn(n,e),Ye(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&po(n,t,St(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&po(n,t,St(),t.stylesWithoutHost,!1)}function go(e,t,n,r){vo(e,t,n,r),mo()}function yo(e,t,n){var r=St(),i=Et(),a=e+20,o=i.firstCreatePass?function(e,t,n,r,i){var a=t.consts,o=bt(a,r),s=hi(t,n[6],e,4,"ng-container",o);return null!==o&&Ja(s,o,!0),Ei(t,n,s,bt(a,i)),null!==t.queries&&t.queries.elementStart(t,s),s}(e,i,r,t,n):i.data[a];Ct(o,!0);var s=r[a]=r[11].createComment("");da(i,r,s,o),Dr(s,r),Je(o)&&(gi(i,r,o),mi(i,o,r)),null!=n&&yi(r,o)}function bo(){var e=Tt(),t=Et();At()?Mt():Ct(e=e.parent,!1),t.firstCreatePass&&(tn(t,e),Ye(e)&&t.queries.elementEnd(e))}function _o(){return St()}function wo(e){return!!e&&"function"==typeof e.then}function xo(e){return!!e&&"function"==typeof e.subscribe}function ko(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=St(),a=Et(),o=Tt();return Oo(a,i,i[11],o,e,t,n,r),ko}function So(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Tt(),a=St(),o=Et(),s=Bt(o.data),u=qi(s,i,a);return Oo(o,a,u,i,e,t,n,r),So}function Eo(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var s=t[7],u=i[a+2];return s.length>u?s[u]:null}"string"==typeof o&&(a+=2)}return null}function Oo(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Je(r),c=e.firstCreatePass,l=c&&(e.cleanup||(e.cleanup=[])),h=Ki(t),f=!0;if(3===r.type){var d=ft(r,t),p=s?s(d):Pe,v=p.target||d,m=h.length,g=s?function(e){return s(lt(e[r.index])).target}:r.index;if(ut(n)){var y=null;if(!s&&u&&(y=Eo(e,t,i,r.index)),null!==y){var b=y.__ngLastListenerFn__||y;b.__ngNextListenerFn__=a,y.__ngLastListenerFn__=a,f=!1}else{a=Co(r,t,a,!1);var _=n.listen(p.name||v,i,a);h.push(a,_),l&&l.push(i,g,m,m+1)}}else a=Co(r,t,a,!0),v.addEventListener(i,a,o),h.push(a),l&&l.push(i,g,m,o)}var w,x=r.outputs;if(f&&null!==x&&(w=x[i])){var k=w.length;if(k)for(var S=0;S<k;S+=2){var E=w[S],O=w[S+1],T=t[E],C=T[O],A=C.subscribe(a),M=h.length;h.push(a,A),l&&l.push(i,r.index,M,-(M+1))}}}function To(e,t,n){try{return!1!==t(n)}catch(r){return Xi(e,r),!1}}function Co(e,t,n,r){return function i(a){if(a===Function)return n;var o=2&e.flags?vt(e.index,t):t;0==(32&t[2])&&Ui(o);for(var s=To(t,n,a),u=i.__ngNextListenerFn__;u;)s=To(t,u,a)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function Ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Yt(e)}function Mo(e,t){for(var n=null,r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e),i=0;i<t.length;i++){var a=t[i];if("*"!==a){if(null===r?Gr(e,a,!0):Kr(r,a))return i}else n=i}return n}function jo(e){var t=St()[16][6];if(!t.projection)for(var n=t.projection=Oe(e?e.length:1,null),r=n.slice(),i=t.child;null!==i;){var a=e?Mo(i,e):0;null!==a&&(r[a]?r[a].projectionNext=i:n[a]=i,r[a]=i),i=i.next}}function Po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=St(),i=Et(),a=hi(i,r[6],e,1,null,n||null);null===a.projection&&(a.projection=t),Mt(),ga(i,r,a)}var Ro=[];function Io(e,t,n,r,i){for(var a=e[n+1],o=null===t,s=r?ri(a):ai(a),u=!1;0!==s&&(!1===u||o);){var c=e[s+1];Do(e[s],t)&&(u=!0,e[s+1]=r?si(c):ii(c)),s=r?ri(c):ai(c)}u&&(e[n+1]=r?ii(a):si(a))}function Do(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Ae(e,t)>=0}var Fo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Lo(e){return e.substring(Fo.key,Fo.keyEnd)}function No(e,t){var n=Fo.textEnd;return n===t?-1:(t=Fo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Fo.key=t,n),Bo(e,t,n))}function Bo(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Ho(e,t,n){return zo(e,t,n,!1),Ho}function Uo(e,t){return zo(e,t,null,!0),Uo}function Vo(e,t){for(var n=function(e){return function(e){Fo.key=0,Fo.keyEnd=0,Fo.value=0,Fo.valueEnd=0,Fo.textEnd=e.length}(e),No(e,Bo(e,0,Fo.textEnd))}(t);n>=0;n=No(t,n))Te(e,Lo(t),!0)}function zo(e,t,n,r){var i=St(),a=Et(),o=Ft(2);a.firstUpdatePass&&Go(a,e,o,r),t!==Yr&&io(i,o,t)&&Xo(a,a.data[Zt()+20],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=U(Qn(e)))),e}(t,n),r,o)}function Wo(e,t){return t>=e.expandoStartIndex}function Go(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[Zt()+20],o=Wo(e,n);Jo(a,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=Bt(e),a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=qo(n=Ko(null,e,t,n,r),t.attrs,r),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Ko(i,e,t,n,r),null===a){var s=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==ai(r))return e[ri(r)]}(e,t,r);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[ri(n?t.classBindings:t.styleBindings)]=r}(e,t,r,s=qo(s=Ko(null,e,t,s[1],r),t.attrs,r))}else a=function(e,t,n){for(var r=void 0,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=qo(r,e[a].hostAttrs,n);return qo(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function(e,t,n,r,i,a){var o=a?t.classBindings:t.styleBindings,s=ri(o),u=ai(o);e[r]=n;var c,l=!1;if(Array.isArray(n)?(null===(c=n[1])||Ae(n,c)>0)&&(l=!0):c=n,i)if(0!==u){var h=ri(e[s+1]);e[r+1]=ni(h,s),0!==h&&(e[h+1]=oi(e[h+1],r)),e[s+1]=131071&e[s+1]|r<<17}else e[r+1]=ni(s,0),0!==s&&(e[s+1]=oi(e[s+1],r)),s=r;else e[r+1]=ni(u,0),0===s?s=r:e[u+1]=oi(e[u+1],r),u=r;l&&(e[r+1]=ii(e[r+1])),Io(e,c,r,!0),Io(e,c,r,!1),function(e,t,n,r,i){var a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&Ae(a,t)>=0&&(n[r+1]=si(n[r+1]))}(t,c,e,r,a),o=ni(s,u),a?t.classBindings=o:t.styleBindings=o}(i,a,t,n,o,r)}}function Ko(e,t,n,r,i){var a=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=qo(r,(a=t[s]).hostAttrs,i),a!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function qo(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var a=0;a<t.length;a++){var o=t[a];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Te(e,o,!!n||t[++a]))}return void 0===e?null:e}function Xo(e,t,n,r,i,a,o,s){if(3===t.type){var u=e.data,c=u[s+1];Zo(1==(1&c)?Yo(u,t,n,i,ai(c),o):void 0)||(Zo(a)||function(e){return 2==(2&e)}(c)&&(a=Yo(u,null,n,i,s,o)),function(e,t,n,r,i){var a=ut(e);if(t)i?a?e.addClass(n,r):n.classList.add(r):a?e.removeClass(n,r):n.classList.remove(r);else{var o=-1==r.indexOf("-")?void 0:2;null==i?a?e.removeStyle(n,r,o):n.style.removeProperty(r):a?e.setStyle(n,r,i,o):n.style.setProperty(r,i)}}(r,o,ht(Zt(),n),i,a))}}function Yo(e,t,n,r,i,a){for(var o=null===t,s=void 0;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===Yr&&(f=h?Ro:void 0);var d=h?Ce(f,r):l===r?f:void 0;if(c&&!Zo(d)&&(d=Ce(u,r)),Zo(d)&&(s=d,o))return s;var p=e[i+1];i=o?ri(p):ai(p)}if(null!==t){var v=a?t.residualClasses:t.residualStyles;null!=v&&(s=Ce(v,r))}return s}function Zo(e){return void 0!==e}function Jo(e,t){return 0!=(e.flags&(t?16:32))}function Qo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=St(),r=Et(),i=e+20,a=r.firstCreatePass?hi(r,n[6],e,3,null,null):r.data[i],o=n[i]=ea(t,n[11]);da(r,n,o,a),Ct(a,!1)}function $o(e){return es("",e,""),$o}function es(e,t,n){var r=St(),i=so(r,e,t,n);return i!==Yr&&Zi(r,Zt(),i),es}function ts(e,t,n,r,i){var a=St(),o=function(e,t,n,r,i,a){var o=ao(e,It(),n,i);return Ft(2),o?t+yn(n)+r+yn(i)+a:Yr}(a,e,t,n,r,i);return o!==Yr&&Zi(a,Zt(),o),ts}function ns(e,t,n){!function(e,t,n,r){var i=Et(),a=Ft(2);i.firstUpdatePass&&Go(i,null,a,!0);var o=St();if(n!==Yr&&io(o,a,n)){var s=i.data[Zt()+20];if(Jo(s,!0)&&!Wo(i,a)){var u=s.classesWithoutHost;null!==u&&(n=V(u,n||"")),po(i,s,o,n,!0)}else!function(e,t,n,r,i,a,o,s){i===Yr&&(i=Ro);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<a.length?a[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<a.length?a[c+1]:void 0,p=null,v=void 0;l===h?(u+=2,c+=2,f!==d&&(p=h,v=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,v=d),null!==p&&Xo(e,t,n,r,p,v,!0,s),l=u<i.length?i[u]:null,h=c<a.length?a[c]:null}}(i,s,o,o[11],o[a+1],o[a+1]=function(e,t,n){if(null==n||""===n)return Ro;var r=[],i=Qn(n);if(Array.isArray(i))for(var a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),0,a)}}(Te,Vo,so(St(),e,t,n))}function rs(e,t,n){var r=St();return io(r,Dt(),t)&&Si(Et(),Qt(),r,e,t,r[11],n,!0),rs}function is(e,t,n){var r=St();if(io(r,Dt(),t)){var i=Et(),a=Qt();Si(i,a,r,e,t,qi(Bt(i.data),a,r),n,!0)}return is}function as(e,t){var n=mt(e)[1],r=n.data.length-1;tn(n,{directiveStart:r,directiveEnd:r+1})}function os(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var i=void 0;if(Qe(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var a=e;a.inputs=ss(e.inputs),a.declaredInputs=ss(e.declaredInputs),a.outputs=ss(e.outputs);var o=i.hostBindings;o&&ls(e,o);var s=i.viewQuery,u=i.contentQueries;if(s&&us(e,s),u&&cs(e,u),M(e.inputs,i.inputs),M(e.declaredInputs,i.declaredInputs),M(e.outputs,i.outputs),Qe(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===os&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=fn(i.hostAttrs,n=fn(n,i.hostAttrs))}}(r)}function ss(e){return e===Pe?{}:e===Re?[]:e}function us(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function cs(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function ls(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}function hs(e,t,n){var r=Et();if(r.firstCreatePass){var i=Qe(e);fs(n,r.data,r.blueprint,i,!0),fs(t,r.data,r.blueprint,i,!1)}}function fs(e,t,n,r,i){if(e=G(e),Array.isArray(e))for(var a=0;a<e.length;a++)fs(e[a],t,n,r,i);else{var o=Et(),s=St(),u=Ka(e)?e:G(e.provide),c=za(e),l=Tt(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(Ka(e)||!e.multi){var p=new un(c,i,lo),v=vs(u,t,i?h:h+d,f);-1===v?(Mn(On(l,s),o,u),ds(o,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var m=vs(u,t,h+d,f),g=vs(u,t,h,h+d),y=g>=0&&n[g];if(i&&!y||!i&&!(m>=0&&n[m])){Mn(On(l,s),o,u);var b=function(e,t,n,r,i){var a=new un(e,n,lo);return a.multi=[],a.index=t,a.componentProviders=0,ps(a,i,r&&!n),a}(i?gs:ms,n.length,i,r,c);!i&&y&&(n[g].providerFactory=b),ds(o,e,t.length,0),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),s.push(b)}else ds(o,e,m>-1?m:g,ps(n[i?g:m],c,!i&&r));!i&&r&&y&&n[g].componentProviders++}}}function ds(e,t,n,r){var i=Ka(t);if(i||t.useClass){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var s=o.indexOf(n);-1===s?o.push(n,[r,a]):o[s+1].push(r,a)}else o.push(n,a)}}}function ps(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function vs(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function ms(e,t,n,r){return ys(this.multi,[])}function gs(e,t,n,r){var i,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=Dn(n,n[1],this.providerFactory.index,r);ys(a,i=s.slice(0,o));for(var u=o;u<s.length;u++)i.push(s[u])}else ys(a,i=[]);return i}function ys(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function bs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return hs(n,r?r(e):e,t)}}}var _s=function e(){Object(h.a)(this,e)},ws=function e(){Object(h.a)(this,e)},xs=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(U(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),ks=function(){var e=function e(){Object(h.a)(this,e)};return e.NULL=new xs,e}(),Ss=function(){var e=function e(t){Object(h.a)(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return Es(e)},e}(),Es=function(e){return Oa(e,Tt(),St())},Os=function e(){Object(h.a)(this,e)},Ts=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),Cs=function(){var e=function e(){Object(h.a)(this,e)};return e.__NG_ELEMENT_ID__=function(){return As()},e}(),As=function(){var e=St(),t=vt(Tt().index,e);return function(e){var t=e[11];if(ut(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(qe(t)?t:e)},Ms=function(){var e=function e(){Object(h.a)(this,e)};return e.\u0275prov=j({token:e,providedIn:"root",factory:function(){return null}}),e}(),js=function e(t){Object(h.a)(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},Ps=new js("10.0.5"),Rs=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"supports",value:function(e){return to(e)}},{key:"create",value:function(e){return new Ds(e)}}]),e}(),Is=function(e,t){return t},Ds=function(){function e(t){Object(h.a)(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Is}return Object(f.a)(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<Bs(n,r,i)?t:n,o=Bs(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var u=o-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[a.previousIndex]=c-u}}o!==s&&e(a,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!to(e))throw new Error("Error trying to diff '".concat(U(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=e[s]),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,s)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,s),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[$a()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,i)?(o&&(a=t._verifyReinsertion(a,e,i,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),o=!0),a=a._next,n++})),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Fs(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ns),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ns),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),Fs=function e(t,n){Object(h.a)(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ls=function(){function e(){Object(h.a)(this,e),this._head=null,this._tail=null}return Object(f.a)(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Ns=function(){function e(){Object(h.a)(this,e),this.map=new Map}return Object(f.a)(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Ls,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function Bs(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Hs=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"supports",value:function(e){return e instanceof Map||no(e)}},{key:"create",value:function(){return new Us}}]),e}(),Us=function(){function e(){Object(h.a)(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object(f.a)(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||no(e)))throw new Error("Error trying to diff '".concat(U(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new Vs(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}}]),e}(),Vs=function e(t){Object(h.a)(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},zs=function(){var e=function(){function e(t){Object(h.a)(this,e),this.factories=t}return Object(f.a)(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new T,new E]]}}}]),e}();return e.\u0275prov=j({token:e,providedIn:"root",factory:function(){return new e([new Rs])}}),e}(),Ws=function(){var e=function(){function e(t){Object(h.a)(this,e),this.factories=t}return Object(f.a)(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new T,new E]]}}}]),e}();return e.\u0275prov=j({token:e,providedIn:"root",factory:function(){return new e([new Hs])}}),e}(),Gs=[new Hs],Ks=new zs([new Rs]),qs=new Ws(Gs),Xs=function(){var e=function e(){Object(h.a)(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ys(e,Ss)},e}(),Ys=function(e,t){return Ta(e,t,Tt(),St())},Zs=function(){var e=function e(){Object(h.a)(this,e)};return e.__NG_ELEMENT_ID__=function(){return Js(e,Ss)},e}(),Js=function(e,t){return Ca(e,t,Tt(),St())},Qs={},$s=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this)).ngModule=e,r}return Object(f.a)(n,[{key:"resolveComponentFactory",value:function(e){var t=We(e);return new nu(t,this.ngModule)}}]),n}(ks);function eu(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var tu=new oe("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return _n}}),nu=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(h.a)(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(Xr).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return Object(f.a)(n,[{key:"inputs",get:function(){return eu(this.componentDef.inputs)}},{key:"outputs",get:function(){return eu(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,a,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,Qs,i);return a!==Qs||r===Qs?a:t.get(n,r,i)}}}(e,r.injector):e,s=o.get(Os,ct),u=o.get(Ms,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(ut(e))return e.selectRootElement(t,n===je.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):ci(l,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:_n,clean:Gi,playerHandler:null,flags:0},p=_i(0,-1,null,1,0,null,null,null,null,null),v=li(null,p,d,f,null,null,s,c,u,o);zt(v,null);try{var m=function(e,t,n,r,i,a){var o=n[1];n[20]=e;var s=hi(o,null,0,3,null,null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(Ja(s,u,!0),null!==e&&(cn(i,e,u),null!==s.classes&&_a(i,e,s.classes),null!==s.styles&&ba(i,e,s.styles)));var c=r.createRenderer(e,t),l=li(n,bi(t),null,t.onPush?64:16,n[20],s,r,c,void 0);return o.firstCreatePass&&(Mn(On(s,n),o,t.type),Mi(o,s),Pi(s,n.length,1)),Hi(n,l),n[20]=l}(h,this.componentDef,v,s,c);if(h)if(n)cn(c,h,["ng-version",Ps.full]);else{var g=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!zr(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=g.attrs,b=g.classes;y&&cn(c,h,y),b&&b.length>0&&_a(c,h,b.join(" "))}if(a=dt(p,0),void 0!==t)for(var _=a.projection=[],w=0;w<this.ngContentSelectors.length;w++){var x=t[w];_.push(null!=x?Array.from(x):null)}i=function(e,t,n,r,i){var a=n[1],o=function(e,t,n){var r=Tt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ai(e,r,1),Ri(e,t,n));var i=Dn(t,e,t.length-1,r);Dr(i,t);var a=ft(r,t);return a&&Dr(a,t),i}(a,n,t);r.components.push(o),e[8]=o,i&&i.forEach((function(e){return e(o,t)})),t.contentQueries&&t.contentQueries(1,o,n.length-1);var s=Tt();if(a.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Jt(s.index-20);var u=n[1];Oi(u,t),Ti(u,n,t.hostVars),Ci(t,o)}return o}(m,this.componentDef,v,d,[as]),fi(p,v,null)}finally{Xt()}var k=new ru(this.componentType,i,Oa(Ss,a,v),v,a);return p.node.child=a,k}}]),n}(ws),ru=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a,o){var s,u,c,l;return Object(h.a)(this,n),(s=t.call(this)).location=i,s._rootLView=a,s._tNode=o,s.destroyCbs=[],s.instance=r,s.hostView=s.changeDetectorRef=new Ea(a),c=a,null==(l=(u=a[1]).node)&&(u.node=l=xi(0,null,2,-1,null,null)),c[6]=l,s.componentType=e,s}return Object(f.a)(n,[{key:"injector",get:function(){return new Bn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}}]),n}(_s),iu=void 0,au=["en",[["a","p"],["AM","PM"],iu],[["AM","PM"],iu,iu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],iu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],iu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",iu,"{1} 'at' {0}",iu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],ou={};function su(e,t,n){"string"!=typeof t&&(n=t,t=e[fu.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),ou[t]=e,n&&(ou[t][fu.ExtraData]=n)}function uu(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=hu(t);if(n)return n;var r=t.split("-")[0];if(n=hu(r))return n;if("en"===r)return au;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function cu(e){return uu(e)[fu.CurrencyCode]||null}function lu(e){return uu(e)[fu.PluralCase]}function hu(e){return e in ou||(ou[e]=Q.ng&&Q.ng.common&&Q.ng.common.locales&&Q.ng.common.locales[e]),ou[e]}var fu=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});function du(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+" [Expected=> ".concat(null," ").concat("!="," ").concat(t," <=Actual]"))}(n,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var pu=new Map,vu=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;Object(h.a)(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=Object(a.a)(i),i.destroyCbs=[],i.componentFactoryResolver=new $s(Object(a.a)(i));var o=Ke(e),s=e[re]||null;return s&&du(s),i._bootstrapComponents=xn(o.bootstrap),i._r3Injector=Ha(e,r,[{provide:we,useValue:Object(a.a)(i)},{provide:ks,useValue:i.componentFactoryResolver}],U(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return Object(f.a)(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ya.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.Default;return e===Ya||e===we||e===se?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(we),mu=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this)).moduleType=e,null!==Ke(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(U(t)," vs ").concat(U(t.name)))})(n,pu.get(n),t),pu.set(n,t)}var r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(t){return e(t)}))}(e),r}return Object(f.a)(n,[{key:"create",value:function(e){return new vu(this.moduleType,e)}}]),n}(xe);function gu(e,t,n){var r=Rt()+e,i=St();return i[r]===Yr?ro(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function yu(e,t,n,r){return wu(St(),Rt(),e,t,n,r)}function bu(e,t,n,r,i){return xu(St(),Rt(),e,t,n,r,i)}function _u(e,t){var n=e[t];return n===Yr?void 0:n}function wu(e,t,n,r,i,a){var o=t+n;return io(e,o,i)?ro(e,o+1,a?r.call(a,i):r(i)):_u(e,o+1)}function xu(e,t,n,r,i,a,o){var s=t+n;return ao(e,s,i,a)?ro(e,s+2,o?r.call(o,i,a):r(i,a)):_u(e,s+2)}function ku(e,t){var n,r=Et(),i=e+20;r.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new Error("The pipe '".concat(e,"' could not be found!"))}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var a=n.factory||(n.factory=Ge(n.type)),o=de(lo),s=Sn(!1),u=a();return Sn(s),de(o),function(e,t,n,r){var i=n+20;i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),t[i]=r}(r,St(),e,u),u}function Su(e,t,n){var r=St(),i=pt(r,e);return Tu(r,Ou(r,e)?wu(r,Rt(),t,i.transform,n,i):i.transform(n))}function Eu(e,t,n,r){var i=St(),a=pt(i,e);return Tu(i,Ou(i,e)?xu(i,Rt(),t,a.transform,n,r,a):a.transform(n,r))}function Ou(e,t){return e[1].data[t+20].pure}function Tu(e,t){return eo.isWrapped(t)&&(t=eo.unwrap(t),e[It()]=Yr),t}var Cu=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(h.a)(this,n),(e=t.call(this)).__isAsync=r,e}return Object(f.a)(n,[{key:"emit",value:function(e){Object(r.a)(Object(i.a)(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,a){var o,s=function(e){return null},u=function(){return null};e&&"object"==typeof e?(o=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(s=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(u=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(s=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),a&&(u=this.__isAsync?function(){setTimeout((function(){return a()}))}:function(){a()}));var c=Object(r.a)(Object(i.a)(n.prototype),"subscribe",this).call(this,o,s,u);return e instanceof m.a&&e.add(c),c}}]),n}(g.a);function Au(){return this._results[$a()]()}var Mu=function(){function e(){Object(h.a)(this,e),this.dirty=!0,this._results=[],this.changes=new Cu,this.length=0;var t=$a(),n=e.prototype;n[t]||(n[t]=Au)}return Object(f.a)(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),ju=function(){function e(t){Object(h.a)(this,e),this.queryList=t,this.matches=null}return Object(f.a)(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),Pu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(h.a)(this,e),this.queries=t}return Object(f.a)(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Yu(e,t).matches&&this.queries[t].setDirty()}}]),e}(),Ru=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(h.a)(this,e),this.predicate=t,this.descendants=n,this.isStatic=r,this.read=i},Iu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(h.a)(this,e),this.queries=t}return Object(f.a)(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),Du=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(h.a)(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return Object(f.a)(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&4===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){if(Array.isArray(this.metadata.predicate))for(var n=this.metadata.predicate,r=0;r<n.length;r++)this.matchTNodeWithReadOption(e,t,Fu(t,n[r]));else{var i=this.metadata.predicate;i===Xs?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,In(t,e,i,!1,!1))}}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Ss||r===Zs||r===Xs&&0===t.type)this.addMatch(t.index,-2);else{var i=In(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function Fu(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Lu(e,t,n,r){return-1===n?function(e,t){return 3===e.type||4===e.type?Oa(Ss,e,t):0===e.type?Ta(Xs,Ss,e,t):null}(t,e):-2===n?function(e,t,n){return n===Ss?Oa(Ss,t,e):n===Xs?Ta(Xs,Ss,t,e):n===Zs?Ca(Zs,Ss,t,e):void 0}(e,t,r):Dn(e,e[1],n,t)}function Nu(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var a=e.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var c=o[u];s.push(c<0?null:Lu(t,a[c],o[u+1],n.metadata.read))}i.matches=s}return i.matches}function Bu(e){var t=St(),n=Et(),r=Ht();Ut(r+1);var i=Yu(n,r);if(e.dirty&&gt(t)===i.metadata.isStatic){if(null===i.matches)e.reset([]);else{var a=i.crossesNgTemplate?function e(t,n,r,i){var a=t.queries.getByIndex(r),o=a.matches;if(null!==o)for(var s=Nu(t,n,a,r),u=0;u<o.length;u+=2){var c=o[u];if(c>0)i.push(s[u/2]);else{for(var l=o[u+1],h=n[-c],f=10;f<h.length;f++){var d=h[f];d[17]===d[3]&&e(d[1],d,l,i)}if(null!==h[9])for(var p=h[9],v=0;v<p.length;v++){var m=p[v];e(m[1],m,l,i)}}}return i}(n,t,r,[]):Nu(n,t,i,r);e.reset(a),e.notifyOnChanges()}return!0}return!1}function Hu(e,t,n){Vu(Et(),St(),e,t,n,!0)}function Uu(e,t,n){Vu(Et(),St(),e,t,n,!1)}function Vu(e,t,n,r,i,a){e.firstCreatePass&&(Xu(e,new Ru(n,r,a,i),-1),a&&(e.staticViewQueries=!0)),qu(e,t)}function zu(e,t,n,r){Gu(Et(),St(),t,n,r,!1,Tt(),e)}function Wu(e,t,n,r){Gu(Et(),St(),t,n,r,!0,Tt(),e)}function Gu(e,t,n,r,i,a,o,s){e.firstCreatePass&&(Xu(e,new Ru(n,r,a,i),o.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(e,s),a&&(e.staticContentQueries=!0)),qu(e,t)}function Ku(){return e=St(),t=Ht(),e[19].queries[t].queryList;var e,t}function qu(e,t){var n=new Mu;wi(e,t,n,n.destroy),null===t[19]&&(t[19]=new Pu),t[19].queries.push(new ju(n))}function Xu(e,t,n){null===e.queries&&(e.queries=new Iu),e.queries.track(new Du(t,n))}function Yu(e,t){return e.queries.getByIndex(t)}function Zu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.Default,t=Aa(!0);if(null!=t||e&C.Optional)return t;throw new Error("No provider for ChangeDetectorRef!")}var Ju=new oe("Application Initializer"),Qu=function(){var e=function(){function e(t){var n=this;Object(h.a)(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return Object(f.a)(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();wo(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ve(Ju,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}(),$u=new oe("AppId"),ec={provide:$u,useFactory:function(){return"".concat(tc()).concat(tc()).concat(tc())},deps:[]};function tc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var nc=new oe("Platform Initializer"),rc=new oe("Platform ID"),ic=new oe("appBootstrapListener"),ac=function(){var e=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}(),oc=new oe("LocaleId"),sc=new oe("DefaultCurrencyCode"),uc=function e(t,n){Object(h.a)(this,e),this.ngModuleFactory=t,this.componentFactories=n},cc=function(e){return new mu(e)},lc=cc,hc=function(e){return Promise.resolve(cc(e))},fc=function(e){var t=cc(e),n=xn(Ke(e).declarations).reduce((function(e,t){var n=We(t);return n&&e.push(new nu(n)),e}),[]);return new uc(t,n)},dc=fc,pc=function(e){return Promise.resolve(fc(e))},vc=function(){var e=function(){function e(){Object(h.a)(this,e),this.compileModuleSync=lc,this.compileModuleAsync=hc,this.compileModuleAndAllComponentsSync=dc,this.compileModuleAndAllComponentsAsync=pc}return Object(f.a)(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}(),mc=function(){return Promise.resolve(0)}();function gc(e){"undefined"==typeof Zone?mc.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var yc=function(){function e(t){var n,r,i=t.enableLongStackTrace,a=void 0!==i&&i,o=t.shouldCoalesceEventChangeDetection,s=void 0!==o&&o;if(Object(h.a)(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cu(!1),this.onMicrotaskEmpty=new Cu(!1),this.onStable=new Cu(!1),this.onError=new Cu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Q.requestAnimationFrame,t=Q.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Q,(function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){e.lastRequestAnimationFrameId=-1,xc(e),wc(e)}),void 0,(function(){}),(function(){}))),e.fakeTopEventTask.invoke()})),xc(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(e,t,i,a,o,s){try{return kc(n),e.invokeTask(i,a,o,s)}finally{r&&"eventTask"===a.type&&r(),Sc(n)}},onInvoke:function(e,t,r,i,a,o,s){try{return kc(n),e.invoke(r,i,a,o,s)}finally{Sc(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,xc(n),wc(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return Object(f.a)(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,_c,bc,bc);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function bc(){}var _c={};function wc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function xc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function kc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Sc(e){e._nesting--,wc(e)}var Ec=function(){function e(){Object(h.a)(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cu,this.onMicrotaskEmpty=new Cu,this.onStable=new Cu,this.onError=new Cu}return Object(f.a)(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),Oc=function(){var e=function(){function e(t){var n=this;Object(h.a)(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return Object(f.a)(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){yc.assertNotInAngularZone(),gc((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())gc((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ve(yc))},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}(),Tc=function(){var e=function(){function e(){Object(h.a)(this,e),this._applications=new Map,Mc.addToWindow(this)}return Object(f.a)(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Mc.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}();function Cc(e){Mc=e}var Ac,Mc=new(function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),jc=function(e,t,n){var r=new mu(n);return Promise.resolve(r)},Pc=new oe("AllowMultipleToken"),Rc=function e(t,n){Object(h.a)(this,e),this.name=t,this.token=n};function Ic(e){if(Ac&&!Ac.destroyed&&!Ac.injector.get(Pc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ac=e.get(Nc);var t=e.get(nc,null);return t&&t.forEach((function(e){return e()})),Ac}function Dc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new oe(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Lc();if(!a||a.injector.get(Pc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:Ia,useValue:"platform"});Ic(Ya.create({providers:o,name:r}))}return Fc(i)}}function Fc(e){var t=Lc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}function Lc(){return Ac&&!Ac.destroyed?Ac:null}var Nc=function(){var e=function(){function e(t){Object(h.a)(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return Object(f.a)(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,a=(r=t&&t.ngZoneEventCoalescing||!1,"noop"===(n=t?t.ngZone:void 0)?new Ec:("zone.js"===n?void 0:n)||new yc({enableLongStackTrace:ur(),shouldCoalesceEventChangeDetection:r})),o=[{provide:yc,useValue:a}];return a.run((function(){var t=Ya.create({providers:o,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(Gn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Uc(i._modules,n)})),a.runOutsideAngular((function(){return a.onError.subscribe({next:function(e){r.handleError(e)}})})),function(e,t,r){try{var a=((o=n.injector.get(Qu)).runInitializers(),o.donePromise.then((function(){return du(n.injector.get(oc,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return wo(a)?a.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):a}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var o}(r,a)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Bc({},n);return jc(0,0,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Hc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(U(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ve(Ya))},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}();function Bc(e,t){return Array.isArray(t)?t.reduce(Bc,e):Object.assign(Object.assign({},e),t)}var Hc=function(){var e=function(){function e(t,n,r,i,a,o){var s=this;Object(h.a)(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ur(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var u=new y.a((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),c=new y.a((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){yc.assertNotInAngularZone(),gc((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){yc.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=Object(b.a)(u,c.pipe(Object(_.a)()))}return Object(f.a)(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof ws?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(we),a=n.create(Ya.NULL,[],t||n.selector,i);a.onDestroy((function(){r._unloadComponent(a)}));var o=a.injector.get(Oc,null);return o&&a.injector.get(Tc).registerApplication(a.location.nativeElement,o),this._loadComponent(a),ur()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=Object(u.a)(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(a){n.e(a)}finally{n.f()}if(this._enforceNoNewChanges){var r,i=Object(u.a)(this._views);try{for(i.s();!(r=i.n()).done;)r.value.checkNoChanges()}catch(a){i.e(a)}finally{i.f()}}}catch(o){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(o)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Uc(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ic,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),Uc(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ve(yc),ve(ac),ve(Ya),ve(Gn),ve(ks),ve(Qu))},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}();function Uc(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Vc=function e(){Object(h.a)(this,e)},zc=function e(){Object(h.a)(this,e)},Wc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Gc=function(){var e=function(){function e(t,n){Object(h.a)(this,e),this._compiler=t,this._config=n||Wc}return Object(f.a)(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=e.split("#"),i=Object(o.a)(r,2),a=i[0],s=i[1];return void 0===s&&(s="default"),n("crnd")(a).then((function(e){return e[s]})).then((function(e){return Kc(e,a,s)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=e.split("#"),r=Object(o.a)(t,2),i=r[0],a=r[1],s="NgFactory";return void 0===a&&(a="default",s=""),n("crnd")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then((function(e){return e[a+s]})).then((function(e){return Kc(e,i,a)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ve(vc),ve(zc,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac}),e}();function Kc(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var qc=function(e){return null},Xc=Dc(null,"core",[{provide:rc,useValue:"unknown"},{provide:Nc,deps:[Ya]},{provide:Tc,deps:[]},{provide:ac,deps:[]}]),Yc=[{provide:Hc,useClass:Hc,deps:[yc,ac,Ya,Gn,ks,Qu]},{provide:tu,deps:[yc],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:Qu,useClass:Qu,deps:[[new E,Ju]]},{provide:vc,useClass:vc,deps:[]},ec,{provide:zs,useFactory:function(){return Ks},deps:[]},{provide:Ws,useFactory:function(){return qs},deps:[]},{provide:oc,useFactory:function(e){return du(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new S(oc),new E,new T]]},{provide:sc,useValue:"USD"}],Zc=function(){var e=function e(t){Object(h.a)(this,e)};return e.\u0275mod=Be({type:e}),e.\u0275inj=P({factory:function(t){return new(t||e)(ve(Hc))},providers:Yc}),e}()},foSv:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},gRHU:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("2fFW"),i=n("NJ4a"),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},gfpf:function(e,t){var n={userAgent:!1},r={};if(void 0===i)var i={};i.lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var i=function(){};if(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){var a;for(a in r)e.prototype[a]=r[a];var s=function(){},u=["toString","valueOf"];try{/MSIE/.test(n.userAgent)&&(s=function(e,t){for(a=0;a<u.length;a+=1){var n=u[a],r=t[n];"function"==typeof r&&r!=Object.prototype[n]&&(e[n]=r)}})}catch(o){}s(e.prototype,r)}}};var a,o,s,u,c,l,h,f,d,p,v,m=m||(a=Math,s=(o={}).lib={},u=s.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=s.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else for(a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=a.ceil(t/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*a.random()|0);return new c.init(t,e)}}),l=o.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},f=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=s.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,o=r/(4*i),s=(o=e?a.ceil(o):a.max((0|o)-this._minBufferSize,0))*i,u=a.min(4*s,r);if(s){for(var l=0;l<s;l+=i)this._doProcessBlock(n,l);var h=n.splice(0,s);t.sigBytes-=u}return new c.init(h,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),s.Hasher=p.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new v.HMAC.init(e,n).finalize(t)}}}),v=o.algo={},o);!function(e){var t,n=(t=m).lib,r=n.Base,i=n.WordArray;(t=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),m.lib.Cipher||function(e){var t=(d=m).lib,n=t.Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,a=d.enc.Base64,o=d.algo.EvpKDF,s=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?p:f).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?p:f).decrypt(e,t,n,r)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=d.mode={},c=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},l=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;c.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),c.call(this,e,t,r),this._prevBlock=i}}),u=u.CBC=l,l=(d.pad={}).Pkcs7={pad:function(e,t){for(var n,i=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,a=[],o=0;o<n;o+=4)a.push(i);n=r.create(a,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:u,padding:l}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(u=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),h.create({ciphertext:t,key:n,iv:(i=i.cfg).iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=r.random(8)),e=o.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:i})}},p=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:d}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=f.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,f.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=m,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],a=[],o=[],s=[],u=[],c=[],l=[],h=[],f=[],d=[],p=0;256>p;p++)d[p]=128>p?p<<1:p<<1^283;var v=0,g=0;for(p=0;256>p;p++){var y;r[v]=y=(y=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&y^99,i[y]=v;var b=d[v],_=d[b],w=d[_],x=257*d[y]^16843008*y;a[v]=x<<24|x>>>8,o[v]=x<<16|x>>>16,s[v]=x<<8|x>>>24,u[v]=x,c[y]=(x=16843009*w^65537*_^257*b^16843008*v)<<24|x>>>8,l[y]=x<<16|x>>>16,h[y]=x<<8|x>>>24,f[y]=x,v?(v=b^d[d[d[w^b]]],g^=d[d[g]]):v=g=1}var k=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],a=0;a<n;a++)if(a<t)i[a]=e[a];else{var o=i[a-1];a%t?6<t&&4==a%t&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=k[a/t|0]<<24),i[a]=i[a-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)a=n-t,o=t%4?i[a]:i[a-4],e[t]=4>t||4>=a?o:c[r[o>>>24]]^l[r[o>>>16&255]]^h[r[o>>>8&255]]^f[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,s,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,l,h,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,a,o,s){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],d=4,p=1;p<u;p++){var v=r[c>>>24]^i[l>>>16&255]^a[h>>>8&255]^o[255&f]^n[d++],m=r[l>>>24]^i[h>>>16&255]^a[f>>>8&255]^o[255&c]^n[d++],g=r[h>>>24]^i[f>>>16&255]^a[c>>>8&255]^o[255&l]^n[d++];f=r[f>>>24]^i[c>>>16&255]^a[l>>>8&255]^o[255&h]^n[d++],c=v,l=m,h=g}v=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&f])^n[d++],m=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[f>>>8&255]<<8|s[255&c])^n[d++],g=(s[h>>>24]<<24|s[f>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[d++],f=(s[f>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^n[d++],e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=f},keySize:8}),e.AES=t._createHelper(n)}(),function(){function e(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function t(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var n,r=m,i=(n=r.lib).WordArray,a=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=(n=n.BlockCipher).extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;56>n;n++){var r=o[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(e=this._subKeys=[],r=0;16>r;r++){var i=e[r]=[],a=u[r];for(n=0;24>n;n++)i[n/6|0]|=t[(s[n]-1+a)%28]<<31-n%6,i[4+(n/6|0)]|=t[28+(s[n+24]-1+a)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(t=this._invSubKeys=[],n=0;16>n;n++)t[n]=e[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var a=0;16>a;a++){for(var o=i[a],s=this._lBlock,u=this._rBlock,h=0,f=0;8>f;f++)h|=c[f][((u^o[f])&l[f])>>>0];this._lBlock=u,this._rBlock=s^h}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=n._createHelper(h),a=a.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(i.create(e.slice(0,2))),this._des2=h.createEncryptor(i.create(e.slice(2,4))),this._des3=h.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=n._createHelper(a)}(),function(){var e=m.lib.WordArray;m.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(a>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(t){var n=t.length,r=this._map;(i=r.charAt(64))&&-1!=(i=t.indexOf(i))&&(n=i);for(var i=[],a=0,o=0;o<n;o++)if(o%4){var s=r.indexOf(t.charAt(o-1))<<o%4*2,u=r.indexOf(t.charAt(o))>>>6-o%4*2;i[a>>>2]|=(s|u)<<24-a%4*8,a++}return e.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,a,o){return((e=e+(t&n|~t&r)+i+o)<<a|e>>>32-a)+t}function n(e,t,n,r,i,a,o){return((e=e+(t&r|n&~r)+i+o)<<a|e>>>32-a)+t}function r(e,t,n,r,i,a,o){return((e=e+(t^n^r)+i+o)<<a|e>>>32-a)+t}function i(e,t,n,r,i,a,o){return((e=e+(n^(t|~r))+i+o)<<a|e>>>32-a)+t}for(var a=m,o=(u=a.lib).WordArray,s=u.Hasher,u=a.algo,c=[],l=0;64>l;l++)c[l]=4294967296*e.abs(e.sin(l+1))|0;u=u.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var o=0;16>o;o++)e[s=a+o]=16711935&((u=e[s])<<8|u>>>24)|4278255360&(u<<24|u>>>8);var s,u=e[a+1],l=e[a+2],h=e[a+3],f=e[a+4],d=e[a+5],p=e[a+6],v=e[a+7],m=e[a+8],g=e[a+9],y=e[a+10],b=e[a+11],_=e[a+12],w=e[a+13],x=e[a+14],k=e[a+15],S=t(S=(o=this._hash.words)[0],T=o[1],O=o[2],E=o[3],s=e[a+0],7,c[0]),E=t(E,S,T,O,u,12,c[1]),O=t(O,E,S,T,l,17,c[2]),T=t(T,O,E,S,h,22,c[3]);S=t(S,T,O,E,f,7,c[4]),E=t(E,S,T,O,d,12,c[5]),O=t(O,E,S,T,p,17,c[6]),T=t(T,O,E,S,v,22,c[7]),S=t(S,T,O,E,m,7,c[8]),E=t(E,S,T,O,g,12,c[9]),O=t(O,E,S,T,y,17,c[10]),T=t(T,O,E,S,b,22,c[11]),S=t(S,T,O,E,_,7,c[12]),E=t(E,S,T,O,w,12,c[13]),O=t(O,E,S,T,x,17,c[14]),S=n(S,T=t(T,O,E,S,k,22,c[15]),O,E,u,5,c[16]),E=n(E,S,T,O,p,9,c[17]),O=n(O,E,S,T,b,14,c[18]),T=n(T,O,E,S,s,20,c[19]),S=n(S,T,O,E,d,5,c[20]),E=n(E,S,T,O,y,9,c[21]),O=n(O,E,S,T,k,14,c[22]),T=n(T,O,E,S,f,20,c[23]),S=n(S,T,O,E,g,5,c[24]),E=n(E,S,T,O,x,9,c[25]),O=n(O,E,S,T,h,14,c[26]),T=n(T,O,E,S,m,20,c[27]),S=n(S,T,O,E,w,5,c[28]),E=n(E,S,T,O,l,9,c[29]),O=n(O,E,S,T,v,14,c[30]),S=r(S,T=n(T,O,E,S,_,20,c[31]),O,E,d,4,c[32]),E=r(E,S,T,O,m,11,c[33]),O=r(O,E,S,T,b,16,c[34]),T=r(T,O,E,S,x,23,c[35]),S=r(S,T,O,E,u,4,c[36]),E=r(E,S,T,O,f,11,c[37]),O=r(O,E,S,T,v,16,c[38]),T=r(T,O,E,S,y,23,c[39]),S=r(S,T,O,E,w,4,c[40]),E=r(E,S,T,O,s,11,c[41]),O=r(O,E,S,T,h,16,c[42]),T=r(T,O,E,S,p,23,c[43]),S=r(S,T,O,E,g,4,c[44]),E=r(E,S,T,O,_,11,c[45]),O=r(O,E,S,T,k,16,c[46]),S=i(S,T=r(T,O,E,S,l,23,c[47]),O,E,s,6,c[48]),E=i(E,S,T,O,v,10,c[49]),O=i(O,E,S,T,x,15,c[50]),T=i(T,O,E,S,d,21,c[51]),S=i(S,T,O,E,_,6,c[52]),E=i(E,S,T,O,h,10,c[53]),O=i(O,E,S,T,y,15,c[54]),T=i(T,O,E,S,u,21,c[55]),S=i(S,T,O,E,m,6,c[56]),E=i(E,S,T,O,k,10,c[57]),O=i(O,E,S,T,p,15,c[58]),T=i(T,O,E,S,w,21,c[59]),S=i(S,T,O,E,f,6,c[60]),E=i(E,S,T,O,b,10,c[61]),O=i(O,E,S,T,l,15,c[62]),T=i(T,O,E,S,g,21,c[63]),o[0]=o[0]+S|0,o[1]=o[1]+T|0,o[2]=o[2]+O|0,o[3]=o[3]+E|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var a=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)n[r]=16711935&((i=n[r])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=s._createHelper(u),a.HmacMD5=s._createHmacHelper(u)}(Math),function(){var e=m,t=(i=e.lib).WordArray,n=i.Hasher,r=[],i=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=0;80>c;c++){if(16>c)r[c]=0|e[t+c];else{var l=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=l<<1|l>>>31}l=(i<<5|i>>>27)+u+r[c],l=20>c?l+(1518500249+(a&o|~a&s)):40>c?l+(1859775393+(a^o^s)):60>c?l+((a&o|a&s|o&s)-1894007588):l+((a^o^s)-899497514),u=s,s=o,o=a<<30|a>>>2,a=i,i=l}n[0]=n[0]+i|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(i),e.HmacSHA1=n._createHmacHelper(i)}(),function(e){for(var t=m,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,a=[],o=[],s=function(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var l;e:{for(var h=e.sqrt(l=u),f=2;f<=h;f++)if(!(l%f)){l=!1;break e}l=!0}l&&(8>c&&(a[c]=s(e.pow(u,.5))),o[c]=s(e.pow(u,1/3)),c++),u++}var d=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|e[t+f];else{var p=d[f-15],v=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+d[f-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+o[f]+d[f],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&a^i&a),h=l,l=c,c=u,u=s+p|0,s=a,a=i,i=r,r=p+v|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),function(){var e=m,t=e.lib.WordArray,n=(r=e.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(r),e.HmacSHA224=n._createHmacHelper(r)}(),function(){function e(){return r.create.apply(r,arguments)}for(var t=m,n=t.lib.Hasher,r=(a=t.x64).Word,i=a.WordArray,a=t.algo,o=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],s=[],u=0;80>u;u++)s[u]=e();a=a.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n,r=(n=this._hash.words)[0],i=n[1],a=n[2],u=n[3],c=n[4],l=n[5],h=n[6],f=r.high,d=r.low,p=i.high,v=i.low,m=a.high,g=a.low,y=u.high,b=u.low,_=c.high,w=c.low,x=l.high,k=l.low,S=h.high,E=h.low,O=(n=n[7]).high,T=n.low,C=f,A=d,M=p,j=v,P=m,R=g,I=y,D=b,F=_,L=w,N=x,B=k,H=S,U=E,V=O,z=T,W=0;80>W;W++){var G=s[W];if(16>W)var K=G.high=0|e[t+2*W],q=G.low=0|e[t+2*W+1];else{K=((q=(K=s[W-15]).high)>>>1|(X=K.low)<<31)^(q>>>8|X<<24)^q>>>7;var X=(X>>>1|q<<31)^(X>>>8|q<<24)^(X>>>7|q<<25),Y=((q=(Y=s[W-2]).high)>>>19|(Z=Y.low)<<13)^(q<<3|Z>>>29)^q>>>6,Z=(Z>>>19|q<<13)^(Z<<3|q>>>29)^(Z>>>6|q<<26);G.high=K=(K=(K=K+(J=(q=s[W-7]).high)+((q=X+q.low)>>>0<X>>>0?1:0))+Y+((q+=Z)>>>0<Z>>>0?1:0))+(ne=(Q=s[W-16]).high)+((q+=Q=Q.low)>>>0<Q>>>0?1:0),G.low=q}var J=F&N^~F&H,Q=L&B^~L&U,$=(G=C&M^C&P^M&P,A&j^A&R^j&R),ee=(Z=o[W]).high,te=Z.low,ne=V+((F>>>14|L<<18)^(F>>>18|L<<14)^(F<<23|L>>>9))+((Z=z+((L>>>14|F<<18)^(L>>>18|F<<14)^(L<<23|F>>>9)))>>>0<z>>>0?1:0);V=H,z=U,H=N,U=B,N=F,B=L,F=I+(ne=(ne=(ne=ne+J+((Z+=Q)>>>0<Q>>>0?1:0))+ee+((Z+=te)>>>0<te>>>0?1:0))+K+((Z+=q)>>>0<q>>>0?1:0))+((L=D+Z|0)>>>0<D>>>0?1:0)|0,I=P,D=R,P=M,R=j,M=C,j=A,C=ne+(G=(X=(C>>>28|A<<4)^(C<<30|A>>>2)^(C<<25|A>>>7))+G+((q=(Y=(A>>>28|C<<4)^(A<<30|C>>>2)^(A<<25|C>>>7))+$)>>>0<Y>>>0?1:0))+((A=Z+q|0)>>>0<Z>>>0?1:0)|0}d=r.low=d+A,r.high=f+C+(d>>>0<A>>>0?1:0),v=i.low=v+j,i.high=p+M+(v>>>0<j>>>0?1:0),g=a.low=g+R,a.high=m+P+(g>>>0<R>>>0?1:0),b=u.low=b+D,u.high=y+I+(b>>>0<D>>>0?1:0),w=c.low=w+L,c.high=_+F+(w>>>0<L>>>0?1:0),k=l.low=k+B,l.high=x+N+(k>>>0<B>>>0?1:0),E=h.low=E+U,h.high=S+H+(E>>>0<U>>>0?1:0),T=n.low=T+z,n.high=O+V+(T>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(a),t.HmacSHA512=n._createHmacHelper(a)}(),function(){var e=m,t=(i=e.x64).Word,n=i.WordArray,r=(i=e.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(i),e.HmacSHA384=r._createHmacHelper(i)}(),function(){var e=m,t=(r=e.lib).WordArray,n=r.Hasher,r=e.algo,i=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),s=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=t.create([0,1518500249,1859775393,2400959708,2840853838]),c=t.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++)e[r=t+n]=16711935&((w=e[r])<<8|w>>>24)|4278255360&(w<<24|w>>>8);var r,l,h,f,d,p,v,m,g,y,b,_,w=u.words,x=c.words,k=i.words,S=a.words,E=o.words,O=s.words;for(v=l=(r=this._hash.words)[0],m=h=r[1],g=f=r[2],y=d=r[3],b=p=r[4],n=0;80>n;n+=1)_=l+e[t+k[n]]|0,_=16>n?_+((h^f^d)+w[0]):32>n?_+((h&f|~h&d)+w[1]):48>n?_+(((h|~f)^d)+w[2]):64>n?_+((h&d|f&~d)+w[3]):_+((h^(f|~d))+w[4]),_=(_=(_|=0)<<E[n]|_>>>32-E[n])+p|0,l=p,p=d,d=f<<10|f>>>22,f=h,h=_,_=v+e[t+S[n]]|0,_=16>n?_+((m^(g|~y))+x[0]):32>n?_+((m&y|g&~y)+x[1]):48>n?_+(((m|~g)^y)+x[2]):64>n?_+((m&g|~m&y)+x[3]):_+((m^g^y)+x[4]),_=(_=(_|=0)<<O[n]|_>>>32-O[n])+b|0,v=b,b=y,y=g<<10|g>>>22,g=m,m=_;_=r[1]+f+y|0,r[1]=r[2]+d+b|0,r[2]=r[3]+p+v|0,r[3]=r[4]+l+m|0,r[4]=r[0]+h+g|0,r[0]=_},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;for(t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;5>n;n++)t[n]=16711935&((r=t[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.RIPEMD160=n._createHelper(r),e.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var e=m.enc.Utf8;m.algo.HMAC=m.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var a=this._oKey=n.clone(),o=this._iKey=n.clone(),s=a.words,u=o.words,c=0;c<r;c++)s[c]^=1549556828,u[c]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=m,n=(e=t.lib).Base,r=e.WordArray,i=(e=t.algo).HMAC,a=e.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=i.create((l=this.cfg).hasher,e),a=r.create(),o=r.create([1]),s=a.words,u=o.words,c=l.keySize,l=l.iterations;s.length<c;){var h=n.update(t).finalize(o);n.reset();for(var f=h.words,d=f.length,p=h,v=1;v<l;v++){p=n.finalize(p),n.reset();for(var m=p.words,g=0;g<d;g++)f[g]^=m[g]}a.concat(h),u[0]++}return a.sigBytes=4*c,a}});t.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)}}();var g,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function b(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=y.charAt(n>>6)+y.charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=y.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=y.charAt(n>>2)+y.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function _(e){var t,n,r,i="",a=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(r=y.indexOf(e.charAt(t)))<0||(0==a?(i+=T(r>>2),n=3&r,a=1):1==a?(i+=T(n<<2|r>>4),n=15&r,a=2):2==a?(i+=T(n),i+=T(r>>2),n=3&r,a=3):(i+=T(n<<2|r>>4),i+=T(15&r),a=0));return 1==a&&(i+=T(n<<2)),i}function w(e){var t,n=_(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function x(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):this.fromString(e,null==t&&"string"!=typeof e?256:t))}function k(){return new x(null)}"Microsoft Internet Explorer"==n.appName?(x.prototype.am=function(e,t,n,r,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var u=32767&this[e],c=this[e++]>>15,l=s*u+c*o;i=((u=o*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+s*c+(i>>>30),n[r++]=1073741823&u}return i},g=30):"Netscape"!=n.appName?(x.prototype.am=function(e,t,n,r,i,a){for(;--a>=0;){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},g=26):(x.prototype.am=function(e,t,n,r,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var u=16383&this[e],c=this[e++]>>14,l=s*u+c*o;i=((u=o*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+s*c,n[r++]=268435455&u}return i},g=28),x.prototype.DB=g,x.prototype.DM=(1<<g)-1,x.prototype.DV=1<<g,x.prototype.FV=Math.pow(2,52),x.prototype.F1=52-g,x.prototype.F2=2*g-52;var S,E,O=new Array;for(S="0".charCodeAt(0),E=0;E<=9;++E)O[S++]=E;for(S="a".charCodeAt(0),E=10;E<36;++E)O[S++]=E;for(S="A".charCodeAt(0),E=10;E<36;++E)O[S++]=E;function T(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function C(e,t){var n=O[e.charCodeAt(t)];return null==n?-1:n}function A(e){var t=k();return t.fromInt(e),t}function M(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function j(e){this.m=e}function P(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function R(e,t){return e&t}function I(e,t){return e|t}function D(e,t){return e^t}function F(e,t){return e&~t}function L(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function N(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function B(){}function H(e){return e}function U(e){this.r2=k(),this.q3=k(),x.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}j.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},j.prototype.revert=function(e){return e},j.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},j.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},j.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},P.prototype.convert=function(e){var t=k();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(x.ZERO)>0&&this.m.subTo(t,t),t},P.prototype.revert=function(e){var t=k();return e.copyTo(t),this.reduce(t),t},P.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},P.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},x.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},x.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},x.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,a=0;--r>=0;){var o=8==n?255&e[r]:C(e,r);o<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==a?this[this.t++]=o:a+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=n)>=this.DB&&(a-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&x.ZERO.subTo(this,this)},x.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},x.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},x.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},x.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|s,s=(this[n]&a)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},x.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&a)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}},x.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},x.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&x.ZERO.subTo(t,t)},x.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},x.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=k());var a=k(),o=this.s,s=e.s,u=this.DB-M(r[r.t-1]);u>0?(r.lShiftTo(u,a),i.lShiftTo(u,n)):(r.copyTo(a),i.copyTo(n));var c=a.t,l=a[c-1];if(0!=l){var h=l*(1<<this.F1)+(c>1?a[c-2]>>this.F2:0),f=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,v=n.t,m=v-c,g=null==t?k():t;for(a.dlShiftTo(m,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),x.ONE.dlShiftTo(c,g),g.subTo(a,a);a.t<c;)a[a.t++]=0;for(;--m>=0;){var y=n[--v]==l?this.DM:Math.floor(n[v]*f+(n[v-1]+p)*d);if((n[v]+=a.am(0,y,n,m,0,c))<y)for(a.dlShiftTo(m,g),n.subTo(g,n);n[v]<--y;)n.subTo(g,n)}null!=t&&(n.drShiftTo(c,t),o!=s&&x.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&x.ZERO.subTo(n,n)}}},x.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},x.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},x.prototype.exp=function(e,t){if(e>4294967295||e<1)return x.ONE;var n=k(),r=k(),i=t.convert(this),a=M(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}return t.revert(n)},x.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(n=this[o]>>s)>0&&(i=!0,a=T(n));o>=0;)s<t?(n=(this[o]&(1<<s)-1)<<t-s,n|=this[--o]>>(s+=this.DB-t)):(n=this[o]>>(s-=t)&r,s<=0&&(s+=this.DB,--o)),n>0&&(i=!0),i&&(a+=T(n));return i?a:"0"},x.prototype.negate=function(){var e=k();return x.ZERO.subTo(this,e),e},x.prototype.abs=function(){return this.s<0?this.negate():this},x.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},x.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+M(this[this.t-1]^this.s&this.DM)},x.prototype.mod=function(e){var t=k();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(x.ZERO)>0&&e.subTo(t,t),t},x.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new j(t):new P(t),this.exp(e,n)},x.ZERO=A(0),x.ONE=A(1),B.prototype.convert=H,B.prototype.revert=H,B.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},B.prototype.sqrTo=function(e,t){e.squareTo(t)},U.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=k();return e.copyTo(t),this.reduce(t),t},U.prototype.revert=function(e){return e},U.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},U.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},U.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var V,z,W,G=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],K=(1<<26)/G[G.length-1];function q(){this.i=0,this.j=0,this.S=new Array}function X(){!function(e){z[W++]^=255&e,z[W++]^=e>>8&255,z[W++]^=e>>16&255,z[W++]^=e>>24&255,W>=256&&(W-=256)}((new Date).getTime())}if(x.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},x.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=A(n),i=k(),a=k(),o="";for(this.divRemTo(r,i,a);i.signum()>0;)o=(n+a.intValue()).toString(e).substr(1)+o,i.divRemTo(r,i,a);return a.intValue().toString(e)+o},x.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,a=0,o=0,s=0;s<e.length;++s){var u=C(e,s);u<0?"-"==e.charAt(s)&&0==this.signum()&&(i=!0):(o=t*o+u,++a>=n&&(this.dMultiply(r),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&x.ZERO.subTo(this,this)},x.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(x.ONE.shiftLeft(e-1),I,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(x.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},x.prototype.bitwiseTo=function(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},x.prototype.changeBit=function(e,t){var n=x.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},x.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},x.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},x.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},x.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},x.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},x.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},x.prototype.millerRabin=function(e){var t=this.subtract(x.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>G.length&&(e=G.length);for(var i=k(),a=0;a<e;++a){i.fromInt(G[Math.floor(Math.random()*G.length)]);var o=i.modPow(r,this);if(0!=o.compareTo(x.ONE)&&0!=o.compareTo(t)){for(var s=1;s++<n&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(x.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},x.prototype.clone=function(){var e=k();return this.copyTo(e),e},x.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},x.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},x.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},x.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},x.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},x.prototype.equals=function(e){return 0==this.compareTo(e)},x.prototype.min=function(e){return this.compareTo(e)<0?this:e},x.prototype.max=function(e){return this.compareTo(e)>0?this:e},x.prototype.and=function(e){var t=k();return this.bitwiseTo(e,R,t),t},x.prototype.or=function(e){var t=k();return this.bitwiseTo(e,I,t),t},x.prototype.xor=function(e){var t=k();return this.bitwiseTo(e,D,t),t},x.prototype.andNot=function(e){var t=k();return this.bitwiseTo(e,F,t),t},x.prototype.not=function(){for(var e=k(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},x.prototype.shiftLeft=function(e){var t=k();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},x.prototype.shiftRight=function(e){var t=k();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},x.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+L(this[e]);return this.s<0?this.t*this.DB:-1},x.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=N(this[n]^t);return e},x.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},x.prototype.setBit=function(e){return this.changeBit(e,I)},x.prototype.clearBit=function(e){return this.changeBit(e,F)},x.prototype.flipBit=function(e){return this.changeBit(e,D)},x.prototype.add=function(e){var t=k();return this.addTo(e,t),t},x.prototype.subtract=function(e){var t=k();return this.subTo(e,t),t},x.prototype.multiply=function(e){var t=k();return this.multiplyTo(e,t),t},x.prototype.divide=function(e){var t=k();return this.divRemTo(e,t,null),t},x.prototype.remainder=function(e){var t=k();return this.divRemTo(e,null,t),t},x.prototype.divideAndRemainder=function(e){var t=k(),n=k();return this.divRemTo(e,t,n),new Array(t,n)},x.prototype.modPow=function(e,t){var n,r,i=e.bitLength(),a=A(1);if(i<=0)return a;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new j(t):t.isEven()?new U(t):new P(t);var o=new Array,s=3,u=n-1,c=(1<<n)-1;if(o[1]=r.convert(this),n>1){var l=k();for(r.sqrTo(o[1],l);s<=c;)o[s]=k(),r.mulTo(l,o[s-2],o[s]),s+=2}var h,f,d=e.t-1,p=!0,v=k();for(i=M(e[d])-1;d>=0;){for(i>=u?h=e[d]>>i-u&c:(h=(e[d]&(1<<i+1)-1)<<u-i,d>0&&(h|=e[d-1]>>this.DB+i-u)),s=n;0==(1&h);)h>>=1,--s;if((i-=s)<0&&(i+=this.DB,--d),p)o[h].copyTo(a),p=!1;else{for(;s>1;)r.sqrTo(a,v),r.sqrTo(v,a),s-=2;s>0?r.sqrTo(a,v):(f=a,a=v,v=f),r.mulTo(v,o[h],a)}for(;d>=0&&0==(e[d]&1<<i);)r.sqrTo(a,v),f=a,a=v,v=f,--i<0&&(i=this.DB-1,--d)}return r.revert(a)},x.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return x.ZERO;for(var n=e.clone(),r=this.clone(),i=A(1),a=A(0),o=A(0),s=A(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(o,i),a.subTo(s,a)):(r.subTo(n,r),t&&o.subTo(i,o),s.subTo(a,s))}return 0!=r.compareTo(x.ONE)?x.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},x.prototype.pow=function(e){return this.exp(e,new B)},x.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n},x.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=G[G.length-1]){for(t=0;t<G.length;++t)if(n[0]==G[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<G.length;){for(var r=G[t],i=t+1;i<G.length&&r<K;)r*=G[i++];for(r=n.modInt(r);t<i;)if(r%G[t++]==0)return!1}return n.millerRabin(e)},x.prototype.square=function(){var e=k();return this.squareTo(e),e},q.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)r=this.S[t],this.S[t]=this.S[n=n+this.S[t]+e[t%e.length]&255],this.S[n]=r;this.i=0,this.j=0},q.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==z){var Y;if(z=new Array,W=0,void 0!==r&&(void 0!==r.crypto||void 0!==r.msCrypto)){var Z=r.crypto||r.msCrypto;if(Z.getRandomValues){var J=new Uint8Array(32);for(Z.getRandomValues(J),Y=0;Y<32;++Y)z[W++]=J[Y]}else if("Netscape"==n.appName&&n.appVersion<"5"){var Q=r.crypto.random(32);for(Y=0;Y<Q.length;++Y)z[W++]=255&Q.charCodeAt(Y)}}for(;W<256;)Y=Math.floor(65536*Math.random()),z[W++]=Y>>>8,z[W++]=255&Y;W=0,X()}function $(){if(null==V){for(X(),(V=new q).init(z),W=0;W<z.length;++W)z[W]=0;W=0}return V.next()}function ee(){}function te(e,t){return new x(e,t)}function ne(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function re(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ie(e,t,n){for(var r="",i=0;r.length<t;)r+=n(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function ae(e,t){this.x=t,this.q=e}function oe(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?x.ONE:r,this.zinv=null}function se(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new oe(this,null,null)}ee.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=$()},re.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},re.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=te(e,16),this.e=parseInt(t,16)}},re.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var a=new ee,o=new Array;t>2;){for(o[0]=0;0==o[0];)a.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new x(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},re.prototype.encryptOAEP=function(e,t,n){var r=function(e,t,n,r){var i=ce.crypto.MessageDigest,a=ce.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(e){return ke(a.hashHex(Se(e),o))}),e.length+2*r+2>t)throw"Message too long for RSA";var s,u="";for(s=0;s<t-e.length-2*r-2;s+=1)u+="\0";var c=n("")+u+"\x01"+e,l=new Array(r);(new ee).nextBytes(l);var h=ne(l,c.length,n),f=[];for(s=0;s<c.length;s+=1)f[s]=c.charCodeAt(s)^h.charCodeAt(s);var d=ne(f,l.length,n),p=[0];for(s=0;s<l.length;s+=1)p[s+1]=l[s]^d.charCodeAt(s);return new x(p.concat(f))}(e,this.n.bitLength()+7>>3,t,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var a=i.toString(16);return 0==(1&a.length)?a:"0"+a},re.prototype.type="RSA",re.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},re.prototype.setPrivate=function(e,t,n){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=n;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=te(e,16),this.e=parseInt(t,16),this.d=te(n,16)}},re.prototype.setPrivateEx=function(e,t,n,r,i,a,o,s){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=te(e,16),this.e=parseInt(t,16),this.d=te(n,16),this.p=te(r,16),this.q=te(i,16),this.dmp1=te(a,16),this.dmq1=te(o,16),this.coeff=te(s,16)},re.prototype.generate=function(e,t){var n=new ee,r=e>>1;this.e=parseInt(t,16);for(var i=new x(t,16);;){for(;this.p=new x(e-r,1,n),0!=this.p.subtract(x.ONE).gcd(i).compareTo(x.ONE)||!this.p.isProbablePrime(10););for(;this.q=new x(r,1,n),0!=this.q.subtract(x.ONE).gcd(i).compareTo(x.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var o=this.p.subtract(x.ONE),s=this.q.subtract(x.ONE),u=o.multiply(s);if(0==u.gcd(i).compareTo(x.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=i.modInverse(u),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},re.prototype.decrypt=function(e){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var t=te(e,16),n=this.doPrivate(t);return null==n?null:function(e,t){for(var n=e.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var a=255&n[r];a<128?i+=String.fromCharCode(a):a>191&&a<224?(i+=String.fromCharCode((31&a)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&a)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},re.prototype.decryptOAEP=function(e,t,n){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var r=te(e,16),i=this.doPrivate(r);return null==i?null:function(e,t,n,r){var i=ce.crypto.MessageDigest,a=ce.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(e){return ke(a.hashHex(Se(e),o))}),e=e.toByteArray(),s=0;s<e.length;s+=1)e[s]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*r+2)throw"Cipher too short";var s,u=e.substr(1,r),c=e.substr(r+1),l=ie(c,r,n),h=[];for(s=0;s<u.length;s+=1)h[s]=u.charCodeAt(s)^l.charCodeAt(s);var f=ie(String.fromCharCode.apply(String,h),e.length-r,n),d=[];for(s=0;s<c.length;s+=1)d[s]=c.charCodeAt(s)^f.charCodeAt(s);if((d=String.fromCharCode.apply(String,d)).substr(0,r)!==n(""))throw"Hash mismatch";var p=(d=d.substr(r)).indexOf("\x01");if((-1!=p?d.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return d.substr(p+1)}(i,this.n.bitLength()+7>>3,t,n)},ae.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ae.prototype.toBigInteger=function(){return this.x},ae.prototype.negate=function(){return new ae(this.q,this.x.negate().mod(this.q))},ae.prototype.add=function(e){return new ae(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ae.prototype.subtract=function(e){return new ae(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ae.prototype.multiply=function(e){return new ae(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ae.prototype.square=function(){return new ae(this.q,this.x.square().mod(this.q))},ae.prototype.divide=function(e){return new ae(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},oe.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(x.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(x.ZERO))},oe.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(x.ZERO)&&!this.y.toBigInteger().equals(x.ZERO)},oe.prototype.negate=function(){return new oe(this.curve,this.x,this.y.negate(),this.z)},oe.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(x.ZERO.equals(n))return x.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new x("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),s=o.multiply(n),u=i.multiply(o),c=t.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(e.z).subtract(s).multiply(n).mod(this.curve.q),h=u.multiply(r).multiply(t).subtract(a.multiply(s)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.q),f=s.multiply(this.z).multiply(e.z).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(h),f)},oe.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new x("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),a=this.curve.a.toBigInteger(),o=t.square().multiply(e);x.ZERO.equals(a)||(o=o.add(this.z.square().multiply(a)));var s=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(u),c)},oe.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new x("3")),i=this.negate(),a=this,o=this.curve.q.subtract(e),s=o.multiply(new x("3")),u=new oe(this.curve,this.x,this.y),c=u.negate();for(t=r.bitLength()-2;t>0;--t){a=a.twice();var l=r.testBit(t);l!=n.testBit(t)&&(a=a.add(l?this:i))}for(t=s.bitLength()-2;t>0;--t){u=u.twice();var h=s.testBit(t);h!=o.testBit(t)&&(u=u.add(h?u:c))}return a},oe.prototype.multiplyTwo=function(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(a):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i},se.prototype.getQ=function(){return this.q},se.prototype.getA=function(){return this.a},se.prototype.getB=function(){return this.b},se.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},se.prototype.getInfinity=function(){return this.infinity},se.prototype.fromBigInteger=function(e){return new ae(this.q,e)},se.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new oe(this,this.fromBigInteger(new x(n,16)),this.fromBigInteger(new x(r,16)));default:return null}},ae.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},oe.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i},oe.decodeFrom=function(e,t){var n=t.length-1,r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var a=new x(r),o=new x(i);return new oe(e,e.fromBigInteger(a),e.fromBigInteger(o))},oe.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),a=new x(r,16),o=new x(i,16);return new oe(e,e.fromBigInteger(a),e.fromBigInteger(o))},oe.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),r=n.square().subtract(this.x).subtract(e.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new oe(this.curve,r,i)},oe.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(x.valueOf(2)),t=this.curve.fromBigInteger(x.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new oe(this.curve,r,i)},oe.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new x("3")),i=this.negate(),a=this;for(t=r.bitLength()-2;t>0;--t){a=a.twice();var o=r.testBit(t);o!=n.testBit(t)&&(a=a.add2D(o?this:i))}return a},oe.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),a=t.multiply(t).mod(i),o=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return a.equals(o)},oe.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},oe.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(x.ONE)<0||t.compareTo(e.subtract(x.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(x.ONE)<0||n.compareTo(e.subtract(x.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ue=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(e,t,r){return t?n[t]:String.fromCharCode(parseInt(r,16))}var i=new String(""),a=Object.hasOwnProperty;return function(n,o){var s,u,c=n.match(e),l=c[0],h=!1;"{"===l?s={}:"["===l?s=[]:(s=[],h=!0);for(var f=[s],d=1-h,p=c.length;d<p;++d){var v;switch((l=c[d]).charCodeAt(0)){default:(v=f[0])[u||v.length]=+l,u=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(t,r)),v=f[0],!u){if(!(v instanceof Array)){u=l||i;break}u=v.length}v[u]=l,u=void 0;break;case 91:f.unshift((v=f[0])[u||v.length]=[]),u=void 0;break;case 93:f.shift();break;case 102:(v=f[0])[u||v.length]=!1,u=void 0;break;case 110:(v=f[0])[u||v.length]=null,u=void 0;break;case 116:(v=f[0])[u||v.length]=!0,u=void 0;break;case 123:f.unshift((v=f[0])[u||v.length]={}),u=void 0;break;case 125:f.shift()}}if(h){if(1!==f.length)throw new Error;s=s[0]}else if(f.length)throw new Error;return o&&(s=function e(t,n){var r=t[n];if(r&&"object"==typeof r){var i=null;for(var s in r)if(a.call(r,s)&&r!==t){var u=e(r,s);void 0!==u?r[s]=u:(i||(i=[]),i.push(s))}if(i)for(var c=i.length;--c>=0;)delete r[i[c]]}return o.call(t,n,r)}({"":s},"")),s}}();void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),ce.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";t=new x(r,16).xor(e).add(x.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Ce(e,t)},this.newObject=function(e){var t=ce.asn1,n=t.DERBoolean,r=t.DERInteger,i=t.DERBitString,a=t.DEROctetString,o=t.DERNull,s=t.DERObjectIdentifier,u=t.DEREnumerated,c=t.DERUTF8String,l=t.DERNumericString,h=t.DERPrintableString,f=t.DERTeletexString,d=t.DERIA5String,p=t.DERUTCTime,v=t.DERGeneralizedTime,m=t.DERVisibleString,g=t.DERBMPString,y=t.DERSequence,b=t.DERSet,_=t.DERTaggedObject,w=t.ASN1Util.newObject,x=Object.keys(e);if(1!=x.length)throw"key of param shall be only one.";var k=x[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+k+":"))throw new Error("undefined key: "+k);if("bool"==k)return new n(e[k]);if("int"==k)return new r(e[k]);if("bitstr"==k)return new i(e[k]);if("octstr"==k)return new a(e[k]);if("null"==k)return new o(e[k]);if("oid"==k)return new s(e[k]);if("enum"==k)return new u(e[k]);if("utf8str"==k)return new c(e[k]);if("numstr"==k)return new l(e[k]);if("prnstr"==k)return new h(e[k]);if("telstr"==k)return new f(e[k]);if("ia5str"==k)return new d(e[k]);if("utctime"==k)return new p(e[k]);if("gentime"==k)return new v(e[k]);if("visstr"==k)return new m(e[k]);if("bmpstr"==k)return new g(e[k]);if("seq"==k){for(var S=e[k],E=[],O=0;O<S.length;O++){var T=w(S[O]);E.push(T)}return new y({array:E})}if("set"==k){for(S=e[k],E=[],O=0;O<S.length;O++)T=w(S[O]),E.push(T);return new b({array:E})}if("tag"==k){var C=e[k];if("[object Array]"===Object.prototype.toString.call(C)&&3==C.length){var A=w(C[2]);return new _({tag:C[0],explicit:C[1],obj:A})}var M={};if(void 0!==C.explicit&&(M.explicit=C.explicit),void 0!==C.tag&&(M.tag=C.tag),void 0===C.obj)throw"obj shall be specified for 'tag'.";return M.obj=w(C.obj),new _(M)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ce.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),i=2;i<e.length;i+=2){var a=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);r+=a.substr(1,7),"0"==a.substr(0,1)&&(t=t+"."+new x(r,2).toString(10),r="")}return t},ce.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new x(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var a="",o=0;o<i;o++)a+="0";for(r=a+r,o=0;o<r.length-1;o+=7){var s=r.substr(o,7);o!=r.length-7&&(s="1"+s),n+=t(parseInt(s,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),a=40*parseInt(i[0])+parseInt(i[1]);r+=t(a),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},ce.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},ce.asn1.DERAbstractString=function(e){ce.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=we(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},i.lang.extend(ce.asn1.DERAbstractString,ce.asn1.ASN1Object),ce.asn1.DERAbstractTime=function(e){ce.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),a=String(i.getFullYear());"utc"==t&&(a=a.substr(2,2));var o=a+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var s=i.getMilliseconds();if(0!=s){var u=r(String(s),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=me(e)},this.setByDateValue=function(e,t,n,r,i,a){var o=new Date(Date.UTC(e,t-1,n,r,i,a,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},i.lang.extend(ce.asn1.DERAbstractTime,ce.asn1.ASN1Object),ce.asn1.DERAbstractStructured=function(e){ce.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},i.lang.extend(ce.asn1.DERAbstractStructured,ce.asn1.ASN1Object),ce.asn1.DERBoolean=function(){ce.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},i.lang.extend(ce.asn1.DERBoolean,ce.asn1.ASN1Object),ce.asn1.DERInteger=function(e){ce.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ce.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new x(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},i.lang.extend(ce.asn1.DERInteger,ce.asn1.ASN1Object),ce.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ce.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}ce.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var i=e.substr(n,8),a=parseInt(i,2).toString(16);1==a.length&&(a="0"+a),r+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)t+=1==e[n]?"1":"0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},i.lang.extend(ce.asn1.DERBitString,ce.asn1.ASN1Object),ce.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ce.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}ce.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},i.lang.extend(ce.asn1.DEROctetString,ce.asn1.DERAbstractString),ce.asn1.DERNull=function(){ce.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},i.lang.extend(ce.asn1.DERNull,ce.asn1.ASN1Object),ce.asn1.DERObjectIdentifier=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new x(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var a="",o=0;o<i;o++)a+="0";for(r=a+r,o=0;o<r.length-1;o+=7){var s=r.substr(o,7);o!=r.length-7&&(s="1"+s),n+=t(parseInt(s,2))}return n};ce.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),a=40*parseInt(i[0])+parseInt(i[1]);r+=t(a),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=ce.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},i.lang.extend(ce.asn1.DERObjectIdentifier,ce.asn1.ASN1Object),ce.asn1.DEREnumerated=function(e){ce.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ce.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new x(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},i.lang.extend(ce.asn1.DEREnumerated,ce.asn1.ASN1Object),ce.asn1.DERUTF8String=function(e){ce.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},i.lang.extend(ce.asn1.DERUTF8String,ce.asn1.DERAbstractString),ce.asn1.DERNumericString=function(e){ce.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},i.lang.extend(ce.asn1.DERNumericString,ce.asn1.DERAbstractString),ce.asn1.DERPrintableString=function(e){ce.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},i.lang.extend(ce.asn1.DERPrintableString,ce.asn1.DERAbstractString),ce.asn1.DERTeletexString=function(e){ce.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},i.lang.extend(ce.asn1.DERTeletexString,ce.asn1.DERAbstractString),ce.asn1.DERIA5String=function(e){ce.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},i.lang.extend(ce.asn1.DERIA5String,ce.asn1.DERAbstractString),ce.asn1.DERVisibleString=function(e){ce.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},i.lang.extend(ce.asn1.DERVisibleString,ce.asn1.DERAbstractString),ce.asn1.DERBMPString=function(e){ce.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},i.lang.extend(ce.asn1.DERBMPString,ce.asn1.DERAbstractString),ce.asn1.DERUTCTime=function(e){ce.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=me(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=me(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},i.lang.extend(ce.asn1.DERUTCTime,ce.asn1.DERAbstractTime),ce.asn1.DERGeneralizedTime=function(e){ce.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=me(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=me(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},i.lang.extend(ce.asn1.DERGeneralizedTime,ce.asn1.DERAbstractTime),ce.asn1.DERSequence=function(e){ce.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},i.lang.extend(ce.asn1.DERSequence,ce.asn1.DERAbstractStructured),ce.asn1.DERSet=function(e){ce.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++)e.push(this.asn1Array[t].getEncodedHex());return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},i.lang.extend(ce.asn1.DERSet,ce.asn1.DERAbstractStructured),ce.asn1.DERTaggedObject=function(e){ce.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},i.lang.extend(ce.asn1.DERTaggedObject,ce.asn1.ASN1Object);var ce,le,he,fe=new function(){};function de(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function pe(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function ve(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function me(e){return ve(de(e))}function ge(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ye(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function be(e){return e.length%2==1&&(e="0"+e),ge(b(e))}function _e(e){return _(ye(e))}function we(e){return Pe(Le(e))}function xe(e){return decodeURIComponent(Re(e))}function ke(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function Se(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function Ee(e){return b(e)}function Oe(e){return Ee(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Te(e){return _(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ce(e,t){return"-----BEGIN "+t+"-----\r\n"+Oe(e)+"\r\n-----END "+t+"-----\r\n"}function Ae(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Te(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Me(e){var t,n,r,i,a,o,s,u,c,l,h;if(h=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=h[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(h[2])-1,r=parseInt(h[3]),i=parseInt(h[4]),a=parseInt(h[5]),o=parseInt(h[6]),s=0,""!==(c=h[7])&&(l=(c.substr(1)+"00").substr(0,3),s=parseInt(l)),Date.UTC(t,n,r,i,a,o,s);throw"unsupported zulu format: "+e}function je(e){return~~(Me(e)/1e3)}function Pe(e){return e.replace(/%/g,"")}function Re(e){return e.replace(/(..)/g,"%$1")}function Ie(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2),i=(e=e.replace("::",r)).split(":");if(8!=i.length)throw t;for(var a=0;a<8;a++)i[a]=("0000"+i[a]).slice(-4);return i.join("")}function De(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)t[n]=t[n].replace(/^0+/,""),""==t[n]&&(t[n]="0");var r=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===r)return e.slice(1,-1);var i="";for(n=0;n<r.length;n++)r[n].length>i.length&&(i=r[n]);return(e=e.replace(i,"::")).slice(1,-1)}function Fe(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?De(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(o){throw t}}function Le(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+me(t[r]);return n}function Ne(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function Be(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(o){throw"malformed integer array string: "+o}}fe.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},fe.getL=function(e,t){var n=fe.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},fe.getVblen=function(e,t){var n;return""==(n=fe.getL(e,t))?-1:("8"===n.substr(0,1)?new x(n.substr(2),16):new x(n,16)).intValue()},fe.getVidx=function(e,t){var n=fe.getLblen(e,t);return n<0?n:t+2*(n+1)},fe.getV=function(e,t){var n=fe.getVidx(e,t),r=fe.getVblen(e,t);return e.substr(n,2*r)},fe.getTLV=function(e,t){return e.substr(t,2)+fe.getL(e,t)+fe.getV(e,t)},fe.getNextSiblingIdx=function(e,t){return fe.getVidx(e,t)+2*fe.getVblen(e,t)},fe.getChildIdx=function(e,t){var n=fe,r=new Array,i=n.getVidx(e,t);"03"==e.substr(t,2)?r.push(i+2):r.push(i);for(var a=n.getVblen(e,t),o=i,s=0;;){var u=n.getNextSiblingIdx(e,o);if(null==u||u-i>=2*a)break;if(s>=200)break;r.push(u),o=u,s++}return r},fe.getNthChildIdx=function(e,t,n){return fe.getChildIdx(e,t)[n]},fe.getIdxbyList=function(e,t,n,r){var i,a,o=fe;if(0==n.length){if(void 0!==r&&e.substr(t,2)!==r)throw Error("checking tag doesn't match: "+e.substr(t,2)+"!="+r);return t}return i=n.shift(),a=o.getChildIdx(e,t),o.getIdxbyList(e,a[i],n,r)},fe.getIdxbyListEx=function(e,t,n,r){var i,a,o=fe;if(0==n.length)return void 0!==r&&e.substr(t,2)!==r?-1:t;i=n.shift(),a=o.getChildIdx(e,t);for(var s=0,u=0;u<a.length;u++){var c=e.substr(a[u],2);if("number"==typeof i&&!o.isContextTag(c)&&s==i||"string"==typeof i&&o.isContextTag(c,i))return o.getIdxbyListEx(e,a[u],n,r);o.isContextTag(c)||s++}return-1},fe.getTLVbyList=function(e,t,n,r){var i=fe,a=i.getIdxbyList(e,t,n);if(void 0===a)throw new Error("can't find nthList object");if(void 0!==r&&e.substr(a,2)!=r)throw new Error("checking tag doesn't match: "+e.substr(a,2)+"!="+r);return i.getTLV(e,a)},fe.getTLVbyListEx=function(e,t,n,r){var i=fe,a=i.getIdxbyListEx(e,t,n,r);return-1==a?null:i.getTLV(e,a)},fe.getVbyList=function(e,t,n,r,i){var a,o,s=fe;if(void 0===(a=s.getIdxbyList(e,t,n,r)))throw"can't find nthList object";return o=s.getV(e,a),!0===i&&(o=o.substr(2)),o},fe.getVbyListEx=function(e,t,n,r,i){var a,o,s=fe;return-1==(a=s.getIdxbyListEx(e,t,n,r))?null:(o=s.getV(e,a),"03"==e.substr(a,2)&&!1!==i&&(o=o.substr(2)),o)},fe.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var a=e.substr(2),o=[],s=0;s<a.length/2;s++)o.push(parseInt(a.substr(2*s,2),16));var u=[],c="";for(s=0;s<o.length;s++)128&o[s]?c+=t((127&o[s]).toString(2),7):(c+=t((127&o[s]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=n.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},fe.dump=function(e,t,n,r){var i=fe,a=i.getV,o=i.dump,s=i.getChildIdx,u=e;e instanceof ce.asn1.ASN1Object&&(u=e.getEncodedHex());var c=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var l,h=t.ommit_long_octet;if("01"==(l=u.substr(n,2)))return"00"==(f=a(u,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==l)return r+"INTEGER "+c(f=a(u,n),h)+"\n";if("03"==l){var f=a(u,n);return i.isASN1HEX(f.substr(2))?(x=r+"BITSTRING, encapsulates\n")+o(f.substr(2),t,0,r+"  "):r+"BITSTRING "+c(f,h)+"\n"}if("04"==l)return f=a(u,n),i.isASN1HEX(f)?(x=r+"OCTETSTRING, encapsulates\n")+o(f,t,0,r+"  "):r+"OCTETSTRING "+c(f,h)+"\n";if("05"==l)return r+"NULL\n";if("06"==l){var d=a(u,n),p=ce.asn1.ASN1Util.oidHexToInt(d),v=ce.asn1.x509.OID.oid2name(p),m=p.replace(/\./g," ");return""!=v?r+"ObjectIdentifier "+v+" ("+m+")\n":r+"ObjectIdentifier ("+m+")\n"}if("0c"==l)return r+"UTF8String '"+xe(a(u,n))+"'\n";if("13"==l)return r+"PrintableString '"+xe(a(u,n))+"'\n";if("14"==l)return r+"TeletexString '"+xe(a(u,n))+"'\n";if("16"==l)return r+"IA5String '"+xe(a(u,n))+"'\n";if("17"==l)return r+"UTCTime "+xe(a(u,n))+"\n";if("18"==l)return r+"GeneralizedTime "+xe(a(u,n))+"\n";if("1a"==l)return r+"VisualString '"+xe(a(u,n))+"'\n";if("1e"==l)return r+"BMPString '"+xe(a(u,n))+"'\n";if("30"==l){if("3000"==u.substr(n,4))return r+"SEQUENCE {}\n";x=r+"SEQUENCE\n";var g=t;if((2==(_=s(u,n)).length||3==_.length)&&"06"==u.substr(_[0],2)&&"04"==u.substr(_[_.length-1],2)){v=i.oidname(a(u,_[0]));var y=JSON.parse(JSON.stringify(t));y.x509ExtName=v,g=y}for(var b=0;b<_.length;b++)x+=o(u,g,_[b],r+"  ");return x}if("31"==l){x=r+"SET\n";var _=s(u,n);for(b=0;b<_.length;b++)x+=o(u,t,_[b],r+"  ");return x}if(0!=(128&(l=parseInt(l,16)))){var w=31&l;if(0!=(32&l)){var x=r+"["+w+"]\n";for(_=s(u,n),b=0;b<_.length;b++)x+=o(u,t,_[b],r+"  ");return x}return"68747470"==(f=a(u,n)).substr(0,8)&&(f=xe(f)),"subjectAltName"===t.x509ExtName&&2==w&&(f=xe(f)),r+"["+w+"] "+f+"\n"}return r+"UNKNOWN("+l+") "+a(u,n)+"\n"},fe.isContextTag=function(e,t){var n,r;e=e.toLowerCase();try{n=parseInt(e,16)}catch(f){return-1}if(void 0===t)return 128==(192&n);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((r=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&n)&&(31&n)==r}catch(f){return!1}},fe.isASN1HEX=function(e){var t=fe;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),i=t.getL(e,0);return e.length-r.length-i.length==2*n},fe.checkStrictDER=function(e,t,n,r,i){var a=fe;if(void 0===n){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!ce.lang.String.isHex(e))throw new Error("not hex string");n=e.length,i=(r=e.length/2)<128?1:Math.ceil(r.toString(16))+1}if(a.getL(e,t).length>2*i)throw new Error("L of TLV too long: idx="+t);var o=a.getVblen(e,t);if(o>r)throw new Error("value of L too long than hex: idx="+t);var s=a.getTLV(e,t),u=s.length-2-a.getL(e,t).length;if(u!==2*o)throw new Error("V string length and L's value not the same:"+u+"/"+2*o);if(0===t&&e.length!=s.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+s.length);var c=e.substr(t,2);if("02"===c){var l=a.getVidx(e,t);if("00"==e.substr(l,2)&&e.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var h=a.getVblen(e,t),f=0,d=a.getChildIdx(e,t),p=0;p<d.length;p++)f+=a.getTLV(e,d[p]).length,a.checkStrictDER(e,d[p],n,r,i);if(2*h!=f)throw new Error("sum of children's TLV length and L unmatch: "+2*h+"!="+f)}},fe.oidname=function(e){var t=ce.asn1;ce.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.x509&&ce.asn1.x509||(ce.asn1.x509={}),ce.asn1.x509.Certificate=function(e){ce.asn1.x509.Certificate.superclass.constructor.call(this);var t=ce.asn1,n=t.DERSequence,r=t.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var e=new ce.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});e.init(this.prvKey),e.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=e.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(e){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=e,this.asn1Sig=new r({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+Oe(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==e&&(void 0!==e.tbscertobj&&(this.asn1TBSCert=e.tbscertobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},i.lang.extend(ce.asn1.x509.Certificate,ce.asn1.ASN1Object),ce.asn1.x509.TBSCertificate=function(e){ce.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=ce.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERTaggedObject,a=t.x509,o=a.Time,s=a.X500Name,u=a.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new i({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(e){this.asn1SerialNumber=new r(e)},this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new a.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new s(e)},this.setNotBeforeByParam=function(e){this.asn1NotBefore=new o(e)},this.setNotAfterByParam=function(e){this.asn1NotAfter=new o(e)},this.setSubjectByParam=function(e){this.asn1Subject=new s(e)},this.setSubjectPublicKey=function(e){this.asn1SubjPKey=new u(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=He.getKey(e);this.asn1SubjPKey=new u(t)},this.appendExtension=function(e){this.extensionsArray.push(e)},this.appendExtensionByName=function(e,t){ce.asn1.x509.Extension.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var e=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(e),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new n({array:this.extensionsArray}),r=new i({explicit:!0,tag:"a3",obj:t});this.asn1Array.push(r)}var a=new n({array:this.asn1Array});return this.hTLV=a.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},i.lang.extend(ce.asn1.x509.TBSCertificate,ce.asn1.ASN1Object),ce.asn1.x509.Extension=function(e){ce.asn1.x509.Extension.superclass.constructor.call(this);var t=ce.asn1,n=t.DERObjectIdentifier,r=t.DEROctetString,i=t.DERBoolean,a=t.DERSequence;this.getEncodedHex=function(){var e=new n({oid:this.oid}),t=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(e),this.critical&&o.push(new i),o.push(t),new a({array:o}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},i.lang.extend(ce.asn1.x509.Extension,ce.asn1.ASN1Object),ce.asn1.x509.Extension.appendByNameToArray=function(e,t,n){var r=e.toLowerCase(),i=ce.asn1.x509;if("basicconstraints"==r){var a=new i.BasicConstraints(t);n.push(a)}else if("keyusage"==r)a=new i.KeyUsage(t),n.push(a);else if("crldistributionpoints"==r)a=new i.CRLDistributionPoints(t),n.push(a);else if("extkeyusage"==r)a=new i.ExtKeyUsage(t),n.push(a);else if("authoritykeyidentifier"==r)a=new i.AuthorityKeyIdentifier(t),n.push(a);else if("subjectkeyidentifier"==r)a=new i.SubjectKeyIdentifier(t),n.push(a);else if("authorityinfoaccess"==r)a=new i.AuthorityInfoAccess(t),n.push(a);else if("subjectaltname"==r)a=new i.SubjectAltName(t),n.push(a);else if("issueraltname"==r)a=new i.IssuerAltName(t),n.push(a);else{if("certificatepolicies"!=r)throw new Error("unsupported extension name: "+e);a=new i.CertificatePolicies(t),n.push(a)}},ce.asn1.x509.KeyUsage=function(e){ce.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Ge.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new ce.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var n=e.names,r="000000000",i=0;i<n.length;i++)for(var a=0;a<t.length;a++)n[i]===t[a]&&(r=r.substring(0,a)+"1"+r.substring(a+1,r.length));this.asn1ExtnValue=new ce.asn1.DERBitString({bin:r})}},i.lang.extend(ce.asn1.x509.KeyUsage,ce.asn1.x509.Extension),ce.asn1.x509.BasicConstraints=function(e){ce.asn1.x509.BasicConstraints.superclass.constructor.call(this,e),this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new ce.asn1.DERBoolean),this.pathLen>-1&&e.push(new ce.asn1.DERInteger({int:this.pathLen}));var t=new ce.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},i.lang.extend(ce.asn1.x509.BasicConstraints,ce.asn1.x509.Extension),ce.asn1.x509.CRLDistributionPoints=function(e){ce.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=ce.asn1,n=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){this.asn1ExtnValue=new t.DERSequence({array:e})},this.setByOneURI=function(e){var t=new n.GeneralNames([{uri:e}]),r=new n.DistributionPointName(t),i=new n.DistributionPoint({dpobj:r});this.setByDPArray([i])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},i.lang.extend(ce.asn1.x509.CRLDistributionPoints,ce.asn1.x509.Extension),ce.asn1.x509.CertificatePolicies=function(e){ce.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=ce.asn1,n=t.DERSequence,r=t.x509.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++)e.push(new r(this.params.array[t]));var i=new n({array:e});return this.asn1ExtnValue=i,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.x509.CertificatePolicies,ce.asn1.x509.Extension),ce.asn1.x509.PolicyInformation=function(e){ce.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=ce.asn1,n=t.DERSequence,r=t.DERObjectIdentifier,i=t.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var e=[new r({oid:this.params.policyoid})];if(void 0!==this.params.array){for(var t=[],a=0;a<this.params.array.length;a++)t.push(new i(this.params.array[a]));t.length>0&&e.push(new n({array:t}))}return new n({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.x509.PolicyInformation,ce.asn1.ASN1Object),ce.asn1.x509.PolicyQualifierInfo=function(e){ce.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=ce.asn1,n=t.DERSequence,r=t.DERIA5String,i=t.DERObjectIdentifier,a=t.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return void 0!==this.params.cps?new n({array:[new i({oid:"1.3.6.1.5.5.7.2.1"}),new r({str:this.params.cps})]}).getEncodedHex():null!=this.params.unotice?new n({array:[new i({oid:"1.3.6.1.5.5.7.2.2"}),new a(this.params.unotice)]}).getEncodedHex():void 0},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.x509.PolicyQualifierInfo,ce.asn1.ASN1Object),ce.asn1.x509.UserNotice=function(e){ce.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=ce.asn1.DERSequence,n=ce.asn1.x509.DisplayText,r=ce.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var e=[];return void 0!==this.params.noticeref&&e.push(new r(this.params.noticeref)),void 0!==this.params.exptext&&e.push(new n(this.params.exptext)),new t({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.x509.UserNotice,ce.asn1.ASN1Object),ce.asn1.x509.NoticeReference=function(e){ce.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=ce.asn1.DERSequence,n=ce.asn1.DERInteger,r=ce.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var e=[];if(void 0!==this.params.org&&e.push(new r(this.params.org)),void 0!==this.params.noticenum){for(var i=[],a=this.params.noticenum,o=0;o<a.length;o++)i.push(new n(a[o]));e.push(new t({array:i}))}if(0==e.length)throw new Error("parameter is empty");return new t({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.x509.NoticeReference,ce.asn1.ASN1Object),ce.asn1.x509.DisplayText=function(e){ce.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",void 0!==e&&("ia5"===e.type?this.hT="16":"vis"===e.type?this.hT="1a":"bmp"===e.type&&(this.hT="1e"))},i.lang.extend(ce.asn1.x509.DisplayText,ce.asn1.DERAbstractString),ce.asn1.x509.ExtKeyUsage=function(e){ce.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=ce.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var n=0;n<e.length;n++){var r=new t.DERObjectIdentifier(e[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},i.lang.extend(ce.asn1.x509.ExtKeyUsage,ce.asn1.x509.Extension),ce.asn1.x509.AuthorityKeyIdentifier=function(e){ce.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=ce.asn1,n=t.DERTaggedObject,r=t.x509.GeneralNames;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var i=new t.DERSequence({array:e});return this.asn1ExtnValue=i,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new ce.asn1.DEROctetString(e);else if("object"==typeof e&&ce.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN ")){var t=e;"string"==typeof e&&(t=He.getKey(e));var n=He.getKeyID(t);this.asn1KID=new ce.asn1.DEROctetString({hex:n})}},this.setCertIssuerByParam=function(e){void 0!==e.str||void 0!==e.ldapstr||void 0!==e.hex||void 0!==e.certsubject||void 0!==e.certissuer?this.asn1CertIssuer=new ce.asn1.x509.X500Name(e):"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&-1!=e.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new ce.asn1.x509.X500Name({certissuer:e}))},this.setCertSNByParam=function(e){if(void 0!==e.str||void 0!==e.bigint||void 0!==e.hex)this.asn1CertSN=new ce.asn1.DERInteger(e);else if("string"==typeof e&&-1!=e.indexOf("BEGIN ")&&e.indexOf("CERTIFICATE")){var t=new Ge;t.readCertPEM(e);var n=t.getSerialNumberHex();this.asn1CertSN=new ce.asn1.DERInteger({hex:n})}},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn),void 0!==e.issuersn&&"string"==typeof e.issuersn&&-1!=e.issuersn.indexOf("BEGIN ")&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},i.lang.extend(ce.asn1.x509.AuthorityKeyIdentifier,ce.asn1.x509.Extension),ce.asn1.x509.SubjectKeyIdentifier=function(e){ce.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=ce.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new t(e);else if("object"==typeof e&&ce.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN")){var n=e;"string"==typeof e&&(n=He.getKey(e));var r=He.getKeyID(n);this.asn1KID=new ce.asn1.DEROctetString({hex:r})}},this.oid="2.5.29.14",void 0!==e&&void 0!==e.kid&&this.setKIDByParam(e.kid)},i.lang.extend(ce.asn1.x509.SubjectKeyIdentifier,ce.asn1.x509.Extension),ce.asn1.x509.AuthorityInfoAccess=function(e){ce.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,n=ce.asn1,r=n.DERSequence,i=0;i<e.length;i++){var a=new r({array:[new n.DERObjectIdentifier(e[i].accessMethod),new n.x509.GeneralName(e[i].accessLocation)]});t.push(a)}this.asn1ExtnValue=new r({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},i.lang.extend(ce.asn1.x509.AuthorityInfoAccess,ce.asn1.x509.Extension),ce.asn1.x509.SubjectAltName=function(e){ce.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new ce.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},i.lang.extend(ce.asn1.x509.SubjectAltName,ce.asn1.x509.Extension),ce.asn1.x509.IssuerAltName=function(e){ce.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new ce.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},i.lang.extend(ce.asn1.x509.IssuerAltName,ce.asn1.x509.Extension),ce.asn1.x509.CRL=function(e){ce.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new ce.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg,prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new ce.asn1.DERBitString({hex:"00"+this.hexSig});var e=new ce.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+Oe(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==e&&(void 0!==e.tbsobj&&(this.asn1TBSCertList=e.tbsobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},i.lang.extend(ce.asn1.x509.CRL,ce.asn1.ASN1Object),ce.asn1.x509.TBSCertList=function(e){ce.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=ce.asn1,n=t.DERSequence,r=t.x509,i=r.Time;this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new r.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new r.X500Name(e)},this.setThisUpdateByParam=function(e){this.asn1ThisUpdate=new i(e)},this.setNextUpdateByParam=function(e){this.asn1NextUpdate=new i(e)},this.addRevokedCert=function(e,t){var n={};null!=e&&null!=e&&(n.sn=e),null!=t&&null!=t&&(n.time=t);var i=new r.CRLEntry(n);this.aRevokedCert.push(i)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var e=new n({array:this.aRevokedCert});this.asn1Array.push(e)}var t=new n({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},i.lang.extend(ce.asn1.x509.TBSCertList,ce.asn1.ASN1Object),ce.asn1.x509.CRLEntry=function(e){ce.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=ce.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},i.lang.extend(ce.asn1.x509.CRLEntry,ce.asn1.ASN1Object),ce.asn1.x509.X500Name=function(e){ce.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var t,n=ce.asn1,r=n.x509;this.setByString=function(e){var t=e.split("/");t.shift();for(var n=[],i=0;i<t.length;i++)if(t[i].match(/^[^=]+=.+$/))n.push(t[i]);else{var a=n.length-1;n[a]=n[a]+"/"+t[i]}for(i=0;i<n.length;i++)this.asn1Array.push(new r.RDN({str:n[i]}))},this.setByLdapString=function(e){var t=r.X500Name.ldapToCompat(e);this.setByString(t)},this.setByObject=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=new ce.asn1.x509.RDN({str:t+"="+e[t]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new n.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):void 0!==e.hex?this.hTLV=e.hex:void 0!==e.certissuer?((t=new Ge).readCertPEM(e.certissuer),this.hTLV=t.getIssuerHex()):void 0!==e.certsubject?((t=new Ge).readCertPEM(e.certsubject),this.hTLV=t.getSubjectHex()):"object"==typeof e&&void 0===e.certsubject&&void 0===e.certissuer&&this.setByObject(e))},i.lang.extend(ce.asn1.x509.X500Name,ce.asn1.ASN1Object),ce.asn1.x509.X500Name.compatToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map((function(e){return e.replace(/,/,"\\,")}))).join(",")},ce.asn1.x509.X500Name.onelineToLDAP=function(e){return ce.asn1.x509.X500Name.compatToLDAP(e)},ce.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),n=!1,r=[],i=0;t.length>0;i++){var a=t.shift();if(!0===n){var o=(r.pop()+","+a).replace(/\\,/g,",");r.push(o),n=!1}else r.push(a);"\\"===a.substr(-1,1)&&(n=!0)}return(r=r.map((function(e){return e.replace("/","\\/")}))).reverse(),"/"+r.join("/")},ce.asn1.x509.X500Name.ldapToOneline=function(e){return ce.asn1.x509.X500Name.ldapToCompat(e)},ce.asn1.x509.RDN=function(e){ce.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(e){this.asn1Array.push(new ce.asn1.x509.AttributeTypeAndValue({str:e}))},this.addByMultiValuedString=function(e){for(var t=ce.asn1.x509.RDN.parseString(e),n=0;n<t.length;n++)this.addByString(t[n])},this.getEncodedHex=function(){var e=new ce.asn1.DERSet({array:this.asn1Array});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.addByMultiValuedString(e.str)},i.lang.extend(ce.asn1.x509.RDN,ce.asn1.ASN1Object),ce.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),n=!1,r=[],i=0;t.length>0;i++){var a=t.shift();if(!0===n){var o=(r.pop()+"+"+a).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(a);"\\"===a.substr(-1,1)&&(n=!0)}var s=!1,u=[];for(i=0;r.length>0;i++){if(a=r.shift(),!0===s){var c=u.pop();a.match(/"$/)?(o=(c+"+"+a).replace(/^([^=]+)="(.*)"$/,"$1=$2"),u.push(o),s=!1):u.push(c+"+"+a)}else u.push(a);a.match(/^[^=]+="/)&&(s=!0)}return u},ce.asn1.x509.AttributeTypeAndValue=function(e){ce.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var t=ce.asn1;this.setByString=function(e){var t=e.match(/^([^=]+)=(.+)$/);if(!t)throw"malformed attrTypeAndValueStr: "+e;this.setByAttrTypeAndValueStr(t[1],t[2])},this.setByAttrTypeAndValueStr=function(e,t){this.typeObj=ce.asn1.x509.OID.atype2obj(e);var n="utf8";"C"==e&&(n="prn"),this.valueObj=this.getValueObj(n,t)},this.getValueObj=function(e,n){if("utf8"==e)return new t.DERUTF8String({str:n});if("prn"==e)return new t.DERPrintableString({str:n});if("tel"==e)return new t.DERTeletexString({str:n});if("ia5"==e)return new t.DERIA5String({str:n});throw"unsupported directory string type: type="+e+" value="+n},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.setByString(e.str)},i.lang.extend(ce.asn1.x509.AttributeTypeAndValue,ce.asn1.ASN1Object),ce.asn1.x509.SubjectPublicKeyInfo=function(e){ce.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=ce.asn1,n=t.DERInteger,r=t.DERBitString,i=t.DERObjectIdentifier,a=t.DERSequence,o=t.ASN1Util.newObject,s=t.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new a({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this.setPubKey=function(e){try{if(e instanceof re){var t=o({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).getEncodedHex();this.asn1AlgId=new s({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+t})}}catch(c){}try{if(e instanceof ce.crypto.ECDSA){var a=new i({name:e.curveName});this.asn1AlgId=new s({name:"ecPublicKey",asn1params:a}),this.asn1SubjPKey=new r({hex:"00"+e.pubKeyHex})}}catch(c){}try{if(e instanceof ce.crypto.DSA){a=new o({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}),this.asn1AlgId=new s({name:"dsa",asn1params:a});var u=new n({bigint:e.y});this.asn1SubjPKey=new r({hex:"00"+u.getEncodedHex()})}}catch(c){}},void 0!==e&&this.setPubKey(e)},i.lang.extend(ce.asn1.x509.SubjectPublicKeyInfo,ce.asn1.ASN1Object),ce.asn1.x509.Time=function(e){ce.asn1.x509.Time.superclass.constructor.call(this);var t=ce.asn1,n=t.DERUTCTime,r=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=e.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},i.lang.extend(ce.asn1.x509.Time,ce.asn1.ASN1Object),ce.asn1.x509.AlgorithmIdentifier=function(e){ce.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=ce.asn1,n=t.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var e=null;for(var r in n)r===this.nameAlg&&(e=n[r]);if(null!==e)return this.hTLV=e,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var i=[this.asn1Alg];null!==this.asn1Params&&i.push(this.asn1Params);var a=new t.DERSequence({array:i});return this.hTLV=a.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var r=this.nameAlg.toLowerCase();"withdsa"!==r.substr(-7,7)&&"withecdsa"!==r.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},i.lang.extend(ce.asn1.x509.AlgorithmIdentifier,ce.asn1.ASN1Object),ce.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},ce.asn1.x509.GeneralName=function(e){ce.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=ce.asn1,r=n.DEROctetString,i=n.DERIA5String,a=n.DERTaggedObject,o=n.ASN1Object,s=n.x509.X500Name,u=Ae;this.explicit=!1,this.setByParam=function(e){var n=null;if(void 0!==e){if(void 0!==e.rfc822&&(this.type="rfc822",n=new i({str:e[this.type]})),void 0!==e.dns&&(this.type="dns",n=new i({str:e[this.type]})),void 0!==e.uri&&(this.type="uri",n=new i({str:e[this.type]})),void 0!==e.dn&&(this.type="dn",this.explicit=!0,n="string"==typeof e.dn?new s({str:e.dn}):e.dn instanceof ce.asn1.x509.X500Name?e.dn:new s(e.dn)),void 0!==e.ldapdn&&(this.type="dn",this.explicit=!0,n=new s({ldapstr:e.ldapdn})),void 0!==e.certissuer){this.type="dn",this.explicit=!0;var c=null;if((h=e.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(c=u(h)),null==c)throw"certissuer param not cert";(f=new Ge).hex=c;var l=f.getIssuerHex();(n=new o).hTLV=l}if(void 0!==e.certsubj){var h,f;if(this.type="dn",this.explicit=!0,c=null,(h=e.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(c=u(h)),null==c)throw"certsubj param not cert";(f=new Ge).hex=c,l=f.getSubjectHex(),(n=new o).hTLV=l}if(void 0!==e.ip){this.type="ip",this.explicit=!1;var d,p=e.ip,v="malformed IP address";if(p.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(d=Be("["+p.split(".").join(",")+"]")).length)throw v}else if(p.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))d=Ie(p);else{if(!p.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw v;d=p}n=new r({hex:d})}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new a({explicit:this.explicit,tag:t[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},i.lang.extend(ce.asn1.x509.GeneralName,ce.asn1.ASN1Object),ce.asn1.x509.GeneralNames=function(e){ce.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=ce.asn1;this.setByParamArray=function(e){for(var n=0;n<e.length;n++){var r=new t.x509.GeneralName(e[n]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new t.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},i.lang.extend(ce.asn1.x509.GeneralNames,ce.asn1.ASN1Object),ce.asn1.x509.DistributionPointName=function(e){ce.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=ce.asn1,n=t.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e){if(!t.x509.GeneralNames.prototype.isPrototypeOf(e))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=e}},i.lang.extend(ce.asn1.x509.DistributionPointName,ce.asn1.ASN1Object),ce.asn1.x509.DistributionPoint=function(e){ce.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=ce.asn1;this.getEncodedHex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var n=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(n)}return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.dpobj&&(this.asn1DP=e.dpobj)},i.lang.extend(ce.asn1.x509.DistributionPoint,ce.asn1.ASN1Object),ce.asn1.x509.OID=new function(e){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=new ce.asn1.DERObjectIdentifier({oid:this.name2oidList[e]});return this.objCache[e]=t,t},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.atype2oidList[e])throw"AttributeType name undefined: "+e;var t=new ce.asn1.DERObjectIdentifier({oid:this.atype2oidList[e]});return this.objCache[e]=t,t}},ce.asn1.x509.OID.oid2name=function(e){var t=ce.asn1.x509.OID.name2oidList;for(var n in t)if(t[n]==e)return n;return""},ce.asn1.x509.OID.oid2atype=function(e){var t=ce.asn1.x509.OID.atype2oidList;for(var n in t)if(t[n]==e)return n;return e},ce.asn1.x509.OID.name2oid=function(e){var t=ce.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},ce.asn1.x509.X509Util={},ce.asn1.x509.X509Util.newCertPEM=function(e){var t=ce.asn1.x509,n=t.Certificate,r=new(0,t.TBSCertificate);if(void 0===e.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(e.serial),"string"!=typeof e.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(e.sigalg),void 0===e.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(e.issuer),void 0===e.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(e.notbefore),void 0===e.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(e.notafter),void 0===e.subject)throw"subject name undefined.";if(r.setSubjectByParam(e.subject),void 0===e.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var i=0;i<e.ext.length;i++)for(key in e.ext[i])r.appendExtensionByName(key,e.ext[i][key]);if(void 0===e.cakey&&void 0===e.sighex)throw"param cakey and sighex undefined.";var a=null;return e.cakey&&(a=new n({tbscertobj:r,prvkeyobj:!0===e.cakey.isPrivate?e.cakey:He.getKey.apply(null,e.cakey)})).sign(),e.sighex&&(a=new n({tbscertobj:r})).setSignatureHex(e.sighex),a.getPEMString()},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.cms&&ce.asn1.cms||(ce.asn1.cms={}),ce.asn1.cms.Attribute=function(e){var t=ce.asn1;t.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var e,n,r;e=new t.DERObjectIdentifier({oid:this.attrTypeOid}),n=new t.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(i){throw"fail valueSet.getEncodedHex in Attribute(1)/"+i}r=new t.DERSequence({array:[e,n]});try{this.hTLV=r.getEncodedHex()}catch(i){throw"failed seq.getEncodedHex in Attribute(2)/"+i}return this.hTLV}},i.lang.extend(ce.asn1.cms.Attribute,ce.asn1.ASN1Object),ce.asn1.cms.ContentType=function(e){var t=ce.asn1;t.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==e&&(n=new t.DERObjectIdentifier(e),this.valueList=[n])},i.lang.extend(ce.asn1.cms.ContentType,ce.asn1.cms.Attribute),ce.asn1.cms.MessageDigest=function(e){var t,n=ce,r=n.asn1,i=r.DEROctetString,a=r.cms;a.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==e&&(e.eciObj instanceof a.EncapsulatedContentInfo&&"string"==typeof e.hashAlg?((t=new i({hex:n.crypto.Util.hashHex(e.eciObj.eContentValueHex,e.hashAlg)})).getEncodedHex(),this.valueList=[t]):((t=new i(e)).getEncodedHex(),this.valueList=[t]))},i.lang.extend(ce.asn1.cms.MessageDigest,ce.asn1.cms.Attribute),ce.asn1.cms.SigningTime=function(e){var t=ce.asn1;if(t.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==e){var n=new t.x509.Time(e);try{n.getEncodedHex()}catch(s){throw"SigningTime.getEncodedHex() failed/"+s}this.valueList=[n]}},i.lang.extend(ce.asn1.cms.SigningTime,ce.asn1.cms.Attribute),ce.asn1.cms.SigningCertificate=function(e){var t=ce,n=t.asn1,r=n.DERSequence,i=n.cms;i.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(e){for(var a=[],o=0;o<e.length;o++){var s=Ae(e[o]),u=t.crypto.Util.hashHex(s,"sha1"),c=new n.DEROctetString({hex:u});c.getEncodedHex();var l=new i.IssuerSerial({cert:e[o]});l.getEncodedHex();var h=new r({array:[c,l]});h.getEncodedHex(),a.push(h)}var f=new r({array:a});f.getEncodedHex(),this.valueList=[f]},void 0!==e&&"object"==typeof e.array&&this.setCerts(e.array)},i.lang.extend(ce.asn1.cms.SigningCertificate,ce.asn1.cms.Attribute),ce.asn1.cms.SigningCertificateV2=function(e){var t=ce.asn1,n=t.DERSequence,r=t.x509,i=t.cms,a=ce.crypto;if(i.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(e,o){for(var s=[],u=0;u<e.length;u++){var c=Ae(e[u]),l=[];"sha256"!==o&&l.push(new r.AlgorithmIdentifier({name:o}));var h=a.Util.hashHex(c,o),f=new t.DEROctetString({hex:h});f.getEncodedHex(),l.push(f);var d=new i.IssuerSerial({cert:e[u]});d.getEncodedHex(),l.push(d);var p=new n({array:l});p.getEncodedHex(),s.push(p)}var v=new n({array:s});v.getEncodedHex(),this.valueList=[v]},void 0!==e&&"object"==typeof e.array){var o="sha256";"string"==typeof e.hashAlg&&(o=e.hashAlg),this.setCerts(e.array,o)}},i.lang.extend(ce.asn1.cms.SigningCertificateV2,ce.asn1.cms.Attribute),ce.asn1.cms.IssuerSerial=function(e){var t=ce.asn1,n=t.DERInteger,r=t.x509,i=r.X500Name,a=r.GeneralNames,o=Ge;t.cms.IssuerSerial.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=Ae(e),r=new o;r.hex=t;var a=r.getIssuerHex();this.dIssuer=new i,this.dIssuer.hTLV=a;var s=r.getSerialNumberHex();this.dSerial=new n({hex:s})},this.getEncodedHex=function(){var e=new a([{dn:this.dIssuer}]),n=new t.DERSequence({array:[e,this.dSerial]});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(this.dIssuer=e.issuer instanceof i?e.issuer:new i(e.issuer),this.dSerial=e.serial instanceof n?e.serial:new n(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},i.lang.extend(ce.asn1.cms.IssuerSerial,ce.asn1.ASN1Object),ce.asn1.cms.IssuerAndSerialNumber=function(e){var t=ce.asn1,n=t.DERInteger,r=t.x509.X500Name,i=Ge;t.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=Ae(e),a=new i;a.hex=t;var o=a.getIssuerHex();this.dIssuer=new r,this.dIssuer.hTLV=o;var s=a.getSerialNumberHex();this.dSerial=new n({hex:s})},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(this.dIssuer=e.issuer instanceof r?e.issuer:new r(e.issuer),this.dSerial=e.serial instanceof n?e.serial:new n(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},i.lang.extend(ce.asn1.cms.IssuerAndSerialNumber,ce.asn1.ASN1Object),ce.asn1.cms.AttributeList=function(e){var t=ce.asn1,n=t.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(e){e instanceof n.Attribute&&this.list.push(e)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},i.lang.extend(ce.asn1.cms.AttributeList,ce.asn1.ASN1Object),ce.asn1.cms.SignerInfo=function(e){var t=ce.asn1,n=t.DERTaggedObject,r=t.cms,i=r.AttributeList,a=r.ContentType,o=r.EncapsulatedContentInfo,s=r.MessageDigest,u=r.SignedData,c=t.x509.AlgorithmIdentifier,l=ce.crypto,h=He;r.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new t.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new i,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new i,this.setSignerIdentifier=function(e){"string"==typeof e&&-1!=e.indexOf("CERTIFICATE")&&-1!=e.indexOf("BEGIN")&&-1!=e.indexOf("END")&&(this.dSignerIdentifier=new r.IssuerAndSerialNumber({cert:e}))},this.setForContentAndHash=function(e){void 0!==e&&(e.eciObj instanceof o&&(this.dSignedAttrs.add(new a({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new s({eciObj:e.eciObj,hashAlg:e.hashAlg}))),void 0!==e.sdObj&&e.sdObj instanceof u&&-1==e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)&&e.sdObj.digestAlgNameList.push(e.hashAlg),"string"==typeof e.hashAlg&&(this.dDigestAlgorithm=new c({name:e.hashAlg})))},this.sign=function(e,n){this.dSigAlg=new c({name:n});var r=this.dSignedAttrs.getEncodedHex(),i=h.getKey(e),a=new l.Signature({alg:n});a.init(i),a.updateHex(r);var o=a.sign();this.dSig=new t.DEROctetString({hex:o})},this.addUnsigned=function(e){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(e)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof i&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var e=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),r=null;this.dUnsignedAttrs.length()>0&&(r=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var a=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];null!=r&&a.push(r);var o=new t.DERSequence({array:a});return this.hTLV=o.getEncodedHex(),this.hTLV}},i.lang.extend(ce.asn1.cms.SignerInfo,ce.asn1.ASN1Object),ce.asn1.cms.EncapsulatedContentInfo=function(e){var t=ce.asn1,n=t.DERTaggedObject,r=t.DERSequence,i=t.DERObjectIdentifier,a=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new i({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(e){this.dEContentType=e.match(/^[0-2][.][0-9.]+$/)?new i({oid:e}):new i({name:e})},this.setContentValue=function(e){void 0!==e&&("string"==typeof e.hex?this.eContentValueHex=e.hex:"string"==typeof e.str&&(this.eContentValueHex=we(e.str)))},this.setContentValueHex=function(e){this.eContentValueHex=e},this.setContentValueStr=function(e){this.eContentValueHex=we(e)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var e=new a({hex:this.eContentValueHex});this.dEContent=new n({obj:e,tag:"a0",explicit:!0});var t=[this.dEContentType];this.isDetached||t.push(this.dEContent);var i=new r({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV}},i.lang.extend(ce.asn1.cms.EncapsulatedContentInfo,ce.asn1.ASN1Object),ce.asn1.cms.ContentInfo=function(e){var t=ce.asn1,n=t.DERTaggedObject,r=t.DERSequence,i=t.x509;ce.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(e){"string"==typeof e&&(this.dContentType=i.OID.name2obj(e))},this.getEncodedHex=function(){var e=new n({obj:this.dContent,tag:"a0",explicit:!0}),t=new r({array:[this.dContentType,e]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(e.type&&this.setContentType(e.type),e.obj&&e.obj instanceof t.ASN1Object&&(this.dContent=e.obj))},i.lang.extend(ce.asn1.cms.ContentInfo,ce.asn1.ASN1Object),ce.asn1.cms.SignedData=function(e){var t=ce.asn1,n=t.ASN1Object,r=t.DERInteger,i=t.DERSet,a=t.DERSequence,o=t.DERTaggedObject,s=t.cms,u=s.EncapsulatedContentInfo,c=s.SignerInfo,l=s.ContentInfo,h=t.x509.AlgorithmIdentifier;ce.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new u,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new c],this.addCertificatesByPEM=function(e){var t=Ae(e),r=new n;r.hTLV=t,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var e=[],t=0;t<this.digestAlgNameList.length;t++){var n=new h({name:this.digestAlgNameList[t]});e.push(n)}this.dDigestAlgs=new i({array:e})}var r=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var s=new i({array:this.certificateList});this.dCerts=new o({obj:s,tag:"a0",explicit:!1})}null!=this.dCerts&&r.push(this.dCerts);var u=new i({array:this.signerInfoList});r.push(u);var c=new a({array:r});return this.hTLV=c.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new l({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return Ce(this.getContentInfoEncodedHex(),"CMS")}},i.lang.extend(ce.asn1.cms.SignedData,ce.asn1.ASN1Object),ce.asn1.cms.CMSUtil=new function(){},ce.asn1.cms.CMSUtil.newSignedData=function(e){var t=ce.asn1,n=t.cms,r=n.SignerInfo,i=n.SigningTime,a=n.SigningCertificate,o=n.SigningCertificateV2,s=t.cades.SignaturePolicyIdentifier,u=new(0,n.SignedData);if(u.dEncapContentInfo.setContentValue(e.content),"boolean"==typeof e.detached&&(u.dEncapContentInfo.isDetached=e.detached),"object"==typeof e.certs)for(var c=0;c<e.certs.length;c++)u.addCertificatesByPEM(e.certs[c]);for(u.signerInfoList=[],c=0;c<e.signerInfos.length;c++){var l=e.signerInfos[c],h=new r;for(attrName in h.setSignerIdentifier(l.signerCert),h.setForContentAndHash({sdObj:u,eciObj:u.dEncapContentInfo,hashAlg:l.hashAlg}),l.sAttr){var f=l.sAttr[attrName];if("SigningTime"==attrName){var d=new i(f);h.dSignedAttrs.add(d)}"SigningCertificate"==attrName&&(d=new a(f),h.dSignedAttrs.add(d)),"SigningCertificateV2"==attrName&&(d=new o(f),h.dSignedAttrs.add(d)),"SignaturePolicyIdentifier"==attrName&&(d=new s(f),h.dSignedAttrs.add(d))}h.sign(l.signerPrvKey,l.sigAlg),u.signerInfoList.push(h)}return u},ce.asn1.cms.CMSUtil.verifySignedData=function(e){var t=fe.getVbyList,n=fe.getTLVbyList,r=fe.getIdxbyList,i=fe.getChildIdx,a=fe.getTLV,o=fe.oidname,s=ce.crypto.Util.hashHex;void 0===e.cms&&(0,ce.lang.String.isHex)(e.cms);var u=e.cms,c=function(e,a){var s=a.idx;a.signerid_issuer1=n(e,s,[1,0],"30"),a.signerid_serial1=t(e,s,[1,1],"02"),a.hashalg=o(t(e,s,[2,0],"06"));var u=r(e,s,[3],"a0");a.idxSignedAttrs=u,l(e,a,u);var c=i(e,s).length;if(c<6)throw"malformed SignerInfo";a.sigalg=o(t(e,s,[c-2,0],"06")),a.sigval=t(e,s,[c-1],"04")},l=function(e,n,r){var a=i(e,r);n.signedAttrIdxList=a;for(var o=0;o<a.length;o++){var s,u=a[o],c=t(e,u,[0],"06");"2a864886f70d010905"===c?(s=xe(t(e,u,[1,0])),n.saSigningTime=s):"2a864886f70d010904"===c&&(s=t(e,u,[1,0],"04"),n.saMessageDigest=s)}},h=function(e,t,n,r){n.verifyDetail={};var o=n.verifyDetail,u=t.parse.econtent,c=n.hashalg,l=n.saMessageDigest;o.validMessageDigest=!1,s(u,c)===l&&(o.validMessageDigest=!0),function(e,t,n,r){var o,s=t.parse.certsIdx;if(void 0===t.certs){o=[],t.certkeys=[];for(var u=i(e,s),c=0;c<u.length;c++){var l=a(e,u[c]),h=new Ge;h.readCertHex(l),o[c]=h,t.certkeys[c]=h.getPublicKey()}t.certs=o}else o=t.certs;for(t.cccc=o.length,t.cccci=u.length,c=0;c<o.length;c++){var f=h.getIssuerHex(),d=h.getSerialNumberHex();n.signerid_issuer1===f&&n.signerid_serial1===d&&(n.certkey_idx=c)}}(e,t,n),o.validSignatureValue=!1;var h=n.sigalg,f="31"+a(e,n.idxSignedAttrs).substr(2);n.signedattrshex=f;var d=t.certs[n.certkey_idx].getPublicKey(),p=new ce.crypto.Signature({alg:h});p.init(d),p.updateHex(f);var v=p.verify(n.sigval);o.validSignatureValue_isValid=v,!0===v&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},f={isValid:!1,parse:{}};return function(e,n){if("2a864886f70d010702"!==t(e,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=t(e,0,[1,0,2,1,0]),function(e,t){for(var n,i=3;i<6;i++)if(void 0!==(n=r(e,0,[1,0,i]))){var a=e.substr(n,2);"a0"===a&&(t.certsIdx=n),"a1"===a&&(t.revinfosIdx=n),"31"===a&&(t.signerinfosIdx=n)}}(e,n),n.signerInfos=[],function(e,t){var n=t.signerinfosIdx;if(void 0!==n){var r=i(e,n);t.signerInfoIdxList=r;for(var a=0;a<r.length;a++){var o={idx:r[a]};c(e,o),t.signerInfos.push(o)}}}(e,n)}(u,f.parse),function(e,t){for(var n=t.parse.signerInfos,r=n.length,i=!0,a=0;a<r;a++){var o=n[a];h(e,t,o),o.isValid||(i=!1)}t.isValid=i}(u,f),f},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.tsp&&ce.asn1.tsp||(ce.asn1.tsp={}),ce.asn1.tsp.Accuracy=function(e){var t=ce.asn1,n=t.DERInteger,r=t.DERSequence,i=t.DERTaggedObject;t.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var e=null,t=null,a=null,o=[];if(null!=this.seconds&&(e=new n({int:this.seconds}),o.push(e)),null!=this.millis){var s=new n({int:this.millis});t=new i({obj:s,tag:"80",explicit:!1}),o.push(t)}if(null!=this.micros){var u=new n({int:this.micros});a=new i({obj:u,tag:"81",explicit:!1}),o.push(a)}var c=new r({array:o});return this.hTLV=c.getEncodedHex(),this.hTLV},void 0!==e&&("number"==typeof e.seconds&&(this.seconds=e.seconds),"number"==typeof e.millis&&(this.millis=e.millis),"number"==typeof e.micros&&(this.micros=e.micros))},i.lang.extend(ce.asn1.tsp.Accuracy,ce.asn1.ASN1Object),ce.asn1.tsp.MessageImprint=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==e&&("string"==typeof e.hashAlg&&(this.dHashAlg=new i({name:e.hashAlg})),"string"==typeof e.hashValue&&(this.dHashValue=new r({hex:e.hashValue})))},i.lang.extend(ce.asn1.tsp.MessageImprint,ce.asn1.ASN1Object),ce.asn1.tsp.TimeStampReq=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERBoolean,a=t.DERObjectIdentifier,o=t.tsp,s=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(e){e instanceof s?this.dMessageImprint=e:"object"==typeof e&&(this.dMessageImprint=new s(e))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var e=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&e.push(this.dPolicy),null!=this.dNonce&&e.push(this.dNonce),this.certReq&&e.push(new i);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.mi&&this.setMessageImprint(e.mi),"object"==typeof e.policy&&(this.dPolicy=new a(e.policy)),"object"==typeof e.nonce&&(this.dNonce=new r(e.nonce)),"boolean"==typeof e.certreq&&(this.certReq=e.certreq))},i.lang.extend(ce.asn1.tsp.TimeStampReq,ce.asn1.ASN1Object),ce.asn1.tsp.TSTInfo=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERBoolean,a=t.DERGeneralizedTime,o=t.DERObjectIdentifier,s=t.tsp,u=s.MessageImprint,c=s.Accuracy,l=t.x509.X500Name;if(s.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(e.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(e.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(e.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new u(e.messageImprint)),void 0!==e.serialNumber&&(this.dSerialNumber=new r(e.serialNumber)),void 0!==e.genTime&&(this.dGenTime=new a(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new c(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new i),void 0!==e.nonce&&(this.dNonce=new r(e.nonce)),void 0!==e.tsa&&(this.dTsa=new l(e.tsa))}},i.lang.extend(ce.asn1.tsp.TSTInfo,ce.asn1.ASN1Object),ce.asn1.tsp.TimeStampResp=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ASN1Object,i=t.tsp,a=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dTST&&e.push(this.dTST);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new a(e.status)),void 0!==e.tst&&e.tst instanceof r&&(this.dTST=e.tst.getContentInfo()))},i.lang.extend(ce.asn1.tsp.TimeStampResp,ce.asn1.ASN1Object),ce.asn1.tsp.PKIStatusInfo=function(e){var t=ce.asn1,n=t.DERSequence,r=t.tsp,i=r.PKIStatus,a=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dStatusString&&e.push(this.dStatusString),null!=this.dFailureInfo&&e.push(this.dFailureInfo);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new i(e.status)),"object"==typeof e.statstr&&(this.dStatusString=new a({array:e.statstr})),"object"==typeof e.failinfo&&(this.dFailureInfo=new o(e.failinfo)))},i.lang.extend(ce.asn1.tsp.PKIStatusInfo,ce.asn1.ASN1Object),ce.asn1.tsp.PKIStatus=function(e){var t=ce.asn1,n=t.DERInteger,r=t.tsp,i=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==e)if(void 0!==e.name){var a=i.valueList;if(void 0===a[e.name])throw"name undefined: "+e.name;this.dStatus=new n({int:a[e.name]})}else this.dStatus=new n(e)},i.lang.extend(ce.asn1.tsp.PKIStatus,ce.asn1.ASN1Object),ce.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},ce.asn1.tsp.PKIFreeText=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DERUTF8String;t.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var e=[],t=0;t<this.textList.length;t++)e.push(new r({str:this.textList[t]}));var i=new n({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==e&&"object"==typeof e.array&&(this.textList=e.array)},i.lang.extend(ce.asn1.tsp.PKIFreeText,ce.asn1.ASN1Object),ce.asn1.tsp.PKIFailureInfo=function(e){var t=ce.asn1,n=t.DERBitString,r=t.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var e=new Number(this.value).toString(2),t=new n;return t.setByBinaryString(e),this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e)if("string"==typeof e.name){var i=r.valueList;if(void 0===i[e.name])throw"name undefined: "+e.name;this.value=i[e.name]}else"number"==typeof e.int&&(this.value=e.int)},i.lang.extend(ce.asn1.tsp.PKIFailureInfo,ce.asn1.ASN1Object),ce.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},ce.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},ce.asn1.tsp.SimpleTSAAdapter=function(e){var t=ce.asn1.tsp,n=ce.crypto.Util.hashHex;t.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,r){var i=n(e,r);this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},this.params.tstInfo.serialNumber={int:this.serial++};var a=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:a},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.tsp.SimpleTSAAdapter,ce.asn1.tsp.AbstractTSAAdapter),ce.asn1.tsp.FixedTSAAdapter=function(e){var t=ce.asn1.tsp,n=ce.crypto.Util.hashHex;t.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,r){var i=n(e,r);return this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.tsp.FixedTSAAdapter,ce.asn1.tsp.AbstractTSAAdapter),ce.asn1.tsp.TSPUtil=new function(){},ce.asn1.tsp.TSPUtil.newTimeStampToken=function(e){var t=ce.asn1,n=t.cms,r=t.tsp.TSTInfo,i=new n.SignedData,a=new r(e.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:a}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof e.certs)for(var o=0;o<e.certs.length;o++)i.addCertificatesByPEM(e.certs[o]);var s=i.signerInfoList[0];s.setSignerIdentifier(e.signerCert),s.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:e.hashAlg});var u=new n.SigningCertificate({array:[e.signerCert]});return s.dSignedAttrs.add(u),s.sign(e.signerPrvKey,e.sigAlg),i},ce.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=fe,n=t.getV,r=t.getTLV,i={certreq:!1},a=(0,t.getChildIdx)(e,0);if(a.length<2)throw"TimeStampReq must have at least 2 items";var o=r(e,a[1]);i.mi=ce.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var s=2;s<a.length;s++){var u=a[s],c=e.substr(u,2);if("06"==c){var l=n(e,u);i.policy=t.hextooidstr(l)}"02"==c&&(i.nonce=n(e,u)),"01"==c&&(i.certreq=!0)}return i},ce.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=fe,n=t.getChildIdx,r=t.getV,i=t.getIdxbyList,a={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";n(e,0);var o=r(e,i(e,0,[0,0])),s=t.hextooidstr(o),u=ce.asn1.x509.OID.oid2name(s);if(""==u)throw"hashAlg name undefined: "+s;var c=u,l=i(e,0,[1]);return a.hashAlg=c,a.hashValue=r(e,l),a},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.cades&&ce.asn1.cades||(ce.asn1.cades={}),ce.asn1.cades.SignaturePolicyIdentifier=function(e){var t=ce.asn1,n=t.DERObjectIdentifier,r=t.DERSequence,i=t.cades,a=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==e&&"string"==typeof e.oid&&"object"==typeof e.hash){var o=new r({array:[new n({oid:e.oid}),new a(e.hash)]});this.valueList=[o]}},i.lang.extend(ce.asn1.cades.SignaturePolicyIdentifier,ce.asn1.cms.Attribute),ce.asn1.cades.OtherHashAlgAndValue=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var e=new n({array:[this.dAlg,this.dHash]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&"string"==typeof e.alg&&"string"==typeof e.hash&&(this.dAlg=new i({name:e.alg}),this.dHash=new r({hex:e.hash}))},i.lang.extend(ce.asn1.cades.OtherHashAlgAndValue,ce.asn1.ASN1Object),ce.asn1.cades.SignatureTimeStamp=function(e){var t=ce.asn1,n=t.ASN1Object;if(t.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==e){if(void 0!==e.res)if("string"==typeof e.res&&e.res.match(/^[0-9A-Fa-f]+$/));else if(!(e.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==e.tst)if("string"==typeof e.tst&&e.tst.match(/^[0-9A-Fa-f]+$/)){var r=new n;this.tstHex=e.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(e.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},i.lang.extend(ce.asn1.cades.SignatureTimeStamp,ce.asn1.cms.Attribute),ce.asn1.cades.CompleteCertificateRefs=function(e){var t=ce.asn1.cades;t.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(e){this.valueList=[];for(var n=0;n<e.length;n++){var r=new t.OtherCertID(e[n]);this.valueList.push(r)}},void 0!==e&&"object"==typeof e&&"number"==typeof e.length&&this.setByArray(e)},i.lang.extend(ce.asn1.cades.CompleteCertificateRefs,ce.asn1.cms.Attribute),ce.asn1.cades.OtherCertID=function(e){var t=ce.asn1,n=t.cms,r=t.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(e){this.dOtherCertHash=new r.OtherHash(e),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(e))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var e=[this.dOtherCertHash];null!=this.dIssuerSerial&&e.push(this.dIssuerSerial);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),"object"==typeof e&&(!1===e.hasis&&(this.hasIssuerSerial=!1),"string"==typeof e.cert&&this.setByCertPEM(e.cert)))},i.lang.extend(ce.asn1.cades.OtherCertID,ce.asn1.ASN1Object),ce.asn1.cades.OtherHash=function(e){var t=ce.asn1,n=t.cades,r=n.OtherHashAlgAndValue,i=ce.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(e){if(-1==e.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var t=Ae(e),n=i(t,this.alg);this.dOtherHash=new r({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==e)if("string"==typeof e)if(-1!=e.indexOf("-----BEGIN "))this.setByCertPEM(e);else{if(!e.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new t.DEROctetString({hex:e})}else"object"==typeof e&&("string"==typeof e.cert?("string"==typeof e.alg&&(this.alg=e.alg),this.setByCertPEM(e.cert)):this.dOtherHash=new r(e))},i.lang.extend(ce.asn1.cades.OtherHash,ce.asn1.ASN1Object),ce.asn1.cades.CAdESUtil=new function(){},ce.asn1.cades.CAdESUtil.addSigTS=function(e,t,n){},ce.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=fe.getChildIdx,n=fe.getTLV,r=fe.getIdxbyList,i=ce.asn1,a=i.ASN1Object,o=i.cms.SignedData,s=i.cades.CAdESUtil,u={};if("06092a864886f70d010702"!=(0,fe.getTLVbyList)(e,0,[0]))throw"hex is not CMS SignedData";var c=t(e,r(e,0,[1,0]));if(c.length<4)throw"num of SignedData elem shall be 4 at least";var l=c.shift();u.version=n(e,l);var h=c.shift();u.algs=n(e,h);var f=c.shift();u.encapcontent=n(e,f),u.certs=null,u.revs=null,u.si=[];var d=c.shift();"a0"==e.substr(d,2)&&(u.certs=n(e,d),d=c.shift()),"a1"==e.substr(d,2)&&(u.revs=n(e,d),d=c.shift());var p=d;if("31"!=e.substr(p,2))throw"Can't find signerInfos";for(var v=t(e,p),m=0;m<v.length;m++){var g=s.parseSignerInfoForAddingUnsigned(e,v[m],m);u.si[m]=g}var y=null;for(u.obj=new o,(y=new a).hTLV=u.version,u.obj.dCMSVersion=y,(y=new a).hTLV=u.algs,u.obj.dDigestAlgs=y,(y=new a).hTLV=u.encapcontent,u.obj.dEncapContentInfo=y,(y=new a).hTLV=u.certs,u.obj.dCerts=y,u.obj.signerInfoList=[],m=0;m<u.si.length;m++)u.obj.signerInfoList.push(u.si[m].obj);return u},ce.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,n){var r=fe.getTLV,i=fe.getV,a=ce.asn1,o=a.ASN1Object,s=a.cms,u=s.AttributeList,c=s.SignerInfo,l={},h=(0,fe.getChildIdx)(e,t);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var f=h.shift();l.version=r(e,f);var d=h.shift();l.si=r(e,d);var p=h.shift();l.digalg=r(e,p);var v=h.shift();l.sattrs=r(e,v);var m=h.shift();l.sigalg=r(e,m);var g=h.shift();l.sig=r(e,g),l.sigval=i(e,g);var y=null;return l.obj=new c,(y=new o).hTLV=l.version,l.obj.dCMSVersion=y,(y=new o).hTLV=l.si,l.obj.dSignerIdentifier=y,(y=new o).hTLV=l.digalg,l.obj.dDigestAlgorithm=y,(y=new o).hTLV=l.sattrs,l.obj.dSignedAttrs=y,(y=new o).hTLV=l.sigalg,l.obj.dSigAlg=y,(y=new o).hTLV=l.sig,l.obj.dSig=y,l.obj.dUnsignedAttrs=new u,l},void 0!==ce.asn1.csr&&ce.asn1.csr||(ce.asn1.csr={}),ce.asn1.csr.CertificationRequest=function(e){var t=ce,n=t.asn1,r=n.DERBitString,i=n.DERSequence,a=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(e,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new a.AlgorithmIdentifier({name:e});var o=new t.crypto.Signature({alg:e});o.init(this.prvKey),o.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=o.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var s=new i({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=s.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return Ce(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==e&&void 0!==e.csrinfo&&(this.asn1CSRInfo=e.csrinfo)},i.lang.extend(ce.asn1.csr.CertificationRequest,ce.asn1.ASN1Object),ce.asn1.csr.CertificationRequestInfo=function(e){var t=ce.asn1,n=t.DERInteger,r=t.DERSequence,i=t.DERSet,a=t.DERNull,o=t.DERTaggedObject,s=t.DERObjectIdentifier,u=t.x509,c=u.X500Name,l=u.Extension,h=He;t.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(e){this.asn1Subject=new c(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=h.getKey(e);this.asn1SubjPKey=new u.SubjectPublicKeyInfo(t)},this.appendExtensionByName=function(e,t){l.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new r({array:this.extensionsArray}),t=new i({array:[e]}),n=new r({array:[new s({oid:"1.2.840.113549.1.9.14"}),t]}),u=new o({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(u)}else u=new o({explicit:!1,tag:"a0",obj:new a}),this.asn1Array.push(u);var c=new r({array:this.asn1Array});return this.hTLV=c.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},i.lang.extend(ce.asn1.csr.CertificationRequestInfo,ce.asn1.ASN1Object),ce.asn1.csr.CSRUtil=new function(){},ce.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=He,n=ce.asn1.csr;if(void 0===e.subject)throw"parameter subject undefined";if(void 0===e.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===e.sigalg)throw"parameter sigalg undefined";if(void 0===e.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new n.CertificationRequestInfo;if(r.setSubjectByParam(e.subject),r.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var i=0;i<e.ext.length;i++)for(key in e.ext[i])r.appendExtensionByName(key,e.ext[i][key]);var a=new n.CertificationRequest({csrinfo:r}),o=t.getKey(e.sbjprvkey);return a.sign(e.sigalg,o),a.getPEMString()},ce.asn1.csr.CSRUtil.getInfo=function(e){var t=fe.getTLVbyListEx,n={subject:{},pubkey:{}};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=Ae(e,"CERTIFICATE REQUEST");try{n.subject.hex=t(r,0,[0,1])}catch(f){}try{n.subject.name=Ge.hex2dn(n.subject.hex)}catch(f){}n.pubkey.hex=t(r,0,[0,2]),n.pubkey.obj=He.getKey(n.pubkey.hex,null,"pkcs8pub");try{n.ext=[];var i=new Ge;i.parseExt(e),n.ext.push({subjectAltName:{array:i.getExtSubjectAltName2()}})}catch(f){}return n},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.ocsp&&ce.asn1.ocsp||(ce.asn1.ocsp={}),ce.asn1.ocsp.DEFAULT_HASH="sha1",ce.asn1.ocsp.CertID=function(e){var t=ce.asn1,n=t.DEROctetString,r=t.DERInteger,i=t.DERSequence,a=t.x509.AlgorithmIdentifier,o=t.ocsp,s=o.DEFAULT_HASH,u=ce.crypto.Util.hashHex,c=Ge,l=fe;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(e,t,i,o){void 0===o&&(o=s),this.dHashAlg=new a({name:o}),this.dIssuerNameHash=new n({hex:e}),this.dIssuerKeyHash=new n({hex:t}),this.dSerialNumber=new r({hex:i})},this.setByCert=function(e,t,n){void 0===n&&(n=s);var r=new c;r.readCertPEM(t);var i=new c;i.readCertPEM(e);var a=i.getPublicKeyHex(),o=l.getTLVbyList(a,0,[1,0],"30"),h=r.getSerialNumberHex(),f=u(i.getSubjectHex(),n),d=u(o,n);this.setByValue(f,d,h,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var e=new i({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e){var h=e;if(void 0!==h.issuerCert&&void 0!==h.subjectCert){var f=s;void 0===h.alg&&(f=void 0),this.setByCert(h.issuerCert,h.subjectCert,f)}else{if(void 0===h.namehash||void 0===h.keyhash||void 0===h.serial)throw"invalid constructor arguments";f=s,void 0===h.alg&&(f=void 0),this.setByValue(h.namehash,h.keyhash,h.serial,f)}}},i.lang.extend(ce.asn1.ocsp.CertID,ce.asn1.ASN1Object),ce.asn1.ocsp.Request=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){var i=new r.CertID(e);this.dReqCert=i}},i.lang.extend(ce.asn1.ocsp.Request,ce.asn1.ASN1Object),ce.asn1.ocsp.TBSRequest=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],n=0;n<e.length;n++){var i=new r.Request(e[0]);t.push(i)}this.dRequestList=t},this.getEncodedHex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new n({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:e});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},i.lang.extend(ce.asn1.ocsp.TBSRequest,ce.asn1.ASN1Object),ce.asn1.ocsp.OCSPRequest=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList){var i=new r.TBSRequest(e);this.dTbsRequest=i}},i.lang.extend(ce.asn1.ocsp.OCSPRequest,ce.asn1.ASN1Object),ce.asn1.ocsp.OCSPUtil={},ce.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,n){var r=ce.asn1.ocsp;return void 0===n&&(n=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:n,issuerCert:e,subjectCert:t}]}).getEncodedHex()},ce.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=fe.getVbyList,n=fe.getVbyListEx,r=fe.getIdxbyList,i=fe.getV,a={};try{var o=n(e,0,[0],"0a");a.responseStatus=parseInt(o,16)}catch(l){}if(0!==a.responseStatus)return a;try{var s=r(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(s,2)?a.certStatus="good":"a1"===e.substr(s,2)?(a.certStatus="revoked",a.revocationTime=xe(t(e,s,[0]))):"82"===e.substr(s,2)&&(a.certStatus="unknown")}catch(l){}try{var u=r(e,0,[1,0,1,0,0,2,0,2]);a.thisUpdate=xe(i(e,u))}catch(l){}try{var c=r(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(c,2)&&(a.nextUpdate=xe(t(e,c,[0])))}catch(l){}return a},void 0!==ce&&ce||(ce={}),void 0!==ce.lang&&ce.lang||(ce.lang={}),ce.lang.String=function(){},"function"==typeof Buffer?(le=function(e){return ge(new Buffer(e,"utf8").toString("base64"))},he=function(e){return new Buffer(ye(e),"base64").toString("utf8")}):(le=function(e){return be(Pe(Le(e)))},he=function(e){return decodeURIComponent(Re(_e(e)))}),ce.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},ce.lang.String.isHex=function(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))},ce.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},ce.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=ye(e),ce.lang.String.isBase64(e))},ce.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var a="0001",o="00"+r,s="",u=i-a.length-o.length,c=0;c<u;c+=2)s+="ff";return a+s+o},this.hashString=function(e,t){return new ce.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new ce.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof re||e instanceof ce.crypto.DSA||e instanceof ce.crypto.ECDSA}},ce.crypto.Util.md5=function(e){return new ce.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},ce.crypto.Util.ripemd160=function(e){return new ce.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},ce.crypto.Util.SECURERANDOMGEN=new ee,ce.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return ce.crypto.Util.SECURERANDOMGEN.nextBytes(t),ve(t)},ce.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new x(ce.crypto.Util.getRandomHexOfNbytes(e),16)},ce.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return ce.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],ve(n)},ce.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new x(ce.crypto.Util.getRandomHexOfNbits(e),16)},ce.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=ce.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},ce.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var r=t.subtract(e);return ce.crypto.Util.getRandomBigIntegerZeroToMax(r).add(e)},ce.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=ce.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=ce.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=ce.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(a){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+a}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(a){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+a}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ce.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ce.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},ce.crypto.MessageDigest.getHashLength=function(e){var t=ce.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},ce.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ce.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=ce.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{this.mac=m.algo.HMAC.create(ce.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(h){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+h}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Se(e)),void(this.pass=m.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=we(e.utf8)),void 0!==e.rstr&&(t=Se(e.rstr)),void 0!==e.b64&&(t=_(e.b64)),void 0!==e.b64u&&(t=_e(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=m.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ce.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ce.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ce.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n)}this.init=function(e,t){var n=null;try{n=void 0===t?He.getKey(e):He.getKey(e,t)}catch(r){throw"init failed:"+r}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==ce.crypto.ECDSA&&(this.prvKey=new ce.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof re&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof re&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ce.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ce.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==ce.crypto.ECDSA&&(this.pubKey=new ce.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof re&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof re&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ce.crypto.ECDSA&&this.pubKey instanceof ce.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ce.crypto.DSA&&this.pubKey instanceof ce.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,this.provName=void 0===e.prov?ce.crypto.Util.DEFAULTPROVIDER[this.algName]:e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=He.getKey(e.prvkeypem),this.init(t)}catch(l){throw"fatal error to load pem private key: "+l}}},ce.crypto.Cipher=function(e){},ce.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof re&&t.isPublic){var r=ce.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.encrypt(e);if("RSAOAEP"===r)return t.encryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ce.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof re&&t.isPrivate){var r=ce.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.decrypt(e);if("RSAOAEP"===r)return t.decryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ce.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof re){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},ce.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.ECDSA=function(e){var t=Error,n=x,r=oe,i=ce.crypto.ECDSA,a=ce.crypto.ECParameterDB,o=i.getName,s=fe.getVbyListEx,u=fe.isASN1HEX,c=new ee;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new n(e.bitLength(),c).mod(e.subtract(n.ONE)).add(n.ONE)},this.setNamedCurve=function(e){this.ecparams=a.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.getBigRandom(this.ecparams.n),t=this.ecparams.G.multiply(e),n=t.getX().toBigInteger(),r=t.getY().toBigInteger(),i=this.ecparams.keylen/4,a=("0000000000"+e.toString(16)).slice(-i),o="04"+("0000000000"+n.toString(16)).slice(-i)+("0000000000"+r.toString(16)).slice(-i);return this.setPrivateKeyHex(a),this.setPublicKeyHex(o),{ecprvhex:a,ecpubhex:o}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var r=new n(t,16),a=this.ecparams.n,o=new n(e.substring(0,this.ecparams.keylen/4),16);do{var s=this.getBigRandom(a),u=this.ecparams.G.multiply(s).getX().toBigInteger().mod(a)}while(u.compareTo(n.ZERO)<=0);var c=s.modInverse(a).multiply(o.add(r.multiply(u))).mod(a);return i.biRSSigToASN1Sig(u,c)},this.sign=function(e,t){var r=t,i=this.ecparams.n,a=n.fromByteArrayUnsigned(e);do{var o=this.getBigRandom(i),s=this.ecparams.G.multiply(o).getX().toBigInteger().mod(i)}while(s.compareTo(x.ZERO)<=0);var u=o.modInverse(i).multiply(a.add(r.multiply(s))).mod(i);return this.serializeSig(s,u)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,a){try{var o,s,u=i.parseSigHex(t);o=u.r,s=u.s;var c=r.decodeFromHex(this.ecparams.curve,a),l=new n(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(l,o,s,c)}catch(h){return!1}},this.verify=function(e,t,i){var a,o,s;if(Bitcoin.Util.isArray(t)){var u=this.parseSig(t);a=u.r,o=u.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";a=t.r,o=t.s}if(i instanceof oe)s=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=r.decodeFrom(this.ecparams.curve,i)}var c=n.fromByteArrayUnsigned(e);return this.verifyRaw(c,a,o,s)},this.verifyRaw=function(e,t,r,i){var a=this.ecparams.n,o=this.ecparams.G;if(t.compareTo(n.ONE)<0||t.compareTo(a)>=0)return!1;if(r.compareTo(n.ONE)<0||r.compareTo(a)>=0)return!1;var s=r.modInverse(a),u=e.multiply(s).mod(a),c=t.multiply(s).mod(a);return o.multiply(u).add(i.multiply(c)).getX().toBigInteger().mod(a).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:n.fromByteArrayUnsigned(r),s:n.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var r=this.ecparams.n;return{r:n.fromByteArrayUnsigned(e.slice(1,33)).mod(r),s:n.fromByteArrayUnsigned(e.slice(33,65)).mod(r),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===u(e))throw new Error("not ASN.1 hex string");var t,n,r;try{t=s(e,0,["[0]",0],"06"),n=s(e,0,[1],"04");try{r=s(e,0,["[1]",0],"03")}catch(i){}}catch(i){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=o(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===u(e))throw new t("not ASN.1 hex string");var n,r,i;try{s(e,0,[1,0],"06"),n=s(e,0,[1,1],"06"),r=s(e,0,[2,0,1],"04");try{i=s(e,0,[2,0,"[1]",0],"03")}catch(a){}}catch(a){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=o(n),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===u(e))throw new t("not ASN.1 hex string");var n,r;try{s(e,0,[0,0],"06"),n=s(e,0,[0,1],"06"),r=s(e,0,[1],"03")}catch(i){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=o(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(e,n){if(!1===u(e))throw new t("not ASN.1 hex string");var r,i;try{r=s(e,0,[0,5,0,1],"06"),i=s(e,0,[0,5,1],"03")}catch(a){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=o(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},ce.crypto.ECDSA.parseSigHex=function(e){var t=ce.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new x(t.r,16),s:new x(t.s,16)}},ce.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=fe.getChildIdx,n=fe.getV;if(fe.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var r=t(e,0);if(2!=r.length)throw new Error("signature shall have two elements");var i=r[0],a=r[1];if("02"!=e.substr(i,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(a,2))throw new Error("2nd item not ASN.1 integer");return{r:n(e,i),s:n(e,a)}},ce.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=ce.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},ce.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return ce.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},ce.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new x(e,16),r=new x(t,16);return ce.crypto.ECDSA.biRSSigToASN1Sig(n,r)},ce.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=ce.asn1,r=new n.DERInteger({bigint:e}),i=new n.DERInteger({bigint:t});return new n.DERSequence({array:[r,i]}).getEncodedHex()},ce.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new x(e,16)}this.getByName=function(n){var r=n;if(void 0!==t[r]&&(r=t[n]),void 0!==e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,a,o,s,u,c,l,h,f,d,p){e[r]={};var v=n(a),m=n(o),g=n(s),y=n(u),b=n(c),_=new se(v,m,g),w=_.decodePointHex("04"+l+h);e[r].name=r,e[r].keylen=i,e[r].curve=_,e[r].G=w,e[r].n=y,e[r].h=b,e[r].oid=d,e[r].info=p;for(var x=0;x<f.length;x++)t[f[x]]=r}},ce.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ce.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ce.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ce.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ce.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ce.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ce.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ce.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ce.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ce.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.DSA=function(){var e=fe.getVbyListEx,t=fe.isASN1HEX,n=x;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,n,r,i){this.isPrivate=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=i},this.setPrivateHex=function(e,t,n,r,i){var a,o,s,u,c;a=new x(e,16),o=new x(t,16),s=new x(n,16),u="string"==typeof r&&r.length>1?new x(r,16):null,c=new x(i,16),this.setPrivate(a,o,s,u,c)},this.setPublic=function(e,t,n,r){this.isPublic=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(e,t,n,r){var i,a,o,s;i=new x(e,16),a=new x(t,16),o=new x(n,16),s=new x(r,16),this.setPublic(i,a,o,s)},this.signWithMessageHash=function(e){var t=this.p,n=this.q,r=this.g,i=this.x,a=ce.crypto.Util.getRandomBigIntegerMinToMax(x.ONE.add(x.ONE),n.subtract(x.ONE)),o=new x(e.substr(0,n.bitLength()/4),16),s=r.modPow(a,t).mod(n),u=a.modInverse(n).multiply(o.add(i.multiply(s))).mod(n);return ce.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:s}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(e,t){var n=this.p,r=this.q,i=this.g,a=this.y,o=this.parseASN1Signature(t),s=o[0],u=o[1],c=new x(e.substr(0,r.bitLength()/4),16);if(x.ZERO.compareTo(s)>0||s.compareTo(r)>0)throw"invalid DSA signature";if(x.ZERO.compareTo(u)>=0||u.compareTo(r)>0)throw"invalid DSA signature";var l=u.modInverse(r),h=c.multiply(l).mod(r),f=s.multiply(l).mod(r);return 0==i.modPow(h,n).multiply(a.modPow(f,n)).mod(n).mod(r).compareTo(s)},this.parseASN1Signature=function(t){try{return[new n(e(t,0,[0],"02"),16),new n(e(t,0,[1],"02"),16)]}catch(r){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(n){var r,i,a,o,s;if(!1===t(n))throw new Error("not ASN.1 hex string");try{r=e(n,0,[1],"02"),i=e(n,0,[2],"02"),a=e(n,0,[3],"02"),o=e(n,0,[4],"02"),s=e(n,0,[5],"02")}catch(u){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(r,i,a,o,s)},this.readPKCS8PrvKeyHex=function(n){var r,i,a,o;if(!1===t(n))throw new Error("not ASN.1 hex string");try{r=e(n,0,[1,1,0],"02"),i=e(n,0,[1,1,1],"02"),a=e(n,0,[1,1,2],"02"),o=e(n,0,[2,0],"02")}catch(s){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(r,i,a,null,o)},this.readPKCS8PubKeyHex=function(n){var r,i,a,o;if(!1===t(n))throw new Error("not ASN.1 hex string");try{r=e(n,0,[0,1,0],"02"),i=e(n,0,[0,1,1],"02"),a=e(n,0,[0,1,2],"02"),o=e(n,0,[1,0],"02")}catch(s){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(r,i,a,o)},this.readCertPubKeyHex=function(n,r){var i,a,o,s;if(!1===t(n))throw new Error("not ASN.1 hex string");try{i=e(n,0,[0,5,0,1,0],"02"),a=e(n,0,[0,5,0,1,1],"02"),o=e(n,0,[0,5,0,1,2],"02"),s=e(n,0,[0,5,1,0],"02")}catch(u){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(i,a,o,s)}};var He=function(){var e=function(e,n,r){return t(m.AES,e,n,r)},t=function(e,t,n,r){var i=m.enc.Hex.parse(t),a=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),s={};s.key=a,s.iv=o,s.ciphertext=i;var u=e.decrypt(s,a,{iv:o});return m.enc.Hex.stringify(u)},n=function(e,t,n){return r(m.AES,e,t,n)},r=function(e,t,n,r){var i=m.enc.Hex.parse(t),a=m.enc.Hex.parse(n),o=m.enc.Hex.parse(r),s=e.encrypt(i,a,{iv:o}),u=m.enc.Hex.parse(s.toString());return m.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,r){return t(m.TripleDES,e,n,r)},eproc:function(e,t,n){return r(m.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,r){return t(m.DES,e,n,r)},eproc:function(e,t,n){return r(m.DES,e,t,n)},keylen:8,ivlen:8}},a=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var r=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(t.type=r[1]);var i=-1,a=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),a=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),a=1);var o=e.indexOf("-----END");if(-1!=i&&-1!=o){var s=e.substring(i+2*a,o-a);s=s.replace(/\s+/g,""),t.data=s}return t},o=function(e,t,n){for(var r=n.substring(0,16),a=m.enc.Hex.parse(r),o=m.enc.Utf8.parse(t),s=i[e].keylen+i[e].ivlen,u="",c=null;;){var l=m.algo.MD5.create();if(null!=c&&l.update(c),l.update(o),l.update(a),c=l.finalize(),(u+=m.enc.Hex.stringify(c)).length>=2*s)break}var h={};return h.keyhex=u.substr(0,2*i[e].keylen),h.ivhex=u.substr(2*i[e].keylen,2*i[e].ivlen),h},s=function(e,t,n,r){var a=m.enc.Base64.parse(e),o=m.enc.Hex.stringify(a);return(0,i[t].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(e){return a(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return o(e,t,n)},decryptKeyB64:function(e,t,n,r){return s(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=a(e),r=n.cipher,i=n.ivsalt,u=n.data,c=o(r,t,i);return s(u,r,c.keyhex,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,a){var s="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==a&&null!=a||(a=function(e){var t=m.lib.WordArray.random(e);return m.enc.Hex.stringify(t)}(i[r].ivlen).toUpperCase());var u=function(e,t,n,r){return(0,i[t].eproc)(e,n,r)}(t,r,o(r,n,a).keyhex,a);return s="-----BEGIN "+e+" PRIVATE KEY-----\r\n",s+="Proc-Type: 4,ENCRYPTED\r\n",s+="DEK-Info: "+r+","+a+"\r\n",s+="\r\n",(s+=u.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=fe.getChildIdx,n=fe.getV,r={},i=t(e,0);if(2!=i.length)throw"malformed format: SEQUENCE(0).items != 2: "+i.length;r.ciphertext=n(e,i[1]);var a=t(e,i[0]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+a.length;if("2a864886f70d01050d"!=n(e,a[0]))throw"this only supports pkcs5PBES2";var o=t(e,a[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var s=t(e,o[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+s.length;if("2a864886f70d0307"!=n(e,s[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(e,s[1]);var u=t(e,o[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=n(e,u[0]))throw"this only supports pkcs5PBKDF2";var c=t(e,u[1]);if(c.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length;r.pbkdf2Salt=n(e,c[0]);var l=n(e,c[1]);try{r.pbkdf2Iter=parseInt(l,16)}catch(h){throw"malformed format pbkdf2Iter: "+l}return r},getPBKDF2KeyHexFromParam:function(e,t){var n=m.enc.Hex.parse(e.pbkdf2Salt),r=m.PBKDF2(t,n,{keySize:6,iterations:e.pbkdf2Iter});return m.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=Ae(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=He.getPBKDF2KeyHexFromParam(r,t),a={};a.ciphertext=m.enc.Hex.parse(r.ciphertext);var o=m.enc.Hex.parse(i),s=m.enc.Hex.parse(r.encryptionSchemeIV),u=m.TripleDES.decrypt(a,o,{iv:s});return m.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=fe,n=t.getChildIdx,r=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var a=n(e,0);if(3!=a.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(a[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(e,a[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=r(e,o[0]),"06"==e.substr(o[1],2)&&(i.algparam=r(e,o[1])),"04"!=e.substr(a[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=t.getVidx(e,a[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Ae(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new re;else if("2a8648ce380401"==n.algoid)t=new ce.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";t=new ce.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=fe.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new re;else if("2a8648ce380401"===n)t=new ce.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";t=new ce.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=fe.getChildIdx,n=fe.getV,r={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var i=t(e,0);if(2!=i.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(i[0],2))throw"malformed RSA key(code:003)";if(r.n=n(e,i[0]),"02"!=e.substr(i[1],2))throw"malformed RSA key(code:004)";return r.e=n(e,i[1]),r},parsePublicPKCS8Hex:function(e){var t=fe,n=t.getChildIdx,r=t.getV,i={algparam:null},a=n(e,0);if(2!=a.length)throw"outer DERSequence shall have 2 elements: "+a.length;var o=a[0];if("30"!=e.substr(o,2))throw"malformed PKCS8 public key(code:001)";var s=n(e,o);if(2!=s.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(s[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=r(e,s[0]),"06"==e.substr(s[1],2)?i.algparam=r(e,s[1]):"30"==e.substr(s[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,s[1],[0],"02"),i.algparam.q=t.getVbyList(e,s[1],[1],"02"),i.algparam.g=t.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(a[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=r(e,a[1]).substr(2),i}}}();He.getKey=function(e,t,n){var r,i=(b=fe).getChildIdx,a=b.getVbyList,o=ce.crypto,s=o.ECDSA,u=o.DSA,c=re,l=Ae,h=He;if(void 0!==c&&e instanceof c)return e;if(void 0!==s&&e instanceof s)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new s({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new s({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(j=new c).setPublic(e.n,e.e),j;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(j=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),j;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(j=new c).setPrivate(e.n,e.e,e.d),j;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(j=new u).setPublic(e.p,e.q,e.g,e.y),j;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(j=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),j;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(j=new c).setPublic(_e(e.n),_e(e.e)),j;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(j=new c).setPrivateEx(_e(e.n),_e(e.e),_e(e.d),_e(e.p),_e(e.q),_e(e.dp),_e(e.dq),_e(e.qi)),j;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(j=new c).setPrivate(_e(e.n),_e(e.e),_e(e.d)),j;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var f=(M=new s({curve:e.crv})).ecparams.keylen/4,d=("0000000000"+_e(e.x)).slice(-f),p=("0000000000"+_e(e.y)).slice(-f);return M.setPublicKeyHex(v="04"+d+p),M}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){f=(M=new s({curve:e.crv})).ecparams.keylen/4;var v="04"+(d=("0000000000"+_e(e.x)).slice(-f))+(p=("0000000000"+_e(e.y)).slice(-f)),m=("0000000000"+_e(e.d)).slice(-f);return M.setPublicKeyHex(v),M.setPrivateKeyHex(m),M}if("pkcs5prv"===n){var g,y=e,b=fe;if(9===(g=i(y,0)).length)(j=new c).readPKCS5PrvKeyHex(y);else if(6===g.length)(j=new u).readPKCS5PrvKeyHex(y);else{if(!(g.length>2&&"04"===y.substr(g[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(j=new s).readPKCS5PrvKeyHex(y)}return j}if("pkcs8prv"===n)return h.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return h._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return Ge.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return Ge.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var _=Ae(e,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(_)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var w=l(e,"RSA PRIVATE KEY");return h.getKey(w,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var k=a(r=l(e,"DSA PRIVATE KEY"),0,[1],"02"),S=a(r,0,[2],"02"),E=a(r,0,[3],"02"),O=a(r,0,[4],"02"),T=a(r,0,[5],"02");return(j=new u).setPrivate(new x(k,16),new x(S,16),new x(E,16),new x(O,16),new x(T,16)),j}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return w=l(e,"EC PRIVATE KEY"),h.getKey(w,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var C=h.getDecryptedKeyHex(e,t),A=new re;return A.readPKCS5PrvKeyHex(C),A}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var M,j=a(r=h.getDecryptedKeyHex(e,t),0,[1],"04"),P=a(r,0,[2,0],"06"),R=a(r,0,[3,0],"03").substr(2);if(void 0===ce.crypto.OID.oidhex2name[P])throw"undefined OID(hex) in KJUR.crypto.OID: "+P;return(M=new s({curve:ce.crypto.OID.oidhex2name[P]})).setPublicKeyHex(R),M.setPrivateKeyHex(j),M.isPublic=!1,M}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return k=a(r=h.getDecryptedKeyHex(e,t),0,[1],"02"),S=a(r,0,[2],"02"),E=a(r,0,[3],"02"),O=a(r,0,[4],"02"),T=a(r,0,[5],"02"),(j=new u).setPrivate(new x(k,16),new x(S,16),new x(E,16),new x(O,16),new x(T,16)),j;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},He.generateKeypair=function(e,t){if("RSA"==e){var n=t;(o=new re).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new re,i=o.n.toString(16),a=o.e.toString(16);return r.setPublic(i,a),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}if("EC"==e){var o,s,u=t,c=new ce.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new ce.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new ce.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}throw"unknown algorithm: "+e},He.getPEM=function(e,t,n,r,i,a){var o=ce.asn1,s=o.DERObjectIdentifier,u=o.DERInteger,c=o.ASN1Util.newObject,l=ce.crypto,h=l.DSA,f=l.ECDSA,d=re;function p(e){return c({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function v(e){return c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function g(e){return c({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==d&&e instanceof d||void 0!==h&&e instanceof h||void 0!==f&&e instanceof f)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Ce(w=new(0,o.x509.SubjectPublicKeyInfo)(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===n||null==n)&&1==e.isPrivate)return Ce(w=p(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===n||null==n)&&1==e.isPrivate){var y=new s({name:e.curveName}).getEncodedHex(),b=v(e).getEncodedHex(),_="";return(_+=Ce(y,"EC PARAMETERS"))+Ce(b,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===n||null==n)&&1==e.isPrivate)return Ce(w=g(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==n&&null!=n&&1==e.isPrivate){var w=p(e).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",w,n,r,a)}if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==n&&null!=n&&1==e.isPrivate)return w=v(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",w,n,r,a);if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==n&&null!=n&&1==e.isPrivate)return w=g(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",w,n,r,a);var x=function(e,t){var n=k(e,t);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},k=function(e,t){var n=m.lib.WordArray.random(8),r=m.lib.WordArray.random(8),i=m.PBKDF2(t,n,{keySize:6,iterations:100}),a=m.enc.Hex.parse(e),o=m.TripleDES.encrypt(a,i,{iv:r})+"",s={};return s.ciphertext=o,s.pbkdf2Salt=m.enc.Hex.stringify(n),s.pbkdf2Iter=100,s.encryptionSchemeAlg="DES-EDE3-CBC",s.encryptionSchemeIV=m.enc.Hex.stringify(r),s};if("PKCS8PRV"==t&&null!=d&&e instanceof d&&1==e.isPrivate){var S=p(e).getEncodedHex();return w=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===n||null==n?Ce(w,"PRIVATE KEY"):Ce(b=x(w,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return S=new c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===n||null==n?Ce(w,"PRIVATE KEY"):Ce(b=x(w,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return S=new u({bigint:e.x}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:S}}]}).getEncodedHex(),void 0===n||null==n?Ce(w,"PRIVATE KEY"):Ce(b=x(w,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},He.getKeyFromCSRPEM=function(e){var t=Ae(e,"CERTIFICATE REQUEST");return He.getKeyFromCSRHex(t)},He.getKeyFromCSRHex=function(e){var t=He.parseCSRHex(e);return He.getKey(t.p8pubkeyhex,null,"pkcs8pub")},He.parseCSRHex=function(e){var t=fe.getChildIdx,n=fe.getTLV,r={},i=e;if("30"!=i.substr(0,2))throw"malformed CSR(code:001)";var a=t(i,0);if(a.length<1)throw"malformed CSR(code:002)";if("30"!=i.substr(a[0],2))throw"malformed CSR(code:003)";var o=t(i,a[0]);if(o.length<3)throw"malformed CSR(code:004)";return r.p8pubkeyhex=n(i,o[2]),r},He.getKeyID=function(e){var t=He,n=fe;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var r=Ae(t.getPEM(e)),i=n.getIdxbyList(r,0,[1]),a=n.getV(r,i).substring(2);return ce.crypto.Util.hashHex(a,"sha1")},He.getJWKFromKey=function(e){var t={};if(e instanceof re&&e.isPrivate)return t.kty="RSA",t.n=be(e.n.toString(16)),t.e=be(e.e.toString(16)),t.d=be(e.d.toString(16)),t.p=be(e.p.toString(16)),t.q=be(e.q.toString(16)),t.dp=be(e.dmp1.toString(16)),t.dq=be(e.dmq1.toString(16)),t.qi=be(e.coeff.toString(16)),t;if(e instanceof re&&e.isPublic)return t.kty="RSA",t.n=be(e.n.toString(16)),t.e=be(e.e.toString(16)),t;if(e instanceof ce.crypto.ECDSA&&e.isPrivate){if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=e.getPublicKeyXYHex();return t.kty="EC",t.crv=r,t.x=be(n.x),t.y=be(n.y),t.d=be(e.prvKeyHex),t}if(e instanceof ce.crypto.ECDSA&&e.isPublic){var r;if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=e.getPublicKeyXYHex(),t.kty="EC",t.crv=r,t.x=be(n.x),t.y=be(n.y),t}throw"not supported key object"},re.getPosArrayOfChildrenFromHex=function(e){return fe.getChildIdx(e,0)},re.getHexValueArrayOfChildrenFromHex=function(e){var t,n=fe.getV,r=n(e,(t=re.getPosArrayOfChildrenFromHex(e))[0]),i=n(e,t[1]),a=n(e,t[2]),o=n(e,t[3]),s=n(e,t[4]),u=n(e,t[5]),c=n(e,t[6]),l=n(e,t[7]),h=n(e,t[8]);return(t=new Array).push(r,i,a,o,s,u,c,l,h),t},re.prototype.readPrivateKeyFromPEMString=function(e){var t=Ae(e),n=re.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},re.prototype.readPKCS5PrvKeyHex=function(e){var t=re.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},re.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,i,a,o,s,u,c=fe.getVbyListEx;if(!1===fe.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=c(e,0,[2,0,1],"02"),n=c(e,0,[2,0,2],"02"),r=c(e,0,[2,0,3],"02"),i=c(e,0,[2,0,4],"02"),a=c(e,0,[2,0,5],"02"),o=c(e,0,[2,0,6],"02"),s=c(e,0,[2,0,7],"02"),u=c(e,0,[2,0,8],"02")}catch(l){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,n,r,i,a,o,s,u)},re.prototype.readPKCS5PubKeyHex=function(e){var t=fe,n=t.getV;if(!1===t.isASN1HEX(e))throw"keyHex is not ASN.1 hex string";var r=t.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var i=n(e,r[0]),a=n(e,r[1]);this.setPublic(i,a)},re.prototype.readPKCS8PubKeyHex=function(e){var t=fe;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var n=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},re.prototype.readCertPubKeyHex=function(e,t){var n,r;(n=new Ge).readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var Ue=new RegExp("[^0-9a-f]","gi");function Ve(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e}function ze(e,t,n){for(var r="",i=0;r.length<t;)r+=ke(n(Se(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function We(e){for(var t in ce.crypto.Util.DIGESTINFOHEAD){var n=ce.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n)return[t,e.substring(r)]}return[]}function Ge(){var e,t=fe,n=t.getChildIdx,r=t.getV,i=t.getTLV,a=t.getVbyList,o=t.getVbyListEx,s=t.getTLVbyList,c=t.getTLVbyListEx,l=t.getIdxbyList,h=t.getVidx,f=t.oidname,d=Ge,p=Ae;try{e=ce.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(u){}this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return a(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){var t=c(this.hex,0,[0,1]);for(var n in e)if(t===e[n])return n;return f(o(this.hex,0,[0,1,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return d.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return d.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=a(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=a(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return l(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return He.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return f(a(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),n=this.getSignatureValueHex(),r=s(this.hex,0,[0],"30"),i=new ce.crypto.Signature({alg:t});return i.init(e),i.updateHex(r),i.verify(n)},this.parseExt=function(e){var i,o,s;if(void 0===e){if(3!==this.version)return-1;i=l(s=this.hex,0,[0,7,0],"30"),o=n(s,i)}else{s=Ae(e);var u=l(s,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=r(s,u))return void(this.aExtInfo=new Array);i=l(s,0,[0,3,0,1,0],"30"),o=n(s,i),this.hex=s}this.aExtInfo=new Array;for(var c=0;c<o.length;c++){var f={critical:!1},d=0;3===n(s,o[c]).length&&(f.critical=!0,d=1),f.oid=t.hextooidstr(a(s,o[c],[0],"06"));var p=l(s,o[c],[1+d]);f.vidx=h(s,p),this.aExtInfo.push(f)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=ce.asn1.x509.OID.name2oid(e)),""!==n)for(var r=0;r<t.length;r++)if(t[r].oid===n)return t[r]},this.getExtBasicConstraints=function(){var e=this.getExtInfo("basicConstraints");if(void 0===e)return e;var t=r(this.hex,e.vidx);if(""===t)return{};if("0101ff"===t)return{cA:!0};if("0101ff02"===t.substr(0,8)){var n=r(t,6);return{cA:!0,pathLen:parseInt(n,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";var t=r(this.hex,e.vidx);if(t.length%2!=0||t.length<=2)throw new Error("malformed key usage value");var n=parseInt(t.substr(0,2)),i=parseInt(t.substr(2),16).toString(2);return(i=("0000000"+i).slice(-8)).substr(0,i.length-n)},this.getExtKeyUsageString=function(){for(var e=this.getExtKeyUsageBin(),t=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&t.push(Ge.KEYUSAGE_NAME[n]);return t.join(",")},this.getExtSubjectKeyIdentifier=function(){var e=this.getExtInfo("subjectKeyIdentifier");return void 0===e?e:r(this.hex,e.vidx)},this.getExtAuthorityKeyIdentifier=function(){var e=this.getExtInfo("authorityKeyIdentifier");if(void 0===e)return e;for(var t={},a=i(this.hex,e.vidx),o=n(a,0),s=0;s<o.length;s++)"80"===a.substr(o[s],2)&&(t.kid=r(a,o[s]));return t},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,a=i(this.hex,e.vidx);if(""===a)return t;for(var o=n(a,0),s=0;s<o.length;s++)t.push(f(r(a,o[s])));return t},this.getExtSubjectAltName=function(){for(var e=this.getExtSubjectAltName2(),t=new Array,n=0;n<e.length;n++)"DNS"===e[n][0]&&t.push(e[n][1]);return t},this.getExtSubjectAltName2=function(){var e,t,a,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var s=new Array,u=i(this.hex,o.vidx),c=n(u,0),l=0;l<c.length;l++)a=u.substr(c[l],2),e=r(u,c[l]),"81"===a&&(t=xe(e),s.push(["MAIL",t])),"82"===a&&(t=xe(e),s.push(["DNS",t])),"84"===a&&(t=Ge.hex2dn(e,0),s.push(["DN",t])),"86"===a&&(t=xe(e),s.push(["URI",t])),"87"===a&&(t=Fe(e),s.push(["IP",t]));return s},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,r=n(this.hex,e.vidx),i=0;i<r.length;i++)try{var o=xe(a(this.hex,r[i],[0,0,0],"86"));t.push(o)}catch(s){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},r=n(this.hex,e.vidx),i=0;i<r.length;i++){var o=a(this.hex,r[i],[0],"06"),s=a(this.hex,r[i],[1],"86");"2b06010505073001"===o&&t.ocsp.push(xe(s)),"2b06010505073002"===o&&t.caissuer.push(xe(s))}return t},this.getExtCertificatePolicies=function(){var e=this.getExtInfo("certificatePolicies");if(void 0===e)return e;for(var t=i(this.hex,e.vidx),o=[],s=n(t,0),u=0;u<s.length;u++){var c={},l=n(t,s[u]);if(c.id=f(r(t,l[0])),2===l.length)for(var h=n(t,l[1]),d=0;d<h.length;d++){var p=a(t,h[d],[0],"06");"2b06010505070201"===p?c.cps=xe(a(t,h[d],[1])):"2b06010505070202"===p&&(c.unotice=xe(a(t,h[d],[1,0])))}o.push(c)}return o},this.readCertPEM=function(e){this.readCertHex(p(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{l(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getInfo=function(){var e,t,n;if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Ne(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Ne(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var r=0;r<n.length;r++){var i=n[r],a=ce.asn1.x509.OID.oid2name(i.oid);""===a&&(a=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),e+="  "+a+" "+o+":\n","basicConstraints"===a){var s=this.getExtBasicConstraints();void 0===s.cA?e+="    {}\n":(e+="    cA=true",void 0!==s.pathLen&&(e+=", pathLen="+s.pathLen),e+="\n")}else if("keyUsage"===a)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===a)e+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===a){var u=this.getExtAuthorityKeyIdentifier();void 0!==u.kid&&(e+="    kid="+u.kid+"\n")}else if("extKeyUsage"===a)e+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===a)e+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===a)e+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===a){var c=this.getExtAIAInfo();void 0!==c.ocsp&&(e+="    ocsp: "+c.ocsp.join(",")+"\n"),void 0!==c.caissuer&&(e+="    caissuer: "+c.caissuer.join(",")+"\n")}else if("certificatePolicies"===a)for(var l=this.getExtCertificatePolicies(),h=0;h<l.length;h++)void 0!==l[h].id&&(e+="    policy oid: "+l[h].id+"\n"),void 0!==l[h].cps&&(e+="    cps: "+l[h].cps+"\n")}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}re.prototype.sign=function(e,t){var n=function(e){return ce.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(n,t)},re.prototype.signWithMessageHash=function(e,t){var n=te(ce.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ve(this.doPrivate(n).toString(16),this.n.bitLength())},re.prototype.signPSS=function(e,t,n){var r,i=(r=Se(e),ce.crypto.Util.hashHex(r,t));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,t,n)},re.prototype.signWithMessageHashPSS=function(e,t,n){var r,i=ke(e),a=i.length,o=this.n.bitLength()-1,s=Math.ceil(o/8),u=function(e){return ce.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=a;else if(-2===n)n=s-a-2;else if(n<-2)throw"invalid salt length";if(s<a+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new ee).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=ke(u(Se("\0\0\0\0\0\0\0\0"+i+c))),h=[];for(r=0;r<s-n-a-2;r+=1)h[r]=0;var f=String.fromCharCode.apply(String,h)+"\x01"+c,d=ze(l,f.length,u),p=[];for(r=0;r<f.length;r+=1)p[r]=f.charCodeAt(r)^d.charCodeAt(r);for(p[0]&=~(65280>>8*s-o&255),r=0;r<a;r++)p.push(l.charCodeAt(r));return p.push(188),Ve(this.doPrivate(new x(p)).toString(16),this.n.bitLength())},re.prototype.verify=function(e,t){var n=te(t=(t=t.replace(Ue,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=We(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var i=r[0];return r[1]==function(e){return ce.crypto.Util.hashString(e,i)}(e)},re.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=te(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=We(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==e},re.prototype.verifyPSS=function(e,t,n,r){var i,a=(i=Se(e),ce.crypto.Util.hashHex(i,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(a,t,n,r)},re.prototype.verifyWithMessageHashPSS=function(e,t,n,r){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,a=new x(t,16),o=function(e){return ce.crypto.Util.hashHex(e,n)},s=ke(e),u=s.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=l-u-2;else if(r<-2)throw"invalid salt length";if(l<u+r+2)throw"data too long";var h=this.doPublic(a).toByteArray();for(i=0;i<h.length;i+=1)h[i]&=255;for(;h.length<l;)h.unshift(0);if(188!==h[l-1])throw"encoded message does not end in 0xbc";var f=(h=String.fromCharCode.apply(String,h)).substr(0,l-u-1),d=h.substr(f.length,u),p=65280>>8*l-c&255;if(0!=(f.charCodeAt(0)&p))throw"bits beyond keysize not zero";var v=ze(d,f.length,o),m=[];for(i=0;i<f.length;i+=1)m[i]=f.charCodeAt(i)^v.charCodeAt(i);m[0]&=~p;var g=l-u-r-2;for(i=0;i<g;i+=1)if(0!==m[i])throw"leftmost octets not zero";if(1!==m[g])throw"0x01 marker not found";return d===ke(o(Se("\0\0\0\0\0\0\0\0"+s+String.fromCharCode.apply(String,m.slice(-r)))))},re.SALT_LEN_HLEN=-1,re.SALT_LEN_MAX=-2,re.SALT_LEN_RECOVER=-2,Ge.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed DN";for(var n=new Array,r=fe.getChildIdx(e,t),i=0;i<r.length;i++)n.push(Ge.hex2rdn(e,r[i]));return"/"+(n=n.map((function(e){return e.replace("/","\\/")}))).join("/")},Ge.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw"malformed RDN";for(var n=new Array,r=fe.getChildIdx(e,t),i=0;i<r.length;i++)n.push(Ge.hex2attrTypeValue(e,r[i]));return(n=n.map((function(e){return e.replace("+","\\+")}))).join("+")},Ge.hex2attrTypeValue=function(e,t){var n=fe,r=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed attribute type and value";var i=n.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var a=r(e,i[0]),o=ce.asn1.ASN1Util.oidHexToInt(a);return ce.asn1.x509.OID.oid2atype(o)+"="+ke(r(e,i[1]))},Ge.getPublicKeyFromCertHex=function(e){var t=new Ge;return t.readCertHex(e),t.getPublicKey()},Ge.getPublicKeyFromCertPEM=function(e){var t=new Ge;return t.readCertPEM(e),t.getPublicKey()},Ge.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,r=fe.getVbyList,i={algparam:null};return(t=new Ge).readCertPEM(e),n=t.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},Ge.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ce&&ce||(ce={}),void 0!==ce.jws&&ce.jws||(ce.jws={}),ce.jws.JWS=function(){var e=ce.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],a=r[2],o=r[3],s=i+"."+a;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=a,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=s,!n){var u=_e(o),c=te(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=he(i),h=he(a);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=h,!e(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},ce.jws.JWS.sign=function(e,t,n,r,i){var a,o,s,u=ce.jws.JWS,c=u.readSafeJSONString,l=u.isSafeJSONString,h=ce.crypto,f=h.Mac,d=h.Signature,p=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(a=p.stringify(o=t)),"string"==typeof t){if(!l(a=t))throw"JWS Head is not safe JSON string: "+a;o=c(a)}if(s=n,"object"==typeof n&&(s=p.stringify(n)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,a=p.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var v=null;if(void 0===u.jwsalg2sigalg[e])throw"unsupported alg name: "+e;v=u.jwsalg2sigalg[e];var m=le(a)+"."+le(s),g="";if("Hmac"==v.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var y=new f({alg:v,prov:"cryptojs",pass:r});y.updateString(m),g=y.doFinal()}else if(-1!=v.indexOf("withECDSA")){(_=new d({alg:v})).init(r,i),_.updateString(m);var b=_.sign();g=ce.crypto.ECDSA.asn1SigToConcatSig(b)}else{var _;"none"!=v&&((_=new d({alg:v})).init(r,i),_.updateString(m),g=_.sign())}return m+"."+be(g)},ce.jws.JWS.verify=function(e,t,n){var r,i=ce.jws.JWS,a=i.readSafeJSONString,o=ce.crypto,s=o.ECDSA,u=o.Mac,c=o.Signature;r=re;var l=e.split(".");if(3!==l.length)return!1;var h,f=l[0]+"."+l[1],d=_e(l[2]),p=a(he(l[0])),v=null;if(void 0===p.alg)throw"algorithm not specified in header";if(h=(v=p.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+v+":"))throw"algorithm '"+v+"' not accepted in the list";if("none"!=v&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=He.getKey(t)),!("RS"!=h&&"PS"!=h||t instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(t instanceof s))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===i.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+v;if("none"==(m=i.jwsalg2sigalg[v]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var g=new u({alg:m,pass:t});return g.updateString(f),d==g.doFinal()}if(-1!=m.indexOf("withECDSA")){var y,b=null;try{b=s.concatSigToASN1Sig(d)}catch(_){return!1}return(y=new c({alg:m})).init(t),y.updateString(f),y.verify(b)}return(y=new c({alg:m})).init(t),y.updateString(f),y.verify(d)},ce.jws.JWS.parse=function(e){var t,n,r=e.split("."),i={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=r[1],3==r.length&&(n=r[2]),i.headerObj=ce.jws.JWS.readSafeJSONString(he(r[0])),i.payloadObj=ce.jws.JWS.readSafeJSONString(he(t)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadPP=null==i.payloadObj?he(t):JSON.stringify(i.payloadObj,null,"  "),void 0!==n&&(i.sigHex=_e(n)),i},ce.jws.JWS.verifyJWT=function(e,t,n){var r=ce.jws,i=r.JWS,a=i.readSafeJSONString,o=i.inArray,s=i.includedArray,u=e.split("."),c=u[0],l=u[1],h=(_e(u[2]),a(he(c))),f=a(he(l));if(void 0===h.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(h.alg,n.alg))return!1;if(void 0!==f.iss&&"object"==typeof n.iss&&!o(f.iss,n.iss))return!1;if(void 0!==f.sub&&"object"==typeof n.sub&&!o(f.sub,n.sub))return!1;if(void 0!==f.aud&&"object"==typeof n.aud)if("string"==typeof f.aud){if(!o(f.aud,n.aud))return!1}else if("object"==typeof f.aud&&!s(f.aud,n.aud))return!1;var d=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(d=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+n.gracePeriod<d||void 0!==f.nbf&&"number"==typeof f.nbf&&d<f.nbf-n.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&d<f.iat-n.gracePeriod||void 0!==f.jti&&void 0!==n.jti&&f.jti!==n.jti||!i.verify(e,t,n.alg))},ce.jws.JWS.includedArray=function(e,t){var n=ce.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t))return!1;return!0},ce.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},ce.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ce.jws.JWS.isSafeJSONString=function(e,t,n){var r=null;try{return"object"!=typeof(r=ue(e))||r.constructor===Array?0:(t&&(t[n]=r),1)}catch(o){return 0}},ce.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=ue(e))||t.constructor===Array?null:t}catch(o){return null}},ce.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},ce.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=Se(t);return be(ce.crypto.Util.hashHex(n,"sha256"))},ce.jws.IntDate={},ce.jws.IntDate.get=function(e){var t=ce.jws.IntDate,n=t.getNow,r=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},ce.jws.IntDate.getZulu=function(e){return je(e)},ce.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ce.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},ce.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==ce&&ce||(ce={}),void 0!==ce.jws&&ce.jws||(ce.jws={}),ce.jws.JWSJS=function(){var e=ce.jws.JWS,t=e.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,n,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var a=ce.jws.JWS.sign(e,t,this.sPayload,n,r).split(".");this.aHeader.push(a[0]),this.aSignature.push(a[2])}catch(p){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+p}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(2!==n.length)return!1;if(!1===this.verifyNth(t,n[0],n[1]))return!1}return!0},this.verifyNth=function(t,n,r){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var i=this.aHeader[t]+"."+this.sPayload+"."+this.aSignature[t],a=!1;try{a=e.verify(i,n,r)}catch(p){return!1}return a},this.readJWSJS=function(e){if("string"==typeof e){var n=t(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.aSignature=e.signatures}catch(a){throw"malformed JWS-JS JSON object: "+a}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},t.SecureRandom=ee,t.rng_seed_time=X,t.BigInteger=x,t.RSAKey=re,t.ECDSA=ce.crypto.ECDSA,t.DSA=ce.crypto.DSA,t.Signature=ce.crypto.Signature,t.MessageDigest=ce.crypto.MessageDigest,t.Mac=ce.crypto.Mac,t.Cipher=ce.crypto.Cipher,t.KEYUTIL=He,t.ASN1HEX=fe,t.X509=Ge,t.CryptoJS=m,t.b64tohex=_,t.b64toBA=w,t.ECFieldElementFp=ae,t.ECPointFp=oe,t.ECCurveFp=se,t.stoBA=de,t.BAtos=pe,t.BAtohex=ve,t.stohex=me,t.stob64=function(e){return b(me(e))},t.stob64u=function(e){return ge(b(me(e)))},t.b64utos=function(e){return pe(w(ye(e)))},t.b64tob64u=ge,t.b64utob64=ye,t.hex2b64=b,t.hextob64u=be,t.b64utohex=_e,t.utf8tob64u=le,t.b64utoutf8=he,t.utf8tob64=function(e){return b(Pe(Le(e)))},t.b64toutf8=function(e){return decodeURIComponent(Re(_(e)))},t.utf8tohex=we,t.hextoutf8=xe,t.hextorstr=ke,t.rstrtohex=Se,t.hextob64=Ee,t.hextob64nl=Oe,t.b64nltohex=Te,t.hextopem=Ce,t.pemtohex=Ae,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t},t.zulutomsec=Me,t.zulutosec=je,t.zulutodate=function(e){return new Date(Me(e))},t.datetozulu=function(e,t,n){var r,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var a=e.getUTCMilliseconds();0!==a&&(r+="."+(a=(a=("00"+a).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},t.uricmptohex=Pe,t.hextouricmp=Re,t.ipv6tohex=Ie,t.hextoipv6=De,t.hextoip=Fe,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Ie(e);throw t}var n=e.split(".");if(4!==n.length)throw t;var r="";try{for(var i=0;i<4;i++)r+=("0"+parseInt(n[i]).toString(16)).slice(-2);return r}catch(d){throw t}},t.encodeURIComponentAll=Le,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=Ne,t.intarystrtohex=Be,t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1},t.KJUR=ce,t.crypto=ce.crypto,t.asn1=ce.asn1,t.jws=ce.jws,t.lang=ce.lang},itXk:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("z+Ro"),u=n("DH7j"),c=n("l7GE"),l=n("ZUHj"),h=n("yCtX"),f={};function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=void 0,i=void 0;return Object(s.a)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&Object(u.a)(t[0])&&(t=t[0]),Object(h.a)(t,i).lift(new p(r))}var p=function(){function e(t){Object(a.a)(this,e),this.resultSelector=t}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new v(e,this.resultSelector))}}]),e}(),v=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return Object(o.a)(n,[{key:"_next",value:function(e){this.values.push(f),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(l.a)(this,r,void 0,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===f?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(c.a)},jZKg:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("HDdC"),i=n("quSY");function a(e,t){return new r.a((function(n){var r=new i.a,a=0;return r.add(t.schedule((function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},kJWO:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},l7GE:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("LK+K"),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(n("7o/Q").a)},lJxs:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("JX7q"),i=n("Ji7U"),a=n("LK+K"),o=n("1OyB"),s=n("vuIU"),u=n("7o/Q");function c(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new l(e,t))}}var l=function(){function e(t,n){Object(o.a)(this,e),this.project=t,this.thisArg=n}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.project,this.thisArg))}}]),e}(),h=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e,i,a){var s;return Object(o.a)(this,n),(s=t.call(this,e)).project=i,s.count=0,s.thisArg=a||Object(r.a)(s),s}return Object(s.a)(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(u.a)},ls82:function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var i=Object.create((t&&t.prototype instanceof l?t:l).prototype),a=new x(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=s;var c={};function l(){}function h(){}function f(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(k([])));v&&v!==t&&n.call(v,i)&&(d=v);var m=f.prototype=l.prototype=Object.create(d);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,s){var c=u(e[i],e,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=m.constructor=f,f.constructor=h,f[o]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(y.prototype),y.prototype[a]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new y(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),m[o]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},md7G:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return a}));var i=n("JX7q");function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?Object(i.a)(e):t}},mlxB:function(e,t,n){"use strict";function r(e){return e instanceof Date&&!isNaN(+e)}n.d(t,"a",(function(){return r}))},mrSG:function(e,t,n){"use strict";function r(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}n.d(t,"a",(function(){return r}))},n6bG:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},ngJS:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},o0o1:function(e,t,n){e.exports=n("ls82")},ofXK:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return je})),n.d(t,"c",(function(){return Re})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return Pe})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return A})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return ve})),n.d(t,"k",(function(){return ge})),n.d(t,"l",(function(){return be})),n.d(t,"m",(function(){return Oe})),n.d(t,"n",(function(){return ke})),n.d(t,"o",(function(){return Se})),n.d(t,"p",(function(){return Ee})),n.d(t,"q",(function(){return T})),n.d(t,"r",(function(){return v})),n.d(t,"s",(function(){return Fe})),n.d(t,"t",(function(){return J})),n.d(t,"u",(function(){return De})),n.d(t,"v",(function(){return d})),n.d(t,"w",(function(){return Ie})),n.d(t,"x",(function(){return h})),n.d(t,"y",(function(){return pe})),n.d(t,"z",(function(){return f}));var r=n("uFwe"),i=n("ODXe"),a=n("vuIU"),o=n("Ji7U"),s=n("LK+K"),u=n("1OyB"),c=n("fXoL"),l=null;function h(){return l}function f(e){l||(l=e)}var d=function e(){Object(u.a)(this,e)},p=new c.q("DocumentToken"),v=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(c.Gb)({factory:m,token:e,providedIn:"platform"}),e}();function m(){return Object(c.Tb)(y)}var g=new c.q("Location Initialized"),y=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this))._doc=e,r._init(),r}return Object(a.a)(n,[{key:"_init",value:function(){this.location=h().getLocation(),this._history=h().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return h().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){h().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){h().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){b()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){b()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(v);return e.\u0275fac=function(t){return new(t||e)(c.Tb(p))},e.\u0275prov=Object(c.Gb)({factory:_,token:e,providedIn:"platform"}),e}();function b(){return!!window.history.pushState}function _(){return new y(Object(c.Tb)(p))}function w(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function x(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function k(e){return e&&"?"!==e[0]?"?"+e:e}var S=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(c.Gb)({factory:E,token:e,providedIn:"root"}),e}();function E(e){var t=Object(c.Tb)(p).location;return new T(Object(c.Tb)(v),t&&t.origin||"")}var O=new c.q("appBaseHref"),T=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var i;if(Object(u.a)(this,n),(i=t.call(this))._platformLocation=e,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,i}return Object(a.a)(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return w(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+k(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+k(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+k(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return e.\u0275fac=function(t){return new(t||e)(c.Tb(v),c.Tb(O,8))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),C=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var i;return Object(u.a)(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",null!=r&&(i._baseHref=r),i}return Object(a.a)(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=w(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+k(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+k(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return e.\u0275fac=function(t){return new(t||e)(c.Tb(v),c.Tb(O,8))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),A=function(){var e=function(){function e(t,n){var r=this;Object(u.a)(this,e),this._subject=new c.n,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=x(j(i)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return Object(a.a)(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+k(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,j(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+k(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+k(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)})))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Tb(S),c.Tb(v))},e.normalizeQueryParams=k,e.joinWithSlash=w,e.stripTrailingSlash=x,e.\u0275prov=Object(c.Gb)({factory:M,token:e,providedIn:"root"}),e}();function M(){return new A(Object(c.Tb)(S),Object(c.Tb)(v))}function j(e){return e.replace(/\/index.html$/,"")}var P=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),R=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}({}),I=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}({}),D=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}({}),F=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function L(e,t){return z(Object(c.jb)(e)[c.ab.DateFormat],t)}function N(e,t){return z(Object(c.jb)(e)[c.ab.TimeFormat],t)}function B(e,t){return z(Object(c.jb)(e)[c.ab.DateTimeFormat],t)}function H(e,t){var n=Object(c.jb)(e),r=n[c.ab.NumberSymbols][t];if(void 0===r){if(t===F.CurrencyDecimal)return n[c.ab.NumberSymbols][F.Decimal];if(t===F.CurrencyGroup)return n[c.ab.NumberSymbols][F.Group]}return r}var U=c.mb;function V(e){if(!e[c.ab.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(e[c.ab.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function z(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function W(e){var t=e.split(":"),n=Object(i.a)(t,2);return{hours:+n[0],minutes:+n[1]}}var G=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,K={},q=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,X=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}({}),Y=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}({}),Z=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}({});function J(e,t,n,r){var a=function(e){if(he(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,n=parseFloat(e);if(!isNaN(e-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=e.split("-").map((function(e){return+e})),a=Object(i.a)(r,3);return new Date(a[0],a[1]-1,a[2])}if(t=e.match(G))return function(e){var t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,a=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var o=Number(e[4]||0)-n,s=Number(e[5]||0)-r,u=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(t,o,s,u,c),t}(t)}var o=new Date(e);if(!he(o))throw new Error('Unable to convert "'.concat(e,'" into a date'));return o}(e);t=function e(t,n){var r=function(e){return Object(c.jb)(e)[c.ab.LocaleId]}(t);if(K[r]=K[r]||{},K[r][n])return K[r][n];var i="";switch(n){case"shortDate":i=L(t,D.Short);break;case"mediumDate":i=L(t,D.Medium);break;case"longDate":i=L(t,D.Long);break;case"fullDate":i=L(t,D.Full);break;case"shortTime":i=N(t,D.Short);break;case"mediumTime":i=N(t,D.Medium);break;case"longTime":i=N(t,D.Long);break;case"fullTime":i=N(t,D.Full);break;case"short":var a=e(t,"shortTime"),o=e(t,"shortDate");i=Q(B(t,D.Short),[a,o]);break;case"medium":var s=e(t,"mediumTime"),u=e(t,"mediumDate");i=Q(B(t,D.Medium),[s,u]);break;case"long":var l=e(t,"longTime"),h=e(t,"longDate");i=Q(B(t,D.Long),[l,h]);break;case"full":var f=e(t,"fullTime"),d=e(t,"fullDate");i=Q(B(t,D.Full),[f,d])}return i&&(K[r][n]=i),i}(n,t)||t;for(var o,s=[];t;){if(!(o=q.exec(t))){s.push(t);break}var u=(s=s.concat(o.slice(1))).pop();if(!u)break;t=u}var l=a.getTimezoneOffset();r&&(l=le(r,l),a=function(e,t,n){var r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(le(t,r)-r))}(a,r));var h="";return s.forEach((function(e){var t=function(e){if(ce[e])return ce[e];var t;switch(e){case"G":case"GG":case"GGG":t=re(Z.Eras,I.Abbreviated);break;case"GGGG":t=re(Z.Eras,I.Wide);break;case"GGGGG":t=re(Z.Eras,I.Narrow);break;case"y":t=te(Y.FullYear,1,0,!1,!0);break;case"yy":t=te(Y.FullYear,2,0,!0,!0);break;case"yyy":t=te(Y.FullYear,3,0,!1,!0);break;case"yyyy":t=te(Y.FullYear,4,0,!1,!0);break;case"M":case"L":t=te(Y.Month,1,1);break;case"MM":case"LL":t=te(Y.Month,2,1);break;case"MMM":t=re(Z.Months,I.Abbreviated);break;case"MMMM":t=re(Z.Months,I.Wide);break;case"MMMMM":t=re(Z.Months,I.Narrow);break;case"LLL":t=re(Z.Months,I.Abbreviated,R.Standalone);break;case"LLLL":t=re(Z.Months,I.Wide,R.Standalone);break;case"LLLLL":t=re(Z.Months,I.Narrow,R.Standalone);break;case"w":t=ue(1);break;case"ww":t=ue(2);break;case"W":t=ue(1,!0);break;case"d":t=te(Y.Date,1);break;case"dd":t=te(Y.Date,2);break;case"E":case"EE":case"EEE":t=re(Z.Days,I.Abbreviated);break;case"EEEE":t=re(Z.Days,I.Wide);break;case"EEEEE":t=re(Z.Days,I.Narrow);break;case"EEEEEE":t=re(Z.Days,I.Short);break;case"a":case"aa":case"aaa":t=re(Z.DayPeriods,I.Abbreviated);break;case"aaaa":t=re(Z.DayPeriods,I.Wide);break;case"aaaaa":t=re(Z.DayPeriods,I.Narrow);break;case"b":case"bb":case"bbb":t=re(Z.DayPeriods,I.Abbreviated,R.Standalone,!0);break;case"bbbb":t=re(Z.DayPeriods,I.Wide,R.Standalone,!0);break;case"bbbbb":t=re(Z.DayPeriods,I.Narrow,R.Standalone,!0);break;case"B":case"BB":case"BBB":t=re(Z.DayPeriods,I.Abbreviated,R.Format,!0);break;case"BBBB":t=re(Z.DayPeriods,I.Wide,R.Format,!0);break;case"BBBBB":t=re(Z.DayPeriods,I.Narrow,R.Format,!0);break;case"h":t=te(Y.Hours,1,-12);break;case"hh":t=te(Y.Hours,2,-12);break;case"H":t=te(Y.Hours,1);break;case"HH":t=te(Y.Hours,2);break;case"m":t=te(Y.Minutes,1);break;case"mm":t=te(Y.Minutes,2);break;case"s":t=te(Y.Seconds,1);break;case"ss":t=te(Y.Seconds,2);break;case"S":t=te(Y.FractionalSeconds,1);break;case"SS":t=te(Y.FractionalSeconds,2);break;case"SSS":t=te(Y.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=ae(X.Short);break;case"ZZZZZ":t=ae(X.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=ae(X.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=ae(X.Long);break;default:return null}return ce[e]=t,t}(e);h+=t?t(a,n,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),h}function Q(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,a=n));for(var o=String(e);o.length<t;)o="0"+o;return r&&(o=o.substr(o.length-t)),a+o}function ee(e,t){return $(e,3).substr(0,t)}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(a,o){var s=ne(e,a);if((n>0||s>-n)&&(s+=n),e===Y.Hours)0===s&&-12===n&&(s=12);else if(e===Y.FractionalSeconds)return ee(s,t);var u=H(o,F.MinusSign);return $(s,t,u,r,i)}}function ne(e,t){switch(e){case Y.FullYear:return t.getFullYear();case Y.Month:return t.getMonth();case Y.Date:return t.getDate();case Y.Hours:return t.getHours();case Y.Minutes:return t.getMinutes();case Y.Seconds:return t.getSeconds();case Y.FractionalSeconds:return t.getMilliseconds();case Y.Day:return t.getDay();default:throw new Error('Unknown DateType value "'.concat(e,'".'))}}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.Format,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i,a){return ie(i,a,e,t,n,r)}}function ie(e,t,n,r,a,o){switch(n){case Z.Months:return function(e,t,n){var r=Object(c.jb)(e),i=z([r[c.ab.MonthsFormat],r[c.ab.MonthsStandalone]],t);return z(i,n)}(t,a,r)[e.getMonth()];case Z.Days:return function(e,t,n){var r=Object(c.jb)(e),i=z([r[c.ab.DaysFormat],r[c.ab.DaysStandalone]],t);return z(i,n)}(t,a,r)[e.getDay()];case Z.DayPeriods:var s=e.getHours(),u=e.getMinutes();if(o){var l=function(e){var t=Object(c.jb)(e);return V(t),(t[c.ab.ExtraData][2]||[]).map((function(e){return"string"==typeof e?W(e):[W(e[0]),W(e[1])]}))}(t),h=function(e,t,n){var r=Object(c.jb)(e);V(r);var i=z([r[c.ab.ExtraData][0],r[c.ab.ExtraData][1]],t)||[];return z(i,n)||[]}(t,a,r),f=l.findIndex((function(e){if(Array.isArray(e)){var t=Object(i.a)(e,2),n=t[0],r=t[1],a=s>=n.hours&&u>=n.minutes,o=s<r.hours||s===r.hours&&u<r.minutes;if(n.hours<r.hours){if(a&&o)return!0}else if(a||o)return!0}else if(e.hours===s&&e.minutes===u)return!0;return!1}));if(-1!==f)return h[f]}return function(e,t,n){var r=Object(c.jb)(e),i=z([r[c.ab.DayPeriodsFormat],r[c.ab.DayPeriodsStandalone]],t);return z(i,n)}(t,a,r)[s<12?0:1];case Z.Eras:return function(e,t){return z(Object(c.jb)(e)[c.ab.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type ".concat(n))}}function ae(e){return function(t,n,r){var i=-1*r,a=H(n,F.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case X.Short:return(i>=0?"+":"")+$(o,2,a)+$(Math.abs(i%60),2,a);case X.ShortGMT:return"GMT"+(i>=0?"+":"")+$(o,1,a);case X.Long:return"GMT"+(i>=0?"+":"")+$(o,2,a)+":"+$(Math.abs(i%60),2,a);case X.Extended:return 0===r?"Z":(i>=0?"+":"")+$(o,2,a)+":"+$(Math.abs(i%60),2,a);default:throw new Error('Unknown zone width "'.concat(e,'"'))}}}function oe(e){var t=new Date(e,0,1).getDay();return new Date(e,0,1+(t<=4?4:11)-t)}function se(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i;if(t){var a=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+a)/7)}else{var s=oe(n.getFullYear()),u=se(n).getTime()-s.getTime();i=1+Math.round(u/6048e5)}return $(i,e,H(r,F.MinusSign))}}var ce={};function le(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function he(e){return e instanceof Date&&!isNaN(e.valueOf())}var fe=function e(){Object(u.a)(this,e)},de=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).locale=e,r}return Object(a.a)(n,[{key:"getPluralCategory",value:function(e,t){switch(U(t||this.locale)(e)){case P.Zero:return"zero";case P.One:return"one";case P.Two:return"two";case P.Few:return"few";case P.Many:return"many";default:return"other"}}}]),n}(fe);return e.\u0275fac=function(t){return new(t||e)(c.Tb(c.u))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}();function pe(e,t){t=encodeURIComponent(t);var n,a=Object(r.a)(e.split(";"));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.indexOf("="),u=-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],c=Object(i.a)(u,2),l=c[1];if(c[0].trim()===t)return decodeURIComponent(l)}}catch(h){a.e(h)}finally{a.f()}return null}var ve=function(){var e=function(){function e(t,n,r,i){Object(u.a)(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return Object(a.a)(e,[{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Object(c.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(Object(c.ub)(e.item)));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.s),c.Kb(c.t),c.Kb(c.l),c.Kb(c.E))},e.\u0275dir=c.Fb({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e}(),me=function(){function e(t,n,r,i){Object(u.a)(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return Object(a.a)(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),ge=function(){var e=function(){function e(t,n,r){Object(u.a)(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return Object(a.a)(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){Object(c.V)()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". ")+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,r,i){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new me(null,t._ngForOf,-1,-1),null===i?void 0:i),o=new ye(e,a);n.push(o)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=t._viewContainer.get(r);t._viewContainer.move(s,i);var u=new ye(e,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,a=this._viewContainer.length;i<a;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=a,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.P),c.Kb(c.L),c.Kb(c.s))},e.\u0275dir=c.Fb({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e}(),ye=function e(t,n){Object(u.a)(this,e),this.record=t,this.view=n},be=function(){var e=function(){function e(t,n){Object(u.a)(this,e),this._viewContainer=t,this._context=new _e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return Object(a.a)(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){we("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){we("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.P),c.Kb(c.L))},e.\u0275dir=c.Fb({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),_e=function e(){Object(u.a)(this,e),this.$implicit=null,this.ngIf=null};function we(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(Object(c.ub)(t),"'."))}var xe=function(){function e(t,n){Object(u.a)(this,e),this._viewContainerRef=t,this._templateRef=n,this._created=!1}return Object(a.a)(e,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}]),e}(),ke=function(){var e=function(){function e(){Object(u.a)(this,e),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object(a.a)(e,[{key:"ngSwitch",set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}},{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}},{key:"_matchCase",value:function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}},{key:"_updateDefaultCases",value:function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=c.Fb({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e}(),Se=function(){var e=function(){function e(t,n,r){Object(u.a)(this,e),this.ngSwitch=r,r._addCase(),this._view=new xe(t,n)}return Object(a.a)(e,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.P),c.Kb(c.L),c.Kb(ke,1))},e.\u0275dir=c.Fb({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e}(),Ee=function(){var e=function e(t,n,r){Object(u.a)(this,e),r._addDefault(new xe(t,n))};return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.P),c.Kb(c.L),c.Kb(ke,1))},e.\u0275dir=c.Fb({type:e,selectors:[["","ngSwitchDefault",""]]}),e}(),Oe=function(){var e=function(){function e(t,n,r){Object(u.a)(this,e),this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}return Object(a.a)(e,[{key:"ngStyle",set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}},{key:"ngDoCheck",value:function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}},{key:"_setStyle",value:function(e,t){var n=e.split("."),r=Object(i.a)(n,2),a=r[0],o=r[1];null!=(t=null!=t&&o?"".concat(t).concat(o):t)?this._renderer.setStyle(this._ngEl.nativeElement,a,t):this._renderer.removeStyle(this._ngEl.nativeElement,a)}},{key:"_applyChanges",value:function(e){var t=this;e.forEachRemovedItem((function(e){return t._setStyle(e.key,null)})),e.forEachAddedItem((function(e){return t._setStyle(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._setStyle(e.key,e.currentValue)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.l),c.Kb(c.t),c.Kb(c.E))},e.\u0275dir=c.Fb({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e}();function Te(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(Object(c.ub)(e),"'"))}var Ce=function(){function e(){Object(u.a)(this,e)}return Object(a.a)(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),Ae=new(function(){function e(){Object(u.a)(this,e)}return Object(a.a)(e,[{key:"createSubscription",value:function(e,t){return e.then(t,(function(e){throw e}))}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),Me=new Ce,je=function(){var e=function(){function e(t){Object(u.a)(this,e),this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return Object(a.a)(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,(function(n){return t._updateLatestValue(e,n)}))}},{key:"_selectStrategy",value:function(t){if(Object(c.rb)(t))return Ae;if(Object(c.qb)(t))return Me;throw Te(e,t)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Vb())},e.\u0275pipe=c.Jb({name:"async",type:e,pure:!1}),e}(),Pe=function(){var e=function(){function e(t){Object(u.a)(this,e),this.locale=t}return Object(a.a)(e,[{key:"transform",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(null==t||""===t||t!=t)return null;try{return J(t,n,i||this.locale,r)}catch(a){throw Te(e,a.message)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Kb(c.u))},e.\u0275pipe=c.Jb({name:"date",type:e,pure:!0}),e}(),Re=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},providers:[{provide:fe,useClass:de}]}),e}(),Ie="browser";function De(e){return e===Ie}var Fe=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275prov=Object(c.Gb)({token:e,providedIn:"root",factory:function(){return new Le(Object(c.Tb)(p),window,Object(c.Tb)(c.m))}}),e}(),Le=function(){function e(t,n,r){Object(u.a)(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return Object(a.a)(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#".concat(e));if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}()},pLZG:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("7o/Q");function u(e,t){return function(n){return n.lift(new c(e,t))}}var c=function(){function e(t,n){Object(a.a)(this,e),this.predicate=t,this.thisArg=n}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new l(e,this.predicate,this.thisArg))}}]),e}(),l=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i){var o;return Object(a.a)(this,n),(o=t.call(this,e)).predicate=r,o.thisArg=i,o.count=0,o}return Object(o.a)(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(s.a)},quSY:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("1OyB"),i=n("vuIU"),a=n("DH7j"),o=n("XoHu"),s=n("n6bG"),u=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),c=function(){var e,t=function(){function e(t){Object(r.a)(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return Object(i.a)(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if(Object(s.a)(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(v){t=v instanceof u?l(v.errors):[v]}}if(Object(a.a)(c))for(var f=-1,d=c.length;++f<d;){var p=c[f];if(Object(o.a)(p))try{p.unsubscribe()}catch(v){t=t||[],v instanceof u?t=t.concat(l(v.errors)):t.push(v)}}if(t)throw new u(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();return t.EMPTY=((e=new t).closed=!0,e),t}();function l(e){return e.reduce((function(e,t){return e.concat(t instanceof u?t.errors:t)}),[])}},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},s4An:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},sVev:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},tS1D:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D0XW"),i=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),a=n("ReuC"),o=n("foSv"),s=n("Ji7U"),u=n("LK+K"),c=n("1OyB"),l=n("vuIU"),h=n("mlxB"),f=n("zx2A");function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a;return function(r){var i=Object(h.a)(e),a=i?+e-n.now():Math.abs(e);return r.lift(new p(a,i,t,n))}}var p=function(){function e(t,n,r,i){Object(c.a)(this,e),this.waitFor=t,this.absoluteTimeout=n,this.withObservable=r,this.scheduler=i}return Object(l.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new v(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}]),e}(),v=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,r,i,a,o){var s;return Object(c.a)(this,n),(s=t.call(this,e)).absoluteTimeout=r,s.waitFor=i,s.withObservable=a,s.scheduler=o,s.scheduleTimeout(),s}return Object(l.a)(n,[{key:"scheduleTimeout",value:function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(n.dispatchTimeout,this.waitFor,this))}},{key:"_next",value:function(e){this.absoluteTimeout||this.scheduleTimeout(),Object(a.a)(Object(o.a)(n.prototype),"_next",this).call(this,e)}},{key:"_unsubscribe",value:function(){this.action=void 0,this.scheduler=null,this.withObservable=null}}],[{key:"dispatchTimeout",value:function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(f.c)(t,new f.a(e)))}}]),n}(f.b),m=n("z6cu");function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a;return d(e,Object(m.a)(new i),t)}},"tk/3":function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return X})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return x}));var r=n("Ji7U"),i=n("LK+K"),a=n("ODXe"),o=n("KQm4"),s=n("vuIU"),u=n("1OyB"),c=n("fXoL"),l=n("LRne"),h=n("HDdC"),f=n("bOdf"),d=n("pLZG"),p=n("lJxs"),v=n("ofXK"),m=function e(){Object(u.a)(this,e)},g=function e(){Object(u.a)(this,e)},y=function(){function e(t){var n=this;Object(u.a)(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),a=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(a):n.headers.set(i,[a])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))}))}:this.headers=new Map}return Object(s.a)(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,Object(o.a)(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var a=this.headers.get(t);if(!a)return;0===(a=a.filter((function(e){return-1===i.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),b=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"encodeKey",value:function(e){return w(e)}},{key:"encodeValue",value:function(e){return w(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function _(e,t){var n=new Map;return e.length>0&&e.split("&").forEach((function(e){var r=e.indexOf("="),i=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=Object(a.a)(i,2),s=o[0],u=o[1],c=n.get(s)||[];c.push(u),n.set(s,c)})),n}function w(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var x=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.a)(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new b,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=_(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])}))):this.map=null}return Object(s.a)(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).filter((function(e){return""!==e})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function k(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function S(e){return"undefined"!=typeof Blob&&e instanceof Blob}function E(e){return"undefined"!=typeof FormData&&e instanceof FormData}var O=function(){function e(t,n,r,i){var a;if(Object(u.a)(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.params&&(this.params=a.params)),this.headers||(this.headers=new y),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+o}}else this.params=new x,this.urlWithParams=n}return Object(s.a)(e,[{key:"serializeBody",value:function(){return null===this.body?null:k(this.body)||S(this.body)||E(this.body)||"string"==typeof this.body?this.body:this.body instanceof x?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||E(this.body)?null:S(this.body)?this.body.type||null:k(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof x?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),c)),new e(n,r,a,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:o})}}]),e}(),T=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),C=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";Object(u.a)(this,e),this.headers=t.headers||new y,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},A=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),(e=t.call(this,r)).type=T.ResponseHeader,e}return Object(s.a)(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(C),M=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),(e=t.call(this,r)).type=T.Response,e.body=void 0!==r.body?r.body:null,e}return Object(s.a)(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(C),j=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),r.error=e.error||null,r}return n}(C);function P(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var R=function(){var e=function(){function e(t){Object(u.a)(this,e),this.handler=t}return Object(s.a)(e,[{key:"request",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof O)n=e;else{var a=void 0;a=i.headers instanceof y?i.headers:new y(i.headers);var o=void 0;i.params&&(o=i.params instanceof x?i.params:new x({fromObject:i.params})),n=new O(e,t,void 0!==i.body?i.body:null,{headers:a,params:o,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=Object(l.a)(n).pipe(Object(f.a)((function(e){return r.handler.handle(e)})));if(e instanceof O||"events"===i.observe)return s;var u=s.pipe(Object(d.a)((function(e){return e instanceof M})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(Object(p.a)((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return u.pipe(Object(p.a)((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return u.pipe(Object(p.a)((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return u.pipe(Object(p.a)((function(e){return e.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new x).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,P(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,P(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,P(n,t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Tb(m))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),I=function(){function e(t,n){Object(u.a)(this,e),this.next=t,this.interceptor=n}return Object(s.a)(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),D=new c.q("HTTP_INTERCEPTORS"),F=function(){var e=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),L=/^\)\]\}',?\n/,N=function e(){Object(u.a)(this,e)},B=function(){var e=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),H=function(){var e=function(){function e(t){Object(u.a)(this,e),this.xhrFactory=t}return Object(s.a)(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new h.a((function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((function(e,t){return r.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var a=e.responseType.toLowerCase();r.responseType="json"!==a?a:"text"}var o=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new y(r.getAllResponseHeaders()),a=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new A({headers:i,status:t,statusText:n,url:a})},c=function(){var t=u(),i=t.headers,a=t.status,o=t.statusText,s=t.url,c=null;204!==a&&(c=void 0===r.response?r.responseText:r.response),0===a&&(a=c?200:0);var l=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof c){var h=c;c=c.replace(L,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new M({body:c,headers:i,status:a,statusText:o,url:s||void 0})),n.complete()):n.error(new j({error:c,headers:i,status:a,statusText:o,url:s||void 0}))},l=function(e){var t=u(),i=new j({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t.url||void 0});n.error(i)},h=!1,f=function(t){h||(n.next(u()),h=!0);var i={type:T.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(e){var t={type:T.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",c),r.addEventListener("error",l),e.reportProgress&&(r.addEventListener("progress",f),null!==o&&r.upload&&r.upload.addEventListener("progress",d)),r.send(o),n.next({type:T.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),e.reportProgress&&(r.removeEventListener("progress",f),null!==o&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Tb(N))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),U=new c.q("XSRF_COOKIE_NAME"),V=new c.q("XSRF_HEADER_NAME"),z=function e(){Object(u.a)(this,e)},W=function(){var e=function(){function e(t,n,r){Object(u.a)(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return Object(s.a)(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(v.y)(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Tb(v.d),c.Tb(c.B),c.Tb(U))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),G=function(){var e=function(){function e(t,n){Object(u.a)(this,e),this.tokenService=t,this.headerName=n}return Object(s.a)(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Tb(z),c.Tb(V))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),K=function(){var e=function(){function e(t,n){Object(u.a)(this,e),this.backend=t,this.injector=n,this.chain=null}return Object(s.a)(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(D,[]);this.chain=t.reduceRight((function(e,t){return new I(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Tb(g),c.Tb(c.r))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e}(),q=function(){var e=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:G,useClass:F}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:U,useValue:t.cookieName}:[],t.headerName?{provide:V,useValue:t.headerName}:[]]}}}]),e}();return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},providers:[G,{provide:D,useExisting:G,multi:!0},{provide:z,useClass:W},{provide:U,useValue:"XSRF-TOKEN"},{provide:V,useValue:"X-XSRF-TOKEN"}]}),e}(),X=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},providers:[R,{provide:m,useClass:K},H,{provide:g,useExisting:H},B,{provide:N,useExisting:B}],imports:[[q.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e}()},uFwe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("BsWD");function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(r.a)(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}},vkgz:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("JX7q"),i=n("Ji7U"),a=n("LK+K"),o=n("1OyB"),s=n("vuIU"),u=n("7o/Q");function c(){}var l=n("n6bG");function h(e,t,n){return function(r){return r.lift(new f(e,t,n))}}var f=function(){function e(t,n,r){Object(o.a)(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new d(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),d=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e,i,a,s){var u;return Object(o.a)(this,n),(u=t.call(this,e))._tapNext=c,u._tapError=c,u._tapComplete=c,u._tapError=a||c,u._tapComplete=s||c,Object(l.a)(i)?(u._context=Object(r.a)(u),u._tapNext=i):i&&(u._context=i,u._tapNext=i.next||c,u._tapError=i.error||c,u._tapComplete=i.complete||c),u}return Object(s.a)(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(u.a)},vuIU:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},w1tV:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("1OyB"),i=n("vuIU"),a=n("ReuC"),o=n("foSv"),s=n("Ji7U"),u=n("LK+K"),c=n("XNiG"),l=n("HDdC"),h=n("7o/Q"),f=n("quSY");function d(){return function(e){return e.lift(new p(e))}}var p=function(){function e(t){Object(r.a)(this,e),this.connectable=t}return Object(i.a)(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new v(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),v=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this,e)).connectable=i,a}return Object(i.a)(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(h.a),m=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this)).source=e,a.subjectFactory=i,a._refCount=0,a._isComplete=!1,a}return Object(i.a)(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new f.a).add(this.source.subscribe(new y(this.getSubject(),this))),e.closed&&(this._connection=null,e=f.a.EMPTY)),e}},{key:"refCount",value:function(){return d()(this)}}]),n}(l.a),g=function(){var e=m.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),y=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,i){var a;return Object(r.a)(this,n),(a=t.call(this,e)).connectable=i,a}return Object(i.a)(n,[{key:"_error",value:function(e){this._unsubscribe(),Object(a.a)(Object(o.a)(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),Object(a.a)(Object(o.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(c.b);function b(){return new c.a}function _(){return function(e){return d()((t=b,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,g);return r.source=e,r.subjectFactory=n,r})(e));var t}}},xbPD:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("7o/Q");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new c(e))}}var c=function(){function e(t){Object(a.a)(this,e),this.defaultValue=t}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new l(e,this.defaultValue))}}]),e}(),l=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return Object(o.a)(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(s.a)},yCtX:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("HDdC"),i=n("ngJS"),a=n("jZKg");function o(e,t){return t?Object(a.a)(e,t):new r.a(Object(i.a)(e))}},"z+Ro":function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",(function(){return r}))},z6cu:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("HDdC");function i(e,t){return new r.a(t?function(n){return t.schedule(a,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function a(e){e.subscriber.error(e.error)}},zUnb:function(e,t,n){"use strict";n.r(t);var r=n("fXoL"),i=n("tk/3"),a=n("JX7q"),o=n("uFwe"),s=n("KQm4"),u=n("Ji7U"),c=n("LK+K"),l=n("1OyB"),h=n("vuIU"),f=n("ofXK"),d=n("HDdC"),p=n("DH7j"),v=n("lJxs"),m=n("XoHu"),g=n("Cfvw");function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(Object(p.a)(r))return b(r,null);if(Object(m.a)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return b(i.map((function(e){return r[e]})),i)}}if("function"==typeof t[t.length-1]){var a=t.pop();return b(t=1===t.length&&Object(p.a)(t[0])?t[0]:t,null).pipe(Object(v.a)((function(e){return a.apply(void 0,Object(s.a)(e))})))}return b(t,null)}function b(e,t){return new d.a((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,o=0,s=function(s){var u=Object(g.a)(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,o++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++a!==r&&c||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var _=new r.q("NgValueAccessor"),w={provide:_,useExisting:Object(r.T)((function(){return x})),multi:!0},x=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return Object(h.a)(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.E),r.Kb(r.l))},e.\u0275dir=r.Fb({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&r.Wb("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[r.yb([w])]}),e}(),k={provide:_,useExisting:Object(r.T)((function(){return E})),multi:!0},S=new r.q("CompositionEventMode"),E=function(){var e=function(){function e(t,n,r){var i;Object(l.a)(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=r,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=Object(f.x)()?Object(f.x)().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return Object(h.a)(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.E),r.Kb(r.l),r.Kb(S,8))},e.\u0275dir=r.Fb({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.Wb("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[r.yb([k])]}),e}(),O=function(){var e=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Fb({type:e}),e}(),T=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(O);return e.\u0275fac=function(t){return C(t||e)},e.\u0275dir=r.Fb({type:e,features:[r.wb]}),e}(),C=r.Rb(T);function A(){throw new Error("unimplemented")}var M=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return Object(h.a)(n,[{key:"validator",get:function(){return A()}},{key:"asyncValidator",get:function(){return A()}}]),n}(O),j=function(){function e(t){Object(l.a)(this,e),this._cd=t}return Object(h.a)(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),P=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return n}(j);return e.\u0275fac=function(t){return new(t||e)(r.Kb(M,2))},e.\u0275dir=r.Fb({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.Cb("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[r.wb]}),e}();function R(e){return null==e||0===e.length}function I(e){return null!=e&&"number"==typeof e.length}var D=new r.q("NgValidators"),F=new r.q("NgAsyncValidators"),L=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,N=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"min",value:function(e){return function(t){if(R(t.value)||R(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(R(t.value)||R(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return R(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return R(e.value)||L.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){return R(t.value)||!I(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}}},{key:"maxLength",value:function(e){return function(t){return I(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(R(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(B);return 0==t.length?null:function(e){return U(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(B);return 0==t.length?null:function(e){return y(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(H)).pipe(Object(v.a)(U))}}}]),e}();function B(e){return null!=e}function H(e){var t=Object(r.rb)(e)?Object(g.a)(e):e;if(!Object(r.qb)(t))throw new Error("Expected validator to return Promise or Observable.");return t}function U(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function V(e){return e.validate?function(t){return e.validate(t)}:e}function z(e){return e.validate?function(t){return e.validate(t)}:e}var W={provide:_,useExisting:Object(r.T)((function(){return G})),multi:!0},G=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return Object(h.a)(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.E),r.Kb(r.l))},e.\u0275dir=r.Fb({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&r.Wb("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[r.yb([W])]}),e}(),K={provide:_,useExisting:Object(r.T)((function(){return X})),multi:!0},q=function(){var e=function(){function e(){Object(l.a)(this,e),this._accessors=[]}return Object(h.a)(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),X=function(){var e=function(){function e(t,n,r,i){Object(l.a)(this,e),this._renderer=t,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return Object(h.a)(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(M),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.E),r.Kb(r.l),r.Kb(q),r.Kb(r.r))},e.\u0275dir=r.Fb({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&r.Wb("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.yb([K])]}),e}(),Y={provide:_,useExisting:Object(r.T)((function(){return Z})),multi:!0},Z=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return Object(h.a)(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.E),r.Kb(r.l))},e.\u0275dir=r.Fb({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&r.Wb("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[r.yb([Y])]}),e}(),J='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Q='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',$='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ee=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(J))}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(Q,"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ").concat($))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ".concat(J))}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(Q))}},{key:"arrayParentException",value:function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ".concat('\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });'))}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(e){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(e,".\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===e?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),e}(),te={provide:_,useExisting:Object(r.T)((function(){return ne})),multi:!0},ne=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return Object(h.a)(e,[{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}},{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.E),r.Kb(r.l))},e.\u0275dir=r.Fb({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&r.Wb("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.yb([te])]}),e}(),re={provide:_,useExisting:Object(r.T)((function(){return ie})),multi:!0},ie=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return Object(h.a)(e,[{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}},{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,a=0;a<i.length;a++){var o=i.item(a),s=t._getOptionValue(o.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=t._getOptionValue(l.value);r.push(h)}}t.value=r,e(r)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.E),r.Kb(r.l))},e.\u0275dir=r.Fb({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&r.Wb("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.yb([re])]}),e}();function ae(e,t){return[].concat(Object(s.a)(t.path),[e])}function oe(e,t){e||le(t,"Cannot find control with"),t.valueAccessor||le(t,"No value accessor for form control with"),e.validator=N.compose([e.validator,t.validator]),e.asyncValidator=N.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&se(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&se(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function se(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function ue(e,t){null==e&&le(t,"Cannot find control with"),e.validator=N.compose([e.validator,t.validator]),e.asyncValidator=N.composeAsync([e.asyncValidator,t.asyncValidator])}function ce(e){return le(e,"There is no FormControl instance attached to form control element with")}function le(e,t){var n;throw n=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(n))}function he(e){return null!=e?N.compose(e.map(V)):null}function fe(e){return null!=e?N.composeAsync(e.map(z)):null}var de=[x,Z,G,ne,ie,X];function pe(e,t){e._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}))}function ve(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function me(e){var t=ye(e)?e.validators:e;return Array.isArray(t)?he(t):t||null}function ge(e,t){var n=ye(t)?t.asyncValidators:e;return Array.isArray(n)?fe(n):n||null}function ye(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var be,_e=function(){function e(t,n){Object(l.a)(this,e),this.validator=t,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object(h.a)(e,[{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this.validator=me(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=ge(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=H(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof xe?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof ke&&r.at(e)||null})),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new r.n,this.statusChanges=new r.n}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){ye(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}]),e}(),we=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return Object(l.a)(this,n),(e=t.call(this,me(i),ge(a,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return Object(h.a)(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(_e),xe=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,me(r),ge(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return Object(h.a)(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof we?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var r=n[t],i=this.controls[r];if(this.contains(r)&&e(i))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++)if(this.controls[t[e]].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(_e),ke=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,me(r),ge(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return Object(h.a)(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof we?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e,t=Object(o.a)(this.controls);try{for(t.s();!(e=t.n()).done;)if(e.value.enabled)return!1}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(_e),Se={provide:T,useExisting:Object(r.T)((function(){return Oe}))},Ee=function(){return Promise.resolve(null)}(),Oe=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this)).submitted=!1,a._directives=[],a.ngSubmit=new r.n,a.form=new xe({},he(e),fe(i)),a}return Object(h.a)(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(e){var t=this;Ee.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),oe(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;Ee.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),ve(t._directives,e)}))}},{key:"addFormGroup",value:function(e){var t=this;Ee.then((function(){var n=t._findContainer(e.path),r=new xe({});ue(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;Ee.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;Ee.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,pe(this.form,this._directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}}]),n}(T);return e.\u0275fac=function(t){return new(t||e)(r.Kb(D,10),r.Kb(F,10))},e.\u0275dir=r.Fb({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&r.Wb("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.yb([Se]),r.wb]}),e}(),Te=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return ae(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return he(this._validators)}},{key:"asyncValidator",get:function(){return fe(this._asyncValidators)}},{key:"_checkParentType",value:function(){}}]),n}(T);return e.\u0275fac=function(t){return Ce(t||e)},e.\u0275dir=r.Fb({type:e,features:[r.wb]}),e}(),Ce=r.Rb(Te),Ae=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(J,"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ").concat('\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(Q,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat($))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(Q,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat($))}}]),e}(),Me={provide:T,useExisting:Object(r.T)((function(){return je}))},je=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this))._parent=e,a._validators=r,a._asyncValidators=i,a}return Object(h.a)(n,[{key:"_checkParentType",value:function(){this._parent instanceof n||this._parent instanceof Oe||Ae.modelGroupParentException()}}]),n}(Te);return e.\u0275fac=function(t){return new(t||e)(r.Kb(T,5),r.Kb(D,10),r.Kb(F,10))},e.\u0275dir=r.Fb({type:e,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[r.yb([Me]),r.wb]}),e}(),Pe={provide:M,useExisting:Object(r.T)((function(){return Ie}))},Re=function(){return Promise.resolve(null)}(),Ie=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,o,s){var u;return Object(l.a)(this,n),(u=t.call(this)).control=new we,u._registered=!1,u.update=new r.n,u._parent=e,u._rawValidators=i||[],u._rawAsyncValidators=o||[],u.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||le(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return t.forEach((function(t){var a;t.constructor===E?n=t:(a=t,de.some((function(e){return a.constructor===e}))?(r&&le(e,"More than one built-in value accessor matches form control with"),r=t):(i&&le(e,"More than one custom value accessor matches form control with"),i=t))})),i||r||n||(le(e,"No valid value accessor for form control with"),null)}(Object(a.a)(u),s),u}return Object(h.a)(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?ae(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return he(this._rawValidators)}},{key:"asyncValidator",get:function(){return fe(this._rawAsyncValidators)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){oe(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof je)&&this._parent instanceof Te?Ae.formGroupNameException():this._parent instanceof je||this._parent instanceof Oe||Ae.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ae.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;Re.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;Re.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))}}]),n}(M);return e.\u0275fac=function(t){return new(t||e)(r.Kb(T,9),r.Kb(D,10),r.Kb(F,10),r.Kb(_,10))},e.\u0275dir=r.Fb({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.yb([Pe]),r.wb,r.xb]}),e}(),De={provide:T,useExisting:Object(r.T)((function(){return Fe}))},Fe=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this))._validators=e,a._asyncValidators=i,a.submitted=!1,a.directives=[],a.form=null,a.ngSubmit=new r.n,a}return Object(h.a)(n,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return oe(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){ve(this.directives,e)}},{key:"addFormGroup",value:function(e){var t=this.form.get(e.path);ue(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(e){}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){var t=this.form.get(e.path);ue(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(e){}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,pe(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach((function(t){var n=e.form.get(t.path);t.control!==n&&(function(e,t){t.valueAccessor.registerOnChange((function(){return ce(t)})),t.valueAccessor.registerOnTouched((function(){return ce(t)})),t._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),t._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),e&&e._clearChangeFns()}(t.control,t),n&&oe(n,t),t.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var e=this;this.form._registerOnCollectionChange((function(){return e._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var e=he(this._validators);this.form.validator=N.compose([this.form.validator,e]);var t=fe(this._asyncValidators);this.form.asyncValidator=N.composeAsync([this.form.asyncValidator,t])}},{key:"_checkFormPresent",value:function(){this.form||ee.missingFormException()}}]),n}(T);return e.\u0275fac=function(t){return new(t||e)(r.Kb(D,10),r.Kb(F,10))},e.\u0275dir=r.Fb({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&r.Wb("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.yb([De]),r.wb,r.xb]}),e}(),Le=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)}}),e}(),Ne=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[q],imports:[Le]}),e}(),Be=n("ReuC"),He=n("foSv");try{be="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(bk){be=!1}var Ue,Ve,ze=function(){var e=function e(t){Object(l.a)(this,e),this._platformId=t,this.isBrowser=this._platformId?Object(f.u)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!be)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT};return e.\u0275fac=function(t){return new(t||e)(r.Tb(r.B))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(r.B))},token:e,providedIn:"root"}),e}(),We=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)}}),e}();function Ge(e){return function(){if(null==Ue&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Ue=!0}}))}finally{Ue=Ue||!1}return Ue}()?e:!!e.capture}function Ke(e){if(function(){if(null==Ve){var e="undefined"!=typeof document?document.head:null;Ve=!(!e||!e.createShadowRoot&&!e.attachShadow)}return Ve}()){var t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}var qe=n("XNiG"),Xe=n("quSY"),Ye=n("LRne");function Ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.some((function(t){return e[t]})):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var Je=n("vkgz"),Qe=n("Kj3r"),$e=n("pLZG"),et=n("IzEk");function tt(e){return null!=e&&"false"!=="".concat(e)}function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return rt(e)?Number(e):t}function rt(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function it(e){return Array.isArray(e)?e:[e]}function at(e){return null==e?"":"string"==typeof e?e:"".concat(e,"px")}function ot(e){return e instanceof r.l?e.nativeElement:e}var st=function(){var e=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"create",value:function(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Gb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ut=function(){var e=function(){function e(t){Object(l.a)(this,e),this._mutationObserverFactory=t,this._observedElements=new Map}return Object(h.a)(e,[{key:"ngOnDestroy",value:function(){var e=this;this._observedElements.forEach((function(t,n){return e._cleanupObserver(n)}))}},{key:"observe",value:function(e){var t=this,n=ot(e);return new d.a((function(e){var r=t._observeElement(n).subscribe(e);return function(){r.unsubscribe(),t._unobserveElement(n)}}))}},{key:"_observeElement",value:function(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{var t=new qe.a,n=this._mutationObserverFactory.create((function(e){return t.next(e)}));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}},{key:"_unobserveElement",value:function(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}},{key:"_cleanupObserver",value:function(e){if(this._observedElements.has(e)){var t=this._observedElements.get(e),n=t.observer,r=t.stream;n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(st))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(st))},token:e,providedIn:"root"}),e}(),ct=function(){var e=function(){function e(t,n,i){Object(l.a)(this,e),this._contentObserver=t,this._elementRef=n,this._ngZone=i,this.event=new r.n,this._disabled=!1,this._currentSubscription=null}return Object(h.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=tt(e),this._disabled?this._unsubscribe():this._subscribe()}},{key:"debounce",get:function(){return this._debounce},set:function(e){this._debounce=nt(e),this._subscribe()}},{key:"ngAfterContentInit",value:function(){this._currentSubscription||this.disabled||this._subscribe()}},{key:"ngOnDestroy",value:function(){this._unsubscribe()}},{key:"_subscribe",value:function(){var e=this;this._unsubscribe();var t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular((function(){e._currentSubscription=(e.debounce?t.pipe(Object(Qe.a)(e.debounce)):t).subscribe(e.event)}))}},{key:"_unsubscribe",value:function(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(ut),r.Kb(r.l),r.Kb(r.z))},e.\u0275dir=r.Fb({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e}(),lt=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[st]}),e}();function ht(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}var ft=0,dt=new Map,pt=null,vt=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._platform=n,this._document=t}return Object(h.a)(e,[{key:"describe",value:function(e,t){this._canBeDescribed(e,t)&&("string"!=typeof t?(this._setMessageId(t),dt.set(t,{messageElement:t,referenceCount:0})):dt.has(t)||this._createMessageElement(t),this._isElementDescribedByMessage(e,t)||this._addMessageReference(e,t))}},{key:"removeDescription",value:function(e,t){if(t&&this._isElementNode(e)){if(this._isElementDescribedByMessage(e,t)&&this._removeMessageReference(e,t),"string"==typeof t){var n=dt.get(t);n&&0===n.referenceCount&&this._deleteMessageElement(t)}pt&&0===pt.childNodes.length&&this._deleteMessagesContainer()}}},{key:"ngOnDestroy",value:function(){for(var e=this._document.querySelectorAll("[".concat("cdk-describedby-host","]")),t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute("cdk-describedby-host");pt&&this._deleteMessagesContainer(),dt.clear()}},{key:"_createMessageElement",value:function(e){var t=this._document.createElement("div");this._setMessageId(t),t.textContent=e,this._createMessagesContainer(),pt.appendChild(t),dt.set(e,{messageElement:t,referenceCount:0})}},{key:"_setMessageId",value:function(e){e.id||(e.id="".concat("cdk-describedby-message","-").concat(ft++))}},{key:"_deleteMessageElement",value:function(e){var t=dt.get(e),n=t&&t.messageElement;pt&&n&&pt.removeChild(n),dt.delete(e)}},{key:"_createMessagesContainer",value:function(){if(!pt){var e=!this._platform||!this._platform.EDGE&&!this._platform.TRIDENT,t=this._document.getElementById("cdk-describedby-message-container");t&&t.parentNode&&t.parentNode.removeChild(t),(pt=this._document.createElement("div")).id="cdk-describedby-message-container",pt.classList.add("cdk-visually-hidden"),pt.setAttribute("aria-hidden",e+""),this._document.body.appendChild(pt)}}},{key:"_deleteMessagesContainer",value:function(){pt&&pt.parentNode&&(pt.parentNode.removeChild(pt),pt=null)}},{key:"_removeCdkDescribedByReferenceIds",value:function(e){var t=ht(e,"aria-describedby").filter((function(e){return 0!=e.indexOf("cdk-describedby-message")}));e.setAttribute("aria-describedby",t.join(" "))}},{key:"_addMessageReference",value:function(e,t){var n,r,i,a=dt.get(t);r=a.messageElement.id,(i=ht(n=e,"aria-describedby")).some((function(e){return e.trim()==r.trim()}))||(i.push(r.trim()),n.setAttribute("aria-describedby",i.join(" "))),e.setAttribute("cdk-describedby-host",""),a.referenceCount++}},{key:"_removeMessageReference",value:function(e,t){var n,r,i,a,o=dt.get(t);o.referenceCount--,i=o.messageElement.id,(a=ht(n=e,r="aria-describedby").filter((function(e){return e!=i.trim()}))).length?n.setAttribute(r,a.join(" ")):n.removeAttribute(r),e.removeAttribute("cdk-describedby-host")}},{key:"_isElementDescribedByMessage",value:function(e,t){var n=ht(e,"aria-describedby"),r=dt.get(t),i=r&&r.messageElement.id;return!!i&&-1!=n.indexOf(i)}},{key:"_canBeDescribed",value:function(e,t){if(!this._isElementNode(e))return!1;if(t&&"object"==typeof t)return!0;var n=null==t?"":"".concat(t).trim(),r=e.getAttribute("aria-label");return!(!n||r&&r.trim()===n)}},{key:"_isElementNode",value:function(e){return e.nodeType===this._document.ELEMENT_NODE}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d),r.Tb(ze))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(f.d),Object(r.Tb)(ze))},token:e,providedIn:"root"}),e}(),mt=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"setActiveItem",value:function(e){this.activeItem&&this.activeItem.setInactiveStyles(),Object(Be.a)(Object(He.a)(n.prototype),"setActiveItem",this).call(this,e),this.activeItem&&this.activeItem.setActiveStyles()}}]),n}(function(){function e(t){var n=this;Object(l.a)(this,e),this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new qe.a,this._typeaheadSubscription=Xe.a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=function(e){return e.disabled},this._pressedLetters=[],this.tabOut=new qe.a,this.change=new qe.a,t instanceof r.D&&t.changes.subscribe((function(e){if(n._activeItem){var t=e.toArray().indexOf(n._activeItem);t>-1&&t!==n._activeItemIndex&&(n._activeItemIndex=t)}}))}return Object(h.a)(e,[{key:"skipPredicate",value:function(e){return this._skipPredicateFn=e,this}},{key:"withWrap",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=e,this}},{key:"withVerticalOrientation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=e,this}},{key:"withHorizontalOrientation",value:function(e){return this._horizontal=e,this}},{key:"withAllowedModifierKeys",value:function(e){return this._allowedModifierKeys=e,this}},{key:"withTypeAhead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(Je.a)((function(t){return e._pressedLetters.push(t)})),Object(Qe.a)(t),Object($e.a)((function(){return e._pressedLetters.length>0})),Object(v.a)((function(){return e._pressedLetters.join("")}))).subscribe((function(t){for(var n=e._getItemsArray(),r=1;r<n.length+1;r++){var i=(e._activeItemIndex+r)%n.length,a=n[i];if(!e._skipPredicateFn(a)&&0===a.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(i);break}}e._pressedLetters=[]})),this}},{key:"withHomeAndEnd",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._homeAndEnd=e,this}},{key:"setActiveItem",value:function(e){var t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(e){var t=this,n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every((function(n){return!e[n]||t._allowedModifierKeys.indexOf(n)>-1}));switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Ze(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],e.preventDefault()}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}},{key:"isTyping",value:function(){return this._pressedLetters.length>0}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(e){var t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),r=t[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}},{key:"_setActiveItemByDelta",value:function(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}},{key:"_setActiveInWrapMode",value:function(e){for(var t=this._getItemsArray(),n=1;n<=t.length;n++){var r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}},{key:"_setActiveInDefaultMode",value:function(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}},{key:"_setActiveItemByIndex",value:function(e,t){var n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}},{key:"_getItemsArray",value:function(){return this._items instanceof r.D?this._items.toArray():this._items}}]),e}()),gt=function(){var e=function(){function e(t){Object(l.a)(this,e),this._platform=t}return Object(h.a)(e,[{key:"isDisabled",value:function(e){return e.hasAttribute("disabled")}},{key:"isVisible",value:function(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}},{key:"isTabbable",value:function(e){if(!this._platform.isBrowser)return!1;var t,n=function(e){try{return e.frameElement}catch(bk){return null}}((t=e).ownerDocument&&t.ownerDocument.defaultView||window);if(n){if(-1===bt(n))return!1;if(!this.isVisible(n))return!1}var r=e.nodeName.toLowerCase(),i=bt(e);return e.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){var t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}},{key:"isFocusable",value:function(e,t){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){var t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||yt(e))}(e)&&!this.isDisabled(e)&&((null==t?void 0:t.ignoreVisibility)||this.isVisible(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(ze))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(ze))},token:e,providedIn:"root"}),e}();function yt(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;var t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function bt(e){if(!yt(e))return null;var t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}var _t=function(){function e(t,n,r,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(l.a)(this,e),this._element=t,this._checker=n,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=function(){return a.focusLastTabbableElement()},this.endAnchorListener=function(){return a.focusFirstTabbableElement()},this._enabled=!0,o||this.attachAnchors()}return Object(h.a)(e,[{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}},{key:"destroy",value:function(){var e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}},{key:"attachAnchors",value:function(){var e=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular((function(){e._startAnchor||(e._startAnchor=e._createAnchor(),e._startAnchor.addEventListener("focus",e.startAnchorListener)),e._endAnchor||(e._endAnchor=e._createAnchor(),e._endAnchor.addEventListener("focus",e.endAnchorListener))})),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusInitialElement())}))}))}},{key:"focusFirstTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusFirstTabbableElement())}))}))}},{key:"focusLastTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusLastTabbableElement())}))}))}},{key:"_getRegionBoundary",value:function(e){for(var t=this._element.querySelectorAll("[cdk-focus-region-".concat(e,"], ")+"[cdkFocusRegion".concat(e,"], ")+"[cdk-focus-".concat(e,"]")),n=0;n<t.length;n++)t[n].hasAttribute("cdk-focus-".concat(e))?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(e,"', ")+"use 'cdkFocusRegion".concat(e,"' instead. The deprecated ")+"attribute will be removed in 8.0.0.",t[n]):t[n].hasAttribute("cdk-focus-region-".concat(e))&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(e,"', ")+"use 'cdkFocusRegion".concat(e,"' instead. The deprecated attribute ")+"will be removed in 8.0.0.",t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return e?(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),e.focus(),!0):this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var e=this._getRegionBoundary("start");return e&&e.focus(),!!e}},{key:"focusLastTabbableElement",value:function(){var e=this._getRegionBoundary("end");return e&&e.focus(),!!e}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}},{key:"_getLastTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=t.length-1;n>=0;n--){var r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}},{key:"_createAnchor",value:function(){var e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}},{key:"_toggleAnchorTabIndex",value:function(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}},{key:"toggleAnchors",value:function(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}},{key:"_executeOnStable",value:function(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Object(et.a)(1)).subscribe(e)}}]),e}(),wt=function(){var e=function(){function e(t,n,r){Object(l.a)(this,e),this._checker=t,this._ngZone=n,this._document=r}return Object(h.a)(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new _t(e,this._checker,this._ngZone,this._document,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(gt),r.Tb(r.z),r.Tb(f.d))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(gt),Object(r.Tb)(r.z),Object(r.Tb)(f.d))},token:e,providedIn:"root"}),e}();"undefined"!=typeof Element&&Element;var xt=new r.q("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),kt=new r.q("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),St=function(){var e=function(){function e(t,n,r,i){Object(l.a)(this,e),this._ngZone=n,this._defaultOptions=i,this._document=r,this._liveElement=t||this._createLiveElement()}return Object(h.a)(e,[{key:"announce",value:function(e){for(var t,n,r=this,i=this._defaultOptions,a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];return 1===o.length&&"number"==typeof o[0]?n=o[0]:(t=o[0],n=o[1]),this.clear(),clearTimeout(this._previousTimeout),t||(t=i&&i.politeness?i.politeness:"polite"),null==n&&i&&(n=i.duration),this._liveElement.setAttribute("aria-live",t),this._ngZone.runOutsideAngular((function(){return new Promise((function(t){clearTimeout(r._previousTimeout),r._previousTimeout=setTimeout((function(){r._liveElement.textContent=e,t(),"number"==typeof n&&(r._previousTimeout=setTimeout((function(){return r.clear()}),n))}),100)}))}))}},{key:"clear",value:function(){this._liveElement&&(this._liveElement.textContent="")}},{key:"ngOnDestroy",value:function(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}},{key:"_createLiveElement",value:function(){for(var e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(xt,8),r.Tb(r.z),r.Tb(f.d),r.Tb(kt,8))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(xt,8),Object(r.Tb)(r.z),Object(r.Tb)(f.d),Object(r.Tb)(kt,8))},token:e,providedIn:"root"}),e}();function Et(e){return 0===e.buttons}var Ot=new r.q("cdk-focus-monitor-default-options"),Tt=Ge({passive:!0,capture:!0}),Ct=function(){var e=function(){function e(t,n,r,i){var a=this;Object(l.a)(this,e),this._ngZone=t,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){a._lastTouchTarget=null,a._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(e){if(!a._lastTouchTarget){var t=Et(e)?"keyboard":"mouse";a._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=function(e){null!=a._touchTimeoutId&&clearTimeout(a._touchTimeoutId),a._lastTouchTarget=At(e),a._touchTimeoutId=setTimeout((function(){return a._lastTouchTarget=null}),650)},this._windowFocusListener=function(){a._windowFocused=!0,a._windowFocusTimeoutId=setTimeout((function(){return a._windowFocused=!1}))},this._rootNodeFocusAndBlurListener=function(e){for(var t=At(e),n="focus"===e.type?a._onFocus:a._onBlur,r=t;r;r=r.parentElement)n.call(a,e,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}return Object(h.a)(e,[{key:"monitor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ot(e);if(!this._platform.isBrowser||1!==n.nodeType)return Object(Ye.a)(null);var r=Ke(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return t&&(i.checkChildren=!0),i.subject;var a={checkChildren:t,subject:new qe.a,rootNode:r};return this._elementInfo.set(n,a),this._registerGlobalListeners(a),a.subject}},{key:"stopMonitoring",value:function(e){var t=ot(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}},{key:"focusVia",value:function(e,t,n){var r=ot(e);this._setOriginForCurrentEventQueue(t),"function"==typeof r.focus&&r.focus(n)}},{key:"ngOnDestroy",value:function(){var e=this;this._elementInfo.forEach((function(t,n){return e.stopMonitoring(n)}))}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}},{key:"_getFocusOrigin",value:function(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}},{key:"_setClasses",value:function(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}},{key:"_setOriginForCurrentEventQueue",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){t._origin=e,0===t._detectionMode&&(t._originTimeoutId=setTimeout((function(){return t._origin=null}),1))}))}},{key:"_wasCausedByTouch",value:function(e){var t=At(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(e,t){var n=this._elementInfo.get(t);if(n&&(n.checkChildren||t===At(e))){var r=this._getFocusOrigin(e);this._setClasses(t,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}}},{key:"_onBlur",value:function(e,t){var n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(e,t){this._ngZone.run((function(){return e.next(t)}))}},{key:"_registerGlobalListeners",value:function(e){var t=this;if(this._platform.isBrowser){var n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular((function(){n.addEventListener("focus",t._rootNodeFocusAndBlurListener,Tt),n.addEventListener("blur",t._rootNodeFocusAndBlurListener,Tt)})),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular((function(){var e=t._getDocument(),n=t._getWindow();e.addEventListener("keydown",t._documentKeydownListener,Tt),e.addEventListener("mousedown",t._documentMousedownListener,Tt),e.addEventListener("touchstart",t._documentTouchstartListener,Tt),n.addEventListener("focus",t._windowFocusListener)}))}}},{key:"_removeGlobalListeners",value:function(e){var t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){var n=this._rootNodeFocusListenerCount.get(t);n>1?this._rootNodeFocusListenerCount.set(t,n-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Tt),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Tt),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){var r=this._getDocument(),i=this._getWindow();r.removeEventListener("keydown",this._documentKeydownListener,Tt),r.removeEventListener("mousedown",this._documentMousedownListener,Tt),r.removeEventListener("touchstart",this._documentTouchstartListener,Tt),i.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(r.z),r.Tb(ze),r.Tb(f.d,8),r.Tb(Ot,8))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(r.z),Object(r.Tb)(ze),Object(r.Tb)(f.d,8),Object(r.Tb)(Ot,8))},token:e,providedIn:"root"}),e}();function At(e){return e.composedPath?e.composedPath()[0]:e.target}var Mt=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._platform=t,this._document=n}return Object(h.a)(e,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);var t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(this._platform.isBrowser&&this._document.body){var e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black");var t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(ze),r.Tb(f.d))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(ze),Object(r.Tb)(f.d))},token:e,providedIn:"root"}),e}(),jt=function(){var e=function e(t){Object(l.a)(this,e),t._applyBodyHighContrastModeCssClasses()};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)(r.Tb(Mt))},imports:[[We,lt]]}),e}(),Pt=new r.q("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(r.U)(f.d)}}),Rt=function(){var e=function(){function e(t){if(Object(l.a)(this,e),this.value="ltr",this.change=new r.n,t){var n=(t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null);this.value="ltr"===n||"rtl"===n?n:"ltr"}}return Object(h.a)(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(Pt,8))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(Pt,8))},token:e,providedIn:"root"}),e}(),It=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)}}),e}(),Dt=new r.O("10.2.7"),Ft=n("bHdf");function Lt(){return Object(Ft.a)(1)}function Nt(){return Lt()(Ye.a.apply(void 0,arguments))}var Bt=n("z+Ro");function Ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return Object(Bt.a)(r)?(t.pop(),function(e){return Nt(t,e,r)}):function(e){return Nt(t,e)}}var Ut,Vt=n("ODXe"),zt=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=Wt||(Wt=document.querySelector("base"))?Wt.getAttribute("href"):null;return null==n?null:(t=n,Ut||(Ut=document.createElement("a")),Ut.setAttribute("href",t),"/"===Ut.pathname.charAt(0)?Ut.pathname:"/"+Ut.pathname)}},{key:"resetBaseElement",value:function(){Wt=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return Object(f.y)(document.cookie,e)}}],[{key:"makeCurrent",value:function(){Object(f.z)(new n)}}]),n}(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.call(this)}return Object(h.a)(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(f.v)),Wt=null,Gt=new r.q("TRANSITION_ID"),Kt=[{provide:r.d,useFactory:function(e,t,n){return function(){n.get(r.e).donePromise.then((function(){var n=Object(f.x)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[Gt,f.d,r.r],multi:!0}],qt=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"addToWindow",value:function(e){r.ob.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=function(){return e.getAllTestabilities()},r.ob.getAllAngularRootElements=function(){return e.getAllRootElements()},r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push((function(e){var t=r.ob.getAllAngularTestabilities(),n=t.length,i=!1,a=function(t){i=i||t,0==--n&&e(i)};t.forEach((function(e){e.whenStable(a)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Object(f.x)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){Object(r.X)(new e)}}]),e}(),Xt=new r.q("EventManagerPlugins"),Yt=function(){var e=function(){function e(t,n){var r=this;Object(l.a)(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return Object(h.a)(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(Xt),r.Tb(r.z))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),Zt=function(){function e(t){Object(l.a)(this,e),this._doc=t}return Object(h.a)(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=Object(f.x)().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),Jt=function(){var e=function(){function e(){Object(l.a)(this,e),this._stylesSet=new Set}return Object(h.a)(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),Qt=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return Object(h.a)(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Object(f.x)().remove(e)}))}}]),n}(Jt);return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),$t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},en=/%COMP%/g,tn="_nghost-".concat("%COMP%"),nn="_ngcontent-".concat("%COMP%");function rn(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?rn(e,i,n):(i=i.replace(en,e),n.push(i))}return n}function an(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var on=function(){var e=function(){function e(t,n,r){Object(l.a)(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new sn(t)}return Object(h.a)(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.Q.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new un(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case r.Q.Native:case r.Q.ShadowDom:return new cn(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var i=rn(t.id,t.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(Yt),r.Tb(Qt),r.Tb(r.c))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),sn=function(){function e(t){Object(l.a)(this,e),this.eventManager=t,this.data=Object.create(null)}return Object(h.a)(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS($t[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=$t[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=$t[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,i){i&r.G.DashCase?e.style.setProperty(t,n,i&r.G.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&r.G.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,an(n)):this.eventManager.addEventListener(e,t,an(n))}}]),e}(),un=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;Object(l.a)(this,n),(o=t.call(this,e)).component=i;var s=rn(a+"-"+i.id,i.styles,[]);return r.addStyles(s),o.contentAttr=nn.replace(en,a+"-"+i.id),o.hostAttr=function(e){return tn.replace(en,e)}(a+"-"+i.id),o}return Object(h.a)(n,[{key:"applyToHost",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=Object(Be.a)(Object(He.a)(n.prototype),"createElement",this).call(this,e,t);return Object(Be.a)(Object(He.a)(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(sn),cn=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,a,o){var s;Object(l.a)(this,n),(s=t.call(this,e)).sharedStylesHost=i,s.hostEl=a,s.component=o,s.shadowRoot=o.encapsulation===r.Q.ShadowDom?a.attachShadow({mode:"open"}):a.createShadowRoot(),s.sharedStylesHost.addHost(s.shadowRoot);for(var u=rn(o.id,o.styles,[]),c=0;c<u.length;c++){var h=document.createElement("style");h.textContent=u[c],s.shadowRoot.appendChild(h)}return s}return Object(h.a)(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return Object(Be.a)(Object(He.a)(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return Object(Be.a)(Object(He.a)(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return Object(Be.a)(Object(He.a)(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(Object(Be.a)(Object(He.a)(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(sn),ln=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(Zt);return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),hn=["alt","control","meta","shift"],fn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pn={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},vn=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Object(f.x)().onAndCancel(e,i.domEventName,a)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(hn.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")})),a+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&dn.hasOwnProperty(t)&&(t=dn[t]))}return fn[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),hn.forEach((function(r){r!=n&&(0,pn[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded((function(){return t(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(Zt);return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),mn=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Gb)({factory:function(){return Object(r.Tb)(gn)},token:e,providedIn:"root"}),e}(),gn=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this))._doc=e,r}return Object(h.a)(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case r.I.NONE:return t;case r.I.HTML:return Object(r.db)(t,"HTML")?Object(r.vb)(t):Object(r.bb)(this._doc,String(t));case r.I.STYLE:return Object(r.db)(t,"Style")?Object(r.vb)(t):t;case r.I.SCRIPT:if(Object(r.db)(t,"Script"))return Object(r.vb)(t);throw new Error("unsafe value used in a script context");case r.I.URL:return Object(r.nb)(t),Object(r.db)(t,"URL")?Object(r.vb)(t):Object(r.cb)(String(t));case r.I.RESOURCE_URL:if(Object(r.db)(t,"ResourceURL"))return Object(r.vb)(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see http://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(e){return Object(r.eb)(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return Object(r.hb)(e)}},{key:"bypassSecurityTrustScript",value:function(e){return Object(r.gb)(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return Object(r.ib)(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return Object(r.fb)(e)}}]),n}(mn);return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d))},e.\u0275prov=Object(r.Gb)({factory:function(){return e=Object(r.Tb)(r.o),new gn(e.get(f.d));var e},token:e,providedIn:"root"}),e}(),yn=[{provide:r.B,useValue:f.w},{provide:r.C,useValue:function(){zt.makeCurrent(),qt.init()},multi:!0},{provide:f.d,useFactory:function(){return Object(r.tb)(document),document},deps:[]}],bn=Object(r.R)(r.W,"browser",yn),_n=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Xt,useClass:ln,multi:!0,deps:[f.d,r.z,r.B]},{provide:Xt,useClass:vn,multi:!0,deps:[f.d]},[],{provide:on,useClass:on,deps:[Yt,Qt,r.c]},{provide:r.F,useExisting:on},{provide:Jt,useExisting:Qt},{provide:Qt,useClass:Qt,deps:[f.d]},{provide:r.M,useClass:r.M,deps:[r.z]},{provide:Yt,useClass:Yt,deps:[Xt,r.z]},[]],wn=function(){var e=function(){function e(t){if(Object(l.a)(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return Object(h.a)(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:r.c,useValue:t.appId},{provide:Gt,useExisting:r.c},Kt]}}}]),e}();return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)(r.Tb(e,12))},providers:_n,imports:[f.c,r.f]}),e}();"undefined"!=typeof window&&window;var xn=function e(){Object(l.a)(this,e)},kn=function e(){Object(l.a)(this,e)};function Sn(e,t){return{type:7,name:e,definitions:t,options:{}}}function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:t,timings:e}}function On(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:e,options:t}}function Tn(e){return{type:6,styles:e,offset:null}}function Cn(e,t,n){return{type:0,name:e,styles:t,options:n}}function An(e){return{type:5,steps:e}}function Mn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:e,animation:t,options:n}}function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:9,options:e}}function Pn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:11,selector:e,animation:t,options:n}}function Rn(e){Promise.resolve(null).then(e)}var In=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(l.a)(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+n}return Object(h.a)(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;Rn((function(){return e._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(e){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}(),Dn=function(){function e(t){var n=this;Object(l.a)(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var r=0,i=0,a=0,o=this.players.length;0==o?Rn((function(){return n._onFinish()})):this.players.forEach((function(e){e.onDone((function(){++r==o&&n._onFinish()})),e.onDestroy((function(){++i==o&&n._onDestroy()})),e.onStart((function(){++a==o&&n._onStart()}))})),this.totalTime=this.players.reduce((function(e,t){return Math.max(e,t.totalTime)}),0)}return Object(h.a)(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(e){return e.init()}))}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(e){return e.play()}))}},{key:"pause",value:function(){this.players.forEach((function(e){return e.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(e){return e.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(e){return e.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(e){return e.destroy()})),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(e){return e.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach((function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)}))}},{key:"getPosition",value:function(){var e=0;return this.players.forEach((function(t){var n=t.getPosition();e=Math.min(n,e)})),e}},{key:"beforeDestroy",value:function(){this.players.forEach((function(e){e.beforeDestroy&&e.beforeDestroy()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}();function Fn(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ln(e){switch(e.length){case 0:return new In;case 1:return e[0];default:return new Dn(e)}}function Nn(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=[],s=[],u=-1,c=null;if(r.forEach((function(e){var n=e.offset,r=n==u,l=r&&c||{};Object.keys(e).forEach((function(n){var r=n,s=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),s){case"!":s=i[n];break;case"*":s=a[n];break;default:s=t.normalizeStyleValue(n,r,s,o)}l[r]=s})),r||s.push(l),c=l,u=n})),o.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(o.join(l)))}return s}function Bn(e,t,n,r){switch(t){case"start":e.onStart((function(){return r(n&&Hn(n,"start",e))}));break;case"done":e.onDone((function(){return r(n&&Hn(n,"done",e))}));break;case"destroy":e.onDestroy((function(){return r(n&&Hn(n,"destroy",e))}))}}function Hn(e,t,n){var r=n.totalTime,i=Un(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),a=e._data;return null!=a&&(i._data=a),i}function Un(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:a,disabled:!!o}}function Vn(e,t,n){var r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function zn(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var Wn=function(e,t){return!1},Gn=function(e,t){return!1},Kn=function(e,t,n){return[]},qn=Fn();(qn||"undefined"!=typeof Element)&&(Wn=function(e,t){return e.contains(t)},Gn=function(){if(qn||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,n){return t.apply(e,[n])}:Gn}(),Kn=function(e,t,n){var r=[];if(n)r.push.apply(r,Object(s.a)(e.querySelectorAll(t)));else{var i=e.querySelector(t);i&&r.push(i)}return r});var Xn=null,Yn=!1;function Zn(e){Xn||(Xn=("undefined"!=typeof document?document.body:null)||{},Yn=!!Xn.style&&"WebkitAppearance"in Xn.style);var t=!0;return Xn.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(t=e in Xn.style)&&Yn&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Xn.style),t}var Jn=Gn,Qn=Wn,$n=Kn;function er(e){var t={};return Object.keys(e).forEach((function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]})),t}var tr=function(){var e=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"validateStyleProperty",value:function(e){return Zn(e)}},{key:"matchesElement",value:function(e,t){return Jn(e,t)}},{key:"containsElement",value:function(e,t){return Qn(e,t)}},{key:"query",value:function(e,t,n){return $n(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return n||""}},{key:"animate",value:function(e,t,n,r,i){return new In(n,r)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),nr=function(){var e=function e(){Object(l.a)(this,e)};return e.NOOP=new tr,e}();function rr(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ir(parseFloat(t[1]),t[2])}function ir(e,t){switch(t){case"s":return 1e3*e;default:return e}}function ar(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var r,i=0,a="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};r=ir(parseFloat(o[1]),o[2]);var s=o[3];null!=s&&(i=ir(parseFloat(s),o[4]));var u=o[5];u&&(a=u)}else r=e;if(!n){var c=!1,l=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(l,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:r,delay:i,easing:a}}(e,t,n)}function or(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach((function(n){t[n]=e[n]})),t}function sr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var r in e)n[r]=e[r];else or(e,n);return n}function ur(e,t,n){return n?t+":"+n+";":""}function cr(e){for(var t="",n=0;n<e.style.length;n++){var r=e.style.item(n);t+=ur(0,r,e.style.getPropertyValue(r))}for(var i in e.style)e.style.hasOwnProperty(i)&&!i.startsWith("_")&&(t+=ur(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[i]));e.setAttribute("style",t)}function lr(e,t,n){e.style&&(Object.keys(t).forEach((function(r){var i=yr(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]})),Fn()&&cr(e))}function hr(e,t){e.style&&(Object.keys(t).forEach((function(t){var n=yr(t);e.style[n]=""})),Fn()&&cr(e))}function fr(e){return Array.isArray(e)?1==e.length?e[0]:On(e):e}var dr=new RegExp("".concat("{{","\\s*(.+?)\\s*").concat("}}"),"g");function pr(e){var t=[];if("string"==typeof e){for(var n;n=dr.exec(e);)t.push(n[1]);dr.lastIndex=0}return t}function vr(e,t,n){var r=e.toString(),i=r.replace(dr,(function(e,r){var i=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()}));return i==r?e:i}function mr(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var gr=/-+([a-z0-9])/g;function yr(e){return e.replace(gr,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()}))}function br(e,t){return 0===e||0===t}function _r(e,t,n){var r=Object.keys(n);if(r.length&&t.length){var i=t[0],a=[];if(r.forEach((function(e){i.hasOwnProperty(e)||a.push(e),i[e]=n[e]})),a.length)for(var o=function(){var n=t[s];a.forEach((function(t){n[t]=xr(e,t)}))},s=1;s<t.length;s++)o()}return t}function wr(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #".concat(t.type))}}function xr(e,t){return window.getComputedStyle(e)[t]}var kr=new Set(["true","1"]),Sr=new Set(["false","0"]);function Er(e,t){var n=kr.has(e)||Sr.has(e),r=kr.has(t)||Sr.has(t);return function(i,a){var o="*"==e||e==i,s="*"==t||t==a;return!o&&n&&"boolean"==typeof i&&(o=i?kr.has(e):Sr.has(e)),!s&&r&&"boolean"==typeof a&&(s=a?kr.has(t):Sr.has(t)),o&&s}}var Or=new RegExp("s*".concat(":self","s*,?"),"g");function Tr(e,t,n){return new Cr(e).build(t,n)}var Cr=function(){function e(t){Object(l.a)(this,e),this._driver=t}return Object(h.a)(e,[{key:"build",value:function(e,t){var n=new Ar(t);return this._resetContextStyleTimingState(n),wr(this,fr(e),n)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var n=this,r=t.queryCount=0,i=t.depCount=0,a=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach((function(e){if(n._resetContextStyleTimingState(t),0==e.type){var s=e,u=s.name;u.toString().split(/\s*,\s*/).forEach((function(e){s.name=e,a.push(n.visitState(s,t))})),s.name=u}else if(1==e.type){var c=n.visitTransition(e,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:e.name,states:a,transitions:o,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(e,t){var n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){var i=new Set,a=r||{};if(n.styles.forEach((function(e){if(Mr(e)){var t=e;Object.keys(t).forEach((function(e){pr(t[e]).forEach((function(e){a.hasOwnProperty(e)||i.add(e)}))}))}})),i.size){var o=mr(i.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(o.join(", ")))}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var n,r,i,a=wr(this,fr(e.animation),t);return{type:1,matchers:(n=e.expr,r=t.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(e){return function(e,t,n){if(":"==e[0]){var r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(e,'" is not supported')),t;var a=i[1],o=i[2],s=i[3];t.push(Er(a,s)),"<"!=o[0]||"*"==a&&"*"==s||t.push(Er(s,a))}(e,i,r)})):i.push(n),i),animation:a,queryCount:t.queryCount,depCount:t.depCount,options:jr(e.options)}}},{key:"visitSequence",value:function(e,t){var n=this;return{type:2,steps:e.steps.map((function(e){return wr(n,e,t)})),options:jr(e.options)}}},{key:"visitGroup",value:function(e,t){var n=this,r=t.currentTime,i=0,a=e.steps.map((function(e){t.currentTime=r;var a=wr(n,e,t);return i=Math.max(i,t.currentTime),a}));return t.currentTime=i,{type:3,steps:a,options:jr(e.options)}}},{key:"visitAnimate",value:function(e,t){var n,r=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return Pr(ar(e,t).duration,0,"");var r=e;if(r.split(/\s+/).some((function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)}))){var i=Pr(0,0,"");return i.dynamic=!0,i.strValue=r,i}return Pr((n=n||ar(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;var i=e.styles?e.styles:Tn({});if(5==i.type)n=this.visitKeyframes(i,t);else{var a=e.styles,o=!1;if(!a){o=!0;var s={};r.easing&&(s.easing=r.easing),a=Tn(s)}t.currentTime+=r.duration+r.delay;var u=this.visitStyle(a,t);u.isEmptyStep=o,n=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}},{key:"_makeStyleAst",value:function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach((function(e){"string"==typeof e?"*"==e?n.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):n.push(e)})):n.push(e.styles);var r=!1,i=null;return n.forEach((function(e){if(Mr(e)){var t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(var a in t)if(t[a].toString().indexOf("{{")>=0){r=!0;break}}})),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(e,t){var n=this,r=t.currentAnimateTimings,i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach((function(e){"string"!=typeof e&&Object.keys(e).forEach((function(r){if(n._driver.validateStyleProperty(r)){var o=t.collectedStyles[t.currentQuerySelector],s=o[r],u=!0;s&&(a!=i&&a>=s.startTime&&i<=s.endTime&&(t.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(s.startTime,'ms" and "').concat(s.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(a,'ms" and "').concat(i,'ms"')),u=!1),a=s.startTime),u&&(o[r]={startTime:a,endTime:i}),t.options&&(c=t.errors,l=t.options.params||{},(h=pr(e[r])).length&&h.forEach((function(e){l.hasOwnProperty(e)||c.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))})))}else t.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'));var c,l,h}))}))}},{key:"visitKeyframes",value:function(e,t){var n=this,r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,a=[],o=!1,s=!1,u=0,c=e.steps.map((function(e){var r=n._makeStyleAst(e,t),c=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach((function(e){if(Mr(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}}));else if(Mr(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),s=s||l<0||l>1,o=o||l<u,u=l,a.push(l),r}));s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");var l=e.steps.length,h=0;i>0&&i<l?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=t.currentTime,p=t.currentAnimateTimings,v=p.duration;return c.forEach((function(e,i){var o=h>0?i==f?1:h*i:a[i],s=o*v;t.currentTime=d+p.delay+s,p.duration=s,n._validateStyleAst(e,t),e.offset=o,r.styles.push(e)})),r}},{key:"visitReference",value:function(e,t){return{type:8,animation:wr(this,fr(e.animation),t),options:jr(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:jr(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:jr(e.options)}}},{key:"visitQuery",value:function(e,t){var n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;var i=function(e){var t=!!e.split(/\s*,\s*/).find((function(e){return":self"==e}));return t&&(e=e.replace(Or,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(e){return".ng-trigger-"+e.substr(1)})).replace(/:animating/g,".ng-animating"),t]}(e.selector),a=Object(Vt.a)(i,2),o=a[0],s=a[1];t.currentQuerySelector=n.length?n+" "+o:o,Vn(t.collectedStyles,t.currentQuerySelector,{});var u=wr(this,fr(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:u,originalSelector:e.selector,options:jr(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:ar(e.timings,t.errors,!0);return{type:12,animation:wr(this,fr(e.animation),t),timings:n,options:null}}}]),e}(),Ar=function e(t){Object(l.a)(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Mr(e){return!Array.isArray(e)&&"object"==typeof e}function jr(e){var t;return e?(e=or(e)).params&&(e.params=(t=e.params)?or(t):null):e={},e}function Pr(e,t,n){return{duration:e,delay:t,easing:n}}function Rr(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:o,subTimeline:s}}var Ir=function(){function e(){Object(l.a)(this,e),this._map=new Map}return Object(h.a)(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var n,r=this._map.get(e);r||this._map.set(e,r=[]),(n=r).push.apply(n,Object(s.a)(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),Dr=new RegExp(":enter","g"),Fr=new RegExp(":leave","g");function Lr(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new Nr).buildKeyframes(e,t,n,r,i,a,o,s,u,c)}var Nr=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"buildKeyframes",value:function(e,t,n,r,i,a,o,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new Ir;var l=new Hr(e,t,u,r,i,c,[]);l.options=s,l.currentTimeline.setStyles([a],null,l.errors,s),wr(this,n,l);var h=l.timelines.filter((function(e){return e.containsAnimation()}));if(h.length&&Object.keys(o).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([o],null,l.errors,s)}return h.length?h.map((function(e){return e.buildKeyframes()})):[Rr(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var n=t.subInstructions.consume(t.element);if(n){var r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);i!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,n){var r=t.currentTimeline.currentTime,i=null!=n.duration?rr(n.duration):null,a=null!=n.delay?rr(n.delay):null;return 0!==i&&e.forEach((function(e){var n=t.appendInstructionToTimeline(e,i,a);r=Math.max(r,n.duration+n.delay)})),r}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),wr(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var n=this,r=t.subContextCount,i=t,a=e.options;if(a&&(a.params||a.delay)&&((i=t.createSubContext(a)).transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Br);var o=rr(a.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach((function(e){return wr(n,e,i)})),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var n=this,r=[],i=t.currentTimeline.currentTime,a=e.options&&e.options.delay?rr(e.options.delay):0;e.steps.forEach((function(o){var s=t.createSubContext(e.options);a&&s.delayNextStep(a),wr(n,o,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)})),r.forEach((function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)})),t.transformIntoNewTimeline(i),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var n=e.strValue;return ar(t.params?vr(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach((function(e){a.forwardTime((e.offset||0)*i),a.setStyles(e.styles,e.easing,t.errors,t.options),a.applyStylesToKeyframe()})),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+i),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var n=this,r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?rr(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Br);var o=r,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=s.length;var u=null;s.forEach((function(r,i){t.currentQueryIndex=i;var s=t.createSubContext(e.options,r);a&&s.delayNextStep(a),r===t.element&&(u=s.currentTimeline),wr(n,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)})),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var n=t.parentContext,r=t.currentTimeline,i=e.timings,a=Math.abs(i.duration),o=a*(t.currentQueryTotal-1),s=a*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=o-s;break;case"full":s=n.currentStaggerTime}var u=t.currentTimeline;s&&u.delayNextStep(s);var c=u.currentTime;wr(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),e}(),Br={},Hr=function(){function e(t,n,r,i,a,o,s,u){Object(l.a)(this,e),this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Br,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Ur(this._driver,n,0),s.push(this.currentTimeline)}return Object(h.a)(e,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(e,t){var n=this;if(e){var r=e,i=this.options;null!=r.duration&&(i.duration=rr(r.duration)),null!=r.delay&&(i.delay=rr(r.delay));var a=r.params;if(a){var o=i.params;o||(o=this.options.params={}),Object.keys(a).forEach((function(e){t&&o.hasOwnProperty(e)||(o[e]=vr(a[e],o,n.errors))}))}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach((function(e){n[e]=t[e]}))}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,a=new e(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(t),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=Br,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,n){var r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new Vr(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,n,r,i,a){var o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(Dr,"."+this._enterClassName)).replace(Fr,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),o.push.apply(o,Object(s.a)(u))}return i||0!=o.length||a.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),o}}]),e}(),Ur=function(){function e(t,n,r,i){Object(l.a)(this,e),this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return Object(h.a)(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach((function(e){t._backFill[e]=t._globalTimelineStyles[e]||"*",t._currentKeyframe[e]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,n,r){var i=this;t&&(this._previousKeyframe.easing=t);var a=r&&r.params||{},o=function(e,t){var n,r={};return e.forEach((function(e){"*"===e?(n=n||Object.keys(t)).forEach((function(e){r[e]="*"})):sr(e,!1,r)})),r}(e,this._globalTimelineStyles);Object.keys(o).forEach((function(e){var t=vr(o[e],a,n);i._pendingStyles[e]=t,i._localTimelineStyles.hasOwnProperty(e)||(i._backFill[e]=i._globalTimelineStyles.hasOwnProperty(e)?i._globalTimelineStyles[e]:"*"),i._updateStyle(e,t)}))}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){e._currentKeyframe[n]=t[n]})),Object.keys(this._localTimelineStyles).forEach((function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])})))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach((function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach((function(n){var r=t._styleSummary[n],i=e._styleSummary[n];(!r||i.time>r.time)&&t._updateStyle(n,i.value)}))}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach((function(a,o){var s=sr(a,!0);Object.keys(s).forEach((function(e){var r=s[e];"!"==r?t.add(e):"*"==r&&n.add(e)})),r||(s.offset=o/e.duration),i.push(s)}));var a=t.size?mr(t.values()):[],o=n.size?mr(n.values()):[];if(r){var s=i[0],u=or(s);s.offset=0,u.offset=1,i=[s,u]}return Rr(this.element,i,a,o,this.duration,this.startTime,this.easing,!1)}}]),e}(),Vr=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Object(l.a)(this,n),(u=t.call(this,e,r,s.delay)).element=r,u.keyframes=i,u.preStyleProps=a,u.postStyleProps=o,u._stretchStartingKeyframe=c,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return Object(h.a)(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,n=t.delay,r=t.duration,i=t.easing;if(this._stretchStartingKeyframe&&n){var a=[],o=r+n,s=n/o,u=sr(e[0],!1);u.offset=0,a.push(u);var c=sr(e[0],!1);c.offset=zr(s),a.push(c);for(var l=e.length-1,h=1;h<=l;h++){var f=sr(e[h],!1);f.offset=zr((n+f.offset*r)/o),a.push(f)}r=o,n=0,i="",e=a}return Rr(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(Ur);function zr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,t-1);return Math.round(e*n)/n}var Wr=function e(){Object(l.a)(this,e)},Gr=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"normalizePropertyName",value:function(e,t){return yr(e)}},{key:"normalizeStyleValue",value:function(e,t,n,r){var i="",a=n.toString().trim();if(Kr[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&r.push("Please provide a CSS unit value for ".concat(e,":").concat(n))}return a+i}}]),n}(Wr),Kr=function(){return function(e){var t={};return e.forEach((function(e){return t[e]=!0})),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","))}();function qr(e,t,n,r,i,a,o,s,u,c,l,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:a,toState:r,toStyles:o,timelines:s,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var Xr={},Yr=function(){function e(t,n,r){Object(l.a)(this,e),this._triggerName=t,this.ast=n,this._stateStyles=r}return Object(h.a)(e,[{key:"match",value:function(e,t,n,r){return function(e,t,n,r,i){return e.some((function(e){return e(t,n,r,i)}))}(this.ast.matchers,e,t,n,r)}},{key:"buildStyles",value:function(e,t,n){var r=this._stateStyles["*"],i=this._stateStyles[e],a=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):a}},{key:"build",value:function(e,t,n,r,i,a,o,s,u,c){var l=[],h=this.ast.options&&this.ast.options.params||Xr,f=this.buildStyles(n,o&&o.params||Xr,l),d=s&&s.params||Xr,p=this.buildStyles(r,d,l),v=new Set,m=new Map,g=new Map,y="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=c?[]:Lr(e,t,this.ast.animation,i,a,f,p,b,u,l),w=0;if(_.forEach((function(e){w=Math.max(e.duration+e.delay,w)})),l.length)return qr(t,this._triggerName,n,r,y,f,p,[],[],m,g,w,l);_.forEach((function(e){var n=e.element,r=Vn(m,n,{});e.preStyleProps.forEach((function(e){return r[e]=!0}));var i=Vn(g,n,{});e.postStyleProps.forEach((function(e){return i[e]=!0})),n!==t&&v.add(n)}));var x=mr(v.values());return qr(t,this._triggerName,n,r,y,f,p,_,x,m,g,w)}}]),e}(),Zr=function(){function e(t,n){Object(l.a)(this,e),this.styles=t,this.defaultParams=n}return Object(h.a)(e,[{key:"buildStyles",value:function(e,t){var n={},r=or(this.defaultParams);return Object.keys(e).forEach((function(t){var n=e[t];null!=n&&(r[t]=n)})),this.styles.styles.forEach((function(e){if("string"!=typeof e){var i=e;Object.keys(i).forEach((function(e){var a=i[e];a.length>1&&(a=vr(a,r,t)),n[e]=a}))}})),n}}]),e}(),Jr=function(){function e(t,n){var r=this;Object(l.a)(this,e),this.name=t,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(e){r.states[e.name]=new Zr(e.style,e.options&&e.options.params||{})})),Qr(this.states,"true","1"),Qr(this.states,"false","0"),n.transitions.forEach((function(e){r.transitionFactories.push(new Yr(t,e,r.states))})),this.fallbackTransition=new Yr(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object(h.a)(e,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(e,t,n,r){return this.transitionFactories.find((function(i){return i.match(e,t,n,r)}))||null}},{key:"matchStyles",value:function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}]),e}();function Qr(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var $r=new Ir,ei=function(){function e(t,n,r){Object(l.a)(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return Object(h.a)(e,[{key:"register",value:function(e,t){var n=[],r=Tr(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[e]=r}},{key:"_buildPlayer",value:function(e,t,n){var r=e.element,i=Nn(this._driver,this._normalizer,r,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=this._animations[e],s=new Map;if(o?(n=Lr(this._driver,t,o,"ng-enter","ng-leave",{},{},i,$r,a)).forEach((function(e){var t=Vn(s,e.element,{});e.postStyleProps.forEach((function(e){return t[e]=null}))})):(a.push("The requested animation doesn't exist or has already been destroyed"),n=[]),a.length)throw new Error("Unable to create the animation due to the following errors: ".concat(a.join("\n")));s.forEach((function(e,t){Object.keys(e).forEach((function(n){e[n]=r._driver.computeStyle(t,n,"*")}))}));var u=n.map((function(e){var t=s.get(e.element);return r._buildPlayer(e,{},t)})),c=Ln(u);return this._playersById[e]=c,c.onDestroy((function(){return r.destroy(e)})),this.players.push(c),c}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by ".concat(e));return t}},{key:"listen",value:function(e,t,n,r){var i=Un(t,"","","");return Bn(this._getPlayer(e),n,i,r),function(){}}},{key:"command",value:function(e,t,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,r[0]||{});else this.register(e,r[0])}}]),e}(),ti=[],ni={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ri={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ii=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(l.a)(this,e),this.namespaceId=n;var r=t&&t.hasOwnProperty("value"),i=r?t.value:t;if(this.value=ci(i),r){var a=or(t);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}return Object(h.a)(e,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach((function(e){null==n[e]&&(n[e]=t[e])}))}}}]),e}(),ai=new ii("void"),oi=function(){function e(t,n,r){Object(l.a)(this,e),this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,pi(n,this._hostClassName)}return Object(h.a)(e,[{key:"listen",value:function(e,t,n,r){var i,a=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(t,'" is not supported!'));var o=Vn(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};o.push(s);var u=Vn(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(pi(e,"ng-trigger"),pi(e,"ng-trigger-"+t),u[t]=ai),function(){a._engine.afterFlush((function(){var e=o.indexOf(s);e>=0&&o.splice(e,1),a._triggers[t]||delete u[t]}))}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=this._getTrigger(t),o=new ui(this.id,t,e),s=this._engine.statesByElement.get(e);s||(pi(e,"ng-trigger"),pi(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));var u=s[t],c=new ii(n,this.id),l=n&&n.hasOwnProperty("value");!l&&u&&c.absorbOptions(u.options),s[t]=c,u||(u=ai);var h="void"===c.value;if(h||u.value!==c.value){var f=Vn(this._engine.playersByElement,e,[]);f.forEach((function(e){e.namespaceId==r.id&&e.triggerName==t&&e.queued&&e.destroy()}));var d=a.matchTransition(u.value,c.value,e,c.params),p=!1;if(!d){if(!i)return;d=a.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:d,fromState:u,toState:c,player:o,isFallbackTransition:p}),p||(pi(e,"ng-animate-queued"),o.onStart((function(){vi(e,"ng-animate-queued")}))),o.onDone((function(){var t=r.players.indexOf(o);t>=0&&r.players.splice(t,1);var n=r._engine.playersByElement.get(e);if(n){var i=n.indexOf(o);i>=0&&n.splice(i,1)}})),this.players.push(o),f.push(o),o}if(!gi(u.params,c.params)){var v=[],m=a.matchStyles(u.value,u.params,v),g=a.matchStyles(c.value,c.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush((function(){hr(e,m),lr(e,g)}))}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach((function(t,n){delete t[e]})),this._elementListeners.forEach((function(n,r){t._elementListeners.set(r,n.filter((function(t){return t.name!=e})))}))}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach((function(e){return e.destroy()})),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var n=this,r=this._engine.driver.query(e,".ng-trigger",!0);r.forEach((function(e){if(!e.__ng_removed){var r=n._engine.fetchNamespacesByElement(e);r.size?r.forEach((function(n){return n.triggerLeaveAnimation(e,t,!1,!0)})):n.clearElementCache(e)}})),this._engine.afterFlushAnimationsDone((function(){return r.forEach((function(e){return n.clearElementCache(e)}))}))}},{key:"triggerLeaveAnimation",value:function(e,t,n,r){var i=this,a=this._engine.statesByElement.get(e);if(a){var o=[];if(Object.keys(a).forEach((function(t){if(i._triggers[t]){var n=i.trigger(e,t,"void",r);n&&o.push(n)}})),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&Ln(o).onDone((function(){return i._engine.processLeaveNode(e)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,n=this._elementListeners.get(e);if(n){var r=new Set;n.forEach((function(n){var i=n.name;if(!r.has(i)){r.add(i);var a=t._triggers[i].fallbackTransition,o=t._engine.statesByElement.get(e)[i]||ai,s=new ii("void"),u=new ui(t.id,i,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:i,transition:a,fromState:o,toState:s,player:u,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(e,t){var n=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),!this.triggerLeaveAnimation(e,t,!0)){var i=!1;if(r.totalAnimations){var a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else for(var o=e;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{var s=e.__ng_removed;s&&s!==ni||(r.afterFlush((function(){return n.clearElementCache(e)})),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}}},{key:"insertNode",value:function(e,t){pi(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,n=[];return this._queue.forEach((function(r){var i=r.player;if(!i.destroyed){var a=r.element,o=t._elementListeners.get(a);o&&o.forEach((function(t){if(t.name==r.triggerName){var n=Un(a,r.triggerName,r.fromState.value,r.toState.value);n._data=e,Bn(r.player,t.phase,n,t.callback)}})),i.markedForDestroy?t._engine.afterFlush((function(){i.destroy()})):n.push(r)}})),this._queue=[],n.sort((function(e,n){var r=e.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:t._engine.driver.containsElement(e.element,n.element)?1:-1}))}},{key:"destroy",value:function(e){this.players.forEach((function(e){return e.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),!!this._queue.find((function(t){return t.element===e}))||t}}]),e}(),si=function(){function e(t,n,r){Object(l.a)(this,e),this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return Object(h.a)(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach((function(t){t.players.forEach((function(t){t.queued&&e.push(t)}))})),e}},{key:"createNamespace",value:function(e,t){var n=new oi(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}},{key:"_balanceNamespaceList",value:function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}},{key:"registerTrigger",value:function(e,t,n){var r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush((function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);t>=0&&n._namespaceList.splice(t,1)})),this.afterFlushAnimationsDone((function(){return r.destroy(t)}))}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var a=n[r[i]].namespaceId;if(a){var o=this._fetchNamespace(a);o&&t.add(o)}}return t}},{key:"trigger",value:function(e,t,n,r){if(li(t)){var i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}},{key:"insertNode",value:function(e,t,n,r){if(li(t)){var i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),pi(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),vi(e,"ng-animate-disabled"))}},{key:"removeNode",value:function(e,t,n,r){if(li(t)){var i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){var a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,r)}}else this._onRemovalComplete(t,r)}},{key:"markElementAsRemoved",value:function(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,n,r,i){return li(t)?this._fetchNamespace(e).listen(t,n,r,i):function(){}}},{key:"_buildInstruction",value:function(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}},{key:"destroyInnerAnimations",value:function(e){var t=this,n=this.driver.query(e,".ng-trigger",!0);n.forEach((function(e){return t.destroyActiveAnimationsForElement(e)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,".ng-animating",!0)).forEach((function(e){return t.finishActiveQueriedAnimationOnElement(e)}))}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach((function(e){e.queued?e.markedForDestroy=!0:e.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach((function(e){return e.finish()}))}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise((function(t){if(e.players.length)return Ln(e.players).onDone((function(){return t()}));t()}))}},{key:"processLeaveNode",value:function(e){var t=this,n=e.__ng_removed;if(n&&n.setForRemoval){if(e.__ng_removed=ni,n.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach((function(e){t.markElementAsDisabled(e,!1)}))}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(t,n){return e._balanceNamespaceList(t,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++){var i=this.collectedEnterElements[r];pi(i,"ng-star-inserted")}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var a=[];try{n=this._flushAnimations(a,t)}finally{for(var o=0;o<a.length;o++)a[o]()}}else for(var s=0;s<this.collectedLeaveElements.length;s++){var u=this.collectedLeaveElements[s];this.processLeaveNode(u)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(e){return e()})),this._flushFns=[],this._whenQuietFns.length){var c=this._whenQuietFns;this._whenQuietFns=[],n.length?Ln(n).onDone((function(){c.forEach((function(e){return e()}))})):c.forEach((function(e){return e()}))}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(e.join("\n")))}},{key:"_flushAnimations",value:function(e,t){var n=this,r=new Ir,i=[],a=new Map,o=[],u=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach((function(e){h.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),r=0;r<t.length;r++)h.add(t[r])}));var f=this.bodyNode,d=Array.from(this.statesByElement.keys()),p=di(d,this.collectedEnterElements),v=new Map,m=0;p.forEach((function(e,t){var n="ng-enter"+m++;v.set(t,n),e.forEach((function(e){return pi(e,n)}))}));for(var g=[],y=new Set,b=new Set,_=0;_<this.collectedLeaveElements.length;_++){var w=this.collectedLeaveElements[_],x=w.__ng_removed;x&&x.setForRemoval&&(g.push(w),y.add(w),x.hasAnimation?this.driver.query(w,".ng-star-inserted",!0).forEach((function(e){return y.add(e)})):b.add(w))}var k=new Map,S=di(d,Array.from(y));S.forEach((function(e,t){var n="ng-leave"+m++;k.set(t,n),e.forEach((function(e){return pi(e,n)}))})),e.push((function(){p.forEach((function(e,t){var n=v.get(t);e.forEach((function(e){return vi(e,n)}))})),S.forEach((function(e,t){var n=k.get(t);e.forEach((function(e){return vi(e,n)}))})),g.forEach((function(e){n.processLeaveNode(e)}))}));for(var E=[],O=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(t).forEach((function(e){var t=e.player,a=e.element;if(E.push(t),n.collectedEnterElements.length){var s=a.__ng_removed;if(s&&s.setForMove)return void t.destroy()}var h=!f||!n.driver.containsElement(f,a),d=k.get(a),p=v.get(a),m=n._buildInstruction(e,r,p,d,h);if(m.errors&&m.errors.length)O.push(m);else{if(h)return t.onStart((function(){return hr(a,m.fromStyles)})),t.onDestroy((function(){return lr(a,m.toStyles)})),void i.push(t);if(e.isFallbackTransition)return t.onStart((function(){return hr(a,m.fromStyles)})),t.onDestroy((function(){return lr(a,m.toStyles)})),void i.push(t);m.timelines.forEach((function(e){return e.stretchStartingKeyframe=!0})),r.append(a,m.timelines),o.push({instruction:m,player:t,element:a}),m.queriedElements.forEach((function(e){return Vn(u,e,[]).push(t)})),m.preStyleProps.forEach((function(e,t){var n=Object.keys(e);if(n.length){var r=c.get(t);r||c.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))}})),m.postStyleProps.forEach((function(e,t){var n=Object.keys(e),r=l.get(t);r||l.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))}))}}));if(O.length){var C=[];O.forEach((function(e){C.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach((function(e){return C.push("- ".concat(e,"\n"))}))})),E.forEach((function(e){return e.destroy()})),this.reportError(C)}var A=new Map,M=new Map;o.forEach((function(e){var t=e.element;r.has(t)&&(M.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,A))})),i.forEach((function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach((function(e){Vn(A,t,[]).push(e),e.destroy()}))}));var j=g.filter((function(e){return yi(e,c,l)})),P=new Map;fi(P,this.driver,b,l,"*").forEach((function(e){yi(e,c,l)&&j.push(e)}));var R=new Map;p.forEach((function(e,t){fi(R,n.driver,new Set(e),c,"!")})),j.forEach((function(e){var t=P.get(e),n=R.get(e);P.set(e,Object.assign(Object.assign({},t),n))}));var I=[],D=[],F={};o.forEach((function(e){var t=e.element,o=e.player,s=e.instruction;if(r.has(t)){if(h.has(t))return o.onDestroy((function(){return lr(t,s.toStyles)})),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);var u=F;if(M.size>1){for(var c=t,l=[];c=c.parentNode;){var f=M.get(c);if(f){u=f;break}l.push(c)}l.forEach((function(e){return M.set(e,u)}))}var d=n._buildAnimation(o.namespaceId,s,A,a,R,P);if(o.setRealPlayer(d),u===F)I.push(o);else{var p=n.playersByElement.get(u);p&&p.length&&(o.parentPlayer=Ln(p)),i.push(o)}}else hr(t,s.fromStyles),o.onDestroy((function(){return lr(t,s.toStyles)})),D.push(o),h.has(t)&&i.push(o)})),D.forEach((function(e){var t=a.get(e.element);if(t&&t.length){var n=Ln(t);e.setRealPlayer(n)}})),i.forEach((function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()}));for(var L=0;L<g.length;L++){var N=g[L],B=N.__ng_removed;if(vi(N,"ng-leave"),!B||!B.hasAnimation){var H=[];if(u.size){var U=u.get(N);U&&U.length&&H.push.apply(H,Object(s.a)(U));for(var V=this.driver.query(N,".ng-animating",!0),z=0;z<V.length;z++){var W=u.get(V[z]);W&&W.length&&H.push.apply(H,Object(s.a)(W))}}var G=H.filter((function(e){return!e.destroyed}));G.length?mi(this,N,G):this.processLeaveNode(N)}}return g.length=0,I.forEach((function(e){n.players.push(e),e.onDone((function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)})),e.play()})),I}},{key:"elementContainsData",value:function(e,t){var n=!1,r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,n,r,i){var a=[];if(t){var o=this.playersByQueriedElement.get(e);o&&(a=o)}else{var s=this.playersByElement.get(e);if(s){var u=!i||"void"==i;s.forEach((function(e){e.queued||(u||e.triggerName==r)&&a.push(e)}))}}return(n||r)&&(a=a.filter((function(e){return!(n&&n!=e.namespaceId||r&&r!=e.triggerName)}))),a}},{key:"_beforeAnimationBuild",value:function(e,t,n){var r,i=this,a=t.element,s=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName,c=Object(o.a)(t.timelines);try{var l=function(){var e=r.value.element,o=e!==a,c=Vn(n,e,[]);i._getPreviousPlayers(e,o,s,u,t.toState).forEach((function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),c.push(e)}))};for(c.s();!(r=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}hr(a,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,n,r,i,a){var o=this,s=t.triggerName,u=t.element,c=[],l=new Set,h=new Set,f=t.timelines.map((function(t){var f=t.element;l.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new In(t.duration,t.delay);var p,v,m=f!==u,g=(p=(n.get(f)||ti).map((function(e){return e.getRealPlayer()})),v=[],function e(t,n){for(var r=0;r<t.length;r++){var i=t[r];i instanceof Dn?e(i.players,n):n.push(i)}}(p,v),v).filter((function(e){return!!e.element&&e.element===f})),y=i.get(f),b=a.get(f),_=Nn(o.driver,o._normalizer,f,t.keyframes,y,b),w=o._buildPlayer(t,_,g);if(t.subTimeline&&r&&h.add(f),m){var x=new ui(e,s,f);x.setRealPlayer(w),c.push(x)}return w}));c.forEach((function(e){Vn(o.playersByQueriedElement,e.element,[]).push(e),e.onDone((function(){return function(e,t,n){var r;if(e instanceof Map){if(r=e.get(t)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){var a=r.indexOf(n);r.splice(a,1)}0==r.length&&delete e[t]}return r}(o.playersByQueriedElement,e.element,e)}))})),l.forEach((function(e){return pi(e,"ng-animating")}));var d=Ln(f);return d.onDestroy((function(){l.forEach((function(e){return vi(e,"ng-animating")})),lr(u,t.toStyles)})),h.forEach((function(e){Vn(r,e,[]).push(d)})),d}},{key:"_buildPlayer",value:function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new In(e.duration,e.delay)}}]),e}(),ui=function(){function e(t,n,r){Object(l.a)(this,e),this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new In,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return Object(h.a)(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach((function(n){t._queuedCallbacks[n].forEach((function(t){return Bn(e,n,void 0,t)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart((function(){return n.triggerCallback("start")})),e.onDone((function(){return t.finish()})),e.onDestroy((function(){return t.destroy()}))}},{key:"_queueEvent",value:function(e,t){Vn(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function ci(e){return null!=e?e:null}function li(e){return e&&1===e.nodeType}function hi(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function fi(e,t,n,r,i){var a=[];n.forEach((function(e){return a.push(hi(e))}));var o=[];r.forEach((function(n,r){var a={};n.forEach((function(e){var n=a[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r.__ng_removed=ri,o.push(r))})),e.set(r,a)}));var s=0;return n.forEach((function(e){return hi(e,a[s++])})),o}function di(e,t){var n=new Map;if(e.forEach((function(e){return n.set(e,[])})),0==t.length)return n;var r=new Set(t),i=new Map;return t.forEach((function(e){var t=function e(t){if(!t)return 1;var a=i.get(t);if(a)return a;var o=t.parentNode;return a=n.has(o)?o:r.has(o)?1:e(o),i.set(t,a),a}(e);1!==t&&n.get(t).push(e)})),n}function pi(e,t){if(e.classList)e.classList.add(t);else{var n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function vi(e,t){if(e.classList)e.classList.remove(t);else{var n=e.$$classes;n&&delete n[t]}}function mi(e,t,n){Ln(n).onDone((function(){return e.processLeaveNode(t)}))}function gi(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(!t.hasOwnProperty(a)||e[a]!==t[a])return!1}return!0}function yi(e,t,n){var r=n.get(e);if(!r)return!1;var i=t.get(e);return i?r.forEach((function(e){return i.add(e)})):t.set(e,r),n.delete(e),!0}var bi=function(){function e(t,n,r){var i=this;Object(l.a)(this,e),this.bodyNode=t,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new si(t,n,r),this._timelineEngine=new ei(t,n,r),this._transitionEngine.onRemovalComplete=function(e,t){return i.onRemovalComplete(e,t)}}return Object(h.a)(e,[{key:"registerTrigger",value:function(e,t,n,r,i){var a=e+"-"+r,o=this._triggerCache[a];if(!o){var s=[],u=Tr(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));o=function(e,t){return new Jr(e,t)}(r,u),this._triggerCache[a]=o}this._transitionEngine.registerTrigger(t,r,o)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}},{key:"onRemove",value:function(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,t,n,r){if("@"==n.charAt(0)){var i=zn(n),a=Object(Vt.a)(i,2);this._timelineEngine.command(a[0],t,a[1],r)}else this._transitionEngine.trigger(e,t,n,r)}},{key:"listen",value:function(e,t,n,r,i){if("@"==n.charAt(0)){var a=zn(n),o=Object(Vt.a)(a,2);return this._timelineEngine.listen(o[0],t,o[1],i)}return this._transitionEngine.listen(e,t,n,r,i)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),e}();function _i(e,t){var n=null,r=null;return Array.isArray(t)&&t.length?(n=xi(t[0]),t.length>1&&(r=xi(t[t.length-1]))):t&&(n=xi(t)),n||r?new wi(e,n,r):null}var wi=function(){var e=function(){function e(t,n,r){Object(l.a)(this,e),this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;var i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}return Object(h.a)(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&lr(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(lr(this._element,this._initialStyles),this._endStyles&&(lr(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(hr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hr(this._element,this._endStyles),this._endStyles=null),lr(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function xi(e){for(var t=null,n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];ki(i)&&((t=t||{})[i]=e[i])}return t}function ki(e){return"display"===e||"position"===e}var Si=function(){function e(t,n,r,i,a,o,s){var u=this;Object(l.a)(this,e),this._element=t,this._name=n,this._duration=r,this._delay=i,this._easing=a,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return u._handleCallback(e)}}return Object(h.a)(e,[{key:"apply",value:function(){var e,t,n;e=this._element,t="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=Mi(e,"").trim()).length&&(function(e,t){for(var n=0;n<e.length;n++)","===e.charAt(n)&&0}(n),t="".concat(n,", ").concat(t)),Ai(e,"",t),Ci(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){Ei(this._element,this._name,"paused")}},{key:"resume",value:function(){Ei(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=Oi(this._element,this._name);this._position=e*this._duration,Ai(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),Ci(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var e,t,n,r;this._destroyed||(this._destroyed=!0,this.finish(),t=this._name,(r=Ti(n=Mi(e=this._element,"").split(","),t))>=0&&(n.splice(r,1),Ai(e,"",n.join(","))))}}]),e}();function Ei(e,t,n){Ai(e,"PlayState",n,Oi(e,t))}function Oi(e,t){var n=Mi(e,"");return n.indexOf(",")>0?Ti(n.split(","),t):Ti([n],t)}function Ti(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function Ci(e,t,n){n?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function Ai(e,t,n,r){var i="animation"+t;if(null!=r){var a=e.style[i];if(a.length){var o=a.split(",");o[r]=n,n=o.join(",")}}e.style[i]=n}function Mi(e,t){return e.style["animation"+t]}var ji=function(){function e(t,n,r,i,a,o,s,u){Object(l.a)(this,e),this.element=t,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+a,this._buildStyler()}return Object(h.a)(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new Si(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return e.finish()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(r){"offset"!=r&&(t[r]=n?e._finalStyles[r]:xr(e.element,r))}))}this.currentSnapshot=t}}]),e}(),Pi=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this)).element=e,i._startingStyles={},i.__initialized=!1,i._styles=er(r),i}return Object(h.a)(n,[{key:"init",value:function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(t){e._startingStyles[t]=e.element.style[t]})),Object(Be.a)(Object(He.a)(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(t){return e.element.style.setProperty(t,e._styles[t])})),Object(Be.a)(Object(He.a)(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)})),this._startingStyles=null,Object(Be.a)(Object(He.a)(n.prototype),"destroy",this).call(this))}}]),n}(In),Ri=function(){function e(){Object(l.a)(this,e),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return Object(h.a)(e,[{key:"validateStyleProperty",value:function(e){return Zn(e)}},{key:"matchesElement",value:function(e,t){return Jn(e,t)}},{key:"containsElement",value:function(e,t){return Qn(e,t)}},{key:"query",value:function(e,t,n){return $n(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,n){n=n.map((function(e){return er(e)}));var r="@keyframes ".concat(t," {\n"),i="";n.forEach((function(e){i=" ";var t=parseFloat(e.offset);r+="".concat(i).concat(100*t,"% {\n"),i+=" ",Object.keys(e).forEach((function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(t,": ").concat(n,";\n"))}})),r+="".concat(i,"}\n")})),r+="}\n";var a=document.createElement("style");return a.innerHTML=r,a}},{key:"animate",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;o&&this._notifyFaultyScrubber();var s=a.filter((function(e){return e instanceof ji})),u={};br(n,r)&&s.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return u[e]=t[e]}))}));var c=Ii(t=_r(e,t,u));if(0==n)return new Pi(e,c);var l="".concat("gen_css_kf_").concat(this._count++),h=this.buildKeyframeElement(e,l,t);document.querySelector("head").appendChild(h);var f=_i(e,t),d=new ji(e,t,l,n,r,i,c,f);return d.onDestroy((function(){return Di(h)})),d}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),e}();function Ii(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach((function(e){Object.keys(e).forEach((function(n){"offset"!=n&&"easing"!=n&&(t[n]=e[n])}))})),t}function Di(e){e.parentNode.removeChild(e)}var Fi=function(){function e(t,n,r,i){Object(l.a)(this,e),this.element=t,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return Object(h.a)(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return e._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,n){return e.animate(t,n)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:xr(e.element,n))})),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}(),Li=function(){function e(){Object(l.a)(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ni().toString()),this._cssKeyframesDriver=new Ri}return Object(h.a)(e,[{key:"validateStyleProperty",value:function(e){return Zn(e)}},{key:"matchesElement",value:function(e,t){return Jn(e,t)}},{key:"containsElement",value:function(e,t){return Qn(e,t)}},{key:"query",value:function(e,t,n){return $n(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0,s=!o&&!this._isNativeImpl;if(s)return this._cssKeyframesDriver.animate(e,t,n,r,i,a);var u=0==r?"both":"forwards",c={duration:n,delay:r,fill:u};i&&(c.easing=i);var l={},h=a.filter((function(e){return e instanceof Fi}));br(n,r)&&h.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return l[e]=t[e]}))}));var f=_i(e,t=_r(e,t=t.map((function(e){return sr(e,!1)})),l));return new Fi(e,t,c,f)}}]),e}();function Ni(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var Bi=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this))._nextAnimationId=0,a._renderer=e.createRenderer(i.body,{id:"0",encapsulation:r.Q.None,styles:[],data:{animation:[]}}),a}return Object(h.a)(n,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?On(e):e;return Vi(this._renderer,null,t,"register",[n]),new Hi(t,this._renderer)}}]),n}(xn);return e.\u0275fac=function(t){return new(t||e)(r.Tb(r.F),r.Tb(f.d))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),Hi=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this))._id=e,i._renderer=r,i}return Object(h.a)(n,[{key:"create",value:function(e,t){return new Ui(this._id,e,t||{},this._renderer)}}]),n}(kn),Ui=function(){function e(t,n,r,i){Object(l.a)(this,e),this.id=t,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return Object(h.a)(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vi(this._renderer,this.element,this.id,e,n)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){return 0}}]),e}();function Vi(e,t,n,r,i){return e.setProperty(t,"@@".concat(n,":").concat(r),i)}var zi=function(){var e=function(){function e(t,n,r){Object(l.a)(this,e),this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return Object(h.a)(e,[{key:"createRenderer",value:function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var i=this._rendererCache.get(r);return i||(i=new Wi("",r,this.engine),this._rendererCache.set(r,i)),i}var a=t.id,o=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(o,e),t.data.animation.forEach((function t(r){Array.isArray(r)?r.forEach(t):n.engine.registerTrigger(a,o,e,r.name,r)})),new Gi(this,o,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then((function(){e._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(e,t,n){var r=this;e>=0&&e<this._microtaskId?this._zone.run((function(){return t(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){r._zone.run((function(){r._animationCallbacksBuffer.forEach((function(e){var t=Object(Vt.a)(e,2);(0,t[0])(t[1])})),r._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([t,n]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(r.F),r.Tb(bi),r.Tb(r.z))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),Wi=function(){function e(t,n,r){Object(l.a)(this,e),this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return Object(h.a)(e,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}},{key:"removeChild",value:function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}}]),e}(),Gi=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,r,i,a)).factory=e,o.namespaceId=r,o}return Object(h.a)(n,[{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){var r,i,a=this;if("@"==t.charAt(0)){var o=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),s=t.substr(1),u="";if("@"!=s.charAt(0)){var c=(i=(r=s).indexOf("."),[r.substring(0,i),r.substr(i+1)]),l=Object(Vt.a)(c,2);s=l[0],u=l[1]}return this.engine.listen(this.namespaceId,o,s,u,(function(e){a.factory.scheduleListenerCallback(e._data||-1,n,e)}))}return this.delegate.listen(e,t,n)}}]),n}(Wi),Ki=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){return Object(l.a)(this,n),t.call(this,e.body,r,i)}return n}(bi);return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d),r.Tb(nr),r.Tb(Wr))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),qi=new r.q("AnimationModuleType"),Xi=[{provide:xn,useClass:Bi},{provide:Wr,useFactory:function(){return new Gr}},{provide:bi,useClass:Ki},{provide:r.F,useFactory:function(e,t,n){return new zi(e,t,n)},deps:[on,bi,r.z]}],Yi=[{provide:nr,useFactory:function(){return"function"==typeof Ni()?new Li:new Ri}},{provide:qi,useValue:"BrowserAnimations"}].concat(Xi),Zi=([{provide:nr,useClass:tr},{provide:qi,useValue:"NoopAnimations"}].concat(Xi),function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:Yi,imports:[wn]}),e}());function Ji(e,t){if(1&e&&r.Lb(0,"mat-pseudo-checkbox",3),2&e){var n=r.ac();r.gc("state",n.selected?"checked":"unchecked")("disabled",n.disabled)}}var Qi=["*"],$i=new r.O("10.2.7"),ea=new r.q("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),ta=function(){var e=function(){function e(t,n,r){Object(l.a)(this,e),this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=n,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return Object(h.a)(e,[{key:"_getDocument",value:function(){var e=this._document||document;return"object"==typeof e&&e?e:null}},{key:"_getWindow",value:function(){var e=this._getDocument(),t=(null==e?void 0:e.defaultView)||window;return"object"==typeof t&&t?t:null}},{key:"_checksAreEnabled",value:function(){return Object(r.V)()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var e=this._getWindow();return e&&(e.__karma__||e.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){var e=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),t=this._getDocument();e&&t&&!t.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){var e=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,t=this._getDocument();if(!e&&t&&t.body&&"function"==typeof getComputedStyle){var n=t.createElement("div");n.classList.add("mat-theme-loaded-marker"),t.body.appendChild(n);var r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.body.removeChild(n)}}},{key:"_checkCdkVersionMatch",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&$i.full!==Dt.full&&console.warn("The Angular Material version ("+$i.full+") does not match the Angular CDK version ("+Dt.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),e}();return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)(r.Tb(Mt),r.Tb(ea,8),r.Tb(f.d,8))},imports:[[It],It]}),e}();function na(e){return function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._disabled=!1,e}return Object(h.a)(n,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=tt(e)}}]),n}(e)}function ra(e,t){return function(e){Object(u.a)(r,e);var n=Object(c.a)(r);function r(){var e;Object(l.a)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).defaultColor=t,e.color=t,e}return Object(h.a)(r,[{key:"color",get:function(){return this._color},set:function(e){var t=e||this.defaultColor;t!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),t&&this._elementRef.nativeElement.classList.add("mat-".concat(t)),this._color=t)}}]),r}(e)}function ia(e){return function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._disableRipple=!1,e}return Object(h.a)(n,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(e){this._disableRipple=tt(e)}}]),n}(e)}function aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function(e){Object(u.a)(r,e);var n=Object(c.a)(r);function r(){var e;Object(l.a)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a)))._tabIndex=t,e.defaultTabIndex=t,e}return Object(h.a)(r,[{key:"tabIndex",get:function(){return this.disabled?-1:this._tabIndex},set:function(e){this._tabIndex=null!=e?nt(e):this.defaultTabIndex}}]),r}(e);return n}function oa(e){return function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).errorState=!1,e.stateChanges=new qe.a,e}return Object(h.a)(n,[{key:"updateErrorState",value:function(){var e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}]),n}(e)}var sa=function(){var e=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"isErrorState",value:function(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Gb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ua=function(){function e(t,n,r){Object(l.a)(this,e),this._renderer=t,this.element=n,this.config=r,this.state=3}return Object(h.a)(e,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),e}(),ca={enterDuration:450,exitDuration:400},la=Ge({passive:!0}),ha=["mousedown","touchstart"],fa=["mouseup","mouseleave","touchend","touchcancel"],da=function(){function e(t,n,r,i){Object(l.a)(this,e),this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ot(r))}return Object(h.a)(e,[{key:"fadeInRipple",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},ca),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);var o=r.radius||va(e,t,i),s=e-i.left,u=t-i.top,c=a.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left="".concat(s-o,"px"),l.style.top="".concat(u-o,"px"),l.style.height="".concat(2*o,"px"),l.style.width="".concat(2*o,"px"),null!=r.color&&(l.style.backgroundColor=r.color),l.style.transitionDuration="".concat(c,"ms"),this._containerElement.appendChild(l),pa(l),l.style.transform="scale(1)";var h=new ua(this,l,r);return h.state=0,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone((function(){var e=h===n._mostRecentTransientRipple;h.state=1,r.persistent||e&&n._isPointerDown||h.fadeOut()}),c),h}},{key:"fadeOutRipple",value:function(e){var t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),t){var n=e.element,r=Object.assign(Object.assign({},ca),e.config.animation);n.style.transitionDuration="".concat(r.exitDuration,"ms"),n.style.opacity="0",e.state=2,this._runTimeoutOutsideZone((function(){e.state=3,n.parentNode.removeChild(n)}),r.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach((function(e){return e.fadeOut()}))}},{key:"setupTriggerEvents",value:function(e){var t=ot(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(ha))}},{key:"handleEvent",value:function(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(fa),this._pointerUpEventsRegistered=!0)}},{key:"_onMousedown",value:function(e){var t=Et(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}},{key:"_onTouchStart",value:function(e){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;for(var t=e.changedTouches,n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}},{key:"_onPointerUp",value:function(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach((function(e){!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()})))}},{key:"_runTimeoutOutsideZone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular((function(){return setTimeout(e,t)}))}},{key:"_registerEvents",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){e.forEach((function(e){t._triggerElement.addEventListener(e,t,la)}))}))}},{key:"_removeTriggerEvents",value:function(){var e=this;this._triggerElement&&(ha.forEach((function(t){e._triggerElement.removeEventListener(t,e,la)})),this._pointerUpEventsRegistered&&fa.forEach((function(t){e._triggerElement.removeEventListener(t,e,la)})))}}]),e}();function pa(e){window.getComputedStyle(e).getPropertyValue("opacity")}function va(e,t,n){var r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}var ma=new r.q("mat-ripple-global-options"),ga=function(){var e=function(){function e(t,n,r,i,a){Object(l.a)(this,e),this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new da(this,n,t,r)}return Object(h.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}},{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(r.z),r.Kb(ze),r.Kb(ma,8),r.Kb(qi,8))},e.\u0275dir=r.Fb({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&r.Cb("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),e}(),ya=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ta,We],ta]}),e}(),ba=function(){var e=function e(t){Object(l.a)(this,e),this._animationMode=t,this.state="unchecked",this.disabled=!1};return e.\u0275fac=function(t){return new(t||e)(r.Kb(qi,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,t){2&e&&r.Cb("mat-pseudo-checkbox-indeterminate","indeterminate"===t.state)("mat-pseudo-checkbox-checked","checked"===t.state)("mat-pseudo-checkbox-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),e}(),_a=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)}}),e}(),wa=na((function e(){Object(l.a)(this,e)})),xa=0,ka=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments))._labelId="mat-optgroup-label-".concat(xa++),e}return n}(wa);return e.\u0275fac=function(t){return Sa(t||e)},e.\u0275dir=r.Fb({type:e,inputs:{label:"label"},features:[r.wb]}),e}(),Sa=r.Rb(ka),Ea=new r.q("MatOptgroup"),Oa=0,Ta=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(l.a)(this,e),this.source=t,this.isUserInput=n},Ca=new r.q("MAT_OPTION_PARENT_COMPONENT"),Aa=function(){var e=function(){function e(t,n,i,a){Object(l.a)(this,e),this._element=t,this._changeDetectorRef=n,this._parent=i,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-".concat(Oa++),this.onSelectionChange=new r.n,this._stateChanges=new qe.a}return Object(h.a)(e,[{key:"multiple",get:function(){return this._parent&&this._parent.multiple}},{key:"selected",get:function(){return this._selected}},{key:"disabled",get:function(){return this.group&&this.group.disabled||this._disabled},set:function(e){this._disabled=tt(e)}},{key:"disableRipple",get:function(){return this._parent&&this._parent.disableRipple}},{key:"active",get:function(){return this._active}},{key:"viewValue",get:function(){return(this._getHostElement().textContent||"").trim()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}},{key:"focus",value:function(e,t){var n=this._getHostElement();"function"==typeof n.focus&&n.focus(t)}},{key:"setActiveStyles",value:function(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}},{key:"setInactiveStyles",value:function(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}},{key:"getLabel",value:function(){return this.viewValue}},{key:"_handleKeydown",value:function(e){13!==e.keyCode&&32!==e.keyCode||Ze(e)||(this._selectViaInteraction(),e.preventDefault())}},{key:"_selectViaInteraction",value:function(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}},{key:"_getAriaSelected",value:function(){return this.selected||!this.multiple&&null}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._element.nativeElement}},{key:"ngAfterViewChecked",value:function(){if(this._selected){var e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_emitSelectionChangeEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onSelectionChange.emit(new Ta(this,e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(r.h),r.Kb(void 0),r.Kb(ka))},e.\u0275dir=r.Fb({type:e,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),e}(),Ma=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){return Object(l.a)(this,n),t.call(this,e,r,i,a)}return n}(Aa);return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(r.h),r.Kb(Ca,8),r.Kb(Ea,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,t){1&e&&r.Wb("click",(function(){return t._selectViaInteraction()}))("keydown",(function(e){return t._handleKeydown(e)})),2&e&&(r.Sb("id",t.id),r.Ab("tabindex",t._getTabIndex())("aria-selected",t._getAriaSelected())("aria-disabled",t.disabled.toString()),r.Cb("mat-selected",t.selected)("mat-option-multiple",t.multiple)("mat-active",t.active)("mat-option-disabled",t.disabled))},exportAs:["matOption"],features:[r.wb],ngContentSelectors:Qi,decls:4,vars:3,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"]],template:function(e,t){1&e&&(r.fc(),r.vc(0,Ji,1,2,"mat-pseudo-checkbox",0),r.Pb(1,"span",1),r.ec(2),r.Ob(),r.Lb(3,"div",2)),2&e&&(r.gc("ngIf",t.multiple),r.zb(3),r.gc("matRippleTrigger",t._getHostElement())("matRippleDisabled",t.disabled||t.disableRipple))},directives:[f.l,ga,ba],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.cdk-high-contrast-active .mat-option .mat-option-ripple{opacity:.5}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),e}();function ja(e,t,n){if(n.length){for(var r=t.toArray(),i=n.toArray(),a=0,o=0;o<e+1;o++)r[o].group&&r[o].group===i[a]&&a++;return a}return 0}var Pa=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ya,f.c,_a]]}),e}(),Ra=new r.q("mat-label-global-options"),Ia=["mat-button",""],Da=["*"],Fa=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],La=ra(na(ia((function e(t){Object(l.a)(this,e),this._elementRef=t})))),Na=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;Object(l.a)(this,n),(a=t.call(this,e))._focusMonitor=r,a._animationMode=i,a.isRoundButton=a._hasHostAttributes("mat-fab","mat-mini-fab"),a.isIconButton=a._hasHostAttributes("mat-icon-button");var s,u=Object(o.a)(Fa);try{for(u.s();!(s=u.n()).done;){var c=s.value;a._hasHostAttributes(c)&&a._getHostElement().classList.add(c)}}catch(h){u.e(h)}finally{u.f()}return e.nativeElement.classList.add("mat-button-base"),a.isRoundButton&&(a.color="accent"),a}return Object(h.a)(n,[{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),e,t)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e._getHostElement().hasAttribute(t)}))}}]),n}(La);return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(Ct),r.Kb(qi,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){var n;1&e&&r.Ac(ga,!0),2&e&&r.kc(n=r.Xb())&&(t.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,t){2&e&&(r.Ab("disabled",t.disabled||null),r.Cb("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-button-disabled",t.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.wb],attrs:Ia,ngContentSelectors:Da,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(r.fc(),r.Pb(0,"span",0),r.ec(1),r.Ob(),r.Lb(2,"span",1),r.Lb(3,"span",2)),2&e&&(r.zb(2),r.Cb("mat-button-ripple-round",t.isRoundButton||t.isIconButton),r.gc("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[ga],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),e}(),Ba=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){return Object(l.a)(this,n),t.call(this,r,e,i)}return Object(h.a)(n,[{key:"_haltDisabledEvents",value:function(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}}]),n}(Na);return e.\u0275fac=function(t){return new(t||e)(r.Kb(Ct),r.Kb(r.l),r.Kb(qi,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,t){1&e&&r.Wb("click",(function(e){return t._haltDisabledEvents(e)})),2&e&&(r.Ab("tabindex",t.disabled?-1:t.tabIndex||0)("disabled",t.disabled||null)("aria-disabled",t.disabled.toString()),r.Cb("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-button-disabled",t.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[r.wb],attrs:Ia,ngContentSelectors:Da,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(r.fc(),r.Pb(0,"span",0),r.ec(1),r.Ob(),r.Lb(2,"span",1),r.Lb(3,"span",2)),2&e&&(r.zb(2),r.Cb("mat-button-ripple-round",t.isRoundButton||t.isIconButton),r.gc("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[ga],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),e}(),Ha=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ya,ta],ta]}),e}(),Ua=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(l.a)(this,e),this._multiple=n,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new qe.a,r&&r.length&&(n?r.forEach((function(e){return t._markSelected(e)})):this._markSelected(r[0]),this._selectedToEmit.length=0)}return Object(h.a)(e,[{key:"selected",get:function(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}},{key:"select",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._verifyValueAssignment(n),n.forEach((function(t){return e._markSelected(t)})),this._emitChangeEvent()}},{key:"deselect",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._verifyValueAssignment(n),n.forEach((function(t){return e._unmarkSelected(t)})),this._emitChangeEvent()}},{key:"toggle",value:function(e){this.isSelected(e)?this.deselect(e):this.select(e)}},{key:"clear",value:function(){this._unmarkAll(),this._emitChangeEvent()}},{key:"isSelected",value:function(e){return this._selection.has(e)}},{key:"isEmpty",value:function(){return 0===this._selection.size}},{key:"hasValue",value:function(){return!this.isEmpty()}},{key:"sort",value:function(e){this._multiple&&this.selected&&this._selected.sort(e)}},{key:"isMultipleSelection",value:function(){return this._multiple}},{key:"_emitChangeEvent",value:function(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}},{key:"_markSelected",value:function(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}},{key:"_unmarkSelected",value:function(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}},{key:"_unmarkAll",value:function(){var e=this;this.isEmpty()||this._selection.forEach((function(t){return e._unmarkSelected(t)}))}},{key:"_verifyValueAssignment",value:function(e){}}]),e}(),Va=["button"],za=["*"],Wa=new r.q("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Ga=new r.q("MatButtonToggleGroup"),Ka={provide:_,useExisting:Object(r.T)((function(){return Ya})),multi:!0},qa=0,Xa=function e(t,n){Object(l.a)(this,e),this.source=t,this.value=n},Ya=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-".concat(qa++),this.valueChange=new r.n,this.change=new r.n,this.appearance=n&&n.appearance?n.appearance:"standard"}return Object(h.a)(e,[{key:"name",get:function(){return this._name},set:function(e){var t=this;this._name=e,this._buttonToggles&&this._buttonToggles.forEach((function(e){e.name=t._name,e._markForCheck()}))}},{key:"vertical",get:function(){return this._vertical},set:function(e){this._vertical=tt(e)}},{key:"value",get:function(){var e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map((function(e){return e.value})):e[0]?e[0].value:void 0},set:function(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(e){this._multiple=tt(e)}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=tt(e),this._buttonToggles&&this._buttonToggles.forEach((function(e){return e._markForCheck()}))}},{key:"ngOnInit",value:function(){this._selectionModel=new Ua(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var e;(e=this._selectionModel).select.apply(e,Object(s.a)(this._buttonToggles.filter((function(e){return e.checked}))))}},{key:"writeValue",value:function(e){this.value=e,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(e){this._controlValueAccessorChangeFn=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"_emitChangeEvent",value:function(){var e=this.selected,t=Array.isArray(e)?e[e.length-1]:e,n=new Xa(t,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}},{key:"_syncButtonToggle",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.multiple||!this.selected||e.checked||(this.selected.checked=!1),this._selectionModel?t?this._selectionModel.select(e):this._selectionModel.deselect(e):i=!0,i?Promise.resolve().then((function(){return n._updateModelValue(r)})):this._updateModelValue(r)}},{key:"_isSelected",value:function(e){return this._selectionModel&&this._selectionModel.isSelected(e)}},{key:"_isPrechecked",value:function(e){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some((function(t){return null!=e.value&&t===e.value})):e.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(e){var t=this;this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach((function(e){return t._selectValue(e)}))):(this._clearSelection(),this._selectValue(e)))}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach((function(e){return e.checked=!1}))}},{key:"_selectValue",value:function(e){var t=this._buttonToggles.find((function(t){return null!=t.value&&t.value===e}));t&&(t.checked=!0,this._selectionModel.select(t))}},{key:"_updateModelValue",value:function(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.h),r.Kb(Wa,8))},e.\u0275dir=r.Fb({type:e,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,t,n){var i;1&e&&r.Db(n,Ja,!0),2&e&&r.kc(i=r.Xb())&&(t._buttonToggles=i)},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,t){2&e&&(r.Ab("aria-disabled",t.disabled),r.Cb("mat-button-toggle-vertical",t.vertical)("mat-button-toggle-group-appearance-standard","standard"===t.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[r.yb([Ka,{provide:Ga,useExisting:e}])]}),e}(),Za=ia((function e(){Object(l.a)(this,e)})),Ja=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,a,o,s,u){var c;Object(l.a)(this,n),(c=t.call(this))._changeDetectorRef=i,c._elementRef=a,c._focusMonitor=o,c._isSingleSelector=!1,c._checked=!1,c.ariaLabelledby=null,c._disabled=!1,c.change=new r.n;var h=Number(s);return c.tabIndex=h||0===h?h:null,c.buttonToggleGroup=e,c.appearance=u&&u.appearance?u.appearance:"standard",c}return Object(h.a)(n,[{key:"buttonId",get:function(){return"".concat(this.id,"-button")}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(e){this._appearance=e}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(e){var t=tt(e);t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(e){this._disabled=tt(e)}},{key:"ngOnInit",value:function(){var e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-".concat(qa++),this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}},{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(e){this._buttonElement.nativeElement.focus(e)}},{key:"_onButtonClick",value:function(){var e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new Xa(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),n}(Za);return e.\u0275fac=function(t){return new(t||e)(r.Kb(Ga,8),r.Kb(r.h),r.Kb(r.l),r.Kb(Ct),r.Ub("tabindex"),r.Kb(Wa,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-button-toggle"]],viewQuery:function(e,t){var n;1&e&&r.Ac(Va,!0),2&e&&r.kc(n=r.Xb())&&(t._buttonElement=n.first)},hostAttrs:[1,"mat-button-toggle"],hostVars:11,hostBindings:function(e,t){1&e&&r.Wb("focus",(function(){return t.focus()})),2&e&&(r.Ab("tabindex",-1)("id",t.id)("name",null),r.Cb("mat-button-toggle-standalone",!t.buttonToggleGroup)("mat-button-toggle-checked",t.checked)("mat-button-toggle-disabled",t.disabled)("mat-button-toggle-appearance-standard","standard"===t.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[r.wb],ngContentSelectors:za,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,t){if(1&e&&(r.fc(),r.Pb(0,"button",0,1),r.Wb("click",(function(){return t._onButtonClick()})),r.Pb(2,"span",2),r.ec(3),r.Ob(),r.Ob(),r.Lb(4,"span",3),r.Lb(5,"span",4)),2&e){var n=r.lc(1);r.gc("id",t.buttonId)("disabled",t.disabled||null),r.Ab("tabindex",t.disabled?-1:t.tabIndex)("aria-pressed",t.checked)("name",t.name||null)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),r.zb(5),r.gc("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)}},directives:[ga],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),e}(),Qa=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ta,ya],ta]}),e}(),$a=["input"],eo=function(){return{enterDuration:150}},to=["*"],no=new r.q("mat-checkbox-default-options",{providedIn:"root",factory:function(){return{color:"accent",clickAction:"check-indeterminate"}}}),ro=new r.q("mat-checkbox-click-action"),io=0,ao={provide:_,useExisting:Object(r.T)((function(){return uo})),multi:!0},oo=function e(){Object(l.a)(this,e)},so=aa(ra(ia(na((function e(t){Object(l.a)(this,e),this._elementRef=t}))))),uo=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,a,o,s,u,c,h){var f;return Object(l.a)(this,n),(f=t.call(this,e))._changeDetectorRef=i,f._focusMonitor=a,f._ngZone=o,f._clickAction=u,f._animationMode=c,f._options=h,f.ariaLabel="",f.ariaLabelledby=null,f._uniqueId="mat-checkbox-".concat(++io),f.id=f._uniqueId,f.labelPosition="after",f.name=null,f.change=new r.n,f.indeterminateChange=new r.n,f._onTouched=function(){},f._currentAnimationClass="",f._currentCheckState=0,f._controlValueAccessorChangeFn=function(){},f._checked=!1,f._disabled=!1,f._indeterminate=!1,f._options=f._options||{},f._options.color&&(f.color=f.defaultColor=f._options.color),f.tabIndex=parseInt(s)||0,f._clickAction=f._clickAction||f._options.clickAction,f}return Object(h.a)(n,[{key:"inputId",get:function(){return"".concat(this.id||this._uniqueId,"-input")}},{key:"required",get:function(){return this._required},set:function(e){this._required=tt(e)}},{key:"ngAfterViewInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe((function(t){t||Promise.resolve().then((function(){e._onTouched(),e._changeDetectorRef.markForCheck()}))})),this._syncIndeterminate(this._indeterminate)}},{key:"ngAfterViewChecked",value:function(){}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"checked",get:function(){return this._checked},set:function(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled},set:function(e){var t=tt(e);t!==this.disabled&&(this._disabled=t,this._changeDetectorRef.markForCheck())}},{key:"indeterminate",get:function(){return this._indeterminate},set:function(e){var t=e!=this._indeterminate;this._indeterminate=tt(e),t&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}},{key:"writeValue",value:function(e){this.checked=!!e}},{key:"registerOnChange",value:function(e){this._controlValueAccessorChangeFn=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"_getAriaChecked",value:function(){return this.checked?"true":this.indeterminate?"mixed":"false"}},{key:"_transitionCheckState",value:function(e){var t=this._currentCheckState,n=this._elementRef.nativeElement;if(t!==e&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);var r=this._currentAnimationClass;this._ngZone.runOutsideAngular((function(){setTimeout((function(){n.classList.remove(r)}),1e3)}))}}},{key:"_emitChangeEvent",value:function(){var e=new oo;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e)}},{key:"toggle",value:function(){this.checked=!this.checked}},{key:"_onInputClick",value:function(e){var t=this;e.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then((function(){t._indeterminate=!1,t.indeterminateChange.emit(t._indeterminate)})),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keyboard",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._inputElement,e,t)}},{key:"_onInteractionEvent",value:function(e){e.stopPropagation()}},{key:"_getAnimationClassForCheckStateTransition",value:function(e,t){if("NoopAnimations"===this._animationMode)return"";var n="";switch(e){case 0:if(1===t)n="unchecked-checked";else{if(3!=t)return"";n="unchecked-indeterminate"}break;case 2:n=1===t?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===t?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===t?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-".concat(n)}},{key:"_syncIndeterminate",value:function(e){var t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}}]),n}(so);return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(r.h),r.Kb(Ct),r.Kb(r.z),r.Ub("tabindex"),r.Kb(ro,8),r.Kb(qi,8),r.Kb(no,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-checkbox"]],viewQuery:function(e,t){var n;1&e&&(r.Ac($a,!0),r.Ac(ga,!0)),2&e&&(r.kc(n=r.Xb())&&(t._inputElement=n.first),r.kc(n=r.Xb())&&(t.ripple=n.first))},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(e,t){2&e&&(r.Sb("id",t.id),r.Ab("tabindex",null),r.Cb("mat-checkbox-indeterminate",t.indeterminate)("mat-checkbox-checked",t.checked)("mat-checkbox-disabled",t.disabled)("mat-checkbox-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[r.yb([ao]),r.wb],ngContentSelectors:to,decls:17,vars:20,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,t){if(1&e&&(r.fc(),r.Pb(0,"label",0,1),r.Pb(2,"div",2),r.Pb(3,"input",3,4),r.Wb("change",(function(e){return t._onInteractionEvent(e)}))("click",(function(e){return t._onInputClick(e)})),r.Ob(),r.Pb(5,"div",5),r.Lb(6,"div",6),r.Ob(),r.Lb(7,"div",7),r.Pb(8,"div",8),r.Zb(),r.Pb(9,"svg",9),r.Lb(10,"path",10),r.Ob(),r.Yb(),r.Lb(11,"div",11),r.Ob(),r.Ob(),r.Pb(12,"span",12,13),r.Wb("cdkObserveContent",(function(){return t._onLabelTextChange()})),r.Pb(14,"span",14),r.wc(15,"\xa0"),r.Ob(),r.ec(16),r.Ob(),r.Ob()),2&e){var n=r.lc(1),i=r.lc(13);r.Ab("for",t.inputId),r.zb(2),r.Cb("mat-checkbox-inner-container-no-side-margin",!i.textContent||!i.textContent.trim()),r.zb(1),r.gc("id",t.inputId)("required",t.required)("checked",t.checked)("disabled",t.disabled)("tabIndex",t.tabIndex),r.Ab("value",t.value)("name",t.name)("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby)("aria-checked",t._getAriaChecked())("aria-describedby",t.ariaDescribedby),r.zb(2),r.gc("matRippleTrigger",n)("matRippleDisabled",t._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",r.hc(19,eo))}},directives:[ga,ct],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),e}(),co=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)}}),e}(),lo=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ya,ta,lt,co],ta,co]}),e}(),ho=["*",[["mat-card-footer"]]],fo=["*","mat-card-footer"],po=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Fb({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),e}(),vo=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Fb({type:e,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),e}(),mo=function(){var e=function e(t){Object(l.a)(this,e),this._animationMode=t};return e.\u0275fac=function(t){return new(t||e)(r.Kb(qi,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,t){2&e&&r.Cb("_mat-animation-noopable","NoopAnimations"===t._animationMode)},exportAs:["matCard"],ngContentSelectors:fo,decls:2,vars:0,template:function(e,t){1&e&&(r.fc(ho),r.ec(0),r.ec(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),e}(),go=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ta],ta]}),e}(),yo=n("n6bG");function bo(e,t,n,r){return Object(yo.a)(n)&&(r=n,n=void 0),r?bo(e,t,n).pipe(Object(v.a)((function(e){return Object(p.a)(e)?r.apply(void 0,Object(s.a)(e)):r(e)}))):new d.a((function(r){!function e(t,n,r,i,a){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,a),o=function(){return s.removeEventListener(n,r,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),o=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,r),o=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,h=t.length;l<h;l++)e(t[l],n,r,i,a)}i.add(o)}(e,t,(function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),r,n)}))}n("3N8a"),n("IjjT");var _o=n("7o/Q");function wo(e,t){return function(n){return n.lift(new xo(e,t))}}var xo=function(){function e(t,n){Object(l.a)(this,e),this.compare=t,this.keySelector=n}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new ko(e,this.compare,this.keySelector))}}]),e}(),ko=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return Object(h.a)(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(_o.a),So=n("D0XW"),Eo=n("zx2A");function Oo(e){return function(t){return t.lift(new To(e))}}var To=function(){function e(t){Object(l.a)(this,e),this.durationSelector=t}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Co(e,this.durationSelector))}}]),e}(),Co=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e)).durationSelector=r,i.hasValue=!1,i}return Object(h.a)(n,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(r){return this.destination.error(r)}var n=Object(Eo.c)(t,new Eo.a(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(Eo.b);function Ao(e){return!Object(p.a)(e)&&e-parseFloat(e)+1>=0}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return Ao(t)?r=Number(t)<1?1:Number(t):Object(Bt.a)(t)&&(n=t),Object(Bt.a)(n)||(n=So.a),new d.a((function(t){var i=Ao(e)?e:+e-n.now();return n.schedule(jo,i,{index:0,period:r,subscriber:t})}))}function jo(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:So.a;return Oo((function(){return Mo(e,t)}))}function Ro(e){return function(t){return t.lift(new Io(e))}}var Io=function(){function e(t){Object(l.a)(this,e),this.notifier=t}return Object(h.a)(e,[{key:"call",value:function(e,t){var n=new Do(e),r=Object(Eo.c)(this.notifier,new Eo.a(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}]),e}(),Do=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).seenValue=!1,r}return Object(h.a)(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(Eo.b),Fo=n("eIep");n("WMd4");var Lo=n("9ppp");n("Ylt2");var No=function(){var e=function(){function e(t,n,r){Object(l.a)(this,e),this._ngZone=t,this._platform=n,this._scrolled=new qe.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}return Object(h.a)(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe((function(){return t._scrolled.next(e)})))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new d.a((function(n){e._globalSubscription||e._addGlobalListener();var r=t>0?e._scrolled.pipe(Po(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){r.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}})):Object(Ye.a)()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(t,n){return e.deregister(n)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Object($e.a)((function(e){return!e||n.indexOf(e)>-1})))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,n=[];return this.scrollContainers.forEach((function(r,i){t._scrollableContainsElement(i,e)&&n.push(i)})),n}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_scrollableContainsElement",value:function(e,t){var n=t.nativeElement,r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return bo(e._getWindow().document,"scroll").subscribe((function(){return e._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(r.z),r.Tb(ze),r.Tb(f.d,8))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(r.z),Object(r.Tb)(ze),Object(r.Tb)(f.d,8))},token:e,providedIn:"root"}),e}(),Bo=function(){var e=function(){function e(t,n,r){var i=this;Object(l.a)(this,e),this._platform=t,this._change=new qe.a,this._changeListener=function(e){i._change.next(e)},this._document=r,n.runOutsideAngular((function(){if(t.isBrowser){var e=i._getWindow();e.addEventListener("resize",i._changeListener),e.addEventListener("orientationchange",i._changeListener)}i.change().subscribe((function(){return i._updateViewportSize()}))}))}return Object(h.a)(e,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,r=t.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=this._getDocument(),t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(Po(e)):this._change}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_updateViewportSize",value:function(){var e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(ze),r.Tb(r.z),r.Tb(f.d,8))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(ze),Object(r.Tb)(r.z),Object(r.Tb)(f.d,8))},token:e,providedIn:"root"}),e}(),Ho=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)}}),e}(),Uo=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[It,We,Ho],It,Ho]}),e}(),Vo=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"attach",value:function(e){return this._attachedHost=e,e.attach(this)}},{key:"detach",value:function(){var e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}}]),e}(),zo=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this)).component=e,o.viewContainerRef=r,o.injector=i,o.componentFactoryResolver=a,o}return n}(Vo),Wo=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this)).templateRef=e,a.viewContainerRef=r,a.context=i,a}return Object(h.a)(n,[{key:"origin",get:function(){return this.templateRef.elementRef}},{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=t,Object(Be.a)(Object(He.a)(n.prototype),"attach",this).call(this,e)}},{key:"detach",value:function(){return this.context=void 0,Object(Be.a)(Object(He.a)(n.prototype),"detach",this).call(this)}}]),n}(Vo),Go=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this)).element=e instanceof r.l?e.nativeElement:e,i}return n}(Vo),Ko=function(){function e(){Object(l.a)(this,e),this._isDisposed=!1,this.attachDomPortal=null}return Object(h.a)(e,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(e){return e instanceof zo?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Wo?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Go?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),e}(),qo=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,o,s){var u,c;return Object(l.a)(this,n),(c=t.call(this)).outletElement=e,c._componentFactoryResolver=r,c._appRef=i,c._defaultInjector=o,c.attachDomPortal=function(e){var t=e.element,r=c._document.createComment("dom-portal");t.parentNode.insertBefore(r,t),c.outletElement.appendChild(t),Object(Be.a)((u=Object(a.a)(c),Object(He.a)(n.prototype)),"setDisposeFn",u).call(u,(function(){r.parentNode&&r.parentNode.replaceChild(t,r)}))},c._document=s,c}return Object(h.a)(n,[{key:"attachComponentPortal",value:function(e){var t,n=this,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);return e.viewContainerRef?(t=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn((function(){return t.destroy()}))):(t=r.create(e.injector||this._defaultInjector),this._appRef.attachView(t.hostView),this.setDisposeFn((function(){n._appRef.detachView(t.hostView),t.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(t)),t}},{key:"attachTemplatePortal",value:function(e){var t=this,n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach((function(e){return t.outletElement.appendChild(e)})),r.detectChanges(),this.setDisposeFn((function(){var e=n.indexOf(r);-1!==e&&n.remove(e)})),r}},{key:"dispose",value:function(){Object(Be.a)(Object(He.a)(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),n}(Ko),Xo=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,o){var s,u;return Object(l.a)(this,n),(u=t.call(this))._componentFactoryResolver=e,u._viewContainerRef=i,u._isInitialized=!1,u.attached=new r.n,u.attachDomPortal=function(e){var t=e.element,r=u._document.createComment("dom-portal");e.setAttachedHost(Object(a.a)(u)),t.parentNode.insertBefore(r,t),u._getRootNode().appendChild(t),Object(Be.a)((s=Object(a.a)(u),Object(He.a)(n.prototype)),"setDisposeFn",s).call(s,(function(){r.parentNode&&r.parentNode.replaceChild(t,r)}))},u._document=o,u}return Object(h.a)(n,[{key:"portal",get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&Object(Be.a)(Object(He.a)(n.prototype),"detach",this).call(this),e&&Object(Be.a)(Object(He.a)(n.prototype),"attach",this).call(this,e),this._attachedPortal=e)}},{key:"attachedRef",get:function(){return this._attachedRef}},{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){Object(Be.a)(Object(He.a)(n.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(e){e.setAttachedHost(this);var t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i=t.createComponent(r,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),Object(Be.a)(Object(He.a)(n.prototype),"setDisposeFn",this).call(this,(function(){return i.destroy()})),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}},{key:"attachTemplatePortal",value:function(e){var t=this;e.setAttachedHost(this);var r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return Object(Be.a)(Object(He.a)(n.prototype),"setDisposeFn",this).call(this,(function(){return t._viewContainerRef.clear()})),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}},{key:"_getRootNode",value:function(){var e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}]),n}(Ko);return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.j),r.Kb(r.P),r.Kb(f.d))},e.\u0275dir=r.Fb({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[r.wb]}),e}(),Yo=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)}}),e}(),Zo=n("VRyK"),Jo=function(){function e(t,n){Object(l.a)(this,e),this.predicate=t,this.inclusive=n}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Qo(e,this.predicate,this.inclusive))}}]),e}(),Qo=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).predicate=r,a.inclusive=i,a.index=0,a}return Object(h.a)(n,[{key:"_next",value:function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(e,t)}},{key:"nextOrComplete",value:function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}]),n}(_o.a),$o=function(){function e(t,n){Object(l.a)(this,e),this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return Object(h.a)(e,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=at(-this._previousScrollPosition.left),e.style.top=at(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=r,n.scrollBehavior=i}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}]),e}(),es=function(){function e(t,n,r,i){var a=this;Object(l.a)(this,e),this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=function(){a.disable(),a._overlayRef.hasAttached()&&a._ngZone.run((function(){return a._overlayRef.detach()}))}}return Object(h.a)(e,[{key:"attach",value:function(e){this._overlayRef=e}},{key:"enable",value:function(){var e=this;if(!this._scrollSubscription){var t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe((function(){var t=e._viewportRuler.getViewportScrollPosition().top;Math.abs(t-e._initialScrollPosition)>e._config.threshold?e._detach():e._overlayRef.updatePosition()}))):this._scrollSubscription=t.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),ts=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),e}();function ns(e,t){return t.some((function(t){return e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right}))}function rs(e,t){return t.some((function(t){return e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right}))}var is=function(){function e(t,n,r,i){Object(l.a)(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}return Object(h.a)(e,[{key:"attach",value:function(e){this._overlayRef=e}},{key:"enable",value:function(){var e=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(e._overlayRef.updatePosition(),e._config&&e._config.autoClose){var t=e._overlayRef.overlayElement.getBoundingClientRect(),n=e._viewportRuler.getViewportSize(),r=n.width,i=n.height;ns(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(e.disable(),e._ngZone.run((function(){return e._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),as=function(){var e=function e(t,n,r,i){var a=this;Object(l.a)(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=function(){return new ts},this.close=function(e){return new es(a._scrollDispatcher,a._ngZone,a._viewportRuler,e)},this.block=function(){return new $o(a._viewportRuler,a._document)},this.reposition=function(e){return new is(a._scrollDispatcher,a._viewportRuler,a._ngZone,e)},this._document=i};return e.\u0275fac=function(t){return new(t||e)(r.Tb(No),r.Tb(Bo),r.Tb(r.z),r.Tb(f.d))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(No),Object(r.Tb)(Bo),Object(r.Tb)(r.z),Object(r.Tb)(f.d))},token:e,providedIn:"root"}),e}(),os=function e(t){if(Object(l.a)(this,e),this.scrollStrategy=new ts,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t)for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];void 0!==t[i]&&(this[i]=t[i])}},ss=function e(t,n,r,i,a){Object(l.a)(this,e),this.offsetX=r,this.offsetY=i,this.panelClass=a,this.originX=t.originX,this.originY=t.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},us=function e(t,n){Object(l.a)(this,e),this.connectionPair=t,this.scrollableViewProperties=n},cs=function(){var e=function(){function e(t){Object(l.a)(this,e),this._attachedOverlays=[],this._document=t}return Object(h.a)(e,[{key:"ngOnDestroy",value:function(){this.detach()}},{key:"add",value:function(e){this.remove(e),this._attachedOverlays.push(e)}},{key:"remove",value:function(e){var t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(f.d))},token:e,providedIn:"root"}),e}(),ls=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._keydownListener=function(e){for(var t=r._attachedOverlays,n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}},r}return Object(h.a)(n,[{key:"add",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"add",this).call(this,e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}},{key:"detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),n}(cs);return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(f.d))},token:e,providedIn:"root"}),e}(),hs=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e))._platform=r,i._cursorStyleIsSet=!1,i._clickListener=function(e){for(var t=e.composedPath?e.composedPath()[0]:e.target,n=i._attachedOverlays.slice(),r=n.length-1;r>-1;r--){var a=n[r];if(!(a._outsidePointerEvents.observers.length<1)&&a.hasAttached()){if(a.overlayElement.contains(t))break;a._outsidePointerEvents.next(e)}}},i}return Object(h.a)(n,[{key:"add",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"add",this).call(this,e),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._document.body.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}},{key:"detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._document.body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}]),n}(cs);return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d),r.Tb(ze))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(f.d),Object(r.Tb)(ze))},token:e,providedIn:"root"}),e}(),fs=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine),ds=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._platform=n,this._document=t}return Object(h.a)(e,[{key:"ngOnDestroy",value:function(){var e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var e=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(e||fs)for(var t=this._document.querySelectorAll(".".concat("cdk-overlay-container",'[platform="server"], ')+".".concat("cdk-overlay-container",'[platform="test"]')),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);var r=this._document.createElement("div");r.classList.add("cdk-overlay-container"),fs?r.setAttribute("platform","test"):e||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d),r.Tb(ze))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(f.d),Object(r.Tb)(ze))},token:e,providedIn:"root"}),e}(),ps=function(){function e(t,n,r,i,a,o,s,u,c){var h=this;Object(l.a)(this,e),this._portalOutlet=t,this._host=n,this._pane=r,this._config=i,this._ngZone=a,this._keyboardDispatcher=o,this._document=s,this._location=u,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new qe.a,this._attachments=new qe.a,this._detachments=new qe.a,this._locationChanges=Xe.a.EMPTY,this._backdropClickHandler=function(e){return h._backdropClick.next(e)},this._keydownEvents=new qe.a,this._outsidePointerEvents=new qe.a,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}return Object(h.a)(e,[{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}},{key:"attach",value:function(e){var t=this,n=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Object(et.a)(1)).subscribe((function(){t.hasAttached()&&t.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return t.dispose()}))),this._outsideClickDispatcher&&this._outsideClickDispatcher.add(this),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher&&this._outsideClickDispatcher.remove(this),e}}},{key:"dispose",value:function(){var e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher&&this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick}},{key:"attachments",value:function(){return this._attachments}},{key:"detachments",value:function(){return this._detachments}},{key:"keydownEvents",value:function(){return this._keydownEvents}},{key:"outsidePointerEvents",value:function(){return this._outsidePointerEvents}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}},{key:"setDirection",value:function(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}},{key:"addPanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!0)}},{key:"removePanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!1)}},{key:"getDirection",value:function(){var e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}},{key:"updateScrollStrategy",value:function(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var e=this._pane.style;e.width=at(this._config.width),e.height=at(this._config.height),e.minWidth=at(this._config.minWidth),e.minHeight=at(this._config.minHeight),e.maxWidth=at(this._config.maxWidth),e.maxHeight=at(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(e){this._pane.style.pointerEvents=e?"auto":"none"}},{key:"_attachBackdrop",value:function(){var e=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){e._backdropElement&&e._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var e=this,t=this._backdropElement;if(t){var n,r=function r(){t&&(t.removeEventListener("click",e._backdropClickHandler),t.removeEventListener("transitionend",r),t.parentNode&&t.parentNode.removeChild(t)),e._backdropElement==t&&(e._backdropElement=null),e._config.backdropClass&&e._toggleClasses(t,e._config.backdropClass,!1),clearTimeout(n)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){t.addEventListener("transitionend",r)})),t.style.pointerEvents="none",n=this._ngZone.runOutsideAngular((function(){return setTimeout(r,500)}))}}},{key:"_toggleClasses",value:function(e,t,n){var r=e.classList;it(t).forEach((function(e){e&&(n?r.add(e):r.remove(e))}))}},{key:"_detachContentWhenStable",value:function(){var e=this;this._ngZone.runOutsideAngular((function(){var t=e._ngZone.onStable.pipe(Ro(Object(Zo.a)(e._attachments,e._detachments))).subscribe((function(){e._pane&&e._host&&0!==e._pane.children.length||(e._pane&&e._config.panelClass&&e._toggleClasses(e._pane,e._config.panelClass,!1),e._host&&e._host.parentElement&&(e._previousHostParent=e._host.parentElement,e._previousHostParent.removeChild(e._host)),t.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}]),e}(),vs=/([A-Za-z%]+)$/,ms=function(){function e(t,n,r,i,a){Object(l.a)(this,e),this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new qe.a,this._resizeSubscription=Xe.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}return Object(h.a)(e,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(e){var t=this;this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){t._isInitialRender=!0,t.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var e,t,n=this._originRect,r=this._overlayRect,i=this._viewportRect,a=[],s=Object(o.a)(this._preferredPositions);try{for(s.s();!(t=s.n()).done;){var u=t.value,c=this._getOriginPoint(n,u),l=this._getOverlayPoint(c,r,u),h=this._getOverlayFit(l,r,i,u);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,c);this._canFitWithFlexibleDimensions(h,l,i)?a.push({position:u,origin:c,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(c,u)}):(!e||e.overlayFit.visibleArea<h.visibleArea)&&(e={overlayFit:h,overlayPoint:l,originPoint:c,position:u,overlayRect:r})}}catch(y){s.e(y)}finally{s.f()}if(a.length){var f,d=null,p=-1,v=Object(o.a)(a);try{for(v.s();!(f=v.n()).done;){var m=f.value,g=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);g>p&&(p=g,d=m)}}catch(y){v.e(y)}finally{v.f()}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(e.position,e.originPoint);this._applyPosition(e.position,e.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&gs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}},{key:"withScrollableContainers",value:function(e){return this._scrollables=e,this}},{key:"withPositions",value:function(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(e){return this._viewportMargin=e,this}},{key:"withFlexibleDimensions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=e,this}},{key:"withGrowAfterOpen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=e,this}},{key:"withPush",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=e,this}},{key:"withLockedPosition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=e,this}},{key:"setOrigin",value:function(e){return this._origin=e,this}},{key:"withDefaultOffsetX",value:function(e){return this._offsetX=e,this}},{key:"withDefaultOffsetY",value:function(e){return this._offsetY=e,this}},{key:"withTransformOriginOn",value:function(e){return this._transformOriginSelector=e,this}},{key:"_getOriginPoint",value:function(e,t){var n;if("center"==t.originX)n=e.left+e.width/2;else{var r=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;n="start"==t.originX?r:i}return{x:n,y:"center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}},{key:"_getOverlayPoint",value:function(e,t,n){var r;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,{x:e.x+r,y:e.y+("center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height)}}},{key:"_getOverlayFit",value:function(e,t,n,r){var i=e.x,a=e.y,o=this._getOffset(r,"x"),s=this._getOffset(r,"y");o&&(i+=o),s&&(a+=s);var u=0-a,c=a+t.height-n.height,l=this._subtractOverflows(t.width,0-i,i+t.width-n.width),h=this._subtractOverflows(t.height,u,c),f=l*h;return{visibleArea:f,isCompletelyWithinViewport:t.width*t.height===f,fitsInViewportVertically:h===t.height,fitsInViewportHorizontally:l==t.width}}},{key:"_canFitWithFlexibleDimensions",value:function(e,t,n){if(this._hasFlexibleDimensions){var r=n.bottom-t.y,i=n.right-t.x,a=ys(this._overlayRef.getConfig().minHeight),o=ys(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=a&&a<=r)&&(e.fitsInViewportHorizontally||null!=o&&o<=i)}return!1}},{key:"_pushOverlayOnScreen",value:function(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};var r,i,a=this._viewportRect,o=Math.max(e.x+t.width-a.width,0),s=Math.max(e.y+t.height-a.height,0),u=Math.max(a.top-n.top-e.y,0),c=Math.max(a.left-n.left-e.x,0);return this._previousPushAmount={x:r=t.width<=a.width?c||-o:e.x<this._viewportMargin?a.left-n.left-e.x:0,y:i=t.height<=a.height?u||-s:e.y<this._viewportMargin?a.top-n.top-e.y:0},{x:e.x+r,y:e.y+i}}},{key:"_applyPosition",value:function(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){var n=this._getScrollVisibility(),r=new us(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(e){if(this._transformOriginSelector){var t,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin="".concat(t," ").concat(r)}}},{key:"_calculateBoundingBoxRect",value:function(e,t){var n,r,i,a,o,s,u=this._viewportRect,c=this._isRtl();if("top"===t.overlayY)n=u.height-(r=e.y)+this._viewportMargin;else if("bottom"===t.overlayY)n=u.height-(i=u.height-e.y+2*this._viewportMargin)+this._viewportMargin;else{var l=Math.min(u.bottom-e.y+u.top,e.y),h=this._lastBoundingBoxSize.height;r=e.y-l,(n=2*l)>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-h/2)}if("end"===t.overlayX&&!c||"start"===t.overlayX&&c)s=u.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!c||"end"===t.overlayX&&c)o=e.x,a=u.right-e.x;else{var f=Math.min(u.right-e.x+u.left,e.x),d=this._lastBoundingBoxSize.width;o=e.x-f,(a=2*f)>d&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.x-d/2)}return{top:r,left:o,bottom:i,right:s,width:a,height:n}}},{key:"_setBoundingBoxStyles",value:function(e,t){var n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=at(n.height),r.top=at(n.top),r.bottom=at(n.bottom),r.width=at(n.width),r.left=at(n.left),r.right=at(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=at(i)),a&&(r.maxWidth=at(a))}this._lastBoundingBoxSize=n,gs(this._boundingBox.style,r)}},{key:"_resetBoundingBoxStyles",value:function(){gs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){gs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(e,t){var n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){var o=this._viewportRuler.getViewportScrollPosition();gs(n,this._getExactOverlayY(t,e,o)),gs(n,this._getExactOverlayX(t,e,o))}else n.position="static";var s="",u=this._getOffset(t,"x"),c=this._getOffset(t,"y");u&&(s+="translateX(".concat(u,"px) ")),c&&(s+="translateY(".concat(c,"px)")),n.transform=s.trim(),a.maxHeight&&(r?n.maxHeight=at(a.maxHeight):i&&(n.maxHeight="")),a.maxWidth&&(r?n.maxWidth=at(a.maxWidth):i&&(n.maxWidth="")),gs(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(e,t,n){var r={top:"",bottom:""},i=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));var a=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=a,"bottom"===e.overlayY?r.bottom="".concat(this._document.documentElement.clientHeight-(i.y+this._overlayRect.height),"px"):r.top=at(i.y),r}},{key:"_getExactOverlayX",value:function(e,t,n){var r={left:"",right:""},i=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),"right"==(this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?r.right="".concat(this._document.documentElement.clientWidth-(i.x+this._overlayRect.width),"px"):r.left=at(i.x),r}},{key:"_getScrollVisibility",value:function(){var e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map((function(e){return e.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:rs(e,n),isOriginOutsideView:ns(e,n),isOverlayClipped:rs(t,n),isOverlayOutsideView:ns(t,n)}}},{key:"_subtractOverflows",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return e-Math.max(t,0)}),e)}},{key:"_getNarrowedViewportRect",value:function(){var e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}},{key:"_validatePositions",value:function(){}},{key:"_addPanelClasses",value:function(e){var t=this;this._pane&&it(e).forEach((function(e){""!==e&&-1===t._appliedPanelClasses.indexOf(e)&&(t._appliedPanelClasses.push(e),t._pane.classList.add(e))}))}},{key:"_clearPanelClasses",value:function(){var e=this;this._pane&&(this._appliedPanelClasses.forEach((function(t){e._pane.classList.remove(t)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var e=this._origin;if(e instanceof r.l)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();var t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}]),e}();function gs(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function ys(e){if("number"!=typeof e&&null!=e){var t=e.split(vs),n=Object(Vt.a)(t,2),r=n[1];return r&&"px"!==r?null:parseFloat(n[0])}return e||null}var bs=function(){function e(t,n,r,i,a,o,s){Object(l.a)(this,e),this._preferredPositions=[],this._positionStrategy=new ms(r,i,a,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,n),this.onPositionChange=this._positionStrategy.positionChanges}return Object(h.a)(e,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(e){this._positionStrategy.withScrollableContainers(e)}},{key:"withFallbackPosition",value:function(e,t,n,r){var i=new ss(e,t,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}},{key:"withOffsetX",value:function(e){return this._positionStrategy.withDefaultOffsetX(e),this}},{key:"withOffsetY",value:function(e){return this._positionStrategy.withDefaultOffsetY(e),this}},{key:"withLockedPosition",value:function(e){return this._positionStrategy.withLockedPosition(e),this}},{key:"withPositions",value:function(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(e){return this._positionStrategy.setOrigin(e),this}}]),e}(),_s=function(){function e(){Object(l.a)(this,e),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return Object(h.a)(e,[{key:"attach",value:function(e){var t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}},{key:"left",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}},{key:"right",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}},{key:"width",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}},{key:"height",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}},{key:"centerHorizontally",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(e),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(e),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),r=n.width,i=n.height,a=n.maxWidth,o=n.maxHeight,s=!("100%"!==r&&"100vw"!==r||a&&"100%"!==a&&"100vw"!==a),u=!("100%"!==i&&"100vh"!==i||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=s?"0":this._leftOffset,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,s?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=u?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}}]),e}(),ws=function(){var e=function(){function e(t,n,r,i){Object(l.a)(this,e),this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=i}return Object(h.a)(e,[{key:"global",value:function(){return new _s}},{key:"connectedTo",value:function(e,t,n){return new bs(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(e){return new ms(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(Bo),r.Tb(f.d),r.Tb(ze),r.Tb(ds))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(Bo),Object(r.Tb)(f.d),Object(r.Tb)(ze),Object(r.Tb)(ds))},token:e,providedIn:"root"}),e}(),xs=0,ks=function(){var e=function(){function e(t,n,r,i,a,o,s,u,c,h,f){Object(l.a)(this,e),this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=i,this._keyboardDispatcher=a,this._injector=o,this._ngZone=s,this._document=u,this._directionality=c,this._location=h,this._outsideClickDispatcher=f}return Object(h.a)(e,[{key:"create",value:function(e){var t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),i=new os(e);return i.direction=i.direction||this._directionality.value,new ps(r,t,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(e){var t=this._document.createElement("div");return t.id="cdk-overlay-".concat(xs++),t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}},{key:"_createHostElement",value:function(){var e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}},{key:"_createPortalOutlet",value:function(e){return this._appRef||(this._appRef=this._injector.get(r.g)),new qo(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(as),r.Tb(ds),r.Tb(r.j),r.Tb(ws),r.Tb(ls),r.Tb(r.r),r.Tb(r.z),r.Tb(f.d),r.Tb(Rt),r.Tb(f.h),r.Tb(hs))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),Ss=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Es=new r.q("cdk-connected-overlay-scroll-strategy"),Os=function(){var e=function e(t){Object(l.a)(this,e),this.elementRef=t};return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l))},e.\u0275dir=r.Fb({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e}(),Ts=function(){var e=function(){function e(t,n,i,a,o){Object(l.a)(this,e),this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Xe.a.EMPTY,this._attachSubscription=Xe.a.EMPTY,this._detachSubscription=Xe.a.EMPTY,this._positionSubscription=Xe.a.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new r.n,this.positionChange=new r.n,this.attach=new r.n,this.detach=new r.n,this.overlayKeydown=new r.n,this.overlayOutsideClick=new r.n,this._templatePortal=new Wo(n,i),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}return Object(h.a)(e,[{key:"offsetX",get:function(){return this._offsetX},set:function(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"offsetY",get:function(){return this._offsetY},set:function(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=tt(e)}},{key:"lockPosition",get:function(){return this._lockPosition},set:function(e){this._lockPosition=tt(e)}},{key:"flexibleDimensions",get:function(){return this._flexibleDimensions},set:function(e){this._flexibleDimensions=tt(e)}},{key:"growAfterOpen",get:function(){return this._growAfterOpen},set:function(e){this._growAfterOpen=tt(e)}},{key:"push",get:function(){return this._push},set:function(e){this._push=tt(e)}},{key:"overlayRef",get:function(){return this._overlayRef}},{key:"dir",get:function(){return this._dir?this._dir.value:"ltr"}},{key:"ngOnDestroy",value:function(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}},{key:"ngOnChanges",value:function(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}},{key:"_createOverlay",value:function(){var e=this;this.positions&&this.positions.length||(this.positions=Ss);var t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe((function(){return e.attach.emit()})),this._detachSubscription=t.detachments().subscribe((function(){return e.detach.emit()})),t.keydownEvents().subscribe((function(t){e.overlayKeydown.next(t),27!==t.keyCode||Ze(t)||(t.preventDefault(),e._detachOverlay())})),this._overlayRef.outsidePointerEvents().subscribe((function(t){e.overlayOutsideClick.next(t)}))}},{key:"_buildConfig",value:function(){var e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new os({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}},{key:"_updatePositionStrategy",value:function(e){var t=this,n=this.positions.map((function(e){return{originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY,panelClass:e.panelClass||void 0}}));return e.setOrigin(this.origin.elementRef).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}},{key:"_createPositionStrategy",value:function(){var e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}},{key:"_attachOverlay",value:function(){var e=this;this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe((function(t){e.backdropClick.emit(t)})):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return n.lift(new Jo(e,t))}}((function(){return e.positionChange.observers.length>0}))).subscribe((function(t){e.positionChange.emit(t),0===e.positionChange.observers.length&&e._positionSubscription.unsubscribe()})))}},{key:"_detachOverlay",value:function(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(ks),r.Kb(r.L),r.Kb(r.P),r.Kb(Es),r.Kb(Rt,8))},e.\u0275dir=r.Fb({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[r.xb]}),e}(),Cs={provide:Es,deps:[ks],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},As=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[ks,Cs],imports:[[It,Yo,Uo],Uo]}),e}(),Ms=n("EY2u");function js(e){return new d.a((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?Object(g.a)(n):Object(Ms.b)()).subscribe(t)}))}function Ps(e,t){}var Rs=function e(){Object(l.a)(this,e),this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0},Is={dialogContainer:Sn("dialogContainer",[Cn("void, exit",Tn({opacity:0,transform:"scale(0.7)"})),Cn("enter",Tn({transform:"none"})),Mn("* => enter",En("150ms cubic-bezier(0, 0, 0.2, 1)",Tn({transform:"none",opacity:1}))),Mn("* => void, * => exit",En("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Tn({opacity:0})))])},Ds=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,a,o,s,u){var c;return Object(l.a)(this,n),(c=t.call(this))._elementRef=e,c._focusTrapFactory=i,c._changeDetectorRef=a,c._config=s,c._focusMonitor=u,c._animationStateChanged=new r.n,c._elementFocusedBeforeDialogWasOpened=null,c._closeInteractionType=null,c.attachDomPortal=function(e){return c._portalOutlet.hasAttached(),c._portalOutlet.attachDomPortal(e)},c._ariaLabelledBy=s.ariaLabelledBy||null,c._document=o,c}return Object(h.a)(n,[{key:"_initializeWithAttachedContent",value:function(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}},{key:"attachComponentPortal",value:function(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}},{key:"_recaptureFocus",value:function(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}},{key:"_trapFocus",value:function(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}},{key:"_restoreFocus",value:function(){var e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){var t=this._document.activeElement,n=this._elementRef.nativeElement;t&&t!==this._document.body&&t!==n&&!n.contains(t)||(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}},{key:"_setupFocusTrap",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}},{key:"_capturePreviouslyFocusedElement",value:function(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement)}},{key:"_focusDialogContainer",value:function(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}},{key:"_containsFocus",value:function(){var e=this._elementRef.nativeElement,t=this._document.activeElement;return e===t||e.contains(t)}}]),n}(Ko);return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(wt),r.Kb(r.h),r.Kb(f.d,8),r.Kb(Rs),r.Kb(Ct))},e.\u0275dir=r.Fb({type:e,viewQuery:function(e,t){var n;1&e&&r.rc(Xo,!0),2&e&&r.kc(n=r.Xb())&&(t._portalOutlet=n.first)},features:[r.wb]}),e}(),Fs=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments))._state="enter",e}return Object(h.a)(n,[{key:"_onAnimationDone",value:function(e){var t=e.toState,n=e.totalTime;"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}},{key:"_onAnimationStart",value:function(e){var t=e.toState,n=e.totalTime;"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:n}):"exit"!==t&&"void"!==t||this._animationStateChanged.next({state:"closing",totalTime:n})}},{key:"_startExitAnimation",value:function(){this._state="exit",this._changeDetectorRef.markForCheck()}}]),n}(Ds);return e.\u0275fac=function(t){return Ls(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,t){1&e&&r.tc("@dialogContainer.start",(function(e){return t._onAnimationStart(e)}))("@dialogContainer.done",(function(e){return t._onAnimationDone(e)})),2&e&&(r.Sb("id",t._id),r.Ab("role",t._config.role)("aria-labelledby",t._config.ariaLabel?null:t._ariaLabelledBy)("aria-label",t._config.ariaLabel)("aria-describedby",t._config.ariaDescribedBy||null),r.uc("@dialogContainer",t._state))},features:[r.wb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&r.vc(0,Ps,0,0,"ng-template",0)},directives:[Xo],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Is.dialogContainer]}}),e}(),Ls=r.Rb(Fs),Ns=0,Bs=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mat-dialog-".concat(Ns++);Object(l.a)(this,e),this._overlayRef=t,this._containerInstance=n,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new qe.a,this._afterClosed=new qe.a,this._beforeClosed=new qe.a,this._state=0,n._id=i,n._animationStateChanged.pipe(Object($e.a)((function(e){return"opened"===e.state})),Object(et.a)(1)).subscribe((function(){r._afterOpened.next(),r._afterOpened.complete()})),n._animationStateChanged.pipe(Object($e.a)((function(e){return"closed"===e.state})),Object(et.a)(1)).subscribe((function(){clearTimeout(r._closeFallbackTimeout),r._finishDialogClose()})),t.detachments().subscribe((function(){r._beforeClosed.next(r._result),r._beforeClosed.complete(),r._afterClosed.next(r._result),r._afterClosed.complete(),r.componentInstance=null,r._overlayRef.dispose()})),t.keydownEvents().pipe(Object($e.a)((function(e){return 27===e.keyCode&&!r.disableClose&&!Ze(e)}))).subscribe((function(e){e.preventDefault(),Hs(r,"keyboard")})),t.backdropClick().subscribe((function(){r.disableClose?r._containerInstance._recaptureFocus():Hs(r,"mouse")}))}return Object(h.a)(e,[{key:"close",value:function(e){var t=this;this._result=e,this._containerInstance._animationStateChanged.pipe(Object($e.a)((function(e){return"closing"===e.state})),Object(et.a)(1)).subscribe((function(n){t._beforeClosed.next(e),t._beforeClosed.complete(),t._overlayRef.detachBackdrop(),t._closeFallbackTimeout=setTimeout((function(){return t._finishDialogClose()}),n.totalTime+100)})),this._state=1,this._containerInstance._startExitAnimation()}},{key:"afterOpened",value:function(){return this._afterOpened}},{key:"afterClosed",value:function(){return this._afterClosed}},{key:"beforeClosed",value:function(){return this._beforeClosed}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}},{key:"updatePosition",value:function(e){var t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}},{key:"updateSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._getPositionStrategy().width(e).height(t),this._overlayRef.updatePosition(),this}},{key:"addPanelClass",value:function(e){return this._overlayRef.addPanelClass(e),this}},{key:"removePanelClass",value:function(e){return this._overlayRef.removePanelClass(e),this}},{key:"getState",value:function(){return this._state}},{key:"_finishDialogClose",value:function(){this._state=2,this._overlayRef.dispose()}},{key:"_getPositionStrategy",value:function(){return this._overlayRef.getConfig().positionStrategy}}]),e}();function Hs(e,t,n){return void 0!==e._containerInstance&&(e._containerInstance._closeInteractionType=t),e.close(n)}var Us=new r.q("MatDialogData"),Vs=new r.q("mat-dialog-default-options"),zs=new r.q("mat-dialog-scroll-strategy"),Ws={provide:zs,deps:[ks],useFactory:function(e){return function(){return e.scrollStrategies.block()}}},Gs=function(){var e=function(){function e(t,n,r,i,a,o,s,u,c){var h=this;Object(l.a)(this,e),this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=i,this._overlayContainer=a,this._dialogRefConstructor=s,this._dialogContainerType=u,this._dialogDataToken=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new qe.a,this._afterOpenedAtThisLevel=new qe.a,this._ariaHiddenElements=new Map,this.afterAllClosed=js((function(){return h.openDialogs.length?h._getAfterAllClosed():h._getAfterAllClosed().pipe(Ht(void 0))})),this._scrollStrategy=o}return Object(h.a)(e,[{key:"openDialogs",get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}},{key:"afterOpened",get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}},{key:"_getAfterAllClosed",value:function(){var e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}},{key:"open",value:function(e,t){var n=this;(t=function(e,t){return Object.assign(Object.assign({},t),e)}(t,this._defaultOptions||new Rs)).id&&this.getDialogById(t.id);var r=this._createOverlay(t),i=this._attachDialogContainer(r,t),a=this._attachDialogContent(e,i,r,t);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.afterClosed().subscribe((function(){return n._removeOpenDialog(a)})),this.afterOpened.next(a),i._initializeWithAttachedContent(),a}},{key:"closeAll",value:function(){this._closeDialogs(this.openDialogs)}},{key:"getDialogById",value:function(e){return this.openDialogs.find((function(t){return t.id===e}))}},{key:"ngOnDestroy",value:function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}},{key:"_createOverlay",value:function(e){var t=this._getOverlayConfig(e);return this._overlay.create(t)}},{key:"_getOverlayConfig",value:function(e){var t=new os({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}},{key:"_attachDialogContainer",value:function(e,t){var n=r.r.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:Rs,useValue:t}]}),i=new zo(this._dialogContainerType,t.viewContainerRef,n,t.componentFactoryResolver);return e.attach(i).instance}},{key:"_attachDialogContent",value:function(e,t,n,i){var a=new this._dialogRefConstructor(n,t,i.id);if(e instanceof r.L)t.attachTemplatePortal(new Wo(e,null,{$implicit:i.data,dialogRef:a}));else{var o=this._createInjector(i,a,t),s=t.attachComponentPortal(new zo(e,i.viewContainerRef,o));a.componentInstance=s.instance}return a.updateSize(i.width,i.height).updatePosition(i.position),a}},{key:"_createInjector",value:function(e,t,n){var i=e&&e.viewContainerRef&&e.viewContainerRef.injector,a=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:t}];return!e.direction||i&&i.get(Rt,null)||a.push({provide:Rt,useValue:{value:e.direction,change:Object(Ye.a)()}}),r.r.create({parent:i||this._injector,providers:a})}},{key:"_removeOpenDialog",value:function(e){var t=this.openDialogs.indexOf(e);t>-1&&(this.openDialogs.splice(t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((function(e,t){e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")})),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}},{key:"_hideNonDialogContentFromAssistiveTechnology",value:function(){var e=this._overlayContainer.getContainerElement();if(e.parentElement)for(var t=e.parentElement.children,n=t.length-1;n>-1;n--){var r=t[n];r===e||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}},{key:"_closeDialogs",value:function(e){for(var t=e.length;t--;)e[t].close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(ks),r.Kb(r.r),r.Kb(void 0),r.Kb(void 0),r.Kb(ds),r.Kb(void 0),r.Kb(r.N),r.Kb(r.N),r.Kb(r.q))},e.\u0275dir=r.Fb({type:e}),e}(),Ks=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s,u){return Object(l.a)(this,n),t.call(this,e,r,a,s,u,o,Bs,Fs,Us)}return n}(Gs);return e.\u0275fac=function(t){return new(t||e)(r.Tb(ks),r.Tb(r.r),r.Tb(f.h,8),r.Tb(Vs,8),r.Tb(zs),r.Tb(e,12),r.Tb(ds))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),qs=0,Xs=function(){var e=function(){function e(t,n,r){Object(l.a)(this,e),this._dialogRef=t,this._elementRef=n,this._dialog=r,this.id="mat-dialog-title-".concat(qs++)}return Object(h.a)(e,[{key:"ngOnInit",value:function(){var e=this;this._dialogRef||(this._dialogRef=function(e,t){for(var n=e.nativeElement.parentElement;n&&!n.classList.contains("mat-dialog-container");)n=n.parentElement;return n?t.find((function(e){return e.id===n.id})):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then((function(){var t=e._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=e.id)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(Bs,8),r.Kb(r.l),r.Kb(Ks))},e.\u0275dir=r.Fb({type:e,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,t){2&e&&r.Sb("id",t.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),e}(),Ys=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Fb({type:e,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),e}(),Zs=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[Ks,Ws],imports:[[As,Yo,ta],ta]}),e}(),Js=n("z6cu"),Qs=n("JIr8");function $s(e){return function(t){return t.lift(new eu(e))}}var eu=function(){function e(t){Object(l.a)(this,e),this.callback=t}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new tu(e,this.callback))}}]),e}(),tu=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e)).add(new Xe.a(r)),i}return n}(_o.a),nu=n("w1tV"),ru=["*"];function iu(e){return Error('Unable to find icon with the name "'.concat(e,'"'))}function au(e){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+"via Angular's DomSanitizer. Attempted URL was \"".concat(e,'".'))}function ou(e){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+"Angular's DomSanitizer. Attempted literal was \"".concat(e,'".'))}var su=function e(t,n,r){Object(l.a)(this,e),this.url=t,this.svgText=n,this.options=r},uu=function(){var e=function(){function e(t,n,r,i){Object(l.a)(this,e),this._httpClient=t,this._sanitizer=n,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=r}return Object(h.a)(e,[{key:"addSvgIcon",value:function(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}},{key:"addSvgIconLiteral",value:function(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}},{key:"addSvgIconInNamespace",value:function(e,t,n,r){return this._addSvgIconConfig(e,t,new su(n,null,r))}},{key:"addSvgIconLiteralInNamespace",value:function(e,t,n,i){var a=this._sanitizer.sanitize(r.I.HTML,n);if(!a)throw ou(n);return this._addSvgIconConfig(e,t,new su("",a,i))}},{key:"addSvgIconSet",value:function(e,t){return this.addSvgIconSetInNamespace("",e,t)}},{key:"addSvgIconSetLiteral",value:function(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}},{key:"addSvgIconSetInNamespace",value:function(e,t,n){return this._addSvgIconSetConfig(e,new su(t,null,n))}},{key:"addSvgIconSetLiteralInNamespace",value:function(e,t,n){var i=this._sanitizer.sanitize(r.I.HTML,t);if(!i)throw ou(t);return this._addSvgIconSetConfig(e,new su("",i,n))}},{key:"registerFontClassAlias",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this._fontCssClassesByAlias.set(e,t),this}},{key:"classNameForFontAlias",value:function(e){return this._fontCssClassesByAlias.get(e)||e}},{key:"setDefaultFontSetClass",value:function(e){return this._defaultFontSetClass=e,this}},{key:"getDefaultFontSetClass",value:function(){return this._defaultFontSetClass}},{key:"getSvgIconFromUrl",value:function(e){var t=this,n=this._sanitizer.sanitize(r.I.RESOURCE_URL,e);if(!n)throw au(e);var i=this._cachedIconsByUrl.get(n);return i?Object(Ye.a)(cu(i)):this._loadSvgIconFromConfig(new su(e,null)).pipe(Object(Je.a)((function(e){return t._cachedIconsByUrl.set(n,e)})),Object(v.a)((function(e){return cu(e)})))}},{key:"getNamedSvgIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=lu(t,e),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);var i=this._iconSetConfigs.get(t);return i?this._getSvgFromIconSetConfigs(e,i):Object(Js.a)(iu(n))}},{key:"ngOnDestroy",value:function(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}},{key:"_getSvgFromConfig",value:function(e){return e.svgText?Object(Ye.a)(cu(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Object(v.a)((function(e){return cu(e)})))}},{key:"_getSvgFromIconSetConfigs",value:function(e,t){var n=this,i=this._extractIconWithNameFromAnySet(e,t);return i?Object(Ye.a)(i):y(t.filter((function(e){return!e.svgText})).map((function(e){return n._loadSvgIconSetFromConfig(e).pipe(Object(Qs.a)((function(t){var i=n._sanitizer.sanitize(r.I.RESOURCE_URL,e.url),a="Loading icon set URL: ".concat(i," failed: ").concat(t.message);return n._errorHandler.handleError(new Error(a)),Object(Ye.a)(null)})))}))).pipe(Object(v.a)((function(){var r=n._extractIconWithNameFromAnySet(e,t);if(!r)throw iu(e);return r})))}},{key:"_extractIconWithNameFromAnySet",value:function(e,t){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.svgText&&r.svgText.indexOf(e)>-1){var i=this._svgElementFromConfig(r),a=this._extractSvgIconFromSet(i,e,r.options);if(a)return a}}return null}},{key:"_loadSvgIconFromConfig",value:function(e){var t=this;return this._fetchIcon(e).pipe(Object(Je.a)((function(t){return e.svgText=t})),Object(v.a)((function(){return t._svgElementFromConfig(e)})))}},{key:"_loadSvgIconSetFromConfig",value:function(e){return e.svgText?Object(Ye.a)(null):this._fetchIcon(e).pipe(Object(Je.a)((function(t){return e.svgText=t})))}},{key:"_extractSvgIconFromSet",value:function(e,t,n){var r=e.querySelector('[id="'.concat(t,'"]'));if(!r)return null;var i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);var a=this._svgElementFromString("<svg></svg>");return a.appendChild(i),this._setSvgAttributes(a,n)}},{key:"_svgElementFromString",value:function(e){var t=this._document.createElement("DIV");t.innerHTML=e;var n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}},{key:"_toSvgElement",value:function(e){for(var t=this._svgElementFromString("<svg></svg>"),n=e.attributes,r=0;r<n.length;r++){var i=n[r],a=i.name;"id"!==a&&t.setAttribute(a,i.value)}for(var o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[o].cloneNode(!0));return t}},{key:"_setSvgAttributes",value:function(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}},{key:"_fetchIcon",value:function(e){var t,n=this,i=e.url,a=e.options,o=null!==(t=null==a?void 0:a.withCredentials)&&void 0!==t&&t;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==i)throw Error('Cannot fetch icon from URL "'.concat(i,'".'));var s=this._sanitizer.sanitize(r.I.RESOURCE_URL,i);if(!s)throw au(i);var u=this._inProgressUrlFetches.get(s);if(u)return u;var c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe($s((function(){return n._inProgressUrlFetches.delete(s)})),Object(nu.a)());return this._inProgressUrlFetches.set(s,c),c}},{key:"_addSvgIconConfig",value:function(e,t,n){return this._svgIconConfigs.set(lu(e,t),n),this}},{key:"_addSvgIconSetConfig",value:function(e,t){var n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}},{key:"_svgElementFromConfig",value:function(e){if(!e.svgElement){var t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(i.b,8),r.Tb(mn),r.Tb(f.d,8),r.Tb(r.m))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(i.b,8),Object(r.Tb)(mn),Object(r.Tb)(f.d,8),Object(r.Tb)(r.m))},token:e,providedIn:"root"}),e}();function cu(e){return e.cloneNode(!0)}function lu(e,t){return e+":"+t}var hu=ra((function e(t){Object(l.a)(this,e),this._elementRef=t})),fu=new r.q("mat-icon-location",{providedIn:"root",factory:function(){var e=Object(r.U)(f.d),t=e?e.location:null;return{getPathname:function(){return t?t.pathname+t.search:""}}}}),du=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],pu=du.map((function(e){return"[".concat(e,"]")})).join(", "),vu=/^url\(['"]?#(.*?)['"]?\)$/,mu=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o){var s;return Object(l.a)(this,n),(s=t.call(this,e))._iconRegistry=r,s._location=a,s._errorHandler=o,s._inline=!1,s._currentIconFetch=Xe.a.EMPTY,i||e.nativeElement.setAttribute("aria-hidden","true"),s}return Object(h.a)(n,[{key:"inline",get:function(){return this._inline},set:function(e){this._inline=tt(e)}},{key:"svgIcon",get:function(){return this._svgIcon},set:function(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}},{key:"fontSet",get:function(){return this._fontSet},set:function(e){var t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}},{key:"fontIcon",get:function(){return this._fontIcon},set:function(e){var t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}},{key:"_splitIconName",value:function(e){if(!e)return["",""];var t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error('Invalid icon name: "'.concat(e,'"'))}}},{key:"ngOnInit",value:function(){this._updateFontIconClasses()}},{key:"ngAfterViewChecked",value:function(){var e=this._elementsWithExternalReferences;if(e&&e.size){var t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}},{key:"ngOnDestroy",value:function(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}},{key:"_usingFontIcon",value:function(){return!this.svgIcon}},{key:"_setSvgElement",value:function(e){this._clearSvgElement();for(var t=e.querySelectorAll("style"),n=0;n<t.length;n++)t[n].textContent+=" ";var r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}},{key:"_clearSvgElement",value:function(){var e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){var n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}},{key:"_updateFontIconClasses",value:function(){if(this._usingFontIcon()){var e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}}},{key:"_cleanupFontValue",value:function(e){return"string"==typeof e?e.trim().split(" ")[0]:e}},{key:"_prependPathToReferences",value:function(e){var t=this._elementsWithExternalReferences;t&&t.forEach((function(t,n){t.forEach((function(t){n.setAttribute(t.name,"url('".concat(e,"#").concat(t.value,"')"))}))}))}},{key:"_cacheChildrenWithExternalReferences",value:function(e){for(var t=e.querySelectorAll(pu),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map,r=function(e){du.forEach((function(r){var i=t[e],a=i.getAttribute(r),o=a?a.match(vu):null;if(o){var s=n.get(i);s||n.set(i,s=[]),s.push({name:r,value:o[1]})}}))},i=0;i<t.length;i++)r(i)}},{key:"_updateSvgIcon",value:function(e){var t=this;if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){var n=this._splitIconName(e),r=Object(Vt.a)(n,2),i=r[0],a=r[1];i&&(this._svgNamespace=i),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,i).pipe(Object(et.a)(1)).subscribe((function(e){return t._setSvgElement(e)}),(function(e){var n="Error retrieving icon ".concat(i,":").concat(a,"! ").concat(e.message);t._errorHandler.handleError(new Error(n))}))}}}]),n}(hu);return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(uu),r.Ub("aria-hidden"),r.Kb(fu),r.Kb(r.m))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,t){2&e&&(r.Ab("data-mat-icon-type",t._usingFontIcon()?"font":"svg")("data-mat-icon-name",t._svgName||t.fontIcon)("data-mat-icon-namespace",t._svgNamespace||t.fontSet),r.Cb("mat-icon-inline",t.inline)("mat-icon-no-color","primary"!==t.color&&"accent"!==t.color&&"warn"!==t.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[r.wb],ngContentSelectors:ru,decls:1,vars:0,template:function(e,t){1&e&&(r.fc(),r.ec(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),e}(),gu=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ta],ta]}),e}(),yu=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[We]]}),e}(),bu=["underline"],_u=["connectionContainer"],wu=["inputContainer"],xu=["label"];function ku(e,t){1&e&&(r.Nb(0),r.Pb(1,"div",14),r.Lb(2,"div",15),r.Lb(3,"div",16),r.Lb(4,"div",17),r.Ob(),r.Pb(5,"div",18),r.Lb(6,"div",15),r.Lb(7,"div",16),r.Lb(8,"div",17),r.Ob(),r.Mb())}function Su(e,t){1&e&&(r.Pb(0,"div",19),r.ec(1,1),r.Ob())}function Eu(e,t){if(1&e&&(r.Nb(0),r.ec(1,2),r.Pb(2,"span"),r.wc(3),r.Ob(),r.Mb()),2&e){var n=r.ac(2);r.zb(3),r.xc(n._control.placeholder)}}function Ou(e,t){1&e&&r.ec(0,3,["*ngSwitchCase","true"])}function Tu(e,t){1&e&&(r.Pb(0,"span",23),r.wc(1," *"),r.Ob())}function Cu(e,t){if(1&e){var n=r.Qb();r.Pb(0,"label",20,21),r.Wb("cdkObserveContent",(function(){return r.nc(n),r.ac().updateOutlineGap()})),r.vc(2,Eu,4,1,"ng-container",12),r.vc(3,Ou,1,0,"ng-content",12),r.vc(4,Tu,2,0,"span",22),r.Ob()}if(2&e){var i=r.ac();r.Cb("mat-empty",i._control.empty&&!i._shouldAlwaysFloat())("mat-form-field-empty",i._control.empty&&!i._shouldAlwaysFloat())("mat-accent","accent"==i.color)("mat-warn","warn"==i.color),r.gc("cdkObserveContentDisabled","outline"!=i.appearance)("id",i._labelId)("ngSwitch",i._hasLabel()),r.Ab("for",i._control.id)("aria-owns",i._control.id),r.zb(2),r.gc("ngSwitchCase",!1),r.zb(1),r.gc("ngSwitchCase",!0),r.zb(1),r.gc("ngIf",!i.hideRequiredMarker&&i._control.required&&!i._control.disabled)}}function Au(e,t){1&e&&(r.Pb(0,"div",24),r.ec(1,4),r.Ob())}function Mu(e,t){if(1&e&&(r.Pb(0,"div",25,26),r.Lb(2,"span",27),r.Ob()),2&e){var n=r.ac();r.zb(2),r.Cb("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function ju(e,t){if(1&e&&(r.Pb(0,"div"),r.ec(1,5),r.Ob()),2&e){var n=r.ac();r.gc("@transitionMessages",n._subscriptAnimationState)}}function Pu(e,t){if(1&e&&(r.Pb(0,"div",31),r.wc(1),r.Ob()),2&e){var n=r.ac(2);r.gc("id",n._hintLabelId),r.zb(1),r.xc(n.hintLabel)}}function Ru(e,t){if(1&e&&(r.Pb(0,"div",28),r.vc(1,Pu,2,2,"div",29),r.ec(2,6),r.Lb(3,"div",30),r.ec(4,7),r.Ob()),2&e){var n=r.ac();r.gc("@transitionMessages",n._subscriptAnimationState),r.zb(1),r.gc("ngIf",n.hintLabel)}}var Iu=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Du=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Fu=new r.q("MatError"),Lu={transitionMessages:Sn("transitionMessages",[Cn("enter",Tn({opacity:1,transform:"translateY(0%)"})),Mn("void => enter",[Tn({opacity:0,transform:"translateY(-100%)"}),En("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Nu=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Fb({type:e}),e}(),Bu=new r.q("MatHint"),Hu=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Fb({type:e,selectors:[["mat-label"]]}),e}(),Uu=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.Fb({type:e,selectors:[["mat-placeholder"]]}),e}(),Vu=new r.q("MatPrefix"),zu=new r.q("MatSuffix"),Wu=0,Gu=ra((function e(t){Object(l.a)(this,e),this._elementRef=t}),"primary"),Ku=new r.q("MAT_FORM_FIELD_DEFAULT_OPTIONS"),qu=new r.q("MatFormField"),Xu=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s,u,c){var h;return Object(l.a)(this,n),(h=t.call(this,e))._elementRef=e,h._changeDetectorRef=r,h._dir=a,h._defaults=o,h._platform=s,h._ngZone=u,h._outlineGapCalculationNeededImmediately=!1,h._outlineGapCalculationNeededOnStable=!1,h._destroyed=new qe.a,h._showAlwaysAnimate=!1,h._subscriptAnimationState="",h._hintLabel="",h._hintLabelId="mat-hint-".concat(Wu++),h._labelId="mat-form-field-label-".concat(Wu++),h._labelOptions=i||{},h.floatLabel=h._getDefaultFloatLabelState(),h._animationsEnabled="NoopAnimations"!==c,h.appearance=o&&o.appearance?o.appearance:"legacy",h._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker,h}return Object(h.a)(n,[{key:"appearance",get:function(){return this._appearance},set:function(e){var t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}},{key:"hideRequiredMarker",get:function(){return this._hideRequiredMarker},set:function(e){this._hideRequiredMarker=tt(e)}},{key:"_shouldAlwaysFloat",value:function(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}},{key:"_canLabelFloat",value:function(){return"never"!==this.floatLabel}},{key:"hintLabel",get:function(){return this._hintLabel},set:function(e){this._hintLabel=e,this._processHints()}},{key:"floatLabel",get:function(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel},set:function(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}},{key:"_control",get:function(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic},set:function(e){this._explicitFormFieldControl=e}},{key:"getLabelId",value:function(){return this._hasFloatingLabel()?this._labelId:null}},{key:"getConnectedOverlayOrigin",value:function(){return this._connectionContainerRef||this._elementRef}},{key:"ngAfterContentInit",value:function(){var e=this;this._validateControlChild();var t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-".concat(t.controlType)),t.stateChanges.pipe(Ht(null)).subscribe((function(){e._validatePlaceholders(),e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()})),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Ro(this._destroyed)).subscribe((function(){return e._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.pipe(Ro(e._destroyed)).subscribe((function(){e._outlineGapCalculationNeededOnStable&&e.updateOutlineGap()}))})),Object(Zo.a)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe((function(){e._outlineGapCalculationNeededOnStable=!0,e._changeDetectorRef.markForCheck()})),this._hintChildren.changes.pipe(Ht(null)).subscribe((function(){e._processHints(),e._changeDetectorRef.markForCheck()})),this._errorChildren.changes.pipe(Ht(null)).subscribe((function(){e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()})),this._dir&&this._dir.change.pipe(Ro(this._destroyed)).subscribe((function(){"function"==typeof requestAnimationFrame?e._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){return e.updateOutlineGap()}))})):e.updateOutlineGap()}))}},{key:"ngAfterContentChecked",value:function(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}},{key:"ngAfterViewInit",value:function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_shouldForward",value:function(e){var t=this._control?this._control.ngControl:null;return t&&t[e]}},{key:"_hasPlaceholder",value:function(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}},{key:"_hasLabel",value:function(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}},{key:"_shouldLabelFloat",value:function(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}},{key:"_hideControlPlaceholder",value:function(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}},{key:"_hasFloatingLabel",value:function(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}},{key:"_getDisplayedMessages",value:function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}},{key:"_animateAndLockLabel",value:function(){var e=this;this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,bo(this._label.nativeElement,"transitionend").pipe(Object(et.a)(1)).subscribe((function(){e._showAlwaysAnimate=!1}))),this.floatLabel="always",this._changeDetectorRef.markForCheck())}},{key:"_validatePlaceholders",value:function(){}},{key:"_processHints",value:function(){this._validateHints(),this._syncDescribedByIds()}},{key:"_validateHints",value:function(){}},{key:"_getDefaultFloatLabelState",value:function(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}},{key:"_syncDescribedByIds",value:function(){if(this._control){var e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push.apply(e,Object(s.a)(this._control.userAriaDescribedBy.split(" "))),"hint"===this._getDisplayedMessages()){var t=this._hintChildren?this._hintChildren.find((function(e){return"start"===e.align})):null,n=this._hintChildren?this._hintChildren.find((function(e){return"end"===e.align})):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&e.push.apply(e,Object(s.a)(this._errorChildren.map((function(e){return e.id}))));this._control.setDescribedByIds(e)}}},{key:"_validateControlChild",value:function(){}},{key:"updateOutlineGap",value:function(){var e=this._label?this._label.nativeElement:null;if("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&this._platform.isBrowser)if(this._isAttachedToDOM()){var t=0,n=0,r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),a=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){var o=r.getBoundingClientRect();if(0===o.width&&0===o.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);for(var s=this._getStartEnd(o),u=e.children,c=this._getStartEnd(u[0].getBoundingClientRect()),l=0,h=0;h<u.length;h++)l+=u[h].offsetWidth;t=Math.abs(c-s)-5,n=l>0?.75*l+10:0}for(var f=0;f<i.length;f++)i[f].style.width="".concat(t,"px");for(var d=0;d<a.length;d++)a[d].style.width="".concat(n,"px");this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}else this._outlineGapCalculationNeededImmediately=!0}},{key:"_getStartEnd",value:function(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}},{key:"_isAttachedToDOM",value:function(){var e=this._elementRef.nativeElement;if(e.getRootNode){var t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}}]),n}(Gu);return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.l),r.Kb(r.h),r.Kb(Ra,8),r.Kb(Rt,8),r.Kb(Ku,8),r.Kb(ze),r.Kb(r.z),r.Kb(qi,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-form-field"]],contentQueries:function(e,t,n){var i;1&e&&(r.Db(n,Nu,!0),r.qc(n,Nu,!0),r.Db(n,Hu,!0),r.qc(n,Hu,!0),r.Db(n,Uu,!0),r.Db(n,Fu,!0),r.Db(n,Bu,!0),r.Db(n,Vu,!0),r.Db(n,zu,!0)),2&e&&(r.kc(i=r.Xb())&&(t._controlNonStatic=i.first),r.kc(i=r.Xb())&&(t._controlStatic=i.first),r.kc(i=r.Xb())&&(t._labelChildNonStatic=i.first),r.kc(i=r.Xb())&&(t._labelChildStatic=i.first),r.kc(i=r.Xb())&&(t._placeholderChild=i.first),r.kc(i=r.Xb())&&(t._errorChildren=i),r.kc(i=r.Xb())&&(t._hintChildren=i),r.kc(i=r.Xb())&&(t._prefixChildren=i),r.kc(i=r.Xb())&&(t._suffixChildren=i))},viewQuery:function(e,t){var n;1&e&&(r.Ac(bu,!0),r.rc(_u,!0),r.Ac(wu,!0),r.Ac(xu,!0)),2&e&&(r.kc(n=r.Xb())&&(t.underlineRef=n.first),r.kc(n=r.Xb())&&(t._connectionContainerRef=n.first),r.kc(n=r.Xb())&&(t._inputContainerRef=n.first),r.kc(n=r.Xb())&&(t._label=n.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(e,t){2&e&&r.Cb("mat-form-field-appearance-standard","standard"==t.appearance)("mat-form-field-appearance-fill","fill"==t.appearance)("mat-form-field-appearance-outline","outline"==t.appearance)("mat-form-field-appearance-legacy","legacy"==t.appearance)("mat-form-field-invalid",t._control.errorState)("mat-form-field-can-float",t._canLabelFloat())("mat-form-field-should-float",t._shouldLabelFloat())("mat-form-field-has-label",t._hasFloatingLabel())("mat-form-field-hide-placeholder",t._hideControlPlaceholder())("mat-form-field-disabled",t._control.disabled)("mat-form-field-autofilled",t._control.autofilled)("mat-focused",t._control.focused)("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)("ng-untouched",t._shouldForward("untouched"))("ng-touched",t._shouldForward("touched"))("ng-pristine",t._shouldForward("pristine"))("ng-dirty",t._shouldForward("dirty"))("ng-valid",t._shouldForward("valid"))("ng-invalid",t._shouldForward("invalid"))("ng-pending",t._shouldForward("pending"))("_mat-animation-noopable",!t._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[r.yb([{provide:qu,useExisting:e}]),r.wb],ngContentSelectors:Du,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,t){1&e&&(r.fc(Iu),r.Pb(0,"div",0),r.Pb(1,"div",1,2),r.Wb("click",(function(e){return t._control.onContainerClick&&t._control.onContainerClick(e)})),r.vc(3,ku,9,0,"ng-container",3),r.vc(4,Su,2,0,"div",4),r.Pb(5,"div",5,6),r.ec(7),r.Pb(8,"span",7),r.vc(9,Cu,5,16,"label",8),r.Ob(),r.Ob(),r.vc(10,Au,2,0,"div",9),r.Ob(),r.vc(11,Mu,3,4,"div",10),r.Pb(12,"div",11),r.vc(13,ju,2,1,"div",12),r.vc(14,Ru,5,2,"div",13),r.Ob(),r.Ob()),2&e&&(r.zb(3),r.gc("ngIf","outline"==t.appearance),r.zb(1),r.gc("ngIf",t._prefixChildren.length),r.zb(5),r.gc("ngIf",t._hasFloatingLabel()),r.zb(1),r.gc("ngIf",t._suffixChildren.length),r.zb(1),r.gc("ngIf","outline"!=t.appearance),r.zb(1),r.gc("ngSwitch",t._getDisplayedMessages()),r.zb(1),r.gc("ngSwitchCase","error"),r.zb(1),r.gc("ngSwitchCase","hint"))},directives:[f.l,f.n,f.o,ct],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Lu.transitionMessages]},changeDetection:0}),e}(),Yu=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[f.c,ta,lt],ta]}),e}(),Zu=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[sa],imports:[[yu,Yu],yu,Yu]}),e}(),Ju=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[ta,f.c],ta]}),e}(),Qu=["trigger"],$u=["panel"];function ec(e,t){if(1&e&&(r.Pb(0,"span",8),r.wc(1),r.Ob()),2&e){var n=r.ac();r.zb(1),r.xc(n.placeholder||"\xa0")}}function tc(e,t){if(1&e&&(r.Pb(0,"span"),r.wc(1),r.Ob()),2&e){var n=r.ac(2);r.zb(1),r.xc(n.triggerValue||"\xa0")}}function nc(e,t){1&e&&r.ec(0,0,["*ngSwitchCase","true"])}function rc(e,t){if(1&e&&(r.Pb(0,"span",9),r.vc(1,tc,2,1,"span",10),r.vc(2,nc,1,0,"ng-content",11),r.Ob()),2&e){var n=r.ac();r.gc("ngSwitch",!!n.customTrigger),r.zb(2),r.gc("ngSwitchCase",!0)}}function ic(e,t){if(1&e){var n=r.Qb();r.Pb(0,"div",12),r.Pb(1,"div",13,14),r.Wb("@transformPanel.done",(function(e){return r.nc(n),r.ac()._panelDoneAnimatingStream.next(e.toState)}))("keydown",(function(e){return r.nc(n),r.ac()._handleKeydown(e)})),r.ec(3,1),r.Ob(),r.Ob()}if(2&e){var i=r.ac();r.gc("@transformPanelWrap",void 0),r.zb(1),r.Bb("mat-select-panel ",i._getPanelTheme(),""),r.sc("transform-origin",i._transformOrigin)("font-size",i._triggerFontSize,"px"),r.gc("ngClass",i.panelClass)("@transformPanel",i.multiple?"showing-multiple":"showing"),r.Ab("id",i.id+"-panel")("aria-multiselectable",i.multiple)("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby())}}var ac,oc=[[["mat-select-trigger"]],"*"],sc=["mat-select-trigger","*"],uc={transformPanelWrap:Sn("transformPanelWrap",[Mn("* => void",Pn("@transformPanel",[jn()],{optional:!0}))]),transformPanel:Sn("transformPanel",[Cn("void",Tn({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Cn("showing",Tn({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Cn("showing-multiple",Tn({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Mn("void => *",En("120ms cubic-bezier(0, 0, 0.2, 1)")),Mn("* => void",En("100ms 25ms linear",Tn({opacity:0})))])},cc=0,lc=new r.q("mat-select-scroll-strategy"),hc=new r.q("MAT_SELECT_CONFIG"),fc={provide:lc,deps:[ks],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},dc=function e(t,n){Object(l.a)(this,e),this.source=t,this.value=n},pc=ia(aa(na(oa((function e(t,n,r,i,a){Object(l.a)(this,e),this._elementRef=t,this._defaultErrorStateMatcher=n,this._parentForm=r,this._parentFormGroup=i,this.ngControl=a}))))),vc=new r.q("MatSelectTrigger"),mc=function(){var e=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,i,o,u,c,h,f,d,p,m,g,y,b,_){var w;return Object(l.a)(this,n),(w=t.call(this,c,u,f,d,m))._viewportRuler=e,w._changeDetectorRef=i,w._ngZone=o,w._dir=h,w._parentFormField=p,w.ngControl=m,w._liveAnnouncer=b,w._panelOpen=!1,w._required=!1,w._scrollTop=0,w._multiple=!1,w._compareWith=function(e,t){return e===t},w._uid="mat-select-".concat(cc++),w._triggerAriaLabelledBy=null,w._destroy=new qe.a,w._triggerFontSize=0,w._onChange=function(){},w._onTouched=function(){},w._valueId="mat-select-value-".concat(cc++),w._transformOrigin="top",w._panelDoneAnimatingStream=new qe.a,w._offsetY=0,w._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],w._disableOptionCentering=!1,w._focused=!1,w.controlType="mat-select",w.ariaLabel="",w.optionSelectionChanges=js((function(){var e=w.options;return e?e.changes.pipe(Ht(e),Object(Fo.a)((function(){return Zo.a.apply(void 0,Object(s.a)(e.map((function(e){return e.onSelectionChange}))))}))):w._ngZone.onStable.pipe(Object(et.a)(1),Object(Fo.a)((function(){return w.optionSelectionChanges})))})),w.openedChange=new r.n,w._openedStream=w.openedChange.pipe(Object($e.a)((function(e){return e})),Object(v.a)((function(){}))),w._closedStream=w.openedChange.pipe(Object($e.a)((function(e){return!e})),Object(v.a)((function(){}))),w.selectionChange=new r.n,w.valueChange=new r.n,w.ngControl&&(w.ngControl.valueAccessor=Object(a.a)(w)),w._scrollStrategyFactory=y,w._scrollStrategy=w._scrollStrategyFactory(),w.tabIndex=parseInt(g)||0,w.id=w.id,_&&(null!=_.disableOptionCentering&&(w.disableOptionCentering=_.disableOptionCentering),null!=_.typeaheadDebounceInterval&&(w.typeaheadDebounceInterval=_.typeaheadDebounceInterval)),w}return Object(h.a)(n,[{key:"focused",get:function(){return this._focused||this._panelOpen}},{key:"placeholder",get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()}},{key:"required",get:function(){return this._required},set:function(e){this._required=tt(e),this.stateChanges.next()}},{key:"multiple",get:function(){return this._multiple},set:function(e){this._multiple=tt(e)}},{key:"disableOptionCentering",get:function(){return this._disableOptionCentering},set:function(e){this._disableOptionCentering=tt(e)}},{key:"compareWith",get:function(){return this._compareWith},set:function(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(e){e!==this._value&&(this.options&&this._setSelectionByValue(e),this._value=e)}},{key:"typeaheadDebounceInterval",get:function(){return this._typeaheadDebounceInterval},set:function(e){this._typeaheadDebounceInterval=nt(e)}},{key:"id",get:function(){return this._id},set:function(e){this._id=e||this._uid,this.stateChanges.next()}},{key:"ngOnInit",value:function(){var e=this;this._selectionModel=new Ua(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(wo(),Ro(this._destroy)).subscribe((function(){e.panelOpen?(e._scrollTop=0,e.openedChange.emit(!0)):(e.openedChange.emit(!1),e.overlayDir.offsetX=0,e._changeDetectorRef.markForCheck())})),this._viewportRuler.change().pipe(Ro(this._destroy)).subscribe((function(){e._panelOpen&&(e._triggerRect=e.trigger.nativeElement.getBoundingClientRect(),e._changeDetectorRef.markForCheck())}))}},{key:"ngAfterContentInit",value:function(){var e=this;this._initKeyManager(),this._selectionModel.changed.pipe(Ro(this._destroy)).subscribe((function(e){e.added.forEach((function(e){return e.select()})),e.removed.forEach((function(e){return e.deselect()}))})),this.options.changes.pipe(Ht(null),Ro(this._destroy)).subscribe((function(){e._resetOptions(),e._initializeSelection()}))}},{key:"ngDoCheck",value:function(){var e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){var t=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?t.setAttribute("aria-labelledby",e):t.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}},{key:"ngOnChanges",value:function(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}},{key:"ngOnDestroy",value:function(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}},{key:"toggle",value:function(){this.panelOpen?this.close():this.open()}},{key:"open",value:function(){var e=this;!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Object(et.a)(1)).subscribe((function(){e._triggerFontSize&&e.overlayDir.overlayRef&&e.overlayDir.overlayRef.overlayElement&&(e.overlayDir.overlayRef.overlayElement.style.fontSize="".concat(e._triggerFontSize,"px"))})))}},{key:"close",value:function(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}},{key:"writeValue",value:function(e){this.value=e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"panelOpen",get:function(){return this._panelOpen}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"triggerValue",get:function(){if(this.empty)return"";if(this._multiple){var e=this._selectionModel.selected.map((function(e){return e.viewValue}));return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}},{key:"_isRtl",value:function(){return!!this._dir&&"rtl"===this._dir.value}},{key:"_handleKeydown",value:function(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}},{key:"_handleClosedKeydown",value:function(e){var t=e.keyCode,n=40===t||38===t||37===t||39===t,r=13===t||32===t,i=this._keyManager;if(!i.isTyping()&&r&&!Ze(e)||(this.multiple||e.altKey)&&n)e.preventDefault(),this.open();else if(!this.multiple){var a=this.selected;i.onKeydown(e);var o=this.selected;o&&a!==o&&this._liveAnnouncer.announce(o.viewValue,1e4)}}},{key:"_handleOpenKeydown",value:function(e){var t=this._keyManager,n=e.keyCode,r=40===n||38===n,i=t.isTyping();if(r&&e.altKey)e.preventDefault(),this.close();else if(i||13!==n&&32!==n||!t.activeItem||Ze(e))if(!i&&this._multiple&&65===n&&e.ctrlKey){e.preventDefault();var a=this.options.some((function(e){return!e.disabled&&!e.selected}));this.options.forEach((function(e){e.disabled||(a?e.select():e.deselect())}))}else{var o=t.activeItemIndex;t.onKeydown(e),this._multiple&&r&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==o&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}},{key:"_onFocus",value:function(){this.disabled||(this._focused=!0,this.stateChanges.next())}},{key:"_onBlur",value:function(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}},{key:"_onAttached",value:function(){var e=this;this.overlayDir.positionChange.pipe(Object(et.a)(1)).subscribe((function(){e._changeDetectorRef.detectChanges(),e._calculateOverlayOffsetX(),e.panel.nativeElement.scrollTop=e._scrollTop}))}},{key:"_getPanelTheme",value:function(){return this._parentFormField?"mat-".concat(this._parentFormField.color):""}},{key:"empty",get:function(){return!this._selectionModel||this._selectionModel.isEmpty()}},{key:"_initializeSelection",value:function(){var e=this;Promise.resolve().then((function(){e._setSelectionByValue(e.ngControl?e.ngControl.value:e._value),e.stateChanges.next()}))}},{key:"_setSelectionByValue",value:function(e){var t=this;if(this.multiple&&e)Array.isArray(e),this._selectionModel.clear(),e.forEach((function(e){return t._selectValue(e)})),this._sortValues();else{this._selectionModel.clear();var n=this._selectValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}},{key:"_selectValue",value:function(e){var t=this,n=this.options.find((function(n){try{return null!=n.value&&t._compareWith(n.value,e)}catch(r){return!1}}));return n&&this._selectionModel.select(n),n}},{key:"_initKeyManager",value:function(){var e=this;this._keyManager=new mt(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Ro(this._destroy)).subscribe((function(){e.panelOpen&&(!e.multiple&&e._keyManager.activeItem&&e._keyManager.activeItem._selectViaInteraction(),e.focus(),e.close())})),this._keyManager.change.pipe(Ro(this._destroy)).subscribe((function(){e._panelOpen&&e.panel?e._scrollActiveOptionIntoView():e._panelOpen||e.multiple||!e._keyManager.activeItem||e._keyManager.activeItem._selectViaInteraction()}))}},{key:"_resetOptions",value:function(){var e=this,t=Object(Zo.a)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ro(t)).subscribe((function(t){e._onSelect(t.source,t.isUserInput),t.isUserInput&&!e.multiple&&e._panelOpen&&(e.close(),e.focus())})),Zo.a.apply(void 0,Object(s.a)(this.options.map((function(e){return e._stateChanges})))).pipe(Ro(t)).subscribe((function(){e._changeDetectorRef.markForCheck(),e.stateChanges.next()}))}},{key:"_onSelect",value:function(e,t){var n=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(n!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}},{key:"_sortValues",value:function(){var e=this;if(this.multiple){var t=this.options.toArray();this._selectionModel.sort((function(n,r){return e.sortComparator?e.sortComparator(n,r,t):t.indexOf(n)-t.indexOf(r)})),this.stateChanges.next()}}},{key:"_propagateChanges",value:function(e){var t;t=this.multiple?this.selected.map((function(e){return e.value})):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(new dc(this,t)),this._changeDetectorRef.markForCheck()}},{key:"_highlightCorrectOption",value:function(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}},{key:"_scrollActiveOptionIntoView",value:function(){var e,t,n,r=this._keyManager.activeItemIndex||0,i=ja(r,this.options,this.optionGroups),a=this._getItemHeight();this.panel.nativeElement.scrollTop=(t=a,(e=(r+i)*a)<(n=this.panel.nativeElement.scrollTop)?e:e+t>n+256?Math.max(0,e-256+t):n)}},{key:"focus",value:function(e){this._elementRef.nativeElement.focus(e)}},{key:"_getOptionIndex",value:function(e){return this.options.reduce((function(t,n,r){return void 0!==t?t:e===n?r:void 0}),void 0)}},{key:"_calculateOverlayPosition",value:function(){var e=this._getItemHeight(),t=this._getItemCount(),n=Math.min(t*e,256),r=t*e-n,i=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);i+=ja(i,this.options,this.optionGroups);var a=n/2;this._scrollTop=this._calculateOverlayScroll(i,a,r),this._offsetY=this._calculateOverlayOffsetY(i,a,r),this._checkOverlayWithinViewport(r)}},{key:"_calculateOverlayScroll",value:function(e,t,n){var r=this._getItemHeight();return Math.min(Math.max(0,r*e-t+r/2),n)}},{key:"_getPanelAriaLabelledby",value:function(){if(this.ariaLabel)return null;var e=this._getLabelId();return this.ariaLabelledby?e+" "+this.ariaLabelledby:e}},{key:"_getAriaActiveDescendant",value:function(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}},{key:"_getLabelId",value:function(){var e;return(null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId())||""}},{key:"_calculateOverlayOffsetX",value:function(){var e,t=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),i=this.multiple?56:32;if(this.multiple)e=40;else{var a=this._selectionModel.selected[0]||this.options.first;e=a&&a.group?32:16}r||(e*=-1);var o=0-(t.left+e-(r?i:0)),s=t.right+e-n.width+(r?0:i);o>0?e+=o+8:s>0&&(e-=s+8),this.overlayDir.offsetX=Math.round(e),this.overlayDir.overlayRef.updatePosition()}},{key:"_calculateOverlayOffsetY",value:function(e,t,n){var r,i=this._getItemHeight(),a=(i-this._triggerRect.height)/2,o=Math.floor(256/i);return this._disableOptionCentering?0:(r=0===this._scrollTop?e*i:this._scrollTop===n?(e-(this._getItemCount()-o))*i+(i-(this._getItemCount()*i-256)%i):t-i/2,Math.round(-1*r-a))}},{key:"_checkOverlayWithinViewport",value:function(e){var t=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,i=n.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*t,256)-a-this._triggerRect.height;o>i?this._adjustPanelUp(o,i):a>r?this._adjustPanelDown(a,r,e):this._transformOrigin=this._getOriginBasedOnOption()}},{key:"_adjustPanelUp",value:function(e,t){var n=Math.round(e-t);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}},{key:"_adjustPanelDown",value:function(e,t,n){var r=Math.round(e-t);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}},{key:"_getOriginBasedOnOption",value:function(){var e=this._getItemHeight(),t=(e-this._triggerRect.height)/2,n=Math.abs(this._offsetY)-t+e/2;return"50% ".concat(n,"px 0px")}},{key:"_getItemCount",value:function(){return this.options.length+this.optionGroups.length}},{key:"_getItemHeight",value:function(){return 3*this._triggerFontSize}},{key:"_getTriggerAriaLabelledby",value:function(){if(this.ariaLabel)return null;var e=this._getLabelId()+" "+this._valueId;return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e}},{key:"setDescribedByIds",value:function(e){this._ariaDescribedby=e.join(" ")}},{key:"onContainerClick",value:function(){this.focus(),this.open()}},{key:"shouldLabelFloat",get:function(){return this._panelOpen||!this.empty}}]),n}(pc);return e.\u0275fac=function(t){return new(t||e)(r.Kb(Bo),r.Kb(r.h),r.Kb(r.z),r.Kb(sa),r.Kb(r.l),r.Kb(Rt,8),r.Kb(Oe,8),r.Kb(Fe,8),r.Kb(qu,8),r.Kb(M,10),r.Ub("tabindex"),r.Kb(lc),r.Kb(St),r.Kb(hc,8))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-select"]],contentQueries:function(e,t,n){var i;1&e&&(r.Db(n,vc,!0),r.Db(n,Ma,!0),r.Db(n,Ea,!0)),2&e&&(r.kc(i=r.Xb())&&(t.customTrigger=i.first),r.kc(i=r.Xb())&&(t.options=i),r.kc(i=r.Xb())&&(t.optionGroups=i))},viewQuery:function(e,t){var n;1&e&&(r.Ac(Qu,!0),r.Ac($u,!0),r.Ac(Ts,!0)),2&e&&(r.kc(n=r.Xb())&&(t.trigger=n.first),r.kc(n=r.Xb())&&(t.panel=n.first),r.kc(n=r.Xb())&&(t.overlayDir=n.first))},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,t){1&e&&r.Wb("keydown",(function(e){return t._handleKeydown(e)}))("focus",(function(){return t._onFocus()}))("blur",(function(){return t._onBlur()})),2&e&&(r.Ab("id",t.id)("tabindex",t.tabIndex)("aria-controls",t.panelOpen?t.id+"-panel":null)("aria-expanded",t.panelOpen)("aria-label",t.ariaLabel||null)("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),r.Cb("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty)("mat-select-multiple",t.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],id:"id",disableOptionCentering:"disableOptionCentering",typeaheadDebounceInterval:"typeaheadDebounceInterval",placeholder:"placeholder",required:"required",multiple:"multiple",compareWith:"compareWith",value:"value",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[r.yb([{provide:Nu,useExisting:e},{provide:Ca,useExisting:e}]),r.wb,r.xb],ngContentSelectors:sc,decls:9,vars:10,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder"],[1,"mat-select-value-text",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(r.fc(oc),r.Pb(0,"div",0,1),r.Wb("click",(function(){return t.toggle()})),r.Pb(3,"div",2),r.vc(4,ec,2,1,"span",3),r.vc(5,rc,3,2,"span",4),r.Ob(),r.Pb(6,"div",5),r.Lb(7,"div",6),r.Ob(),r.Ob(),r.vc(8,ic,4,14,"ng-template",7),r.Wb("backdropClick",(function(){return t.close()}))("attach",(function(){return t._onAttached()}))("detach",(function(){return t.close()}))),2&e){var n=r.lc(1);r.zb(3),r.gc("ngSwitch",t.empty),r.Ab("id",t._valueId),r.zb(1),r.gc("ngSwitchCase",!0),r.zb(1),r.gc("ngSwitchCase",!1),r.zb(3),r.gc("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",n)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[Os,f.n,f.o,Ts,f.p,f.j],styles:[".mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}\n"],encapsulation:2,data:{animation:[uc.transformPanelWrap,uc.transformPanel]},changeDetection:0}),e}(),gc=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[fc],imports:[[f.c,As,Pa,ta],Ho,Yu,Pa,ta]}),e}(),yc=n("itXk"),bc=function(){function e(t){Object(l.a)(this,e),this.total=t}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new _c(e,this.total))}}]),e}(),_c=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return Object(h.a)(n,[{key:"_next",value:function(e){++this.count>this.total&&this.destination.next(e)}}]),n}(_o.a),wc=new Set,xc=function(){var e=function(){function e(t){Object(l.a)(this,e),this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):kc}return Object(h.a)(e,[{key:"matchMedia",value:function(e){return this._platform.WEBKIT&&function(e){if(!wc.has(e))try{ac||((ac=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(ac)),ac.sheet&&(ac.sheet.insertRule("@media ".concat(e," {.fx-query-test{ }}"),0),wc.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(ze))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(ze))},token:e,providedIn:"root"}),e}();function kc(e){return{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}var Sc=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new qe.a}return Object(h.a)(e,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(e){var t=this;return Ec(it(e)).some((function(e){return t._registerQuery(e).mql.matches}))}},{key:"observe",value:function(e){var t=this,n=Ec(it(e)).map((function(e){return t._registerQuery(e).observable})),r=Object(yc.a)(n);return(r=Nt(r.pipe(Object(et.a)(1)),r.pipe((function(e){return e.lift(new bc(1))}),Object(Qe.a)(0)))).pipe(Object(v.a)((function(e){var t={matches:!1,breakpoints:{}};return e.forEach((function(e){var n=e.matches,r=e.query;t.matches=t.matches||n,t.breakpoints[r]=n})),t})))}},{key:"_registerQuery",value:function(e){var t=this;if(this._queries.has(e))return this._queries.get(e);var n=this._mediaMatcher.matchMedia(e),r={observable:new d.a((function(e){var r=function(n){return t._zone.run((function(){return e.next(n)}))};return n.addListener(r),function(){n.removeListener(r)}})).pipe(Ht(n),Object(v.a)((function(t){return{query:e,matches:t.matches}})),Ro(this._destroySubject)),mql:n};return this._queries.set(e,r),r}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(xc),r.Tb(r.z))},e.\u0275prov=Object(r.Gb)({factory:function(){return new e(Object(r.Tb)(xc),Object(r.Tb)(r.z))},token:e,providedIn:"root"}),e}();function Ec(e){return e.map((function(e){return e.split(",")})).reduce((function(e,t){return e.concat(t)})).map((function(e){return e.trim()}))}var Oc={tooltipState:Sn("state",[Cn("initial, void, hidden",Tn({opacity:0,transform:"scale(0)"})),Cn("visible",Tn({transform:"scale(1)"})),Mn("* => visible",En("200ms cubic-bezier(0, 0, 0.2, 1)",An([Tn({opacity:0,transform:"scale(0)",offset:0}),Tn({opacity:.5,transform:"scale(0.99)",offset:.5}),Tn({opacity:1,transform:"scale(1)",offset:1})]))),Mn("* => hidden",En("100ms cubic-bezier(0, 0, 0.2, 1)",Tn({opacity:0})))])},Tc=Ge({passive:!0}),Cc=new r.q("mat-tooltip-scroll-strategy"),Ac={provide:Cc,deps:[ks],useFactory:function(e){return function(){return e.scrollStrategies.reposition({scrollThrottle:20})}}},Mc=new r.q("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),jc=function(){var e=function(){function e(t,n,r,i,a,o,s,u,c,h,f){var d=this;Object(l.a)(this,e),this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=i,this._ngZone=a,this._platform=o,this._ariaDescriber=s,this._focusMonitor=u,this._dir=h,this._defaultOptions=f,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new qe.a,this._handleKeydown=function(e){d._isTooltipVisible()&&27===e.keyCode&&!Ze(e)&&(e.preventDefault(),e.stopPropagation(),d._ngZone.run((function(){return d.hide(0)})))},this._scrollStrategy=c,f&&(f.position&&(this.position=f.position),f.touchGestures&&(this.touchGestures=f.touchGestures)),a.runOutsideAngular((function(){n.nativeElement.addEventListener("keydown",d._handleKeydown)}))}return Object(h.a)(e,[{key:"position",get:function(){return this._position},set:function(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=tt(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}},{key:"message",get:function(){return this._message},set:function(e){var t=this;this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular((function(){Promise.resolve().then((function(){t._ariaDescriber.describe(t._elementRef.nativeElement,t.message)}))})))}},{key:"tooltipClass",get:function(){return this._tooltipClass},set:function(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}},{key:"ngAfterViewInit",value:function(){var e=this;this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ro(this._destroyed)).subscribe((function(t){t?"keyboard"===t&&e._ngZone.run((function(){return e.show()})):e._ngZone.run((function(){return e.hide(0)}))}))}},{key:"ngOnDestroy",value:function(){var e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach((function(t){var n=Object(Vt.a)(t,2);e.removeEventListener(n[0],n[1],Tc)})),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message),this._focusMonitor.stopMonitoring(e)}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.showDelay;if(!this.disabled&&this.message&&(!this._isTooltipVisible()||this._tooltipInstance._showTimeoutId||this._tooltipInstance._hideTimeoutId)){var n=this._createOverlay();this._detach(),this._portal=this._portal||new zo(Pc,this._viewContainerRef),this._tooltipInstance=n.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Ro(this._destroyed)).subscribe((function(){return e._detach()})),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(t)}}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hideDelay;this._tooltipInstance&&this._tooltipInstance.hide(e)}},{key:"toggle",value:function(){this._isTooltipVisible()?this.hide():this.show()}},{key:"_isTooltipVisible",value:function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}},{key:"_createOverlay",value:function(){var e=this;if(this._overlayRef)return this._overlayRef;var t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(t);return n.positionChanges.pipe(Ro(this._destroyed)).subscribe((function(t){e._tooltipInstance&&t.scrollableViewProperties.isOverlayClipped&&e._tooltipInstance.isVisible()&&e._ngZone.run((function(){return e.hide(0)}))})),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Ro(this._destroyed)).subscribe((function(){return e._detach()})),this._overlayRef}},{key:"_detach",value:function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}},{key:"_updatePosition",value:function(){var e=this._overlayRef.getConfig().positionStrategy,t=this._getOrigin(),n=this._getOverlayPosition();e.withPositions([Object.assign(Object.assign({},t.main),n.main),Object.assign(Object.assign({},t.fallback),n.fallback)])}},{key:"_getOrigin",value:function(){var e,t=!this._dir||"ltr"==this._dir.value,n=this.position;"above"==n||"below"==n?e={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?e={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(e={originX:"end",originY:"center"});var r=this._invertPosition(e.originX,e.originY);return{main:e,fallback:{originX:r.x,originY:r.y}}}},{key:"_getOverlayPosition",value:function(){var e,t=!this._dir||"ltr"==this._dir.value,n=this.position;"above"==n?e={overlayX:"center",overlayY:"bottom"}:"below"==n?e={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?e={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(e={overlayX:"start",overlayY:"center"});var r=this._invertPosition(e.overlayX,e.overlayY);return{main:e,fallback:{overlayX:r.x,overlayY:r.y}}}},{key:"_updateTooltipMessage",value:function(){var e=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Object(et.a)(1),Ro(this._destroyed)).subscribe((function(){e._tooltipInstance&&e._overlayRef.updatePosition()})))}},{key:"_setTooltipClass",value:function(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}},{key:"_invertPosition",value:function(e,t){return"above"===this.position||"below"===this.position?"top"===t?t="bottom":"bottom"===t&&(t="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:t}}},{key:"_setupPointerEnterEventsIfNeeded",value:function(){var e=this;!this._disabled&&this.message&&this._viewInitialized&&!this._passiveListeners.length&&(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",function(){e._setupPointerExitEventsIfNeeded(),e.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",function(){e._setupPointerExitEventsIfNeeded(),clearTimeout(e._touchstartTimeout),e._touchstartTimeout=setTimeout((function(){return e.show()}),500)}])),this._addListeners(this._passiveListeners))}},{key:"_setupPointerExitEventsIfNeeded",value:function(){var e,t=this;if(!this._pointerExitEventsInitialized){this._pointerExitEventsInitialized=!0;var n=[];if(this._platformSupportsMouseEvents())n.push(["mouseleave",function(){return t.hide()}]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();var r=function(){clearTimeout(t._touchstartTimeout),t.hide(t._defaultOptions.touchendHideDelay)};n.push(["touchend",r],["touchcancel",r])}this._addListeners(n),(e=this._passiveListeners).push.apply(e,n)}}},{key:"_addListeners",value:function(e){var t=this;e.forEach((function(e){var n=Object(Vt.a)(e,2);t._elementRef.nativeElement.addEventListener(n[0],n[1],Tc)}))}},{key:"_platformSupportsMouseEvents",value:function(){return!this._platform.IOS&&!this._platform.ANDROID}},{key:"_disableNativeGesturesIfNecessary",value:function(){var e=this.touchGestures;if("off"!==e){var t=this._elementRef.nativeElement,n=t.style;("on"===e||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName)&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),"on"!==e&&t.draggable||(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(ks),r.Kb(r.l),r.Kb(No),r.Kb(r.P),r.Kb(r.z),r.Kb(ze),r.Kb(vt),r.Kb(Ct),r.Kb(Cc),r.Kb(Rt,8),r.Kb(Mc,8))},e.\u0275dir=r.Fb({type:e,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),e}(),Pc=function(){var e=function(){function e(t,n){Object(l.a)(this,e),this._changeDetectorRef=t,this._breakpointObserver=n,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new qe.a,this._isHandset=this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)")}return Object(h.a)(e,[{key:"show",value:function(e){var t=this;this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout((function(){t._visibility="visible",t._showTimeoutId=null,t._markForCheck()}),e)}},{key:"hide",value:function(e){var t=this;this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout((function(){t._visibility="hidden",t._hideTimeoutId=null,t._markForCheck()}),e)}},{key:"afterHidden",value:function(){return this._onHide}},{key:"isVisible",value:function(){return"visible"===this._visibility}},{key:"ngOnDestroy",value:function(){this._onHide.complete()}},{key:"_animationStart",value:function(){this._closeOnInteraction=!1}},{key:"_animationDone",value:function(e){var t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)}},{key:"_handleBodyInteraction",value:function(){this._closeOnInteraction&&this.hide(0)}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(r.h),r.Kb(Sc))},e.\u0275cmp=r.Eb({type:e,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,t){1&e&&r.Wb("click",(function(){return t._handleBodyInteraction()}),!1,r.mc),2&e&&r.sc("zoom","visible"===t._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,t){if(1&e&&(r.Pb(0,"div",0),r.Wb("@state.start",(function(){return t._animationStart()}))("@state.done",(function(e){return t._animationDone(e)})),r.bc(1,"async"),r.wc(2),r.Ob()),2&e){var n,i=null==(n=r.cc(1,5,t._isHandset))?null:n.matches;r.Cb("mat-tooltip-handset",i),r.gc("ngClass",t.tooltipClass)("@state",t._visibility),r.zb(2),r.xc(t.message)}},directives:[f.j],pipes:[f.b],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[Oc.tooltipState]},changeDetection:0}),e}(),Rc=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[Ac],imports:[[jt,f.c,As,ta],ta,Ho]}),e}(),Ic=n("o0o1"),Dc=n.n(Ic),Fc=n("mrSG");function Lc(e,t,n,r){return new Promise((function(i,a){e||a("IndexedDB not available");var o,s=e.open(t,n);s.onsuccess=function(e){i(o=s.result)},s.onerror=function(e){a("IndexedDB error: ".concat(s.error))},"function"==typeof r&&(s.onupgradeneeded=function(e){r(e,o)})}))}function Nc(e,t,n,r,i){if(e){var a=e.open(t,n);a.onupgradeneeded=function(e){var t=e.target.result;r.forEach((function(e){if(!t.objectStoreNames.contains(e.store)){var n=t.createObjectStore(e.store,e.storeConfig);e.storeSchema.forEach((function(e){n.createIndex(e.name,e.keypath,e.options)}))}}));var n=i&&i();n&&Object.keys(n).map((function(e){return parseInt(e,10)})).filter((function(t){return t>e.oldVersion})).sort((function(e,t){return e-t})).forEach((function(e){n[e](t,a.transaction)})),t.close()},a.onsuccess=function(e){e.target.result.close()}}}function Bc(e,t,n){e||n("You need to use the openDatabase function to create a database before you query it!"),function(e,t){return e.objectStoreNames.contains(t)}(e,t)||n("objectStore does not exists: ".concat(t))}function Hc(e,t){var n=e.transaction(t.storeName,t.dbMode);return n.onerror=t.error,n.oncomplete=t.complete,n.onabort=t.abort,n}function Uc(e,t,n,r){return{storeName:t,dbMode:e,error:function(e){n(e)},complete:function(e){r()},abort:function(e){n(e)}}}var Vc,zc=new r.q(null),Wc=function(){var e=function(){function e(t,n){if(Object(l.a)(this,e),this.dbConfig=t,this.platformId=n,!t.name)throw new Error("NgxIndexedDB: Please, provide the dbName in the configuration");if(!t.version)throw new Error("NgxIndexedDB: Please, provide the db version in the configuration");this.isBrowser=Object(f.u)(n),this.isBrowser&&(this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,Nc(this.indexedDB,t.name,t.version,t.objectStoresMeta,t.migrationFactory))}return Object(h.a)(e,[{key:"createObjectStore",value:function(e,t){Nc(this.indexedDB,this.dbConfig.name,this.dbConfig.version,[e],t)}},{key:"add",value:function(e,t,n){var r=this;return new Promise((function(i,a){Lc(r.indexedDB,r.dbConfig.name,r.dbConfig.version).then((function(r){var o=Hc(r,Uc("readwrite",e,a,i)).objectStore(e);(n?o.add(t,n):o.add(t)).onsuccess=function(e){i(n=e.target.result)}}))}))}},{key:"getByKey",value:function(e,t){var n=this;return new Promise((function(r,i){Lc(n.indexedDB,n.dbConfig.name,n.dbConfig.version).then((function(n){var a=Hc(n,Uc("readonly",e,i,r)).objectStore(e).get(t);a.onsuccess=function(e){r(e.target.result)},a.onerror=function(e){i(e)}}))}))}},{key:"getByID",value:function(e,t){var n=this;return new Promise((function(r,i){Lc(n.indexedDB,n.dbConfig.name,n.dbConfig.version).then((function(n){Bc(n,e,i),Hc(n,Uc("readonly",e,i,r)).objectStore(e).get(t).onsuccess=function(e){r(e.target.result)}}))}))}},{key:"getAll",value:function(e){var t=this;return new Promise((function(n,r){Lc(t.indexedDB,t.dbConfig.name,t.dbConfig.version).then((function(t){Bc(t,e,r);var i=Hc(t,Uc("readonly",e,r,n)).objectStore(e).getAll();i.onerror=function(e){r(e)},i.onsuccess=function(e){n(e.target.result)}}))}))}},{key:"update",value:function(e,t,n){var r=this;return new Promise((function(i,a){Lc(r.indexedDB,r.dbConfig.name,r.dbConfig.version).then((function(r){Bc(r,e,a);var o=Hc(r,Uc("readwrite",e,a,i)),s=o.objectStore(e);o.oncomplete=function(e){i(e)},n?s.put(t,n):s.put(t)}))}))}},{key:"deleteRecord",value:function(e,t){var n=this;return new Promise((function(r,i){Lc(n.indexedDB,n.dbConfig.name,n.dbConfig.version).then((function(n){Bc(n,e,i),Hc(n,Uc("readwrite",e,i,r)).objectStore(e).delete(t).onsuccess=function(e){r(e)}}))}))}},{key:"clear",value:function(e){var t=this;return new Promise((function(n,r){Lc(t.indexedDB,t.dbConfig.name,t.dbConfig.version).then((function(t){Bc(t,e,r);var i=Hc(t,Uc("readwrite",e,r,n));i.objectStore(e).clear(),i.oncomplete=function(e){n()}}))}))}},{key:"delete",value:function(e,t){var n=this;return new Promise((function(r,i){Lc(n.indexedDB,n.dbConfig.name,n.dbConfig.version).then((function(n){Bc(n,e,i),Hc(n,Uc("readwrite",e,i,r)).objectStore(e).delete(t)}))}))}},{key:"deleteDatabase",value:function(){var e=this;return new Promise((function(t,n){return Object(Fc.a)(e,void 0,void 0,Dc.a.mark((function e(){var r,i;return Dc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lc(this.indexedDB,this.dbConfig.name,this.dbConfig.version);case 2:return r=e.sent,e.next=5,r.close();case 5:(i=this.indexedDB.deleteDatabase(this.dbConfig.name)).onsuccess=t,i.onerror=n,i.onblocked=function(){throw new Error("Unable to delete database because it's blocked")};case 9:case"end":return e.stop()}}),e,this)})))}))}},{key:"openCursor",value:function(e,t,n){var r=this;return new Promise((function(i,a){Lc(r.indexedDB,r.dbConfig.name,r.dbConfig.version).then((function(r){Bc(r,e,a);var o=Hc(r,Uc("readonly",e,a,i)).objectStore(e);(void 0===n?o.openCursor():o.openCursor(n)).onsuccess=function(e){t(e),i()}}))}))}},{key:"openCursorByIndex",value:function(e,t,n,r){var i=this;return new Promise((function(a,o){Lc(i.indexedDB,i.dbConfig.name,i.dbConfig.version).then((function(i){Bc(i,e,o),Hc(i,Uc("readonly",e,o,a)).objectStore(e).index(t).openCursor(n).onsuccess=function(e){r(e),a()}}))}))}},{key:"getAllByIndex",value:function(e,t,n){var r=this,i=[];return new Promise((function(a,o){r.openCursorByIndex(e,t,n,(function(e){var t=e.target.result;t?(i.push(t.value),t.continue()):a(i)})).catch((function(e){return o(e)}))}))}},{key:"getByIndex",value:function(e,t,n){var r=this;return new Promise((function(i,a){Lc(r.indexedDB,r.dbConfig.name,r.dbConfig.version).then((function(r){Bc(r,e,a),Hc(r,Uc("readonly",e,a,i)).objectStore(e).index(t).get(n).onsuccess=function(e){i(e.target.result)}}))}))}},{key:"count",value:function(e,t){var n=this;return new Promise((function(r,i){Lc(n.indexedDB,n.dbConfig.name,n.dbConfig.version).then((function(n){var a;Bc(n,e,i),(a=Hc(n,Uc("readonly",e,i,r)).objectStore(e).count(t)).onerror=function(e){return i(e)},a.onsuccess=function(e){return r(e.target.result)}}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(zc),r.Tb(r.B))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),Gc=function(){var e=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[Wc,{provide:zc,useValue:t}]}}}]),e}();return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[f.c]]}),e}(),Kc=n("gfpf"),qc=n("LgUO"),Xc=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).allowedAlgorithms=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","PS256","PS384","PS512"],e.gracePeriodInSec=600,e}return Object(h.a)(n,[{key:"validateSignature",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.idToken)throw new Error("Parameter idToken expected!");if(!e.idTokenHeader)throw new Error("Parameter idTokenHandler expected.");if(!e.jwks)throw new Error("Parameter jwks expected!");if(!e.jwks.keys||!Array.isArray(e.jwks.keys)||0===e.jwks.keys.length)throw new Error("Array keys in jwks missing!");var r,i=e.idTokenHeader.kid,a=e.jwks.keys,o=e.idTokenHeader.alg;if(i)r=a.find((function(e){return e.kid===i}));else{var s=this.alg2kty(o),u=a.filter((function(e){return e.kty===s&&"sig"===e.use}));if(u.length>1){var c="More than one matching key found. Please specify a kid in the id_token header.";return console.error(c),Promise.reject(c)}1===u.length&&(r=u[0])}if(!r&&!n&&e.loadKeys)return e.loadKeys().then((function(t){return e.jwks=t})).then((function(n){return t.validateSignature(e,!0)}));if(!r&&n&&!i){var l="No matching key found.";return console.error(l),Promise.reject(l)}if(!r&&n&&i){var h="expected key not found in property jwks. This property is most likely loaded with the discovery document. Expected key id (kid): "+i;return console.error(h),Promise.reject(h)}var f=Kc.KEYUTIL.getKey(r),d={alg:this.allowedAlgorithms,gracePeriod:this.gracePeriodInSec},p=Kc.KJUR.jws.JWS.verifyJWT(e.idToken,f,d);return p?Promise.resolve():Promise.reject("Signature not valid")}},{key:"alg2kty",value:function(e){switch(e.charAt(0)){case"R":return"RSA";case"E":return"EC";default:throw new Error("Cannot infer kty from alg: "+e)}}},{key:"calcHash",value:function(e,t){var n=new Kc.KJUR.crypto.MessageDigest({alg:t}).digestString(e),r=this.toByteArrayAsString(n);return Promise.resolve(r)}},{key:"toByteArrayAsString",value:function(e){for(var t="",n=0;n<e.length;n+=2){var r=e.charAt(n)+e.charAt(n+1),i=parseInt(r,16);t+=String.fromCharCode(i)}return t}}]),n}(qc.a),Yc=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this))._value=e,r}return Object(h.a)(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Lo.a;return this._value}},{key:"next",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"next",this).call(this,this._value=e)}}]),n}(qe.a),Zc=(Vc=function(e,t){return(Vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Vc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Jc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zc(t,e),t.prototype.getItem=function(e){return localStorage.getItem("bungie-"+e)},t.prototype.removeItem=function(e){return localStorage.removeItem("bungie-"+e)},t.prototype.setItem=function(e,t){return localStorage.setItem("bungie-"+e,t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac=function(e){return Qc(e||t)}}),t}(qc.d),Qc=r.Rb(Jc),$c=function(){function e(e){this.authStorage=e}return e.prototype.checkUrl=function(e){return!!["https://www.bungie.net","https://stats.bungie.net"].find((function(t){return e.startsWith(t)}))},e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if(!this.checkUrl(n))return t.handle(e);var r=e.headers;return n.indexOf("common/destiny2_content")>0||(r=r.set("X-API-Key","cd01c0cb258c48228cdbc0f468674257"),"https://www.bungie.net/platform/app/oauth/token/"===n||n.indexOf("getmembershipsbyid")>0||this.authStorage.getItem("access_token")&&(r=r.set("Authorization","Bearer "+this.authStorage.getItem("access_token"))),n.indexOf("/Stats/Activities/")>-1&&(n=n.replace("www.bungie","stats.bungie"))),e=e.clone({headers:r}),t.handle(e)},e.\u0275fac=function(t){return new(t||e)(r.Tb(Jc))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),el=new r.q("bungie service"),tl=function(){function e(){}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[Jc,{provide:el,useClass:qc.c},{provide:i.a,useClass:$c,multi:!0}],imports:[[f.c,qc.b.forRoot()]]}),e}(),nl=n("rePB"),rl=n("sVev"),il=n("4I5i");function al(e){return function(t){return 0===e?Object(Ms.b)():t.lift(new ol(e))}}var ol=function(){function e(t){if(Object(l.a)(this,e),this.total=t,this.total<0)throw new il.a}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new sl(e,this.total))}}]),e}(),sl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return Object(h.a)(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}(_o.a),ul=n("XDbj"),cl=n("xbPD"),ll=n("SpAZ"),hl=n("SxV6"),fl=n("5+tZ"),dl=function(){function e(t,n,r){Object(l.a)(this,e),this.predicate=t,this.thisArg=n,this.source=r}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new pl(e,this.predicate,this.thisArg,this.source))}}]),e}(),pl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,o){var s;return Object(l.a)(this,n),(s=t.call(this,e)).predicate=r,s.thisArg=i,s.source=o,s.index=0,s.thisArg=i||Object(a.a)(s),s}return Object(h.a)(n,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(_o.a),vl=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(l.a)(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return Object(h.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new ml(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),ml=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return Object(h.a)(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(_o.a),gl=n("bOdf"),yl=function e(t,n){Object(l.a)(this,e),this.id=t,this.url=n},bl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(l.a)(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=o,i}return Object(h.a)(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(yl),_l=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return Object(h.a)(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(yl),wl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e,r)).reason=i,a}return Object(h.a)(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(yl),xl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e,r)).error=i,a}return Object(h.a)(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(yl),kl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(h.a)(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(yl),Sl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(h.a)(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(yl),El=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o){var s;return Object(l.a)(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s.shouldActivate=o,s}return Object(h.a)(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(yl),Ol=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(h.a)(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(yl),Tl=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(h.a)(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(yl),Cl=function(){function e(t){Object(l.a)(this,e),this.route=t}return Object(h.a)(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Al=function(){function e(t){Object(l.a)(this,e),this.route=t}return Object(h.a)(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Ml=function(){function e(t){Object(l.a)(this,e),this.snapshot=t}return Object(h.a)(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),jl=function(){function e(t){Object(l.a)(this,e),this.snapshot=t}return Object(h.a)(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Pl=function(){function e(t){Object(l.a)(this,e),this.snapshot=t}return Object(h.a)(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Rl=function(){function e(t){Object(l.a)(this,e),this.snapshot=t}return Object(h.a)(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Il=function(){function e(t,n,r){Object(l.a)(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return Object(h.a)(e,[{key:"toString",value:function(){var e=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(e,"')")}}]),e}(),Dl=function(){var e=function e(){Object(l.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r.Lb(0,"router-outlet")},directives:function(){return[Uf]},encapsulation:2}),e}(),Fl=function(){function e(t){Object(l.a)(this,e),this.params=t||{}}return Object(h.a)(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function Ll(e){return new Fl(e)}function Nl(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Bl(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],s=e[a];if(o.startsWith(":"))i[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}var Hl=function e(t,n){Object(l.a)(this,e),this.routes=t,this.module=n};function Ul(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n],i=zl(t,r);Vl(r,i)}}function Vl(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. ").concat("The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&Ul(e.children,t)}function zl(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Wl(e){var t=e.children&&e.children.map(Wl),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Dl),n}function Gl(e,t){var n,r=Object.keys(e),i=Object.keys(t);if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!Kl(e[n=r[a]],t[n]))return!1;return!0}function Kl(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function ql(e){return Array.prototype.concat.apply([],e)}function Xl(e){return e.length>0?e[e.length-1]:null}function Yl(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Zl(e){return Object(r.qb)(e)?e:Object(r.rb)(e)?Object(g.a)(Promise.resolve(e)):Object(Ye.a)(e)}function Jl(e,t,n){return n?function(e,t){return Gl(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!th(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return Kl(e[n],t[n])}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!th(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!th(n.segments,i))return!1;for(var a in r.children){if(!n.children[a])return!1;if(!e(n.children[a],r.children[a]))return!1}return!0}var o=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!th(n.segments,o)&&!!n.children.primary&&t(n.children.primary,r,s)}(t,n,n.segments)}(e.root,t.root)}var Ql=function(){function e(t,n,r){Object(l.a)(this,e),this.root=t,this.queryParams=n,this.fragment=r}return Object(h.a)(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ll(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return ah.serialize(this)}}]),e}(),$l=function(){function e(t,n){var r=this;Object(l.a)(this,e),this.segments=t,this.children=n,this.parent=null,Yl(n,(function(e,t){return e.parent=r}))}return Object(h.a)(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return oh(this)}}]),e}(),eh=function(){function e(t,n){Object(l.a)(this,e),this.path=t,this.parameters=n}return Object(h.a)(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Ll(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return fh(this)}}]),e}();function th(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function nh(e,t){var n=[];return Yl(e.children,(function(e,r){"primary"===r&&(n=n.concat(t(e,r)))})),Yl(e.children,(function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))})),n}var rh=function e(){Object(l.a)(this,e)},ih=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"parse",value:function(e){var t=new gh(e);return new Ql(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r="/".concat(function e(t,n){if(!t.hasChildren())return oh(t);if(n){var r=t.children.primary?e(t.children.primary,!1):"",i=[];return Yl(t.children,(function(t,n){"primary"!==n&&i.push("".concat(n,":").concat(e(t,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var a=nh(t,(function(n,r){return"primary"===r?[e(t.children.primary,!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(oh(t),"/(").concat(a.join("//"),")")}(e.root,!0)),i=(t=e.queryParams,(n=Object.keys(t).map((function(e){var n=t[e];return Array.isArray(n)?n.map((function(t){return"".concat(uh(e),"=").concat(uh(t))})).join("&"):"".concat(uh(e),"=").concat(uh(n))}))).length?"?".concat(n.join("&")):""),a="string"==typeof e.fragment?"#".concat(encodeURI(e.fragment)):"";return"".concat(r).concat(i).concat(a)}}]),e}(),ah=new ih;function oh(e){return e.segments.map((function(e){return fh(e)})).join("/")}function sh(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uh(e){return sh(e).replace(/%3B/gi,";")}function ch(e){return sh(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lh(e){return decodeURIComponent(e)}function hh(e){return lh(e.replace(/\+/g,"%20"))}function fh(e){return"".concat(ch(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(ch(e),"=").concat(ch(t[e]))})).join("")));var t}var dh=/^[^\/()?;=#]+/;function ph(e){var t=e.match(dh);return t?t[0]:""}var vh=/^[^=?&#]+/,mh=/^[^?&#]+/,gh=function(){function e(t){Object(l.a)(this,e),this.url=t,this.remaining=t}return Object(h.a)(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $l([],{}):new $l([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new $l(e,t)),n}},{key:"parseSegment",value:function(){var e=ph(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new eh(lh(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=ph(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=ph(this.remaining);r&&this.capture(n=r)}e[lh(t)]=lh(n)}}},{key:"parseQueryParam",value:function(e){var t,n=(t=this.remaining.match(vh))?t[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(e){var t=e.match(mh);return t?t[0]:""}(this.remaining);i&&this.capture(r=i)}var a=hh(n),o=hh(r);if(e.hasOwnProperty(a)){var s=e[a];Array.isArray(s)||(e[a]=s=[s]),s.push(o)}else e[a]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=ph(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var a=this.parseChildren();t[i]=1===Object.keys(a).length?a.primary:new $l([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),yh=function(){function e(t){Object(l.a)(this,e),this._root=t}return Object(h.a)(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=bh(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=bh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=_h(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return _h(e,this._root).map((function(e){return e.value}))}}]),e}();function bh(e,t){if(e===t.value)return t;var n,r=Object(o.a)(t.children);try{for(r.s();!(n=r.n()).done;){var i=bh(e,n.value);if(i)return i}}catch(a){r.e(a)}finally{r.f()}return null}function _h(e,t){if(e===t.value)return[t];var n,r=Object(o.a)(t.children);try{for(r.s();!(n=r.n()).done;){var i=_h(e,n.value);if(i.length)return i.unshift(t),i}}catch(a){r.e(a)}finally{r.f()}return[]}var wh=function(){function e(t,n){Object(l.a)(this,e),this.value=t,this.children=n}return Object(h.a)(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function xh(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var kh=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e)).snapshot=r,Mh(Object(a.a)(i),e),i}return Object(h.a)(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(yh);function Sh(e,t){var n=function(e,t){var n=new Ch([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Ah("",new wh(n,[]))}(e,t),r=new Yc([new eh("",{})]),i=new Yc({}),a=new Yc({}),o=new Yc({}),s=new Yc(""),u=new Eh(r,i,o,s,a,"primary",t,n.root);return u.snapshot=n.root,new kh(new wh(u,[]),n)}var Eh=function(){function e(t,n,r,i,a,o,s,u){Object(l.a)(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=u}return Object(h.a)(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(v.a)((function(e){return Ll(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(v.a)((function(e){return Ll(e)})))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function Oh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return Th(n.slice(r))}function Th(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}var Ch=function(){function e(t,n,r,i,a,o,s,u,c,h,f){Object(l.a)(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=h,this._resolve=f}return Object(h.a)(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Ll(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ll(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var e=this.url.map((function(e){return e.toString()})).join("/"),t=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(e,"', path:'").concat(t,"')")}}]),e}(),Ah=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,r)).url=e,Mh(Object(a.a)(i),r),i}return Object(h.a)(n,[{key:"toString",value:function(){return jh(this._root)}}]),n}(yh);function Mh(e,t){t.value._routerState=e,t.children.forEach((function(t){return Mh(e,t)}))}function jh(e){var t=e.children.length>0?" { ".concat(e.children.map(jh).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Ph(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Gl(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Gl(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Gl(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Gl(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Rh(e,t){var n,r;return Gl(e.params,t.params)&&th(n=e.url,r=t.url)&&n.every((function(e,t){return Gl(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||Rh(e.parent,t.parent))}function Ih(e,t,n,r,i){if(0===n.length)return Fh(t.root,t.root,t,r,i);var a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Lh(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return Yl(r.outlets,(function(e,t){a[t]="string"==typeof e?e.split("/"):e})),[].concat(Object(s.a)(e),[{outlets:a}])}if(r.segmentPath)return[].concat(Object(s.a)(e),[r.segmentPath])}return"string"!=typeof r?[].concat(Object(s.a)(e),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(Object(s.a)(e),[r])}),[]);return new Lh(n,t,r)}(n);if(a.toRoot())return Fh(t.root,new $l([],{}),t,r,i);var o=function(e,t,n){if(e.isAbsolute)return new Nh(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new Nh(r,r===t.root,0)}var i=Dh(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Nh(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(a,t,e),u=o.processChildren?Uh(o.segmentGroup,o.index,a.commands):Hh(o.segmentGroup,o.index,a.commands);return Fh(o.segmentGroup,u,t,r,i)}function Dh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Fh(e,t,n,r,i){var a={};return r&&Yl(r,(function(e,t){a[t]=Array.isArray(e)?e.map((function(e){return"".concat(e)})):"".concat(e)})),new Ql(n.root===e?t:function e(t,n,r){var i={};return Yl(t.children,(function(t,a){i[a]=t===n?r:e(t,n,r)})),new $l(t.segments,i)}(n.root,e,t),a,i)}var Lh=function(){function e(t,n,r){if(Object(l.a)(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Dh(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(i&&i!==Xl(r))throw new Error("{outlets:{}} has to be the last command")}return Object(h.a)(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),Nh=function e(t,n,r){Object(l.a)(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function Bh(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:"".concat(e)}function Hh(e,t,n){if(e||(e=new $l([],{})),0===e.segments.length&&e.hasChildren())return Uh(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var o=e.segments[i],s=Bh(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Gh(s,u,o))return a;r+=2}else{if(!Gh(s,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new $l(e.segments.slice(0,r.pathIndex),{});return a.children.primary=new $l(e.segments.slice(r.pathIndex),e.children),Uh(a,0,i)}return r.match&&0===i.length?new $l(e.segments,{}):r.match&&!e.hasChildren()?Vh(e,t,n):r.match?Uh(e,0,i):Vh(e,t,n)}function Uh(e,t,n){if(0===n.length)return new $l(e.segments,{});var r=function(e){return"object"==typeof e[0]&&null!==e[0]&&e[0].outlets?e[0].outlets:Object(nl.a)({},"primary",e)}(n),i={};return Yl(r,(function(n,r){null!==n&&(i[r]=Hh(e.children[r],t,n))})),Yl(e.children,(function(e,t){void 0===r[t]&&(i[t]=e)})),new $l(e.segments,i)}function Vh(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){var a=zh(n[i].outlets);return new $l(r,a)}if(0===i&&Dh(n[0]))r.push(new eh(e.segments[t].path,n[0])),i++;else{var o=Bh(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Dh(s)?(r.push(new eh(o,Wh(s))),i+=2):(r.push(new eh(o,{})),i++)}}return new $l(r,{})}function zh(e){var t={};return Yl(e,(function(e,n){null!==e&&(t[n]=Vh(new $l([],{}),0,e))})),t}function Wh(e){var t={};return Yl(e,(function(e,n){return t[n]="".concat(e)})),t}function Gh(e,t,n){return e==n.path&&Gl(t,n.parameters)}var Kh=function(){function e(t,n,r,i){Object(l.a)(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return Object(h.a)(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Ph(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=xh(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]})),Yl(i,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var i=xh(e),a=e.value.component?r.children:t;Yl(i,(function(e,t){return n.deactivateRouteAndItsChildren(e,a)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=xh(t);e.children.forEach((function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Rl(e.value.snapshot))})),e.children.length&&this.forwardEvent(new jl(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Ph(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),qh(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function qh(e){Ph(e.value),e.children.forEach(qh)}function Xh(e){return"function"==typeof e}function Yh(e){return e instanceof Ql}var Zh=function e(t){Object(l.a)(this,e),this.segmentGroup=t||null},Jh=function e(t){Object(l.a)(this,e),this.urlTree=t};function Qh(e){return new d.a((function(t){return t.error(new Zh(e))}))}function $h(e){return new d.a((function(t){return t.error(new Jh(e))}))}function ef(e){return new d.a((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var tf=function(){function e(t,n,i,a,o){Object(l.a)(this,e),this.configLoader=n,this.urlSerializer=i,this.urlTree=a,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}return Object(h.a)(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(v.a)((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(Object(Qs.a)((function(t){if(t instanceof Jh)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof Zh)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(Object(v.a)((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(Object(Qs.a)((function(e){if(e instanceof Zh)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new $l([],Object(nl.a)({},"primary",e)):e;return new Ql(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Object(v.a)((function(e){return new $l([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(Ye.a)({});var a=[],o=[],s={};return Yl(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(e,t,c,u)).pipe(Object(v.a)((function(e){return s[i]=e})));"primary"===i?a.push(l):o.push(l)})),Ye.a.apply(null,a.concat(o)).pipe(Lt(),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Object($e.a)((function(t,n){return e(t,n,r)})):ll.a,al(1),n?Object(cl.a)(t):Object(ul.a)((function(){return new rl.a})))}}(),Object(v.a)((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,i,a){var o=this;return Ye.a.apply(void 0,Object(s.a)(n)).pipe(Object(v.a)((function(s){return o.expandSegmentAgainstRoute(e,t,n,s,r,i,a).pipe(Object(Qs.a)((function(e){if(e instanceof Zh)return Object(Ye.a)(null);throw e})))})),Lt(),Object(hl.a)((function(e){return!!e})),Object(Qs.a)((function(e,n){if(e instanceof rl.a||"EmptyError"===e.name){if(o.noLeftoversInUrl(t,r,i))return Object(Ye.a)(new $l([],{}));throw new Zh(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,o){return of(r)!==a?Qh(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):Qh(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?$h(a):this.lineralizeSegments(n,a).pipe(Object(fl.a)((function(n){var a=new $l(n,{});return i.expandSegment(e,a,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var o=this,s=nf(t,r,i),u=s.consumedSegments,c=s.lastChild,l=s.positionalParamSegments;if(!s.matched)return Qh(t);var h=this.applyRedirectCommands(u,r.redirectTo,l);return r.redirectTo.startsWith("/")?$h(h):this.lineralizeSegments(r,h).pipe(Object(fl.a)((function(r){return o.expandSegment(e,t,n,r.concat(i.slice(c)),a,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(Object(v.a)((function(e){return n._loadedConfig=e,new $l(r,{})}))):Object(Ye.a)(new $l(r,{}));var a=nf(t,n,r),s=a.consumedSegments,u=a.lastChild;if(!a.matched)return Qh(t);var c=r.slice(u);return this.getChildConfig(e,n,r).pipe(Object(fl.a)((function(e){var n=e.module,r=e.routes,a=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return af(e,t,n)&&"primary"!==of(n)}))}(e,n,r)?{segmentGroup:rf(new $l(t,function(e,t){var n={};n.primary=t;var r,i=Object(o.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;""===a.path&&"primary"!==of(a)&&(n[of(a)]=new $l([],{}))}}catch(s){i.e(s)}finally{i.f()}return n}(r,new $l(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return af(e,t,n)}))}(e,n,r)?{segmentGroup:rf(new $l(e.segments,function(e,t,n,r){var i,a={},s=Object(o.a)(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;af(e,t,u)&&!r[of(u)]&&(a[of(u)]=new $l([],{}))}}catch(c){s.e(c)}finally{s.f()}return Object.assign(Object.assign({},r),a)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,c,r),u=a.segmentGroup,l=a.slicedSegments;return 0===l.length&&u.hasChildren()?i.expandChildren(n,r,u).pipe(Object(v.a)((function(e){return new $l(s,e)}))):0===r.length&&0===l.length?Object(Ye.a)(new $l(s,{})):i.expandSegment(n,u,r,l,"primary",!0).pipe(Object(v.a)((function(e){return new $l(s.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?Object(Ye.a)(new Hl(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Object(Ye.a)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(Object(fl.a)((function(n){return n?r.configLoader.load(e.injector,t).pipe(Object(v.a)((function(e){return t._loadedConfig=e,e}))):function(e){return new d.a((function(t){return t.error(Nl("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):Object(Ye.a)(new Hl([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r,i=this,a=t.canLoad;return a&&0!==a.length?Object(g.a)(a).pipe(Object(v.a)((function(r){var i,a=e.get(r);if(function(e){return e&&Xh(e.canLoad)}(a))i=a.canLoad(t,n);else{if(!Xh(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return Zl(i)}))).pipe(Lt(),Object(Je.a)((function(e){if(Yh(e)){var t=Nl('Redirecting to "'.concat(i.urlSerializer.serialize(e),'"'));throw t.url=e,t}})),(r=function(e){return!0===e},function(e){return e.lift(new dl(r,void 0,e))})):Object(Ye.a)(!0)}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ye.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ef(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new Ql(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return Yl(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),o={};return Yl(t.children,(function(t,a){o[a]=i.createSegmentGroup(e,t,n,r)})),new $l(a,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map((function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=Object(o.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===e.path)return t.splice(r),a;r++}}catch(s){i.e(s)}finally{i.f()}return e}}]),e}();function nf(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||Bl)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function rf(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new $l(e.segments.concat(t.segments),t.children)}return e}function af(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function of(e){return e.outlet||"primary"}var sf=function e(t){Object(l.a)(this,e),this.path=t,this.route=this.path[this.path.length-1]},uf=function e(t,n){Object(l.a)(this,e),this.component=t,this.route=n};function cf(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function lf(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=xh(t);return e.children.forEach((function(e){hf(e,a[e.value.outlet],n,r.concat([e.value]),i),delete a[e.value.outlet]})),Yl(a,(function(e,t){return df(e,n.getContext(t),i)})),i}function hf(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,o=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){var u=ff(o,a,a.routeConfig.runGuardsAndResolvers);if(u?i.canActivateChecks.push(new sf(r)):(a.data=o.data,a._resolvedData=o._resolvedData),lf(e,t,a.component?s?s.children:null:n,r,i),u){var c=s&&s.outlet&&s.outlet.component||null;i.canDeactivateChecks.push(new uf(c,o))}}else o&&df(t,s,i),i.canActivateChecks.push(new sf(r)),lf(e,null,a.component?s?s.children:null:n,r,i);return i}function ff(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!th(e.url,t.url);case"pathParamsOrQueryParamsChange":return!th(e.url,t.url)||!Gl(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rh(e,t)||!Gl(e.queryParams,t.queryParams);case"paramsChange":default:return!Rh(e,t)}}function df(e,t,n){var r=xh(e),i=e.value;Yl(r,(function(e,r){df(e,i.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new uf(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var pf=Symbol("INITIAL_VALUE");function vf(){return Object(Fo.a)((function(e){return yc.a.apply(void 0,Object(s.a)(e.map((function(e){return e.pipe(Object(et.a)(1),Ht(pf))})))).pipe(function(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new vl(e,t,n))}}((function(e,t){var n=!1;return t.reduce((function(e,r,i){if(e!==pf)return e;if(r===pf&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||Yh(r))return r}return e}),e)}),pf),Object($e.a)((function(e){return e!==pf})),Object(v.a)((function(e){return Yh(e)?e:!0===e})),Object(et.a)(1))}))}function mf(e,t){return null!==e&&t&&t(new Pl(e)),Object(Ye.a)(!0)}function gf(e,t){return null!==e&&t&&t(new Ml(e)),Object(Ye.a)(!0)}function yf(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ye.a)(!0);var i=r.map((function(r){return js((function(){var i,a=cf(r,t,n);if(function(e){return e&&Xh(e.canActivate)}(a))i=Zl(a.canActivate(t,e));else{if(!Xh(a))throw new Error("Invalid CanActivate guard");i=Zl(a(t,e))}return i.pipe(Object(hl.a)())}))}));return Object(Ye.a)(i).pipe(vf())}function bf(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return js((function(){var i=t.guards.map((function(i){var a,o=cf(i,t.node,n);if(function(e){return e&&Xh(e.canActivateChild)}(o))a=Zl(o.canActivateChild(r,e));else{if(!Xh(o))throw new Error("Invalid CanActivateChild guard");a=Zl(o(r,e))}return a.pipe(Object(hl.a)())}));return Object(Ye.a)(i).pipe(vf())}))}));return Object(Ye.a)(i).pipe(vf())}var _f=function e(){Object(l.a)(this,e)},wf=function(){function e(t,n,r,i,a,o){Object(l.a)(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return Object(h.a)(e,[{key:"recognize",value:function(){try{var e=Sf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Ch([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wh(n,t),i=new Ah(this.url,r);return this.inheritParamsAndData(i._root),Object(Ye.a)(i)}catch(a){return new d.a((function(e){return e.error(a)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Oh(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,i=nh(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},i.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),i=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[e.value.outlet]=e.value})),function(e){e.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)}))}(i),i}},{key:"processSegment",value:function(e,t,n,r){var i,a=Object(o.a)(e);try{for(a.s();!(i=a.n()).done;){var s=i.value;try{return this.processSegmentAgainstRoute(s,t,n,r)}catch(u){if(!(u instanceof _f))throw u}}}catch(c){a.e(c)}finally{a.f()}if(this.noLeftoversInUrl(t,n,r))return[];throw new _f}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new _f;if((e.outlet||"primary")!==r)throw new _f;var i,a=[],o=[];if("**"===e.path){var s=n.length>0?Xl(n).parameters:{};i=new Ch(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tf(e),r,e.component,e,xf(t),kf(t)+n.length,Cf(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new _f;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||Bl)(n,e,t);if(!r)throw new _f;var i={};Yl(r.posParams,(function(e,t){i[t]=e.path}));var a=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(t,e,n);a=u.consumedSegments,o=n.slice(u.lastChild),i=new Ch(a,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tf(e),r,e.component,e,xf(t),kf(t)+a.length,Cf(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Sf(t,a,o,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new wh(i,d)]}if(0===c.length&&0===f.length)return[new wh(i,[])];var p=this.processSegment(c,h,f,"primary");return[new wh(i,p)]}}]),e}();function xf(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function kf(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Sf(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some((function(n){return Ef(e,t,n)&&"primary"!==Of(n)}))}(e,n,r)){var a=new $l(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var a,s=Object(o.a)(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(""===u.path&&"primary"!==Of(u)){var c=new $l([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,i[Of(u)]=c}}}catch(l){s.e(l)}finally{s.f()}return i}(e,t,r,new $l(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return Ef(e,t,n)}))}(e,n,r)){var s=new $l(e.segments,function(e,t,n,r,i,a){var s,u={},c=Object(o.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(Ef(e,n,l)&&!i[Of(l)]){var h=new $l([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===a?e.segments.length:t.length,u[Of(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),u)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}var u=new $l(e.segments,e.children);return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}function Ef(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Of(e){return e.outlet||"primary"}function Tf(e){return e.data||{}}function Cf(e){return e.resolve||{}}function Af(e){return function(t){return t.pipe(Object(Fo.a)((function(t){var n=e(t);return n?Object(g.a)(n).pipe(Object(v.a)((function(){return t}))):Object(g.a)([t])})))}}var Mf=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),jf=new r.q("ROUTES"),Pf=function(){function e(t,n,r,i){Object(l.a)(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return Object(h.a)(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(Object(v.a)((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new Hl(ql(i.injector.get(jf)).map(Wl),i)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?Object(g.a)(this.loader.load(e)):Zl(e()).pipe(Object(fl.a)((function(e){return e instanceof r.v?Object(Ye.a)(e):Object(g.a)(t.compiler.compileModuleAsync(e))})))}}]),e}(),Rf=function e(){Object(l.a)(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new If,this.attachRef=null},If=function(){function e(){Object(l.a)(this,e),this.contexts=new Map}return Object(h.a)(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new Rf,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),Df=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function Ff(e){throw e}function Lf(e,t,n){return t.parse("/")}function Nf(e,t){return Object(Ye.a)(null)}var Bf=function(){var e=function(){function e(t,n,i,a,o,s,u,c){var h=this;Object(l.a)(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=i,this.location=a,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new qe.a,this.errorHandler=Ff,this.malformedUriErrorHandler=Lf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Nf,afterPreactivation:Nf},this.urlHandlingStrategy=new Df,this.routeReuseStrategy=new Mf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.Y);var f=o.get(r.z);this.isNgZoneEnabled=f instanceof r.z,this.resetConfig(c),this.currentUrlTree=new Ql(new $l([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Pf(s,u,(function(e){return h.triggerEvent(new Cl(e))}),(function(e){return h.triggerEvent(new Al(e))})),this.routerState=Sh(this.currentUrlTree,this.rootComponentType),this.transitions=new Yc({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return Object(h.a)(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Object($e.a)((function(e){return 0!==e.id})),Object(v.a)((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),Object(Fo.a)((function(e){var r,i,a,s=!1,u=!1;return Object(Ye.a)(e).pipe(Object(Je.a)((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Object(Fo.a)((function(e){var r,i,a,o,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Object(Ye.a)(e).pipe(Object(Fo.a)((function(e){var r=t.transitions.getValue();return n.next(new bl(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Ms.a:[e]})),Object(Fo.a)((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,i=t.configLoader,a=t.urlSerializer,o=t.config,function(e){return e.pipe(Object(Fo.a)((function(e){return function(e,t,n,r,i){return new tf(e,t,n,r,i).apply()}(r,i,a,e.extractedUrl,o).pipe(Object(v.a)((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),Object(Je.a)((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,n,r,i,a){return function(r){return r.pipe(Object(fl.a)((function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new wf(e,t,n,r,i,a).recognize()}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),i,a).pipe(Object(v.a)((function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})})));var o})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),Object(Je.a)((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),Object(Je.a)((function(e){var r=new kl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.extractedUrl,c=e.source,l=e.restoredState,h=e.extras,f=new bl(e.id,t.serializeUrl(u),c,l);n.next(f);var d=Sh(u,t.rootComponentType).snapshot;return Object(Ye.a)(Object.assign(Object.assign({},e),{targetSnapshot:d,urlAfterRedirects:u,extras:Object.assign(Object.assign({},h),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Ms.a})),Af((function(e){var n=e.extras;return t.hooks.beforePreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})})),Object(Je.a)((function(e){var n=new Sl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),Object(v.a)((function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,r=e.currentSnapshot,i=t.rootContexts,a=n._root,lf(a,r?r._root:null,i,[a.value]))});var n,r,i,a})),function(e,t){return function(n){return n.pipe(Object(fl.a)((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?Object(Ye.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return Object(g.a)(e).pipe(Object(fl.a)((function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return Object(Ye.a)(!0);var o=a.map((function(a){var o,s=cf(a,t,i);if(function(e){return e&&Xh(e.canDeactivate)}(s))o=Zl(s.canDeactivate(e,t,n,r));else{if(!Xh(s))throw new Error("Invalid CanDeactivate guard");o=Zl(s(e,t,n,r))}return o.pipe(Object(hl.a)())}));return Object(Ye.a)(o).pipe(vf())}(e.component,e.route,n,t,r)})),Object(hl.a)((function(e){return!0!==e}),!0))}(s,r,i,e).pipe(Object(fl.a)((function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return Object(g.a)(t).pipe(Object(gl.a)((function(t){return Object(g.a)([gf(t.route.parent,r),mf(t.route,r),bf(e,t.path,n),yf(e,t.route,n)]).pipe(Lt(),Object(hl.a)((function(e){return!0!==e}),!0))})),Object(hl.a)((function(e){return!0!==e}),!0))}(r,o,e,t):Object(Ye.a)(n)})),Object(v.a)((function(e){return Object.assign(Object.assign({},n),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),Object(Je.a)((function(e){if(Yh(e.guardsResult)){var n=Nl('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),Object(Je.a)((function(e){var n=new El(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),Object($e.a)((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new wl(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),Af((function(e){if(e.guards.canActivateChecks.length)return Object(Ye.a)(e).pipe(Object(Je.a)((function(e){var n=new Ol(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),Object(Fo.a)((function(e){var r,i,a=!1;return Object(Ye.a)(e).pipe((r=t.paramsInheritanceStrategy,i=t.ngModule.injector,function(e){return e.pipe(Object(fl.a)((function(e){var t=e.targetSnapshot,n=e.guards.canActivateChecks;if(!n.length)return Object(Ye.a)(e);var a=0;return Object(g.a)(n).pipe(Object(gl.a)((function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return Object(Ye.a)({});var a={};return Object(g.a)(i).pipe(Object(fl.a)((function(i){return function(e,t,n,r){var i=cf(e,t,r);return Zl(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe(Object(Je.a)((function(e){a[i]=e})))})),al(1),Object(fl.a)((function(){return Object.keys(a).length===i.length?Object(Ye.a)(a):Ms.a})))}(e._resolve,e,t,r).pipe(Object(v.a)((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Oh(e,n).resolve),null})))}(e.route,t,r,i)})),Object(Je.a)((function(){return a++})),al(1),Object(fl.a)((function(t){return a===n.length?Object(Ye.a)(e):Ms.a})))})))}),Object(Je.a)({next:function(){return a=!0},complete:function(){if(!a){var r=new wl(e.id,t.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),e.resolve(!1)}}}))})),Object(Je.a)((function(e){var n=new Tl(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})))})),Af((function(e){var n=e.extras;return t.hooks.afterPreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})})),Object(v.a)((function(e){var n,r,i,a=(i=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var a=function(t,n,r){return n.children.map((function(n){var i,a=Object(o.a)(r.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(t.shouldReuseRoute(s.value.snapshot,n.value))return e(t,n,s)}}catch(u){a.e(u)}finally{a.f()}return e(t,n)}))}(t,n,r);return new wh(i,a)}var s=t.retrieve(n.value);if(s){var u=s.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,u),u}var c,l=new Eh(new Yc((c=n.value).url),new Yc(c.params),new Yc(c.queryParams),new Yc(c.fragment),new Yc(c.data),c.outlet,c.component,c),h=n.children.map((function(n){return e(t,n)}));return new wh(l,h)}(t.routeReuseStrategy,(n=e.targetSnapshot)._root,(r=e.currentRouterState)?r._root:void 0),new kh(i,n));return Object.assign(Object.assign({},e),{targetRouterState:a})})),Object(Je.a)((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(r=t.rootContexts,i=t.routeReuseStrategy,a=function(e){return t.triggerEvent(e)},Object(v.a)((function(e){return new Kh(i,e.targetRouterState,e.currentRouterState,a).activate(r),e}))),Object(Je.a)({next:function(){s=!0},complete:function(){s=!0}}),$s((function(){if(!s&&!u){t.resetUrlToCurrentUrlTree();var r=new wl(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null})),Object(Qs.a)((function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=Yh(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var a=new wl(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),i?setTimeout((function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);return t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new xl(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(c){e.reject(c)}}var s;return Ms.a})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){Ul(e),this.config=e.map(Wl),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,i=t.queryParams,a=t.fragment,o=t.preserveQueryParams,s=t.queryParamsHandling,u=t.preserveFragment;Object(r.V)()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:a,h=null;if(s)switch(s){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=o?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),Ih(c,this.currentUrlTree,e,h,l)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Object(r.V)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Yh(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return Hf(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(Yh(e))return Jl(this.currentUrlTree,e,t);var n=this.parseUrl(e);return Jl(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new _l(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var a,o,s,u=this.getTransition();if(u&&"imperative"!==t&&"imperative"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"hashchange"==t&&"popstate"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"popstate"==t&&"hashchange"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);i?(a=i.resolve,o=i.reject,s=i.promise):s=new Promise((function(e,t){a=e,o=t}));var c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:a,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(r.N),r.Tb(rh),r.Tb(If),r.Tb(f.h),r.Tb(r.r),r.Tb(r.w),r.Tb(r.i),r.Tb(void 0))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}();function Hf(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}var Uf=function(){var e=function(){function e(t,n,i,a,o){Object(l.a)(this,e),this.parentContexts=t,this.location=n,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=a||"primary",t.onChildOutletCreated(this.name,this)}return Object(h.a)(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Vf(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Kb(If),r.Kb(r.P),r.Kb(r.j),r.Ub("name"),r.Kb(r.h))},e.\u0275dir=r.Fb({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),Vf=function(){function e(t,n,r){Object(l.a)(this,e),this.route=t,this.childContexts=n,this.parent=r}return Object(h.a)(e,[{key:"get",value:function(e,t){return e===Eh?this.route:e===If?this.childContexts:this.parent.get(e,t)}}]),e}(),zf=function e(){Object(l.a)(this,e)},Wf=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"preload",value:function(e,t){return t().pipe(Object(Qs.a)((function(){return Object(Ye.a)(null)})))}}]),e}(),Gf=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"preload",value:function(e,t){return Object(Ye.a)(null)}}]),e}(),Kf=function(){var e=function(){function e(t,n,r,i,a){Object(l.a)(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Pf(n,r,(function(e){return t.triggerEvent(new Cl(e))}),(function(e){return t.triggerEvent(new Al(e))}))}return Object(h.a)(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Object($e.a)((function(e){return e instanceof _l})),Object(gl.a)((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(r.x);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=Object(o.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var s=a._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children))}}catch(u){i.e(u)}finally{i.f()}return Object(g.a)(r).pipe(Object(Ft.a)(),Object(v.a)((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(Object(fl.a)((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(Bf),r.Tb(r.w),r.Tb(r.i),r.Tb(r.r),r.Tb(zf))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),qf=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(l.a)(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return Object(h.a)(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof bl?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _l&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Il&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Il(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(Bf),r.Tb(f.s),r.Tb(void 0))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}(),Xf=new r.q("ROUTER_CONFIGURATION"),Yf=new r.q("ROUTER_FORROOT_GUARD"),Zf=[f.h,{provide:rh,useClass:ih},{provide:Bf,useFactory:function(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new Bf(null,e,t,n,r,i,a,ql(o));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),s.errorHandler&&(l.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(l.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=Object(f.x)();l.events.subscribe((function(e){h.logGroup("Router Event: ".concat(e.constructor.name)),h.log(e.toString()),h.log(e),h.logGroupEnd()}))}return s.onSameUrlNavigation&&(l.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(l.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(l.relativeLinkResolution=s.relativeLinkResolution),l},deps:[rh,If,f.h,r.r,r.w,r.i,jf,Xf,[function e(){Object(l.a)(this,e)},new r.A],[function e(){Object(l.a)(this,e)},new r.A]]},If,{provide:Eh,useFactory:function(e){return e.routerState.root},deps:[Bf]},{provide:r.w,useClass:r.K},Kf,Gf,Wf,{provide:Xf,useValue:{enableTracing:!1}}];function Jf(){return new r.y("Router",Bf)}var Qf=function(){var e=function(){function e(t,n){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Zf,nd(t),{provide:Yf,useFactory:td,deps:[[Bf,new r.A,new r.J]]},{provide:Xf,useValue:n||{}},{provide:f.i,useFactory:ed,deps:[f.r,[new r.p(f.a),new r.A],Xf]},{provide:qf,useFactory:$f,deps:[Bf,f.s,Xf]},{provide:zf,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Gf},{provide:r.y,multi:!0,useFactory:Jf},[rd,{provide:r.d,multi:!0,useFactory:id,deps:[rd]},{provide:od,useFactory:ad,deps:[rd]},{provide:r.b,multi:!0,useExisting:od}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[nd(t)]}}}]),e}();return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)(r.Tb(Yf,8),r.Tb(Bf,8))}}),e}();function $f(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new qf(e,t,n)}function ed(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new f.f(e,t):new f.q(e,t)}function td(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function nd(e){return[{provide:r.a,multi:!0,useValue:e},{provide:jf,multi:!0,useValue:e}]}var rd=function(){var e=function(){function e(t){Object(l.a)(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new qe.a}return Object(h.a)(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(f.g,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get(Bf),i=e.injector.get(Xf);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?Object(Ye.a)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Xf),n=this.injector.get(Kf),i=this.injector.get(qf),a=this.injector.get(Bf),o=this.injector.get(r.g);e===o.components[0]&&(this.isLegacyEnabled(t)?a.initialNavigation():this.isLegacyDisabled(t)&&a.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),a.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(r.r))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac}),e}();function id(e){return e.appInitializer.bind(e)}function ad(e){return e.bootstrapListener.bind(e)}var od=new r.q("Router Initializer"),sd=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},ud=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},cd=function(){function e(e,t,n){this.document=e,this.oAuthService=t,this.route=n,this.hasValidAccessToken$=new Yc(!1),this.oAuthService.setStorage(new Jc),this.oAuthService.configure({issuer:"https://www.bungie.net/en/OAuth/Authorize",loginUrl:"https://www.bungie.net/en/OAuth/Authorize",tokenEndpoint:"https://www.bungie.net/Platform/App/OAuth/token/",redirectUri:"https://chrisfried.github.io/secret-scrublandeux/auth",clientId:"36111",responseType:"code",scope:""}),this.oAuthService.tokenValidationHandler=new Xc,this.tryLogin()}return e.prototype.tryLogin=function(){return sd(this,void 0,void 0,(function(){var e=this;return ud(this,(function(t){return this.route.queryParams.subscribe((function(t){return sd(e,void 0,void 0,(function(){return ud(this,(function(e){switch(e.label){case 0:return t.state&&t.state===localStorage.getItem("bungie-nonce")?[4,this.oAuthService.tryLoginCodeFlow()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.oAuthService.hasValidAccessToken()&&(this.oAuthService.setupAutomaticSilentRefresh(),this.hasValidAccessToken$.next(!0)),[2]}}))}))})),[2]}))}))},e.prototype.login=function(){return sd(this,void 0,void 0,(function(){return ud(this,(function(e){switch(e.label){case 0:return[4,this.oAuthService.createAndSaveNonce()];case 1:return e.sent(),this.document.location.href="https://www.bungie.net/en/OAuth/Authorize?response_type=code&client_id=36111&state="+localStorage.getItem("bungie-nonce"),[2]}}))}))},e.prototype.logout=function(){this.oAuthService.logOut(),this.hasValidAccessToken$.next(!1)},e.\u0275fac=function(t){return new(t||e)(r.Tb(f.d),r.Tb(el),r.Tb(Eh))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function ld(e,t){if(1&e&&(r.Pb(0,"mat-card"),r.wc(1),r.Ob()),2&e){var n=t.$implicit;r.zb(1),r.yc(" ",n.AlertHtml,"\n")}}var hd=function(){function e(e){this.http=e}return e.prototype.ngOnInit=function(){var e=this;this.bungieStatus=new Yc([]),this.bungieSub=this.http.get("https://www.bungie.net/Platform/GlobalAlerts/").pipe(Object(Qs.a)((function(e){return Object(Js.a)(e.error||"Server error")}))).subscribe((function(t){try{e.bungieStatus.next(t.Response)}catch(n){}}))},e.\u0275fac=function(t){return new(t||e)(r.Kb(i.b))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-bungie-status"]],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(r.vc(0,ld,2,1,"mat-card",0),r.bc(1,"async")),2&e&&r.gc("ngForOf",r.cc(1,1,t.bungieStatus))},directives:[f.k,mo],pipes:[f.b],styles:[""]}),e}();function fd(e,t){if(1&e){var n=r.Qb();r.Pb(0,"button",9),r.Wb("click",(function(){return r.nc(n),r.ac().login()})),r.wc(1," Login with Bungie "),r.Pb(2,"mat-icon",10),r.wc(3,"login"),r.Ob(),r.Ob()}}function dd(e,t){if(1&e){var n=r.Qb();r.Pb(0,"button",11),r.Wb("click",(function(){return r.nc(n),r.ac().logout()})),r.wc(1," Logout "),r.Pb(2,"mat-icon",12),r.wc(3,"logout"),r.Ob(),r.Ob()}}var pd=function(){function e(e){this.bungieAuth=e,this.calendarChange=new r.n}return e.prototype.ngOnInit=function(){this.searchString=""},e.prototype.login=function(){this.bungieAuth.login()},e.prototype.logout=function(){this.bungieAuth.logout()},e.\u0275fac=function(t){return new(t||e)(r.Kb(cd))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-nav"]],inputs:{calendar:"calendar"},outputs:{calendarChange:"calendarChange"},decls:18,vars:6,consts:[[1,"mat-headline","headline"],["mat-raised-button","","href","https://chrisfried.github.io/secret-scrubland/",1,"switch-game"],[2,"margin-bottom","1em"],["mat-raised-button","","color","primary","class","button",3,"click",4,"ngIf"],["mat-raised-button","","class","button",3,"click",4,"ngIf"],[1,"mat-body-1"],["name","calendar","aria-label","Calendar"],["value","gregorian",3,"click"],["value","bungie",3,"click"],["mat-raised-button","","color","primary",1,"button",3,"click"],["aria-label","Login with Bungie"],["mat-raised-button","",1,"button",3,"click"],["aria-label","Logout"]],template:function(e,t){1&e&&(r.Pb(0,"span",0),r.wc(1,"Destiny 2 Historical Heatmap"),r.Ob(),r.Pb(2,"a",1),r.wc(3,"Switch to Destiny 1"),r.Ob(),r.Pb(4,"div",2),r.vc(5,fd,4,0,"button",3),r.bc(6,"async"),r.vc(7,dd,4,0,"button",4),r.bc(8,"async"),r.Ob(),r.Pb(9,"div",5),r.wc(10," Calendar Type:"),r.Lb(11,"br"),r.Pb(12,"mat-button-toggle-group",6),r.Pb(13,"mat-button-toggle",7),r.Wb("click",(function(){return t.calendarChange.emit("gregorian")})),r.wc(14,"Gregorian"),r.Ob(),r.Pb(15,"mat-button-toggle",8),r.Wb("click",(function(){return t.calendarChange.emit("bungie")})),r.wc(16,"Bungie"),r.Ob(),r.Ob(),r.Ob(),r.Lb(17,"br")),2&e&&(r.zb(5),r.gc("ngIf",!1===r.cc(6,2,t.bungieAuth.hasValidAccessToken$)),r.zb(2),r.gc("ngIf",r.cc(8,4,t.bungieAuth.hasValidAccessToken$)))},directives:[Ba,f.l,Ya,Ja,Na,mu],pipes:[f.b],styles:[".switch-game[_ngcontent-%COMP%]{margin-bottom:1em}.headline[_ngcontent-%COMP%]{margin-right:1em}"]}),e}(),vd=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-footer"]],decls:8,vars:0,consts:[[1,"mat-caption"],["href","https://twitter.com/chrisfried","target","_blank"],["href","https://guardian.theater/","target","_blank"]],template:function(e,t){1&e&&(r.Pb(0,"span",0),r.wc(1,"Brought to you by "),r.Pb(2,"a",1),r.wc(3,"that guy"),r.Ob(),r.wc(4," that made "),r.Pb(5,"a",2),r.wc(6,"that other thing"),r.Ob(),r.wc(7,"."),r.Ob())},styles:[""]}),e}();function md(e,t){return e({method:"GET",url:"https://www.bungie.net/Platform/Destiny2/".concat(t.membershipType,"/Profile/").concat(t.destinyMembershipId,"/"),params:{components:t.components?t.components.join(","):void 0}})}function gd(e,t){return e({method:"GET",url:"https://www.bungie.net/Platform/Destiny2/".concat(t.membershipType,"/Account/").concat(t.destinyMembershipId,"/Character/").concat(t.characterId,"/Stats/Activities/"),params:{count:t.count,mode:t.mode,page:t.page}})}function yd(e){return e({method:"GET",url:"https://www.bungie.net/Platform/User/GetMembershipsForCurrentUser/"})}var bd,_d=n("equ2"),wd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keyval-store",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keyval";Object(l.a)(this,e),this.storeName=n,this._dbp=new Promise((function(e,r){var i=indexedDB.open(t,1);i.onerror=function(){return r(i.error)},i.onsuccess=function(){return e(i.result)},i.onupgradeneeded=function(){i.result.createObjectStore(n)}}))}return Object(h.a)(e,[{key:"_withIDBStore",value:function(e,t){var n=this;return this._dbp.then((function(r){return new Promise((function(i,a){var o=r.transaction(n.storeName,e);o.oncomplete=function(){return i()},o.onabort=o.onerror=function(){return a(o.error)},t(o.objectStore(n.storeName))}))}))}}]),e}();function xd(){return bd||(bd=new wd),bd}function kd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xd();return n._withIDBStore("readwrite",(function(n){n.put(t,e)}))}var Sd=n("LvDl"),Ed=n.n(Sd),Od=function(){return(Od=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Td=function(){function e(e){var t=this;this.http=e,this.alwaysLoadRemote=!1,this.version=null,this.state={loaded:!1},this.state$=new Yc(this.state),this.newManifest$=new qe.a,this.localStorageKey="d2-manifest-version",this.idbKey="d2-manifest";var n,r=["Activity","ActivityMode"];Object(g.a)(t.http.request((n={method:"GET",url:"https://www.bungie.net/Platform/Destiny2/Manifest/"}).method,n.url,{params:n.params,body:n.body}).toPromise()).pipe(Object(Fo.a)((function(e){var n=e.Response,i=n.jsonWorldContentPaths.en||n.jsonWorldContentPaths.en,a=i;t.version=a;try{if(t.alwaysLoadRemote)throw new Error("Testing - always load remote");var o=localStorage.getItem(t.localStorageKey),s=JSON.parse(localStorage.getItem(t.localStorageKey+"-whitelist")||"[]");if(o===a&&Object(_d.deepEqual)(s,r)){var u=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xd();return n._withIDBStore("readonly",(function(n){t=n.get(e)})).then((function(){return t.result}))}(t.idbKey);if(!u)throw new Error("Empty cached manifest file");return u}throw new Error("version mismatch: "+a+" "+o)}catch(c){return t.http.get("https://www.bungie.net"+i,{withCredentials:!1}).pipe(Object(v.a)((function(e){var n=Ed.a.pick.apply(Ed.a,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}([e],r.map((function(e){return"Destiny"+e+"Definition"}))));return t.saveManifestToIndexedDB(n,a,r),t.newManifest$.next(),n})))}})),Object(v.a)((function(e){if(!e.DestinyActivityDefinition)throw new Error("Manifest corrupted, please reload");t.defs={},r.forEach((function(n){var r="Destiny"+n+"Definition";t.defs[n]="ActivityMode"===n?{get:function(t){var n=e[r];if(!n)throw new Error("Table "+r+" does not exist in the manifest");for(var i in n)if(n[i].modeType===t)return n[i];throw new Error("ModeType "+t+" does not exist in the manifest")},dbTable:e[r]}:{get:function(t){var n=e[r];if(!n)throw new Error("Table "+r+" does not exist in the manifest");return n[t]},dbTable:e[r]}})),t.loaded=!0})),Object(Qs.a)((function(e,n){return console.error(e.message||e),e instanceof TypeError||-1===e.status||503===e.status||522===e.status||e.status<200||e.status>=400||t.deleteManifestFile(),Ms.a}))).subscribe()}return Object.defineProperty(e.prototype,"loaded",{set:function(e){this.setState({loaded:e,error:void 0})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{set:function(e){this.setState({statusText:e})},enumerable:!1,configurable:!0}),e.prototype.saveManifestToIndexedDB=function(e,t,n){return r=this,void 0,a=function(){var r;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,kd(this.idbKey,e)];case 1:return i.sent(),localStorage.setItem(this.localStorageKey,t),localStorage.setItem(this.localStorageKey+"-whitelist",JSON.stringify(n)),[3,3];case 2:return r=i.sent(),console.error("Error saving manifest file",r),[3,3];case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(a.next(e))}catch(n){t(n)}}function o(e){try{s(a.throw(e))}catch(n){t(n)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,o)}s((a=a.apply(r,[])).next())}));var r,i,a},e.prototype.deleteManifestFile=function(){localStorage.removeItem(this.localStorageKey),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xd();t._withIDBStore("readwrite",(function(t){t.delete(e)}))}(this.idbKey)},e.prototype.setState=function(e){this.state=Od(Od({},this.state),e),this.state$.next(this.state)},e.\u0275fac=function(t){return new(t||e)(r.Tb(i.b))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Cd=function(){function e(e){var t=this;this.http=e,this.queue$=new Yc({getGlobalAlerts:[],getDestinyManifest:[],getMembershipDataForCurrentUser:[],getMembershipDataById:[],getProfile:[],getActivityHistory:[],getPostGameCarnageReport:[]}),this.actionPriority=["getGlobalAlerts","getDestinyManifest","getMembershipDataForCurrentUser","getMembershipDataById","getProfile","getActivityHistory","getPostGameCarnageReport"],this.queueCount={getGlobalAlerts:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getDestinyManifest:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getMembershipDataForCurrentUser:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getMembershipDataById:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getProfile:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getActivityHistory:{queued:0,completed:0,errors:0,percentage:0,color:"primary"},getPostGameCarnageReport:{queued:0,completed:0,errors:0,percentage:0,color:"primary"}},this.queue$.pipe(Object(Qe.a)(40)).subscribe((function(e){for(var n=function(n){var r=e[n];if("getPostGameCarnageReport"===n&&r.sort((function(e,t){return parseInt(t.params.activityId,10)-parseInt(e.params.activityId,10)})),r.length){var i=r.shift();return t.queue$.next(e),i&&i.actionFunction((function(e){return t.http.request(e.method,e.url,{params:e.params,body:e.body}).toPromise()}),i.params).then((function(e){i.callback(e),t.queueCount[n].completed++,t.updateQueue(t.queueCount[n])})).catch((function(e){i.callback(e),t.queueCount[n].errors++,t.updateQueue(t.queueCount[n])})),"break"}},r=0,i=t.actionPriority;r<i.length&&"break"!==n(i[r]);r++);}))}return e.prototype.addToQueue=function(e,t,n,r){var i=this;this.queue$.pipe(Object(et.a)(1)).subscribe((function(a){a[e]=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}(a[e],[{actionFunction:t,callback:n,params:r}]),i.queue$.next(a),i.queueCount[e].queued++,i.updateQueue(i.queueCount[e])}))},e.prototype.updateQueue=function(e){e.percentage=e.queued?(e.completed+e.errors)/e.queued*100:100;for(var t=!1,n=0,r=this.actionPriority;n<r.length;n++){var i=r[n];this.queueCount[i].color=t||0===this.queueCount[i].queued||100===this.queueCount[i].percentage?"primary":"accent",this.queueCount[i].percentage>0&&this.queueCount[i].percentage<100&&(t=!0)}},e.\u0275fac=function(t){return new(t||e)(r.Tb(i.b))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ad=function(){function e(){}return e.prototype.transform=function(e,t){switch(t){case"class":switch(e){case"2017-9-6":case"2017-09-06":case"2017-10-24":case"2017-12-5":case"2017-12-05":case"2018-5-8":case"2018-05-08":case"2018-9-4":case"2018-09-04":case"2018-12-4":case"2018-12-04":case"2019-3-5":case"2019-03-05":case"2019-6-4":case"2019-06-04":case"2019-10-1":case"2019-10-01":case"2019-12-10":case"2020-3-10":case"2020-03-10":case"2020-6-9":case"2020-06-09":case"2020-11-10":case"2021-2-9":case"2021-02-09":case"2021-5-11":case"2021-05-11":case"2021-8-24":case"2021-08-24":case"2021-12-7":case"2021-12-07":case"2022-2-22":case"2022-02-22":return"release";case"2017-9-13":case"2017-09-13":case"2017-12-6":case"2017-12-06":case"2018-5-11":case"2018-05-11":case"2018-9-14":case"2018-09-14":case"2018-12-7":case"2018-12-07":case"2019-6-4":case"2019-06-04":case"2019-10-5":case"2019-10-05":case"2020-11-21":case"2021-5-22":case"2021-05-22":return"raid";case"2018-7-8":case"2018-07-08":case"2018-7-20":case"2018-07-20":case"2018-7-31":case"2018-07-31":case"2018-12-4":case"2018-12-04":case"2018-12-7":case"2018-12-07":case"2018-12-11":case"2018-12-18":case"2019-1-8":case"2019-01-08":case"2019-1-29":case"2019-01-29":case"2019-2-5":case"2019-02-05":case"2019-3-5":case"2019-03-05":case"2019-3-8":case"2019-03-08":case"2019-3-12":case"2019-03-12":case"2019-3-15":case"2019-03-15":case"2019-3-19":case"2019-03-19":case"2019-3-26":case"2019-03-26":case"2019-4-2":case"2019-04-02":case"2019-4-9":case"2019-04-09":case"2019-4-16":case"2019-04-16":case"2019-6-4":case"2019-06-04":case"2019-6-11":case"2019-06-11":case"2019-6-18":case"2019-06-18":case"2019-6-25":case"2019-06-25":case"2019-7-2":case"2019-07-02":case"2019-7-9":case"2019-07-09":case"2019-7-30":case"2019-07-30":case"2019-10-5":case"2019-10-05":case"2019-10-22":case"2019-10-29":case"2019-11-19":case"2019-12-17":case"2020-1-7":case"2020-01-07":case"2020-1-28":case"2020-01-28":case"2020-2-4":case"2020-02-04":case"2020-2-11":case"2020-02-11":case"2020-3-13":case"2020-03-13":case"2020-3-17":case"2020-03-17":case"2020-3-24":case"2020-03-24":case"2020-4-7":case"2020-04-07":case"2020-4-21":case"2020-04-21":case"2020-6-6":case"2020-06-06":case"2020-7-7":case"2020-07-07":case"2020-8-11":case"2020-08-11":case"2020-9-8":case"2020-09-08":case"2020-10-6":case"2020-10-06":case"2020-11-9":case"2020-11-09":case"2020-11-17":case"2020-12-15":case"2021-2-16":case"2021-02-16":case"2021-2-23":case"2021-02-23":case"2021-3-23":case"2021-03-23":case"2021-4-20":case"2021-04-20":case"2021-5-7":case"2021-05-07":case"2021-5-18":case"2021-05-18":case"2021-5-25":case"2021-05-25":case"2021-6-1":case"2021-06-01":case"2021-6-8":case"2021-06-08":case"2021-6-29":case"2021-06-29":case"2021-7-6":case"2021-07-06":case"2021-8-10":case"2021-08-10":case"2021-8-31":case"2021-08-31":case"2021-9-7":case"2021-09-07":case"2021-10-12":return"event";default:return""}case"text":switch(e){case"2017-9-6":case"2017-09-06":return" | Destiny 2 Console";case"2017-9-13":case"2017-09-13":return" | Leviathan Raid";case"2017-10-24":return" | Destiny 2 PC";case"2017-12-5":case"2017-12-05":return" | Launch: Curse of Osiris";case"2017-12-6":case"2017-12-06":return" | Eater of Worlds Raid Lair";case"2018-5-8":case"2018-05-08":return" | Launch: Warmind";case"2018-5-11":case"2018-05-11":return" | Spire of Stars Raid Lair";case"2018-7-8":case"2018-07-08":return" | Moments of Triumph";case"2018-7-20":case"2018-07-20":return" | The Whisper";case"2018-7-31":case"2018-07-31":return" | Solstice of Heroes";case"2018-9-4":case"2018-09-04":return" | Launch: Forsaken | Season of the Outlaw";case"2018-9-14":case"2018-09-14":return" | Last Wish Raid";case"2018-12-4":case"2018-12-04":return" | Season of the Forge | Volundr Forge";case"2018-12-7":case"2018-12-07":return" | Scourge of the Past Raid | Gofannon Forge";case"2018-12-11":return" | The Dawning";case"2018-12-18":return" | Izanami Forge";case"2019-1-8":case"2019-01-08":return" | Niobe Labs";case"2019-1-29":case"2019-01-29":return" | The Draw Quest";case"2019-2-5":case"2019-02-05":return" | Crimson Days";case"2019-3-5":case"2019-03-05":return" | Season of the Drifter | Gambit Prime: New Arcadia & Reckoning Tier 1";case"2019-3-8":case"2019-03-08":return" | Reckoning Tier 2";case"2019-3-12":case"2019-03-12":return" | Gambit Prime: Deep Six | Exotic Quest: Thorn";case"2019-3-15":case"2019-03-15":return" | Invitations of the Nine | Reckoning Tier 3";case"2019-3-19":case"2019-03-19":return" | Gambit Prime: Legion's Folly";case"2019-3-26":case"2019-03-26":return" | Gambit Prime: Emerald Coast";case"2019-4-2":case"2019-04-02":return" | Gambit Prime: All Maps";case"2019-4-9":case"2019-04-09":return" | Arc Week";case"2019-4-16":case"2019-04-16":return" | The Revelry";case"2019-6-4":case"2019-06-04":return" | Season of Opulence | Menagerie & Crown of Sorrow Raid";case"2019-6-11":case"2019-06-11":return" | New Menagerie Boss | Exotic Quest: Truth";case"2019-6-18":case"2019-06-18":return" | New Menagerie Boss | Iron Banner Quest";case"2019-6-25":case"2019-06-25":return" | Menagerie Heroic Mode";case"2019-7-2":case"2019-07-02":return" | Exotic Quest: Lumina";case"2019-7-9":case"2019-07-09":return" | Tribute Hall | Moments of Triumph";case"2019-7-30":case"2019-07-30":return" | Solstice of Heroes";case"2019-10-1":case"2019-10-01":return" | Launch: Shadowkeep | Season of Undying";case"2019-10-5":case"2019-10-05":return" | Garden of Salvation | Vex Offensive";case"2019-10-22":return" | Exotic Quest: Leviathan's Breath | Master Nightmare Hunts";case"2019-10-29":return" | Festival of the Lost | Pit of Heresy Dungeon | Exotic Quest: Xenophage";case"2019-11-19":return" | Vex Offensive: Final Assault";case"2019-12-10":return" | Season of Dawn";case"2019-12-17":return" | The Dawning";case"2020-1-7":case"2020-01-07":return" | Exotic Quest: Devil's Ruin";case"2020-1-28":case"2020-01-28":return" | Exotic Quest: Bastion";case"2020-2-4":case"2020-02-04":return" | Empyrean Foundation";case"2020-2-11":case"2020-02-11":return" | Crimson Days";case"2020-3-10":case"2020-03-10":return" | Season of the Worthy | Seraph Bunker: EDZ";case"2020-3-13":case"2020-03-13":return" | Trials of Osiris Returns";case"2020-3-17":case"2020-03-17":return" | Exotic Quest: The Fourth Horseman";case"2020-3-24":case"2020-03-24":return" | Seraph Bunker: Moon";case"2020-4-7":case"2020-04-07":return" | Seraph Bunker: Io";case"2020-4-21":case"2020-04-21":return" | Guardian Games | Grandmaster Ordeal";case"2020-6-6":case"2020-06-06":return" | Live Event: Almighty's Destruction";case"2020-6-9":case"2020-06-09":return" | Season of Arrivals | Contact Event: Io | Prophecy Dungeon";case"2020-7-7":case"2020-07-07":return" | Moments of Triumph | Exotic Quest: Ruinous Effigy | Contact Event: Titan";case"2020-8-11":case"2020-08-11":return" | Solstice of Heroes";case"2020-9-8":case"2020-09-08":return" | Exotic Quest: Traveler's Chosen";case"2020-10-6":case"2020-10-06":return" | Festival of the Lost";case"2020-11-9":case"2020-11-09":return" | Live Event: Traveler Reforged";case"2020-11-10":return" | Launch: Beyond Light | Season of the Hunt";case"2020-11-17":return" | Wrathborn Hunts";case"2020-11-21":return" | Deep Stone Crypt Raid";case"2020-12-15":return" | The Dawning";case"2021-2-9":case"2021-02-09":return" | Season of the Chosen | H.E.L.M. Opens | Behemoth & Hailstone Battlegrounds";case"2021-2-16":case"2021-02-16":return" | Foothold Battleground | Exotic Quest: Presage";case"2021-2-23":case"2021-02-23":return" | Oracle Battleground";case"2021-3-23":case"2021-03-23":return" | Proving Grounds Strike";case"2021-4-20":case"2021-04-20":return" | Guardian Games";case"2021-5-7":case"2021-05-07":return" | Guardian Games Closing Ceremony";case"2021-5-11":case"2021-05-11":return" | Season of the Splicer | Override: Europa";case"2021-5-18":case"2021-05-18":return" | Override: Moon";case"2021-5-22":case"2021-05-22":return" | Vault of Glass Raid";case"2021-5-25":case"2021-05-25":return" | Override: Tangled Shore | Expunge: Labyrinth";case"2021-6-1":case"2021-06-01":return" | Expunge: Styx";case"2021-6-8":case"2021-06-08":return" | Expunge: Tartarus";case"2021-6-29":case"2021-06-29":return" | Expunge: Delphi";case"2021-7-6":case"2021-07-06":return" | Solstice of Heroes";case"2021-8-10":case"2021-08-10":return" | Season of the Splicer Epilogue";case"2021-8-24":case"2021-08-24":return" | Season of the Lost | Exotic Quest: Ager's Scepter | Shattered Realm: Forest of Echoes";case"2021-8-31":case"2021-08-31":return" | Shattered Realm: Debris of Dreams";case"2021-9-7":case"2021-09-07":return" | Shattered Realm: Ruins of Wrath";case"2021-10-12":return" | Festival of the Lost";case"2021-12-7":case"2021-12-07":return" | Bungie 30th Anniversary Expansion";case"2022-2-22":case"2022-02-22":return" | Launch: The Witch Queen";default:return""}default:return""}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"milestone",type:e,pure:!0}),e}(),Md=function(){function e(){}return e.prototype.transform=function(e,t){var n=0;return e.forEach((function(e){(!t||0===t||"0"===t||t===e.activityDetails.mode||e.activityDetails.modes.indexOf(+t)>-1)&&(n+=e.values.timePlayedSeconds.basic.value)})),n},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"addTime",type:e,pure:!1}),e}(),jd=function(){function e(e){this.manifestService=e}return e.prototype.transform=function(e,t){var n=this;return this.manifestService.state$.pipe(Object(v.a)((function(r){var i,a,o;if(r.loaded)switch(t){case"activityName":return null===(i=n.manifestService.defs.Activity.get(e))||void 0===i?void 0:i.displayProperties.name;case"activityMode":return null===(a=n.manifestService.defs.ActivityMode.get(e))||void 0===a?void 0:a.displayProperties.name;case"activityIcon":return(null===(o=n.manifestService.defs.Activity.get(e))||void 0===o?void 0:o.displayProperties.hasIcon)?"https://bungie.net"+n.manifestService.defs.Activity.get(e).displayProperties.icon:"";default:return""}})))},e.\u0275fac=function(t){return new(t||e)(r.Kb(Td))},e.\u0275pipe=r.Jb({name:"manifest",type:e,pure:!0}),e}(),Pd=function(e){return{top:e}};function Rd(e,t){if(1&e&&(r.Pb(0,"div",4),r.Pb(1,"span",5),r.wc(2),r.Ob(),r.Ob()),2&e){var n=t.$implicit,i=r.ac();r.gc("ngStyle",r.ic(2,Pd,i.gameHours[n].offset+"px")),r.zb(2),r.xc(i.gameHours[n].display)}}var Id=function(e,t){return{height:e,top:t}};function Dd(e,t){if(1&e&&(r.Lb(0,"a",6),r.bc(1,"async"),r.bc(2,"manifest"),r.bc(3,"async"),r.bc(4,"manifest")),2&e){var n=t.$implicit,i=r.ac();r.gc("ngClass","mode-"+n.activityDetails.mode)("ngStyle",r.jc(14,Id,(i.Math.floor(n.values.timePlayedSeconds.basic.value/60)||1)+"px",n.offset+"px"))("matTooltip",r.cc(1,4,r.dc(2,6,n.activityDetails.mode,"activityMode"))+" | "+r.cc(3,9,r.dc(4,11,n.activityDetails.referenceId,"activityName")))("href","https://www.bungie.net/en/PGCR/"+n.activityDetails.instanceId+"?character="+n.characterId,r.oc)}}var Fd=function(e){return{height:e}},Ld=function(){function e(e){this.data=e,this.allHours=[],this.gameHours={},this.gameHourKeys=[],this.Math=Math}return e.prototype.ngOnInit=function(){this.dayStart=new Date(this.data.date+"T00:00:00");for(var e=new Date(this.dayStart.getTime()),t=0;t<24;t++){var n=e.getTime(),r=e.toLocaleTimeString(void 0,{hour:"numeric"});e.setHours(t+1);var i=e.getTime();this.allHours.push({id:t,display:r,start:n,stop:i})}for(var a=0,o=this.data.activities;a<o.length;a++)for(var s=o[a],u=0,c=this.allHours;u<c.length;u++){var l=c[u];s.startDate.getTime()<l.stop&&s.endDate.getTime()>=l.start&&(this.gameHours[l.id]=l)}for(var h,f=0,d=0,p=Object.keys(this.gameHours);d<p.length;d++)l=p[d],h&&this.gameHours[l].id-h>1&&(f+=10),this.gameHours[l].offset=f,h=this.gameHours[l].id,this.modalHeight=f+=60;this.gameHourKeys=Object.keys(this.gameHours);for(var v=0,m=this.data.activities;v<m.length;v++)(s=m[v]).offset=this.gameHours[s.startDate.getHours()].offset+s.startDate.getMinutes()},e.\u0275fac=function(t){return new(t||e)(r.Kb(Us))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-day-modal"]],decls:9,vars:15,consts:[["mat-dialog-title",""],[1,"timelineBase",3,"ngStyle"],["class","timelineLabels",3,"ngStyle",4,"ngFor","ngForOf"],["class","timelineActivity","matTooltipPosition","after","target","_blank",3,"ngClass","ngStyle","matTooltip","href",4,"ngFor","ngForOf"],[1,"timelineLabels",3,"ngStyle"],[1,"time","mat-caption"],["matTooltipPosition","after","target","_blank",1,"timelineActivity",3,"ngClass","ngStyle","matTooltip","href"]],template:function(e,t){1&e&&(r.Pb(0,"h2",0),r.wc(1),r.bc(2,"milestone"),r.bc(3,"addTime"),r.bc(4,"addTime"),r.Ob(),r.Pb(5,"mat-dialog-content"),r.Pb(6,"div",1),r.vc(7,Rd,3,4,"div",2),r.vc(8,Dd,5,17,"a",3),r.Ob(),r.Ob()),2&e&&(r.zb(1),r.yc(" ",t.data.date+r.dc(2,4,t.data.date,"text")+": "+t.Math.floor(r.dc(3,7,t.data.activities,"0")/86400*24)+"h "+t.Math.floor(r.dc(4,10,t.data.activities,"0")%3600/60)+"m","\n"),r.zb(5),r.gc("ngStyle",r.ic(13,Fd,t.modalHeight+"px")),r.zb(1),r.gc("ngForOf",t.gameHourKeys),r.zb(1),r.gc("ngForOf",t.data.activities))},directives:[Xs,Ys,f.m,f.k,f.j,jc],pipes:[Ad,Md,f.b,jd],styles:[".timelineBase[_ngcontent-%COMP%]{width:59px;display:block;position:relative;margin-left:3em}.timelineLabels[_ngcontent-%COMP%]{display:block;position:absolute;height:59px;width:60px;background-color:#e6e6e6}.timelineLabels[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-left:-3.5em;width:3em;display:block;text-align:right}.timelineActivity[_ngcontent-%COMP%]{display:block;width:60px;position:absolute;left:.5em;background-color:#323296}.mode-39[_ngcontent-%COMP%], .mode-41[_ngcontent-%COMP%], .mode-42[_ngcontent-%COMP%]{background-color:#00ded1}.mode-5[_ngcontent-%COMP%], .mode-10[_ngcontent-%COMP%], .mode-12[_ngcontent-%COMP%], .mode-31[_ngcontent-%COMP%], .mode-37[_ngcontent-%COMP%], .mode-38[_ngcontent-%COMP%]{background-color:#ca1c1b}.mode-19[_ngcontent-%COMP%], .mode-43[_ngcontent-%COMP%], .mode-44[_ngcontent-%COMP%], .mode-45[_ngcontent-%COMP%]{background-color:#485537}.mode-3[_ngcontent-%COMP%], .mode-18[_ngcontent-%COMP%]{background-color:#3d526f}.mode-16[_ngcontent-%COMP%], .mode-17[_ngcontent-%COMP%]{background-color:#1f3043}.mode-2[_ngcontent-%COMP%]{background-color:#ed8129}.mode-40[_ngcontent-%COMP%]{background-color:#fff}.mode-6[_ngcontent-%COMP%]{background-color:#cacaca}.mode-4[_ngcontent-%COMP%]{background-color:#461044}.mode-63[_ngcontent-%COMP%]{background-color:#2b8e69}"]}),e}(),Nd=function(){function e(){}return e.prototype.transform=function(e,t){return Math.floor(e/60)+"h"},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"hoursPlayed",type:e,pure:!0}),e}(),Bd=function(){function e(){}return e.prototype.transform=function(e,t){return Math.floor(e/1440)+"d "+Math.floor(e%1440/60)+"h "+Math.floor(e%1440%60)+"m"},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"parseMinutesPlayed",type:e,pure:!0}),e}(),Hd=function(){function e(){}return e.prototype.transform=function(e,t){var n=e.reduce((function(e,t){return e+ +t.values.timePlayedSeconds.basic.value}),0);return Math.floor(n/3600)+"h"},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"activitiesTotalHours",type:e,pure:!1}),e}(),Ud=function(){function e(){}return e.prototype.transform=function(e,t){var n=e.reduce((function(e,t){return e+ +t.values.timePlayedSeconds.basic.value}),0);return Math.floor(n/86400)+"d "+Math.floor(n%86400/3600)+"h "+Math.floor(n%86400%3600/60)+"m"},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"activitiesTotalTime",type:e,pure:!1}),e}(),Vd=function(){function e(){}return e.prototype.transform=function(e,t){return e.some((function(e,t,n){return e.loading}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"loadingReduce",type:e,pure:!1}),e}(),zd=function(){function e(){}return e.prototype.transform=function(e,t){var n="inactive",r=1;e[e.length-1].length>0&&(n="active");for(var i=e.length-2;i>-1&&("active"===n&&e[i].length>0||"inactive"===n&&e[i].length<1);i--)r++;return r+" days "+n},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"currentStreak",type:e,pure:!1}),e}(),Wd=function(){function e(){}return e.prototype.transform=function(e,t){for(var n=0,r=0,i=0,a=0,o=0;o<e.length;o++)e[o].length>0?(r=0,++n>i&&(i=n)):i>0&&(n=0,++r>a&&(a=r));return i+" days active | "+a+" days inactive"},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Jb({name:"longestStreaks",type:e,pure:!1}),e}(),Gd=function(){return(Gd=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Kd(e,t){if(1&e&&(r.Pb(0,"mat-card",7),r.Pb(1,"mat-card-title"),r.wc(2),r.Ob(),r.Pb(3,"mat-card-subtitle"),r.wc(4),r.Ob(),r.Ob()),2&e){var n=r.ac();r.zb(2),r.xc(n.errorStatus),r.zb(2),r.xc(n.errorMessage)}}function qd(e,t){1&e&&(r.Pb(0,"mat-icon",8),r.wc(1,"settings"),r.Ob())}function Xd(e,t){if(1&e&&(r.Pb(0,"mat-option",9),r.wc(1),r.bc(2,"async"),r.bc(3,"manifest"),r.Ob()),2&e){var n=t.$implicit;r.gc("value",n),r.zb(1),r.xc(r.cc(2,2,r.dc(3,4,n,"activityMode")))}}var Yd=function(e){return{"background-color":e}};function Zd(e,t){if(1&e){var n=r.Qb();r.Pb(0,"div",18),r.Wb("click",(function(){r.nc(n);var e=t.$implicit,i=r.ac().$implicit,a=r.ac().$implicit,o=r.ac();return o.openDay(a+"-"+(i<10?"0":"")+i+"-"+(e<10?"0":"")+e,o.days[a][i][e])})),r.bc(1,"milestone"),r.bc(2,"addTime"),r.bc(3,"addTime"),r.bc(4,"addTime"),r.bc(5,"addTime"),r.bc(6,"addTime"),r.bc(7,"milestone"),r.bc(8,"addTime"),r.bc(9,"addTime"),r.Ob()}if(2&e){var i=t.$implicit,a=r.ac().$implicit,o=r.ac().$implicit,s=r.ac();r.gc("ngClass",r.dc(1,3,o+"-"+a+"-"+i,"class"))("ngStyle",r.ic(29,Yd,"hsl("+(120*(100-r.dc(2,6,s.days[o][a][i],s.calendarFilter)/864)/50-120)+", "+(r.dc(3,9,s.days[o][a][i],s.calendarFilter)/86400>0?"100%":"0%")+", "+(r.dc(4,12,s.days[o][a][i],s.calendarFilter)/86400>0?r.dc(5,15,s.days[o][a][i],s.calendarFilter)/864>50?100-r.cc(6,18,s.days[o][a][i])/864+"%":"50%":"90%")+")"))("matTooltip",o+"-"+a+"-"+i+r.dc(7,20,o+"-"+a+"-"+i,"text")+": "+s.Math.floor(r.dc(8,23,s.days[o][a][i],s.calendarFilter)/86400*24)+"h "+s.Math.floor(r.dc(9,26,s.days[o][a][i],s.calendarFilter)%3600/60)+"m")}}var Jd=function(e){return{width:e}},Qd=function(e){return{height:e}};function $d(e,t){if(1&e&&(r.Pb(0,"div",13),r.Pb(1,"div",14),r.wc(2),r.Ob(),r.Pb(3,"div",15),r.bc(4,"loadingReduce"),r.Lb(5,"div",16),r.vc(6,Zd,10,31,"div",17),r.Ob(),r.Ob()),2&e){var n=t.$implicit,i=r.ac().$implicit,a=r.ac();r.gc("ngStyle",r.ic(7,Jd,a.Math.ceil((a.dayKeys[i][n].length+a.monthOffsets[i][n])/7)+"em")),r.zb(2),r.xc(n),r.zb(1),r.gc("ngClass",r.cc(4,5,a.loadingArray)?"loading":""),r.zb(2),r.gc("ngStyle",r.ic(9,Qd,a.monthOffsets[i][n]+"em")),r.zb(1),r.gc("ngForOf",a.dayKeys[i][n])}}function ep(e,t){if(1&e&&(r.Pb(0,"div",10),r.Pb(1,"div",11),r.Pb(2,"span"),r.wc(3),r.Ob(),r.Ob(),r.vc(4,$d,7,11,"div",12),r.Ob()),2&e){var n=t.$implicit,i=r.ac();r.zb(3),r.xc(n),r.zb(1),r.gc("ngForOf",i.monthKeys[n])}}var tp=function(){function e(e,t,n,r,i){this.http=e,this.dialog=t,this.manifestService=n,this.bungieQueue=r,this.bungieAuth=i,this.membershipDataForCurrentUser$=new Yc(void 0),this.accountResponse$=new Yc([]),this.Math=Math}return e.prototype.addDay=function(e){this.days[e.getFullYear()]||(this.days[e.getFullYear()]={}),this.days[e.getFullYear()][e.getMonth()+1]||(this.days[e.getFullYear()][e.getMonth()+1]={}),this.days[e.getFullYear()][e.getMonth()+1][e.getDate()]||(this.days[e.getFullYear()][e.getMonth()+1][e.getDate()]=[]),this.flatDays.push(this.days[e.getFullYear()][e.getMonth()+1][e.getDate()])},e.prototype.ngOnInit=function(){var e=this;this.loadingArray=[],this.calendarFilter="0",this.subs=[],this.activities=[],this.days={},this.flatDays=[],this.flatDaysBS=new Yc([]),this.manifestService.state$.subscribe((function(t){t.loaded&&(e.modeOptions=Object.keys(e.manifestService.defs.ActivityMode.dbTable).map((function(t){return e.manifestService.defs.ActivityMode.dbTable[t].modeType})).sort())})),this.errorStatus="",this.errorMessage="";for(var t=new Date("Sept 1, 2017"),n=new Date;t<=n;)this.addDay(t),t.setDate(t.getDate()+1);this.flatDaysBS.next(this.flatDays),this.yearKeys=Object.keys(this.days),this.monthKeys={},this.monthOffsets={2017:{9:5}};var r=5,i=30;this.dayKeys={},this.yearKeys.forEach((function(t){e.monthKeys[t]=Object.keys(e.days[t]),e.monthOffsets[t]||(e.monthOffsets[t]={}),e.dayKeys[t]={},e.monthKeys[t].forEach((function(n){e.monthOffsets[t][n]||(e.monthOffsets[t][n]=(i+r)%7,i=Object.keys(e.days[t][n]).length,r=e.monthOffsets[t][n]),e.dayKeys[t][n]=Object.keys(e.days[t][n])}))})),this.subs.push(this.bungieAuth.hasValidAccessToken$.pipe(wo(),Object(Je.a)((function(t){t&&e.bungieQueue.addToQueue("getProfile",yd,(function(t){e.membershipDataForCurrentUser$.next(t)}))}))).subscribe()),this.subs.push(this.membershipDataForCurrentUser$.pipe(wo(),Object(Fo.a)((function(t){var n,r;return y(null!==(r=null===(n=null==t?void 0:t.Response)||void 0===n?void 0:n.destinyMemberships.map((function(t){var n=new Yc(void 0);return e.bungieQueue.addToQueue("getProfile",md,(function(e){n.next(e),n.complete()}),{destinyMembershipId:t.membershipId,membershipType:t.membershipType,components:[100,200]}),n})))&&void 0!==r?r:Ms.a)})),Object(v.a)((function(t){return e.accountResponse$.next(t)}))).subscribe()),this.displayName=this.accountResponse$.pipe(wo(),Object(v.a)((function(e){return e[0]})),Object(v.a)((function(t){var n;return 1!==(null==t?void 0:t.ErrorCode)&&(null==t?void 0:t.ErrorStatus)&&(e.errorStatus=t.ErrorStatus,e.errorMessage=t.Message),null===(n=null==t?void 0:t.Response)||void 0===n?void 0:n.profile.data.userInfo.displayName}))),this.characters$=this.accountResponse$.pipe(wo(),Object(v.a)((function(t){for(var n=[],r=function(t){1!==(null==t?void 0:t.ErrorCode)&&(null==t?void 0:t.ErrorStatus)&&(e.errorStatus=t.ErrorStatus,e.errorMessage=t.Message);try{Object.keys(t.Response.characters.data).forEach((function(e){Gd(Gd({},t.Response.profile.data),t.Response.characters.data[e]),n.push(t.Response.characters.data[e])}))}catch(r){}},i=0,a=t;i<a.length;i++)r(a[i]);return n}))),this.minutesPlayedTotal=this.characters$.pipe(Object(v.a)((function(e){var t=0;return e.forEach((function(e){t+=+e.minutesPlayedTotal})),t}))),this.subs.push(this.characters$.pipe(wo()).subscribe((function(t){e.activities=[],t.forEach((function(t){var n={destinyMembershipId:t.membershipId,membershipType:t.membershipType,characterId:t.characterId,mode:0,count:250};e.addHistorySub(Gd(Gd({},n),{page:0})),e.addHistorySub(Gd(Gd({},n),{page:1})),e.addHistorySub(Gd(Gd({},n),{page:2}))}))})))},e.prototype.addHistorySub=function(e){var t=this,n={loading:!0};this.loadingArray.push(n);var r=e.page,i=new Yc(void 0);this.bungieQueue.addToQueue("getActivityHistory",gd,(function(e){i.next(e)}),e),this.subs.push(i.subscribe((function(i){1!==(null==i?void 0:i.ErrorCode)&&(null==i?void 0:i.ErrorStatus)&&(t.errorStatus=i.ErrorStatus,t.errorMessage=i.Message),(null==i?void 0:i.Response.activities)&&(null==i?void 0:i.Response.activities.length)&&(t.addHistorySub(Gd(Gd({},e),{page:r+3})),i.Response.activities.forEach((function(n){n.characterId=e.characterId;var r=new Date(n.period).getTime()/1e3+n.values.startSeconds.basic.value,i=r+n.values.timePlayedSeconds.basic.value;n.startDate=new Date(1e3*r),n.endDate=new Date(1e3*i),t.activities.push(n);try{t.days[n.startDate.getFullYear()][n.startDate.getMonth()+1][n.startDate.getDate()].push(n)}catch(a){}t.flatDaysBS.next(t.flatDays)}))),i&&(n.loading=!1)})))},e.prototype.openDay=function(e,t){this.loadingArray.length&&!this.loadingArray.some((function(e){return e.loading}))&&this.dialog.open(Ld,{data:{date:e,activities:t},width:"300px"})},e.prototype.ngOnDestroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e.\u0275fac=function(t){return new(t||e)(r.Kb(i.b),r.Kb(Ks),r.Kb(Td),r.Kb(Cd),r.Kb(cd))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-guardian"]],decls:44,vars:33,consts:[["class","errorStatus",4,"ngIf"],[1,"mat-body-1"],[1,"mat-body-2"],["aria-label","Search for Guardian","class","spinner",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","calYear",4,"ngFor","ngForOf"],[1,"errorStatus"],["aria-label","Search for Guardian",1,"spinner"],[3,"value"],[1,"calYear"],[1,"yearLabel","mat-caption"],["class","calMonth",3,"ngStyle",4,"ngFor","ngForOf"],[1,"calMonth",3,"ngStyle"],[1,"monthLabel","mat-caption"],[1,"dayWrapper",3,"ngClass"],[1,"monthSpacer",3,"ngStyle"],["class","calDay","matTooltipPosition","after",3,"ngClass","ngStyle","matTooltip","click",4,"ngFor","ngForOf"],["matTooltipPosition","after",1,"calDay",3,"ngClass","ngStyle","matTooltip","click"]],template:function(e,t){1&e&&(r.vc(0,Kd,5,2,"mat-card",0),r.Pb(1,"div",1),r.wc(2," Name: "),r.Pb(3,"span",2),r.wc(4),r.bc(5,"async"),r.Ob(),r.Lb(6,"br"),r.wc(7," Total Time in Destiny 2: "),r.Pb(8,"span",2),r.wc(9),r.bc(10,"hoursPlayed"),r.bc(11,"async"),r.Ob(),r.wc(12," = "),r.Pb(13,"span",2),r.wc(14),r.bc(15,"parseMinutesPlayed"),r.bc(16,"async"),r.Ob(),r.Lb(17,"br"),r.wc(18," Total Time in Activities: "),r.Pb(19,"span",2),r.wc(20),r.bc(21,"activitiesTotalHours"),r.Ob(),r.wc(22," = "),r.Pb(23,"span",2),r.wc(24),r.bc(25,"activitiesTotalTime"),r.Ob(),r.Lb(26,"br"),r.wc(27," Destiny 2 Activity Count: "),r.Pb(28,"span",2),r.wc(29),r.Ob(),r.vc(30,qd,2,0,"mat-icon",3),r.bc(31,"loadingReduce"),r.Lb(32,"br"),r.wc(33),r.bc(34,"currentStreak"),r.Lb(35,"br"),r.wc(36),r.bc(37,"longestStreaks"),r.Lb(38,"br"),r.wc(39," Filter Heatmap: "),r.Pb(40,"mat-form-field"),r.Pb(41,"mat-select",4),r.Wb("ngModelChange",(function(e){return t.calendarFilter=e})),r.vc(42,Xd,4,7,"mat-option",5),r.Ob(),r.Ob(),r.Ob(),r.vc(43,ep,5,2,"div",6)),2&e&&(r.gc("ngIf",t.errorStatus),r.zb(4),r.xc(r.cc(5,13,t.displayName)),r.zb(5),r.xc(r.cc(10,15,r.cc(11,17,t.minutesPlayedTotal))),r.zb(5),r.xc(r.cc(15,19,r.cc(16,21,t.minutesPlayedTotal))),r.zb(6),r.xc(r.cc(21,23,t.activities)),r.zb(4),r.xc(r.cc(25,25,t.activities)),r.zb(5),r.xc(t.activities.length),r.zb(1),r.gc("ngIf",r.cc(31,27,t.loadingArray)),r.zb(3),r.yc(" Current Streak: ",r.cc(34,29,t.flatDays),""),r.zb(3),r.yc(" Longest Streaks: ",r.cc(37,31,t.flatDays),""),r.zb(5),r.gc("ngModel",t.calendarFilter),r.zb(1),r.gc("ngForOf",t.modeOptions),r.zb(1),r.gc("ngForOf",t.yearKeys))},directives:[f.l,Xu,mc,P,Ie,f.k,mo,po,vo,mu,Ma,f.m,f.j,jc],pipes:[f.b,Nd,Bd,Hd,Ud,Vd,zd,Wd,jd,Ad,Md],styles:[".calYear[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:1em}.calMonth[_ngcontent-%COMP%]{margin-right:.5em;margin-bottom:.5em}.calMonth[_ngcontent-%COMP%], .dayWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dayWrapper[_ngcontent-%COMP%]{height:7em;flex-wrap:wrap}.calDay[_ngcontent-%COMP%]{display:block;width:1em;height:1em;box-sizing:border-box;cursor:pointer}.loading[_ngcontent-%COMP%] > .calDay[_ngcontent-%COMP%]{cursor:progress}.yearLabel[_ngcontent-%COMP%]{display:flex;align-items:center}.yearLabel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;transform:rotate(-90deg)}.monthSpacer[_ngcontent-%COMP%]{width:1em}.monthLabel[_ngcontent-%COMP%]{text-align:center}.release[_ngcontent-%COMP%]{border:2px solid #fff}.event[_ngcontent-%COMP%], .raid[_ngcontent-%COMP%]{border:1px solid #fff}.spinner[_ngcontent-%COMP%]{-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;height:1em;width:1em;display:inline-block;line-height:1em;font-size:.75em}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-webkit-keyframes spinX{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spinX{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.errorStatus[_ngcontent-%COMP%]{margin-bottom:.5em}"]}),e}();function np(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}var rp,ip=n("md7G");function ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}for(var op=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),sp=[],up=0;up<256;up++)sp[up]=(up<16?"0":"")+up.toString(16);var cp=Math.PI/180,lp=180/Math.PI;function hp(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(sp[255&e]+sp[e>>8&255]+sp[e>>16&255]+sp[e>>24&255]+"-"+sp[255&t]+sp[t>>8&255]+"-"+sp[t>>16&15|64]+sp[t>>24&255]+"-"+sp[63&n|128]+sp[n>>8&255]+"-"+sp[n>>16&255]+sp[n>>24&255]+sp[255&r]+sp[r>>8&255]+sp[r>>16&255]+sp[r>>24&255]).toUpperCase()}function fp(e,t,n){return Math.max(t,Math.min(n,e))}function dp(e,t,n){return(1-n)*e+n*t}function pp(e){return 0==(e&e-1)&&0!==e}function vp(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var mp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(l.a)(this,t),this.x=e,this.y=n}return Object(h.a)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:Dc.a.mark((function e(){return Dc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);mp.prototype.isVector2=!0;var gp,yp=function(){function e(){Object(l.a)(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return Object(h.a)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=a*p+o*g+s*_,i[3]=a*v+o*y+s*w,i[6]=a*m+o*b+s*x,i[1]=u*p+c*g+l*_,i[4]=u*v+c*y+l*w,i[7]=u*m+c*b+l*x,i[2]=h*p+f*g+d*_,i[5]=h*v+f*y+d*w,i[8]=h*m+f*b+d*x,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-n*i*c+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=c*a-o*u,h=o*s-c*i,f=u*i-a*s,d=t*l+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=l*p,e[1]=(r*u-c*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*c,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function bp(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function _p(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function wp(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=3735928559^n,i=1103547991^n,a=0;a<e.length;a++)t=e.charCodeAt(a),r=Math.imul(r^t,2654435761),i=Math.imul(i^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&(i=Math.imul(i^i>>>16,2246822507)^Math.imul(r^r>>>13,3266489909)))+(r>>>0)}yp.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var xp=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===gp&&(gp=_p("canvas")),gp.width=e.width,gp.height=e.height;var n=gp.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=gp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),kp=0,Sp=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return Object(l.a)(this,n),e=t.call(this),Object.defineProperty(Object(a.a)(e),"id",{value:kp++}),e.uuid=hp(),e.name="",e.image=r,e.mipmaps=[],e.mapping=i,e.wrapS=o,e.wrapT=s,e.magFilter=u,e.minFilter=c,e.anisotropy=d,e.format=h,e.internalFormat=null,e.type=f,e.offset=new mp(0,0),e.repeat=new mp(1,1),e.center=new mp(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new yp,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=p,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return Object(h.a)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=hp()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(Ep(r[a].isDataTexture?r[a].image:r[a]))}else i=Ep(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(op);function Ep(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?xp.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Sp.DEFAULT_IMAGE=void 0,Sp.DEFAULT_MAPPING=300,Sp.prototype.isTexture=!0;var Op=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(l.a)(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return Object(h.a)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=e.elements,o=a[0],s=a[4],u=a[8],c=a[1],l=a[5],h=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-c)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(o+l+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var v=(o+1)/2,m=(l+1)/2,g=(p+1)/2,y=(s+c)/4,b=(u+f)/4,_=(h+d)/4;return v>m&&v>g?v<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(v)),i=b/n):m>g?m<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(m)),i=_/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=_/i),this.set(n,r,i,t),this}var w=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(c-s)*(c-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(u-f)/w,this.z=(c-s)/w,this.w=Math.acos((o+l+p-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:Dc.a.mark((function e(){return Dc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);Op.prototype.isVector4=!0;var Tp=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(l.a)(this,n),(i=t.call(this)).width=e,i.height=r,i.depth=1,i.scissor=new Op(0,0,e,r),i.scissorTest=!1,i.viewport=new Op(0,0,e,r),i.texture=new Sp(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),i.texture.isRenderTargetTexture=!0,i.texture.image={width:e,height:r,depth:1},i.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,i.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,i.texture.minFilter=void 0!==a.minFilter?a.minFilter:1006,i.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,i.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,i.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,i}return Object(h.a)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ap(Object(n),!0).forEach((function(t){Object(nl.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ap(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(op);Tp.prototype.isWebGLRenderTarget=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;Object(l.a)(this,n);var o=(a=t.call(this,e,r)).texture;a.texture=[];for(var s=0;s<i;s++)a.texture[s]=o.clone();return a}return Object(h.a)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(Tp).prototype.isWebGLMultipleRenderTargets=!0;var Cp=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(l.a)(this,n),(i=t.call(this,e,r,a)).samples=4,i.ignoreDepthForMultisampleCopy=void 0===a.ignoreDepth||a.ignoreDepth,i.useRenderToTexture=void 0!==a.useRenderToTexture&&a.useRenderToTexture,i.useRenderbuffer=!1===i.useRenderToTexture,i}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}]),n}(Tp);Cp.prototype.isWebGLMultisampleRenderTarget=!0;var Ap=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(l.a)(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return Object(h.a)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(r/2),l=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"YXZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"ZXY":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"ZYX":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"YZX":this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d;break;case"XZY":this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],c=t[6],l=t[10],h=n+o+l;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-s)*f,this._y=(i-u)*f,this._z=(a-r)*f}else if(n>o&&n>l){var d=2*Math.sqrt(1+n-o-l);this._w=(c-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>l){var p=2*Math.sqrt(1+o-n-l);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+c)/p}else{var v=2*Math.sqrt(1+l-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+c)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(fp(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+r*u-i*s,this._y=r*c+a*s+i*o-n*u,this._z=i*c+a*u+n*s-r*o,this._w=a*c-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-t)*l)/c,f=Math.sin(t*l)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=c,void(e[t+3]=l);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(l!==p||s!==h||u!==f||c!==d){var v=1-o,m=s*h+u*f+c*d+l*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,m*g);v=Math.sin(v*_)/b,o=Math.sin(o*_)/b}var w=o*g;if(s=s*v+h*w,u=u*v+f*w,c=c*v+d*w,l=l*v+p*w,v===1-o){var x=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=x,u*=x,c*=x,l*=x}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[a],h=i[a+1],f=i[a+2],d=i[a+3];return e[t]=o*d+c*l+s*f-u*h,e[t+1]=s*d+c*h+u*l-o*f,e[t+2]=u*d+c*f+o*h-s*l,e[t+3]=c*d-o*l-s*h-u*f,e}}]),e}();Ap.prototype.isQuaternion=!0;var Mp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(l.a)(this,t),this.x=e,this.y=n,this.z=r}return Object(h.a)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Pp.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Pp.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,c=s*n+o*t-i*r,l=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=u*s+h*-i+c*-o-l*-a,this.y=c*s+h*-a+l*-i-u*-o,this.z=l*s+h*-o+u*-a-c*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return jp.copy(this).projectOnVector(e),this.sub(jp)}},{key:"reflect",value:function(e){return this.sub(jp.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(fp(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:Dc.a.mark((function e(){return Dc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);Mp.prototype.isVector3=!0;var jp=new Mp,Pp=new Ap,Rp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp(-1/0,-1/0,-1/0);Object(l.a)(this,e),this.min=t,this.max=n}return Object(h.a)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],h=e[s+2];c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),h=e.getZ(s);c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Dp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Fp.copy(t.boundingBox),Fp.applyMatrix4(e.matrixWorld),this.union(Fp));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Dp),Dp.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(zp),Wp.subVectors(this.max,zp),Lp.subVectors(e.a,zp),Np.subVectors(e.b,zp),Bp.subVectors(e.c,zp),Hp.subVectors(Np,Lp),Up.subVectors(Bp,Np),Vp.subVectors(Lp,Bp);var t=[0,-Hp.z,Hp.y,0,-Up.z,Up.y,0,-Vp.z,Vp.y,Hp.z,0,-Hp.x,Up.z,0,-Up.x,Vp.z,0,-Vp.x,-Hp.y,Hp.x,0,-Up.y,Up.x,0,-Vp.y,Vp.x,0];return!!qp(t,Lp,Np,Bp,Wp)&&!!qp(t=[1,0,0,0,1,0,0,0,1],Lp,Np,Bp,Wp)&&(Gp.crossVectors(Hp,Up),qp(t=[Gp.x,Gp.y,Gp.z],Lp,Np,Bp,Wp))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Dp.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Dp).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ip[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ip[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ip[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ip[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ip[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ip[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ip[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ip[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ip)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Rp.prototype.isBox3=!0;var Ip=[new Mp,new Mp,new Mp,new Mp,new Mp,new Mp,new Mp,new Mp],Dp=new Mp,Fp=new Rp,Lp=new Mp,Np=new Mp,Bp=new Mp,Hp=new Mp,Up=new Mp,Vp=new Mp,zp=new Mp,Wp=new Mp,Gp=new Mp,Kp=new Mp;function qp(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Kp.fromArray(e,a);var s=i.x*Math.abs(Kp.x)+i.y*Math.abs(Kp.y)+i.z*Math.abs(Kp.z),u=t.dot(Kp),c=n.dot(Kp),l=r.dot(Kp);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}var Xp=new Rp,Yp=new Mp,Zp=new Mp,Jp=new Mp,Qp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(l.a)(this,e),this.center=t,this.radius=n}return Object(h.a)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Xp.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){Jp.subVectors(e,this.center);var t=Jp.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(Jp.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return Zp.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Yp.copy(e.center).add(Zp)),this.expandByPoint(Yp.copy(e.center).sub(Zp)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),$p=new Mp,ev=new Mp,tv=new Mp,nv=new Mp,rv=new Mp,iv=new Mp,av=new Mp,ov=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp(0,0,-1);Object(l.a)(this,e),this.origin=t,this.direction=n}return Object(h.a)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,$p)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=$p.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($p.copy(this.direction).multiplyScalar(t).add(this.origin),$p.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){ev.copy(e).add(t).multiplyScalar(.5),tv.copy(t).sub(e).normalize(),nv.copy(this.origin).sub(ev);var i,a,o,s,u=.5*e.distanceTo(t),c=-this.direction.dot(tv),l=nv.dot(this.direction),h=-nv.dot(tv),f=nv.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(a=c*l-h,s=u*d,(i=c*h-l)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+c*(a*=p)+2*l)+a*(c*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-c*u+l)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(c*u+l)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=c>0?-u:u,o=-(i=Math.max(0,-(c*a+l)))*i+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(tv).multiplyScalar(a).add(ev),o}},{key:"intersectSphere",value:function(e,t){$p.subVectors(e.center,this.origin);var n=$p.dot(this.direction),r=$p.dot($p)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:this.at(o<0?s:o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(i=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),l>=0?(o=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(o=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,$p)}},{key:"intersectTriangle",value:function(e,t,n,r,i){rv.subVectors(t,e),iv.subVectors(n,e),av.crossVectors(rv,iv);var a,o=this.direction.dot(av);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}nv.subVectors(this.origin,e);var s=a*this.direction.dot(iv.crossVectors(nv,iv));if(s<0)return null;var u=a*this.direction.dot(rv.cross(nv));if(u<0)return null;if(s+u>o)return null;var c=-a*nv.dot(av);return c<0?null:this.at(c/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),sv=function(){function e(){Object(l.a)(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return Object(h.a)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/uv.setFromMatrixColumn(e,0).length(),i=1/uv.setFromMatrixColumn(e,1).length(),a=1/uv.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=a*c,f=a*l,d=o*c,p=o*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*c,m=s*l,g=u*c,y=u*l;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*l,t[5]=a*c,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*c,_=s*l,w=u*c,x=u*l;t[0]=b-x*o,t[4]=-a*l,t[8]=w+_*o,t[1]=_+w*o,t[5]=a*c,t[9]=x-b*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var k=a*c,S=a*l,E=o*c,O=o*l;t[0]=s*c,t[4]=E*u-S,t[8]=k*u+O,t[1]=s*l,t[5]=O*u+k,t[9]=S*u-E,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,C=a*u,A=o*s,M=o*u;t[0]=s*c,t[4]=M-T*l,t[8]=A*l+C,t[1]=l,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=C*l+A,t[10]=T-M*l}else if("XZY"===e.order){var j=a*s,P=a*u,R=o*s,I=o*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=j*l+I,t[5]=a*c,t[9]=P*l-R,t[2]=R*l-P,t[6]=o*c,t[10]=I*l+j}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(lv,e,hv)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return pv.subVectors(e,t),0===pv.lengthSq()&&(pv.z=1),pv.normalize(),fv.crossVectors(n,pv),0===fv.lengthSq()&&(1===Math.abs(n.z)?pv.x+=1e-4:pv.z+=1e-4,pv.normalize(),fv.crossVectors(n,pv)),fv.normalize(),dv.crossVectors(pv,fv),r[0]=fv.x,r[4]=dv.x,r[8]=pv.x,r[1]=fv.y,r[5]=dv.y,r[9]=pv.y,r[2]=fv.z,r[6]=dv.z,r[10]=pv.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],k=r[8],S=r[12],E=r[1],O=r[5],T=r[9],C=r[13],A=r[2],M=r[6],j=r[10],P=r[14],R=r[3],I=r[7],D=r[11],F=r[15];return i[0]=a*w+o*E+s*A+u*R,i[4]=a*x+o*O+s*M+u*I,i[8]=a*k+o*T+s*j+u*D,i[12]=a*S+o*C+s*P+u*F,i[1]=c*w+l*E+h*A+f*R,i[5]=c*x+l*O+h*M+f*I,i[9]=c*k+l*T+h*j+f*D,i[13]=c*S+l*C+h*P+f*F,i[2]=d*w+p*E+v*A+m*R,i[6]=d*x+p*O+v*M+m*I,i[10]=d*k+p*T+v*j+m*D,i[14]=d*S+p*C+v*P+m*F,i[3]=g*w+y*E+b*A+_*R,i[7]=g*x+y*O+b*M+_*I,i[11]=g*k+y*T+b*j+_*D,i[15]=g*S+y*C+b*P+_*F,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],f=e[14];return e[3]*(+i*s*l-r*u*l-i*o*h+n*u*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*a*h-r*a*f+r*u*c-i*s*c)+e[11]*(+t*u*l-t*o*f-i*a*l+n*a*f+i*o*c-n*u*c)+e[15]*(-r*o*c-t*s*l+t*o*h+r*a*l-n*a*h+n*s*c)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=l*v*u-p*h*u+p*s*f-o*v*f-l*s*m+o*h*m,y=d*h*u-c*v*u-d*s*f+a*v*f+c*s*m-a*h*m,b=c*p*u-d*l*u+d*o*f-a*p*f-c*o*m+a*l*m,_=d*l*s-c*p*s-d*o*h+a*p*h+c*o*v-a*l*v,w=t*g+n*y+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var x=1/w;return e[0]=g*x,e[1]=(p*h*i-l*v*i-p*r*f+n*v*f+l*r*m-n*h*m)*x,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*x,e[3]=(l*s*i-o*h*i-l*r*u+n*h*u+o*r*f-n*s*f)*x,e[4]=y*x,e[5]=(c*v*i-d*h*i+d*r*f-t*v*f-c*r*m+t*h*m)*x,e[6]=(d*s*i-a*v*i-d*r*u+t*v*u+a*r*m-t*s*m)*x,e[7]=(a*h*i-c*s*i+c*r*u-t*h*u-a*r*f+t*s*f)*x,e[8]=b*x,e[9]=(d*l*i-c*p*i-d*n*f+t*p*f+c*n*m-t*l*m)*x,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*m+t*o*m)*x,e[11]=(c*o*i-a*l*i-c*n*u+t*l*u+a*n*f-t*o*f)*x,e[12]=_*x,e[13]=(c*p*r-d*l*r+d*n*h-t*p*h-c*n*v+t*l*v)*x,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*v-t*o*v)*x,e[15]=(a*l*r-c*o*r+c*n*s-t*l*s-a*n*h+t*o*h)*x,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,c=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,c*o+n,c*s-r*a,0,u*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,d=i*l,p=a*c,v=a*l,m=o*l,g=s*u,y=s*c,b=s*l,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+m))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+m))*w,r[6]=(v+g)*w,r[7]=0,r[8]=(d+y)*x,r[9]=(v-g)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=uv.set(r[0],r[1],r[2]).length(),a=uv.set(r[4],r[5],r[6]).length(),o=uv.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],cv.copy(this);var s=1/i,u=1/a,c=1/o;return cv.elements[0]*=s,cv.elements[1]*=s,cv.elements[2]*=s,cv.elements[4]*=u,cv.elements[5]*=u,cv.elements[6]*=u,cv.elements[8]*=c,cv.elements[9]*=c,cv.elements[10]*=c,t.setFromRotationMatrix(cv),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),l=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=2*i/(t-e),o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=s,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),c=1/(a-i),l=(t+e)*s,h=(n+r)*u,f=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();sv.prototype.isMatrix4=!0;var uv=new Mp,cv=new sv,lv=new Mp(0,0,0),hv=new Mp(1,1,1),fv=new Mp,dv=new Mp,pv=new Mp,vv=new sv,mv=new Ap,gv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;Object(l.a)(this,e),this._x=t,this._y=n,this._z=r,this._order=i}return Object(h.a)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],c=r[9],l=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(fp(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-fp(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,i),this._z=0);break;case"ZXY":this._x=Math.asin(fp(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-l,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-fp(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(fp(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-fp(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return vv.makeRotationFromQuaternion(e),this.setFromRotationMatrix(vv,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return mv.setFromEuler(this),this.setFromQuaternion(mv,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new Mp(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();gv.prototype.isEuler=!0,gv.DefaultOrder="XYZ",gv.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var yv=function(){function e(){Object(l.a)(this,e),this.mask=1}return Object(h.a)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!=(this.mask&(1<<e|0))}}]),e}(),bv=0,_v=new Mp,wv=new Ap,xv=new sv,kv=new Mp,Sv=new Mp,Ev=new Mp,Ov=new Ap,Tv=new Mp(1,0,0),Cv=new Mp(0,1,0),Av=new Mp(0,0,1),Mv={type:"added"},jv={type:"removed"},Pv=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n),e=t.call(this),Object.defineProperty(Object(a.a)(e),"id",{value:bv++}),e.uuid=hp(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new Mp,i=new gv,o=new Ap,s=new Mp(1,1,1);return i._onChange((function(){o.setFromEuler(i,!1)})),o._onChange((function(){i.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(Object(a.a)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new sv},normalMatrix:{value:new yp}}),e.matrix=new sv,e.matrixWorld=new sv,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new yv,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return Object(h.a)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return wv.setFromAxisAngle(e,t),this.quaternion.multiply(wv),this}},{key:"rotateOnWorldAxis",value:function(e,t){return wv.setFromAxisAngle(e,t),this.quaternion.premultiply(wv),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Tv,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Cv,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Av,e)}},{key:"translateOnAxis",value:function(e,t){return _v.copy(e).applyQuaternion(this.quaternion),this.position.add(_v.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Tv,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Cv,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Av,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(xv.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?kv.copy(e):kv.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Sv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xv.lookAt(Sv,kv,this.up):xv.lookAt(kv,Sv,this.up),this.quaternion.setFromRotationMatrix(xv),r&&(xv.extractRotation(r.matrixWorld),wv.setFromRotationMatrix(xv),this.quaternion.premultiply(wv.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Mv)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(jv)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(jv)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),xv.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),xv.multiply(e.parent.matrixWorld)),e.applyMatrix4(xv),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sv,e,Ev),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sv,Ov,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++)i(e.shapes,o[s]);else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],l=0,h=this.material.length;l<h;l++)c.push(i(e.materials,this.material[l]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var d=0;d<this.animations.length;d++)r.animations.push(i(e.animations,this.animations[d]))}if(t){var p=w(e.geometries),v=w(e.materials),m=w(e.textures),g=w(e.images),y=w(e.shapes),b=w(e.skeletons),_=w(e.animations);p.length>0&&(n.geometries=p),v.length>0&&(n.materials=v),m.length>0&&(n.textures=m),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y),b.length>0&&(n.skeletons=b),_.length>0&&(n.animations=_)}return n.object=r,n;function w(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(op);Pv.DefaultUp=new Mp(0,1,0),Pv.DefaultMatrixAutoUpdate=!0,Pv.prototype.isObject3D=!0;var Rv=new Mp,Iv=new Mp,Dv=new Mp,Fv=new Mp,Lv=new Mp,Nv=new Mp,Bv=new Mp,Hv=new Mp,Uv=new Mp,Vv=new Mp,zv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mp;Object(l.a)(this,e),this.a=t,this.b=n,this.c=r}return Object(h.a)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Rv.subVectors(this.c,this.b),Iv.subVectors(this.a,this.b),.5*Rv.cross(Iv).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Lv.subVectors(a,i),Nv.subVectors(o,i),Hv.subVectors(e,i);var s=Lv.dot(Hv),u=Nv.dot(Hv);if(s<=0&&u<=0)return t.copy(i);Uv.subVectors(e,a);var c=Lv.dot(Uv),l=Nv.dot(Uv);if(c>=0&&l<=c)return t.copy(a);var h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(Lv,n);Vv.subVectors(e,o);var f=Lv.dot(Vv),d=Nv.dot(Vv);if(d>=0&&f<=d)return t.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(Nv,r);var v=c*d-f*l;if(v<=0&&l-c>=0&&f-d>=0)return Bv.subVectors(o,a),r=(l-c)/(l-c+(f-d)),t.copy(a).addScaledVector(Bv,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(Lv,n).addScaledVector(Nv,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Rv.subVectors(e,t),r.cross(Rv);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Rv.subVectors(r,t),Iv.subVectors(n,t),Dv.subVectors(e,t);var a=Rv.dot(Rv),o=Rv.dot(Iv),s=Rv.dot(Dv),u=Iv.dot(Iv),c=Iv.dot(Dv),l=a*u-o*o;if(0===l)return i.set(-2,-1,-1);var h=1/l,f=(u*s-o*c)*h,d=(a*c-o*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Fv),Fv.x>=0&&Fv.y>=0&&Fv.x+Fv.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Fv),s.set(0,0),s.addScaledVector(i,Fv.x),s.addScaledVector(a,Fv.y),s.addScaledVector(o,Fv.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Rv.subVectors(n,t),Iv.subVectors(e,t),Rv.cross(Iv).dot(r)<0}}]),e}(),Wv=0,Gv=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),e=t.call(this),Object.defineProperty(Object(a.a)(e),"id",{value:Wv++}),e.uuid=hp(),e.name="",e.type="Material",e.fog=!0,e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.format=1023,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=100,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=7680,e.stencilZFail=7680,e.stencilZPass=7680,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return Object(h.a)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),1023!==this.format&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(op);Gv.prototype.isMaterial=!0;var Kv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qv={h:0,s:0,l:0},Xv={h:0,s:0,l:0};function Yv(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Zv(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Jv(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Qv=function(){function e(t,n,r){return Object(l.a)(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return Object(h.a)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=(e%1+1)%1,t=fp(t,0,1),n=fp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Yv(i,r,e+1/3),this.g=Yv(i,r,e),this.b=Yv(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[2];switch(n[1]){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){var a=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,o,s)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=Kv[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=Zv(e.r),this.g=Zv(e.g),this.b=Zv(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Jv(e.r),this.g=Jv(e.g),this.b=Jv(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)t=0,n=0;else{var c=o-s;switch(n=u<=.5?c/(o+s):c/(2-o-s),o){case r:t=(i-a)/c+(i<a?6:0);break;case i:t=(a-r)/c+2;break;case a:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(qv),qv.h+=e,qv.s+=t,qv.l+=n,this.setHSL(qv.h,qv.s,qv.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(qv),e.getHSL(Xv);var n=dp(qv.h,Xv.h,t),r=dp(qv.s,Xv.s,t),i=dp(qv.l,Xv.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();Qv.NAMES=Kv,Qv.prototype.isColor=!0,Qv.prototype.r=1,Qv.prototype.g=1,Qv.prototype.b=1;var $v=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new Qv(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Gv);$v.prototype.isMeshBasicMaterial=!0;var em=new Mp,tm=new mp,nm=function(){function e(t,n,r){if(Object(l.a)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return Object(h.a)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Qv),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new mp),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Mp),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Op),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)tm.fromBufferAttribute(this,t),tm.applyMatrix3(e),this.setXY(t,tm.x,tm.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)em.fromBufferAttribute(this,r),em.applyMatrix3(e),this.setXYZ(r,em.x,em.y,em.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)em.x=this.getX(t),em.y=this.getY(t),em.z=this.getZ(t),em.applyMatrix4(e),this.setXYZ(t,em.x,em.y,em.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)em.x=this.getX(t),em.y=this.getY(t),em.z=this.getZ(t),em.applyNormalMatrix(e),this.setXYZ(t,em.x,em.y,em.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)em.x=this.getX(t),em.y=this.getY(t),em.z=this.getZ(t),em.transformDirection(e),this.setXYZ(t,em.x,em.y,em.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();nm.prototype.isBufferAttribute=!0;var rm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){return Object(l.a)(this,n),t.call(this,new Uint16Array(e),r,i)}return n}(nm),im=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){return Object(l.a)(this,n),t.call(this,new Uint32Array(e),r,i)}return n}(nm);(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){return Object(l.a)(this,n),t.call(this,new Uint16Array(e),r,i)}return n})(nm).prototype.isFloat16BufferAttribute=!0;var am=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){return Object(l.a)(this,n),t.call(this,new Float32Array(e),r,i)}return n}(nm),om=0,sm=new sv,um=new Pv,cm=new Mp,lm=new Rp,hm=new Rp,fm=new Mp,dm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),e=t.call(this),Object.defineProperty(Object(a.a)(e),"id",{value:om++}),e.uuid=hp(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return Object(h.a)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return this.index=Array.isArray(e)?new(bp(e)>65535?im:rm)(e,1):e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new yp).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return sm.makeRotationFromQuaternion(e),this.applyMatrix4(sm),this}},{key:"rotateX",value:function(e){return sm.makeRotationX(e),this.applyMatrix4(sm),this}},{key:"rotateY",value:function(e){return sm.makeRotationY(e),this.applyMatrix4(sm),this}},{key:"rotateZ",value:function(e){return sm.makeRotationZ(e),this.applyMatrix4(sm),this}},{key:"translate",value:function(e,t,n){return sm.makeTranslation(e,t,n),this.applyMatrix4(sm),this}},{key:"scale",value:function(e,t,n){return sm.makeScale(e,t,n),this.applyMatrix4(sm),this}},{key:"lookAt",value:function(e){return um.lookAt(e),um.updateMatrix(),this.applyMatrix4(um.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(cm).negate(),this.translate(cm.x,cm.y,cm.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new am(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Rp);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Mp(-1/0,-1/0,-1/0),new Mp(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++)lm.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(fm.addVectors(this.boundingBox.min,lm.min),this.boundingBox.expandByPoint(fm),fm.addVectors(this.boundingBox.max,lm.max),this.boundingBox.expandByPoint(fm)):(this.boundingBox.expandByPoint(lm.min),this.boundingBox.expandByPoint(lm.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Qp);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Mp,1/0);if(e){var n=this.boundingSphere.center;if(lm.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++)hm.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(fm.addVectors(lm.min,hm.min),lm.expandByPoint(fm),fm.addVectors(lm.max,hm.max),lm.expandByPoint(fm)):(lm.expandByPoint(hm.min),lm.expandByPoint(hm.max));lm.getCenter(n);for(var a=0,o=0,s=e.count;o<s;o++)fm.fromBufferAttribute(e,o),a=Math.max(a,n.distanceToSquared(fm));if(t)for(var u=0,c=t.length;u<c;u++)for(var l=t[u],h=this.morphTargetsRelative,f=0,d=l.count;f<d;f++)fm.fromBufferAttribute(l,f),h&&(cm.fromBufferAttribute(e,f),fm.add(cm)),a=Math.max(a,n.distanceToSquared(fm));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new nm(new Float32Array(4*o),4));for(var s=t.tangent.array,u=[],c=[],l=0;l<o;l++)u[l]=new Mp,c[l]=new Mp;var h=new Mp,f=new Mp,d=new Mp,p=new mp,v=new mp,m=new mp,g=new Mp,y=new Mp,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var _=0,w=b.length;_<w;++_)for(var x=b[_],k=x.start,S=k,E=k+x.count;S<E;S+=3)F(n[S+0],n[S+1],n[S+2]);for(var O=new Mp,T=new Mp,C=new Mp,A=new Mp,M=0,j=b.length;M<j;++M)for(var P=b[M],R=P.start,I=R,D=R+P.count;I<D;I+=3)L(n[I+0]),L(n[I+1]),L(n[I+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function F(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),f.sub(h),d.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(f,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}function L(e){C.fromArray(i,3*e),A.copy(C);var t=u[e];O.copy(t),O.sub(C.multiplyScalar(C.dot(t))).normalize(),T.crossVectors(A,t);var n=T.dot(c[e])<0?-1:1;s[4*e]=O.x,s[4*e+1]=O.y,s[4*e+2]=O.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new nm(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Mp,o=new Mp,s=new Mp,u=new Mp,c=new Mp,l=new Mp,h=new Mp,f=new Mp;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),u.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),u.add(h),c.add(h),l.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(g,l.x,l.y,l.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,u=Math.min(o.length,i.length-s),c=0,l=s;c<u;c++,l++)i[l]=o[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)fm.fromBufferAttribute(e,t),fm.normalize(),e.setXYZ(t,fm.x,fm.y,fm.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,c=t.length;u<c;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var l=0;l<r;l++)a[s++]=n[o++]}return new nm(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var c=[],l=s[u],h=0,f=l.length;h<f;h++){var d=e(l[h],r);c.push(d)}t.morphAttributes[u]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i)e.data.attributes[a]=i[a].toJSON(e.data);var o={},s=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],l=[],h=0,f=c.length;h<f;h++)l.push(c[h].toJSON(e.data));l.length>0&&(o[u]=l,s=!0)}s&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r)this.setAttribute(i,r[i].clone(t));var a=e.morphAttributes;for(var o in a){for(var s=[],u=a[o],c=0,l=u.length;c<l;c++)s.push(u[c].clone(t));this.morphAttributes[o]=s}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,f=0,d=h.length;f<d;f++){var p=h[f];this.addGroup(p.start,p.count,p.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(op);dm.prototype.isBufferGeometry=!0;var pm=new sv,vm=new ov,mm=new Qp,gm=new Mp,ym=new Mp,bm=new Mp,_m=new Mp,wm=new Mp,xm=new Mp,km=new Mp,Sm=new Mp,Em=new Mp,Om=new mp,Tm=new mp,Cm=new mp,Am=new Mp,Mm=new Mp,jm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dm,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $v;return Object(l.a)(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),mm.copy(r.boundingSphere),mm.applyMatrix4(a),!1!==e.ray.intersectsSphere(mm)&&(pm.copy(a).invert(),vm.copy(e.ray).applyMatrix4(pm),null===r.boundingBox||!1!==vm.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,u=r.morphAttributes.position,c=r.morphTargetsRelative,l=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=f.length;p<v;p++)for(var m=f[p],g=i[m.materialIndex],y=Math.max(m.start,d.start),b=Math.min(o.count,Math.min(m.start+m.count,d.start+d.count));y<b;y+=3){var _=o.getX(y),w=o.getX(y+1),x=o.getX(y+2);(n=Pm(this,g,e,vm,s,u,c,l,h,_,w,x))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var k=Math.max(0,d.start),S=Math.min(o.count,d.start+d.count);k<S;k+=3){var E=o.getX(k),O=o.getX(k+1),T=o.getX(k+2);(n=Pm(this,i,e,vm,s,u,c,l,h,E,O,T))&&(n.faceIndex=Math.floor(k/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var C=0,A=f.length;C<A;C++)for(var M=f[C],j=i[M.materialIndex],P=Math.max(M.start,d.start),R=Math.min(s.count,Math.min(M.start+M.count,d.start+d.count));P<R;P+=3)(n=Pm(this,j,e,vm,s,u,c,l,h,P,P+1,P+2))&&(n.faceIndex=Math.floor(P/3),n.face.materialIndex=M.materialIndex,t.push(n));else for(var I=Math.max(0,d.start),D=Math.min(s.count,d.start+d.count);I<D;I+=3)(n=Pm(this,i,e,vm,s,u,c,l,h,I,I+1,I+2))&&(n.faceIndex=Math.floor(I/3),t.push(n))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Pv);function Pm(e,t,n,r,i,a,o,s,u,c,l,h){gm.fromBufferAttribute(i,c),ym.fromBufferAttribute(i,l),bm.fromBufferAttribute(i,h);var f=e.morphTargetInfluences;if(a&&f){km.set(0,0,0),Sm.set(0,0,0),Em.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var v=f[d],m=a[d];0!==v&&(_m.fromBufferAttribute(m,c),wm.fromBufferAttribute(m,l),xm.fromBufferAttribute(m,h),o?(km.addScaledVector(_m,v),Sm.addScaledVector(wm,v),Em.addScaledVector(xm,v)):(km.addScaledVector(_m.sub(gm),v),Sm.addScaledVector(wm.sub(ym),v),Em.addScaledVector(xm.sub(bm),v)))}gm.add(km),ym.add(Sm),bm.add(Em)}e.isSkinnedMesh&&(e.boneTransform(c,gm),e.boneTransform(l,ym),e.boneTransform(h,bm));var g=function(e,t,n,r,i,a,o,s){if(null===(1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,2!==t.side,s)))return null;Mm.copy(s),Mm.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Mm);return u<n.near||u>n.far?null:{distance:u,point:Mm.clone(),object:e}}(e,t,n,r,gm,ym,bm,Am);if(g){s&&(Om.fromBufferAttribute(s,c),Tm.fromBufferAttribute(s,l),Cm.fromBufferAttribute(s,h),g.uv=zv.getUV(Am,gm,ym,bm,Om,Tm,Cm,new mp)),u&&(Om.fromBufferAttribute(u,c),Tm.fromBufferAttribute(u,l),Cm.fromBufferAttribute(u,h),g.uv2=zv.getUV(Am,gm,ym,bm,Om,Tm,Cm,new mp));var y={a:c,b:l,c:h,normal:new Mp,materialIndex:0};zv.getNormal(gm,ym,bm,y.normal),g.face=y}return g}jm.prototype.isMesh=!0;var Rm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(l.a)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:o,widthSegments:s,heightSegments:u,depthSegments:c};var h=Object(a.a)(e);s=Math.floor(s),u=Math.floor(u),c=Math.floor(c);var f=[],d=[],p=[],v=[],m=0,g=0;function y(e,t,n,r,i,a,o,s,u,c,l){for(var y=a/u,b=o/c,_=a/2,w=o/2,x=s/2,k=u+1,S=c+1,E=0,O=0,T=new Mp,C=0;C<S;C++)for(var A=C*b-w,M=0;M<k;M++)T[e]=(M*y-_)*r,T[t]=A*i,T[n]=x,d.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,p.push(T.x,T.y,T.z),v.push(M/u),v.push(1-C/c),E+=1;for(var j=0;j<c;j++)for(var P=0;P<u;P++){var R=m+P+k*(j+1),I=m+(P+1)+k*(j+1),D=m+(P+1)+k*j;f.push(m+P+k*j,R,D),f.push(R,I,D),O+=6}h.addGroup(g,O,l),g+=O,m+=E}return y("z","y","x",-1,-1,o,i,r,c,u,0),y("z","y","x",1,-1,o,i,-r,c,u,1),y("x","z","y",1,1,r,o,i,s,c,2),y("x","z","y",1,-1,r,o,-i,s,c,3),y("x","y","z",1,-1,r,i,o,s,u,4),y("x","y","z",-1,-1,r,i,-o,s,u,5),e.setIndex(f),e.setAttribute("position",new am(d,3)),e.setAttribute("normal",new am(p,3)),e.setAttribute("uv",new am(v,2)),e}return Object(h.a)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(dm);function Im(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];t[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}return t}function Dm(e){for(var t={},n=0;n<e.length;n++){var r=Im(e[n]);for(var i in r)t[i]=r[i]}return t}var Fm={clone:Im,merge:Dm},Lm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Im(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;t.uniforms[r]=i&&i.isTexture?{type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Gv);Lm.prototype.isShaderMaterial=!0;var Nm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new sv,e.projectionMatrix=new sv,e.projectionMatrixInverse=new sv,e}return Object(h.a)(n,[{key:"copy",value:function(e,t){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Object(Be.a)(Object(He.a)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Pv);Nm.prototype.isCamera=!0;var Bm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return Object(l.a)(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return Object(h.a)(n,[{key:"copy",value:function(e,t){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*lp*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*cp*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*lp*Math.atan(Math.tan(.5*cp*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*cp*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Nm);Bm.prototype.isPerspectiveCamera=!0;var Hm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;if(Object(l.a)(this,n),(a=t.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),Object(ip.a)(a);a.renderTarget=i;var o=new Bm(90,1,e,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Mp(1,0,0)),a.add(o);var s=new Bm(90,1,e,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new Mp(-1,0,0)),a.add(s);var u=new Bm(90,1,e,r);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(new Mp(0,1,0)),a.add(u);var c=new Bm(90,1,e,r);c.layers=a.layers,c.up.set(0,0,-1),c.lookAt(new Mp(0,-1,0)),a.add(c);var h=new Bm(90,1,e,r);h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new Mp(0,0,1)),a.add(h);var f=new Bm(90,1,e,r);return f.layers=a.layers,f.up.set(0,-1,0),f.lookAt(new Mp(0,0,-1)),a.add(f),a}return Object(h.a)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=Object(Vt.a)(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(h),e.xr.enabled=l}}]),n}(Pv),Um=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s,u,c,h,f){var d;return Object(l.a)(this,n),(d=t.call(this,e=void 0!==e?e:[],r=void 0!==r?r:301,i,a,o,s,u,c,h,f)).flipY=!1,d}return Object(h.a)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Sp);Um.prototype.isCubeTexture=!0;var Vm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),(a=t.call(this,e,e,r)).texture=new Um(void 0,(r=r||{}).mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),a.texture.isRenderTargetTexture=!0,a.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,a.texture.minFilter=void 0!==r.minFilter?r.minFilter:1006,a.texture._needsFlipEnvMap=!1,a}return Object(h.a)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=1023,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n=new Rm(5,5,5),r=new Lm({name:"CubemapFromEquirect",uniforms:Im({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});r.uniforms.tEquirect.value=t;var i=new jm(n,r),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new Hm(1,10,this).update(e,i),t.minFilter=a,i.geometry.dispose(),i.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Tp);Vm.prototype.isWebGLCubeRenderTarget=!0;var zm=new Mp,Wm=new Mp,Gm=new yp,Km=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(l.a)(this,e),this.normal=t,this.constant=n}return Object(h.a)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=zm.subVectors(n,t).cross(Wm.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(zm),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Gm.getNormalMatrix(e),r=this.coplanarPoint(zm).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();Km.prototype.isPlane=!0;var qm=new Qp,Xm=new Mp,Ym=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Km,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Km,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Km,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Km,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Km,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Km;Object(l.a)(this,e),this.planes=[t,n,r,i,a,o]}return Object(h.a)(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,l-s,p-h,y-v).normalize(),t[1].setComponents(o+r,l+s,p+h,y+v).normalize(),t[2].setComponents(o+i,l+u,p+f,y+m).normalize(),t[3].setComponents(o-i,l-u,p-f,y-m).normalize(),t[4].setComponents(o-a,l-c,p-d,y-g).normalize(),t[5].setComponents(o+a,l+c,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),qm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(qm)}},{key:"intersectsSprite",value:function(e){return qm.center.set(0,0,0),qm.radius=.7071067811865476,qm.applyMatrix4(e.matrixWorld),this.intersectsSphere(qm)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Xm.x=r.normal.x>0?e.max.x:e.min.x,Xm.y=r.normal.y>0?e.max.y:e.min.y,Xm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Xm)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Zm(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Jm(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i=t.array,a=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,i),o.version=t.version)}}}}var Qm=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(l.a)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,c=Math.floor(a),h=Math.floor(o),f=c+1,d=h+1,p=r/c,v=i/h,m=[],g=[],y=[],b=[],_=0;_<d;_++)for(var w=_*v-u,x=0;x<f;x++){var k=x*p-s;g.push(k,-w,0),y.push(0,0,1),b.push(x/c),b.push(1-_/h)}for(var S=0;S<h;S++)for(var E=0;E<c;E++){var O=E+f*S,T=E+f*(S+1),C=E+1+f*(S+1),A=E+1+f*S;m.push(O,T,A),m.push(T,C,A)}return e.setIndex(m),e.setAttribute("position",new am(g,3)),e.setAttribute("normal",new am(y,3)),e.setAttribute("uv",new am(b,2)),e}return Object(h.a)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(dm),$m={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},eg={common:{diffuse:{value:new Qv(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new yp},uv2Transform:{value:new yp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new mp(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Qv(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Qv(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yp}},sprite:{diffuse:{value:new Qv(16777215)},opacity:{value:1},center:{value:new mp(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yp}}},tg={basic:{uniforms:Dm([eg.common,eg.specularmap,eg.envmap,eg.aomap,eg.lightmap,eg.fog]),vertexShader:$m.meshbasic_vert,fragmentShader:$m.meshbasic_frag},lambert:{uniforms:Dm([eg.common,eg.specularmap,eg.envmap,eg.aomap,eg.lightmap,eg.emissivemap,eg.fog,eg.lights,{emissive:{value:new Qv(0)}}]),vertexShader:$m.meshlambert_vert,fragmentShader:$m.meshlambert_frag},phong:{uniforms:Dm([eg.common,eg.specularmap,eg.envmap,eg.aomap,eg.lightmap,eg.emissivemap,eg.bumpmap,eg.normalmap,eg.displacementmap,eg.fog,eg.lights,{emissive:{value:new Qv(0)},specular:{value:new Qv(1118481)},shininess:{value:30}}]),vertexShader:$m.meshphong_vert,fragmentShader:$m.meshphong_frag},standard:{uniforms:Dm([eg.common,eg.envmap,eg.aomap,eg.lightmap,eg.emissivemap,eg.bumpmap,eg.normalmap,eg.displacementmap,eg.roughnessmap,eg.metalnessmap,eg.fog,eg.lights,{emissive:{value:new Qv(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$m.meshphysical_vert,fragmentShader:$m.meshphysical_frag},toon:{uniforms:Dm([eg.common,eg.aomap,eg.lightmap,eg.emissivemap,eg.bumpmap,eg.normalmap,eg.displacementmap,eg.gradientmap,eg.fog,eg.lights,{emissive:{value:new Qv(0)}}]),vertexShader:$m.meshtoon_vert,fragmentShader:$m.meshtoon_frag},matcap:{uniforms:Dm([eg.common,eg.bumpmap,eg.normalmap,eg.displacementmap,eg.fog,{matcap:{value:null}}]),vertexShader:$m.meshmatcap_vert,fragmentShader:$m.meshmatcap_frag},points:{uniforms:Dm([eg.points,eg.fog]),vertexShader:$m.points_vert,fragmentShader:$m.points_frag},dashed:{uniforms:Dm([eg.common,eg.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$m.linedashed_vert,fragmentShader:$m.linedashed_frag},depth:{uniforms:Dm([eg.common,eg.displacementmap]),vertexShader:$m.depth_vert,fragmentShader:$m.depth_frag},normal:{uniforms:Dm([eg.common,eg.bumpmap,eg.normalmap,eg.displacementmap,{opacity:{value:1}}]),vertexShader:$m.meshnormal_vert,fragmentShader:$m.meshnormal_frag},sprite:{uniforms:Dm([eg.sprite,eg.fog]),vertexShader:$m.sprite_vert,fragmentShader:$m.sprite_frag},background:{uniforms:{uvTransform:{value:new yp},t2D:{value:null}},vertexShader:$m.background_vert,fragmentShader:$m.background_frag},cube:{uniforms:Dm([eg.envmap,{opacity:{value:1}}]),vertexShader:$m.cube_vert,fragmentShader:$m.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$m.equirect_vert,fragmentShader:$m.equirect_frag},distanceRGBA:{uniforms:Dm([eg.common,eg.displacementmap,{referencePosition:{value:new Mp},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$m.distanceRGBA_vert,fragmentShader:$m.distanceRGBA_frag},shadow:{uniforms:Dm([eg.lights,eg.fog,{color:{value:new Qv(0)},opacity:{value:1}}]),vertexShader:$m.shadow_vert,fragmentShader:$m.shadow_frag}};function ng(e,t,n,r,i){var a,o,s=new Qv(0),u=0,c=null,l=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),f(s,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){f(s,u=e)},render:function(n,i){var d=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?f(s,u):p&&p.isColor&&(f(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||306===p.mapping)?(void 0===o&&((o=new jm(new Rm(1,1,1),new Lm({name:"BackgroundCubeMaterial",uniforms:Im(tg.cube.uniforms),vertexShader:tg.cube.vertexShader,fragmentShader:tg.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,c===p&&l===p.version&&h===e.toneMapping||(o.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===a&&((a=new jm(new Qm(2,2),new Lm({name:"BackgroundMaterial",uniforms:Im(tg.background.uniforms),vertexShader:tg.background.vertexShader,fragmentShader:tg.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&l===p.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function rg(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=f(null),c=u;function l(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){for(var e=c.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){v(e,0)}function v(n,i){var a=c.enabledAttributes,o=c.attributeDivisors;c.newAttributes[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i)}function m(){for(var t=c.newAttributes,n=c.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function y(){b(),c!==u&&l((c=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){var _=!1;if(o){var w=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(s[t.id]=u={});var c=u[n.id];void 0===c&&(u[n.id]=c={});var l=c[o];return void 0===l&&(l=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=l),l}(y,h,u);c!==w&&l((c=w).object),(_=function(e,t){var n=c.attributes,r=e.attributes,i=0;for(var a in r){var o=n[a],s=r[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(y,b))&&function(e,t){var n={},r=e.attributes,i=0;for(var a in r){var o=r[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,i++}c.attributes=n,c.attributesNum=i,c.index=t}(y,b)}else{var x=!0===u.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===x||(c.geometry=y.id,c.program=h.id,c.wireframe=x,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(function(i,a,o,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){d();var u=s.attributes,c=o.getAttributes(),l=a.defaultAttributeValues;for(var h in c){var f=c[h];if(f.location>=0){var y=u[h];if(void 0===y&&("instanceMatrix"===h&&i.instanceMatrix&&(y=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(y=i.instanceColor)),void 0!==y){var b=y.normalized,_=y.itemSize,w=n.get(y);if(void 0===w)continue;var x=w.buffer,k=w.type,S=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,O=E.stride,T=y.offset;if(E&&E.isInstancedInterleavedBuffer){for(var C=0;C<f.locationSize;C++)v(f.location+C,E.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)}else for(var A=0;A<f.locationSize;A++)p(f.location+A);e.bindBuffer(34962,x);for(var M=0;M<f.locationSize;M++)g(f.location+M,_/f.locationSize,k,b,O*S,(T+_/f.locationSize*M)*S)}else{if(y.isInstancedBufferAttribute){for(var j=0;j<f.locationSize;j++)v(f.location+j,y.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var P=0;P<f.locationSize;P++)p(f.location+P);e.bindBuffer(34962,x);for(var R=0;R<f.locationSize;R++)g(f.location+R,_/f.locationSize,k,b,_*S,_/f.locationSize*R*S)}}else if(void 0!==l){var I=l[h];if(void 0!==I)switch(I.length){case 2:e.vertexAttrib2fv(f.location,I);break;case 3:e.vertexAttrib3fv(f.location,I);break;case 4:e.vertexAttrib4fv(f.location,I);break;default:e.vertexAttrib1fv(f.location,I)}}}}m()}}(i,u,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:m}}function ig(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,c;if(a)u=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](i,r,o,s),n.update(o,i,s)}}}function ag(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function og(e){var t=this,n=null,r=0,i=!1,a=!1,o=new Km,s=new yp,u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function l(e,n,r,i){var a=null!==e?e.length:0,c=null;if(0!==a){if(c=u.value,!0!==i||null===c){var l=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===c||c.length<l)&&(c=new Float32Array(l));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(c,d),c[d+3]=o.constant}u.value=c,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=l(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,l(null)},this.endShadows=function(){a=!1,c()},this.setState=function(t,o,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||a&&!d)a?l(null):c();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=l(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}}}function sg(e){var t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(303===a||304===a){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=e.getRenderTarget(),u=new Vm(o.height/2);return u.fromEquirectangularTexture(e,i),t.set(i,u),e.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}tg.physical={uniforms:Dm([tg.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new mp(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Qv(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new mp},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Qv(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Qv(1,1,1)},specularColorMap:{value:null}}]),vertexShader:$m.meshphysical_vert,fragmentShader:$m.meshphysical_frag};var ug=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return Object(l.a)(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return Object(h.a)(n,[{key:"copy",value:function(e,t){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Nm);ug.prototype.isOrthographicCamera=!0;var cg=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return n}(Lm);cg.prototype.isRawShaderMaterial=!0;var lg=Math.pow(2,8),hg=[.125,.215,.35,.446,.526,.582],fg=5+hg.length,dg=(rp={},Object(nl.a)(rp,3e3,0),Object(nl.a)(rp,3001,1),Object(nl.a)(rp,3002,2),Object(nl.a)(rp,3004,3),Object(nl.a)(rp,3005,4),Object(nl.a)(rp,3006,5),Object(nl.a)(rp,3007,6),rp),pg=new ug,vg=Og(),mg=vg._lodPlanes,gg=vg._sizeLods,yg=vg._sigmas,bg=new Qv,_g=null,wg=(1+Math.sqrt(5))/2,xg=1/wg,kg=[new Mp(1,1,1),new Mp(-1,1,1),new Mp(1,1,-1),new Mp(-1,1,-1),new Mp(0,wg,xg),new Mp(0,wg,-xg),new Mp(xg,0,wg),new Mp(-xg,0,wg),new Mp(wg,xg,0),new Mp(-wg,xg,0)],Sg=function(){function e(t){var n,r;Object(l.a)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=(n=new Float32Array(20),r=new Mp(0,1,0),new cg({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:dg[3e3]},outputEncoding:{value:dg[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return Object(h.a)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;_g=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=Mg(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=Ag(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<mg.length;e++)mg[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_g),e.scissorTest=!1,Cg(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){_g=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:Eg(e)?e.encoding:3002,depthBuffer:!1},n=Tg(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Tg(t),n}},{key:"_compileMaterial",value:function(e){var t=new jm(mg[0],e);this._renderer.compile(t,pg)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new Bm(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,c=s.outputEncoding,l=s.toneMapping;s.getClearColor(bg),s.toneMapping=0,s.outputEncoding=3e3,s.autoClear=!1;var h=new $v({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),f=new jm(new Rm,h),d=!1,p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,d=!0):(h.color.copy(bg),d=!0);for(var v=0;v<6;v++){var m=v%3;0==m?(i.up.set(0,a[v],0),i.lookAt(o[v],0,0)):1==m?(i.up.set(0,0,a[v]),i.lookAt(0,o[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,o[v])),Cg(r,m*lg,v>2?lg:0,lg,lg),s.setRenderTarget(r),d&&s.render(f,i),s.render(e,i)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=l,s.outputEncoding=c,s.autoClear=u,e.background=p}},{key:"_setEncoding",value:function(e,t){e.value=dg[t.encoding]}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=301===e.mapping||302===e.mapping;r?null==this._cubemapShader&&(this._cubemapShader=Mg()):null==this._equirectShader&&(this._equirectShader=Ag());var i=r?this._cubemapShader:this._equirectShader,a=new jm(mg[0],i),o=i.uniforms;o.envMap.value=e,r||o.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(o.inputEncoding,e),this._setEncoding(o.outputEncoding,t.texture),Cg(t,0,0,3*lg,2*lg),n.setRenderTarget(t),n.render(a,pg)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<fg;r++){var i=Math.sqrt(yg[r]*yg[r]-yg[r-1]*yg[r-1]);this._blur(e,r-1,r,i,kg[(r-1)%kg.length])}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new jm(mg[r],u),l=u.uniforms,h=gg[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):20;p>20&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(20));for(var v=[],m=0,g=0;g<20;++g){var y=g/d,b=Math.exp(-y*y/2);v.push(b),0==g?m+=b:g<p&&(m+=2*b)}for(var _=0;_<v.length;_++)v[_]=v[_]/m;l.envMap.value=e.texture,l.samples.value=p,l.weights.value=v,l.latitudinal.value="latitudinal"===a,o&&(l.poleAxis.value=o),l.dTheta.value=f,l.mipInt.value=8-n,this._setEncoding(l.inputEncoding,e.texture),this._setEncoding(l.outputEncoding,e.texture);var w=gg[r];Cg(t,3*Math.max(0,lg-2*w),(0===r?0:2*lg)+2*w*(r>4?r-8+4:0),3*w,2*w),s.setRenderTarget(t),s.render(c,pg)}}]),e}();function Eg(e){return void 0!==e&&1009===e.type&&(3e3===e.encoding||3001===e.encoding||3007===e.encoding)}function Og(){for(var e=[],t=[],n=[],r=8,i=0;i<fg;i++){var a=Math.pow(2,r);t.push(a);var o=1/a;i>4?o=hg[i-8+4-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],h=new Float32Array(108),f=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1;h.set([v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0],18*p),f.set(l,12*p),d.set([p,p,p,p,p,p],6*p)}var g=new dm;g.setAttribute("position",new nm(h,3)),g.setAttribute("uv",new nm(f,2)),g.setAttribute("faceIndex",new nm(d,1)),e.push(g),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function Tg(e){var t=new Tp(3*lg,3*lg,e);return t.texture.mapping=306,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Cg(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Ag(){var e=new mp(1,1);return new cg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:dg[3e3]},outputEncoding:{value:dg[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function Mg(){return new cg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:dg[3e3]},outputEncoding:{value:dg[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function jg(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping,o=303===a||304===a,s=301===a||302===a;if(o||s){if(t.has(i))return t.get(i).texture;var u=i.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(u)){var c=e.getRenderTarget();null===n&&(n=new Sg(e));var l=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,l),e.setRenderTarget(c),i.addEventListener("dispose",r),l.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Pg(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Rg(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var c=a.get(s);c&&(t.remove(c),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],h=s[u+1],f=s[u+2];n.push(l,h,h,f,f,l)}}else{o=i.version;for(var d=0,p=i.array.length/3-1;d<p;d+=3){var v=d+0,m=d+1,g=d+2;n.push(v,m,m,g,g,v)}}var y=new(bp(n)>65535?im:rm)(n,1);y.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,y)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Ig(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,c){if(0!==c){var l,h;if(s)l=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](i,u,a,r*o,c),n.update(u,i,c)}}}function Dg(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var Fg=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(l.a)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Sp);function Lg(e,t){return e[0]-t[0]}function Ng(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Bg(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Hg(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new Mp,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,c,l,h){var f=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=c.morphAttributes.position.length,p=a.get(c);if(void 0===p||p.count!==d){void 0!==p&&p.texture.dispose();var v=void 0!==c.morphAttributes.normal,m=c.morphAttributes.position,g=c.morphAttributes.normal||[],y=!0===v?2:1,b=c.attributes.position.count*y,_=1;b>t.maxTextureSize&&(_=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);var w=new Float32Array(b*_*4*d),x=new Fg(w,b,_,d);x.format=1023,x.type=1015;for(var k=4*y,S=0;S<d;S++)for(var E=m[S],O=g[S],T=b*_*4*S,C=0;C<E.count;C++){o.fromBufferAttribute(E,C),!0===E.normalized&&Bg(o,E);var A=C*k;w[T+A+0]=o.x,w[T+A+1]=o.y,w[T+A+2]=o.z,w[T+A+3]=0,!0===v&&(o.fromBufferAttribute(O,C),!0===O.normalized&&Bg(o,O),w[T+A+4]=o.x,w[T+A+5]=o.y,w[T+A+6]=o.z,w[T+A+7]=0)}p={count:d,texture:x,size:new mp(b,_)},a.set(c,p)}for(var M=0,j=0;j<f.length;j++)M+=f[j];var P=c.morphTargetsRelative?1:1-M;h.getUniforms().setValue(e,"morphTargetBaseInfluence",P),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var R=void 0===f?0:f.length,I=r[c.id];if(void 0===I||I.length!==R){I=[];for(var D=0;D<R;D++)I[D]=[D,0];r[c.id]=I}for(var F=0;F<R;F++){var L=I[F];L[0]=F,L[1]=f[F]}I.sort(Ng);for(var N=0;N<8;N++)N<R&&I[N][1]?(s[N][0]=I[N][0],s[N][1]=I[N][1]):(s[N][0]=Number.MAX_SAFE_INTEGER,s[N][1]=0);s.sort(Lg);for(var B=c.morphAttributes.position,H=c.morphAttributes.normal,U=0,V=0;V<8;V++){var z=s[V],W=z[0],G=z[1];W!==Number.MAX_SAFE_INTEGER&&G?(B&&c.getAttribute("morphTarget"+V)!==B[W]&&c.setAttribute("morphTarget"+V,B[W]),H&&c.getAttribute("morphNormal"+V)!==H[W]&&c.setAttribute("morphNormal"+V,H[W]),i[V]=G,U+=G):(B&&!0===c.hasAttribute("morphTarget"+V)&&c.deleteAttribute("morphTarget"+V),H&&!0===c.hasAttribute("morphNormal"+V)&&c.deleteAttribute("morphNormal"+V),i[V]=0)}var K=c.morphTargetsRelative?1:1-U;h.getUniforms().setValue(e,"morphTargetBaseInfluence",K),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Ug(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=t.get(e,e.geometry);return i.get(s)!==o&&(t.update(s),i.set(s,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),s},dispose:function(){i=new WeakMap}}}Fg.prototype.isDataTexture2DArray=!0;var Vg=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(l.a)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Sp);Vg.prototype.isDataTexture3D=!0;var zg=new Sp,Wg=new Fg,Gg=new Vg,Kg=new Um,qg=[],Xg=[],Yg=new Float32Array(16),Zg=new Float32Array(9),Jg=new Float32Array(4);function Qg(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=qg[i];if(void 0===a&&(a=new Float32Array(i),qg[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)e[o].toArray(a,s+=n)}return a}function $g(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ey(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function ty(e,t){var n=Xg[t];void 0===n&&(n=new Int32Array(t),Xg[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ny(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ry(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if($g(n,t))return;e.uniform2fv(this.addr,t),ey(n,t)}}function iy(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if($g(n,t))return;e.uniform3fv(this.addr,t),ey(n,t)}}function ay(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if($g(n,t))return;e.uniform4fv(this.addr,t),ey(n,t)}}function oy(e,t){var n=this.cache,r=t.elements;if(void 0===r){if($g(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ey(n,t)}else{if($g(n,r))return;Jg.set(r),e.uniformMatrix2fv(this.addr,!1,Jg),ey(n,r)}}function sy(e,t){var n=this.cache,r=t.elements;if(void 0===r){if($g(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ey(n,t)}else{if($g(n,r))return;Zg.set(r),e.uniformMatrix3fv(this.addr,!1,Zg),ey(n,r)}}function uy(e,t){var n=this.cache,r=t.elements;if(void 0===r){if($g(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ey(n,t)}else{if($g(n,r))return;Yg.set(r),e.uniformMatrix4fv(this.addr,!1,Yg),ey(n,r)}}function cy(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ly(e,t){var n=this.cache;$g(n,t)||(e.uniform2iv(this.addr,t),ey(n,t))}function hy(e,t){var n=this.cache;$g(n,t)||(e.uniform3iv(this.addr,t),ey(n,t))}function fy(e,t){var n=this.cache;$g(n,t)||(e.uniform4iv(this.addr,t),ey(n,t))}function dy(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function py(e,t){var n=this.cache;$g(n,t)||(e.uniform2uiv(this.addr,t),ey(n,t))}function vy(e,t){var n=this.cache;$g(n,t)||(e.uniform3uiv(this.addr,t),ey(n,t))}function my(e,t){var n=this.cache;$g(n,t)||(e.uniform4uiv(this.addr,t),ey(n,t))}function gy(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||zg,i)}function yy(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Gg,i)}function by(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Kg,i)}function _y(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Wg,i)}function wy(e,t){e.uniform1fv(this.addr,t)}function xy(e,t){var n=Qg(t,this.size,2);e.uniform2fv(this.addr,n)}function ky(e,t){var n=Qg(t,this.size,3);e.uniform3fv(this.addr,n)}function Sy(e,t){var n=Qg(t,this.size,4);e.uniform4fv(this.addr,n)}function Ey(e,t){var n=Qg(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Oy(e,t){var n=Qg(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ty(e,t){var n=Qg(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Cy(e,t){e.uniform1iv(this.addr,t)}function Ay(e,t){e.uniform2iv(this.addr,t)}function My(e,t){e.uniform3iv(this.addr,t)}function jy(e,t){e.uniform4iv(this.addr,t)}function Py(e,t){e.uniform1uiv(this.addr,t)}function Ry(e,t){e.uniform2uiv(this.addr,t)}function Iy(e,t){e.uniform3uiv(this.addr,t)}function Dy(e,t){e.uniform4uiv(this.addr,t)}function Fy(e,t,n){var r=t.length,i=ty(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||zg,i[a])}function Ly(e,t,n){var r=t.length,i=ty(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture3D(t[a]||Gg,i[a])}function Ny(e,t,n){var r=t.length,i=ty(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||Kg,i[a])}function By(e,t,n){var r=t.length,i=ty(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture2DArray(t[a]||Wg,i[a])}function Hy(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ny;case 35664:return ry;case 35665:return iy;case 35666:return ay;case 35674:return oy;case 35675:return sy;case 35676:return uy;case 5124:case 35670:return cy;case 35667:case 35671:return ly;case 35668:case 35672:return hy;case 35669:case 35673:return fy;case 5125:return dy;case 36294:return py;case 36295:return vy;case 36296:return my;case 35678:case 36198:case 36298:case 36306:case 35682:return gy;case 35679:case 36299:case 36307:return yy;case 35680:case 36300:case 36308:case 36293:return by;case 36289:case 36303:case 36311:case 36292:return _y}}(t.type)}function Uy(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return wy;case 35664:return xy;case 35665:return ky;case 35666:return Sy;case 35674:return Ey;case 35675:return Oy;case 35676:return Ty;case 5124:case 35670:return Cy;case 35667:case 35671:return Ay;case 35668:case 35672:return My;case 35669:case 35673:return jy;case 5125:return Py;case 36294:return Ry;case 36295:return Iy;case 36296:return Dy;case 35678:case 36198:case 36298:case 36306:case 35682:return Fy;case 35679:case 36299:case 36307:return Ly;case 35680:case 36300:case 36308:case 36293:return Ny;case 36289:case 36303:case 36311:case 36292:return By}}(t.type)}function Vy(e){this.id=e,this.seq=[],this.map={}}Uy.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ey(t,e)},Vy.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var zy=/(\w+)(\])?(\[|\.)?/g;function Wy(e,t){e.seq.push(t),e.map[t.id]=t}function Gy(e,t,n){var r=e.name,i=r.length;for(zy.lastIndex=0;;){var a=zy.exec(r),o=a[1],s=a[3];if("]"===a[2]&&(o|=0),void 0===s||"["===s&&zy.lastIndex+2===i){Wy(n,void 0===s?new Hy(o,e,t):new Uy(o,e,t));break}var u=n.map[o];void 0===u&&Wy(n,u=new Vy(o)),n=u}}function Ky(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Gy(i,e.getUniformLocation(t,i.name),this)}}function qy(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Ky.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Ky.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Ky.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},Ky.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var Xy=0;function Yy(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Zy(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Jy(e,t){var n=Yy(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Qy(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function $y(e){return""!==e}function eb(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function tb(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var nb=/^[ \t]*#include +<([\w\d./]+)>/gm;function rb(e){return e.replace(nb,ib)}function ib(e,t){var n=$m[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return rb(n)}var ab=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ob=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sb(e){return e.replace(ob,cb).replace(ab,ub)}function ub(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),cb(0,t,n,r)}function cb(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function lb(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function hb(e,t,n,r){var i,a,o,s,u=e.getContext(),c=n.defines,l=n.vertexShader,h=n.fragmentShader,f=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),p=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),v=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),m=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($y).join("\n")}(n),y=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),b=u.createProgram(),_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[y].filter($y).join("\n")).length>0&&(i+="\n"),(a=[g,y].filter($y).join("\n")).length>0&&(a+="\n")):(i=[lb(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($y).join("\n"),a=[g,lb(n),"#define SHADER_NAME "+n.shaderName,y,"#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?$m.tonemapping_pars_fragment:"",0!==n.toneMapping?Qy("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",1022===n.format?"#define OPAQUE":"",$m.encodings_pars_fragment,n.map?Jy("mapTexelToLinear",n.mapEncoding):"",n.matcap?Jy("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Jy("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Jy("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?Jy("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?Jy("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?Jy("lightMapTexelToLinear",n.lightMapEncoding):"",(o=n.outputEncoding,s=Yy(o),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter($y).join("\n")),l=tb(l=eb(l=rb(l),n),n),h=tb(h=eb(h=rb(h),n),n),l=sb(l),h=sb(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var w,x,k=_+a+h,S=qy(u,35633,_+i+l),E=qy(u,35632,k);if(u.attachShader(b,S),u.attachShader(b,E),void 0!==n.index0AttributeName?u.bindAttribLocation(b,0,n.index0AttributeName):!0===n.morphTargets&&u.bindAttribLocation(b,0,"position"),u.linkProgram(b),e.debug.checkShaderErrors){var O=u.getProgramInfoLog(b).trim(),T=u.getShaderInfoLog(S).trim(),C=u.getShaderInfoLog(E).trim(),A=!0,M=!0;if(!1===u.getProgramParameter(b,35714)){A=!1;var j=Zy(u,S,"vertex"),P=Zy(u,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+u.getError()+" - VALIDATE_STATUS "+u.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+O+"\n"+j+"\n"+P)}else""!==O?console.warn("THREE.WebGLProgram: Program Info Log:",O):""!==T&&""!==C||(M=!1);M&&(this.diagnostics={runnable:A,programLog:O,vertexShader:{log:T,prefix:i},fragmentShader:{log:C,prefix:a}})}return u.deleteShader(S),u.deleteShader(E),this.getUniforms=function(){return void 0===w&&(w=new Ky(u,b)),w},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(u,b)),x},this.destroy=function(){r.releaseStatesOfProgram(this),u.deleteProgram(b),this.program=void 0},this.name=n.shaderName,this.id=Xy++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=S,this.fragmentShader=E,this}function fb(e,t,n,r,i,a,o){var s=[],u=i.isWebGL2,c=i.logarithmicDepthBuffer,l=i.floatVertexTextures,h=i.maxVertexUniforms,f=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,t}return{getParameters:function(a,s,v,g,y){var b,_,w=g.fog,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||(a.isMeshStandardMaterial?g.environment:null)),k=p[a.type],S=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(l)return 1024;var n=Math.floor((h-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}(y):0;if(null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead."),k){var E=tg[k];b=E.vertexShader,_=E.fragmentShader}else b=a.vertexShader,_=a.fragmentShader;var O=e.getRenderTarget(),T=a.alphaTest>0,C=a.clearcoat>0;return{isWebGL2:u,shaderID:k,shaderName:a.type,vertexShader:b,fragmentShader:_,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null!==O?m(O.texture):e.outputEncoding,map:!!a.map,mapEncoding:m(a.map),matcap:!!a.matcap,matcapEncoding:m(a.matcap),envMap:!!x,envMapMode:x&&x.mapping,envMapEncoding:m(x),envMapCubeUV:!!x&&(306===x.mapping||307===x.mapping),lightMap:!!a.lightMap,lightMapEncoding:m(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:m(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,clearcoat:C,clearcoatMap:C&&!!a.clearcoatMap,clearcoatRoughnessMap:C&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:C&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,specularColorMapEncoding:m(a.specularColorMap),alphaMap:!!a.alphaMap,alphaTest:T,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenColorMapEncoding:m(a.sheenColorMap),sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!w,useFog:a.fog,fogExp2:w&&w.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===y.isSkinnedMesh&&S>0,maxBones:S,useVertexTexture:l,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&v.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(wp(t.fragmentShader)),n.push(wp(t.vertexShader))),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<v.length;i++)n.push(t[v[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t=p[e.type];return t?Fm.clone(tg[t].uniforms):e.uniforms},acquireProgram:function(t,n){for(var r,i=0,o=s.length;i<o;i++){var u=s[i];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new hb(e,n,t,a),s.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function db(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&e.set(t,n={}),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function pb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function vb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function mb(e){var t=[],n=0,r=[],i=[],a=[],o={id:-1};function s(r,i,a,s,u,c){var l=t[n],h=e.get(a);return void 0===l?t[n]=l={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:c}:(l.id=r.id,l.object=r,l.geometry=i,l.material=a,l.program=h.program||o,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=u,l.group=c),n++,l}return{opaque:r,transmissive:i,transparent:a,init:function(){n=0,r.length=0,i.length=0,a.length=0},push:function(e,t,n,o,u,c){var l=s(e,t,n,o,u,c);n.transmission>0?i.push(l):!0===n.transparent?a.push(l):r.push(l)},unshift:function(e,t,n,o,u,c){var l=s(e,t,n,o,u,c);n.transmission>0?i.unshift(l):!0===n.transparent?a.unshift(l):r.unshift(l)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||pb),i.length>1&&i.sort(t||vb),a.length>1&&a.sort(t||vb)}}}function gb(e){var t=new WeakMap;return{get:function(n,r){var i;return!1===t.has(n)?(i=new mb(e),t.set(n,[i])):r>=t.get(n).length?(i=new mb(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function yb(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Mp,color:new Qv};break;case"SpotLight":n={position:new Mp,direction:new Mp,color:new Qv,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Mp,color:new Qv,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Mp,skyColor:new Qv,groundColor:new Qv};break;case"RectAreaLight":n={color:new Qv,position:new Mp,halfWidth:new Mp,halfHeight:new Mp}}return e[t.id]=n,n}}}var bb=0;function _b(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function wb(e,t){for(var n,r=new yb,i=(n={},{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mp};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mp,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)a.probe.push(new Mp);var s=new Mp,u=new sv,c=new sv;return{setup:function(n,o){for(var s=0,u=0,c=0,l=0;l<9;l++)a.probe[l].set(0,0,0);var h=0,f=0,d=0,p=0,v=0,m=0,g=0,y=0;n.sort(_b);for(var b=!0!==o?Math.PI:1,_=0,w=n.length;_<w;_++){var x=n[_],k=x.color,S=x.intensity,E=x.distance,O=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)s+=k.r*S*b,u+=k.g*S*b,c+=k.b*S*b;else if(x.isLightProbe)for(var T=0;T<9;T++)a.probe[T].addScaledVector(x.sh.coefficients[T],S);else if(x.isDirectionalLight){var C=r.get(x);if(C.color.copy(x.color).multiplyScalar(x.intensity*b),x.castShadow){var A=x.shadow,M=i.get(x);M.shadowBias=A.bias,M.shadowNormalBias=A.normalBias,M.shadowRadius=A.radius,M.shadowMapSize=A.mapSize,a.directionalShadow[h]=M,a.directionalShadowMap[h]=O,a.directionalShadowMatrix[h]=x.shadow.matrix,m++}a.directional[h]=C,h++}else if(x.isSpotLight){var j=r.get(x);if(j.position.setFromMatrixPosition(x.matrixWorld),j.color.copy(k).multiplyScalar(S*b),j.distance=E,j.coneCos=Math.cos(x.angle),j.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),j.decay=x.decay,x.castShadow){var P=x.shadow,R=i.get(x);R.shadowBias=P.bias,R.shadowNormalBias=P.normalBias,R.shadowRadius=P.radius,R.shadowMapSize=P.mapSize,a.spotShadow[d]=R,a.spotShadowMap[d]=O,a.spotShadowMatrix[d]=x.shadow.matrix,y++}a.spot[d]=j,d++}else if(x.isRectAreaLight){var I=r.get(x);I.color.copy(k).multiplyScalar(S),I.halfWidth.set(.5*x.width,0,0),I.halfHeight.set(0,.5*x.height,0),a.rectArea[p]=I,p++}else if(x.isPointLight){var D=r.get(x);if(D.color.copy(x.color).multiplyScalar(x.intensity*b),D.distance=x.distance,D.decay=x.decay,x.castShadow){var F=x.shadow,L=i.get(x);L.shadowBias=F.bias,L.shadowNormalBias=F.normalBias,L.shadowRadius=F.radius,L.shadowMapSize=F.mapSize,L.shadowCameraNear=F.camera.near,L.shadowCameraFar=F.camera.far,a.pointShadow[f]=L,a.pointShadowMap[f]=O,a.pointShadowMatrix[f]=x.shadow.matrix,g++}a.point[f]=D,f++}else if(x.isHemisphereLight){var N=r.get(x);N.skyColor.copy(x.color).multiplyScalar(S*b),N.groundColor.copy(x.groundColor).multiplyScalar(S*b),a.hemi[v]=N,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=eg.LTC_FLOAT_1,a.rectAreaLTC2=eg.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=eg.LTC_HALF_1,a.rectAreaLTC2=eg.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=u,a.ambient[2]=c;var B=a.hash;B.directionalLength===h&&B.pointLength===f&&B.spotLength===d&&B.rectAreaLength===p&&B.hemiLength===v&&B.numDirectionalShadows===m&&B.numPointShadows===g&&B.numSpotShadows===y||(a.directional.length=h,a.spot.length=d,a.rectArea.length=p,a.point.length=f,a.hemi.length=v,a.directionalShadow.length=m,a.directionalShadowMap.length=m,a.pointShadow.length=g,a.pointShadowMap.length=g,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=m,a.pointShadowMatrix.length=g,a.spotShadowMatrix.length=y,B.directionalLength=h,B.pointLength=f,B.spotLength=d,B.rectAreaLength=p,B.hemiLength=v,B.numDirectionalShadows=m,B.numPointShadows=g,B.numSpotShadows=y,a.version=bb++)},setupView:function(e,t){for(var n=0,r=0,i=0,o=0,l=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var v=a.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=a.spot[i];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(s),m.direction.transformDirection(h),i++}else if(p.isRectAreaLight){var g=a.rectArea[o];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),c.identity(),u.copy(p.matrixWorld),u.premultiply(h),c.extractRotation(u),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(c),g.halfHeight.applyMatrix4(c),o++}else if(p.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var b=a.hemi[l];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(h),b.direction.normalize(),l++}}},state:a}}function xb(e,t){var n=new wb(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function kb(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new xb(e,t),n.set(r,[i])):a>=n.get(r).length?(i=new xb(e,t),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var Sb=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Gv);Sb.prototype.isMeshDepthMaterial=!0;var Eb=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new Mp,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Gv);function Ob(e,t,n){var r=new Ym,i=new mp,a=new mp,o=new Op,s=new Sb({depthPacking:3201}),u=new Eb,c={},l=n.maxTextureSize,h={0:1,1:0,2:2},f=new Lm({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mp},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new dm;p.setAttribute("position",new nm(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new jm(p,f),m=this;function g(n,r){var i=t.update(v);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,v,null)}function y(t,n,r,i,a,o,l){var f=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(f=void 0!==d?d:!0===i.isPointLight?u:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){var p=f.uuid,v=r.uuid,m=c[p];void 0===m&&(c[p]=m={});var g=m[v];void 0===g&&(g=f.clone(),m[v]=g),f=g}return f.visible=r.visible,f.wireframe=r.wireframe,f.side=3===l?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],f.alphaMap=r.alphaMap,f.alphaTest=r.alphaTest,f.clipShadows=r.clipShadows,f.clippingPlanes=r.clippingPlanes,f.clipIntersection=r.clipIntersection,f.displacementMap=r.displacementMap,f.displacementScale=r.displacementScale,f.displacementBias=r.displacementBias,f.wireframeLinewidth=r.wireframeLinewidth,f.linewidth=r.linewidth,!0===i.isPointLight&&!0===f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=a,f.farDistance=o),f}function b(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var l=u.groups,h=0,f=l.length;h<f;h++){var d=l[h],p=c[d.materialIndex];if(p&&p.visible){var v=y(n,0,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,v,n,d)}}else if(c.visible){var m=y(n,0,c,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,null)}}for(var g=n.children,_=0,w=g.length;_<w;_++)b(g[_],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var _=y.getFrameExtents();if(i.multiply(_),a.copy(y.mapSize),(i.x>l||i.y>l)&&(i.x>l&&(a.x=Math.floor(l/_.x),i.x=a.x*_.x,y.mapSize.x=a.x),i.y>l&&(a.y=Math.floor(l/_.y),i.y=a.y*_.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var w={minFilter:1006,magFilter:1006,format:1023};y.map=new Tp(i.x,i.y,w),y.map.texture.name=v.name+".shadowMap",y.mapPass=new Tp(i.x,i.y,w),y.camera.updateProjectionMatrix()}null===y.map&&(y.map=new Tp(i.x,i.y,{minFilter:1003,magFilter:1003,format:1023}),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()),e.setRenderTarget(y.map),e.clear();for(var x=y.getViewportCount(),k=0;k<x;k++){var S=y.getViewport(k);o.set(a.x*S.x,a.y*S.y,a.x*S.z,a.y*S.w),f.viewport(o),y.updateMatrices(v,k),r=y.getFrustum(),b(n,s,y.camera,v,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,c,h)}}}function Tb(e,t,n){var r,i,a=n.isWebGL2,o=new function(){var t=!1,n=new Op,r=null,i=new Op(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?N(2929):B(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,c=null;return{setTest:function(e){t||(e?N(2960):B(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,c=null}}},c={},l={},h=null,f=!1,d=null,p=null,v=null,m=null,g=null,y=null,b=null,_=!1,w=null,x=null,k=null,S=null,E=null,O=e.getParameter(35661),T=!1,C=0,A=e.getParameter(7938);-1!==A.indexOf("WebGL")?(C=parseFloat(/^WebGL (\d)/.exec(A)[1]),T=C>=1):-1!==A.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL ES (\d)/.exec(A)[1]),T=C>=2);var M=null,j={},P=e.getParameter(3088),R=e.getParameter(2978),I=(new Op).fromArray(P),D=(new Op).fromArray(R);function F(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var L={};function N(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function B(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}L[3553]=F(3553,3553,1),L[34067]=F(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),u.setClear(0),N(2929),s.setFunc(3),W(!1),G(1),N(2884),z(0);var H=(r={},Object(nl.a)(r,100,32774),Object(nl.a)(r,101,32778),Object(nl.a)(r,102,32779),r);if(a)H[103]=32775,H[104]=32776;else{var U=t.get("EXT_blend_minmax");null!==U&&(H[103]=U.MIN_EXT,H[104]=U.MAX_EXT)}var V=(i={},Object(nl.a)(i,200,0),Object(nl.a)(i,201,1),Object(nl.a)(i,202,768),Object(nl.a)(i,204,770),Object(nl.a)(i,210,776),Object(nl.a)(i,208,774),Object(nl.a)(i,206,772),Object(nl.a)(i,203,769),Object(nl.a)(i,205,771),Object(nl.a)(i,209,775),Object(nl.a)(i,207,773),i);function z(t,n,r,i,a,o,s,u){if(0!==t){if(!1===f&&(N(3042),f=!0),5===t)a=a||n,o=o||r,s=s||i,n===p&&a===g||(e.blendEquationSeparate(H[n],H[a]),p=n,g=a),r===v&&i===m&&o===y&&s===b||(e.blendFuncSeparate(V[r],V[i],V[o],V[s]),v=r,m=i,y=o,b=s),d=t,_=null;else if(t!==d||u!==_){if(100===p&&100===g||(e.blendEquation(32774),p=100,g=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,m=null,y=null,b=null,d=t,_=u}}else!0===f&&(B(3042),f=!1)}function W(t){w!==t&&(e.frontFace(t?2304:2305),w=t)}function G(t){0!==t?(N(2884),t!==x&&e.cullFace(1===t?1029:2===t?1028:1032)):B(2884),x=t}function K(t,n,r){t?(N(32823),S===n&&E===r||(e.polygonOffset(n,r),S=n,E=r)):B(32823)}function q(t){void 0===t&&(t=33984+O-1),M!==t&&(e.activeTexture(t),M=t)}return{buffers:{color:o,depth:s,stencil:u},enable:N,disable:B,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,a&&(36009===t&&(l[36160]=n),36160===t&&(l[36009]=n)),!0)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:z,setMaterial:function(e,t){2===e.side?B(2884):N(2884);var n=1===e.side;t&&(n=!n),W(n),1===e.blending&&!1===e.transparent?z(0):z(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),K(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?N(32926):B(32926)},setFlipSided:W,setCullFace:G,setLineWidth:function(t){t!==k&&(T&&e.lineWidth(t),k=t)},setPolygonOffset:K,setScissorTest:function(e){e?N(3089):B(3089)},activeTexture:q,bindTexture:function(t,n){null===M&&q();var r=j[M];void 0===r&&(j[M]=r={type:void 0,texture:void 0}),r.type===t&&r.texture===n||(e.bindTexture(t,n||L[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=j[M];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},M=null,j={},l={},h=null,f=!1,d=null,p=null,v=null,m=null,g=null,y=null,b=null,_=!1,w=null,x=null,k=null,S=null,E=null,I.set(0,0,e.canvas.width,e.canvas.height),D.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),u.reset()}}}function Cb(e,t,n,r,i,a,o){var s,u,c,l=i.isWebGL2,h=i.maxTextures,f=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,m=new WeakMap,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function y(e,t){return g?new OffscreenCanvas(e,t):_p("canvas")}function b(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?vp:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===c&&(c=y(o,s));var u=n?y(o,s):c;return u.width=o,u.height=s,u.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return pp(e.width)&&pp(e.height)}function w(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function x(t){e.generateMipmap(t)}function k(n,r,i){if(!1===l)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function S(e){return 1003===e||1004===e||1005===e?9728:9729}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&m.delete(n),o.memory.textures--}function O(t){var n=t.target;n.removeEventListener("dispose",O),function(t){var n=t.texture,i=r.get(t),a=r.get(n);if(t){if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,c=n.length;u<c;u++){var l=r.get(n[u]);l.__webglTexture&&(e.deleteTexture(l.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}}(n)}var T=0;function C(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void I(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function A(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6===r.image.length){R(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],c=0;c<6;c++)u[c]=o||s?s?r.image[c].image:r.image[c]:b(r.image[c],!1,!0,f);var h,d=_(u[0])||l,p=a.convert(r.format),v=a.convert(r.type),m=k(r.internalFormat,p,v);if(P(34067,r,d),o)for(var g=0;g<6;g++){h=u[g].mipmaps;for(var y=0;y<h.length;y++){var S=h[y];1023!==r.format&&1022!==r.format?null!==p?n.compressedTexImage2D(34069+g,y,m,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,y,m,S.width,S.height,0,p,v,S.data)}}else{h=r.mipmaps;for(var E=0;E<6;E++)if(s){n.texImage2D(34069+E,0,m,u[E].width,u[E].height,0,p,v,u[E].data);for(var O=0;O<h.length;O++){var T=h[O].image[E].image;n.texImage2D(34069+E,O+1,m,T.width,T.height,0,p,v,T.data)}}else{n.texImage2D(34069+E,0,m,p,v,u[E]);for(var C=0;C<h.length;C++)n.texImage2D(34069+E,C+1,m,p,v,h[C].image[E])}}w(r,d)&&x(34067),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}var M=(s={},Object(nl.a)(s,1e3,10497),Object(nl.a)(s,1001,33071),Object(nl.a)(s,1002,33648),s),j=(u={},Object(nl.a)(u,1003,9728),Object(nl.a)(u,1004,9984),Object(nl.a)(u,1005,9986),Object(nl.a)(u,1006,9729),Object(nl.a)(u,1007,9985),Object(nl.a)(u,1008,9987),u);function P(n,a,o){if(o?(e.texParameteri(n,10242,M[a.wrapS]),e.texParameteri(n,10243,M[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,M[a.wrapR]),e.texParameteri(n,10240,j[a.magFilter]),e.texParameteri(n,10241,j[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,S(a.magFilter)),e.texParameteri(n,10241,S(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(1015===a.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===l&&1016===a.type&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E),t.__webglTexture=e.createTexture(),o.memory.textures++)}function I(t,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),R(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!l&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===_(r.image),c=b(r.image,u,!1,d),h=_(c)||l,f=a.convert(r.format),p=a.convert(r.type),v=k(r.internalFormat,f,p);P(o,r,h);var m=r.mipmaps;if(r.isDepthTexture)v=6402,l?v=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===v&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,p=a.convert(r.type)),1027===r.format&&6402===v&&(v=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,p=a.convert(r.type))),n.texImage2D(3553,0,v,c.width,c.height,0,f,p,null);else if(r.isDataTexture)if(m.length>0&&h){for(var g=0,y=m.length;g<y;g++)n.texImage2D(3553,g,v,(s=m[g]).width,s.height,0,f,p,s.data);r.generateMipmaps=!1}else n.texImage2D(3553,0,v,c.width,c.height,0,f,p,c.data);else if(r.isCompressedTexture)for(var S=0,E=m.length;S<E;S++)s=m[S],1023!==r.format&&1022!==r.format?null!==f?n.compressedTexImage2D(3553,S,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,S,v,s.width,s.height,0,f,p,s.data);else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,c.width,c.height,c.depth,0,f,p,c.data);else if(r.isDataTexture3D)n.texImage3D(32879,0,v,c.width,c.height,c.depth,0,f,p,c.data);else{var O=function(e,t,n){return!0===w(e,n)?Math.log2(Math.max(t.width,t.height))+1:e.mipmaps.length>0?e.mipmaps.length:1}(r,c,h),T=l&&!0!==r.isVideoTexture,C=void 0===t.__version;if(m.length>0&&h){T&&C&&n.texStorage2D(3553,O,v,m[0].width,m[0].height);for(var A=0,M=m.length;A<M;A++)s=m[A],T?n.texSubImage2D(3553,A,0,0,f,p,s):n.texImage2D(3553,A,v,f,p,s);r.generateMipmaps=!1}else T?(C&&n.texStorage2D(3553,O,v,c.width,c.height),n.texSubImage2D(3553,0,0,0,f,p,c)):n.texImage2D(3553,0,v,f,p,c)}w(r,h)&&x(o),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function D(t,i,o,s,u){var c=a.convert(o.format),l=a.convert(o.type),h=k(o.internalFormat,c,l);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,c,l,null):n.texImage2D(u,0,h,i.width,i.height,0,c,l,null)),n.bindFramebuffer(36160,t),i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,s,u,r.get(o).__webglTexture,0,N(i)):e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||n.useRenderToTexture){var o=n.depthTexture;o&&o.isDepthTexture&&(1015===o.type?i=36012:1014===o.type&&(i=33190));var s=N(n);n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=N(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,u,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{var c=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,l=a.convert(c.format),h=a.convert(c.type),f=k(c.internalFormat,l,h),d=N(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,d,f,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,d,f,n.width,n.height):e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function L(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),C(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=N(i);if(1026===i.depthTexture.format)i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),F(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function N(e){return l&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(p,e.samples):0}var B=!1,H=!1;this.allocateTextureUnit=function(){var e=T;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=C,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?I(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?I(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=A,this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&D(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&L(e)},this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),c=r.get(s);t.addEventListener("dispose",O),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=s.isDataTexture3D||s.isDataTexture2DArray,p=_(t)||l;if(!l||1022!==s.format||1015!==s.type&&1016!==s.type||(s.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){u.__webglFramebuffer=[];for(var v=0;v<6;v++)u.__webglFramebuffer[v]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers)for(var m=t.texture,g=0,y=m.length;g<y;g++){var b=r.get(m[g]);void 0===b.__webglTexture&&(b.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(l){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var S=a.convert(s.format),E=a.convert(s.type),T=k(s.internalFormat,S,E),C=N(t);e.renderbufferStorageMultisample(36161,C,T,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),F(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),P(34067,s,p);for(var A=0;A<6;A++)D(u.__webglFramebuffer[A],t,s,36064,34069+A);w(s,p)&&x(34067),n.unbindTexture()}else if(f){for(var M=t.texture,j=0,R=M.length;j<R;j++){var I=M[j],B=r.get(I);n.bindTexture(3553,B.__webglTexture),P(3553,I,p),D(u.__webglFramebuffer,t,I,36064+j,3553),w(I,p)&&x(3553)}n.unbindTexture()}else{var H=3553;d&&(l?H=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(H,c.__webglTexture),P(H,s,p),D(u.__webglFramebuffer,t,s,36064,H),w(s,p)&&x(H),n.unbindTexture()}t.depthBuffer&&L(t)},this.updateRenderTargetMipmap=function(e){for(var t=_(e)||l,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(w(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,c=r.get(s).__webglTexture;n.bindTexture(u,c),x(u),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(l){var i=t.width,a=t.height,o=16384,s=[36064],u=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(u),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024));var c=r.get(t);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),e.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=L,this.setupFrameBufferTexture=D,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),C(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===H&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),H=!0),e=e.texture),A(e,t)}}function Ab(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:1020===e?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}Eb.prototype.isMeshDistanceMaterial=!0;var Mb=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(l.a)(this,n),(e=t.call(this)).cameras=r,e}return n}(Bm);Mb.prototype.isArrayCamera=!0;var jb=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).type="Group",e}return n}(Pv);jb.prototype.isGroup=!0;var Pb={type:"move"},Rb=function(){function e(){Object(l.a)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return Object(h.a)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new jb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new jb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Mp,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Mp),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new jb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Mp,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Mp),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,s=this._targetRay,u=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==s&&null!==(r=t.getPose(e.targetRaySpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Pb)),c&&e.hand){a=!0;var l,h=Object(o.a)(e.hand.values());try{for(h.s();!(l=h.n()).done;){var f=l.value,d=t.getJointPose(f,n);if(void 0===c.joints[f.jointName]){var p=new jb;p.matrixAutoUpdate=!1,p.visible=!1,c.joints[f.jointName]=p,c.add(p)}var v=c.joints[f.jointName];null!==d&&(v.matrix.fromArray(d.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=d.radius),v.visible=null!==d}}catch(g){h.e(g)}finally{h.f()}var m=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position);c.inputState.pinching&&m>.025?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=.015&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==u&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1);return null!==s&&(s.visible=null!==r),null!==u&&(u.visible=null!==i),null!==c&&(c.visible=null!==a),this}}]),e}(),Ib=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s,u,c,h,f){var d;if(Object(l.a)(this,n),1026!==(f=void 0!==f?f:1026)&&1027!==f)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&1026===f&&(i=1012),void 0===i&&1027===f&&(i=1020),(d=t.call(this,null,a,o,s,u,c,f,i,h)).image={width:e,height:r},d.magFilter=void 0!==u?u:1003,d.minFilter=void 0!==c?c:1003,d.flipY=!1,d.generateMipmaps=!1,d}return n}(Sp);Ib.prototype.isDepthTexture=!0;var Db=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;Object(l.a)(this,n),i=t.call(this);var o=Object(a.a)(i),s=null,u=1,c=null,h="local-floor",f=e.extensions.has("WEBGL_multisampled_render_to_texture"),d=null,p=null,v=null,m=null,g=!1,y=null,b=r.getContextAttributes(),_=null,w=null,x=[],k=new Map,S=new Bm;S.layers.enable(1),S.viewport=new Op;var E=new Bm;E.layers.enable(2),E.viewport=new Op;var O=[S,E],T=new Mb;T.layers.enable(1),T.layers.enable(2);var C=null,A=null;function M(e){var t=k.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function j(){k.forEach((function(e,t){e.disconnect(t)})),k.clear(),C=null,A=null,e.setRenderTarget(_),m=null,v=null,p=null,s=null,w=null,L.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}function P(e){for(var t=s.inputSources,n=0;n<x.length;n++)k.set(t[n],x[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=k.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),k.delete(i))}for(var o=0;o<e.added.length;o++){var u=e.added[o],c=k.get(u);c&&c.dispatchEvent({type:"connected",data:u})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=x[e];return void 0===t&&(t=new Rb,x[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=x[e];return void 0===t&&(t=new Rb,x[e]=t),t.getGripSpace()},i.getHand=function(e){var t=x[e];return void 0===t&&(t=new Rb,x[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){u=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){h=e,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return c},i.getBaseLayer=function(){return null!==v?v:m},i.getBinding=function(){return p},i.getFrame=function(){return y},i.getSession=function(){return s},i.setSession=function(){var t,n=(t=Dc.a.mark((function t(n){var i,a,l,d;return Dc.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(s=n)){t.next=23;break}if(_=e.getRenderTarget(),s.addEventListener("select",M),s.addEventListener("selectstart",M),s.addEventListener("selectend",M),s.addEventListener("squeeze",M),s.addEventListener("squeezestart",M),s.addEventListener("squeezeend",M),s.addEventListener("end",j),s.addEventListener("inputsourceschange",P),!0===b.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===s.renderState.layers||!1===e.capabilities.isWebGL2?(m=new XRWebGLLayer(s,r,{antialias:void 0!==s.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:u}),s.updateRenderState({baseLayer:m}),w=new Tp(m.framebufferWidth,m.framebufferHeight)):(g=b.antialias,i=null,a=null,l=null,b.depth&&(l=b.stencil?35056:33189,i=b.stencil?1027:1026,a=b.stencil?1020:1012),d={colorFormat:b.alpha||g?32856:32849,depthFormat:l,scaleFactor:u},p=new XRWebGLBinding(s,r),v=p.createProjectionLayer(d),s.updateRenderState({layers:[v]}),w=g?new Cp(v.textureWidth,v.textureHeight,{format:1023,type:1009,depthTexture:new Ib(v.textureWidth,v.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:b.stencil,ignoreDepth:v.ignoreDepthValues,useRenderToTexture:f}):new Tp(v.textureWidth,v.textureHeight,{format:b.alpha?1023:1022,type:1009,depthTexture:new Ib(v.textureWidth,v.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:b.stencil,ignoreDepth:v.ignoreDepthValues})),this.setFoveation(0),t.next=18,s.requestReferenceSpace(h);case 18:c=t.sent,L.setContext(s),L.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"});case 23:case"end":return t.stop()}}),t,this)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(e){np(a,r,i,o,s,"next",e)}function s(e){np(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();var R=new Mp,I=new Mp;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==s){T.near=E.near=S.near=e.near,T.far=E.far=S.far=e.far,C===T.near&&A===T.far||(s.updateRenderState({depthNear:T.near,depthFar:T.far}),C=T.near,A=T.far);var t=e.parent,n=T.cameras;D(T,t);for(var r=0;r<n.length;r++)D(n[r],t);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),e.position.copy(T.position),e.quaternion.copy(T.quaternion),e.scale.copy(T.scale),e.matrix.copy(T.matrix),e.matrixWorld.copy(T.matrixWorld);for(var i=e.children,a=0,o=i.length;a<o;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);var r=R.distanceTo(I),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*l,d=o*h,p=r/(-l+h),v=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p;e.projectionMatrix.makePerspective(f-v,d+(r-v),u*s/g*m,c*s/g*m,m,g)}(T,S,E):T.projectionMatrix.copy(S.projectionMatrix)}},i.getCamera=function(){return T},i.getFoveation=function(){return null!==v?v.fixedFoveation:null!==m?m.fixedFoveation:void 0},i.setFoveation=function(e){null!==v&&(v.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var F=null,L=new Zm;return L.setAnimationLoop((function(t,n){if(d=n.getViewerPose(c),y=n,null!==d){var r=d.views;null!==m&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));var i=!1;r.length!==T.cameras.length&&(T.cameras.length=0,i=!0);for(var a=0;a<r.length;a++){var o=r[a],u=null;if(null!==m)u=m.getViewport(o);else{var l=p.getViewSubImage(v,o);u=l.viewport,0===a&&(e.setRenderTargetTextures(w,l.colorTexture,v.ignoreDepthValues?void 0:l.depthStencilTexture),e.setRenderTarget(w))}var h=O[a];h.matrix.fromArray(o.transform.matrix),h.projectionMatrix.fromArray(o.projectionMatrix),h.viewport.set(u.x,u.y,u.width,u.height),0===a&&T.matrix.copy(h.matrix),!0===i&&T.cameras.push(h)}}for(var f=s.inputSources,g=0;g<x.length;g++)x[g].update(f[g],n,c);F&&F(t,n),y=null})),i.setAnimationLoop=function(e){F=e},i.dispose=function(){},i}return n}(op);function Fb(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);var r,i,a=e.get(n).envMap;a&&(t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){var i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Lb(){var e=_p("canvas");return e.style.display="block",e}function Nb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:Lb(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,f=null,d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,b=null,_=-1,w=null,x=new Op,k=new Op,S=null,E=t.width,O=t.height,T=1,C=null,A=null,M=new Op(0,0,E,O),j=new Op(0,0,E,O),P=!1,R=[],I=new Ym,D=!1,F=!1,L=null,N=new sv,B=new Mp,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?T:1}var V,z,W,G,K,q,X,Y,Z,J,Q,$,ee,te,ne,re,ie,ae,oe,se,ue,ce,le,he=n;function fe(e,n){for(var r=0;r<e.length;r++){var i=t.getContext(e[r],n);if(null!==i)return i}return null}try{var de={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat("135")),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ye,!1),null===he){var pe=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&pe.shift(),null===(he=fe(pe,de)))throw fe(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Le){throw console.error("THREE.WebGLRenderer: "+Le.message),Le}function ve(){V=new Pg(he),z=new ag(he,V,e),V.init(z),ce=new Ab(he,V,z),W=new Tb(he,V,z),R[0]=1029,G=new Dg(he),K=new db,q=new Cb(he,V,W,K,z,ce,G),X=new sg(v),Y=new jg(v),Z=new Jm(he,z),le=new rg(he,V,Z,z),J=new Rg(he,Z,G,le),Q=new Ug(he,J,Z,G),oe=new Hg(he,z,q),re=new og(K),$=new fb(v,X,Y,V,z,le,re),ee=new Fb(K),te=new gb(K),ne=new kb(V,z),ae=new ng(v,X,W,Q,s),ie=new Ob(v,Q,z),se=new ig(he,V,G,z),ue=new Ig(he,V,G,z),G.programs=$.programs,v.capabilities=z,v.extensions=V,v.properties=K,v.renderLists=te,v.shadowMap=ie,v.state=W,v.info=G}ve();var me=new Db(v,he);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=G.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;ve(),G.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function be(e){var t=e.target;t.removeEventListener("dispose",be),_e(t)}function _e(e){we(e),K.remove(e)}function we(e){var t=K.get(e).programs;void 0!==t&&t.forEach((function(e){$.releaseProgram(e)}))}this.xr=me,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(e){void 0!==e&&(T=e,this.setSize(E,O,!1))},this.getSize=function(e){return e.set(E,O)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,O=n,t.width=Math.floor(e*T),t.height=Math.floor(n*T),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(E*T,O*T).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,O=n,T=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(M)},this.setViewport=function(e,t,n,r){e.isVector4?M.set(e.x,e.y,e.z,e.w):M.set(e,t,n,r),W.viewport(x.copy(M).multiplyScalar(T).floor())},this.getScissor=function(e){return e.copy(j)},this.setScissor=function(e,t,n,r){e.isVector4?j.set(e.x,e.y,e.z,e.w):j.set(e,t,n,r),W.scissor(k.copy(j).multiplyScalar(T).floor())},this.getScissorTest=function(){return P},this.setScissorTest=function(e){W.setScissorTest(P=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),K.dispose(),X.dispose(),Y.dispose(),Q.dispose(),le.dispose(),me.dispose(),me.removeEventListener("sessionstart",Se),me.removeEventListener("sessionend",Ee),L&&(L.dispose(),L=null),Oe.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=H);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Ie(e,t,n,r,i);W.setMaterial(r,o);var u=n.index,c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;var l,h=1;!0===r.wireframe&&(u=J.getWireframeAttribute(n),h=2),le.setup(i,r,s,n,u);var f=se;null!==u&&(l=Z.get(u),(f=ue).setIndex(l));var d=null!==u?u.count:c.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,y=Math.max(p,m),b=Math.min(d,p+v,m+g)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*U()),f.setMode(1)):f.setMode(4);else if(i.isLine){var w=r.linewidth;void 0===w&&(w=1),W.setLineWidth(w*U()),f.setMode(i.isLineSegments?1:i.isLineLoop?2:3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){var x=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,_,x)}else f.render(y,_)}},this.compile=function(e,t){(f=ne.get(e)).init(),p.push(f),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Pe(n[r],e,t);else Pe(n,e,t)})),p.pop(),f=null};var xe=null;function ke(e){xe&&xe(e)}function Se(){Oe.stop()}function Ee(){Oe.start()}var Oe=new Zm;function Te(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);var i=Q.update(e),a=e.material;a.visible&&h.push(e,i,a,n,B.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||I.intersectsObject(e))){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);var o=Q.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,c=0,l=u.length;c<l;c++){var d=u[c],p=s[d.materialIndex];p&&p.visible&&h.push(e,o,p,n,B.z,d)}else s.visible&&h.push(e,o,s,n,B.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Te(v[m],t,n,r)}}function Ce(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;f.setupLightsView(n),a.length>0&&Ae(i,t,n),r&&W.viewport(x.copy(r)),i.length>0&&Me(i,t,n),a.length>0&&Me(a,t,n),o.length>0&&Me(o,t,n)}function Ae(e,t,n){null===L&&(L=new(!0===o&&!0===z.isWebGL2?Cp:Tp)(1024,1024,{generateMipmaps:!0,type:null!==ce.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001,useRenderToTexture:V.has("WEBGL_multisampled_render_to_texture")}));var r=v.getRenderTarget();v.setRenderTarget(L),v.clear();var i=v.toneMapping;v.toneMapping=0,Me(e,t,n),v.toneMapping=i,q.updateMultisampleRenderTarget(L),q.updateRenderTargetMipmap(L),v.setRenderTarget(r)}function Me(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,c=null===r?o.material:r,l=o.group;s.layers.test(n.layers)&&je(s,t,n,u,c,l)}}function je(e,t,n,r,i,a){e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,a),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=2):v.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(v,t,n,r,i,a)}function Pe(e,t,n){!0!==t.isScene&&(t=H);var r=K.get(e),i=f.state.lights,a=i.state.version,o=$.getParameters(e,i.state,f.state.shadowsArray,t,n),s=$.getProgramCacheKey(o),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",be),u=new Map,r.programs=u);var c=u.get(s);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Re(e,o),c}else o.uniforms=$.getUniforms(e),e.onBuild(n,o,v),e.onBeforeCompile(o,v),c=$.acquireProgram(o,s),u.set(s,c),r.uniforms=o.uniforms;var l=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(l.clippingPlanes=re.uniform),Re(e,o),r.needsLights=Fe(e),r.lightsStateVersion=a,r.needsLights&&(l.ambientLightColor.value=i.state.ambient,l.lightProbe.value=i.state.probe,l.directionalLights.value=i.state.directional,l.directionalLightShadows.value=i.state.directionalShadow,l.spotLights.value=i.state.spot,l.spotLightShadows.value=i.state.spotShadow,l.rectAreaLights.value=i.state.rectArea,l.ltc_1.value=i.state.rectAreaLTC1,l.ltc_2.value=i.state.rectAreaLTC2,l.pointLights.value=i.state.point,l.pointLightShadows.value=i.state.pointShadow,l.hemisphereLights.value=i.state.hemi,l.directionalShadowMap.value=i.state.directionalShadowMap,l.directionalShadowMatrix.value=i.state.directionalShadowMatrix,l.spotShadowMap.value=i.state.spotShadowMap,l.spotShadowMatrix.value=i.state.spotShadowMatrix,l.pointShadowMap.value=i.state.pointShadowMap,l.pointShadowMatrix.value=i.state.pointShadowMatrix);var h=c.getUniforms(),d=Ky.seqWithValue(h.seq,l);return r.currentProgram=c,r.uniformsList=d,c}function Re(e,t){var n=K.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Ie(e,t,n,r,i){!0!==t.isScene&&(t=H),q.resetTextureUnits();var a=t.fog,o=null===b?v.outputEncoding:b.texture.encoding,s=(r.isMeshStandardMaterial?Y:X).get(r.envMap||(r.isMeshStandardMaterial?t.environment:null)),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,l=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,d=n.morphAttributes.position?n.morphAttributes.position.length:0,p=K.get(r),m=f.state.lights;!0===D&&(!0!==F&&e===w||re.setState(r,e,e===w&&r.id===_));var g=!1;r.version===p.__version?p.needsLights&&p.lightsStateVersion!==m.state.version||p.outputEncoding!==o||i.isInstancedMesh&&!1===p.instancing?g=!0:i.isInstancedMesh||!0!==p.instancing?i.isSkinnedMesh&&!1===p.skinning?g=!0:i.isSkinnedMesh||!0!==p.skinning?p.envMap!==s||r.fog&&p.fog!==a?g=!0:void 0===p.numClippingPlanes||p.numClippingPlanes===re.numPlanes&&p.numIntersection===re.numIntersection?(p.vertexAlphas!==u||p.vertexTangents!==c||p.morphTargets!==l||p.morphNormals!==h||!0===z.isWebGL2&&p.morphTargetsCount!==d)&&(g=!0):g=!0:g=!0:g=!0:(g=!0,p.__version=r.version);var y=p.currentProgram;!0===g&&(y=Pe(r,t,i));var x=!1,k=!1,S=!1,E=y.getUniforms(),C=p.uniforms;if(W.useProgram(y.program)&&(x=!0,k=!0,S=!0),r.id!==_&&(_=r.id,k=!0),x||w!==e){if(E.setValue(he,"projectionMatrix",e.projectionMatrix),z.logarithmicDepthBuffer&&E.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,k=!0,S=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var A=E.map.cameraPosition;void 0!==A&&A.setValue(he,B.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&E.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&E.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){E.setOptional(he,i,"bindMatrix"),E.setOptional(he,i,"bindMatrixInverse");var M=i.skeleton;M&&(z.floatVertexTextures?(null===M.boneTexture&&M.computeBoneTexture(),E.setValue(he,"boneTexture",M.boneTexture,q),E.setValue(he,"boneTextureSize",M.boneTextureSize)):E.setOptional(he,M,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||oe.update(i,n,r,y),(k||p.receiveShadow!==i.receiveShadow)&&(p.receiveShadow=i.receiveShadow,E.setValue(he,"receiveShadow",i.receiveShadow)),k&&(E.setValue(he,"toneMappingExposure",v.toneMappingExposure),p.needsLights&&De(C,S),a&&r.fog&&ee.refreshFogUniforms(C,a),ee.refreshMaterialUniforms(C,r,T,O,L),Ky.upload(he,p.uniformsList,C,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Ky.upload(he,p.uniformsList,C,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&E.setValue(he,"center",i.center),E.setValue(he,"modelViewMatrix",i.modelViewMatrix),E.setValue(he,"normalMatrix",i.normalMatrix),E.setValue(he,"modelMatrix",i.matrixWorld),y}function De(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Fe(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Oe.setAnimationLoop(ke),"undefined"!=typeof window&&Oe.setContext(window),this.setAnimationLoop=function(e){xe=e,me.setAnimationLoop(e),null===e?Oe.stop():Oe.start()},me.addEventListener("sessionstart",Se),me.addEventListener("sessionend",Ee),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){if(!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(f=ne.get(e,p.length)).init(),p.push(f),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(N),D=re.init(this.clippingPlanes,F=this.localClippingEnabled,t),(h=te.get(e,d.length)).init(),d.push(h),Te(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(C,A),!0===D&&re.beginShadows(),ie.render(f.state.shadowsArray,e,t),!0===D&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(h,e),f.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var n=t.cameras,r=0,i=n.length;r<i;r++){var a=n[r];Ce(h,e,a,a.viewport)}else Ce(h,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1),le.resetDefaultState(),_=-1,w=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){K.get(e.texture).__webglTexture=t,K.get(e.depthTexture).__webglTexture=n;var r=K.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){var n=K.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n;var r=!0;if(e){var i=K.get(e);void 0!==i.__useDefaultFramebuffer?(W.bindFramebuffer(36160,null),r=!1):void 0===i.__webglFramebuffer?q.setupRenderTarget(e):i.__hasExternalTextures&&q.rebindTextures(e,K.get(e.texture).__webglTexture,K.get(e.depthTexture).__webglTexture)}var a=null,o=!1,s=!1;if(e){var u=e.texture;(u.isDataTexture3D||u.isDataTexture2DArray)&&(s=!0);var c=K.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=c[t],o=!0):a=e.useRenderbuffer?K.get(e).__webglMultisampledFramebuffer:c,x.copy(e.viewport),k.copy(e.scissor),S=e.scissorTest}else x.copy(M).multiplyScalar(T).floor(),k.copy(j).multiplyScalar(T).floor(),S=P;var l=W.bindFramebuffer(36160,a);if(l&&z.drawBuffers&&r){var h=!1;if(e)if(e.isWebGLMultipleRenderTargets){var f=e.texture;if(R.length!==f.length||36064!==R[0]){for(var d=0,p=f.length;d<p;d++)R[d]=36064+d;R.length=f.length,h=!0}}else 1===R.length&&36064===R[0]||(R[0]=36064,R.length=1,h=!0);else 1===R.length&&1029===R[0]||(R[0]=1029,R.length=1,h=!0);h&&(z.isWebGL2?he.drawBuffers(R):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(R))}if(W.viewport(x),W.scissor(k),W.setScissorTest(S),o){var v=K.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,v.__webglTexture,n)}else if(s){var m=K.get(e.texture),w=t||0;he.framebufferTextureLayer(36160,36064,m.__webglTexture,n||0,w)}_=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){W.bindFramebuffer(36160,s);try{var u=e.texture,c=u.format,l=u.type;if(1023!==c&&ce.convert(c)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=1016===l&&(V.has("EXT_color_buffer_half_float")||z.isWebGL2&&V.has("EXT_color_buffer_float"));if(!(1009===l||ce.convert(l)===he.getParameter(35738)||1015===l&&(z.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,ce.convert(c),ce.convert(l),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var f=null!==b?K.get(b).__webglFramebuffer:null;W.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),o=ce.convert(t.format);z.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),q.setTexture2D(t,0),he.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=ce.convert(n.format),s=ce.convert(n.type);q.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,c=ce.convert(r.format),l=ce.convert(r.type);if(r.isDataTexture3D)q.setTexture3D(r,0),a=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),a=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);var h=he.getParameter(3314),f=he.getParameter(32878),d=he.getParameter(3316),p=he.getParameter(3315),m=he.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,g.width),he.pixelStorei(32878,g.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,c,l,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,c,g.data)):he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,c,l,g),he.pixelStorei(3314,h),he.pixelStorei(32878,f),he.pixelStorei(3316,d),he.pixelStorei(3315,p),he.pixelStorei(32877,m),0===i&&r.generateMipmaps&&he.generateMipmap(a),W.unbindTexture()}},this.initTexture=function(e){q.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,W.reset(),le.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Nb.prototype.isWebGLRenderer=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Nb).prototype.isWebGL1Renderer=!0,function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;Object(l.a)(this,e),this.name="",this.color=new Qv(t),this.density=n}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}().prototype.isFogExp2=!0,function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;Object(l.a)(this,e),this.name="",this.color=new Qv(t),this.near=n,this.far=r}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}().prototype.isFog=!0;var Bb=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Object(a.a)(e)})),e}return Object(h.a)(n,[{key:"copy",value:function(e,t){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(Pv);Bb.prototype.isScene=!0;var Hb=function(){function e(t,n){Object(l.a)(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=hp()}return Object(h.a)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=hp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=hp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();Hb.prototype.isInterleavedBuffer=!0;var Ub=new Mp,Vb=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(l.a)(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return Object(h.a)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Ub.x=this.getX(t),Ub.y=this.getY(t),Ub.z=this.getZ(t),Ub.applyMatrix4(e),this.setXYZ(t,Ub.x,Ub.y,Ub.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Ub.x=this.getX(t),Ub.y=this.getY(t),Ub.z=this.getZ(t),Ub.applyNormalMatrix(e),this.setXYZ(t,Ub.x,Ub.y,Ub.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Ub.x=this.getX(t),Ub.y=this.getY(t),Ub.z=this.getZ(t),Ub.transformDirection(e),this.setXYZ(t,Ub.x,Ub.y,Ub.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new nm(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();Vb.prototype.isInterleavedBufferAttribute=!0;var zb,Wb=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new Qv(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Gv);Wb.prototype.isSpriteMaterial=!0;var Gb=new Mp,Kb=new Mp,qb=new Mp,Xb=new mp,Yb=new mp,Zb=new sv,Jb=new Mp,Qb=new Mp,$b=new Mp,e_=new mp,t_=new mp,n_=new mp;function r_(e,t,n,r,i,a){Xb.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Yb.x=a*Xb.x-i*Xb.y,Yb.y=i*Xb.x+a*Xb.y):Yb.copy(Xb),e.copy(t),e.x+=Yb.x,e.y+=Yb.y,e.applyMatrix4(Zb)}(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;if(Object(l.a)(this,n),(r=t.call(this)).type="Sprite",void 0===zb){zb=new dm;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Hb(i,5);zb.setIndex([0,1,2,0,2,3]),zb.setAttribute("position",new Vb(a,3,0,!1)),zb.setAttribute("uv",new Vb(a,2,3,!1))}return r.geometry=zb,r.material=void 0!==e?e:new Wb,r.center=new mp(.5,.5),r}return Object(h.a)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Kb.setFromMatrixScale(this.matrixWorld),Zb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qb.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Kb.multiplyScalar(-qb.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;r_(Jb.set(-.5,-.5,0),qb,a,Kb,n,r),r_(Qb.set(.5,-.5,0),qb,a,Kb,n,r),r_($b.set(.5,.5,0),qb,a,Kb,n,r),e_.set(0,0),t_.set(1,0),n_.set(1,1);var o=e.ray.intersectTriangle(Jb,Qb,$b,!1,Gb);if(null!==o||(r_(Qb.set(-.5,.5,0),qb,a,Kb,n,r),t_.set(0,1),null!==(o=e.ray.intersectTriangle(Jb,$b,Qb,!1,Gb)))){var s=e.ray.origin.distanceTo(Gb);s<e.near||s>e.far||t.push({distance:s,point:Gb.clone(),uv:zv.getUV(Gb,Jb,Qb,$b,e_,t_,n_,new mp),face:null,object:this})}}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n})(Pv).prototype.isSprite=!0;var i_=new Mp,a_=new Op,o_=new Op,s_=new Mp,u_=new sv,c_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new sv,i.bindMatrixInverse=new sv,i}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Op,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;a_.fromBufferAttribute(r.attributes.skinIndex,e),o_.fromBufferAttribute(r.attributes.skinWeight,e),i_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=o_.getComponent(i);if(0!==a){var o=a_.getComponent(i);u_.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(s_.copy(i_).applyMatrix4(u_),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(jm);c_.prototype.isSkinnedMesh=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).type="Bone",e}return n}(Pv).prototype.isBone=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,p=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return Object(l.a)(this,n),(e=t.call(this,null,u,c,h,f,d,o,s,p,v)).image={data:r,width:i,height:a},e.magFilter=f,e.minFilter=d,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Sp).prototype.isDataTexture=!0;var l_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(l.a)(this,n),"number"==typeof i&&(o=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(a=t.call(this,e,r,i)).meshPerAttribute=o,a}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(nm);l_.prototype.isInstancedBufferAttribute=!0;var h_=new sv,f_=new sv,d_=[],p_=new jm;(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e,r)).instanceMatrix=new l_(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1,a}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(p_.geometry=this.geometry,p_.material=this.material,void 0!==p_.material)for(var i=0;i<r;i++){this.getMatrixAt(i,h_),f_.multiplyMatrices(n,h_),p_.matrixWorld=f_,p_.raycast(e,d_);for(var a=0,o=d_.length;a<o;a++){var s=d_[a];s.instanceId=i,s.object=this,t.push(s)}d_.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new l_(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n})(jm).prototype.isInstancedMesh=!0;var v_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new Qv(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(Gv);v_.prototype.isLineBasicMaterial=!0;var m_=new Mp,g_=new Mp,y_=new sv,b_=new ov,__=new Qp,w_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dm,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v_;return Object(l.a)(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)m_.fromBufferAttribute(t,r-1),g_.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=m_.distanceTo(g_);e.setAttribute("lineDistance",new am(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),__.copy(n.boundingSphere),__.applyMatrix4(r),__.radius+=i,!1!==e.ray.intersectsSphere(__)){y_.copy(r).invert(),b_.copy(e.ray).applyMatrix4(y_);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new Mp,c=new Mp,l=new Mp,h=new Mp,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count)-1;v<m;v+=f){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),c.fromBufferAttribute(p,y),!(b_.distanceSqToSegment(u,c,h,l)>s)){h.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:l.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var _=Math.max(0,a.start),w=Math.min(p.count,a.start+a.count)-1;_<w;_+=f)if(u.fromBufferAttribute(p,_),c.fromBufferAttribute(p,_+1),!(b_.distanceSqToSegment(u,c,h,l)>s)){h.applyMatrix4(this.matrixWorld);var x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Pv);w_.prototype.isLine=!0;var x_=new Mp,k_=new Mp,S_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="LineSegments",i}return Object(h.a)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)x_.fromBufferAttribute(t,r),k_.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+x_.distanceTo(k_);e.setAttribute("lineDistance",new am(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(w_);S_.prototype.isLineSegments=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="LineLoop",i}return n}(w_).prototype.isLineLoop=!0;var E_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new Qv(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Gv);E_.prototype.isPointsMaterial=!0;var O_=new sv,T_=new ov,C_=new Qp,A_=new Mp;function M_(e,t,n,r,i,a,o){var s=T_.distanceSqToPoint(e);if(s<n){var u=new Mp;T_.closestPointToPoint(e,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new dm,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E_;return Object(l.a)(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),C_.copy(n.boundingSphere),C_.applyMatrix4(r),C_.radius+=i,!1!==e.ray.intersectsSphere(C_)){O_.copy(r).invert(),T_.copy(e.ray).applyMatrix4(O_);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var u=n.index,c=n.attributes.position;if(null!==u)for(var l=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);l<h;l++){var f=u.getX(l);A_.fromBufferAttribute(c,f),M_(A_,f,s,r,e,t,this)}else for(var d=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);d<p;d++)A_.fromBufferAttribute(c,d),M_(A_,d,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n})(Pv).prototype.isPoints=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,o,s,u,c,h,f){var d;Object(l.a)(this,n),(d=t.call(this,e,r,i,o,s,u,c,h,f)).format=void 0!==c?c:1022,d.minFilter=void 0!==u?u:1006,d.magFilter=void 0!==s?s:1006,d.generateMipmaps=!1;var p=Object(a.a)(d);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){p.needsUpdate=!0,e.requestVideoFrameCallback(t)})),d}return Object(h.a)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;0=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Sp).prototype.isVideoTexture=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s,u,c,h,f,d,p){var v;return Object(l.a)(this,n),(v=t.call(this,null,s,u,c,h,f,a,o,d,p)).image={width:r,height:i},v.mipmaps=e,v.flipY=!1,v.generateMipmaps=!1,v}return n}(Sp).prototype.isCompressedTexture=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s,u,c,h){var f;return Object(l.a)(this,n),(f=t.call(this,e,r,i,a,o,s,u,c,h)).needsUpdate=!0,f}return n}(Sp).prototype.isCanvasTexture=!0,new Mp,new Mp,new Mp,new zv;var j_=function(){function e(){Object(l.a)(this,e),this.type="Curve",this.arcLengthDivisions=200}return Object(h.a)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(a-1)}},{key:"getTangent",value:function(e,t){var n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),a=this.getPoint(r),o=t||(i.isVector2?new mp:new Mp);return o.copy(a).sub(i).normalize(),o}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Mp,r=[],i=[],a=[],o=new Mp,s=new sv,u=0;u<=e;u++)r[u]=this.getTangentAt(u/e,new Mp);i[0]=new Mp,a[0]=new Mp;var c=Number.MAX_VALUE,l=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var d=1;d<=e;d++){if(i[d]=i[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();var p=Math.acos(fp(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(o,p))}a[d].crossVectors(r[d],i[d])}if(!0===t){var v=Math.acos(fp(i[0].dot(i[e]),-1,1));v/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(v=-v);for(var m=1;m<=e;m++)i[m].applyMatrix4(s.makeRotationAxis(r[m],v*m)),a[m].crossVectors(r[m],i[m])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),P_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return Object(l.a)(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=c,e.aRotation=h,e}return Object(h.a)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new mp,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*c-f*l+this.aX,u=h*l+f*c+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(j_);P_.prototype.isEllipseCurve=!0;var R_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a,o,s){var u;return Object(l.a)(this,n),(u=t.call(this,e,r,i,i,a,o,s)).type="ArcCurve",u}return n}(P_);function I_(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,c*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}R_.prototype.isArcCurve=!0;var D_=new Mp,F_=new I_,L_=new I_,N_=new I_,B_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return Object(l.a)(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,u=Math.floor(s),c=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===c&&u===o-1&&(u=o-2,c=1),this.closed||u>0?t=a[(u-1)%o]:(D_.subVectors(a[0],a[1]).add(a[0]),t=D_);var l=a[u%o],h=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(D_.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=D_),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(l),f),p=Math.pow(l.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(n),f);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),F_.initNonuniformCatmullRom(t.x,l.x,h.x,n.x,d,p,v),L_.initNonuniformCatmullRom(t.y,l.y,h.y,n.y,d,p,v),N_.initNonuniformCatmullRom(t.z,l.z,h.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(F_.initCatmullRom(t.x,l.x,h.x,n.x,this.tension),L_.initCatmullRom(t.y,l.y,h.y,n.y,this.tension),N_.initCatmullRom(t.z,l.z,h.z,n.z,this.tension));return i.set(F_.calc(c),L_.calc(c),N_.calc(c)),i}},{key:"copy",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Mp).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(j_);function H_(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function U_(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function V_(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}B_.prototype.isCatmullRomCurve3=!0;var z_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mp,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new mp;return Object(l.a)(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(V_(e,r.x,i.x,a.x,o.x),V_(e,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(j_);z_.prototype.isCubicBezierCurve=!0;var W_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mp,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Mp;return Object(l.a)(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(V_(e,r.x,i.x,a.x,o.x),V_(e,r.y,i.y,a.y,o.y),V_(e,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(j_);W_.prototype.isCubicBezierCurve3=!0;var G_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp;return Object(l.a)(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=i,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new mp;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(j_);G_.prototype.isLineCurve=!0;var K_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp;return Object(l.a)(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=i,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(j_),q_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mp;return Object(l.a)(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(U_(e,r.x,i.x,a.x),U_(e,r.y,i.y,a.y)),n}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(j_);q_.prototype.isQuadraticBezierCurve=!0;var X_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mp;return Object(l.a)(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(U_(e,r.x,i.x,a.x),U_(e,r.y,i.y,a.y),U_(e,r.z,i.z,a.z)),n}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(j_);X_.prototype.isQuadraticBezierCurve3=!0;var Y_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(l.a)(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return Object(h.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],l=r[a>r.length-3?r.length-1:a+2];return n.set(H_(o,s.x,u.x,c.x,l.x),H_(o,s.y,u.y,c.y,l.y)),n}},{key:"copy",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}},{key:"fromJSON",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new mp).fromArray(i))}return this}}]),n}(j_);Y_.prototype.isSplineCurve=!0;var Z_=Object.freeze({__proto__:null,ArcCurve:R_,CatmullRomCurve3:B_,CubicBezierCurve:z_,CubicBezierCurve3:W_,EllipseCurve:P_,LineCurve:G_,LineCurve3:K_,QuadraticBezierCurve:q_,QuadraticBezierCurve3:X_,SplineCurve:Y_}),J_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new mp,e&&r.setFromPoints(e),r}return Object(h.a)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new G_(this.currentPoint.clone(),new mp(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new q_(this.currentPoint.clone(),new mp(e,t),new mp(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new z_(this.currentPoint.clone(),new mp(e,t),new mp(n,r),new mp(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Y_(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new P_(e,t,n,r,i,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return Object(h.a)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new G_(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength();return o.getPointAt(0===s?0:1-a/s,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}},{key:"fromJSON",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new Z_[i.type]).fromJSON(i))}return this}}]),n}(j_)),Q_=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).uuid=hp(),r.type="Shape",r.holes=[],r}return Object(h.a)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}},{key:"fromJSON",value:function(e){Object(Be.a)(Object(He.a)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new J_).fromJSON(i))}return this}}]),n}(J_);function $_(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=ww(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=ww(a,e[a],e[a+1],o);return o&&vw(o,o.next)&&(xw(o),o=o.next),o}function ew(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!vw(r,r.next)&&0!==pw(r.prev,r,r.next))r=r.next;else{if(xw(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function tw(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=lw(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?rw(e,r,i,a):nw(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),xw(e),e=u.next,c=u.next;else if((e=u)===c){o?1===o?tw(e=iw(ew(e),t,n),t,n,r,i,a,2):2===o&&aw(e,t,n,r,i,a):tw(ew(e),t,n,r,i,a,1);break}}}function nw(e){var t=e.prev,n=e,r=e.next;if(pw(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(fw(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&pw(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function rw(e,t,n,r){var i=e.prev,a=e,o=e.next;if(pw(i,a,o)>=0)return!1;for(var s=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,c=lw(i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,t,n,r),l=lw(s,u,t,n,r),h=e.prevZ,f=e.nextZ;h&&h.z>=c&&f&&f.z<=l;){if(h!==e.prev&&h!==e.next&&fw(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&pw(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&fw(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&pw(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&fw(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&pw(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=l;){if(f!==e.prev&&f!==e.next&&fw(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&pw(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function iw(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!vw(i,a)&&mw(i,r,r.next,a)&&bw(i,a)&&bw(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),xw(r),xw(r.next),r=e=a),r=r.next}while(r!==e);return ew(r)}function aw(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&dw(o,s)){var u=_w(o,s);return o=ew(o,o.next),u=ew(u,u.next),tw(o,t,n,r,i,a),void tw(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function ow(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=$_(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(hw(o));for(s.sort(sw),i=0;i<s.length;i++)uw(s[i],n),n=ew(n,n.next);return n}function sw(e,t){return e.x-t.x}function uw(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,c=n,l=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&fw(a<h?i:o,a,l,h,a<h?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),bw(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&cw(n,r)))&&(n=r,f=u)),r=r.next}while(r!==c);return n}(e,t)){var n=_w(t,e);ew(t,t.next),ew(n,n.next)}}function cw(e,t){return pw(e.prev,e,t.prev)<0&&pw(t.next,e,e.next)<0}function lw(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hw(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function fw(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function dw(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&mw(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(bw(e,t)&&bw(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(pw(e.prev,e,t.prev)||pw(e,t.prev,t))||vw(e,t)&&pw(e.prev,e,e.next)>0&&pw(t.prev,t,t.next)>0)}function pw(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function vw(e,t){return e.x===t.x&&e.y===t.y}function mw(e,t,n,r){var i=yw(pw(e,t,n)),a=yw(pw(e,t,r)),o=yw(pw(n,r,e)),s=yw(pw(n,r,t));return i!==a&&o!==s||!(0!==i||!gw(e,n,t))||!(0!==a||!gw(e,r,t))||!(0!==o||!gw(n,e,r))||!(0!==s||!gw(n,t,r))}function gw(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function yw(e){return e>0?1:e<0?-1:0}function bw(e,t){return pw(e.prev,e,e.next)<0?pw(e,t,e.next)>=0&&pw(e,e.prev,t)>=0:pw(e,t,e.prev)<0||pw(e,e.next,t)<0}function _w(e,t){var n=new kw(e.i,e.x,e.y),r=new kw(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function ww(e,t,n,r){var i=new kw(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function xw(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function kw(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Sw=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];Ew(e),Ow(n,e);var a=e.length;t.forEach(Ew);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Ow(n,t[o]);for(var s=function(e,t){var n,r,i,a,o,s,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,l=t&&t.length,h=l?t[0]*c:e.length,f=$_(e,0,h,c,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=ow(e,t,f,c)),e.length>80*c){n=i=e[0],r=a=e[1];for(var p=c;p<h;p+=c)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?1/u:0}return tw(f,d,c,n,r,u),d}(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function Ew(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ow(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Tw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Q_([new mp(.5,.5),new mp(-.5,.5),new mp(-.5,-.5),new mp(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.a)(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var o=Object(a.a)(e),s=[],u=[],c=0,h=r.length;c<h;c++){var f=r[c];d(f)}function d(e){var t=[],n=void 0!==i.curveSegments?i.curveSegments:12,r=void 0!==i.steps?i.steps:1,a=void 0!==i.depth?i.depth:1,c=void 0===i.bevelEnabled||i.bevelEnabled,l=void 0!==i.bevelThickness?i.bevelThickness:.2,h=void 0!==i.bevelSize?i.bevelSize:l-.1,f=void 0!==i.bevelOffset?i.bevelOffset:0,d=void 0!==i.bevelSegments?i.bevelSegments:3,p=i.extrudePath,v=void 0!==i.UVGenerator?i.UVGenerator:Cw;void 0!==i.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),a=i.amount);var m,g,y,b,_,w=!1;p&&(m=p.getSpacedPoints(r),w=!0,c=!1,g=p.computeFrenetFrames(r,!1),y=new Mp,b=new Mp,_=new Mp),c||(d=0,l=0,h=0,f=0);var x=e.extractPoints(n),k=x.shape,S=x.holes;if(!Sw.isClockWise(k)){k=k.reverse();for(var E=0,O=S.length;E<O;E++){var T=S[E];Sw.isClockWise(T)&&(S[E]=T.reverse())}}for(var C=Sw.triangulateShape(k,S),A=k,M=0,j=S.length;M<j;M++)k=k.concat(S[M]);function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var R=k.length,I=C.length;function D(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=o*o+s*s;if(Math.abs(o*c-s*u)>Number.EPSILON){var h=Math.sqrt(l),f=Math.sqrt(u*u+c*c),d=t.x-s/h,p=t.y+o/h,v=((n.x-c/f-d)*c-(n.y+u/f-p)*u)/(o*c-s*u),m=(r=d+o*v-e.x)*r+(i=p+s*v-e.y)*i;if(m<=2)return new mp(r,i);a=Math.sqrt(m/2)}else{var g=!1;o>Number.EPSILON?u>Number.EPSILON&&(g=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(c)&&(g=!0),g?(r=-s,i=o,a=Math.sqrt(l)):(r=o,i=s,a=Math.sqrt(l/2))}return new mp(r/a,i/a)}for(var F=[],L=0,N=A.length,B=N-1,H=L+1;L<N;L++,B++,H++)B===N&&(B=0),H===N&&(H=0),F[L]=D(A[L],A[B],A[H]);for(var U,V=[],z=F.concat(),W=0,G=S.length;W<G;W++){var K=S[W];U=[];for(var q=0,X=K.length,Y=X-1,Z=q+1;q<X;q++,Y++,Z++)Y===X&&(Y=0),Z===X&&(Z=0),U[q]=D(K[q],K[Y],K[Z]);V.push(U),z=z.concat(U)}for(var J=0;J<d;J++){for(var Q=J/d,$=l*Math.cos(Q*Math.PI/2),ee=h*Math.sin(Q*Math.PI/2)+f,te=0,ne=A.length;te<ne;te++){var re=P(A[te],F[te],ee);Me(re.x,re.y,-$)}for(var ie=0,ae=S.length;ie<ae;ie++){var oe=S[ie];U=V[ie];for(var se=0,ue=oe.length;se<ue;se++){var ce=P(oe[se],U[se],ee);Me(ce.x,ce.y,-$)}}}for(var le=h+f,he=0;he<R;he++){var fe=c?P(k[he],z[he],le):k[he];w?(b.copy(g.normals[0]).multiplyScalar(fe.x),y.copy(g.binormals[0]).multiplyScalar(fe.y),_.copy(m[0]).add(b).add(y),Me(_.x,_.y,_.z)):Me(fe.x,fe.y,0)}for(var de=1;de<=r;de++)for(var pe=0;pe<R;pe++){var ve=c?P(k[pe],z[pe],le):k[pe];w?(b.copy(g.normals[de]).multiplyScalar(ve.x),y.copy(g.binormals[de]).multiplyScalar(ve.y),_.copy(m[de]).add(b).add(y),Me(_.x,_.y,_.z)):Me(ve.x,ve.y,a/r*de)}for(var me=d-1;me>=0;me--){for(var ge=me/d,ye=l*Math.cos(ge*Math.PI/2),be=h*Math.sin(ge*Math.PI/2)+f,_e=0,we=A.length;_e<we;_e++){var xe=P(A[_e],F[_e],be);Me(xe.x,xe.y,a+ye)}for(var ke=0,Se=S.length;ke<Se;ke++){var Ee=S[ke];U=V[ke];for(var Oe=0,Te=Ee.length;Oe<Te;Oe++){var Ce=P(Ee[Oe],U[Oe],be);w?Me(Ce.x,Ce.y+m[r-1].y,m[r-1].x+ye):Me(Ce.x,Ce.y,a+ye)}}}function Ae(e,t){for(var n=e.length;--n>=0;){var i=n,a=n-1;a<0&&(a=e.length-1);for(var o=0,s=r+2*d;o<s;o++){var u=R*o,c=R*(o+1);Pe(t+i+u,t+a+u,t+a+c,t+i+c)}}}function Me(e,n,r){t.push(e),t.push(n),t.push(r)}function je(e,t,n){Re(e),Re(t),Re(n);var r=s.length/3,i=v.generateTopUV(o,s,r-3,r-2,r-1);Ie(i[0]),Ie(i[1]),Ie(i[2])}function Pe(e,t,n,r){Re(e),Re(t),Re(r),Re(t),Re(n),Re(r);var i=s.length/3,a=v.generateSideWallUV(o,s,i-6,i-3,i-2,i-1);Ie(a[0]),Ie(a[1]),Ie(a[3]),Ie(a[1]),Ie(a[2]),Ie(a[3])}function Re(e){s.push(t[3*e+0]),s.push(t[3*e+1]),s.push(t[3*e+2])}function Ie(e){u.push(e.x),u.push(e.y)}!function(){var e=s.length/3;if(c){for(var t=0,n=R*t,i=0;i<I;i++){var a=C[i];je(a[2]+n,a[1]+n,a[0]+n)}n=R*(t=r+2*d);for(var u=0;u<I;u++){var l=C[u];je(l[0]+n,l[1]+n,l[2]+n)}}else{for(var h=0;h<I;h++){var f=C[h];je(f[2],f[1],f[0])}for(var p=0;p<I;p++){var v=C[p];je(v[0]+R*r,v[1]+R*r,v[2]+R*r)}}o.addGroup(e,s.length/3-e,0)}(),function(){var e=s.length/3,t=0;Ae(A,t),t+=A.length;for(var n=0,r=S.length;n<r;n++){var i=S[n];Ae(i,t),t+=i.length}o.addGroup(e,s.length/3-e,1)}()}return e.setAttribute("position",new am(s,3)),e.setAttribute("uv",new am(u,2)),e.computeVertexNormals(),e}return Object(h.a)(n,[{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++)n.shapes.push(e[r].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++)r.push(t[e.shapes[i]]);var o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new Z_[o.type]).fromJSON(o)),new n(r,e.options)}}]),n}(dm),Cw={generateTopUV:function(e,t,n,r,i){var a=t[3*r],o=t[3*r+1],s=t[3*i],u=t[3*i+1];return[new mp(t[3*n],t[3*n+1]),new mp(a,o),new mp(s,u)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-l)<Math.abs(o-c)?[new mp(o,1-u),new mp(c,1-h),new mp(f,1-p),new mp(v,1-g)]:[new mp(s,1-u),new mp(l,1-h),new mp(d,1-p),new mp(m,1-g)]}},Aw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Q_([new mp(0,.5),new mp(-.5,-.5),new mp(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;Object(l.a)(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],u=[],c=0,h=0;if(!1===Array.isArray(r))d(r);else for(var f=0;f<r.length;f++)d(r[f]),e.addGroup(c,h,f),c+=h,h=0;function d(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,c=n.holes;!1===Sw.isClockWise(r)&&(r=r.reverse());for(var l=0,f=c.length;l<f;l++){var d=c[l];!0===Sw.isClockWise(d)&&(c[l]=d.reverse())}for(var p=Sw.triangulateShape(r,c),v=0,m=c.length;v<m;v++)r=r.concat(c[v]);for(var g=0,y=r.length;g<y;g++){var b=r[g];o.push(b.x,b.y,0),s.push(0,0,1),u.push(b.x,b.y)}for(var _=0,w=p.length;_<w;_++){var x=p[_];a.push(x[0]+t,x[1]+t,x[2]+t),h+=3}}return e.setIndex(a),e.setAttribute("position",new am(o,3)),e.setAttribute("normal",new am(s,3)),e.setAttribute("uv",new am(u,2)),e}return Object(h.a)(n,[{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++)r.push(t[e.shapes[i]]);return new n(r,e.curveSegments)}}]),n}(dm);(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new Qv(0),r.transparent=!0,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n})(Gv).prototype.isShadowMaterial=!0;var Mw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new Qv(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Qv(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new mp(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Gv);Mw.prototype.isMeshStandardMaterial=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new mp(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(Object(a.a)(r),"reflectivity",{get:function(){return fp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenColor=new Qv(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new Qv(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new Qv(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return Object(h.a)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(Mw).prototype.isMeshPhysicalMaterial=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new Qv(16777215),r.specular=new Qv(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Qv(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new mp(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Gv).prototype.isMeshPhongMaterial=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new Qv(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Qv(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new mp(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Gv).prototype.isMeshToonMaterial=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new mp(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Gv).prototype.isMeshNormalMaterial=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new Qv(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Qv(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Gv).prototype.isMeshLambertMaterial=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new Qv(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new mp(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(Gv).prototype.isMeshMatcapMaterial=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(v_).prototype.isLineDashedMaterial=!0;var jw={arraySlice:function(e,t,n){return jw.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],c=u.getValueSize(),l=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){l.push(u.times[f]);for(var p=0;p<c;++p)h.push(u.values[f*c+p])}}0!==l.length&&(u.times=jw.convertArray(l,u.times.constructor),u.values=jw.convertArray(h,u.values.constructor),o.push(u))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var c=0,l=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);var h=r.times.length-1,f=void 0;if(a<=r.times[0])f=jw.arraySlice(r.values,s,u-s);else if(a>=r.times[h]){var d=h*u+s;f=jw.arraySlice(r.values,d,d+u-s)}else{var p=r.createInterpolant(),v=s,m=u-s;p.evaluate(a),f=jw.arraySlice(p.resultBuffer,v,m)}"quaternion"===i&&(new Ap).fromArray(f).normalize().conjugate().toArray(f);for(var g=o.times.length,y=0;y<g;++y){var b=y*l+c;if("quaternion"===i)Ap.multiplyQuaternionsFlat(o.values,b,f,0,o.values,b);else for(var _=l-2*c,w=0;w<_;++w)o.values[b+w]-=f[w]}},s=0;s<i;++s)o(s);return e.blendMode=2501,e}},Pw=function(){function e(t,n,r,i){Object(l.a)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return Object(h.a)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();Pw.prototype.beforeStart_=Pw.prototype.copySampleValue_,Pw.prototype.afterEnd_=Pw.prototype.copySampleValue_;var Rw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:2400,endingEnd:2400},o}return Object(h.a)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=e,o=2*t-n;break;case 2402:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*n-t;break;case 2402:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*v+(1.5+f)*p+.5*d,b=f*v-f*p,_=0;_!==o;++_)i[_]=m*a[c+_]+g*a[u+_]+y*a[s+_]+b*a[l+_];return i}}]),n}(Pw),Iw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){return Object(l.a)(this,n),t.call(this,e,r,i,a)}return Object(h.a)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,c=(n-t)/(r-t),l=1-c,h=0;h!==o;++h)i[h]=a[u+h]*l+a[s+h]*c;return i}}]),n}(Pw),Dw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){return Object(l.a)(this,n),t.call(this,e,r,i,a)}return Object(h.a)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Pw),Fw=function(){function e(t,n,r,i){if(Object(l.a)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=jw.convertArray(n,this.TimeBufferType),this.values=jw.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return Object(h.a)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Dw(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Iw(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Rw(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=jw.arraySlice(n,i,a),this.values=jw.arraySlice(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&jw.isTypedArray(r))for(var u=0,c=r.length;u!==c;++u){var l=r[u];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,l),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=jw.arraySlice(this.times),t=jw.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var c=o*n,l=c-n,h=c+n,f=0;f!==n;++f){var d=t[c+f];if(d!==t[l+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[g+b];++a}return a!==e.length?(this.times=jw.arraySlice(e,0,a),this.values=jw.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=jw.arraySlice(this.times,0),t=jw.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:jw.convertArray(e.times,Array),values:jw.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Fw.prototype.TimeBufferType=Float32Array,Fw.prototype.ValueBufferType=Float32Array,Fw.prototype.DefaultInterpolation=2301;var Lw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Fw);Lw.prototype.ValueTypeName="bool",Lw.prototype.ValueBufferType=Array,Lw.prototype.DefaultInterpolation=2300,Lw.prototype.InterpolantFactoryMethodLinear=void 0,Lw.prototype.InterpolantFactoryMethodSmooth=void 0;var Nw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Fw);Nw.prototype.ValueTypeName="color";var Bw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Fw);Bw.prototype.ValueTypeName="number";var Hw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,a){return Object(l.a)(this,n),t.call(this,e,r,i,a)}return Object(h.a)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,c=u+o;u!==c;u+=4)Ap.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(Pw),Uw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Hw(this.times,this.values,this.getValueSize(),e)}}]),n}(Fw);Uw.prototype.ValueTypeName="quaternion",Uw.prototype.DefaultInterpolation=2301,Uw.prototype.InterpolantFactoryMethodSmooth=void 0;var Vw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Fw);Vw.prototype.ValueTypeName="string",Vw.prototype.ValueBufferType=Array,Vw.prototype.DefaultInterpolation=2300,Vw.prototype.InterpolantFactoryMethodLinear=void 0,Vw.prototype.InterpolantFactoryMethodSmooth=void 0;var zw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return n}(Fw);zw.prototype.ValueTypeName="vector";var Ww=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;Object(l.a)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=hp(),this.duration<0&&this.resetDuration()}return Object(h.a)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Gw(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Fw.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var c=jw.getKeyframeOrder(s);s=jw.sortedArray(s,1,c),u=jw.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Bw(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];jw.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],c=0;c<u.length;c++){var l=u[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){var h={},f=void 0;for(f=0;f<l.length;f++)if(l[f].morphTargets)for(var d=0;d<l[f].morphTargets.length;d++)h[l[f].morphTargets[d]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==l[f].morphTargets.length;++g){var y=l[f];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new Bw(".morphTargetInfluence["+p+"]",v,m))}s=h.length*(a||1)}else{var b=".bones["+t[c].name+"]";n(zw,b+".position",l,"pos",r),n(Uw,b+".quaternion",l,"rot",r),n(zw,b+".scale",l,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function Gw(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bw;case"vector":case"vector2":case"vector3":case"vector4":return zw;case"color":return Nw;case"quaternion":return Uw;case"bool":case"boolean":return Lw;case"string":return Vw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];jw.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Kw={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},qw=new function e(t,n,r){Object(l.a)(this,e);var i=this,a=!1,o=0,s=0,u=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],i=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}},Xw=function(){function e(t){Object(l.a)(this,e),this.manager=void 0!==t?t:qw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return Object(h.a)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Yw={},Zw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=Kw.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===Yw[e]){Yw[e]=[],Yw[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then((function(t){if(200===t.status||0===t.status){0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");var n=Yw[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0;return new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.value;if(r.done)e.close();else{for(var u=new ProgressEvent("progress",{lengthComputable:o,loaded:s+=i.byteLength,total:a}),c=0,l=n.length;c<l;c++){var h=n[c];h.onProgress&&h.onProgress(u)}e.enqueue(i),t()}}))}()}})}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((function(e){var t=new Response(e);switch(i.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((function(e){return(new DOMParser).parseFromString(e,i.mimeType)}));case"json":return t.json();default:return t.text()}})).then((function(t){Kw.add(e,t);var n=Yw[e];delete Yw[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onLoad&&o.onLoad(t)}i.manager.itemEnd(e)})).catch((function(t){var n=Yw[e];delete Yw[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)})),this.manager.itemStart(e)}else Yw[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Xw),Jw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Kw.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=_p("img");function s(){c(),Kw.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(Xw),Qw=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"load",value:function(e,t,n,r){var i=new Um,a=new Jw(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(Xw),$w=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"load",value:function(e,t,n,r){var i=new Sp,a=new Jw(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(Xw),ex=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(l.a)(this,n),(r=t.call(this)).type="Light",r.color=new Qv(e),r.intensity=i,r}return Object(h.a)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Pv);ex.prototype.isLight=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var a;return Object(l.a)(this,n),(a=t.call(this,e,i)).type="HemisphereLight",a.position.copy(Pv.DefaultUp),a.updateMatrix(),a.groundColor=new Qv(r),a}return Object(h.a)(n,[{key:"copy",value:function(e){return ex.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(ex).prototype.isHemisphereLight=!0;var tx=new sv,nx=new Mp,rx=new Mp,ix=function(){function e(t){Object(l.a)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mp(512,512),this.map=null,this.mapPass=null,this.matrix=new sv,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ym,this._frameExtents=new mp(1,1),this._viewportCount=1,this._viewports=[new Op(0,0,1,1)]}return Object(h.a)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;nx.setFromMatrixPosition(e.matrixWorld),t.position.copy(nx),rx.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(rx),t.updateMatrixWorld(),tx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),ax=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,new Bm(50,1,.5,500))).focus=1,e}return Object(h.a)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*lp*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),Object(Be.a)(Object(He.a)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(ix);ax.prototype.isSpotLightShadow=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="SpotLight",i.position.copy(Pv.DefaultUp),i.updateMatrix(),i.target=new Pv,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.shadow=new ax,i}return Object(h.a)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(ex).prototype.isSpotLight=!0;var ox=new sv,sx=new Mp,ux=new Mp,cx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,new Bm(90,1,.5,500)))._frameExtents=new mp(4,2),e._viewportCount=6,e._viewports=[new Op(2,1,1,1),new Op(0,1,1,1),new Op(3,1,1,1),new Op(1,1,1,1),new Op(3,0,1,1),new Op(1,0,1,1)],e._cubeDirections=[new Mp(1,0,0),new Mp(-1,0,0),new Mp(0,0,1),new Mp(0,0,-1),new Mp(0,1,0),new Mp(0,-1,0)],e._cubeUps=[new Mp(0,1,0),new Mp(0,1,0),new Mp(0,1,0),new Mp(0,1,0),new Mp(0,0,1),new Mp(0,0,-1)],e}return Object(h.a)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),sx.setFromMatrixPosition(e.matrixWorld),n.position.copy(sx),ux.copy(n.position),ux.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ux),n.updateMatrixWorld(),r.makeTranslation(-sx.x,-sx.y,-sx.z),ox.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ox)}}]),n}(ix);cx.prototype.isPointLightShadow=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="PointLight",i.distance=a,i.decay=o,i.shadow=new cx,i}return Object(h.a)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(ex).prototype.isPointLight=!0;var lx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(l.a)(this,n),t.call(this,new ug(-5,5,5,-5,.5,500))}return n}(ix);lx.prototype.isDirectionalLightShadow=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="DirectionalLight",i.position.copy(Pv.DefaultUp),i.updateMatrix(),i.target=new Pv,i.shadow=new lx,i}return Object(h.a)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(ex).prototype.isDirectionalLight=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="AmbientLight",i}return n}(ex).prototype.isAmbientLight=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Object(l.a)(this,n),(i=t.call(this,e,r)).type="RectAreaLight",i.width=a,i.height=o,i}return Object(h.a)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(ex).prototype.isRectAreaLight=!0;var hx=function(){function e(){Object(l.a)(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Mp)}return Object(h.a)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();hx.prototype.isSphericalHarmonics3=!0;var fx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hx,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(l.a)(this,n),(e=t.call(this,void 0,i)).sh=r,e}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(ex);fx.prototype.isLightProbe=!0;var dx,px=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}();(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n})(dm).prototype.isInstancedBufferGeometry=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),r=t.call(this,e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return Object(h.a)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Kw.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Kw.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(Xw).prototype.isImageBitmapLoader=!0;var vx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Zw(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);(void 0===dx&&(dx=new(window.AudioContext||window.webkitAudioContext)),dx).decodeAudioData(a,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}]),n}(Xw);(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(l.a)(this,n),i=t.call(this,void 0,a);var o=(new Qv).set(e),s=(new Qv).set(r),u=new Mp(o.r,o.g,o.b),c=new Mp(s.r,s.g,s.b),h=Math.sqrt(Math.PI),f=h*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(c).multiplyScalar(h),i.sh.coefficients[1].copy(u).sub(c).multiplyScalar(f),i}return n})(fx).prototype.isHemisphereLightProbe=!0,function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(l.a)(this,n),r=t.call(this,void 0,i);var a=(new Qv).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return n}(fx).prototype.isAmbientLightProbe=!0;var mx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return Object(h.a)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Pv),gx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;Object(l.a)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return Object(h.a)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),yx=function(){function e(t,n,r){var i,a,o;switch(Object(l.a)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return Object(h.a)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else this._mixBufferRegion(n,i,0,t/(a+=t),r);this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1&&this._mixBufferRegion(n,r,t*this._origIndex,1-i,t),a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.buffer,t=this.valueSize,n=t*this._origIndex;this.binding.getValue(e,n);for(var r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){Ap.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;Ap.multiplyQuaternionsFlat(e,a,e,t,e,n),Ap.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),bx=new RegExp("[\\[\\]\\.:\\/]","g"),_x="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",wx=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),xx=/(WCOD+)?/.source.replace("WCOD",_x),kx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Sx=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Ex=new RegExp("^"+wx+xx+kx+Sx+"$"),Ox=["material","materials","bones"],Tx=function(){function e(t,n,r){Object(l.a)(this,e);var i=r||Cx.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return Object(h.a)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),Cx=function(){function e(t,n,r){Object(l.a)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return Object(h.a)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(l=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+i+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(bx,"")}},{key:"parseTrackName",value:function(e){var t=Ex.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Ox.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();Cx.Composite=Tx,Cx.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Cx.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Cx.prototype.GetterByBindingType=[Cx.prototype._getValue_direct,Cx.prototype._getValue_array,Cx.prototype._getValue_arrayElement,Cx.prototype._getValue_toArray],Cx.prototype.SetterByBindingTypeAndVersioning=[[Cx.prototype._setValue_direct,Cx.prototype._setValue_direct_setNeedsUpdate,Cx.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cx.prototype._setValue_array,Cx.prototype._setValue_array_setNeedsUpdate,Cx.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cx.prototype._setValue_arrayElement,Cx.prototype._setValue_arrayElement_setNeedsUpdate,Cx.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cx.prototype._setValue_fromArray,Cx.prototype._setValue_fromArray_setNeedsUpdate,Cx.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],function(){function e(){Object(l.a)(this,e),this.uuid=hp(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return Object(h.a)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,v=a;p!==v;++p)i[p].push(new Cx(h,n[p],r[p]))}else if(d<u){o=e[d];var m=--u,g=e[m];t[g.uuid]=d,e[d]=g,t[f]=m,e[m]=h;for(var y=0,b=a;y!==b;++y){var _=i[y],w=_[m],x=_[d];_[d]=w,void 0===x&&(x=new Cx(h,n[y],r[y])),_[m]=x}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=t[u];if(void 0!==c&&c>=i){var l=i++,h=e[l];t[h.uuid]=c,e[c]=h,t[u]=l,e[l]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],v=p[l],m=p[c];p[c]=v,p[l]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],c=u.uuid,l=t[c];if(void 0!==l)if(delete t[c],l<i){var h=--i,f=e[h],d=--a,p=e[d];t[f.uuid]=l,e[l]=f,t[p.uuid]=h,e[h]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[h],b=g[d];g[l]=y,g[h]=b,g.pop()}}else{var _=--a,w=e[_];_>0&&(t[w.uuid]=l),e[l]=w,e.pop();for(var x=0,k=r;x!==k;++x){var S=n[x];S[l]=S[_],S.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,c=new Array(s.length);n[e]=r=i.length,a.push(e),o.push(t),i.push(c);for(var l=u,h=s.length;l!==h;++l)c[l]=new Cx(s[l],e,t);return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}().prototype.isAnimationObjectGroup=!0;var Ax=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;Object(l.a)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),u={endingStart:2400,endingEnd:2400},c=0;c!==o;++c){var h=a[c].createInterpolant(null);s[c]=h,h.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Object(h.a)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=r/i;e.warp(1,i/r,t),this.warp(a,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case 2501:for(var l=0,h=u.length;l!==h;++l)u[l].evaluate(o),c[l].accumulateAdditive(s);break;case 2500:default:for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(o),c[f].accumulate(r,s)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=2202===n;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r=e>0?t:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}();(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return Object(h.a)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(u[s]=c={});for(var l=0;l!==i;++l){var h=r[l],f=h.name,d=c[f];if(void 0!==d)a[l]=d;else{if(void 0!==(d=a[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}++(d=new yx(Cx.create(n,f,t&&t._propertyBindings[l].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[l]=d}o[l].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(r[t]=a={}),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Iw(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"==typeof e?Ww.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:2500),void 0!==s){var c=s.actionByRoot[i];if(void 0!==c&&c.blendMode===n)return c;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var l=new Ax(this,a,t,n);return this._bindAction(l,u),this._addInactiveAction(l,o,i),l}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Ww.findByName(n,e):e,a=this._actionsByClip[i?i.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){for(var t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,i,a);for(var s=this._bindings,u=this._nActiveBindings,c=0;c!==u;++c)s[c].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n})(op).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var Mx=function(){function e(t){Object(l.a)(this,e),"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return Object(h.a)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();(function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(l.a)(this,n),(i=t.call(this,e,r)).meshPerAttribute=a,i}return Object(h.a)(n,[{key:"copy",value:function(e){return Object(Be.a)(Object(He.a)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=Object(Be.a)(Object(He.a)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n})(Hb).prototype.isInstancedInterleavedBuffer=!0,function(){function e(t,n,r,i,a){Object(l.a)(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return Object(h.a)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}().prototype.isGLBufferAttribute=!0;var jx=new mp,Px=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mp(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mp(-1/0,-1/0);Object(l.a)(this,e),this.min=t,this.max=n}return Object(h.a)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=jx.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return jx.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Px.prototype.isBox2=!0;var Rx=new Mp,Ix=new Mp,Dx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp;Object(l.a)(this,e),this.start=t,this.end=n}return Object(h.a)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Rx.subVectors(e,this.start),Ix.subVectors(this.end,this.start);var n=Ix.dot(Ix),r=Ix.dot(Rx)/n;return t&&(r=fp(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Fx=new Mp,Lx=new sv,Nx=new sv,Bx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(l.a)(this,n);for(var i=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),a=new dm,o=[],s=[],u=new Qv(0,0,1),c=new Qv(0,1,0),h=0;h<i.length;h++){var f=i[h];f.parent&&f.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(u.r,u.g,u.b),s.push(c.r,c.g,c.b))}a.setAttribute("position",new am(o,3)),a.setAttribute("color",new am(s,3));var d=new v_({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,d)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return Object(h.a)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");Nx.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(Lx.multiplyMatrices(Nx,s.matrixWorld),Fx.setFromMatrixPosition(Lx),i.setXYZ(o,Fx.x,Fx.y,Fx.z),Lx.multiplyMatrices(Nx,s.parent.matrixWorld),Fx.setFromMatrixPosition(Lx),i.setXYZ(o+1,Fx.x,Fx.y,Fx.z),o+=2)}r.getAttribute("position").needsUpdate=!0,Object(Be.a)(Object(He.a)(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(S_),Hx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;Object(l.a)(this,n),a=new Qv(a),o=new Qv(o);for(var s=i/2,u=r/i,c=r/2,h=[],f=[],d=0,p=0,v=-c;d<=i;d++,v+=u){h.push(-c,0,v,c,0,v),h.push(v,0,-c,v,0,c);var m=d===s?a:o;m.toArray(f,p),m.toArray(f,p+=3),m.toArray(f,p+=3),m.toArray(f,p+=3),p+=3}var g=new dm;g.setAttribute("position",new am(h,3)),g.setAttribute("color",new am(f,3));var y=new v_({vertexColors:!0,toneMapped:!1});return(e=t.call(this,g,y)).type="GridHelper",e}return n}(S_),Ux=function(){function e(){Object(l.a)(this,e),this.type="ShapePath",this.color=new Qv,this.subPaths=[],this.currentPath=null}return Object(h.a)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new J_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new Q_;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[a],u=-u,s=t[i],c=-c),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var l=c*(e.x-o.x)-u*(e.y-o.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i,a,o,s=Sw.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var c=[];if(1===u.length)return a=u[0],(o=new Q_).curves=a.curves,c.push(o),c;var l=!s(u[0].getPoints());l=e?!l:l;var h,f,d=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(h=(a=u[g]).getPoints()),(i=e?!i:i)?(!l&&p[m]&&m++,p[m]={s:new Q_,p:h},p[m].s.curves=a.curves,l&&m++,v[m]=[]):v[m].push({h:a,p:h[0]});if(!p[0])return n(u);if(p.length>1){for(var b=!1,_=[],w=0,x=p.length;w<x;w++)d[w]=[];for(var k=0,S=p.length;k<S;k++)for(var E=v[k],O=0;O<E.length;O++){for(var T=E[O],C=!0,A=0;A<p.length;A++)r(T.p,p[A].p)&&(k!==A&&_.push({froms:k,tos:A,hole:O}),C?(C=!1,d[A].push(T)):b=!0);C&&d[k].push(T)}_.length>0&&(b||(v=d))}for(var M=0,j=p.length;M<j;M++){c.push(o=p[M].s);for(var P=0,R=(f=v[M]).length;P<R;P++)o.holes.push(f[P].h)}return c}}]),e}(),Vx=new Float32Array(1);new Int32Array(Vx.buffer),j_.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(j_.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},J_.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Hx.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Bx.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Xw.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),px.extractUrlBase(e)},Xw.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Px.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Px.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Px.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Px.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Rp.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Rp.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Rp.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Rp.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Rp.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Qp.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ym.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Dx.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},yp.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},yp.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},yp.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},yp.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},yp.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},yp.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},sv.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},sv.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},sv.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Mp).setFromMatrixColumn(this,3)},sv.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},sv.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},sv.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},sv.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},sv.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},sv.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},sv.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},sv.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},sv.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},sv.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},sv.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},sv.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},sv.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},sv.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},sv.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},sv.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Km.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Ap.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Ap.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ov.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},ov.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},ov.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},zv.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},zv.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},zv.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},zv.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},zv.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},zv.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),zv.getBarycoord(e,t,n,r,i)},zv.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),zv.getNormal(e,t,n,r)},Q_.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Q_.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Tw(this,e)},Q_.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Aw(this,e)},mp.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},mp.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},mp.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Mp.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Mp.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Mp.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Mp.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Mp.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Mp.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Mp.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Mp.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Mp.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Op.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Op.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Pv.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Pv.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Pv.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Pv.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Pv.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Pv.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),jm.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(jm.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),c_.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Bm.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ex.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(nm.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),nm.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},nm.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},nm.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},dm.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},dm.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new nm(arguments[1],arguments[2])))},dm.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},dm.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},dm.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},dm.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},dm.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(dm.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Hb.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},Hb.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Tw.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Tw.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Tw.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Bb.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Mx.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Gv.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Qv}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Lm.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Nb.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Nb.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Nb.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Nb.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Nb.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Nb.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Nb.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Nb.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Nb.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Nb.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Nb.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Nb.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Nb.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Nb.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Nb.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Nb.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Nb.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Nb.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Nb.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Nb.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Nb.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Nb.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Nb.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Nb.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Nb.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Nb.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Ob.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Tp.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),mx.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new vx).load(e,(function(e){t.setBuffer(e)})),this},gx.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Hm.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Hm.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},xp.crossOrigin=void 0,xp.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new $w;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},xp.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Qw;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},xp.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},xp.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"135"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="135");var zx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Zw(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)}},{key:"parse",value:function(e){return new Wx(e)}}]),n}(Xw),Wx=function(){function e(t){Object(l.a)(this,e),this.type="Font",this.data=t}return Object(h.a)(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=Gx(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}]),e}();function Gx(e,t,n){for(var r=Array.from(e),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=a;else{var h=Kx(l,i,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}function Kx(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,u,c,l,h,f,d,p=new Ux;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),m=0,g=v.length;m<g;)switch(v[m++]){case"m":o=v[m++]*t+n,s=v[m++]*t+r,p.moveTo(o,s);break;case"l":o=v[m++]*t+n,s=v[m++]*t+r,p.lineTo(o,s);break;case"q":u=v[m++]*t+n,c=v[m++]*t+r,l=v[m++]*t+n,h=v[m++]*t+r,p.quadraticCurveTo(l,h,u,c);break;case"b":u=v[m++]*t+n,c=v[m++]*t+r,l=v[m++]*t+n,h=v[m++]*t+r,f=v[m++]*t+n,d=v[m++]*t+r,p.bezierCurveTo(l,h,f,d,u,c)}return{offsetX:a.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}Wx.prototype.isFont=!0;var qx=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.a)(this,n);var a=i.font;if(!a||!a.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),Object(ip.a)(r,new dm);var o=a.generateShapes(e,i.size);return i.depth=void 0!==i.height?i.height:50,void 0===i.bevelThickness&&(i.bevelThickness=10),void 0===i.bevelSize&&(i.bevelSize=8),void 0===i.bevelEnabled&&(i.bevelEnabled=!1),(r=t.call(this,o,i)).type="TextGeometry",r}return n}(Tw),Xx=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"parse",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==n.binary&&n.binary,i=[],a=0;e.traverse((function(e){if(e.isMesh){var t=e.geometry;if(!0!==t.isBufferGeometry)throw new Error("THREE.STLExporter: Geometry is not of type THREE.BufferGeometry.");var n=t.index,r=t.getAttribute("position");a+=null!==n?n.count/3:r.count/3,i.push({object3d:e,geometry:t})}}));var o=80;if(!0===r){var s=2*a+3*a*4*4+80+4,u=new ArrayBuffer(s);(t=new DataView(u)).setUint32(o,a,!0),o+=4}else t="",t+="solid exported\n";for(var c=new Mp,l=new Mp,h=new Mp,f=new Mp,d=new Mp,p=new Mp,v=0,m=i.length;v<m;v++){var g=i[v].object3d,y=i[v].geometry,b=y.index,_=y.getAttribute("position");if(null!==b)for(var w=0;w<b.count;w+=3){var x=b.getX(w+0),k=b.getX(w+1),S=b.getX(w+2);A(x,k,S,_,g)}else for(var E=0;E<_.count;E+=3){var O=E+0,T=E+1,C=E+2;A(O,T,C,_,g)}}return!1===r&&(t+="endsolid exported\n"),t;function A(e,n,i,a,s){c.fromBufferAttribute(a,e),l.fromBufferAttribute(a,n),h.fromBufferAttribute(a,i),!0===s.isSkinnedMesh&&(s.boneTransform(e,c),s.boneTransform(n,l),s.boneTransform(i,h)),c.applyMatrix4(s.matrixWorld),l.applyMatrix4(s.matrixWorld),h.applyMatrix4(s.matrixWorld),M(c,l,h),j(c),j(l),j(h),!0===r?(t.setUint16(o,0,!0),o+=2):(t+="\t\tendloop\n",t+="\tendfacet\n")}function M(e,n,i){f.subVectors(i,n),d.subVectors(e,n),f.cross(d).normalize(),p.copy(f).normalize(),!0===r?(t.setFloat32(o,p.x,!0),t.setFloat32(o+=4,p.y,!0),t.setFloat32(o+=4,p.z,!0),o+=4):(t+="\tfacet normal "+p.x+" "+p.y+" "+p.z+"\n",t+="\t\touter loop\n")}function j(e){!0===r?(t.setFloat32(o,e.x,!0),t.setFloat32(o+=4,e.y,!0),t.setFloat32(o+=4,e.z,!0),o+=4):t+="\t\t\tvertex "+e.x+" "+e.y+" "+e.z+"\n"}}}]),e}(),Yx=function(){function e(t){Object(l.a)(this,e),this.top=0,this.array=new Float32Array(t)}return Object(h.a)(e,[{key:"write",value:function(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}]),e}(),Zx=function(){function e(t){Object(l.a)(this,e),this.top=0,this.array=new Float32Array(t)}return Object(h.a)(e,[{key:"write",value:function(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}]),e}(),Jx=function(){function e(t){Object(l.a)(this,e),this.plane=null,this.front=null,this.back=null,this.polygons=[],t&&this.build(t)}return Object(h.a)(e,[{key:"clone",value:function(){var t=new e;return t.plane=this.plane&&this.plane.clone(),t.front=this.front&&this.front.clone(),t.back=this.back&&this.back.clone(),t.polygons=this.polygons.map((function(e){return e.clone()})),t}},{key:"invert",value:function(){for(var e=0;e<this.polygons.length;e++)this.polygons[e].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();var t=this.front;this.front=this.back,this.back=t}},{key:"clipPolygons",value:function(e){if(!this.plane)return e.slice();for(var t=new Array,n=new Array,r=0;r<e.length;r++)this.plane.splitPolygon(e[r],t,n,t,n);return this.front&&(t=this.front.clipPolygons(t)),n=this.back?this.back.clipPolygons(n):[],t.concat(n)}},{key:"clipTo",value:function(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}},{key:"allPolygons",value:function(){var e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}},{key:"build",value:function(t){if(t.length){this.plane||(this.plane=t[0].plane.clone());for(var n=[],r=[],i=0;i<t.length;i++)this.plane.splitPolygon(t[i],this.polygons,this.polygons,n,r);n.length&&(this.front||(this.front=new e),this.front.build(n)),r.length&&(this.back||(this.back=new e),this.back.build(r))}}}]),e}(),Qx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(l.a)(this,e),this.x=t,this.y=n,this.z=r}return Object(h.a)(e,[{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"negate",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"times",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"dividedBy",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:"lerp",value:function(t,n){return this.add((new e).copy(t).sub(this).times(n))}},{key:"unit",value:function(){return this.dividedBy(this.length())}},{key:"length",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}},{key:"normalize",value:function(){return this.unit()}},{key:"cross",value:function(e){var t=this.clone(),n=t.x,r=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"toVector3",value:function(){return new Mp(this.x,this.y,this.z)}}]),e}(),$x=function(){function e(t,n){Object(l.a)(this,e),this.normal=t,this.w=n,this.normal=t,this.w=n}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.normal.clone(),this.w)}},{key:"flip",value:function(){this.normal.negate(),this.w=-this.w}},{key:"splitPolygon",value:function(t,n,r,i,a){for(var o=0,s=[],u=0;u<t.vertices.length;u++){var c=this.normal.dot(t.vertices[u].pos)-this.w,l=c<-e.EPSILON?2:c>e.EPSILON?1:0;o|=l,s.push(l)}switch(o){case 0:(this.normal.dot(t.plane.normal)>0?n:r).push(t);break;case 1:i.push(t);break;case 2:a.push(t);break;case 3:for(var h=[],f=[],d=0;d<t.vertices.length;d++){var p=(d+1)%t.vertices.length,v=s[d],m=s[p],g=t.vertices[d],y=t.vertices[p];if(2!=v&&h.push(g),1!=v&&f.push(2!=v?g.clone():g),3==(v|m)){var b=(this.w-this.normal.dot(g.pos))/this.normal.dot((new Qx).copy(y.pos).sub(g.pos)),_=g.interpolate(y,b);h.push(_),f.push(_.clone())}}h.length>=3&&i.push(new ek(h,t.shared)),f.length>=3&&a.push(new ek(f,t.shared))}}}],[{key:"fromPoints",value:function(t,n,r){var i=(new Qx).copy(n).sub(t).cross((new Qx).copy(r).sub(t)).normalize();return new e(i.clone(),i.dot(t))}}]),e}();$x.EPSILON=1e-5;var ek=function(){function e(t,n){Object(l.a)(this,e),this.vertices=t,this.shared=n,this.plane=$x.fromPoints(t[0].pos,t[1].pos,t[2].pos)}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.vertices.map((function(e){return e.clone()})),this.shared)}},{key:"flip",value:function(){this.vertices.reverse().map((function(e){return e.flip()})),this.plane.flip()}}]),e}(),tk=function(){function e(t,n,r,i){Object(l.a)(this,e),this.pos=(new Qx).copy(t),this.normal=(new Qx).copy(n),this.uv=(new Qx).copy(r),this.uv.z=0,i&&(this.color=(new Qx).copy(i))}return Object(h.a)(e,[{key:"clone",value:function(){return new e(this.pos,this.normal,this.uv,this.color)}},{key:"flip",value:function(){this.normal.negate()}},{key:"interpolate",value:function(t,n){return new e(this.pos.clone().lerp(t.pos,n),this.normal.clone().lerp(t.normal,n),this.uv.clone().lerp(t.uv,n),this.color&&t.color&&this.color.clone().lerp(t.color,n))}}]),e}(),nk=function(){function e(){Object(l.a)(this,e),this.polygons=new Array}return Object(h.a)(e,[{key:"clone",value:function(){var t=new e;return t.polygons=this.polygons.map((function(e){return e.clone()})).filter((function(e){return Number.isFinite(e.plane.w)})),t}},{key:"toPolygons",value:function(){return this.polygons}},{key:"union",value:function(t){var n=new Jx(this.clone().polygons),r=new Jx(t.clone().polygons);return n.clipTo(r),r.clipTo(n),r.invert(),r.clipTo(n),r.invert(),n.build(r.allPolygons()),e.fromPolygons(n.allPolygons())}},{key:"subtract",value:function(t){var n=new Jx(this.clone().polygons),r=new Jx(t.clone().polygons);return n.invert(),n.clipTo(r),r.clipTo(n),r.invert(),r.clipTo(n),r.invert(),n.build(r.allPolygons()),n.invert(),e.fromPolygons(n.allPolygons())}},{key:"intersect",value:function(t){var n=new Jx(this.clone().polygons),r=new Jx(t.clone().polygons);return n.invert(),r.clipTo(n),r.invert(),n.clipTo(r),r.clipTo(n),n.build(r.allPolygons()),n.invert(),e.fromPolygons(n.allPolygons())}},{key:"inverse",value:function(){var e,t=this.clone(),n=Object(o.a)(t.polygons);try{for(n.s();!(e=n.n()).done;)e.value.flip()}catch(r){n.e(r)}finally{n.f()}return t}},{key:"toMesh",value:function(t,n){return e.toMesh(this,t,n)}},{key:"toGeometry",value:function(t){return e.toGeometry(this,t)}}],[{key:"fromPolygons",value:function(t){var n=new e;return n.polygons=t,n}},{key:"fromGeometry",value:function(t,n){var r,i=[],a=t.attributes.position,s=t.attributes.normal,u=t.attributes.uv,c=t.attributes.color,l=t.groups;if(t.index)r=t.index.array;else{r=new Array(a.array.length/a.itemSize|0);for(var h=0;h<r.length;h++)r[h]=h}i=new Array(r.length/3|0);for(var f=0,d=0,p=r.length;f<p;f+=3,d++){for(var v=new Array(3),m=0;m<3;m++){var g=r[f+m],y=3*g,b=2*g,_=s.array[y],w=s.array[y+1],x=s.array[y+2],k=null==u?void 0:u.array[b],S=null==u?void 0:u.array[b+1];v[m]=new tk(new Qx(a.array[y],a.array[y+1],a.array[y+2]),new Qx(_,w,x),new Qx(k,S,0),c&&new Qx(c.array[b],c.array[b+1],c.array[b+2]))}if(void 0===n&&l&&l.length>0){var E,O=Object(o.a)(l);try{for(O.s();!(E=O.n()).done;){var T=E.value;r[f]>=T.start&&r[f]<T.start+T.count&&(i[d]=new ek(v,T.materialIndex))}}catch(C){O.e(C)}finally{O.f()}}else i[d]=new ek(v,n)}return e.fromPolygons(i.filter((function(e){return!isNaN(e.plane.normal.x)})))}},{key:"toGeometry",value:function(e,t){var n,r=0,i=e.polygons,a=Object(o.a)(i);try{for(a.s();!(n=a.n()).done;)r+=n.value.vertices.length-2}catch(E){a.e(E)}finally{a.f()}var s,u,c=new dm,l=new Yx(3*r*3),h=new Yx(3*r*3),f=new Zx(2*r*3),d=[],p=[],v=Object(o.a)(i);try{for(v.s();!(u=v.n()).done;){var m=u.value,g=m.vertices,y=g.length;void 0!==m.shared&&(d[m.shared]||(d[m.shared]=[])),y&&void 0!==g[0].color&&(s||(s=new Yx(3*r*3)));for(var b=3;b<=y;b++)(void 0===m.shared?p:d[m.shared]).push(l.top/3,l.top/3+1,l.top/3+2),l.write(g[0].pos),l.write(g[b-2].pos),l.write(g[b-1].pos),h.write(g[0].normal),h.write(g[b-2].normal),h.write(g[b-1].normal),f&&(f.write(g[0].uv),f.write(g[b-2].uv),f.write(g[b-1].uv)),s&&(s.write(g[0].color),s.write(g[b-2].color),s.write(g[b-1].color))}}catch(E){v.e(E)}finally{v.f()}c.setAttribute("position",new nm(l.array,3)),c.setAttribute("normal",new nm(h.array,3)),f&&c.setAttribute("uv",new nm(f.array,2)),s&&c.setAttribute("color",new nm(s.array,3));for(var _=0;_<d.length;_++)void 0===d[_]&&(d[_]=[]);if(d.length){for(var w=[],x=0,k=0;k<d.length;k++)c.addGroup(x,d[k].length,k),x+=d[k].length,w=w.concat(d[k]);c.addGroup(x,p.length,d.length),w=w.concat(p),c.setIndex(w)}var S=(new sv).copy(t).invert();return c.applyMatrix4(S),c.computeBoundingSphere(),c.computeBoundingBox(),c}},{key:"fromMesh",value:function(t,n){var r=e.fromGeometry(t.geometry,n),i=new Mp,a=new yp;a.getNormalMatrix(t.matrix);for(var o=0;o<r.polygons.length;o++)for(var s=r.polygons[o],u=0;u<s.vertices.length;u++){var c=s.vertices[u];c.pos.copy(i.copy(c.pos.toVector3()).applyMatrix4(t.matrix)),c.normal.copy(i.copy(c.normal.toVector3()).applyMatrix3(a))}return r}},{key:"toMesh",value:function(t,n,r){var i=e.toGeometry(t,n),a=new jm(i,r);return a.matrix.copy(n),a.matrix.decompose(a.position,a.quaternion,a.scale),a.rotation.setFromQuaternion(a.quaternion),a.updateMatrixWorld(),a.castShadow=a.receiveShadow=!0,a}},{key:"union",value:function(t,n){var r=e.fromMesh(t),i=e.fromMesh(n);return e.toMesh(r.union(i),t.matrix,t.material)}},{key:"subtract",value:function(t,n){var r=e.fromMesh(t),i=e.fromMesh(n);return e.toMesh(r.subtract(i),t.matrix,t.material)}},{key:"intersect",value:function(t,n){var r=e.fromMesh(t),i=e.fromMesh(n);return e.toMesh(r.intersect(i),t.matrix,t.material)}}]),e}(),rk=function(){return(rk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ik(e,t){if(1&e&&(r.Pb(0,"mat-card",8),r.Pb(1,"mat-card-title"),r.wc(2),r.Ob(),r.Pb(3,"mat-card-subtitle"),r.wc(4),r.Ob(),r.Ob()),2&e){var n=r.ac();r.zb(2),r.xc(n.errorStatus),r.zb(2),r.xc(n.errorMessage)}}function ak(e,t){1&e&&(r.Pb(0,"mat-icon",9),r.wc(1,"settings"),r.Ob())}function ok(e,t){if(1&e&&(r.Pb(0,"mat-option",10),r.wc(1),r.bc(2,"async"),r.bc(3,"manifest"),r.Ob()),2&e){var n=t.$implicit;r.gc("value",n),r.zb(1),r.yc("",r.cc(2,2,r.dc(3,4,n,"activityMode"))," ")}}var sk=function(e){return{"background-color":e}};function uk(e,t){if(1&e&&(r.Lb(0,"div",16),r.bc(1,"milestone"),r.bc(2,"date"),r.bc(3,"addTime"),r.bc(4,"addTime"),r.bc(5,"addTime"),r.bc(6,"addTime"),r.bc(7,"addTime"),r.bc(8,"date"),r.bc(9,"milestone"),r.bc(10,"date"),r.bc(11,"addTime"),r.bc(12,"addTime")),2&e){var n=t.$implicit,i=r.ac(2);r.gc("ngClass",i.poi?r.dc(1,3,r.dc(2,6,n.date,"y-M-d"),"class"):"")("ngStyle",r.ic(38,sk,"hsl("+(120*(100-r.dc(3,9,n.activities,i.calendarFilter)/864)/50-120)+", "+(r.dc(4,12,n.activities,i.calendarFilter)/86400>0?"100%":"0%")+", "+(r.dc(5,15,n.activities,i.calendarFilter)/86400>0?r.dc(6,18,n.activities,i.calendarFilter)/864>50?100-r.cc(7,21,n.activities)/864+"%":"50%":"90%")+")"))("matTooltip",r.dc(8,23,n.date,"y-M-d")+r.dc(9,26,r.dc(10,29,n.date,"y-M-d"),"text")+": "+i.Math.floor(r.dc(11,32,n.activities,i.calendarFilter)/86400*24)+"h "+i.Math.floor(r.dc(12,35,n.activities,i.calendarFilter)%3600/60)+"m")}}function ck(e,t){if(1&e){var n=r.Qb();r.Pb(0,"button",17),r.Wb("click",(function(){r.nc(n);var e=r.ac().$implicit,t=r.ac();return t.three(e,t.displayName,t.seasons.length)})),r.bc(1,"loadingReduce"),r.wc(2,"Download STL"),r.Ob()}if(2&e){var i=r.ac().$implicit,a=r.ac();r.gc("disabled",r.cc(1,2,a.loadingArray))("id","download"+i.number)}}var lk=function(e){return{width:e}};function hk(e,t){if(1&e&&(r.Pb(0,"div",11),r.Pb(1,"div",12),r.wc(2),r.bc(3,"activitiesTotalTime"),r.Ob(),r.Pb(4,"div",13),r.bc(5,"loadingReduce"),r.vc(6,uk,13,40,"div",14),r.Ob(),r.vc(7,ck,3,4,"button",15),r.Ob()),2&e){var n=t.$implicit,i=r.ac();r.gc("ngStyle",r.ic(10,lk,i.Math.ceil(n.days.length/7)+"em")),r.zb(2),r.zc("",n.name,"",i.seasonTimes?": "+r.cc(3,6,i.seasonActivities(n.days)):""," "),r.zb(2),r.gc("ngClass",r.cc(5,8,i.loadingArray)?"loading":""),r.zb(2),r.gc("ngForOf",n.days),r.zb(1),r.gc("ngIf",i.downloadButtons)}}var fk=function(){function e(e,t,n,r,i){this.dialog=e,this.manifestService=t,this.bungieQueue=n,this.bungieAuth=r,this.zone=i,this.membershipDataForCurrentUser$=new Yc(void 0),this.accountResponse$=new Yc([]),this.displayName="",this.downloadLink="",this.downloadButtons=!0,this.seasonTimes=!0,this.poi=!0,this.Math=Math}return e.prototype.addDay=function(e){var t=this;this.days[e.getFullYear()]||(this.days[e.getFullYear()]={}),this.days[e.getFullYear()][e.getMonth()+1]||(this.days[e.getFullYear()][e.getMonth()+1]={}),this.days[e.getFullYear()][e.getMonth()+1][e.getDate()]||(this.days[e.getFullYear()][e.getMonth()+1][e.getDate()]={date:new Date(e),activities:[]}),this.seasons.some((function(n){if(e>=n.startDate)return n.days.push(t.days[e.getFullYear()][e.getMonth()+1][e.getDate()]),!0})),this.flatDays.push(this.days[e.getFullYear()][e.getMonth()+1][e.getDate()])},e.prototype.ngOnInit=function(){var e=this;this.loadingArray=[],this.calendarFilter="0",this.subs=[],this.activities=[],this.days={},this.flatDays=[],this.seasons=[{number:15,name:"Season of the Lost",days:[],startDate:new Date("2021-8-24")},{number:14,name:"Season of the Splicer",days:[],startDate:new Date("2021-5-11")},{number:13,name:"Season of the Chosen",days:[],startDate:new Date("2021-2-9")},{number:12,name:"Season of the Hunt",days:[],startDate:new Date("2020-11-10")},{number:11,name:"Season of Arrivals",days:[],startDate:new Date("2020-6-9")},{number:10,name:"Season of the Worthy",days:[],startDate:new Date("2020-3-10")},{number:9,name:"Season of Dawn",days:[],startDate:new Date("2019-12-10")},{number:8,name:"Season of Undying",days:[],startDate:new Date("2019-10-1")},{number:7,name:"Season of Opulence",days:[],startDate:new Date("2019-6-4")},{number:6,name:"Season of the Drifter",days:[],startDate:new Date("2019-3-5")},{number:5,name:"Season of the Forge",days:[],startDate:new Date("2018-12-4")},{number:4,name:"Season of the Outlaw",days:[],startDate:new Date("2018-9-4")},{number:3,name:"Warmind",days:[],startDate:new Date("2018-5-8")},{number:2,name:"Curse of Osiris",days:[],startDate:new Date("2017-12-5")},{number:1,name:"Destiny 2",days:[],startDate:new Date("2017-9-5")}],this.flatDaysBS=new Yc([]),this.manifestService.state$.subscribe((function(t){t.loaded&&(e.modeOptions=Object.keys(e.manifestService.defs.ActivityMode.dbTable).map((function(t){return e.manifestService.defs.ActivityMode.dbTable[t].modeType})).sort())})),this.errorStatus="",this.errorMessage="";for(var t=new Date("2017-09-05T17:00:00Z"),n=new Date;t<=n;)this.addDay(t),t.setDate(t.getDate()+1);this.seasons.reverse(),this.seasons.forEach((function(t,n){t.startDateString=Object(f.t)(t.startDate,"shortDate",navigator.language||"en-US"),e.seasons[n+1]&&(t.endDateString=Object(f.t)(e.seasons[n+1].startDate,"shortDate",navigator.language||"en-US"))})),this.flatDaysBS.next(this.flatDays),this.yearKeys=Object.keys(this.days),this.monthKeys={},this.monthOffsets={2017:{9:0}};var r=0,i=28;this.dayKeys={},this.yearKeys.forEach((function(t){e.monthKeys[t]=Object.keys(e.days[t]),e.monthOffsets[t]||(e.monthOffsets[t]={}),e.dayKeys[t]={},e.monthKeys[t].forEach((function(n){e.monthOffsets[t][n]||(e.monthOffsets[t][n]=(i+r)%7,i=Object.keys(e.days[t][n]).length,r=e.monthOffsets[t][n]),e.dayKeys[t][n]=Object.keys(e.days[t][n])}))})),this.subs.push(this.bungieAuth.hasValidAccessToken$.pipe(wo(),Object(Je.a)((function(t){t&&e.bungieQueue.addToQueue("getProfile",yd,(function(t){e.membershipDataForCurrentUser$.next(t)}))}))).subscribe()),this.subs.push(this.membershipDataForCurrentUser$.pipe(wo(),Object(Fo.a)((function(t){var n,r;return y(null!==(r=null===(n=null==t?void 0:t.Response)||void 0===n?void 0:n.destinyMemberships.map((function(t){var n=new Yc(void 0);return e.bungieQueue.addToQueue("getProfile",md,(function(e){n.next(e),n.complete()}),{destinyMembershipId:t.membershipId,membershipType:t.membershipType,components:[100,200]}),n})))&&void 0!==r?r:Ms.a)})),Object(v.a)((function(t){return e.accountResponse$.next(t)}))).subscribe()),this.accountResponse$.pipe(wo(),Object(Je.a)((function(e){return console.log("accountResponse",e)})),Object(v.a)((function(e){return e[0]})),Object(v.a)((function(t){var n,r,i,a;1!==(null==t?void 0:t.ErrorCode)&&(null==t?void 0:t.ErrorStatus)&&(e.errorStatus=t.ErrorStatus,e.errorMessage=t.Message),e.displayName=null===(a=null===(i=null===(r=null===(n=null==t?void 0:t.Response)||void 0===n?void 0:n.profile)||void 0===r?void 0:r.data)||void 0===i?void 0:i.userInfo)||void 0===a?void 0:a.displayName}))).subscribe(),this.characters$=this.accountResponse$.pipe(wo(),Object(v.a)((function(t){for(var n=[],r=function(t){1!==(null==t?void 0:t.ErrorCode)&&(null==t?void 0:t.ErrorStatus)&&(e.errorStatus=t.ErrorStatus,e.errorMessage=t.Message);try{Object.keys(t.Response.characters.data).forEach((function(e){rk(rk({},t.Response.profile.data),t.Response.characters.data[e]),n.push(t.Response.characters.data[e])}))}catch(r){}},i=0,a=t;i<a.length;i++)r(a[i]);return n}))),this.minutesPlayedTotal=this.characters$.pipe(Object(v.a)((function(e){var t=0;return e.forEach((function(e){t+=+e.minutesPlayedTotal})),t}))),this.subs.push(this.characters$.pipe(wo()).subscribe((function(t){e.activities=[],t.forEach((function(t){var n={destinyMembershipId:t.membershipId,membershipType:t.membershipType,characterId:t.characterId,mode:0,count:250};e.addHistorySub(rk(rk({},n),{page:0})),e.addHistorySub(rk(rk({},n),{page:1})),e.addHistorySub(rk(rk({},n),{page:2}))}))})))},e.prototype.addHistorySub=function(e){var t=this,n={loading:!0};this.loadingArray.push(n);var r=e.page,i=new Yc(void 0);this.bungieQueue.addToQueue("getActivityHistory",gd,(function(e){i.next(e)}),e),this.subs.push(i.subscribe((function(i){1!==(null==i?void 0:i.ErrorCode)&&(null==i?void 0:i.ErrorStatus)&&(t.errorStatus=i.ErrorStatus,t.errorMessage=i.Message),(null==i?void 0:i.Response.activities)&&(null==i?void 0:i.Response.activities.length)&&(t.addHistorySub(rk(rk({},e),{page:r+3})),i.Response.activities.forEach((function(n){n.characterId=e.characterId;var r=new Date(new Date(n.period).getTime()-612e5).getTime()/1e3+n.values.startSeconds.basic.value,i=r+n.values.timePlayedSeconds.basic.value;n.startDate=new Date(1e3*r),n.endDate=new Date(1e3*i),t.activities.push(n);try{t.days[n.startDate.getUTCFullYear()][n.startDate.getUTCMonth()+1][n.startDate.getUTCDate()].activities.push(n)}catch(a){}t.flatDaysBS.next(t.flatDays)}))),i&&(n.loading=!1,t.flatDaysBS.next(t.flatDays))})))},e.prototype.ngOnDestroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e.prototype.seasonActivities=function(e){return e.reduce((function(e,t){return e.concat(t.activities)}),[])},e.prototype.three=function(e,t,n){this.zone.runOutsideAngular((function(r){for(var i,a,o,s,u,c,l,h=1;h<=n;h++)(i=document.getElementById("download"+h)).setAttribute("disabled","true");(i=document.getElementById("download"+e.number)).innerHTML="Generating...";var f=2.5;!function(){var r=new Bb,h=Math.sqrt(7.25-5*Math.cos(Math.PI/2)),d=Math.acos((h*h+6.25-1)/(2*h*2.5));u=Math.ceil(e.days.length/7+2)*f,a=new Rm(u,c=6.25,l=22.5);var p=new Mw,v=(o=new jm(a,p)).geometry.getAttribute("position");v.setXYZ(2,v.getX(2)+f,v.getY(2),v.getZ(2)+f),v.setXYZ(3,v.getX(3)+f,v.getY(3),v.getZ(3)-f),v.setXYZ(6,v.getX(6)-f,v.getY(6),v.getZ(6)-f),v.setXYZ(7,v.getX(7)-f,v.getY(7),v.getZ(7)+f),v.setXYZ(12,v.getX(12)-f,v.getY(12),v.getZ(12)+f),v.setXYZ(13,v.getX(13)+f,v.getY(13),v.getZ(13)+f),v.setXYZ(14,v.getX(14)-f,v.getY(14),v.getZ(14)-f),v.setXYZ(15,v.getX(15)+f,v.getY(15),v.getZ(15)-f),v.setXYZ(18,v.getX(18)-f,v.getY(18),v.getZ(18)+f),v.setXYZ(19,v.getX(19)+f,v.getY(19),v.getZ(19)+f),v.setXYZ(22,v.getX(22)+f,v.getY(22),v.getZ(22)-f),v.setXYZ(23,v.getX(23)-f,v.getY(23),v.getZ(23)-f),u=(Math.ceil(e.days.length/7+2)/2-1.5)*f,o.position.set(u,c=-c/2,l=7.5),o.updateMatrix();for(var m=0;m<e.days.length;m++){var g=m,y=e.days[m];if(y.activities.length){var b=y.activities.reduce((function(e,t){return e+t.values.timePlayedSeconds.basic.value}),0)/86400*24;a=new Rm(u=2.5,c=b*f,l=2.5),s=new jm(a,p),u=(Math.floor(g/7)-52*Math.floor(g/364))*f,c=b/2*f,l=(g%7+7*Math.floor(g/364))*f,s.position.set(u,c,l),s.updateMatrix(),o=nk.union(o,s)}}(new zx).load("assets/fonts/helvetiker_bold.typeface.json",(function(h){(a=new qx(e.name,{font:h,size:2.5,height:.625})).computeBoundingBox(),u=((Math.ceil(e.days.length/7)-a.boundingBox.max.x/f)/2-.5)*f,c=-4.375,l=20.5,(s=new jm(a,p)).position.set(u,c,l),s.rotateX(-d),s.updateMatrix(),o=nk.union(o,s),s.geometry.dispose(),a=new qx(t,{font:h,size:2.5,height:.625}),s=new jm(a,p),a.computeBoundingBox(),u=((Math.ceil(e.days.length/7)-a.boundingBox.max.x/f)/2-.5+a.boundingBox.max.x/f)*f,s.position.set(u,c=-4.375,l=-5.5),s.rotateX(d),s.rotateY(Math.PI),s.updateMatrix(),o=nk.union(o,s),e.startDateString&&(a=new qx(e.startDateString,{font:h,size:2.5,height:.625}),s=new jm(a,p),a.computeBoundingBox(),s.position.set(u=-5.5,c=-4.375,l=((7-a.boundingBox.max.x/f)/2-.5)*f),s.rotateZ(-d),s.rotateY(-Math.PI/2),s.updateMatrix(),o=nk.union(o,s)),e.endDateString&&(a=new qx(e.endDateString,{font:h,size:2.5,height:.625,curveSegments:12,bevelEnabled:!0,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0}),s=new jm(a,p),a.computeBoundingBox(),u=(Math.ceil(e.days.length/7)+1.2)*f,s.position.set(u,c=-4.375,l=((7-a.boundingBox.max.x/f)/2-.5+a.boundingBox.max.x/f)*f),s.rotateZ(d),s.rotateY(Math.PI/2),s.updateMatrix(),o=nk.union(o,s)),o.geometry.rotateX(Math.PI/2),o.updateMatrix(),r.add(o);var v=new Xx,m=document.createElement("a");m.style.display="none",document.body.appendChild(m);var g=v.parse(r);m.href=URL.createObjectURL(new Blob([g],{type:"text/plain"})),m.download=e.name+".stl",m.click(),r.remove(o),o.geometry.dispose(),i.innerHTML="Download STL";for(var y=1;y<=n;y++)(i=document.getElementById("download"+y)).removeAttribute("disabled")}))}()}))},e.\u0275fac=function(t){return new(t||e)(r.Kb(Ks),r.Kb(Td),r.Kb(Cd),r.Kb(cd),r.Kb(r.z))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-guardian-3d"]],decls:53,vars:34,consts:[["class","errorStatus",4,"ngIf"],[1,"mat-body-1"],[1,"mat-body-2"],["aria-label","Search for Guardian","class","spinner",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"calYear"],["class","calMonth",3,"ngStyle",4,"ngFor","ngForOf"],[1,"errorStatus"],["aria-label","Search for Guardian",1,"spinner"],[3,"value"],[1,"calMonth",3,"ngStyle"],[1,"monthLabel","mat-caption"],[1,"dayWrapper",3,"ngClass"],["class","calDay",3,"ngClass","ngStyle","matTooltip",4,"ngFor","ngForOf"],[3,"disabled","id","click",4,"ngIf"],[1,"calDay",3,"ngClass","ngStyle","matTooltip"],[3,"disabled","id","click"]],template:function(e,t){1&e&&(r.vc(0,ik,5,2,"mat-card",0),r.Pb(1,"div",1),r.wc(2," Name: "),r.Pb(3,"span",2),r.wc(4),r.Ob(),r.Lb(5,"br"),r.wc(6," Total Time in Destiny 2: "),r.Pb(7,"span",2),r.wc(8),r.bc(9,"hoursPlayed"),r.bc(10,"async"),r.Ob(),r.wc(11," = "),r.Pb(12,"span",2),r.wc(13),r.bc(14,"parseMinutesPlayed"),r.bc(15,"async"),r.Ob(),r.Lb(16,"br"),r.wc(17," Total Time in Activities: "),r.Pb(18,"span",2),r.wc(19),r.bc(20,"activitiesTotalHours"),r.Ob(),r.wc(21," = "),r.Pb(22,"span",2),r.wc(23),r.bc(24,"activitiesTotalTime"),r.Ob(),r.Lb(25,"br"),r.wc(26," Destiny 2 Activity Count: "),r.Pb(27,"span",2),r.wc(28),r.Ob(),r.vc(29,ak,2,0,"mat-icon",3),r.bc(30,"loadingReduce"),r.Lb(31,"br"),r.wc(32),r.bc(33,"currentStreak"),r.Lb(34,"br"),r.wc(35),r.bc(36,"longestStreaks"),r.Lb(37,"br"),r.wc(38," STL Download Buttons: "),r.Pb(39,"mat-checkbox",4),r.Wb("ngModelChange",(function(e){return t.downloadButtons=e})),r.Ob(),r.Lb(40,"br"),r.wc(41," Season Times: "),r.Pb(42,"mat-checkbox",4),r.Wb("ngModelChange",(function(e){return t.seasonTimes=e})),r.Ob(),r.Lb(43,"br"),r.wc(44," Points of Interest: "),r.Pb(45,"mat-checkbox",4),r.Wb("ngModelChange",(function(e){return t.poi=e})),r.Ob(),r.Lb(46,"br"),r.wc(47," Filter Heatmap: "),r.Pb(48,"mat-form-field"),r.Pb(49,"mat-select",4),r.Wb("ngModelChange",(function(e){return t.calendarFilter=e})),r.vc(50,ok,4,7,"mat-option",5),r.Ob(),r.Ob(),r.Ob(),r.Pb(51,"div",6),r.vc(52,hk,8,12,"div",7),r.Ob()),2&e&&(r.gc("ngIf",t.errorStatus),r.zb(4),r.xc(t.displayName),r.zb(4),r.xc(r.cc(9,16,r.cc(10,18,t.minutesPlayedTotal))),r.zb(5),r.xc(r.cc(14,20,r.cc(15,22,t.minutesPlayedTotal))),r.zb(6),r.xc(r.cc(20,24,t.activities)),r.zb(4),r.xc(r.cc(24,26,t.activities)),r.zb(5),r.xc(t.activities.length),r.zb(1),r.gc("ngIf",r.cc(30,28,t.loadingArray)),r.zb(3),r.yc(" Current Streak: ",r.cc(33,30,t.flatDays),""),r.zb(3),r.yc(" Longest Streaks: ",r.cc(36,32,t.flatDays),""),r.zb(4),r.gc("ngModel",t.downloadButtons),r.zb(3),r.gc("ngModel",t.seasonTimes),r.zb(3),r.gc("ngModel",t.poi),r.zb(4),r.gc("ngModel",t.calendarFilter),r.zb(1),r.gc("ngForOf",t.modeOptions),r.zb(2),r.gc("ngForOf",t.seasons))},directives:[f.l,uo,P,Ie,Xu,mc,f.k,mo,po,vo,mu,Ma,f.m,f.j,jc],pipes:[Nd,f.b,Bd,Hd,Ud,Vd,zd,Wd,jd,Ad,f.e,Md],styles:[".calYear[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:1em}.calMonth[_ngcontent-%COMP%]{margin-right:.5em;margin-bottom:.5em}.calMonth[_ngcontent-%COMP%], .dayWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dayWrapper[_ngcontent-%COMP%]{height:7em;flex-wrap:wrap}.calDay[_ngcontent-%COMP%]{display:block;width:1em;height:1em;box-sizing:border-box}.loading[_ngcontent-%COMP%] > .calDay[_ngcontent-%COMP%]{cursor:progress}.yearLabel[_ngcontent-%COMP%]{display:flex;align-items:center}.yearLabel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;transform:rotate(-90deg)}.monthSpacer[_ngcontent-%COMP%]{width:1em}.monthLabel[_ngcontent-%COMP%]{text-align:center}.release[_ngcontent-%COMP%]{border:2px solid #fff}.event[_ngcontent-%COMP%], .raid[_ngcontent-%COMP%]{border:1px solid #fff}.spinner[_ngcontent-%COMP%]{-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;height:1em;width:1em;display:inline-block;line-height:1em;font-size:.75em}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-webkit-keyframes spinX{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spinX{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.errorStatus[_ngcontent-%COMP%]{margin-bottom:.5em}"]}),e}();function dk(e,t){1&e&&r.Lb(0,"app-guardian")}function pk(e,t){1&e&&r.Lb(0,"app-guardian-3d")}var vk=function(){function e(e){this.bungieAuth=e}return e.prototype.calendarChange=function(e){this.calendar=e},e.\u0275fac=function(t){return new(t||e)(r.Kb(cd))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-root"]],decls:8,vars:7,consts:[[1,"appWrapper"],[1,"bungieStatus"],[1,"nav",3,"calendar","calendarChange"],[4,"ngIf"],[1,"footer"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.Lb(1,"app-bungie-status",1),r.Pb(2,"app-nav",2),r.Wb("calendarChange",(function(e){return t.calendarChange(e)})),r.Ob(),r.vc(3,dk,1,0,"app-guardian",3),r.bc(4,"async"),r.vc(5,pk,1,0,"app-guardian-3d",3),r.bc(6,"async"),r.Lb(7,"app-footer",4),r.Ob()),2&e&&(r.zb(2),r.gc("calendar",t.calendar),r.zb(1),r.gc("ngIf",r.cc(4,3,"gregorian"===t.calendar&&t.bungieAuth.hasValidAccessToken$)),r.zb(2),r.gc("ngIf",r.cc(6,5,"bungie"===t.calendar&&t.bungieAuth.hasValidAccessToken$)))},directives:[hd,pd,f.l,vd,tp,fk],pipes:[f.b],styles:[".appWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;min-height:100%;top:0;left:.5em}.bungieStatus[_ngcontent-%COMP%], .nav[_ngcontent-%COMP%]{margin-top:.5em}.content[_ngcontent-%COMP%]{flex-grow:1}.footer[_ngcontent-%COMP%]{margin-bottom:.5em}"]}),e}(),mk=[{path:"",component:function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-front-page"]],decls:2,vars:0,consts:[[1,"mat-body-1"]],template:function(e,t){1&e&&(r.Pb(0,"p",0),r.wc(1,"Welcome back, Guardian."),r.Ob())},styles:[""]}),e}()},{path:"**",redirectTo:"",pathMatch:"full"}],gk=function(){function e(){}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[Qf.forRoot(mk)],Qf]}),e}(),yk=function(){function e(){}return e.\u0275mod=r.Ib({type:e,bootstrap:[vk]}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},providers:[],imports:[[wn,Zi,Zu,Ha,Qa,lo,gu,Rc,Zs,gc,go,Ju,Ne,i.c,gk,tl,Gc.forRoot({name:"GtDb",version:1,objectStoresMeta:[{store:"pgcrs",storeConfig:{keyPath:"instanceId",autoIncrement:!1},storeSchema:[{name:"instanceId",keypath:"instanceId",options:{unique:!0}},{name:"period",keypath:"period",options:{unique:!1}},{name:"response",keypath:"response",options:{unique:!1}}]}]})]]}),e}();Object(r.S)(),bn().bootstrapModule(yk).catch((function(e){return console.log(e)}))},zx2A:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("LK+K"),s=n("7o/Q"),u=n("HDdC"),c=n("SeVD"),l=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this)).parent=e,i}return Object(i.a)(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(s.a),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(s.a);function f(e,t){if(!t.closed){if(e instanceof u.a)return e.subscribe(t);var n;try{n=Object(c.a)(e)(t)}catch(r){t.error(r)}return n}}}},[[0,0]]]);